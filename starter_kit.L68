00001000 Starting Address
Assembler used: EASy68K Editor/Assembler v5.16.01
Created On: 20/03/2019 20:26:04

00000000                             1  *-------------------------------------------------------
00000000                             2  * Author         : Michael Rainsford Ryan
00000000                             3  * Student Number : C00239510
00000000                             4  * Date Created   : 21/01/2019
00000000                             5  * Description    : A simplified, offline clone of the
00000000                             6  *                : online game "Avalon".
00000000                             7  * Issues/Bugs    : None currenty.
00000000                             8  *-------------------------------------------------------
00000000                             9  
00001000                            10      org $1000
00001000                            11  
00001000                            12  *-------------------------------------------------------
00001000                            13  *Choose to be a Worker or a God 
00001000                            14  *https://www.avalon-rpg.com/
00001000                            15  *-------------------------------------------------------
00001000                            16  
00001000                            17  *-------------------------------------------------------
00001000                            18  *-------------------Game Information-------------------
00001000                            19  *-------------------------------------------------------
00001000                            20  *A6 is used for player coordinates
00001000                            21  *A5 is used for enemy coordinates when in combat or looping through them
00001000                            22  *A4 occasionally used for displaying the inventory
00001000                            23  *D5 is used occasionally for input range
00001000                            24  *$5000 to $5FE0 holds maps
00001000                            25  *$5FF0 holds player information
00001000                            26  *$6000 to $7000 holds enemies
00001000                            27  
00001000                            28  *Enemies:
00001000                            29  *Byte:  Name
00001000                            30  *0      Health
00001000                            31  *1      Damage/level
00001000                            32  *2      enemy type (Knight, mage, rogue)
00001000                            33  *3      Alive state (1 == alive, 0 == dead)
00001000                            34  *4 & 5  Coordinates
00001000                            35  
00001000                            36  *Player:
00001000                            37  *Byte:  Name
00001000                            38  *0      Health
00001000                            39  *1      Damage/level
00001000                            40  *2      Class (Knight, mage, rogue)
00001000                            41  *3      Game state
00001000                            42  *4-5+A6 Coordinates
00001000                            43  *6-7    Last coordinates
00001000                            44  *8      Gold
00001000                            45  *9      Potions
00001000                            46  *A      Keys
00001000                            47      
00001000                            48  *Game state : 0 = Pick role/intro | 5 = Move around | 6 = Combat | 10 to 20 = Shop | 64 = End game
00001000                            49  *Class      : 1 corresponds to knight - 2 corresponds to mage - 3 corresponds to rogue
00001000                            50  
00001000                            51  
00001000                            52  *-------------------------------------------------------
00001000                            53  *Validation values to be used, modify as needed
00001000                            54  *Add additional validation values as required
00001000                            55  *-------------------------------------------------------
00001000  =00000000                 56  exit        EQU 0      used to exit assembly program
00001000                            57  
00001000  =00006000                 58  FIRST_ENEMY EQU $6000
00001000  =00000001                 59  ENEMY_MAX   EQU 1      Number of enemies in the game
00001000                            60  
00001000  =000000FF                 61  RED         EQU $000000FF   Red colour value
00001000  =0000FF00                 62  GREEN       EQU $0000FF00   Green colour value
00001000  =00FF0000                 63  BLUE        EQU $00FF0000   Blue colour value
00001000  =00FFFFFF                 64  WHITE       EQU $00FFFFFF   White colour value
00001000  =01090000                 65  FONT        EQU $01090000   Font value
00001000                            66  
00001000  =00005FF0                 67  PLAYER      EQU $5FF0       Memory address for player information and health
00001000  =00005FF1                 68  PLA_DAMAGE  EQU $5FF1       Memory address for player damage value
00001000  =00005FF2                 69  PLA_CLASS   EQU $5FF2       The memory address for the player class
00001000  =00005FF3                 70  GAME_STATE  EQU $5FF3       The memory address of the game state
00001000  =00005FF6                 71  PLA_P_POS   EQU $5FF6       Memory location of the player's previous position
00001000  =00005FF8                 72  PLA_GOLD    EQU $5FF8       Memory address for player gold
00001000  =00005FF9                 73  PLA_POTIONS EQU $5FF9       Memory address for player potions
00001000  =00005FFA                 74  PLA_KEYS    EQU $5FFA       Memory address for player keys
00001000                            75  
00001000  =00000001                 76  DAMAGE      EQU 1           The number of bytes to move from the charater before reaching the damage
00001000  =00000002                 77  CLASS       EQU 2           The number of bytes to move from the charater before reaching the class
00001000  =00000003                 78  ALIVE       EQU 3           The number of bytes to move from the charater before reaching the alive state
00001000  =00000004                 79  POSITION    EQU 4           The number of bytes to move from the charater before reaching the position
00001000                            80  
00001000  =00003201                 81  CSR_POS_MOVE    EQU $3201   The cursor position to draw the HUD to when in movement state
00001000  =00002001                 82  CSR_POS_BATTLE  EQU $2001   The cursor position to draw the HUD to when in battle state
00001000                            83  
00001000  =00005109                 84  WIN_POINT   EQU $5109       The position the player has to get to to win
00001000                            85  
00001000                            86  
00001000                            87  
00001000                            88  
00001000                            89  
00001000                            90  
00001000                            91  *Start of Game
00001000                            92  start:
00001000  6100 2BB4                 93      bsr     setup_player
00001004  6100 295A                 94      bsr     setup_world
00001008  6100 2B8C                 95      bsr     setup_enemies
0000100C                            96  
0000100C  6100 1FFC                 97      bsr     welcome    branch to the welcome subroutine
00001010  6100 2718                 98      bsr     press_continue
00001014  6100 1FEA                 99      bsr     game       branch to the game subroutine
00001018                           100  *Game loop
00003000                           101      org     $3000      the rest of the program is to be located from 3000 onwards
00003000                           102  
00003000                           103  *-------------------------------------------------------
00003000                           104  *-------------------Game Subroutine---------------------
00003000                           105  *-------------------------------------------------------
00003000                           106  game:
00003000  6100 0114                107      bsr     gameloop   branch to gameloop subroutine
00003004  4E75                     108      rts                return from game: subroutine
00003006                           109            
00003006                           110  end:
00003006  FFFF FFFF                111      simhalt
0000300A                           112  
0000300A                           113  *-------------------------------------------------------
0000300A                           114  *-------------------Welcome Subroutine------------------
0000300A                           115  *-------------------------------------------------------
0000300A                           116  welcome:
0000300A  6100 041C                117      bsr     endl            branch to endl subroutine
0000300E  43F9 00003BED            118      lea     welcome_msg,A1  assign message to address register A1
00003014  103C 000E                119      move.b  #14,D0          move literal 14 to DO
00003018  4E4F                     120      trap    #15             trap and interpret value in D0
0000301A  6100 040C                121      bsr     endl            branch to endl subroutine
0000301E                           122      
0000301E  4E75                     123      rts                     return from welcome: subroutine
00003020                           124  
00003020                           125  *-------------------------------------------------------
00003020                           126  *-------------------Role Picking Subroutine------------------
00003020                           127  *-------------------------------------------------------
00003020                           128  pick_role:
00003020                           129  
00003020  43F9 00003CB4            130      lea     wake_up_msg,A1  assign message to address register A1
00003026  103C 000E                131      move.b  #14,D0          move literal 14 to DO
0000302A  4E4F                     132      trap    #15             trap and interpret value in D0
0000302C  6100 03FA                133      bsr     endl            branch to endl subroutine
00003030                           134      
00003030  43F9 00003DCC            135      lea     pick_role_msg,A1 assign message to address register A1
00003036  103C 000E                136      move.b  #14,D0           move literal 14 to DO
0000303A  4E4F                     137      trap    #15              trap and interpret value in D0
0000303C                           138      
0000303C  7A03                     139      move.l  #3,D5           Move the number 3 to D5 to tell the program how many options there are
0000303E                           140      
0000303E  6100 0062                141      bsr     input           branch to the input subroutine
00003042                           142      
00003042  6100 06E6                143      bsr     press_continue          Pause the game until a key is pressed
00003046                           144      
00003046  4E75                     145      rts                     return from pick_role subroutine
00003048                           146      
00003048                           147  role_input:
00003048  11C1 5FF2                148      move.b  D1,PLA_CLASS    Move the role number to player class memory location to hold the class number
0000304C                           149      
0000304C                           150      *Give the player a message depending on the role chosen
0000304C  B23C 0001                151      CMP.B   #1,D1
00003050  6700 0014                152      BEQ     knight_select   Branch to knight message if role selected
00003054                           153      
00003054  B23C 0002                154      CMP.B   #2,D1
00003058  6700 0020                155      BEQ     mage_select     Branch to mage message if role selected
0000305C                           156      
0000305C  B23C 0003                157      CMP.B   #3,D1
00003060  6700 002C                158      BEQ     rogue_select    Branch to rogue message if role selected
00003064                           159      
00003064  4E75                     160      rts
00003066                           161      
00003066                           162  knight_select:
00003066  43F9 00003F9F            163      lea     knight_role_msg,A1 assign message to address register A1
0000306C  103C 000E                164      move.b  #14,D0          move literal 14 to DO
00003070  4E4F                     165      trap    #15             Display the knight message
00003072                           166      
00003072  11FC 0005 5FF3           167      move.b  #5,GAME_STATE   Change the game state to the movement state
00003078                           168      
00003078  4E75                     169      rts                     Return from the sub routine
0000307A                           170  
0000307A                           171  mage_select:
0000307A  43F9 00004040            172      lea     mage_role_msg,A1 assign message to address register A1
00003080  103C 000E                173      move.b  #14,D0          move literal 14 to DO
00003084  4E4F                     174      trap    #15             Display the mage message
00003086                           175      
00003086  11FC 0005 5FF3           176      move.b  #5,GAME_STATE   Change the game state to the movement state
0000308C                           177      
0000308C  4E75                     178      rts                     Return from the sub routine
0000308E                           179  
0000308E                           180  rogue_select:
0000308E  43F9 000040CE            181      lea     rogue_role_msg,A1 assign message to address register A1
00003094  103C 000E                182      move.b  #14,D0          move literal 14 to DO
00003098  4E4F                     183      trap    #15             Display the rogue message
0000309A                           184      
0000309A  11FC 0005 5FF3           185      move.b  #5,GAME_STATE   Change the game state to the movement state
000030A0                           186      
000030A0  4E75                     187      rts                     Return from the sub routin
000030A2                           188      
000030A2                           189  *-------------------------------------------------------
000030A2                           190  *---------Gameplay Input Values Subroutine--------------
000030A2                           191  *-------------------------------------------------------    
000030A2                           192  input:
000030A2  6100 0384                193      bsr     endl            Branch to end line subroutine
000030A6                           194      
000030A6  43F9 00003F43            195      lea     input_nums_msg,A1 assign message to address register A1
000030AC  103C 000E                196      move.b  #14,D0          move literal 14 to DO
000030B0  4E4F                     197      trap    #15             Display the "enter number" message
000030B2                           198      
000030B2  2205                     199      move.l  D5,D1           Move the number of options to D1 to display it
000030B4  103C 0003                200      move.b  #3,D0           move literal 3 to DO
000030B8  4E4F                     201      trap    #15             Display the number in D1 to show the input range
000030BA                           202      
000030BA  43F9 00003F5C            203      lea     colon_msg,A1    assign message to address register A1
000030C0  103C 000E                204      move.b  #14,D0          move literal 14 to DO
000030C4  4E4F                     205      trap    #15             Display a colon after the number range
000030C6                           206      
000030C6  103C 0004                207      move.b  #4,D0           Move the number 4 to D0
000030CA  4E4F                     208      trap    #15             Take input
000030CC                           209      
000030CC                           210  manage_input:
000030CC  B27C 0001                211      CMP     #1,D1           Check input against minimum value
000030D0  6D00 0028                212      BLT     invalid_input   Error if less than 1
000030D4                           213      
000030D4  B245                     214      CMP     D5,D1           Compare input against max value
000030D6  6E00 0022                215      BGT     invalid_input   Error if more than max value
000030DA                           216      
000030DA  0C38 0000 5FF3           217      CMP.B   #0,GAME_STATE   Check which state the game is in
000030E0  6700 FF66                218      BEQ     role_input      Branch to the manage input for the role picking
000030E4  0C38 0005 5FF3           219      CMP.B   #5,GAME_STATE   Check which state the game is in
000030EA  6700 0366                220      BEQ     wall_collisions Branch to the manage input for the movement
000030EE  0C38 0006 5FF3           221      CMP.B   #6,GAME_STATE   Check which state the game is in
000030F4  6600 0012                222      BNE     fake_gamestate  branch to display a message if the gamestate is undifined
000030F8                           223      
000030F8  4E75                     224      rts                     Return out of subroutine
000030FA                           225  
000030FA                           226  invalid_input:
000030FA  43F9 00003F5F            227      lea     input_error_msg,A1 assign message to address register A1
00003100  103C 000E                228      move.b  #14,D0          move literal 14 to DO
00003104  4E4F                     229      trap    #15             Display the error message
00003106                           230      
00003106  609A                     231      bra     input           Go back to taking input
00003108                           232      
00003108                           233  fake_gamestate:
00003108  43F9 00003F86            234      lea     fake_gamestate_msg,A1   Assign message to address register A1
0000310E  103C 000E                235      move.b  #14,D0                  move literal 14 to DO
00003112  4E4F                     236      trap    #15                     Display the error message
00003114  4E75                     237      rts
00003116                           238  
00003116                           239  *-------------------------------------------------------
00003116                           240  *----------------Gameloop (main loop)-------------------
00003116                           241  *------------------------------------------------------- 
00003116                           242  gameloop:
00003116  6100 02E2                243      bsr     clear_screen    clears the screen  
0000311A  6100 010C                244      bsr     draw            branch to draw screen subroutine
0000311E  6100 012C                245      bsr     draw_hud
00003122  6100 0008                246      bsr     update          branch to update game subroutine 
00003126  6100 0290                247      bsr     gameplay        branch to gameplay subroutine
0000312A  60EA                     248      bra     gameloop        Continue looping the game loop     
0000312C                           249  
0000312C                           250  *-------------------------------------------------------
0000312C                           251  *----------------Update Quest Progress------------------
0000312C                           252  *  Complete Quest
0000312C                           253  *------------------------------------------------------- 
0000312C                           254  update:
0000312C  0C38 0000 5FF0           255      CMP.B   #0,PLAYER           Check if the player health is zero
00003132  6F00 0020                256      BLE     player_dead         Player is dead if health is zero or below
00003136                           257      
00003136  BCFC 5109                258      CMP.W   #WIN_POINT,A6     Check if the player is standing on the win point
0000313A  6700 0034                259      BEQ     won_game            Branch to the won game subroutine
0000313E                           260  
0000313E  0C38 0005 5FF3           261      CMP.B   #5,GAME_STATE       Check which state the game is in
00003144  6700 0046                262      BEQ     enemy_check         Check for enemies if in movement state
00003148  0C38 0006 5FF3           263      CMP.B   #6,GAME_STATE       Check which state the game is in
0000314E  6700 00A0                264      BEQ     enemy_alive_check   Check if enemy is dead if in combat
00003152                           265      
00003152  4E75                     266      rts
00003154                           267      
00003154                           268  player_dead:
00003154  6100 02D2                269      bsr     endl            Break to new line
00003158                           270      
00003158  43F9 00004790            271      lea     death_msg,A1    Load the death message
0000315E  103C 000E                272      move.b  #14,D0          Move byte #14 to D0 for the trap command
00003162  4E4F                     273      trap    #15             Display the loaded message
00003164                           274  
00003164  6100 05C4                275      bsr     press_continue  Pause to get input
00003168  6100 0290                276      bsr     clear_screen    Clear the screen
0000316C  6000 FE98                277      bra     end             End the game
00003170                           278      
00003170                           279  won_game:
00003170  6100 02B6                280      bsr     endl            Break to new line
00003174                           281      
00003174  43F9 000047F5            282      lea     win_msg,A1      Load the win message
0000317A  103C 000E                283      move.b  #14,D0          Move byte #14 to D0 for the trap command
0000317E  4E4F                     284      trap    #15             Display the loaded message
00003180                           285  
00003180  6100 05A8                286      bsr     press_continue  Pause to get input
00003184  6100 0274                287      bsr     clear_screen    Clear the screen
00003188  6000 FE7C                288      bra     end             End the game
0000318C                           289      
0000318C                           290  enemy_check:
0000318C  4BF8 6000                291      lea     FIRST_ENEMY,A5  Load the enemy information into A5
00003190  564D                     292      add.w   #ALIVE,A5       Move into enemy information to check if its alive
00003192  0C15 0000                293      CMP.B   #0,(A5)         Check if the enemy is alive
00003196  6700 05C4                294      BEQ     return          Return from the check if the enemy is dead
0000319A                           295      
0000319A  524D                     296      add.w   #1,A5           Move from the enemy alive state to its position
0000319C  340E                     297      move.w  A6,D2           Move the player position to D2
0000319E                           298      
0000319E                           299      *Check if the player is beside an enemy
0000319E  0442 0010                300      sub.w   #16,D2          Check north
000031A2  B455                     301      CMP.W   (A5),D2           
000031A4  6700 0020                302      BEQ     enter_combat    Enter the player into combat
000031A8                           303      
000031A8  0642 0020                304      add.w   #32,D2          Check south
000031AC  B455                     305      CMP.W   (A5),D2           
000031AE  6700 0016                306      BEQ     enter_combat    Enter the player into combat
000031B2                           307      
000031B2  0442 0011                308      sub.w   #17,D2          Check west
000031B6  B455                     309      CMP.W   (A5),D2           
000031B8  6700 000C                310      BEQ     enter_combat    Enter the player into combat
000031BC                           311      
000031BC  5442                     312      add.w   #2,D2           Check east
000031BE  B455                     313      CMP.W   (A5),D2           
000031C0  6700 0004                314      BEQ     enter_combat    Enter the player into combat
000031C4                           315      
000031C4  4E75                     316      rts     Return if not touching an enemy
000031C6                           317      
000031C6                           318  enter_combat:
000031C6  594D                     319      sub.w   #4,A5               Get the memory address of the enemy opposed to it's position
000031C8  11FC 0006 5FF3           320      move.b  #6,GAME_STATE       Move to combat state
000031CE                           321      
000031CE  6100 0258                322      bsr     endl                Line break
000031D2                           323      
000031D2  43F9 0000422D            324      LEA     encounter_msg,A1    Load the encounter message int A1
000031D8  103C 000E                325      move.b  #14,D0              Move #14 to D0 to display message
000031DC  4E4F                     326      trap    #15                 Display the loaded message
000031DE                           327      
000031DE  6100 054A                328      bsr     press_continue      Branch to the press to continue subroutine
000031E2                           329      
000031E2  6100 0216                330      bsr     clear_screen        Clear the screen
000031E6                           331      
000031E6  6100 0056                332      bsr     draw_skeleton       Draw the enemy
000031EA  6100 0172                333      bsr     draw_battle_info    Draw the info
000031EE                           334      
000031EE  4E75                     335      rts
000031F0                           336      
000031F0                           337  enemy_alive_check:
000031F0  0C15 0000                338      CMP.B   #0,(A5)     Compare the enemy health with zero
000031F4  6F00 0004                339      BLE     enemy_died  If the enemy health is zero or below, they died
000031F8                           340      
000031F8  4E75                     341      rts
000031FA                           342      
000031FA                           343  enemy_died:
000031FA  6100 022C                344      bsr     endl            Break to a new line
000031FE                           345  
000031FE  43F9 0000475A            346      lea     battle_won_msg,A1   Load the won battle message
00003204  103C 000E                347      move.b  #14,D0              Move the literal #14 to D0 for trap task #14
00003208  4E4F                     348      trap    #15                 Display the message
0000320A                           349      
0000320A  11FC 0005 5FF3           350      move.b  #5,GAME_STATE   Set the game state mack to movement state
00003210  564D                     351      add.w   #ALIVE,A5       Move from the enemy health to its alive status
00003212  1ABC 0000                352      move.b  #0,(A5)         Set the enemy as dead
00003216                           353      
00003216  6100 0512                354      bsr     press_continue
0000321A                           355      
0000321A  6100 01DE                356      bsr     clear_screen    Clear the screen
0000321E  6100 0008                357      bsr     draw            Draw the map for first frame back in movement
00003222  6100 0028                358      bsr     draw_hud        Draw the hud for first frame back in movement
00003226                           359      
00003226  4E75                     360      rts
00003228                           361      
00003228                           362  *-------------------------------------------------------
00003228                           363  *-----------------Draw Quest Updates--------------------
00003228                           364  * Draw the game progress information, status regarding
00003228                           365  * quest
00003228                           366  *------------------------------------------------------- 
00003228                           367  draw:
00003228  0C38 0005 5FF3           368      CMP.B   #5,GAME_STATE   Check which state the game is in
0000322E  6700 052E                369      BEQ     draw_loop       If in the movement state, draw the map
00003232  0C38 0006 5FF3           370      CMP.B   #6,GAME_STATE   Check which state the game is in
00003238  6700 0004                371      BEQ     draw_skeleton   If in the combat state, draw the enemy
0000323C  4E75                     372      rts
0000323E                           373      
0000323E                           374  draw_skeleton:
0000323E  43F9 000042AE            375      lea     skeleton_msg,A1 Load the skeleton message
00003244  103C 000E                376      move.b  #14,D0          Move literal 14 for display message trap command
00003248  4E4F                     377      trap    #15             Display the loaded message
0000324A                           378      
0000324A  4E75                     379      rts
0000324C                           380      
0000324C                           381  draw_hud:
0000324C  0C38 0005 5FF3           382      CMP.B   #5,GAME_STATE       Check which state the game is in
00003252  6700 000E                383      BEQ     draw_player_info    If in the movement state, draw the player info
00003256  0C38 0006 5FF3           384      CMP.B   #6,GAME_STATE       Check which state the game is in
0000325C  6700 0100                385      BEQ     draw_battle_info     If in the combat state, draw the combat info
00003260                           386      
00003260  4E75                     387      rts
00003262                           388  
00003262                           389  draw_player_info:
00003262  323C 00FF                390      move.w  #255,D1         Move the word #255 to D1 to set the type of trap 11
00003266  103C 000B                391      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
0000326A  4E4F                     392      trap    #15             Trap to get the cursor position in D1
0000326C                           393      
0000326C  3601                     394      move.w  D1,D3           Move the current cursor position to D3 for later
0000326E                           395      
0000326E                           396      * Display the player health
0000326E  323C 3201                397      move.w  #CSR_POS_MOVE,D1           
00003272  4E4F                     398      trap    #15             Set the cursor position with trap command 11
00003274  4241                     399      clr     D1              Clear D1 of the cursor position
00003276                           400      
00003276  43F9 00004711            401      lea     health_msg,A1   Load the hud message
0000327C  103C 000E                402      move.b  #14,D0          Move literal 14 for display message trap command
00003280  4E4F                     403      trap    #15             Display the loaded message
00003282                           404      
00003282  1238 5FF0                405      move.b  PLAYER,D1       Move the player health value to D1 to display
00003286  103C 0003                406      move.b  #3,D0           Move literal 3 for display number trap command
0000328A  4E4F                     407      trap    #15             Display the number in D1
0000328C                           408      
0000328C                           409      * Display the torch life
0000328C  103C 000B                410      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
00003290  323C 3201                411      move.w  #CSR_POS_MOVE,D1         
00003294  5241                     412      add.w   #1,D1  
00003296  4E4F                     413      trap    #15             Set the cursor position with trap command 11
00003298  4241                     414      clr     D1              Clear D1 of the cursor position
0000329A                           415      
0000329A  43F9 00004729            416      lea     torch_msg,A1   Load the hud message
000032A0  103C 000E                417      move.b  #14,D0          Move literal 14 for display message trap command
000032A4  4E4F                     418      trap    #15             Display the loaded message
000032A6                           419      
000032A6  1238 5FF0                420      move.b  PLAYER,D1       Move the player health value to D1 to display
000032AA  103C 0003                421      move.b  #3,D0           Move literal 3 for display number trap command
000032AE  4E4F                     422      trap    #15             Display the number in D1
000032B0                           423      
000032B0                           424      * Display the inventory
000032B0  103C 000B                425      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
000032B4  323C 3201                426      move.w  #CSR_POS_MOVE,D1
000032B8  5441                     427      add.w   #2,D1          
000032BA  4E4F                     428      trap    #15             Set the cursor position with trap command 11
000032BC  4241                     429      clr     D1              Clear D1 of the cursor position
000032BE                           430      
000032BE  43F9 00004736            431      lea     inventory_msg,A1   Load the hud message
000032C4  103C 000E                432      move.b  #14,D0          Move literal 14 for display message trap command
000032C8  4E4F                     433      trap    #15             Display the loaded message
000032CA                           434      
000032CA                           435      * Display the player gold
000032CA  103C 000B                436      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
000032CE  323C 3201                437      move.w  #CSR_POS_MOVE,D1         
000032D2  5641                     438      add.w   #3,D1  
000032D4  4E4F                     439      trap    #15             Set the cursor position with trap command 11
000032D6  4241                     440      clr     D1              Clear D1 of the cursor position
000032D8                           441      
000032D8  43F9 00004741            442      lea     gold_msg,A1   Load the hud message
000032DE  103C 000E                443      move.b  #14,D0          Move literal 14 for display message trap command
000032E2  4E4F                     444      trap    #15             Display the loaded message
000032E4                           445      
000032E4  49F8 5FF8                446      lea     PLA_GOLD,A4
000032E8  6100 0052                447      bsr     draw_item_number
000032EC                           448      
000032EC                           449      * Display the player potions
000032EC  103C 000B                450      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
000032F0  323C 3201                451      move.w  #CSR_POS_MOVE,D1         
000032F4  5841                     452      add.w   #4,D1  
000032F6  4E4F                     453      trap    #15             Set the cursor position with trap command 11
000032F8  4241                     454      clr     D1              Clear D1 of the cursor position
000032FA                           455      
000032FA  43F9 00004750            456      lea     potions_msg,A1   Load the hud message
00003300  103C 000E                457      move.b  #14,D0          Move literal 14 for display message trap command
00003304  4E4F                     458      trap    #15             Display the loaded message
00003306                           459      
00003306  49F8 5FF9                460      lea     PLA_POTIONS,A4
0000330A  6100 0030                461      bsr     draw_item_number
0000330E                           462      
0000330E                           463      * Display the player keys
0000330E  103C 000B                464      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
00003312  323C 3201                465      move.w  #CSR_POS_MOVE,D1         
00003316  5A41                     466      add.w   #5,D1  
00003318  4E4F                     467      trap    #15             Set the cursor position with trap command 11
0000331A  4241                     468      clr     D1              Clear D1 of the cursor position
0000331C                           469      
0000331C  43F9 00004749            470      lea     key_msg,A1   Load the hud message
00003322  103C 000E                471      move.b  #14,D0          Move literal 14 for display message trap command
00003326  4E4F                     472      trap    #15             Display the loaded message
00003328                           473      
00003328  49F8 5FFA                474      lea     PLA_KEYS,A4
0000332C  6100 000E                475      bsr     draw_item_number
00003330                           476      
00003330  3203                     477      move.w  D3,D1           Move the current cursor position to D3 for later
00003332                           478      
00003332  103C 000B                479      move.b  #11,D0          Move the byte #11 to D0 for trap command 11          
00003336  4E4F                     480      trap    #15             Set the cursor position with trap command 11
00003338                           481      
00003338  4241                     482      clr     D1              Clear D1 for later use
0000333A                           483      
0000333A  4E75                     484      rts
0000333C                           485      
0000333C                           486  draw_item_number:
0000333C  103C 000E                487      move.b  #14,D0          Move literal 3 for display number trap command
00003340  43F9 0000478C            488      lea     bracket_open_msg,A1
00003346  4E4F                     489      trap    #15
00003348                           490  
00003348  103C 0003                491      move.b  #3,D0           Move literal 3 for display number trap command
0000334C  1214                     492      move.b  (A4),D1         Move the player health value to D1 to display
0000334E  4E4F                     493      trap    #15             Display the number in D1
00003350                           494      
00003350  103C 000E                495      move.b  #14,D0          Move literal 3 for display number trap command
00003354  43F9 0000478E            496      lea     bracket_close_msg,A1
0000335A  4E4F                     497      trap    #15
0000335C  4E75                     498      rts
0000335E                           499      
0000335E                           500  
0000335E                           501  draw_battle_info:
0000335E  323C 00FF                502      move.w  #255,D1         Move the word #255 to D1 to set the type of trap 11
00003362  103C 000B                503      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
00003366  4E4F                     504      trap    #15             Trap to get the cursor position in D1
00003368                           505      
00003368  3601                     506      move.w  D1,D3           Move the current cursor position to D3 for later
0000336A                           507      
0000336A                           508      * Move cursor to draw player info
0000336A  323C 2001                509      move.w  #CSR_POS_BATTLE,D1           
0000336E  4E4F                     510      trap    #15             Set the cursor position with trap command 11
00003370  4241                     511      clr     D1              Clear D1 of the cursor position
00003372                           512      
00003372  43F9 00004711            513      lea     health_msg,A1   Load the hud message
00003378  103C 000E                514      move.b  #14,D0          Move literal 14 for display message trap command
0000337C  4E4F                     515      trap    #15             Display the loaded message
0000337E                           516      
0000337E  1238 5FF0                517      move.b  PLAYER,D1       Move the player health value to D1 to display
00003382  103C 0003                518      move.b  #3,D0           Move literal 3 for display number trap command
00003386  4E4F                     519      trap    #15             Display the number in D1
00003388                           520      
00003388                           521      * Move the cursor to draw enemy info
00003388  103C 000B                522      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
0000338C  323C 2001                523      move.w  #CSR_POS_BATTLE,D1
00003390  5241                     524      add.w   #1,D1
00003392  4E4F                     525      trap    #15             Set the cursor position with trap command 11
00003394  4241                     526      clr     D1              Clear D1 of the cursor position
00003396                           527      
00003396  43F9 0000471A            528      lea     enemy_health_msg,A1 Load the hud message
0000339C  103C 000E                529      move.b  #14,D0              Move literal 14 for display message trap command
000033A0  4E4F                     530      trap    #15                 Display the loaded message
000033A2                           531      
000033A2  1238 6000                532      move.b  FIRST_ENEMY,D1  Move the player health value to D1 to display
000033A6  103C 0003                533      move.b  #3,D0           Move literal 3 for display number trap command
000033AA  4E4F                     534      trap    #15             Display the number in D1
000033AC                           535      
000033AC                           536      * Move the cursor back to its previous position
000033AC  3203                     537      move.w  D3,D1           Move the previous cursor position back to D1
000033AE  103C 000B                538      move.b  #11,D0          Move the byte #11 to D0 for trap command 11          
000033B2  4E4F                     539      trap    #15             Set the cursor position with trap command 11
000033B4                           540      
000033B4  4241                     541      clr     D1              Clear D1 for later use
000033B6                           542      
000033B6  4E75                     543      rts
000033B8                           544  
000033B8                           545  *-------------------------------------------------------
000033B8                           546  *---Game Play (Quest Progress)--------------------------
000033B8                           547  *------------------------------------------------------- 
000033B8                           548  gameplay:
000033B8  6100 006E                549      bsr     endl        Break to a new line
000033BC  0C38 0000 5FF3           550      CMP.B   #0,GAME_STATE     Check which stage the game is in
000033C2  6700 FC5C                551      BEQ     pick_role   branch to the pick role subroutine
000033C6  0C38 0005 5FF3           552      CMP.B   #5,GAME_STATE     Check which stage the game is in
000033CC  6700 0070                553      BEQ     movement    branch to the movement subroutine
000033D0  0C38 0006 5FF3           554      CMP.B   #6,GAME_STATE     Check which stage the game is in
000033D6  6700 01B2                555      BEQ     combat      branch to the combat subroutine
000033DA  4E75                     556      rts                 Return from 'gameplay' subroutine
000033DC                           557  
000033DC                           558  *-------------------------------------------------------
000033DC                           559  *------------------Screen Decoration--------------------
000033DC                           560  *-------------------------------------------------------
000033DC                           561  decorate:
000033DC  163C 003C                562      move.b  #60, D3
000033E0  6100 0046                563      bsr     endl
000033E4                           564  out:
000033E4  43F9 00003C84            565      lea     loop_msg,A1
000033EA  103C 000E                566      move.b  #14,D0
000033EE  4E4F                     567      trap    #15
000033F0  5343                     568      sub     #1,D3   decrement loop counter
000033F2  66F0                     569      bne     out     repeat until D0=0
000033F4  6100 0032                570      bsr     endl
000033F8  4E75                     571      rts
000033FA                           572      
000033FA                           573  clear_screen: 
000033FA  103C 000B                574      move.b  #11,D0      clear screen
000033FE  323C FF00                575      move.w  #$ff00,D1
00003402  4E4F                     576      trap    #15
00003404  4E75                     577      rts
00003406                           578  *-------------------------------------------------------
00003406                           579  *------------------------Replay-------------------------
00003406                           580  *-------------------------------------------------------
00003406                           581  replay:
00003406  6100 0020                582      bsr     endl
0000340A  43F9 00003C86            583      lea     replay_msg,A1
00003410  103C 000E                584      move.b  #14,D0
00003414  4E4F                     585      trap    #15
00003416                           586      
00003416  103C 0004                587      move.b  #4,D0
0000341A  4E4F                     588      trap    #15
0000341C                           589      
0000341C  B27C 0000                590      cmp     #exit,D1
00003420  6700 FBE4                591      beq     end         if SR Z register contains 1 beq => Branch Equals
00003424  6100 FCF0                592      bsr     gameloop
00003428                           593  
00003428                           594  endl:
00003428  48E7 8040                595      movem.l D0/A1,-(A7)
0000342C  303C 000E                596      move    #14,D0
00003430  43F9 00003BEA            597      lea     crlf,A1
00003436  4E4F                     598      trap    #15
00003438  4CDF 0201                599      movem.l (A7)+,D0/A1
0000343C  4E75                     600      rts
0000343E                           601          
0000343E                           602  *-------------------------------------------------------
0000343E                           603  *----------------------Manage Movement------------------
0000343E                           604  *-------------------------------------------------------
0000343E                           605  movement:
0000343E  43F9 00004161            606      lea     movement_msg,A1 Load the movement message
00003444  103C 000E                607      move.b  #14,D0          Move literal 14 for display message trap command
00003448  4E4F                     608      trap    #15             Display the loaded message
0000344A                           609  
0000344A  7A04                     610      move.l  #4,D5           Move the number 4 to D5 to tell the program how many options there are
0000344C                           611      
0000344C  6100 FC54                612      bsr     input           branch to the input subroutine
00003450  4E75                     613      rts
00003452                           614  
00003452                           615  *-------------------------------------------------------
00003452                           616  *-------------------Check Wall Collisions---------------
00003452                           617  *-------------------------------------------------------
00003452                           618  wall_collisions:
00003452                           619      *Check collisions in the movement direction
00003452  B23C 0001                620      CMP.B   #1,D1       Check the movement direction
00003456  6700 001C                621      BEQ     move_north  Branch to Display the corridor type
0000345A                           622      
0000345A  B23C 0002                623      CMP.B   #2,D1       Check the movement direction
0000345E  6700 0056                624      BEQ     move_south  Branch to Display the corridor type
00003462                           625      
00003462  B23C 0003                626      CMP.B   #3,D1       Check the movement direction
00003466  6700 0090                627      BEQ     move_west   Branch to Display the corridor type
0000346A                           628      
0000346A  B23C 0004                629      CMP.B   #4,D1       Check the movement direction
0000346E  6700 00C8                630      BEQ     move_east   Branch to Display the corridor type
00003472                           631      
00003472  4E75                     632      rts
00003474                           633      
00003474                           634  move_north:
00003474                           635      *Check if the tile is any of the corridor types with a wall at the top
00003474  0C16 0002                636      CMP.B   #2,(A6)
00003478  6700 00FE                637      BEQ     movement_blocked
0000347C  0C16 0003                638      CMP.B   #3,(A6)
00003480  6700 00F6                639      BEQ     movement_blocked
00003484  0C16 0006                640      CMP.B   #6,(A6)
00003488  6700 00EE                641      BEQ     movement_blocked
0000348C  0C16 0007                642      CMP.B   #7,(A6)
00003490  6700 00E6                643      BEQ     movement_blocked
00003494  0C16 000B                644      CMP.B   #11,(A6)
00003498  6700 00DE                645      BEQ     movement_blocked
0000349C  0C16 000C                646      CMP.B   #12,(A6)
000034A0  6700 00D6                647      BEQ     movement_blocked
000034A4  0C16 000D                648      CMP.B   #13,(A6)
000034A8  6700 00CE                649      BEQ     movement_blocked
000034AC                           650      
000034AC  31CE 5FF6                651      move.w  A6,PLA_P_POS        Move the player's previous location to a memory address for storage
000034B0  9CFC 0010                652      sub     #16,A6              Move the player north
000034B4                           653      
000034B4  4E75                     654      rts
000034B6                           655      
000034B6                           656  move_south:
000034B6                           657      *Check if the tile is any of the corridor types with a wall at the bottom
000034B6  0C16 0002                658      CMP.B   #2,(A6)
000034BA  6700 00BC                659      BEQ     movement_blocked
000034BE  0C16 0004                660      CMP.B   #4,(A6)
000034C2  6700 00B4                661      BEQ     movement_blocked
000034C6  0C16 0005                662      CMP.B   #5,(A6)
000034CA  6700 00AC                663      BEQ     movement_blocked
000034CE  0C16 0009                664      CMP.B   #9,(A6)
000034D2  6700 00A4                665      BEQ     movement_blocked
000034D6  0C16 000B                666      CMP.B   #11,(A6)
000034DA  6700 009C                667      BEQ     movement_blocked
000034DE  0C16 000D                668      CMP.B   #13,(A6)
000034E2  6700 0094                669      BEQ     movement_blocked
000034E6  0C16 000E                670      CMP.B   #14,(A6)
000034EA  6700 008C                671      BEQ     movement_blocked
000034EE                           672      
000034EE  31CE 5FF6                673      move.w  A6,PLA_P_POS        Move the player's previous location to a memory address for storage
000034F2  DCFC 0010                674      add     #16,A6              Move the player south
000034F6                           675      
000034F6  4E75                     676      rts
000034F8                           677  
000034F8                           678  move_west:
000034F8                           679      *Check if the tile is any of the corridor types with a wall to the left
000034F8  0C16 0001                680      CMP.B   #1,(A6)
000034FC  6700 007A                681      BEQ     movement_blocked
00003500  0C16 0003                682      CMP.B   #3,(A6)
00003504  6700 0072                683      BEQ     movement_blocked
00003508  0C16 0004                684      CMP.B   #4,(A6)
0000350C  6700 006A                685      BEQ     movement_blocked
00003510  0C16 0008                686      CMP.B   #8,(A6)
00003514  6700 0062                687      BEQ     movement_blocked
00003518  0C16 000B                688      CMP.B   #11,(A6)
0000351C  6700 005A                689      BEQ     movement_blocked
00003520  0C16 000C                690      CMP.B   #12,(A6)
00003524  6700 0052                691      BEQ     movement_blocked
00003528  0C16 000E                692      CMP.B   #14,(A6)
0000352C  6700 004A                693      BEQ     movement_blocked
00003530                           694      
00003530  31CE 5FF6                695      move.w  A6,PLA_P_POS        Move the player's previous location to a memory address for storage
00003534  534E                     696      sub     #1,A6               Move the player west
00003536                           697      
00003536  4E75                     698      rts
00003538                           699      
00003538                           700  move_east:
00003538                           701      *Check if the tile is any of the corridor types with a wall to the right
00003538  0C16 0001                702      CMP.B   #1,(A6)
0000353C  6700 003A                703      BEQ     movement_blocked
00003540  0C16 0005                704      CMP.B   #5,(A6)
00003544  6700 0032                705      BEQ     movement_blocked
00003548  0C16 0006                706      CMP.B   #6,(A6)
0000354C  6700 002A                707      BEQ     movement_blocked
00003550  0C16 000A                708      CMP.B   #10,(A6)
00003554  6700 0022                709      BEQ     movement_blocked
00003558  0C16 000C                710      CMP.B   #12,(A6)
0000355C  6700 001A                711      BEQ     movement_blocked
00003560  0C16 000D                712      CMP.B   #13,(A6)
00003564  6700 0012                713      BEQ     movement_blocked
00003568  0C16 000E                714      CMP.B   #14,(A6)
0000356C  6700 000A                715      BEQ     movement_blocked
00003570                           716      
00003570  31CE 5FF6                717      move.w  A6,PLA_P_POS            Move the player's previous location to a memory address for storage
00003574  524E                     718      add     #1,A6                   Move the player east
00003576                           719      
00003576  4E75                     720      rts
00003578                           721  
00003578                           722  movement_blocked:
00003578  43F9 000041DA            723      lea     movement_blocked_msg,A1 Load the message
0000357E  103C 000E                724      move.b  #14,D0                  Move the trap command to display a message
00003582  4E4F                     725      trap    #15                     Display the movement blocked message
00003584  6100 01A4                726      bsr     press_continue          Pause the game until a key is pressed
00003588                           727      
00003588  4E75                     728      rts                             Return from the subroutine
0000358A                           729      
0000358A                           730  *-------------------------------------------------------
0000358A                           731  *---------------------Manage Combat---------------------
0000358A                           732  *-------------------------------------------------------
0000358A                           733  combat:
0000358A  6100 FE9C                734      bsr endl                Break to a new line
0000358E                           735  
0000358E  43F9 00004265            736      lea     combat_msg,A1   Load the combat message
00003594  103C 000E                737      move.b  #14,D0          Move literal 14 for display message trap command
00003598  4E4F                     738      trap    #15             Display the loaded message
0000359A                           739  
0000359A  7A04                     740      move.l  #4,D5           Move the number 4 to D5 to tell the program how many options there are
0000359C                           741      
0000359C  6100 FB04                742      bsr     input           branch to the input subroutine
000035A0                           743      
000035A0  B23C 0001                744      CMP.B   #1,D1           Compare input with number literal 1
000035A4  6700 001C                745      BEQ     block_counter   Branch to block/counter subroutine
000035A8  B23C 0002                746      CMP.B   #2,D1           Compare input with number literal 1
000035AC  6700 002E                747      BEQ     cast_magic      Branch to cast magic subroutine
000035B0  B23C 0003                748      CMP.B   #3,D1           Compare input with number literal 1
000035B4  6700 0040                749      BEQ     melee_attack    Branch to melee subroutine
000035B8  B23C 0004                750      CMP.B   #4,D1           Compare input with number literal 1
000035BC  6700 0052                751      BEQ     try_run         Branch to try run subroutine
000035C0                           752      
000035C0  4E75                     753      rts
000035C2                           754      
000035C2                           755  block_counter:
000035C2  6100 017E                756      bsr     random_number       Get a random number 1-100
000035C6                           757      
000035C6  B47C 0021                758      CMP.W   #33,D2              Compare random with #33
000035CA  6F00 008C                759      BLE     both_block          Enemy tries to block - attack failed
000035CE  B47C 0042                760      CMP.W   #66,D2              Compare random with #66
000035D2  6F00 011E                761      BLE     hit_by_magic        Enemy casts magic - player takes damage      
000035D6  6E00 00E6                762      BGT     hit_against_melee   Enemy tried to lunge - enemy takes damage
000035DA                           763      
000035DA  4E75                     764      rts                         Return from subroutine
000035DC                           765      
000035DC                           766  cast_magic:
000035DC  6100 0164                767      bsr     random_number       Get a random number 1-100
000035E0                           768  
000035E0  B47C 0021                769      CMP.W   #33,D2              Compare random with #33
000035E4  6F00 00A8                770      BLE     hit_against_block    Enemy blocks - enemy takes damage
000035E8  B47C 0042                771      CMP.W   #66,D2              Compare random with #66
000035EC  6F00 007C                772      BLE     both_cast_magic     Enemy casts magic - attack fails     
000035F0  6E00 011C                773      BGT     hit_by_melee        Enemy lunges forward - player takes damage
000035F4                           774      
000035F4  4E75                     775      rts                         Return from subroutine
000035F6                           776  
000035F6                           777  melee_attack:
000035F6  6100 014A                778      bsr     random_number       Get a random number 1-100
000035FA                           779  
000035FA  B47C 0021                780      CMP.W   #33,D2              Compare random with #33
000035FE  6F00 00D6                781      BLE     hit_by_counter      Enemy blocks and counters - player takes damage
00003602  B47C 0042                782      CMP.W   #66,D2              Compare random with #66
00003606  6F00 009E                783      BLE     hit_against_magic   Enemy casts magic - player takes damage     
0000360A  6E00 0070                784      BGT     both_melee          Enemy lunges forward - attack fails
0000360E                           785      
0000360E  4E75                     786      rts                         Return from subroutine
00003610                           787  
00003610                           788  try_run:
00003610  6100 0130                789      bsr     random_number       Get a random number
00003614                           790      
00003614  B47C 0028                791      CMP.W   #40,D2              Compare the random number to 40
00003618  6D00 0006                792      BLT     escape_attack       If the random number is less than 40 the player escapes
0000361C  6C00 001E                793      BGE     fail_escape         If the random number is more than 40 the player gets damaged
00003620                           794      
00003620                           795  escape_attack:
00003620  3C78 5FF6                796      move.w  PLA_P_POS,A6    Move the player to their position before the battle
00003624  11FC 0005 5FF3           797      move.b  #5,GAME_STATE   Switch game state
0000362A                           798      
0000362A  43F9 000043D5            799      lea     escape_msg,A1   Load escape message
00003630  103C 000E                800      move.b  #14,D0          Move literal for trap command
00003634  4E4F                     801      trap    #15             Trap 15 to display messgae
00003636                           802      
00003636  6100 00F2                803      bsr     press_continue  Pause until the player presses to continue
0000363A                           804      
0000363A  4E75                     805      rts                     Return from subroutine
0000363C                           806      
0000363C                           807  fail_escape:
0000363C  43F9 000043F0            808      lea     fail_escape_msg,A1  Load fail escape message
00003642  103C 000E                809      move.b  #14,D0              Move literal for trap command
00003646  4E4F                     810      trap    #15                 Trap 15 to display message
00003648                           811      
00003648  524D                     812      add.w   #DAMAGE,A5           Move the enemy pointer to its damage value
0000364A  1A15                     813      move.b  (A5),D5             Store the damage value in D5
0000364C  534D                     814      sub.w   #DAMAGE,A5           Move the enemy pointer back to the enemy health/root
0000364E  9B38 5FF0                815      sub.b   D5,PLAYER           Remove the enemy's damage from the player's health
00003652                           816      
00003652  6100 00D6                817      bsr     press_continue      Pause until the player presses to continue
00003656  4E75                     818      rts
00003658                           819      
00003658                           820  both_block:
00003658  103C 000E                821      move.b  #14,D0
0000365C  43F9 0000442B            822      lea     both_block_msg,A1
00003662  4E4F                     823      trap    #15
00003664                           824      
00003664  6100 00C4                825      bsr     press_continue
00003668  4E75                     826      rts
0000366A                           827      
0000366A                           828  both_cast_magic:
0000366A  103C 000E                829      move.b  #14,D0
0000366E  43F9 00004450            830      lea     both_cast_magic_msg,A1
00003674  4E4F                     831      trap    #15
00003676                           832      
00003676  6100 00B2                833      bsr     press_continue
0000367A  4E75                     834      rts
0000367C                           835  
0000367C                           836  both_melee:
0000367C  103C 000E                837      move.b  #14,D0
00003680  43F9 000044A5            838      lea     both_melee_msg,A1
00003686  4E4F                     839      trap    #15  
00003688                           840      
00003688  6100 00A0                841      bsr     press_continue
0000368C  4E75                     842      rts
0000368E                           843  
0000368E                           844  hit_against_block:
0000368E  103C 000E                845      move.b  #14,D0
00003692  43F9 000044EE            846      lea     hit_against_block_msg,A1
00003698  4E4F                     847      trap    #15  
0000369A                           848      
0000369A  1A38 5FF1                849      move.b  PLA_DAMAGE,D5       Store the player damage value in D5
0000369E  9B15                     850      sub.b   D5,(A5)           Remove the player's damage from the enemy's health
000036A0                           851      
000036A0  6100 0088                852      bsr     press_continue
000036A4  4E75                     853      rts
000036A6                           854  
000036A6                           855  hit_against_magic:
000036A6  103C 000E                856      move.b  #14,D0
000036AA  43F9 00004536            857      lea     hit_against_magic_msg,A1
000036B0  4E4F                     858      trap    #15
000036B2                           859      
000036B2  1A38 5FF1                860      move.b  PLA_DAMAGE,D5       Store the player damage value in D5
000036B6  9B15                     861      sub.b   D5,(A5)           Remove the player's damage from the enemy's health
000036B8                           862      
000036B8  6100 0070                863      bsr     press_continue
000036BC  4E75                     864      rts
000036BE                           865  
000036BE                           866  hit_against_melee:
000036BE  103C 000E                867      move.b  #14,D0
000036C2  43F9 0000459A            868      lea     hit_against_melee_msg,A1
000036C8  4E4F                     869      trap    #15
000036CA                           870      
000036CA  1A38 5FF1                871      move.b  PLA_DAMAGE,D5       Store the player damage value in D5
000036CE  9B15                     872      sub.b   D5,(A5)           Remove the player's damage from the enemy's health
000036D0                           873      
000036D0  6100 0058                874      bsr     press_continue
000036D4  4E75                     875      rts
000036D6                           876  
000036D6                           877  hit_by_counter:
000036D6  103C 000E                878      move.b  #14,D0
000036DA  43F9 000045F0            879      lea     hit_by_counter_msg,A1
000036E0  4E4F                     880      trap    #15  
000036E2                           881      
000036E2  524D                     882      add.w   #DAMAGE,A5           Move the enemy pointer to its damage value
000036E4  1A15                     883      move.b  (A5),D5             Store the damage value in D5
000036E6  534D                     884      sub.w   #DAMAGE,A5           Move the enemy pointer back to the enemy health/root
000036E8  9B38 5FF0                885      sub.b   D5,PLAYER           Remove the enemy's damage from the player's health
000036EC                           886      
000036EC  6100 003C                887      bsr     press_continue
000036F0  4E75                     888      rts
000036F2                           889  
000036F2                           890  hit_by_magic:
000036F2  103C 000E                891      move.b  #14,D0
000036F6  43F9 00004653            892      lea     hit_by_magic_msg,A1
000036FC  4E4F                     893      trap    #15  
000036FE                           894      
000036FE  524D                     895      add.w   #DAMAGE,A5           Move the enemy pointer to its damage value
00003700  1A15                     896      move.b  (A5),D5             Store the damage value in D5
00003702  534D                     897      sub.w   #DAMAGE,A5           Move the enemy pointer back to the enemy health/root
00003704  9B38 5FF0                898      sub.b   D5,PLAYER           Remove the enemy's damage from the player's health
00003708                           899      
00003708  6100 0020                900      bsr     press_continue
0000370C  4E75                     901      rts
0000370E                           902  
0000370E                           903  hit_by_melee:
0000370E  103C 000E                904      move.b  #14,D0
00003712  43F9 000046C3            905      lea     hit_by_melee_msg,A1
00003718  4E4F                     906      trap    #15
0000371A                           907      
0000371A  524D                     908      add.w   #DAMAGE,A5           Move the enemy pointer to its damage value
0000371C  1A15                     909      move.b  (A5),D5             Store the damage value in D5
0000371E  534D                     910      sub.w   #DAMAGE,A5           Move the enemy pointer back to the enemy health/root
00003720  9B38 5FF0                911      sub.b   D5,PLAYER           Remove the enemy's damage from the player's health
00003724                           912      
00003724  6100 0004                913      bsr     press_continue
00003728  4E75                     914      rts
0000372A                           915  
0000372A                           916  *-------------------------------------------------------
0000372A                           917  *-------------------Misc Subroutines--------------------
0000372A                           918  *-------------------------------------------------------
0000372A                           919  press_continue:
0000372A  6100 FCFC                920      bsr     endl
0000372E                           921  
0000372E  43F9 000041F5            922      lea     continue_msg,A1 Load message into A1
00003734  103C 000E                923      move.b  #14,D0          Move the trap command to display a message
00003738  4E4F                     924      trap    #15             display the "press any ket to continue" text
0000373A                           925      
0000373A  103C 0004                926      move.b  #4,D0           Move the trap command to take input
0000373E  4E4F                     927      trap    #15             take input to freeze the game
00003740  4E75                     928      rts                     Return from the 'press continue' subroutine
00003742                           929      
00003742                           930  random_number:              *Psuedo random number generator, courtesy of Pdraig
00003742  103C 0008                931      move.b  #8,D0
00003746  4E4F                     932      trap    #15
00003748  C2BC 005FFFFF            933      and.l   #$5FFFFF,d1     prevent overflow in divu
0000374E  82FC 0064                934      divu    #100,D1         time count / 100
00003752  4841                     935      swap    D1              swap upper and lower words of D1 to put remainder in low word
00003754  5241                     936      addq.w  #1,D1           d1.w contains number from 1 to 100
00003756  3401                     937      move    D1,D2           d2 = d1
00003758  4281                     938      clr.l   D1
0000375A                           939      
0000375A  4E75                     940      rts                     Returns from random generation subroutine
0000375C                           941      
0000375C                           942  return:   *Subroutine to branch to to break out of a subroutine when a condition is met
0000375C  4E75                     943      rts
0000375E                           944      
0000375E                           945  *-------------------------------------------------------
0000375E                           946  *----------------------Draw loop------------------------
0000375E                           947  *-------------------------------------------------------
0000375E                           948  draw_loop:
0000375E  45F8 5000                949      lea     $5000,A2        Load starting memory location into A7
00003762  1C3C 0000                950      move.b  #0,D6           Data register used for rows
00003766  1E3C 0000                951      move.b  #0,D7           Data register used for columns
0000376A  7200                     952      move.l  #0,D1           Clear the D1 data register
0000376C                           953      
0000376C  6100 0004                954      bsr     loop_rows       Loop for every row
00003770  4E75                     955      rts
00003772                           956      
00003772                           957  loop_rows:
00003772  BC7C 0016                958      CMP     #22,D6          Check the rows don't go out of bounds
00003776  6EE4                     959      BGT     return        If the rows are greater than 22 end the loop
00003778                           960      
00003778  1E3C 0000                961      move.b  #0,D7           Reset to column 0
0000377C  6100 000A                962      bsr     loop_columns    Loop for every column
00003780                           963      
00003780  5206                     964      add.b   #1,D6           Add to the rows
00003782                           965      
00003782  6100 FCA4                966      bsr     endl            Break to the next line
00003786  60EA                     967      bra     loop_rows       Loop through the rows again
00003788                           968      
00003788                           969  loop_columns:
00003788  BE3C 000F                970      CMP.B   #15,D7              Check the rows don't go out of bounds
0000378C  6ECE                     971      BGT     return            If the rows are greater than 22 end the loop
0000378E                           972      
0000378E  6100 0014                973      bsr     draw_tile           Draw the current tile
00003792  6100 00BA                974      bsr     check_for_player    Draw the player in the current tile if they're there
00003796  6100 010A                975      bsr     check_for_enemy     Draw an enemy in the current tile if they is one there
0000379A  6100 016E                976      bsr     check_for_win_point Draw the win point in the current tile if it's there
0000379E                           977      
0000379E  5207                     978      add.b   #1,D7               Add to the column count
000037A0  524A                     979      add     #1,A2               Move to the next memory location
000037A2  60E4                     980      bra     loop_columns        Loop the columns again
000037A4                           981      
000037A4                           982  *-------------------------------------------------------
000037A4                           983  *----------------------Draw tile------------------------
000037A4                           984  *-------------------------------------------------------
000037A4                           985  *Draws the tile at the address in the address register A2
000037A4                           986  draw_tile:
000037A4  0C12 00FF                987      CMP.B   #255,(A2)           Check if the value is undifined
000037A8  6700 005E                988      BEQ     draw_blocked_tile   Draw the blank tile
000037AC                           989      
000037AC  0C12 0001                990      CMP.B   #1,(A2)
000037B0  6700 0064                991      BEQ     draw_both_tile
000037B4  0C12 0003                992      CMP.B   #3,(A2)
000037B8  6700 006A                993      BEQ     draw_left_tile
000037BC  0C12 0004                994      CMP.B   #4,(A2)
000037C0  6700 0062                995      BEQ     draw_left_tile
000037C4  0C12 0005                996      CMP.B   #5,(A2)
000037C8  6700 0068                997      BEQ     draw_right_tile
000037CC  0C12 0006                998      CMP.B   #6,(A2)
000037D0  6700 0060                999      BEQ     draw_right_tile
000037D4  0C12 0008               1000      CMP.B   #8,(A2)
000037D8  6700 004A               1001      BEQ     draw_left_tile
000037DC  0C12 000A               1002      CMP.B   #10,(A2)
000037E0  6700 0050               1003      BEQ     draw_right_tile
000037E4  0C12 000B               1004      CMP.B   #11,(A2)
000037E8  6700 003A               1005      BEQ     draw_left_tile
000037EC  0C12 000C               1006      CMP.B   #12,(A2)
000037F0  6700 0024               1007      BEQ     draw_both_tile
000037F4  0C12 000D               1008      CMP.B   #13,(A2)
000037F8  6700 0038               1009      BEQ     draw_right_tile
000037FC  0C12 000E               1010      CMP.B   #14,(A2)
00003800  6700 0014               1011      BEQ     draw_both_tile
00003804                          1012      
00003804  6000 003A               1013      BRA     draw_blank_tile     Draw the blank tile
00003808                          1014      
00003808                          1015  draw_blocked_tile:
00003808  43F9 00004223           1016      lea     blocked_tile,A1
0000380E  103C 000E               1017      move.b  #14,D0
00003812  4E4F                    1018      trap    #15
00003814  4E75                    1019      rts
00003816                          1020      
00003816                          1021  draw_both_tile:
00003816  43F9 00004217           1022      lea     both_tile,A1
0000381C  103C 000E               1023      move.b  #14,D0
00003820  4E4F                    1024      trap    #15
00003822  4E75                    1025      rts
00003824                          1026      
00003824                          1027  draw_left_tile:
00003824  43F9 0000421B           1028      lea     left_tile,A1
0000382A  103C 000E               1029      move.b  #14,D0
0000382E  4E4F                    1030      trap    #15
00003830  4E75                    1031      rts
00003832                          1032      
00003832                          1033  draw_right_tile:
00003832  43F9 0000421F           1034      lea     right_tile,A1
00003838  103C 000E               1035      move.b  #14,D0
0000383C  4E4F                    1036      trap    #15
0000383E  4E75                    1037      rts
00003840                          1038      
00003840                          1039  draw_blank_tile:
00003840  43F9 00004213           1040      lea     blank_tile,A1
00003846  103C 000E               1041      move.b  #14,D0
0000384A  4E4F                    1042      trap    #15
0000384C  4E75                    1043      rts
0000384E                          1044      
0000384E                          1045  check_for_player:
0000384E  B4CE                    1046      CMP.W   A6,A2
00003850  6700 0004               1047      BEQ     draw_player
00003854  4E75                    1048      rts
00003856                          1049      
00003856                          1050  draw_player:
00003856  323C 00FF               1051      move.w  #255,D1         Move the word #255 to D1 to set the type of trap 11
0000385A  103C 000B               1052      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
0000385E  4E4F                    1053      trap    #15             Trap to get the cursor position in D1
00003860                          1054      
00003860  0441 0200               1055      sub.w   #512,D1         Move the cursor back by two columns
00003864  4E4F                    1056      trap    #15             Set the cursor position with trap command 11
00003866                          1057      
00003866  2601                    1058      move.l  D1,D3          Move the value in D1 to D3 for storage
00003868                          1059      
00003868  103C 0015               1060      move.b  #21,D0          Move #21 to D0 for trap command 21
0000386C  223C 0000FF00           1061      move.l  #GREEN,D1       Move the colour green to D1
00003872  243C 01090000           1062      move.l  #FONT,D2        Move the font to D2
00003878  4E4F                    1063      trap    #15             Set the colour
0000387A                          1064      
0000387A  43F9 00004227           1065      lea     player_mark,A1      load the player symbol
00003880  103C 000E               1066      move.b  #14,D0              Move #14 to D0 for trap command 14
00003884  4E4F                    1067      trap    #15                 Draw the player mark
00003886                          1068      
00003886  103C 0015               1069      move.b  #21,D0          Move #21 to D0 for trap command 21
0000388A  223C 00FFFFFF           1070      move.l  #WHITE,D1       Move the colour white to D1
00003890  4E4F                    1071      trap    #15             Set the colour
00003892  4281                    1072      clr.l   D1              Clear D1 for later use
00003894                          1073      
00003894  2203                    1074      move.l  D3,D1           Move the value in D3 to D1 for previous cursor position
00003896                          1075      
00003896  0641 0200               1076      add.w   #512,D1         Move the cursor position two columns forward
0000389A  103C 000B               1077      move.b  #11,D0          Move byte #11 for trap command 11 
0000389E  4E4F                    1078      trap    #15             Set the cursor position
000038A0                          1079      
000038A0  4E75                    1080      rts
000038A2                          1081      
000038A2                          1082  check_for_enemy:
000038A2  4BF8 6000               1083      lea     FIRST_ENEMY,A5  Load the memory address of the first enemy
000038A6  564D                    1084      add.w   #ALIVE,A5       Add to the enemy memory address to get to its alive state
000038A8  0C15 0000               1085      CMP.B   #0,(A5)         Check if the enemy is alive
000038AC  6700 FEAE               1086      BEQ     return          Return from the subroutine if not
000038B0                          1087      
000038B0  3238 6004               1088      move.w  $6004,D1
000038B4  3041                    1089      move.w  D1,A0
000038B6  B4C8                    1090      CMP.W   A0,A2
000038B8  6700 0004               1091      BEQ     draw_enemy
000038BC  4E75                    1092      rts
000038BE                          1093      
000038BE                          1094  draw_enemy:
000038BE  323C 00FF               1095      move.w  #255,D1         Move the word #255 to D1 to set the type of trap 11
000038C2  103C 000B               1096      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
000038C6  4E4F                    1097      trap    #15             Trap to get the cursor position in D1
000038C8                          1098      
000038C8  0441 0200               1099      sub.w   #512,D1         Move the cursor back by two columns
000038CC  4E4F                    1100      trap    #15             Set the cursor position with trap command 11
000038CE                          1101      
000038CE  2601                    1102      move.l  D1,D3          Move the value in D1 to D3 for storage
000038D0                          1103      
000038D0  103C 0015               1104      move.b  #21,D0          Move #21 to D0 for trap command 21
000038D4  223C 000000FF           1105      move.l  #RED,D1         Move the colour red to D1
000038DA  243C 01090000           1106      move.l  #FONT,D2        Move the font to D2
000038E0  4E4F                    1107      trap    #15             Set the colour
000038E2                          1108      
000038E2  43F9 00004229           1109      lea     enemy_mark,A1       load the enemy symbol
000038E8  103C 000E               1110      move.b  #14,D0              Move #14 to D0 for trap command 14
000038EC  4E4F                    1111      trap    #15                 Draw the player mark
000038EE                          1112      
000038EE  103C 0015               1113      move.b  #21,D0          Move #21 to D0 for trap command 21
000038F2  223C 00FFFFFF           1114      move.l  #WHITE,D1       Move the colour white to D1
000038F8  4E4F                    1115      trap    #15             Set the colour
000038FA  4281                    1116      clr.l   D1              Clear D1 for later use
000038FC                          1117      
000038FC  2203                    1118      move.l  D3,D1           Move the value in D3 to D1 for previous cursor position
000038FE                          1119      
000038FE  0641 0200               1120      add.w   #512,D1         Move the cursor position two columns forward
00003902  103C 000B               1121      move.b  #11,D0          Move byte #11 for trap command 11 
00003906  4E4F                    1122      trap    #15             Set the cursor position
00003908                          1123      
00003908  4E75                    1124      rts
0000390A                          1125      
0000390A                          1126  check_for_win_point:
0000390A  B4FC 5109               1127      CMP.W   #WIN_POINT,A2
0000390E  6700 0004               1128      BEQ     draw_win_point
00003912  4E75                    1129      rts
00003914                          1130      
00003914                          1131  draw_win_point:
00003914  323C 00FF               1132      move.w  #255,D1         Move the word #255 to D1 to set the type of trap 11
00003918  103C 000B               1133      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
0000391C  4E4F                    1134      trap    #15             Trap to get the cursor position in D1
0000391E                          1135      
0000391E  0441 0200               1136      sub.w   #512,D1         Move the cursor back by two columns
00003922  4E4F                    1137      trap    #15             Set the cursor position with trap command 11
00003924                          1138      
00003924  2601                    1139      move.l  D1,D3           Move the value in D1 to D3 for storage
00003926                          1140      
00003926  103C 0015               1141      move.b  #21,D0          Move #21 to D0 for trap command 21
0000392A  223C 00FF0000           1142      move.l  #BLUE,D1        Move the colour blue to D1
00003930  243C 01090000           1143      move.l  #FONT,D2        Move the font to D2
00003936  4E4F                    1144      trap    #15             Set the colour
00003938                          1145      
00003938  43F9 0000422B           1146      lea     win_point_mark,A1   load the win point symbol
0000393E  103C 000E               1147      move.b  #14,D0              Move #14 to D0 for trap command 14
00003942  4E4F                    1148      trap    #15                 Draw the win point mark
00003944                          1149      
00003944  103C 0015               1150      move.b  #21,D0          Move #21 to D0 for trap command 21
00003948  223C 00FFFFFF           1151      move.l  #WHITE,D1       Move the colour white to D1
0000394E  4E4F                    1152      trap    #15             Set the colour
00003950  4281                    1153      clr.l   D1              Clear D1 for later use
00003952                          1154      
00003952  2203                    1155      move.l  D3,D1           Move the value in D3 to D1 for previous cursor position
00003954                          1156      
00003954  0641 0200               1157      add.w   #512,D1         Move the cursor position two columns forward
00003958  103C 000B               1158      move.b  #11,D0          Move byte #11 for trap command 11 
0000395C  4E4F                    1159      trap    #15             Set the cursor position
0000395E                          1160      
0000395E  4E75                    1161      rts
00003960                          1162      
00003960                          1163  *-------------------------------------------------------
00003960                          1164  *-------------------Setup the world---------------------
00003960                          1165  *-------------------------------------------------------
00003960                          1166  setup_world:
00003960  11FC 000E 514A          1167      move.b  #14,$514A   Setup the starting corridor
00003966  11FC 0007 513A          1168      move.b  #7,$513A    T junction upwards from starting corridor
0000396C  11FC 0004 5139          1169      move.b  #4,$5139    Left corridor
00003972  11FC 0001 5129          1170      move.b  #1,$5129
00003978  11FC 0001 5119          1171      move.b  #1,$5119
0000397E                          1172      
0000397E  11FC 0004 5108          1173      move.b  #4,$5108    First shop
00003984  11FC 0000 5109          1174      move.b  #0,$5109    Entrance
0000398A  11FC 0005 510A          1175      move.b  #5,$510A
00003990  11FC 0008 50F8          1176      move.b  #8,$50F8
00003996  11FC 0000 50F9          1177      move.b  #0,$50F9
0000399C  11FC 000A 50FA          1178      move.b  #10,$50FA
000039A2  11FC 0003 50E8          1179      move.b  #3,$50E8
000039A8  11FC 0007 50E9          1180      move.b  #7,$50E9
000039AE  11FC 0006 50EA          1181      move.b  #6,$50EA
000039B4                          1182      
000039B4  11FC 0005 513B          1183      move.b  #5,$513B    Right corridor
000039BA  11FC 0001 512B          1184      move.b  #1,$512B
000039C0  11FC 0001 511B          1185      move.b  #1,$511B
000039C6  11FC 0008 510B          1186      move.b  #8,$510B    Path continues up with a turn off to the right
000039CC                          1187      
000039CC  11FC 0002 510C          1188      move.b  #2,$510C    Right path
000039D2  11FC 0002 510D          1189      move.b  #2,$510D    Continue right
000039D8  11FC 0005 510E          1190      move.b  #5,$510E    Path upwards and to the left
000039DE  11FC 0001 50FE          1191      move.b  #1,$50FE    Leads upwards into a room
000039E4                          1192      
000039E4  11FC 0004 50ED          1193      move.b  #4,$50ED    First monster room
000039EA  11FC 0000 50EE          1194      move.b  #0,$50EE    Entrance
000039F0  11FC 0005 50EF          1195      move.b  #5,$50EF
000039F6  11FC 0008 50DD          1196      move.b  #8,$50DD
000039FC  11FC 0000 50DE          1197      move.b  #0,$50DE
00003A02  11FC 000A 50DF          1198      move.b  #10,$50DF
00003A08  11FC 0003 50CD          1199      move.b  #3,$50CD
00003A0E  11FC 0007 50CE          1200      move.b  #7,$50CE
00003A14  11FC 0006 50CF          1201      move.b  #6,$50CF
00003A1A                          1202      
00003A1A  11FC 0001 50FB          1203      move.b  #1,$50FB    Path that continues up
00003A20  11FC 0001 50EB          1204      move.b  #1,$50EB    Path continues upwards
00003A26  11FC 0001 50DB          1205      move.b  #1,$50DB
00003A2C                          1206      
00003A2C                          1207      *Bottom row of room
00003A2C  11FC 0004 50C8          1208      move.b  #4,$50C8    Large monster room with locked door
00003A32  11FC 0009 50C9          1209      move.b  #9,$50C9
00003A38  11FC 0009 50CA          1210      move.b  #9,$50CA
00003A3E  11FC 0000 50CB          1211      move.b  #0,$50CB    Entrance
00003A44  11FC 0005 50CC          1212      move.b  #5,$50CC
00003A4A                          1213      *Middle row of room
00003A4A  11FC 0000 50B8          1214      move.b  #0,$50B8    Exit to the left
00003A50  11FC 0000 50B9          1215      move.b  #0,$50B9
00003A56  11FC 0000 50BA          1216      move.b  #0,$50BA
00003A5C  11FC 0000 50BB          1217      move.b  #0,$50BB
00003A62  11FC 000A 50BC          1218      move.b  #10,$50BC
00003A68                          1219      *Top row of room
00003A68  11FC 0003 50A8          1220      move.b  #3,$50A8
00003A6E  11FC 0007 50A9          1221      move.b  #7,$50A9
00003A74  11FC 0007 50AA          1222      move.b  #7,$50AA
00003A7A  11FC 0007 50AB          1223      move.b  #7,$50AB    Locked door
00003A80  11FC 0006 50AC          1224      move.b  #6,$50AC
00003A86                          1225      
00003A86  11FC 0002 50B7          1226      move.b  #2,$50B7    Exit large room leftwards
00003A8C  11FC 0002 50B6          1227      move.b  #2,$50B6    Continue to the left
00003A92  11FC 0007 50B5          1228      move.b  #7,$50B5    Continue to the left and a path downwards
00003A98  11FC 0002 50B4          1229      move.b  #2,$50B4    Continue to the left
00003A9E                          1230      
00003A9E  11FC 0003 50A1          1231      move.b  #3,$50A1    Room to the left
00003AA4  11FC 0007 50A2          1232      move.b  #7,$50A2
00003AAA  11FC 0006 50A3          1233      move.b  #6,$50A3
00003AB0  11FC 0008 50B1          1234      move.b  #8,$50B1
00003AB6  11FC 0000 50B2          1235      move.b  #0,$50B2
00003ABC  11FC 0000 50B3          1236      move.b  #0,$50B3    Entrance to the right
00003AC2  11FC 0004 50C1          1237      move.b  #4,$50C1
00003AC8  11FC 0009 50C2          1238      move.b  #9,$50C2
00003ACE  11FC 0005 50C3          1239      move.b  #5,$50C3
00003AD4                          1240      
00003AD4  11FC 0001 50C5          1241      move.b  #1,$50C5    Path leading downwards
00003ADA  11FC 0001 50D5          1242      move.b  #1,$50D5
00003AE0  11FC 000A 50E5          1243      move.b  #10,$50E5   Path leading downward and to the left
00003AE6  11FC 0002 50E4          1244      move.b  #2,$50E4    Path on the left
00003AEC  11FC 0002 50E3          1245      move.b  #2,$50E3
00003AF2  11FC 0003 50E2          1246      move.b  #3,$50E2    Path takes a turn downwards
00003AF8  11FC 0001 50F2          1247      move.b  #1,$50F2    Path continues downwards
00003AFE                          1248      
00003AFE  11FC 0003 5101          1249      move.b  #3,$5101    Regular enemy room
00003B04  11FC 0000 5102          1250      move.b  #0,$5102    Entrance
00003B0A  11FC 0006 5103          1251      move.b  #6,$5103
00003B10  11FC 0008 5111          1252      move.b  #8,$5111
00003B16  11FC 0000 5112          1253      move.b  #0,$5112
00003B1C  11FC 000A 5113          1254      move.b  #10,$5113
00003B22  11FC 0004 5121          1255      move.b  #4,$5121
00003B28  11FC 0009 5122          1256      move.b  #9,$5122
00003B2E  11FC 000A 5123          1257      move.b  #10,$5123   Exit at the bottom
00003B34                          1258      
00003B34  11FC 0001 50F5          1259      move.b  #1,$50F5    Path leading downward
00003B3A  11FC 0001 5105          1260      move.b  #1,$5105
00003B40  11FC 0001 5115          1261      move.b  #1,$5115
00003B46  11FC 0001 5125          1262      move.b  #1,$5125
00003B4C                          1263      
00003B4C                          1264      *Top row of room
00003B4C  11FC 0008 5133          1265      move.b  #8,$5133    Large enemy room - Exit at top
00003B52  11FC 0007 5134          1266      move.b  #7,$5134
00003B58  11FC 0000 5135          1267      move.b  #0,$5135    Entrance
00003B5E  11FC 0006 5136          1268      move.b  #6,$5136
00003B64                          1269      
00003B64                          1270      *Middle row of room
00003B64  11FC 0008 5143          1271      move.b  #8,$5143
00003B6A  11FC 0000 5144          1272      move.b  #0,$5144
00003B70  11FC 0000 5145          1273      move.b  #0,$5145
00003B76  11FC 000A 5146          1274      move.b  #10,$5146
00003B7C                          1275      
00003B7C                          1276      *Bottom row of room
00003B7C  11FC 0004 5153          1277      move.b  #4,$5153
00003B82  11FC 0009 5154          1278      move.b  #9,$5154
00003B88  11FC 0009 5155          1279      move.b  #9,$5155
00003B8E  11FC 0005 5156          1280      move.b  #5,$5156
00003B94                          1281      
00003B94  4E75                    1282      rts
00003B96                          1283  
00003B96                          1284  setup_enemies:
00003B96  11FC 0003 6000          1285      move.b  #3,$6000    Health - Setup the first enemy
00003B9C  11FC 0002 6001          1286      move.b  #2,$6001    Damage/level
00003BA2  11FC 0001 6002          1287      move.b  #1,$6002    Class type (Knight)
00003BA8  11FC 0001 6003          1288      move.b  #1,$6003    Alive state (Alive)
00003BAE  31FC 511B 6004          1289      move.w  #$511B,$6004  Move enemy coordinates
00003BB4                          1290      
00003BB4  4E75                    1291      rts
00003BB6                          1292      
00003BB6                          1293  setup_player:
00003BB6  11FC 000A 5FF0          1294      move.b  #10,PLAYER      put score/health in memory location $5FF0
00003BBC                          1295      *lea     $5FF0,A3   assign address A3 to that memory location
00003BBC                          1296      
00003BBC  11FC 0001 5FF1          1297      move.b  #1,PLA_DAMAGE   Assign the default damage for the player
00003BC2                          1298      
00003BC2  11FC 0000 5FF3          1299      move.b  #0,GAME_STATE   Put game state number in memory location $5FF3
00003BC8                          1300      *0 = Pick role/intro | 5 = Move around | 6 = Combat | 10 to 20 = Shop | 64 = End game
00003BC8                          1301  
00003BC8  11FC 0000 5FF2          1302      move.b  #0,PLA_CLASS    put class number in memory location $5FF2
00003BCE                          1303      * 1 corresponds to knight - 2 corresponds to mage - 3 corresponds to rogue
00003BCE                          1304      
00003BCE  11FC 0000 5FF8          1305      move.b  #0,PLA_GOLD
00003BD4  11FC 0000 5FF9          1306      move.b  #0,PLA_POTIONS
00003BDA  11FC 0000 5FFA          1307      move.b  #0,PLA_KEYS
00003BE0                          1308      
00003BE0  4DF8 514A               1309      lea     $514A,A6        Set the player coordinate to the first corridor
00003BE4  31CE 5FF6               1310      move.w  A6,PLA_P_POS    Set the player's previous position to their current
00003BE8                          1311      
00003BE8  4E75                    1312      rts
00003BEA                          1313      
00003BEA                          1314  *-------------------------------------------------------
00003BEA                          1315  *-------------------Data Delarations--------------------
00003BEA                          1316  *-------------------------------------------------------
00003BEA                          1317  
00003BEA= 0D 0A 00                1318  crlf:           dc.b    $0D,$0A,0
00003BED= 2A 2A 2A 2A 2A 2A ...   1319  welcome_msg:    dc.b    '************************************************************'
00003C29= 0D 0A                   1320                  dc.b    $0D,$0A
00003C2B= 41 76 61 6C 6F 6E ...   1321                  dc.b    'Avalon: The Legend Lives'
00003C43= 0D 0A                   1322                  dc.b    $0D,$0A
00003C45= 2A 2A 2A 2A 2A 2A ...   1323                  dc.b    '************************************************************'
00003C81= 0D 0A 00                1324                  dc.b    $0D,$0A,0
00003C84= 2E 00                   1325  loop_msg:       dc.b    '.',0
00003C86= 45 6E 74 65 72 20 ...   1326  replay_msg:     dc.b    'Enter 0 to Quit any other number to replay : ',0
00003CB4= 59 6F 75 20 61 77 ...   1327  wake_up_msg:    dc.b    'You awake in a room, on a bed of red velvet, with no memory',$0D,$0A
00003CF1= 6F 66 20 68 6F 77 ...   1328                  dc.b    'of how you got here. Stones crumble from the ceiling, the place looks like an',$0D,$0A
00003D40= 6F 6C 64 20 63 61 ...   1329                  dc.b    'old castle. You get a dark feeling from this place, and you know you must',$0D,$0A
00003D8B= 65 73 63 61 70 65 ...   1330                  dc.b    'escape...',$0D,$0A
00003D96= 59 6F 75 20 63 6C ...   1331                  dc.b    'You climb from the bed and look in a nearby mirror:',$0D,$0A,0
00003DCC= 31 3E 20 59 6F 75 ...   1332  pick_role_msg:  dc.b    '1> You wear armour of polished iron, a short sword and heavy shield laying',$0D,$0A
00003E18= 63 6C 6F 73 65 20 ...   1333                  dc.b    'close by. (Knight class)',$0D,$0A,$0D,$0A
00003E34= 32 3E 20 59 6F 75 ...   1334                  dc.b    '2> You wear a cloak with mystic symbols sewn into the fabrics, an ancient',$0D,$0A
00003E7F= 6C 6F 6F 6B 69 6E ...   1335                  dc.b    'looking staff lays near. (Mage class)',$0D,$0A,$0D,$0A
00003EA8= 33 3E 20 59 6F 75 ...   1336                  dc.b    '3> You wear tight, well-fitting leather armour with reminents of black dye',$0D,$0A
00003EF4= 73 74 61 69 6E 65 ...   1337                  dc.b    'stained to the material. Two knives are fastened to your belt. (Rogue class)',$0D,$0A,0
00003F43= 45 6E 74 65 72 20 ...   1338  input_nums_msg: dc.b    'Enter num between 1 and ',0
00003F5C= 3A 20 00                1339  colon_msg:      dc.b    ': ',0
00003F5F                          1340  
00003F5F= 49 6E 70 75 74 74 ...   1341  input_error_msg:    dc.b    'Inputted number is outside of range.',$0D,$0A,0
00003F86= 47 61 6D 65 73 74 ...   1342  fake_gamestate_msg: dc.b    'Gamestate doesnt exist',$0D,$0A,0
00003F9F= 59 6F 75 20 67 72 ...   1343  knight_role_msg:    dc.b    'You grab your sword and shield, pull a torch from the wall, and leave the room.',$0D,$0A
00003FF0= 2D 20 59 6F 75 20 ...   1344                      dc.b    '- You have chosen the KNIGHT class. You specialise in blocking and countering',$0D,$0A,0
00004040= 59 6F 75 20 70 69 ...   1345  mage_role_msg:  dc.b    'You pick up your staff, grab a torch from the wall, and leave the room.',$0D,$0A
00004089= 2D 20 59 6F 75 20 ...   1346                  dc.b    '- You have chosen the MAGE class. You specialise in magic attacks.',$0D,$0A,0
000040CE= 59 6F 75 20 66 61 ...   1347  rogue_role_msg: dc.b    'You fasten your belt, grab a torch from the wall, and leave the room.',$0D,$0A
00004115= 2D 20 59 6F 75 20 ...   1348                  dc.b    '- You have chosen the ROGUE class. You specialise in quick melee attacks.',$0D,$0A,0
00004161= 31 3E 20 4D 6F 76 ...   1349  movement_msg:   dc.b    '1> Move north.',$0D,$0A
00004171= 32 3E 20 4D 6F 76 ...   1350                  dc.b    '2> Move south.',$0D,$0A
00004181= 33 3E 20 4D 6F 76 ...   1351                  dc.b    '3> Move west.',$0D,$0A
00004190= 34 3E 20 4D 6F 76 ...   1352                  dc.b    '4> Move east.',$0D,$0A,0
000041A0= 4D 6F 76 65 64 20 ...   1353  move_north_msg: dc.b    'Moved north.',$0D,$0A,0
000041AF= 4D 6F 76 65 64 20 ...   1354  move_east_msg:  dc.b    'Moved east.',$0D,$0A,0
000041BD= 4D 6F 76 65 64 20 ...   1355  move_south_msg: dc.b    'Moved south.',$0D,$0A,0
000041CC= 4D 6F 76 65 64 20 ...   1356  move_west_msg:  dc.b    'Moved west.',$0D,$0A,0
000041DA= 41 20 77 61 6C 6C ...   1357  movement_blocked_msg:  dc.b    'A wall blocks your path.',$0D,$0A,0
000041F5= 45 6E 74 65 72 20 ...   1358  continue_msg:   dc.b    'Enter any key to continue... ',0
00004213                          1359  
00004213= 20 20 20 00             1360  blank_tile      dc.b    '   ',0
00004217= 7C 20 7C 00             1361  both_tile       dc.b    '| |',0
0000421B= 7C 20 20 00             1362  left_tile       dc.b    '|  ',0
0000421F= 20 20 7C 00             1363  right_tile      dc.b    '  |',0
00004223= 5C 2F 5C 00             1364  blocked_tile:   dc.b    '\/\',0
00004227= 2A 00                   1365  player_mark:    dc.b    '*',0
00004229= 58 00                   1366  enemy_mark:     dc.b    'X',0
0000422B= 40 00                   1367  win_point_mark: dc.b    '@',0
0000422D= 41 20 6D 6F 6E 73 ...   1368  encounter_msg:  dc.b    'A monster blocks your path, it looks ready to attack!',$0D,$0A,0
00004265= 31 3E 20 42 6C 6F ...   1369  combat_msg:     dc.b    '1> Block and Counter.',$0D,$0A
0000427C= 32 3E 20 43 61 73 ...   1370                  dc.b    '2> Cast Magic.',$0D,$0A
0000428C= 33 3E 20 41 74 74 ...   1371                  dc.b    '3> Attack Swiftly.',$0D,$0A
000042A0= 34 3E 20 54 72 79 ...   1372                  dc.b    '4> Try Run.',$0D,$0A,0
000042AE= 20 20 20 20 20 20 ...   1373  skeleton_msg:   dc.b    '           .-.     ',$0D,$0A
000042C3= 20 2F 5C 5F 5F 5F ...   1374                  dc.b    ' /\____/\ (o.o)    ',$0D,$0A
000042D8= 7C 20 20 5F 7C 7C ...   1375                  dc.b    '|  _||_  | |=|     ',$0D,$0A
000042ED= 20 5C 2F 20 7C 7C ...   1376                  dc.b    ' \/ || \/ __|__    ',$0D,$0A
00004302= 20 20 20 20 7C 7C ...   1377                  dc.b    '    ||\_//.=|=.\\  ',$0D,$0A
00004317= 20 20 20 20 7C 7C ...   1378                  dc.b    '    ||\_/ .=|=. \\ ',$0D,$0A
0000432C= 20 20 20 20 7C 7C ...   1379                  dc.b    '    ||    .=|=. // ',$0D,$0A
00004341= 20 20 20 20 7C 7C ...   1380                  dc.b    '    ||    (_=_)//  ',$0D,$0A
00004356= 20 20 20 20 7C 7C ...   1381                  dc.b    '    ||   (:| |:)   ',$0D,$0A
0000436B= 20 20 20 20 7C 7C ...   1382                  dc.b    '    ||    || ||    ',$0D,$0A
00004380= 20 20 20 20 7C 7C ...   1383                  dc.b    '    ||    () ()    ',$0D,$0A
00004395= 20 20 20 20 2F 5C ...   1384                  dc.b    '    /\    || ||    ',$0D,$0A
000043AA= 20 20 20 20 7C 7C ...   1385                  dc.b    '    ||    || ||    ',$0D,$0A
000043BF= 20 20 20 20 5C 2F ...   1386                  dc.b    '    \/  ==   ==    ',$0D,$0A,0
000043D5= 59 6F 75 20 65 73 ...   1387  escape_msg:             dc.b    'You escaped the monster!',$0D,$0A,0
000043F0= 59 6F 75 20 74 72 ...   1388  fail_escape_msg:        dc.b    'You try to run, but the monster catches and damages you!',$0D,$0A,0
0000442B= 59 6F 75 20 62 6F ...   1389  both_block_msg:         dc.b    'You both block, No damage is done!',$0D,$0A,0
00004450= 59 6F 75 20 62 6F ...   1390  both_cast_magic_msg:    dc.b    'You both cast magic at eachother, the spells clash in mid air! No damage',$0D,$0A
0000449A= 69 73 20 64 6F 6E ...   1391                          dc.b    'is done!',$0D,$0A,0
000044A5= 59 6F 75 20 62 6F ...   1392  both_melee_msg:         dc.b    'You both lunge forward, metal clashes together, but no damage is done!',$0D,$0A,0
000044EE= 54 68 65 20 65 6E ...   1393  hit_against_block_msg:  dc.b    'The enemy blocks, you cast a cast a spell and it damages the monster!',$0D,$0A,0
00004536= 54 68 65 20 65 6E ...   1394  hit_against_magic_msg:  dc.b    'The enemy begins to charge a spell but you lunge forward and hit it first,',$0D,$0A
00004582= 64 61 6D 61 67 69 ...   1395                          dc.b    'damaging the monster!',$0D,$0A,0
0000459A= 54 68 65 20 65 6E ...   1396  hit_against_melee_msg:  dc.b    'The enemy lunges forward but you block quicky, then counter, damaging the',$0D,$0A
000045E5= 6D 6F 6E 73 74 65 ...   1397                          dc.b    'monster!',$0D,$0A,0
000045F0= 59 6F 75 20 6C 75 ...   1398  hit_by_counter_msg:     dc.b    'You lunge at the enemy but they block before you hit, they swing around quickly',$0D,$0A
00004641= 61 6E 64 20 64 61 ...   1399                          dc.b    'and damage you!',$0D,$0A,0
00004653= 59 6F 75 20 74 72 ...   1400  hit_by_magic_msg:       dc.b    'You try to block the enemies attack, but they cast a spell that breaks through',$0D,$0A
000046A3= 79 6F 75 72 20 64 ...   1401                          dc.b    'your defense and damages you!',$0D,$0A,0
000046C3= 59 6F 75 20 74 72 ...   1402  hit_by_melee_msg:       dc.b    'You try to charge up a spell, but the enemy lunges forward and damages you!',$0D,$0A,0
00004711= 48 65 61 6C 74 68 ...   1403  health_msg:             dc.b    'Health: ',0
0000471A= 45 6E 65 6D 79 20 ...   1404  enemy_health_msg:       dc.b    'Enemy Health: ',0
00004729= 54 6F 72 63 68 20 ...   1405  torch_msg:              dc.b    'Torch Life: ',0
00004736= 49 6E 76 65 6E 74 ...   1406  inventory_msg:          dc.b    'Inventory:',0
00004741= 2D 20 47 6F 6C 64 ...   1407  gold_msg:               dc.b    '- Gold ',0
00004749= 2D 20 4B 65 79 20 00    1408  key_msg:                dc.b    '- Key ',0
00004750= 2D 20 70 6F 74 69 ...   1409  potions_msg:            dc.b    '- potion ',0
0000475A= 54 68 65 20 6D 6F ...   1410  battle_won_msg:         dc.b    'The monster collapses at your feet. It is dead!',$0D,$0A,0
0000478C= 28 00                   1411  bracket_open_msg:       dc.b    '(',0
0000478E= 29 00                   1412  bracket_close_msg:      dc.b    ')',0
00004790= 59 6F 75 20 66 65 ...   1413  death_msg:          dc.b    'You feel your last breath of air leave your lungs...',$0D,$0A
000047C6= 59 6F 75 72 20 6B ...   1414                      dc.b    'Your knees hit the ground...',$0D,$0A
000047E4= 59 6F 75 20 68 61 ...   1415                      dc.b    'You have died.',$0D,$0A,0
000047F5= 59 6F 75 20 66 65 ...   1416  win_msg             dc.b    'You feel the outside breeze hit your face...',$0D,$0A
00004823= 59 6F 75 20 68 61 ...   1417                      dc.b    'You have escaped the castle!',$0D,$0A,0
00004842                          1418  
00004842                          1419      end start

No errors detected
No warnings generated


SYMBOL TABLE INFORMATION
Symbol-name         Value
-------------------------
ALIVE               3
BATTLE_WON_MSG      475A
BLANK_TILE          4213
BLOCKED_TILE        4223
BLOCK_COUNTER       35C2
BLUE                FF0000
BOTH_BLOCK          3658
BOTH_BLOCK_MSG      442B
BOTH_CAST_MAGIC     366A
BOTH_CAST_MAGIC_MSG  4450
BOTH_MELEE          367C
BOTH_MELEE_MSG      44A5
BOTH_TILE           4217
BRACKET_CLOSE_MSG   478E
BRACKET_OPEN_MSG    478C
CAST_MAGIC          35DC
CHECK_FOR_ENEMY     38A2
CHECK_FOR_PLAYER    384E
CHECK_FOR_WIN_POINT  390A
CLASS               2
CLEAR_SCREEN        33FA
COLON_MSG           3F5C
COMBAT              358A
COMBAT_MSG          4265
CONTINUE_MSG        41F5
CRLF                3BEA
CSR_POS_BATTLE      2001
CSR_POS_MOVE        3201
DAMAGE              1
DEATH_MSG           4790
DECORATE            33DC
DRAW                3228
DRAW_BATTLE_INFO    335E
DRAW_BLANK_TILE     3840
DRAW_BLOCKED_TILE   3808
DRAW_BOTH_TILE      3816
DRAW_ENEMY          38BE
DRAW_HUD            324C
DRAW_ITEM_NUMBER    333C
DRAW_LEFT_TILE      3824
DRAW_LOOP           375E
DRAW_PLAYER         3856
DRAW_PLAYER_INFO    3262
DRAW_RIGHT_TILE     3832
DRAW_SKELETON       323E
DRAW_TILE           37A4
DRAW_WIN_POINT      3914
ENCOUNTER_MSG       422D
END                 3006
ENDL                3428
ENEMY_ALIVE_CHECK   31F0
ENEMY_CHECK         318C
ENEMY_DIED          31FA
ENEMY_HEALTH_MSG    471A
ENEMY_MARK          4229
ENEMY_MAX           1
ENTER_COMBAT        31C6
ESCAPE_ATTACK       3620
ESCAPE_MSG          43D5
EXIT                0
FAIL_ESCAPE         363C
FAIL_ESCAPE_MSG     43F0
FAKE_GAMESTATE      3108
FAKE_GAMESTATE_MSG  3F86
FIRST_ENEMY         6000
FONT                1090000
GAME                3000
GAMELOOP            3116
GAMEPLAY            33B8
GAME_STATE          5FF3
GOLD_MSG            4741
GREEN               FF00
HEALTH_MSG          4711
HIT_AGAINST_BLOCK   368E
HIT_AGAINST_BLOCK_MSG  44EE
HIT_AGAINST_MAGIC   36A6
HIT_AGAINST_MAGIC_MSG  4536
HIT_AGAINST_MELEE   36BE
HIT_AGAINST_MELEE_MSG  459A
HIT_BY_COUNTER      36D6
HIT_BY_COUNTER_MSG  45F0
HIT_BY_MAGIC        36F2
HIT_BY_MAGIC_MSG    4653
HIT_BY_MELEE        370E
HIT_BY_MELEE_MSG    46C3
INPUT               30A2
INPUT_ERROR_MSG     3F5F
INPUT_NUMS_MSG      3F43
INVALID_INPUT       30FA
INVENTORY_MSG       4736
KEY_MSG             4749
KNIGHT_ROLE_MSG     3F9F
KNIGHT_SELECT       3066
LEFT_TILE           421B
LOOP_COLUMNS        3788
LOOP_MSG            3C84
LOOP_ROWS           3772
MAGE_ROLE_MSG       4040
MAGE_SELECT         307A
MANAGE_INPUT        30CC
MELEE_ATTACK        35F6
MOVEMENT            343E
MOVEMENT_BLOCKED    3578
MOVEMENT_BLOCKED_MSG  41DA
MOVEMENT_MSG        4161
MOVE_EAST           3538
MOVE_EAST_MSG       41AF
MOVE_NORTH          3474
MOVE_NORTH_MSG      41A0
MOVE_SOUTH          34B6
MOVE_SOUTH_MSG      41BD
MOVE_WEST           34F8
MOVE_WEST_MSG       41CC
OUT                 33E4
PICK_ROLE           3020
PICK_ROLE_MSG       3DCC
PLAYER              5FF0
PLAYER_DEAD         3154
PLAYER_MARK         4227
PLA_CLASS           5FF2
PLA_DAMAGE          5FF1
PLA_GOLD            5FF8
PLA_KEYS            5FFA
PLA_POTIONS         5FF9
PLA_P_POS           5FF6
POSITION            4
POTIONS_MSG         4750
PRESS_CONTINUE      372A
RANDOM_NUMBER       3742
RED                 FF
REPLAY              3406
REPLAY_MSG          3C86
RETURN              375C
RIGHT_TILE          421F
ROGUE_ROLE_MSG      40CE
ROGUE_SELECT        308E
ROLE_INPUT          3048
SETUP_ENEMIES       3B96
SETUP_PLAYER        3BB6
SETUP_WORLD         3960
SKELETON_MSG        42AE
START               1000
TORCH_MSG           4729
TRY_RUN             3610
UPDATE              312C
WAKE_UP_MSG         3CB4
WALL_COLLISIONS     3452
WELCOME             300A
WELCOME_MSG         3BED
WHITE               FFFFFF
WIN_MSG             47F5
WIN_POINT           5109
WIN_POINT_MARK      422B
WON_GAME            3170

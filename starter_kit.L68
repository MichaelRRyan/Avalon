00001000 Starting Address
Assembler used: EASy68K Editor/Assembler v5.16.01
Created On: 24/03/2019 23:07:29

00000000                             1  *-------------------------------------------------------
00000000                             2  * Author         : Michael Rainsford Ryan
00000000                             3  * Student Number : C00239510
00000000                             4  * Date Created   : 21/01/2019
00000000                             5  * Description    : A simplified, offline clone of the
00000000                             6  *                : online game "Avalon".
00000000                             7  * Issues/Bugs    : None currenty.
00000000                             8  *-------------------------------------------------------
00000000                             9  
00001000                            10      org $1000
00001000                            11  
00001000                            12  *-------------------------------------------------------
00001000                            13  *Choose to be a Worker or a God 
00001000                            14  *https://www.avalon-rpg.com/
00001000                            15  *-------------------------------------------------------
00001000                            16  
00001000                            17  *-------------------------------------------------------
00001000                            18  *-------------------Game Information-------------------
00001000                            19  *-------------------------------------------------------
00001000                            20  *A6 is used for player coordinates
00001000                            21  *A5 is used for enemy coordinates when in combat or looping through them
00001000                            22  *A5 is used for shops when in shop screen or when looping through them
00001000                            23  *A4 occasionally used for displaying the inventory
00001000                            24  *D5 is used occasionally for input range
00001000                            25  *$5FF0 holds player information
00001000                            26  *$6000 to $64F0 holds enemies
00001000                            27  *$6500 to $6FE0 holds shops
00001000                            28  *$6FE0 to $6FEF Holds locked doors
00001000                            29  *$6FF0 to $6FFF Holds big key locked doors
00001000                            30  *$7000 to $7500 holds loot
00001000                            31  *$8000 to $9000 holds maps
00001000                            32  
00001000                            33  *Enemies:
00001000                            34  *Byte:  Name:
00001000                            35  *0      Health
00001000                            36  *1      Damage/level
00001000                            37  *2      enemy type (Knight, mage, rogue)
00001000                            38  *3      Alive state (1 == alive, 0 == dead)
00001000                            39  *4 & 5  Coordinates
00001000                            40  
00001000                            41  *Player:
00001000                            42  *Byte:  Name:
00001000                            43  *0      Health
00001000                            44  *1      Damage/level
00001000                            45  *2      Class (Knight, mage, rogue)
00001000                            46  *3      Game state
00001000                            47  *4-5+A6 Coordinates
00001000                            48  *6-7    Last coordinates
00001000                            49  *8      Gold
00001000                            50  *9      Potions
00001000                            51  *A      Keys
00001000                            52  *B      Torch life
00001000                            53  
00001000                            54  *Shops:
00001000                            55  *Byte:  Name:
00001000                            56  *0-1    Position
00001000                            57  *2      Potions
00001000                            58  *3      Keys
00001000                            59  *4      Torches
00001000                            60  *5      Damage increase
00001000                            61  
00001000                            62  *Loot:
00001000                            63  *Byte:  Name:
00001000                            64  *0-1    Position
00001000                            65  *2      Potions
00001000                            66  *3      Keys
00001000                            67  *4      Torches
00001000                            68  *5      Gold
00001000                            69  *6      Active State
00001000                            70      
00001000                            71  *Game state : 0 = Pick role/intro | 5 = Move around | 6 = Combat | 7 = Shop | 64 = End game
00001000                            72  *Class      : 1 corresponds to knight - 2 corresponds to mage - 3 corresponds to rogue
00001000                            73  
00001000                            74  
00001000                            75  *-------------------------------------------------------
00001000                            76  *Validation values to be used, modify as needed
00001000                            77  *Add additional validation values as required
00001000                            78  *-------------------------------------------------------
00001000  =00000000                 79  exit        EQU 0      used to exit assembly program
00001000                            80  
00001000                            81  * Text display
00001000  =000000FF                 82  RED         EQU $000000FF   Red colour value
00001000  =0000FF00                 83  GREEN       EQU $0000FF00   Green colour value
00001000  =00FF0000                 84  BLUE        EQU $00FF0000   Blue colour value
00001000  =00FFFFFF                 85  WHITE       EQU $00FFFFFF   White colour value
00001000  =00F000F0                 86  PURPLE      EQU $00F000F0   Purple colour value
00001000  =0000FFFF                 87  GOLD        EQU $0000FFFF   gold colour value
00001000  =00507090                 88  BROWN       EQU $00507090   brown colour value
00001000  =01090000                 89  FONT        EQU $01090000   Font value
00001000                            90  
00001000                            91  * Player
00001000  =00005FF0                 92  PLAYER      EQU $5FF0       Memory address for player information and health
00001000  =00005FF1                 93  PLA_DAMAGE  EQU $5FF1       Memory address for player damage value
00001000  =00005FF2                 94  PLA_CLASS   EQU $5FF2       The memory address for the player class
00001000  =00005FF3                 95  GAME_STATE  EQU $5FF3       The memory address of the game state
00001000  =00005FF6                 96  PLA_P_POS   EQU $5FF6       Memory location of the player's previous position
00001000  =00005FF8                 97  PLA_GOLD    EQU $5FF8       Memory address for player gold
00001000  =00005FF9                 98  PLA_POTIONS EQU $5FF9       Memory address for player potions
00001000  =00005FFA                 99  PLA_KEYS    EQU $5FFA       Memory address for player keys
00001000  =00005FFB                100  PLA_TORCH   EQU $5FFB       Memory address for player torch life
00001000                           101  
00001000                           102  * Enemy
00001000  =00006000                103  FIRST_ENEMY EQU $6000       Memory location of the first enemy
00001000  =00000002                104  ENEMY_MAX   EQU 2           Number of enemies in the game
00001000                           105  
00001000  =00000001                106  DAMAGE      EQU 1           The number of bytes to move from the enemy before reaching the damage
00001000  =00000002                107  CLASS       EQU 2           The number of bytes to move from the enemy before reaching the class
00001000  =00000003                108  ALIVE       EQU 3           The number of bytes to move from the enemy before reaching the alive state
00001000  =00000004                109  POSITION    EQU 4           The number of bytes to move from the enemy before reaching the position
00001000                           110  
00001000                           111  * Shop & Loot
00001000  =00006500                112  FIRST_SHOP  EQU $6500       Memory location of the first shop
00001000  =00000002                113  SHOP_MAX    EQU 2           Number of shops in the game
00001000                           114  
00001000  =00000002                115  S_POTIONS   EQU 2           The number of bytes to move from the shop root before reaching the potions
00001000  =00000003                116  S_KEYS      EQU 3           The number of bytes to move from the shop root before reaching the keys
00001000  =00000004                117  S_TORCHES   EQU 4           The number of bytes to move from the shop root before reaching the torches
00001000  =00000005                118  S_DAMAGE_IN EQU 5           The number of bytes to move from the shop root before reaching the damage increase
00001000                           119  
00001000  =00007000                120  FIRST_LOOT  EQU $7000       Memory location of the first loot pile
00001000  =00000006                121  L_ACTIVE    EQU 6           The number of bytes to move from the loot pile root before reaching the active state
00001000                           122  
00001000                           123  * HUD
00001000  =00003201                124  CSR_POS_MOVE    EQU $3201   The cursor position to draw the HUD to when in movement state
00001000  =00001901                125  CSR_POS_BATTLE_E    EQU $1901   The cursor position to draw the enemy HUD to when in battle state
00001000  =00003401                126  CSR_POS_BATTLE_P    EQU $3401   The cursor position to draw the player HUD to when in battle state
00001000  =00001801                127  CSR_POS_SHOP_S  EQU $1801   The cursor position to draw the HUD to when in shop state for shop info
00001000  =00003401                128  CSR_POS_SHOP_P  EQU $3401   The cursor position to draw the HUD to when in shop state for player info
00001000                           129  *$2001
00001000                           130  
00001000                           131  * Game
00001000  =00008156                132  WIN_POINT       EQU $8156   The position the player has to get to to win
00001000  =00006FE0                133  FIRST_DOOR      EQU $6FE0   The memory location of the first locked door
00001000  =00000003                134  DOOR_MAX        EQU 3       The number of locked doors in the game
00001000  =00001000                135  OPEN_DOOR_POS   EQU $1000   The position doors are given when opened
00001000                           136  
00001000  =00000005                137  POTION_PRICE    EQU 5       The price in gold for a potion
00001000  =0000000F                138  KEY_PRICE       EQU 15      The price in gold for a key
00001000  =0000000A                139  TORCH_PRICE     EQU 10      The price in gold for a torch
00001000  =00000014                140  DAMAGE_UP_PRICE EQU 20      The price in gold for a damage upgrade
00001000                           141  
00001000  =0000000F                142  LIFE_PER_TORCH  EQU 15      The life value each torch has
00001000                           143  
00001000  =00008080                144  MAP_START_POINT EQU $8080   The starting coordinates the map draws at
00001000  =0000000F                145  MAP_LENGTH      EQU 15      The number of tiles downwords the map will draw
00001000                           146  
00001000                           147  
00001000                           148  *Start of Game
00001000                           149  start:
00001000  6100 36BE                150      bsr     setup_player
00001004  6100 332E                151      bsr     setup_world
00001008  6100 3630                152      bsr     setup_enemies
0000100C  6100 36EE                153      bsr     setup_shops
00001010  6100 3666                154      bsr     setup_loot
00001014                           155  
00001014  6100 1FF4                156      bsr     welcome    branch to the welcome subroutine
00001018  6100 2F34                157      bsr     press_continue
0000101C  6100 1FE2                158      bsr     game       branch to the game subroutine
00001020                           159  *Game loop
00003000                           160      org     $3000      the rest of the program is to be located from 3000 onwards
00003000                           161  
00003000                           162  *-------------------------------------------------------
00003000                           163  *-------------------Game Subroutine---------------------
00003000                           164  *-------------------------------------------------------
00003000                           165  game:
00003000  6100 0192                166      bsr     gameloop   branch to gameloop subroutine
00003004  4E75                     167      rts                return from game: subroutine
00003006                           168            
00003006                           169  end:
00003006  FFFF FFFF                170      simhalt
0000300A                           171  
0000300A                           172  *-------------------------------------------------------
0000300A                           173  *-------------------Welcome Subroutine------------------
0000300A                           174  *-------------------------------------------------------
0000300A                           175  welcome:
0000300A  43F9 0000473D            176      lea     welcome_msg,A1  assign message to address register A1
00003010  103C 000E                177      move.b  #14,D0          move literal 14 to DO
00003014  4E4F                     178      trap    #15             trap and interpret value in D0
00003016  6100 097A                179      bsr     endl            branch to endl subroutine
0000301A                           180      
0000301A  4E75                     181      rts                     return from welcome: subroutine
0000301C                           182  
0000301C                           183  *-------------------------------------------------------
0000301C                           184  *-------------------Role Picking Subroutine------------------
0000301C                           185  *-------------------------------------------------------
0000301C                           186  pick_role:
0000301C                           187  
0000301C  43F9 00004B06            188      lea     wake_up_msg,A1  assign message to address register A1
00003022  103C 000E                189      move.b  #14,D0          move literal 14 to DO
00003026  4E4F                     190      trap    #15             trap and interpret value in D0
00003028  6100 0968                191      bsr     endl            branch to endl subroutine
0000302C                           192      
0000302C  43F9 00004C1E            193      lea     pick_role_msg,A1 assign message to address register A1
00003032  103C 000E                194      move.b  #14,D0           move literal 14 to DO
00003036  4E4F                     195      trap    #15              trap and interpret value in D0
00003038                           196      
00003038  7A03                     197      move.l  #3,D5           Move the number 3 to D5 to tell the program how many options there are
0000303A                           198      
0000303A  6100 00E2                199      bsr     input           branch to the input subroutine
0000303E                           200      
0000303E  6100 0F0E                201      bsr     press_continue          Pause the game until a key is pressed
00003042                           202      
00003042  4E75                     203      rts                     return from pick_role subroutine
00003044                           204      
00003044                           205  role_input:
00003044  11C1 5FF2                206      move.b  D1,PLA_CLASS    Move the role number to player class memory location to hold the class number
00003048                           207      
00003048                           208      *Give the player a message depending on the role chosen
00003048  B23C 0001                209      CMP.B   #1,D1
0000304C  6700 0014                210      BEQ     knight_select   Branch to knight message if role selected
00003050                           211      
00003050  B23C 0002                212      CMP.B   #2,D1
00003054  6700 003C                213      BEQ     mage_select     Branch to mage message if role selected
00003058                           214      
00003058  B23C 0003                215      CMP.B   #3,D1
0000305C  6700 0064                216      BEQ     rogue_select    Branch to rogue message if role selected
00003060                           217      
00003060  4E75                     218      rts
00003062                           219      
00003062                           220  knight_select:
00003062  43F9 00004DF1            221      lea     knight_role_msg,A1  assign message to address register A1
00003068  103C 000E                222      move.b  #14,D0              move literal 14 to DO
0000306C  4E4F                     223      trap    #15                 Display the knight message
0000306E                           224      
0000306E  223C 00F000F0            225      move.l  #PURPLE,D1          Load the purple colour
00003074  6100 0F4C                226      bsr     change_font_colour  Change the font colour
00003078                           227      
00003078  43F9 00004E43            228      lea     knight_spec_msg,A1  assign message to address register A1
0000307E  103C 000E                229      move.b  #14,D0              move literal 14 to DO
00003082  4E4F                     230      trap    #15                 Display the knight message
00003084                           231      
00003084  223C 00FFFFFF            232      move.l  #WHITE,D1           Load the white colour
0000308A  6100 0F36                233      bsr     change_font_colour  Change the font colour
0000308E                           234      
0000308E  6000 0062                235      bra     tutorial_intro      Branch to tutorial subroutine
00003092                           236  
00003092                           237  mage_select:
00003092  43F9 00004E91            238      lea     mage_role_msg,A1    Assign message to address register A1
00003098  103C 000E                239      move.b  #14,D0              move literal 14 to DO
0000309C  4E4F                     240      trap    #15                 Display the mage message
0000309E                           241      
0000309E  223C 00F000F0            242      move.l  #PURPLE,D1          Load the purple colour
000030A4  6100 0F1C                243      bsr     change_font_colour  Change the font colour
000030A8                           244      
000030A8  43F9 00004EDB            245      lea     mage_spec_msg,A1    assign message to address register A1
000030AE  103C 000E                246      move.b  #14,D0              move literal 14 to DO
000030B2  4E4F                     247      trap    #15                 Display the mage message
000030B4                           248      
000030B4  223C 00FFFFFF            249      move.l  #WHITE,D1           Load the white colour
000030BA  6100 0F06                250      bsr     change_font_colour  Change the font colour
000030BE                           251      
000030BE  6000 0032                252      bra     tutorial_intro      Branch to tutorial subroutine
000030C2                           253  
000030C2                           254  rogue_select:
000030C2  43F9 00004F1E            255      lea     rogue_role_msg,A1   Assign message to address register A1
000030C8  103C 000E                256      move.b  #14,D0              move literal 14 to DO
000030CC  4E4F                     257      trap    #15                 Display the rogue message
000030CE                           258      
000030CE  223C 00F000F0            259      move.l  #PURPLE,D1          Load the purple colour
000030D4  6100 0EEC                260      bsr     change_font_colour  Change the font colour
000030D8                           261      
000030D8  43F9 00004F66            262      lea     rogue_spec_msg,A1   Assign message to address register A1
000030DE  103C 000E                263      move.b  #14,D0              move literal 14 to DO
000030E2  4E4F                     264      trap    #15                 Display the rogue message
000030E4                           265      
000030E4  223C 00FFFFFF            266      move.l  #WHITE,D1           Load the white colour
000030EA  6100 0ED6                267      bsr     change_font_colour  Change the font colour
000030EE                           268      
000030EE  6000 0002                269      bra     tutorial_intro      Branch to tutorial subroutine
000030F2                           270      
000030F2                           271  tutorial_intro:
000030F2  6100 089E                272      bsr     endl                Break to a new line
000030F6                           273  
000030F6  223C 000000FF            274      move.l  #RED,D1             Load the purple colour
000030FC  6100 0EC4                275      bsr     change_font_colour  Change the font colour
00003100                           276      
00003100  43F9 000049EE            277      lea     tutorial_msg,A1     Load tutorial message to address register A1
00003106  103C 000E                278      move.b  #14,D0              move literal 14 to DO
0000310A  4E4F                     279      trap    #15                 Display the tutorial message
0000310C                           280      
0000310C  223C 00FFFFFF            281      move.l  #WHITE,D1           Load the white colour
00003112  6100 0EAE                282      bsr     change_font_colour  Change the font colour
00003116                           283      
00003116  11FC 0005 5FF3           284      move.b  #5,GAME_STATE       Change the game state to the movement state
0000311C                           285      
0000311C  4E75                     286      rts
0000311E                           287      
0000311E                           288  *-------------------------------------------------------
0000311E                           289  *---------Gameplay Input Values Subroutine--------------
0000311E                           290  *-------------------------------------------------------    
0000311E                           291  input:
0000311E  6100 0872                292      bsr     endl            Branch to end line subroutine
00003122  6100 0EB0                293      bsr     get_cursor_pos  Get the position of the cursor in D3
00003126                           294      
00003126  43F9 00004D95            295      lea     input_nums_msg,A1 assign message to address register A1
0000312C  103C 000E                296      move.b  #14,D0          move literal 14 to DO
00003130  4E4F                     297      trap    #15             Display the "enter number" message
00003132                           298      
00003132  2205                     299      move.l  D5,D1           Move the number of options to D1 to display it
00003134  103C 0003                300      move.b  #3,D0           move literal 3 to DO
00003138  4E4F                     301      trap    #15             Display the number in D1 to show the input range
0000313A                           302      
0000313A  43F9 00004DAE            303      lea     colon_msg,A1    assign message to address register A1
00003140  103C 000E                304      move.b  #14,D0          move literal 14 to DO
00003144  4E4F                     305      trap    #15             Display a colon after the number range
00003146                           306      
00003146  103C 0004                307      move.b  #4,D0           Move the number 4 to D0
0000314A  4E4F                     308      trap    #15             Take input
0000314C                           309      
0000314C  1A01                     310      move.b  D1,D5           Move the input to D5 for later
0000314E                           311      
0000314E  3203                     312      move.w  D3,D1           Move the cursor position of the start of the line
00003150  103C 000B                313      move.b  #11,D0          Move the number literal 11 to D0 for trap command
00003154  4E4F                     314      trap    #15             Move the cursor back to the start of the line
00003156                           315      
00003156  43F9 0000499A            316      lea     blank_msg,A1    Load the blank message into A1 to wipe the line blank
0000315C  103C 000E                317      move.b  #14,D0          Move number literal to D0 for trap command
00003160  4E4F                     318      trap    #15             Display the loaded message
00003162                           319      
00003162  103C 000B                320      move.b  #11,D0          Move the number literal 11 to D0 for trap command
00003166  4E4F                     321      trap    #15             Move the cursor back to the start of the line
00003168                           322      
00003168  4281                     323      clr.l   D1              Clear D1 of large values
0000316A  1205                     324      move.b  D5,D1           Move the input back to D1
0000316C                           325      
0000316C                           326  manage_input:
0000316C  B27C 0001                327      CMP     #1,D1           Check input against minimum value
00003170  6D00 0014                328      BLT     invalid_input   Error if less than 1
00003174                           329      
00003174  B245                     330      CMP     D5,D1           Compare input against max value
00003176  6E00 000E                331      BGT     invalid_input   Error if more than max value
0000317A                           332      
0000317A  0C38 0000 5FF3           333      CMP.B   #0,GAME_STATE   Check which state the game is in
00003180  6700 FEC2                334      BEQ     role_input      Branch to the manage input for the role picking
00003184                           335      
00003184  4E75                     336      rts                     Return out of subroutine
00003186                           337  
00003186                           338  invalid_input:
00003186  43F9 00004DB1            339      lea     input_error_msg,A1 assign message to address register A1
0000318C  103C 000E                340      move.b  #14,D0          move literal 14 to DO
00003190  4E4F                     341      trap    #15             Display the error message
00003192                           342      
00003192  608A                     343      bra     input           Go back to taking input
00003194                           344  
00003194                           345  *-------------------------------------------------------
00003194                           346  *----------------Gameloop (main loop)-------------------
00003194                           347  *------------------------------------------------------- 
00003194                           348  gameloop:
00003194  6100 07CE                349      bsr     clear_screen    clears the screen  
00003198  6100 0308                350      bsr     draw            branch to draw screen subroutine
0000319C  6100 035C                351      bsr     draw_hud
000031A0  6100 0008                352      bsr     update          branch to update game subroutine 
000031A4  6100 0772                353      bsr     gameplay        branch to gameplay subroutine
000031A8  60EA                     354      bra     gameloop        Continue looping the game loop     
000031AA                           355  
000031AA                           356  *-------------------------------------------------------
000031AA                           357  *----------------Update Quest Progress------------------
000031AA                           358  *  Complete Quest
000031AA                           359  *------------------------------------------------------- 
000031AA                           360  update:
000031AA  0C38 0000 5FF0           361      CMP.B   #0,PLAYER           Check if the player health is zero
000031B0  6F00 0022                362      BLE     player_dead         Player is dead if health is zero or below
000031B4                           363      
000031B4  BDFC 00008156            364      CMP.L   #WIN_POINT,A6       Check if the player is standing on the win point
000031BA  6700 0042                365      BEQ     won_game            Branch to the won game subroutine
000031BE                           366  
000031BE  0C38 0005 5FF3           367      CMP.B   #5,GAME_STATE       Check which state the game is in
000031C4  6700 0066                368      BEQ     movement_checks     Check for enemies and shops if in movement state
000031C8  0C38 0006 5FF3           369      CMP.B   #6,GAME_STATE       Check which state the game is in
000031CE  6700 029A                370      BEQ     enemy_alive_check   Check if enemy is dead if in combat
000031D2                           371      
000031D2  4E75                     372      rts
000031D4                           373      
000031D4                           374  *-------------------------------------------------------
000031D4                           375  *---------------------Win or Lose----------------------- 
000031D4                           376  player_dead:
000031D4  6100 07BC                377      bsr     endl            Break to new line
000031D8                           378      
000031D8  43F9 00005586            379      lea     death_msg,A1    Load the death message
000031DE  103C 000E                380      move.b  #14,D0          Move byte #14 to D0 for the trap command
000031E2  4E4F                     381      trap    #15             Display the loaded message
000031E4                           382  
000031E4  6100 0D68                383      bsr     press_continue  Pause to get input
000031E8  6100 077A                384      bsr     clear_screen    Clear the screen
000031EC  6100 02E2                385      bsr     draw_graveyard  Draw a graveyard
000031F0  6100 07A0                386      bsr     endl            Break to new line
000031F4  11FC 0040 5FF3           387      move.b  #64,GAME_STATE  Set the game state to end game
000031FA  6000 0774                388      bra     replay          Give the player the option to restart or quit
000031FE                           389      
000031FE                           390  won_game:
000031FE  6100 0792                391      bsr     endl            Break to new line
00003202                           392      
00003202  43F9 000055EB            393      lea     win_msg,A1      Load the win message
00003208  103C 000E                394      move.b  #14,D0          Move byte #14 to D0 for the trap command
0000320C  4E4F                     395      trap    #15             Display the loaded message
0000320E                           396  
0000320E  6100 0D3E                397      bsr     press_continue  Pause to get input
00003212  6100 0750                398      bsr     clear_screen    Clear the screen
00003216  6100 077A                399      bsr     endl            Break to new line
0000321A  6100 02C2                400      bsr     draw_castle     Draw a castle
0000321E  6100 0772                401      bsr     endl            Break to new line
00003222  11FC 0040 5FF3           402      move.b  #64,GAME_STATE  Set the game state to end game
00003228  6000 0746                403      bra     replay          Give the player the option to restart or quit
0000322C                           404  
0000322C                           405  *-------------------------------------------------------
0000322C                           406  *--------------------Movement State--------------------- 
0000322C                           407  movement_checks:
0000322C  6100 0100                408      bsr     manage_torch    Check if the torch life is zero and if damage player if so
00003230  6100 0016                409      bsr     loot_piles_check Check for loot piles under the player 
00003234  6100 012C                410      bsr     enemies_check   Check for enemies beside the player
00003238  0C38 0005 5FF3           411      CMP.B   #5,GAME_STATE   Compare the movement gamestate number with the current gamestate
0000323E  6600 0D40                412      BNE     return          Return from the loop if the game is not in the movement state anymore
00003242  6100 01A8                413      bsr     shops_check     Check for shops beside the player
00003246                           414      
00003246  4E75                     415      rts
00003248                           416  
00003248                           417  *-------------------Loot pile checks--------------------
00003248                           418  loot_piles_check:
00003248  4BF8 7000                419      lea     FIRST_LOOT,A5   Load the memory address of the first loot pile
0000324C  1A3C 0000                420      move.b  #0,D5           Move the starting loot number to D5
00003250  6100 0004                421      bsr     loot_pile_loop  Loop through all loot piles
00003254  4E75                     422      rts                     Return from subroutine
00003256                           423      
00003256                           424  loot_pile_loop:
00003256  BA3C 0002                425      CMP.B   #ENEMY_MAX,D5   Compare the loot number with the maximum enemy number
0000325A  6C00 0D24                426      BGE     return          Return from the loop if the current loot number is greater than or equal to the max
0000325E                           427  
0000325E  6100 000A                428      bsr     loot_pile_check Check for a loot pile
00003262                           429      
00003262  5205                     430      add.b   #1,D5           Add to the current loot number
00003264  DAFC 0010                431      add.w   #16,A5          Add to the current loot pointer to move to the next loot pile
00003268  60EC                     432      bra     loot_pile_loop  Keep looping the loot piles
0000326A                           433      
0000326A                           434  loot_pile_check:
0000326A  5C4D                     435      add.w   #L_ACTIVE,A5    Move to the active state
0000326C  0C15 0000                436      CMP.B   #0,(A5)         Check if the loot is active
00003270  5D4D                     437      sub.w   #L_ACTIVE,A5    Move to the active state
00003272  6700 0D0C                438      BEQ     return          Return if not active
00003276                           439  
00003276  3415                     440      move.w  (A5),D2         Move the loot pile position to D2 for large value comparison
00003278  BDC2                     441      CMP.L   D2,A6           Check if the player is on a loot pile   
0000327A  6700 0004                442      BEQ     pickup_loot     Pickup the loot
0000327E                           443      
0000327E  4E75                     444      rts     Return if not touching a loot pile
00003280                           445      
00003280                           446  pickup_loot:
00003280  6100 0710                447      bsr     endl                Line break
00003284                           448  
00003284  223C 0000FFFF            449      move.l  #GOLD,D1            Load gold colour
0000328A  6100 0D36                450      bsr     change_font_colour  Change the font colour
0000328E                           451      
0000328E  43F9 000057D5            452      LEA     pickup_loot_msg,A1  Load the encounter message int A1
00003294  103C 000E                453      move.b  #14,D0              Move #14 to D0 to display message
00003298  4E4F                     454      trap    #15                 Display the loaded message
0000329A                           455      
0000329A  544D                     456      add.w   #S_POTIONS,A5       Move to potions number
0000329C  1215                     457      move.b  (A5),D1            Move the loot potions number to D1 and increment
0000329E  D338 5FF9                458      add.b   D1,PLA_POTIONS      Give the player the number of potions in the loot
000032A2                           459      
000032A2  43F9 000057F9            460      LEA     pickup_potion_msg,A1  Load the pickup potions message into A1
000032A8  103C 000E                461      move.b  #14,D0              Move #14 to D0 to display message
000032AC  4E4F                     462      trap    #15                 Display the loaded message
000032AE                           463      
000032AE  384D                     464      move.w  A5,A4               Move the item number to A4 to draw it
000032B0  6100 0644                465      bsr     draw_item_number    Draw the item number
000032B4  6100 06DC                466      bsr     endl                Break to new line
000032B8  524D                     467      add.w   #1,A5               Move to the next item in the loot pile
000032BA                           468      
000032BA  1215                     469      move.b  (A5),D1             Move the key number to D1 and increment
000032BC  D338 5FFA                470      add.b   D1,PLA_KEYS         Give the player the number of keys in the loot
000032C0                           471      
000032C0  43F9 00005803            472      LEA     pickup_key_msg,A1   Load the pickup key message into A1
000032C6  103C 000E                473      move.b  #14,D0              Move #14 to D0 to display message
000032CA  4E4F                     474      trap    #15                 Display the loaded message
000032CC                           475      
000032CC  384D                     476      move.w  A5,A4               Move the item number to A4 to draw it
000032CE  6100 0626                477      bsr     draw_item_number    Draw the item number
000032D2  6100 06BE                478      bsr     endl                Break to new line
000032D6  524D                     479      add.w   #1,A5               Move to the next item in the loot pile
000032D8                           480      
000032D8  1215                     481      move.b  (A5),D1             Move the torch number to D1 and increment
000032DA  D338 5FFB                482      add.b   D1,PLA_TORCH        Give the player the number of torches in the loot
000032DE                           483      
000032DE  43F9 0000580A            484      LEA     pickup_torch_msg,A1 Load the pickup torch message into A1
000032E4  103C 000E                485      move.b  #14,D0              Move #14 to D0 to display message
000032E8  4E4F                     486      trap    #15                 Display the loaded message
000032EA                           487      
000032EA  384D                     488      move.w  A5,A4               Move the item number to A4 to draw it
000032EC  6100 0608                489      bsr     draw_item_number    Draw the item number
000032F0  6100 06A0                490      bsr     endl                Break to new line
000032F4  524D                     491      add.w   #1,A5               Move to the next item in the loot pile
000032F6                           492      
000032F6  1215                     493      move.b  (A5),D1             Move the torch number to D1 and increment
000032F8  D338 5FF8                494      add.b   D1,PLA_GOLD         Give the player the number of gold in the loot
000032FC                           495      
000032FC  43F9 000057F1            496      LEA     pickup_gold_msg,A1  Load the pickup gold message int A1
00003302  103C 000E                497      move.b  #14,D0              Move #14 to D0 to display message
00003306  4E4F                     498      trap    #15                 Display the loaded message
00003308                           499      
00003308  384D                     500      move.w  A5,A4               Move the item number to A4 to draw it
0000330A  6100 05EA                501      bsr     draw_item_number    Draw the item number
0000330E  6100 0682                502      bsr     endl                Break to new line
00003312  524D                     503      add.w   #1,A5               Move to the next item in the loot pile
00003314                           504      
00003314  1ABC 0000                505      move.b  #0,(A5)             Set the loot to not active
00003318  5D4D                     506      sub.w   #L_ACTIVE,A5        Move to active state
0000331A                           507      
0000331A  223C 00FFFFFF            508      move.l  #WHITE,D1           Load the white colour
00003320  6100 0CA0                509      bsr     change_font_colour  Change the font colour
00003324                           510      
00003324  6100 0C28                511      bsr     press_continue      Wait for user input
00003328  6100 01D0                512      bsr     draw_hud            Re-draw the hud
0000332C                           513      
0000332C  4E75                     514      rts
0000332E                           515  
0000332E                           516  *---------------------Manage Torch----------------------
0000332E                           517  manage_torch:
0000332E  0C38 0000 5FFB           518      CMP.B   #0,PLA_TORCH    Compare the torch life with zero
00003334  6E00 0C4A                519      BGT     return          Return if the torch life is greater than zero
00003338                           520      
00003338  5338 5FF0                521      sub.b   #1,PLAYER       Remove one health from the player
0000333C                           522      
0000333C  6100 0654                523      bsr     endl            Break to new line
00003340                           524      
00003340  223C 000000FF            525      move.l  #RED,D1
00003346  6100 0C7A                526      bsr     change_font_colour  Change the font colour
0000334A                           527      
0000334A  43F9 000057BD            528      lea     no_torch_msg,A1 Load the no torch message into A1
00003350  103C 000E                529      move.b  #14,D0          Move the number literal 14 into D0 for trap command
00003354  4E4F                     530      trap    #15             Display the loaded message
00003356                           531      
00003356  223C 00FFFFFF            532      move.l  #WHITE,D1
0000335C  6100 0C64                533      bsr     change_font_colour  Change the font colour
00003360                           534      
00003360  4E75                     535      rts                     Return from the subroutine
00003362                           536  
00003362                           537  *--------------------Enemy Checking--------------------- 
00003362                           538  enemies_check:
00003362  4BF8 6000                539      lea     FIRST_ENEMY,A5  Load the memory address of the first enemy
00003366  1A3C 0000                540      move.b  #0,D5           Move the starting enemy number to D5
0000336A  6100 0004                541      bsr     enemies_loop    Loop through all enemies
0000336E  4E75                     542      rts                     Return from subroutine
00003370                           543      
00003370                           544  enemies_loop:
00003370  BA3C 0002                545      CMP.B   #ENEMY_MAX,D5   Compare the enemy number with the maximum enemy number
00003374  6C00 0C0A                546      BGE     return          Return from the loop if the current enemy number is greater than or equal to the max
00003378                           547  
00003378  6100 0014                548      bsr     enemy_check     Check for an enemy
0000337C                           549      
0000337C  0C38 0005 5FF3           550      CMP.B   #5,GAME_STATE   Compare the movement gamestate number with the current gamestate
00003382  6600 0BFC                551      BNE     return          Return from the loop if the game is not in the movement state anymore
00003386                           552      
00003386  5205                     553      add.b   #1,D5           Add to the current enemy number
00003388  DAFC 000C                554      add.w   #12,A5          Add to the current enemy pointer to move to the next enemy (16 for next enemy - 4 to get back from position)
0000338C  60E2                     555      bra     enemies_loop    Keep looping the enemies
0000338E                           556      
0000338E                           557  
0000338E                           558  enemy_check:
0000338E  564D                     559      add.w   #ALIVE,A5       Move into enemy information to check if its alive
00003390  0C1D 0000                560      CMP.B   #0,(A5)+        Check if the enemy is alive
00003394  6700 0BEA                561      BEQ     return          Return from the check if the enemy is dead
00003398                           562      
00003398  340E                     563      move.w  A6,D2           Move the player position to D2
0000339A                           564      
0000339A                           565      *Check if the player is beside an enemy
0000339A  0442 0010                566      sub.w   #16,D2          Check north
0000339E  B455                     567      CMP.W   (A5),D2           
000033A0  6700 0020                568      BEQ     enter_combat    Enter the player into combat
000033A4                           569      
000033A4  0642 0020                570      add.w   #32,D2          Check south
000033A8  B455                     571      CMP.W   (A5),D2           
000033AA  6700 0016                572      BEQ     enter_combat    Enter the player into combat
000033AE                           573      
000033AE  0442 0011                574      sub.w   #17,D2          Check west
000033B2  B455                     575      CMP.W   (A5),D2           
000033B4  6700 000C                576      BEQ     enter_combat    Enter the player into combat
000033B8                           577      
000033B8  5442                     578      add.w   #2,D2           Check east
000033BA  B455                     579      CMP.W   (A5),D2           
000033BC  6700 0004                580      BEQ     enter_combat    Enter the player into combat
000033C0                           581      
000033C0  4E75                     582      rts     Return if not touching an enemy
000033C2                           583      
000033C2                           584  enter_combat:
000033C2  594D                     585      sub.w   #4,A5               Get the memory address of the enemy opposed to it's position
000033C4  11FC 0006 5FF3           586      move.b  #6,GAME_STATE       Move to combat state
000033CA                           587      
000033CA  6100 05C6                588      bsr     endl                Line break
000033CE                           589      
000033CE  43F9 000050EB            590      LEA     encounter_msg,A1    Load the encounter message int A1
000033D4  103C 000E                591      move.b  #14,D0              Move #14 to D0 to display message
000033D8  4E4F                     592      trap    #15                 Display the loaded message
000033DA                           593      
000033DA  6100 0B72                594      bsr     press_continue      Branch to the press to continue subroutine
000033DE                           595      
000033DE  6100 0584                596      bsr     clear_screen        Clear the screen
000033E2                           597      
000033E2  6100 00DE                598      bsr     draw_skeleton       Draw the enemy
000033E6  6100 02C8                599      bsr     draw_battle_info    Draw the info
000033EA                           600      
000033EA  4E75                     601      rts
000033EC                           602        
000033EC                           603  *--------------------Shop Checking----------------------
000033EC                           604  shops_check:
000033EC  4BF8 6500                605      lea     FIRST_SHOP,A5   Load the memory address of the first shop
000033F0  1A3C 0000                606      move.b  #0,D5           Move the starting shop number to D5
000033F4  6100 0004                607      bsr     shops_loop      Loop through all shops
000033F8  4E75                     608      rts                     Return from subroutine
000033FA                           609      
000033FA                           610  shops_loop:
000033FA  BA3C 0002                611      CMP.B   #SHOP_MAX,D5    Compare the shop number with the maximum shop number
000033FE  6C00 0B80                612      BGE     return          Return from the loop if the current shop number is greater than or equal to the max
00003402                           613      
00003402  6100 0014                614      bsr     shop_check      Check for a shop
00003406                           615      
00003406  0C38 0005 5FF3           616      CMP.B   #5,GAME_STATE   Compare the movement gamestate number with the current gamestate
0000340C  6600 0B72                617      BNE     return          Return from the loop if the game is not in the movement state anymore
00003410                           618      
00003410  5205                     619      add.b   #1,D5           Add to the current shop number
00003412  DAFC 0010                620      add.w   #16,A5          Add to the current shop pointer to move to the next shop
00003416  60E2                     621      bra     shops_loop      Keep looping the shops
00003418                           622      
00003418                           623  shop_check:    
00003418  340E                     624      move.w  A6,D2           Move the player position to D2
0000341A                           625      
0000341A                           626      *Check if the player is beside a shop
0000341A  0442 0010                627      sub.w   #16,D2          Check north
0000341E  B455                     628      CMP.W   (A5),D2           
00003420  6700 0020                629      BEQ     enter_shop      The player enters a shop
00003424                           630      
00003424  0642 0020                631      add.w   #32,D2          Check south
00003428  B455                     632      CMP.W   (A5),D2           
0000342A  6700 0016                633      BEQ     enter_shop      The player enters a shop
0000342E                           634      
0000342E  0442 0011                635      sub.w   #17,D2          Check west
00003432  B455                     636      CMP.W   (A5),D2           
00003434  6700 000C                637      BEQ     enter_shop      The player enters a shop
00003438                           638      
00003438  5442                     639      add.w   #2,D2           Check east
0000343A  B455                     640      CMP.W   (A5),D2           
0000343C  6700 0004                641      BEQ     enter_shop      The player enters a shop
00003440                           642      
00003440  4E75                     643      rts     Return if not touching a shop
00003442                           644      
00003442                           645  enter_shop:
00003442  11FC 0007 5FF3           646      move.b  #7,GAME_STATE       Move to shop game state
00003448                           647      
00003448  6100 0548                648      bsr     endl                Line break
0000344C                           649      
0000344C  43F9 0000568C            650      LEA     shop_enter_msg,A1   Load the encounter message int A1
00003452  103C 000E                651      move.b  #14,D0              Move #14 to D0 to display message
00003456  4E4F                     652      trap    #15                 Display the loaded message
00003458                           653      
00003458  6100 0AF4                654      bsr     press_continue      Branch to the press to continue subroutine
0000345C                           655      
0000345C  6100 0506                656      bsr     clear_screen        Clear the screen
00003460                           657      
00003460  6100 008A                658      bsr     draw_merchant       Draw the merchant
00003464  6100 035C                659      bsr     draw_shop_info      Draw the info
00003468                           660      
00003468  4E75                     661      rts
0000346A                           662  
0000346A                           663  *-------------------------------------------------------
0000346A                           664  *---------------------Combat State---------------------- 
0000346A                           665  enemy_alive_check:
0000346A  0C15 0000                666      CMP.B   #0,(A5)     Compare the enemy health with zero
0000346E  6F00 0004                667      BLE     enemy_died  If the enemy health is zero or below, they died
00003472                           668      
00003472  4E75                     669      rts
00003474                           670      
00003474                           671  enemy_died:
00003474  6100 051C                672      bsr     endl            Break to a new line
00003478                           673  
00003478  43F9 00005550            674      lea     battle_won_msg,A1   Load the won battle message
0000347E  103C 000E                675      move.b  #14,D0              Move the literal #14 to D0 for trap task #14
00003482  4E4F                     676      trap    #15                 Display the message
00003484                           677      
00003484  11FC 0005 5FF3           678      move.b  #5,GAME_STATE   Set the game state mack to movement state
0000348A  564D                     679      add.w   #ALIVE,A5       Move from the enemy health to its alive status
0000348C  1ABC 0000                680      move.b  #0,(A5)         Set the enemy as dead
00003490                           681      
00003490  6100 0ABC                682      bsr     press_continue
00003494                           683      
00003494  6100 04CE                684      bsr     clear_screen    Clear the screen
00003498  6100 0008                685      bsr     draw            Draw the map for first frame back in movement
0000349C  6100 005C                686      bsr     draw_hud        Draw the hud for first frame back in movement
000034A0                           687      
000034A0  4E75                     688      rts
000034A2                           689      
000034A2                           690  *-------------------------------------------------------
000034A2                           691  *-----------------Draw Quest Updates--------------------
000034A2                           692  * Draw the game progress information, status regarding
000034A2                           693  * quest
000034A2                           694  *------------------------------------------------------- 
000034A2                           695  draw:
000034A2  0C38 0005 5FF3           696      CMP.B   #5,GAME_STATE   Check which state the game is in
000034A8  6700 0B38                697      BEQ     draw_loop       If in the movement state, draw the map
000034AC  0C38 0006 5FF3           698      CMP.B   #6,GAME_STATE   Check which state the game is in
000034B2  6700 000E                699      BEQ     draw_skeleton   If in the combat state, draw the enemy
000034B6  0C38 0007 5FF3           700      CMP.B   #7,GAME_STATE   Check which state the game is in
000034BC  6700 002E                701      BEQ     draw_merchant   If in the shop state, draw the enemy
000034C0  4E75                     702      rts
000034C2                           703      
000034C2                           704  draw_skeleton:
000034C2  43F9 000059C3            705      lea     skeleton_msg,A1 Load the skeleton message
000034C8  103C 000E                706      move.b  #14,D0          Move literal 14 for display message trap command
000034CC  4E4F                     707      trap    #15             Display the loaded message
000034CE                           708      
000034CE  4E75                     709      rts
000034D0                           710      
000034D0                           711  draw_graveyard:
000034D0  43F9 00005911            712      lea     graveyard_msg,A1 Load the graveyard message
000034D6  103C 000E                713      move.b  #14,D0           Move literal 14 for display message trap command
000034DA  4E4F                     714      trap    #15              Display the loaded message
000034DC  4E75                     715      rts                      Return from the subroutine
000034DE                           716  
000034DE                           717  draw_castle:
000034DE  43F9 00005BE2            718      lea     castle_msg,A1   Load the castle message
000034E4  103C 000E                719      move.b  #14,D0          Move literal 14 for display message trap command
000034E8  4E4F                     720      trap    #15             Display the loaded message
000034EA  4E75                     721      rts                     Return from the subroutine
000034EC                           722      
000034EC                           723  draw_merchant:
000034EC  43F9 00005ABB            724      lea     merchant_msg,A1  Load the merchant message
000034F2  103C 000E                725      move.b  #14,D0           Move literal 14 for display message trap command
000034F6  4E4F                     726      trap    #15              Display the loaded message
000034F8                           727      
000034F8  4E75                     728      rts
000034FA                           729      
000034FA                           730  draw_hud:
000034FA  0C38 0005 5FF3           731      CMP.B   #5,GAME_STATE       Check which state the game is in
00003500  6700 0018                732      BEQ     draw_player_info    If in the movement state, draw the player info
00003504  0C38 0006 5FF3           733      CMP.B   #6,GAME_STATE       Check which state the game is in
0000350A  6700 01A4                734      BEQ     draw_battle_info    If in the combat state, draw the combat info
0000350E  0C38 0007 5FF3           735      CMP.B   #7,GAME_STATE       Check which state the game is in
00003514  6700 02AC                736      BEQ     draw_shop_info      If in the shop state, draw the shop info
00003518                           737      
00003518  4E75                     738      rts
0000351A                           739  
0000351A                           740  *-------------------Draw Player Info--------------------
0000351A                           741  draw_player_info:
0000351A  6100 0AB8                742      bsr     get_cursor_pos   Get the cursor position and store it in D3
0000351E                           743      
0000351E                           744      * Display the player health
0000351E  3A3C 3201                745      move.w  #CSR_POS_MOVE,D5 Move a start cursor position to D5
00003522  323C 3201                746      move.w  #CSR_POS_MOVE,D1 Move a start cursor position to D1 to move the cursor
00003526  4E4F                     747      trap    #15              Move the cursor position
00003528  4281                     748      clr.l   D1               Clear the cursor position from D1
0000352A                           749      
0000352A  43F9 000054C1            750      lea     health_msg,A1   Load the hud message
00003530  103C 000E                751      move.b  #14,D0          Move literal 14 for display message trap command
00003534  4E4F                     752      trap    #15             Display the loaded message
00003536                           753      
00003536  1238 5FF0                754      move.b  PLAYER,D1       Move the player health value to D1 to display
0000353A  103C 0003                755      move.b  #3,D0           Move literal 3 for display number trap command
0000353E  4E4F                     756      trap    #15             Display the number in D1
00003540                           757      
00003540                           758      * Display the torch life
00003540  6100 03A6                759      bsr     next_cursor_pos  Move to the next cursor position
00003544                           760      
00003544  43F9 000054F6            761      lea     torch_msg,A1    Load the hud message
0000354A  103C 000E                762      move.b  #14,D0          Move literal 14 for display message trap command
0000354E  4E4F                     763      trap    #15             Display the loaded message
00003550                           764      
00003550  1238 5FFB                765      move.b  PLA_TORCH,D1    Move the player torch life value to D1 to display
00003554  103C 0003                766      move.b  #3,D0           Move literal 3 for display number trap command
00003558  4E4F                     767      trap    #15             Display the number in D1
0000355A                           768      
0000355A                           769      * Display the inventory
0000355A  6100 038C                770      bsr     next_cursor_pos  Move to the next cursor position
0000355E                           771      
0000355E  43F9 00005510            772      lea     inventory_msg,A1   Load the hud message
00003564  103C 000E                773      move.b  #14,D0          Move literal 14 for display message trap command
00003568  4E4F                     774      trap    #15             Display the loaded message
0000356A                           775      
0000356A                           776      * Display the player gold
0000356A  6100 037C                777      bsr     next_cursor_pos  Move to the next cursor position
0000356E                           778      
0000356E  43F9 0000551B            779      lea     gold_msg,A1   Load the hud message
00003574  103C 000E                780      move.b  #14,D0          Move literal 14 for display message trap command
00003578  4E4F                     781      trap    #15             Display the loaded message
0000357A                           782      
0000357A  49F8 5FF8                783      lea     PLA_GOLD,A4
0000357E  6100 0376                784      bsr     draw_item_number
00003582                           785      
00003582                           786      * Display the player potions
00003582  6100 0364                787      bsr     next_cursor_pos  Move to the next cursor position
00003586                           788      
00003586  43F9 0000552A            789      lea     potions_msg,A1   Load the hud message
0000358C  103C 000E                790      move.b  #14,D0          Move literal 14 for display message trap command
00003590  4E4F                     791      trap    #15             Display the loaded message
00003592                           792      
00003592  49F8 5FF9                793      lea     PLA_POTIONS,A4
00003596  6100 035E                794      bsr     draw_item_number
0000359A                           795      
0000359A                           796      * Display the player keys
0000359A  6100 034C                797      bsr     next_cursor_pos  Move to the next cursor position
0000359E                           798      
0000359E  43F9 00005523            799      lea     key_msg,A1   Load the hud message
000035A4  103C 000E                800      move.b  #14,D0          Move literal 14 for display message trap command
000035A8  4E4F                     801      trap    #15             Display the loaded message
000035AA                           802      
000035AA  49F8 5FFA                803      lea     PLA_KEYS,A4
000035AE  6100 0346                804      bsr     draw_item_number
000035B2                           805      
000035B2  6100 000E                806      bsr     draw_map_legend Draw the map legend
000035B6                           807      
000035B6  3203                     808      move.w  D3,D1           Move the previos cursor position to D1 to put it back in place
000035B8                           809      
000035B8  103C 000B                810      move.b  #11,D0          Move the byte #11 to D0 for trap command 11          
000035BC  4E4F                     811      trap    #15             Set the cursor position with trap command 11
000035BE                           812      
000035BE  4241                     813      clr     D1              Clear D1 for later use
000035C0                           814      
000035C0  4E75                     815      rts
000035C2                           816      
000035C2                           817  *-------------------Draw Map Legend---------------------
000035C2                           818  draw_map_legend:
000035C2                           819      * Display the legend message
000035C2  3A3C 3201                820      move.w  #CSR_POS_MOVE,D5 Move a start cursor position to D5
000035C6  5E45                     821      add.w   #7,D5            increment the start position by 7
000035C8  6100 031E                822      bsr     next_cursor_pos  Move to the next cursor position
000035CC                           823      
000035CC  103C 000E                824      move.b  #14,D0          Move literal 14 for display message trap command
000035D0  43F9 0000509B            825      lea     map_legend_msg,A1 Load the message into A1
000035D6  4E4F                     826      trap    #15             Display the loaded message
000035D8                           827      
000035D8                           828      * Display the player mark
000035D8  6100 030E                829      bsr     next_cursor_pos  Move to the next cursor position
000035DC  223C 0000FF00            830      move.l  #GREEN,D1       Load the colour green to D1
000035E2  6100 09DE                831      bsr     change_font_colour  Change the font colour
000035E6                           832      
000035E6  103C 000E                833      move.b  #14,D0          Move literal 14 for display message trap command
000035EA  43F9 0000508F            834      lea     player_mark,A1  Load the message into A1
000035F0  4E4F                     835      trap    #15             Display the loaded message
000035F2  43F9 000050A7            836      lea     map_player_msg,A1 Load the message into A1
000035F8  4E4F                     837      trap    #15             Display the loaded message
000035FA                           838      
000035FA                           839      * Display the enemy mark
000035FA  6100 02EC                840      bsr     next_cursor_pos  Move to the next cursor position
000035FE  223C 000000FF            841      move.l  #RED,D1         Load the colour red to D1
00003604  6100 09BC                842      bsr     change_font_colour  Change the font colour
00003608                           843      
00003608  103C 000E                844      move.b  #14,D0          Move literal 14 for display message trap command
0000360C  43F9 00005091            845      lea     enemy_mark,A1   Load the message into A1
00003612  4E4F                     846      trap    #15             Display the loaded message
00003614  43F9 000050B1            847      lea     map_enemy_msg,A1 Load the message into A1
0000361A  4E4F                     848      trap    #15             Display the loaded message
0000361C                           849      
0000361C                           850      * Display the win point mark
0000361C  6100 02CA                851      bsr     next_cursor_pos  Move to the next cursor position
00003620  223C 00FF0000            852      move.l  #BLUE,D1       Load the colour blue to D1
00003626  6100 099A                853      bsr     change_font_colour  Change the font colour
0000362A                           854      
0000362A  103C 000E                855      move.b  #14,D0          Move literal 14 for display message trap command
0000362E  43F9 00005093            856      lea     win_point_mark,A1   Load the message into A1
00003634  4E4F                     857      trap    #15             Display the loaded message
00003636  43F9 000050BA            858      lea     map_win_point_msg,A1 Load the message into A1
0000363C  4E4F                     859      trap    #15             Display the loaded message
0000363E                           860     
0000363E                           861      * Display the shop mark
0000363E  6100 02A8                862      bsr     next_cursor_pos  Move to the next cursor position
00003642  223C 00F000F0            863      move.l  #PURPLE,D1      Load the colour purple to D1
00003648  6100 0978                864      bsr     change_font_colour  Change the font colour
0000364C                           865      
0000364C  103C 000E                866      move.b  #14,D0          Move literal 14 for display message trap command
00003650  43F9 00005095            867      lea     shop_mark,A1   Load the message into A1
00003656  4E4F                     868      trap    #15             Display the loaded message
00003658  43F9 000050C7            869      lea     map_shop_msg,A1 Load the message into A1
0000365E  4E4F                     870      trap    #15             Display the loaded message
00003660                           871      
00003660                           872      * Display the loot mark
00003660  6100 0286                873      bsr     next_cursor_pos  Move to the next cursor position
00003664  223C 0000FFFF            874      move.l  #GOLD,D1       Load the colour gold to D1
0000366A  6100 0956                875      bsr     change_font_colour  Change the font colour
0000366E                           876      
0000366E  103C 000E                877      move.b  #14,D0          Move literal 14 for display message trap command
00003672  43F9 00005097            878      lea     loot_mark,A1    Load the message into A1
00003678  4E4F                     879      trap    #15             Display the loaded message
0000367A  43F9 000050CF            880      lea     map_loot_msg,A1 Load the message into A1
00003680  4E4F                     881      trap    #15             Display the loaded message
00003682                           882      
00003682                           883      * Display the door mark
00003682  6100 0264                884      bsr     next_cursor_pos Move to the next cursor position
00003686  223C 00507090            885      move.l  #BROWN,D1       Load the colour brown to D1
0000368C  6100 0934                886      bsr     change_font_colour  Change the font colour
00003690                           887      
00003690  103C 000E                888      move.b  #14,D0          Move literal 14 for display message trap command
00003694  43F9 00005099            889      lea     door_mark,A1    Load the message into A1
0000369A  4E4F                     890      trap    #15             Display the loaded message
0000369C  43F9 000050DC            891      lea     map_door_msg,A1 Load the message into A1
000036A2  4E4F                     892      trap    #15             Display the loaded message
000036A4                           893      
000036A4  223C 00FFFFFF            894      move.l  #WHITE,D1       Load the colour brown to D1
000036AA  6100 0916                895      bsr     change_font_colour  Change the font colour
000036AE                           896      
000036AE  4E75                     897      rts                     Return from subroutine
000036B0                           898  
000036B0                           899  *-------------------Draw Battle Info--------------------
000036B0                           900  draw_battle_info:
000036B0  6100 0922                901      bsr     get_cursor_pos   Get the cursor position and store it in D3
000036B4                           902      
000036B4                           903      * Move cursor to draw player info
000036B4  3A3C 3401                904      move.w  #CSR_POS_BATTLE_P,D5
000036B8  323C 3401                905      move.w  #CSR_POS_BATTLE_P,D1           
000036BC  4E4F                     906      trap    #15             Set the cursor position with trap command 11
000036BE  4241                     907      clr     D1              Clear D1 of the cursor position
000036C0                           908      
000036C0  103C 000E                909      move.b  #14,D0          Move literal 14 for display message trap command
000036C4  43F9 000054E8            910      lea     player_msg,A1   Load the hud message
000036CA  4E4F                     911      trap    #15             Display the loaded message
000036CC                           912      
000036CC  1E38 5FF2                913      move.b  PLA_CLASS,D7    Move the player class number to D7 to display it
000036D0  6100 00B2                914      bsr     display_role    Display the player role
000036D4                           915      
000036D4                           916      * Move the cursor to draw player damage level
000036D4  6100 0212                917      bsr     next_cursor_pos Move to the next cursor position
000036D8                           918      
000036D8  43F9 00005503            919      lea     damage_lvl_msg,A1   Load the damage lvl message
000036DE  103C 000E                920      move.b  #14,D0          Move literal 14 for display message trap command
000036E2  4E4F                     921      trap    #15             Display the loaded message
000036E4                           922      
000036E4  1238 5FF1                923      move.b  PLA_DAMAGE,D1   Move the player damge value to D1 to display
000036E8  103C 0003                924      move.b  #3,D0           Move literal 3 for display number trap command
000036EC  4E4F                     925      trap    #15             Display the number in D1
000036EE                           926      
000036EE                           927      * Move the cursor to draw player health
000036EE  6100 01F8                928      bsr     next_cursor_pos Move to the next cursor position
000036F2                           929      
000036F2  43F9 000054C1            930      lea     health_msg,A1   Load the hud message
000036F8  103C 000E                931      move.b  #14,D0          Move literal 14 for display message trap command
000036FC  4E4F                     932      trap    #15             Display the loaded message
000036FE                           933      
000036FE  1238 5FF0                934      move.b  PLAYER,D1       Move the player health value to D1 to display
00003702  103C 0003                935      move.b  #3,D0           Move literal 3 for display number trap command
00003706  4E4F                     936      trap    #15             Display the number in D1
00003708                           937      
00003708                           938      * Move the cursor to draw potion information
00003708  6100 01DE                939      bsr     next_cursor_pos Move to the next cursor position
0000370C                           940      
0000370C  43F9 0000552A            941      lea     potions_msg,A1   Load the hud message
00003712  103C 000E                942      move.b  #14,D0          Move literal 14 for display message trap command
00003716  4E4F                     943      trap    #15             Display the loaded message
00003718                           944      
00003718  49F8 5FF9                945      lea     PLA_POTIONS,A4
0000371C  6100 01D8                946      bsr     draw_item_number
00003720                           947      
00003720                           948      * Move the cursor to draw enemy info
00003720  103C 000B                949      move.b  #11,D0
00003724  3A3C 1901                950      move.w  #CSR_POS_BATTLE_E,D5
00003728  323C 1901                951      move.w  #CSR_POS_BATTLE_E,D1           
0000372C  4E4F                     952      trap    #15             Set the cursor position with trap command 11
0000372E  4241                     953      clr     D1              Clear D1 of the cursor position
00003730                           954      
00003730  43F9 000054E2            955      lea     enemy_msg,A1   Load the hud message
00003736  103C 000E                956      move.b  #14,D0          Move literal 14 for display message trap command
0000373A  4E4F                     957      trap    #15             Display the loaded message
0000373C                           958      
0000373C                           959      * Move the cursor to draw enemy level and class
0000373C  6100 01AA                960      bsr     next_cursor_pos Move to the next cursor position
00003740                           961      
00003740  43F9 000054EF            962      lea     level_msg,A1    Load the level message
00003746  103C 000E                963      move.b  #14,D0          Move literal 14 for display message trap command
0000374A  4E4F                     964      trap    #15             Display the loaded message
0000374C                           965      
0000374C  524D                     966      add.w   #1,A5           Move the enemy pointer to its damage level
0000374E  1215                     967      move.b  (A5),D1         Move the enemy damage value to D1 to display
00003750  103C 0003                968      move.b  #3,D0           Move literal 3 for display number trap command
00003754  4E4F                     969      trap    #15             Display the number in D1
00003756                           970      
00003756  524D                     971      add.w   #1,A5           Move the enemy pointer to the enemy's class type
00003758  1E15                     972      move.b  (A5),D7         Move the enemy class type to D7 to display
0000375A  6100 0028                973      bsr     display_role    Display the enemy role
0000375E  554D                     974      sub.w   #2,A5           Move the enemy pointer back to its root/health
00003760                           975      
00003760                           976      * Move the cursor to draw enemy health information
00003760  6100 0186                977      bsr     next_cursor_pos Move to the next cursor position
00003764                           978      
00003764  43F9 000054C1            979      lea     health_msg,A1 Load the hud message
0000376A  103C 000E                980      move.b  #14,D0              Move literal 14 for display message trap command
0000376E  4E4F                     981      trap    #15                 Display the loaded message
00003770                           982      
00003770  1215                     983      move.b  (A5),D1         Move the enemy health value to D1 to display
00003772  103C 0003                984      move.b  #3,D0           Move literal 3 for display number trap command
00003776  4E4F                     985      trap    #15             Display the number in D1
00003778                           986      
00003778                           987      * Move the cursor back to its previous position
00003778  3203                     988      move.w  D3,D1           Move the previous cursor position back to D1
0000377A  103C 000B                989      move.b  #11,D0          Move the byte #11 to D0 for trap command 11          
0000377E  4E4F                     990      trap    #15             Set the cursor position with trap command 11
00003780                           991      
00003780  4241                     992      clr     D1              Clear D1 for later use
00003782                           993      
00003782  4E75                     994      rts
00003784                           995  
00003784                           996  display_role
00003784  BE3C 0001                997      CMP.B   #1,D7           Compare the class with 1 (knight)
00003788  6700 000E                998      BEQ     display_knight  Branch to display the knight message
0000378C  BE3C 0002                999      CMP.B   #2,D7           Compare the class with 2 (mage)
00003790  6700 0014               1000      BEQ     display_mage    Branch to display the knight message
00003794  6600 001E               1001      BNE     display_rogue   Branch to display the rogue message
00003798                          1002      
00003798                          1003  display_knight:
00003798  103C 000E               1004      move.b  #14,D0          Move literal 14 for display message trap command
0000379C  43F9 000054CA           1005      lea     knight_msg,A1   Load the hud message
000037A2  4E4F                    1006      trap    #15             Display the loaded message
000037A4  4E75                    1007      rts
000037A6                          1008      
000037A6                          1009  display_mage:
000037A6  103C 000E               1010      move.b  #14,D0          Move literal 14 for display message trap command
000037AA  43F9 000054D3           1011      lea     mage_msg,A1     Load the hud message
000037B0  4E4F                    1012      trap    #15             Display the loaded message
000037B2  4E75                    1013      rts
000037B4                          1014  
000037B4                          1015  display_rogue:
000037B4  103C 000E               1016      move.b  #14,D0          Move literal 14 for display message trap command
000037B8  43F9 000054DA           1017      lea     rogue_msg,A1    Load the hud message
000037BE  4E4F                    1018      trap    #15             Display the loaded message
000037C0  4E75                    1019      rts
000037C2                          1020  
000037C2                          1021  *-------------------Draw Shop Info----------------------
000037C2                          1022  draw_shop_info:
000037C2  6100 0810               1023      bsr     get_cursor_pos   Get the cursor position and store it in D3
000037C6                          1024      
000037C6                          1025      * Move cursor to draw shop info
000037C6  3A3C 1801               1026      move.w  #CSR_POS_SHOP_S,D5
000037CA  323C 1801               1027      move.w  #CSR_POS_SHOP_S,D1           
000037CE  4E4F                    1028      trap    #15             Set the cursor position with trap command 11
000037D0  4241                    1029      clr     D1              Clear D1 of the cursor position
000037D2                          1030      
000037D2  43F9 00005766           1031      lea     shop_stock_msg,A1   Load the hud message
000037D8  103C 000E               1032      move.b  #14,D0          Move literal 14 for display message trap command
000037DC  4E4F                    1033      trap    #15             Display the loaded message
000037DE                          1034      
000037DE                          1035      
000037DE                          1036      * Display the shop's potions
000037DE  6100 0108               1037      bsr     next_cursor_pos Move to the next cursor position
000037E2                          1038      
000037E2  43F9 0000552A           1039      lea     potions_msg,A1   Load the hud message
000037E8  103C 000E               1040      move.b  #14,D0          Move literal 14 for display message trap command
000037EC  4E4F                    1041      trap    #15             Display the loaded message
000037EE                          1042      
000037EE  544D                    1043      add.w   #S_POTIONS,A5
000037F0  49D5                    1044      lea     (A5),A4
000037F2  6100 0102               1045      bsr     draw_item_number
000037F6                          1046      
000037F6                          1047      * Display the shop's keys
000037F6  6100 00F0               1048      bsr     next_cursor_pos Move to the next cursor position
000037FA                          1049      
000037FA  43F9 00005523           1050      lea     key_msg,A1      Load the hud message
00003800  103C 000E               1051      move.b  #14,D0          Move literal 14 for display message trap command
00003804  4E4F                    1052      trap    #15             Display the loaded message
00003806                          1053      
00003806  524D                    1054      add.w   #1,A5
00003808  49D5                    1055      lea     (A5),A4
0000380A  6100 00EA               1056      bsr     draw_item_number
0000380E                          1057      
0000380E                          1058      * Display the shop's torches
0000380E  6100 00D8               1059      bsr     next_cursor_pos Move to the next cursor position
00003812                          1060      
00003812  43F9 00005534           1061      lea     torches_msg,A1  Load the torches message
00003818  103C 000E               1062      move.b  #14,D0          Move literal 14 for display message trap command
0000381C  4E4F                    1063      trap    #15             Display the loaded message
0000381E                          1064      
0000381E  524D                    1065      add.w   #1,A5
00003820  49D5                    1066      lea     (A5),A4
00003822  6100 00D2               1067      bsr     draw_item_number
00003826                          1068      
00003826                          1069      * Display the shop's damage upgrades
00003826  6100 00C0               1070      bsr     next_cursor_pos Move to the next cursor position
0000382A                          1071      
0000382A  43F9 0000553D           1072      lea     damage_up_msg,A1 Load the damage upgrades message
00003830  103C 000E               1073      move.b  #14,D0           Move literal 14 for display message trap command
00003834  4E4F                    1074      trap    #15              Display the loaded message
00003836                          1075      
00003836  524D                    1076      add.w   #1,A5               Increment A5 to get to the damage upgrades
00003838  49D5                    1077      lea     (A5),A4             Load the memory address in A5 to A4
0000383A  6100 00BA               1078      bsr     draw_item_number    Draw the number of items
0000383E  5B4D                    1079      sub.w   #S_DAMAGE_IN,A5     Bring the pointer back to the root of the shop
00003840                          1080      
00003840                          1081      * Display the inventory
00003840  103C 000B               1082      move.b  #11,D0              Move the byte #11 to D0 for trap command 11
00003844  3A3C 3401               1083      move.w  #CSR_POS_SHOP_P,D5   
00003848  323C 3401               1084      move.w  #CSR_POS_SHOP_P,D1       
0000384C  4E4F                    1085      trap    #15                 Set the cursor position with trap command 11
0000384E  4241                    1086      clr     D1                  Clear D1 of the cursor position
00003850                          1087      
00003850  43F9 00005510           1088      lea     inventory_msg,A1    Load the hud message
00003856  103C 000E               1089      move.b  #14,D0              Move literal 14 for display message trap command
0000385A  4E4F                    1090      trap    #15                 Display the loaded message
0000385C                          1091      
0000385C                          1092      * Display the player gold
0000385C  6100 008A               1093      bsr     next_cursor_pos Move to the next cursor position
00003860                          1094      
00003860  43F9 0000551B           1095      lea     gold_msg,A1   Load the hud message
00003866  103C 000E               1096      move.b  #14,D0          Move literal 14 for display message trap command
0000386A  4E4F                    1097      trap    #15             Display the loaded message
0000386C                          1098      
0000386C  49F8 5FF8               1099      lea     PLA_GOLD,A4
00003870  6100 0084               1100      bsr     draw_item_number
00003874                          1101      
00003874                          1102      * Display the player potions
00003874  6100 0072               1103      bsr     next_cursor_pos Move to the next cursor position
00003878                          1104      
00003878  43F9 0000552A           1105      lea     potions_msg,A1   Load the hud message
0000387E  103C 000E               1106      move.b  #14,D0          Move literal 14 for display message trap command
00003882  4E4F                    1107      trap    #15             Display the loaded message
00003884                          1108      
00003884  49F8 5FF9               1109      lea     PLA_POTIONS,A4
00003888  6100 006C               1110      bsr     draw_item_number
0000388C                          1111      
0000388C                          1112      * Display the player keys
0000388C  6100 005A               1113      bsr     next_cursor_pos Move to the next cursor position
00003890                          1114      
00003890  43F9 00005523           1115      lea     key_msg,A1   Load the hud message
00003896  103C 000E               1116      move.b  #14,D0          Move literal 14 for display message trap command
0000389A  4E4F                    1117      trap    #15             Display the loaded message
0000389C                          1118      
0000389C  49F8 5FFA               1119      lea     PLA_KEYS,A4
000038A0  6100 0054               1120      bsr     draw_item_number
000038A4                          1121      
000038A4                          1122      * Display the torch life
000038A4  6100 0042               1123      bsr     next_cursor_pos Move to the next cursor position
000038A8  6100 003E               1124      bsr     next_cursor_pos Move to the next cursor position
000038AC                          1125      
000038AC  43F9 000054F6           1126      lea     torch_msg,A1   Load the hud message
000038B2  103C 000E               1127      move.b  #14,D0          Move literal 14 for display message trap command
000038B6  4E4F                    1128      trap    #15             Display the loaded message
000038B8                          1129      
000038B8  1238 5FFB               1130      move.b  PLA_TORCH,D1    Move the player torch life value to D1 to display
000038BC  103C 0003               1131      move.b  #3,D0           Move literal 3 for display number trap command
000038C0  4E4F                    1132      trap    #15             Display the number in D1
000038C2                          1133      
000038C2                          1134      * Display the player's damage level
000038C2  6100 0024               1135      bsr     next_cursor_pos Move to the next cursor position
000038C6                          1136      
000038C6  43F9 00005503           1137      lea     damage_lvl_msg,A1   Load the damage level message
000038CC  103C 000E               1138      move.b  #14,D0              Move literal 14 for display message trap command
000038D0  4E4F                    1139      trap    #15                 Display the loaded message
000038D2                          1140      
000038D2  1238 5FF1               1141      move.b  PLA_DAMAGE,D1   Move the player's damage level to D1 to display
000038D6  103C 0003               1142      move.b  #3,D0           Move literal 3 for display number trap command
000038DA  4E4F                    1143      trap    #15             Display the number in D1
000038DC                          1144      
000038DC                          1145      * Move the cursor back to its previous position
000038DC  3203                    1146      move.w  D3,D1           Move the previous cursor position back to D1
000038DE  103C 000B               1147      move.b  #11,D0          Move the byte #11 to D0 for trap command 11          
000038E2  4E4F                    1148      trap    #15             Set the cursor position with trap command 11
000038E4                          1149      
000038E4  4241                    1150      clr     D1              Clear D1 for later use
000038E6                          1151      
000038E6  4E75                    1152      rts
000038E8                          1153  
000038E8                          1154  *-------------------Helper Branches---------------------
000038E8                          1155  next_cursor_pos:          * Moves the cursor one row down
000038E8  103C 000B               1156      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
000038EC  5245                    1157      add.w   #1,D5           Move down rows
000038EE  3205                    1158      move.w  D5,D1           Move the current cursor pos to D1 to set it
000038F0  4E4F                    1159      trap    #15             Set the cursor position with trap command 11
000038F2  4241                    1160      clr     D1              Clear D1 of the cursor position
000038F4  4E75                    1161      rts                     Return from the subroutine
000038F6                          1162  
000038F6                          1163  draw_item_number:
000038F6  103C 000E               1164      move.b  #14,D0          Move literal 3 for display number trap command
000038FA  43F9 00005582           1165      lea     bracket_open_msg,A1
00003900  4E4F                    1166      trap    #15
00003902                          1167  
00003902  103C 0003               1168      move.b  #3,D0           Move literal 3 for display number trap command
00003906  1214                    1169      move.b  (A4),D1         Move the value in the register A4 to D1 to display
00003908  4E4F                    1170      trap    #15             Display the number in D1
0000390A                          1171      
0000390A  103C 000E               1172      move.b  #14,D0          Move literal 3 for display number trap command
0000390E  43F9 00005584           1173      lea     bracket_close_msg,A1
00003914  4E4F                    1174      trap    #15
00003916  4E75                    1175      rts
00003918                          1176  
00003918                          1177  *-------------------------------------------------------
00003918                          1178  *---Game Play (Quest Progress)--------------------------
00003918                          1179  *------------------------------------------------------- 
00003918                          1180  gameplay:
00003918  6100 0078               1181      bsr     endl            Break to a new line
0000391C  0C38 0000 5FF3          1182      CMP.B   #0,GAME_STATE   Check which stage the game is in
00003922  6700 F6F8               1183      BEQ     pick_role       Branch to the pick role subroutine
00003926  0C38 0005 5FF3          1184      CMP.B   #5,GAME_STATE   Check which stage the game is in
0000392C  6700 007A               1185      BEQ     movement        Branch to the movement subroutine
00003930  0C38 0006 5FF3          1186      CMP.B   #6,GAME_STATE   Check which stage the game is in
00003936  6700 026E               1187      BEQ     combat          branch to the combat subroutine
0000393A  0C38 0007 5FF3          1188      CMP.B   #7,GAME_STATE   Check which stage the game is in
00003940  6700 0480               1189      BEQ     shop            branch to the shop subroutine
00003944  4E75                    1190      rts                     Return from 'gameplay' subroutine
00003946                          1191  
00003946                          1192  *-------------------------------------------------------
00003946                          1193  *------------------Screen Decoration--------------------
00003946                          1194  *-------------------------------------------------------
00003946                          1195  decorate:
00003946  163C 003C               1196      move.b  #60, D3
0000394A  6100 0046               1197      bsr     endl
0000394E                          1198  out:
0000394E  43F9 00004998           1199      lea     loop_msg,A1
00003954  103C 000E               1200      move.b  #14,D0
00003958  4E4F                    1201      trap    #15
0000395A  5343                    1202      sub     #1,D3   decrement loop counter
0000395C  66F0                    1203      bne     out     repeat until D0=0
0000395E  6100 0032               1204      bsr     endl
00003962  4E75                    1205      rts
00003964                          1206      
00003964                          1207  clear_screen: 
00003964  103C 000B               1208      move.b  #11,D0      clear screen
00003968  323C FF00               1209      move.w  #$ff00,D1
0000396C  4E4F                    1210      trap    #15
0000396E  4E75                    1211      rts
00003970                          1212  *-------------------------------------------------------
00003970                          1213  *------------------------Replay-------------------------
00003970                          1214  *-------------------------------------------------------
00003970                          1215  replay:
00003970  43F9 00004ADC           1216      lea     replay_msg,A1   Load the Replay message
00003976  103C 000E               1217      move.b  #14,D0          Move the number literal 14 to D0 for trap command
0000397A  4E4F                    1218      trap    #15             Display the loaded message
0000397C                          1219      
0000397C  7A02                    1220      move.l  #2,D5           Move the number of input options to D5
0000397E  6100 F79E               1221      bsr     input           Take user input
00003982  1401                    1222      move.b  D1,D2           Move the input to D2 so it's not trampled by the clear screen
00003984                          1223      
00003984  61DE                    1224      bsr     clear_screen    Clear the screen
00003986                          1225      
00003986  B43C 0001               1226      cmp.b   #1,D2           Compare the user input against the two options
0000398A  6700 D674               1227      beq     start           Restart if the user enters 1
0000398E  6100 F676               1228      bsr     end             Quit if the user enters 2
00003992                          1229  
00003992                          1230  endl:
00003992  48E7 8040               1231      movem.l D0/A1,-(A7)
00003996  303C 000E               1232      move    #14,D0
0000399A  43F9 0000473A           1233      lea     crlf,A1
000039A0  4E4F                    1234      trap    #15
000039A2  4CDF 0201               1235      movem.l (A7)+,D0/A1
000039A6  4E75                    1236      rts
000039A8                          1237          
000039A8                          1238  *-------------------------------------------------------
000039A8                          1239  *----------------------Manage Movement------------------
000039A8                          1240  *-------------------------------------------------------
000039A8                          1241  movement:
000039A8  43F9 00004FB0           1242      lea     movement_msg,A1 Load the movement message
000039AE  103C 000E               1243      move.b  #14,D0          Move literal 14 for display message trap command
000039B2  4E4F                    1244      trap    #15             Display the loaded message
000039B4                          1245  
000039B4  7A05                    1246      move.l  #5,D5           Move the number 4 to D5 to tell the program how many options there are
000039B6                          1247      
000039B6  6100 F766               1248      bsr     input           branch to the input subroutine
000039BA  6100 000C               1249      bsr     wall_collisions Branch to check wall collisions and movement
000039BE                          1250      
000039BE  B23C 0005               1251      CMP.B   #5,D1           Check the input against taking a potion
000039C2  6700 05BE               1252      BEQ     take_potion     Branch to take a potion
000039C6                          1253      
000039C6  4E75                    1254      rts
000039C8                          1255  
000039C8                          1256  *-------------------------------------------------------
000039C8                          1257  *-------------------Check Wall Collisions---------------
000039C8                          1258  *-------------------------------------------------------
000039C8                          1259  wall_collisions:
000039C8                          1260      *Check collisions in the movement direction
000039C8  B23C 0001               1261      CMP.B   #1,D1       Check the movement direction
000039CC  6700 001C               1262      BEQ     move_north  Branch to Display the corridor type
000039D0                          1263      
000039D0  B23C 0002               1264      CMP.B   #2,D1       Check the movement direction
000039D4  6700 005E               1265      BEQ     move_south  Branch to Display the corridor type
000039D8                          1266      
000039D8  B23C 0003               1267      CMP.B   #3,D1       Check the movement direction
000039DC  6700 00A0               1268      BEQ     move_west   Branch to Display the corridor type
000039E0                          1269      
000039E0  B23C 0004               1270      CMP.B   #4,D1       Check the movement direction
000039E4  6700 00E0               1271      BEQ     move_east   Branch to Display the corridor type
000039E8                          1272      
000039E8  4E75                    1273      rts
000039EA                          1274      
000039EA                          1275  move_north:
000039EA                          1276      *Check if the tile is any of the corridor types with a wall at the top
000039EA  0C16 0002               1277      CMP.B   #2,(A6)
000039EE  6700 011E               1278      BEQ     movement_blocked
000039F2  0C16 0003               1279      CMP.B   #3,(A6)
000039F6  6700 0116               1280      BEQ     movement_blocked
000039FA  0C16 0006               1281      CMP.B   #6,(A6)
000039FE  6700 010E               1282      BEQ     movement_blocked
00003A02  0C16 0007               1283      CMP.B   #7,(A6)
00003A06  6700 0106               1284      BEQ     movement_blocked
00003A0A  0C16 000B               1285      CMP.B   #11,(A6)
00003A0E  6700 00FE               1286      BEQ     movement_blocked
00003A12  0C16 000C               1287      CMP.B   #12,(A6)
00003A16  6700 00F6               1288      BEQ     movement_blocked
00003A1A  0C16 000D               1289      CMP.B   #13,(A6)
00003A1E  6700 00EE               1290      BEQ     movement_blocked
00003A22                          1291      
00003A22  31CE 5FF6               1292      move.w  A6,PLA_P_POS        Move the player's previous location to a memory address for storage
00003A26  9CFC 0010               1293      sub     #16,A6              Move the player north
00003A2A                          1294      
00003A2A  6100 00F4               1295      bsr     check_blocked       Check if the player is in a door
00003A2E  6100 0584               1296      bsr     decrement_torch     Remove one from the player's torch life
00003A32                          1297  
00003A32  4E75                    1298      rts
00003A34                          1299      
00003A34                          1300  move_south:
00003A34                          1301      *Check if the tile is any of the corridor types with a wall at the bottom
00003A34  0C16 0002               1302      CMP.B   #2,(A6)
00003A38  6700 00D4               1303      BEQ     movement_blocked
00003A3C  0C16 0004               1304      CMP.B   #4,(A6)
00003A40  6700 00CC               1305      BEQ     movement_blocked
00003A44  0C16 0005               1306      CMP.B   #5,(A6)
00003A48  6700 00C4               1307      BEQ     movement_blocked
00003A4C  0C16 0009               1308      CMP.B   #9,(A6)
00003A50  6700 00BC               1309      BEQ     movement_blocked
00003A54  0C16 000B               1310      CMP.B   #11,(A6)
00003A58  6700 00B4               1311      BEQ     movement_blocked
00003A5C  0C16 000D               1312      CMP.B   #13,(A6)
00003A60  6700 00AC               1313      BEQ     movement_blocked
00003A64  0C16 000E               1314      CMP.B   #14,(A6)
00003A68  6700 00A4               1315      BEQ     movement_blocked
00003A6C                          1316      
00003A6C  31CE 5FF6               1317      move.w  A6,PLA_P_POS        Move the player's previous location to a memory address for storage
00003A70  DCFC 0010               1318      add     #16,A6              Move the player south
00003A74                          1319      
00003A74  6100 00AA               1320      bsr     check_blocked       Check if the player is in a door
00003A78  6100 053A               1321      bsr     decrement_torch     Remove one from the player's torch life
00003A7C                          1322      
00003A7C  4E75                    1323      rts
00003A7E                          1324  
00003A7E                          1325  move_west:
00003A7E                          1326      *Check if the tile is any of the corridor types with a wall to the left
00003A7E  0C16 0001               1327      CMP.B   #1,(A6)
00003A82  6700 008A               1328      BEQ     movement_blocked
00003A86  0C16 0003               1329      CMP.B   #3,(A6)
00003A8A  6700 0082               1330      BEQ     movement_blocked
00003A8E  0C16 0004               1331      CMP.B   #4,(A6)
00003A92  6700 007A               1332      BEQ     movement_blocked
00003A96  0C16 0008               1333      CMP.B   #8,(A6)
00003A9A  6700 0072               1334      BEQ     movement_blocked
00003A9E  0C16 000B               1335      CMP.B   #11,(A6)
00003AA2  6700 006A               1336      BEQ     movement_blocked
00003AA6  0C16 000C               1337      CMP.B   #12,(A6)
00003AAA  6700 0062               1338      BEQ     movement_blocked
00003AAE  0C16 000E               1339      CMP.B   #14,(A6)
00003AB2  6700 005A               1340      BEQ     movement_blocked
00003AB6                          1341      
00003AB6  31CE 5FF6               1342      move.w  A6,PLA_P_POS        Move the player's previous location to a memory address for storage
00003ABA  534E                    1343      sub     #1,A6               Move the player west
00003ABC                          1344      
00003ABC  6100 0062               1345      bsr     check_blocked       Check if the player is in a door
00003AC0  6100 04F2               1346      bsr     decrement_torch     Remove one from the player's torch life
00003AC4                          1347      
00003AC4  4E75                    1348      rts
00003AC6                          1349      
00003AC6                          1350  move_east:
00003AC6                          1351      *Check if the tile is any of the corridor types with a wall to the right
00003AC6  0C16 0001               1352      CMP.B   #1,(A6)
00003ACA  6700 0042               1353      BEQ     movement_blocked
00003ACE  0C16 0005               1354      CMP.B   #5,(A6)
00003AD2  6700 003A               1355      BEQ     movement_blocked
00003AD6  0C16 0006               1356      CMP.B   #6,(A6)
00003ADA  6700 0032               1357      BEQ     movement_blocked
00003ADE  0C16 000A               1358      CMP.B   #10,(A6)
00003AE2  6700 002A               1359      BEQ     movement_blocked
00003AE6  0C16 000C               1360      CMP.B   #12,(A6)
00003AEA  6700 0022               1361      BEQ     movement_blocked
00003AEE  0C16 000D               1362      CMP.B   #13,(A6)
00003AF2  6700 001A               1363      BEQ     movement_blocked
00003AF6  0C16 000E               1364      CMP.B   #14,(A6)
00003AFA  6700 0012               1365      BEQ     movement_blocked
00003AFE                          1366      
00003AFE  31CE 5FF6               1367      move.w  A6,PLA_P_POS        Move the player's previous location to a memory address for storage
00003B02  524E                    1368      add     #1,A6               Move the player east
00003B04                          1369      
00003B04  6100 001A               1370      bsr     check_blocked       Check if the player is in a door
00003B08  6100 04AA               1371      bsr     decrement_torch     Remove one from the player's torch life
00003B0C                          1372      
00003B0C  4E75                    1373      rts
00003B0E                          1374  
00003B0E                          1375  movement_blocked:
00003B0E  43F9 00005042           1376      lea     movement_blocked_msg,A1 Load the message
00003B14  103C 000E               1377      move.b  #14,D0                  Move the trap command to display a message
00003B18  4E4F                    1378      trap    #15                     Display the movement blocked message
00003B1A  6100 0432               1379      bsr     press_continue          Pause the game until a key is pressed
00003B1E                          1380      
00003B1E  4E75                    1381      rts                             Return from the subroutine
00003B20                          1382      
00003B20                          1383  check_blocked:
00003B20  4BF8 6FE0               1384      lea     FIRST_DOOR,A5   Load the memory address of the first door
00003B24  1E3C 0000               1385      move.b  #0,D7           Move the starting door number to D5
00003B28  6100 0004               1386      bsr     loop_thru_doors Loop through all doors
00003B2C  4E75                    1387      rts                     Return from subroutine
00003B2E                          1388      
00003B2E                          1389  loop_thru_doors:
00003B2E  BE3C 0003               1390      CMP.B   #DOOR_MAX,D7    Compare the door number with the maximum door number
00003B32  6C00 044C               1391      BGE     return          Return from the loop if the current door number is greater than or equal to the max
00003B36                          1392  
00003B36  6100 0008               1393      bsr     check_for_a_door  Check for a door
00003B3A                          1394      
00003B3A  5207                    1395      add.b   #1,D7           Add to the current door number
00003B3C  544D                    1396      add.w   #2,A5           Add to the current door pointer to move to the next door
00003B3E  60EE                    1397      bra     loop_thru_doors Keep looping the doors
00003B40                          1398  
00003B40                          1399  check_for_a_door:
00003B40  3615                    1400      move.w  (A5),D3         Move the door coordinates into data register D3 for large-value comparisons
00003B42  BDC3                    1401      CMP.L   D3,A6           Check if the door is in the current position
00003B44  6700 0004               1402      BEQ     in_a_door       Collide with the door if it is
00003B48  4E75                    1403      rts                     Return if the door is not in the current position
00003B4A                          1404      
00003B4A                          1405  in_a_door:
00003B4A  0C38 0000 5FFA          1406      CMP.B   #0,PLA_KEYS     Check if the player has keys left
00003B50  6F00 003C               1407      BLE     blocked_door    If the player has no keys they're blocked
00003B54                          1408      
00003B54  43F9 00005837           1409      lea     locked_door_msg,A1  Load the locked door message
00003B5A  103C 000E               1410      move.b  #14,D0          Move the number literal for trap command
00003B5E  4E4F                    1411      trap    #15             Display the loaded message
00003B60                          1412      
00003B60  1A3C 0002               1413      move.b  #2,D5           Move the number of input options
00003B64  6100 F5B8               1414      bsr     input           Take user input
00003B68                          1415      
00003B68  B23C 0001               1416      CMP.B   #1,D1           Compare the user input with num 1
00003B6C  6700 0006               1417      BEQ     unlock_door     Unlock the door if the user chooses to
00003B70  6600 001C               1418      BNE     blocked_door    Branch to blocked door if the player doesn't unlock the door
00003B74                          1419      
00003B74                          1420  unlock_door:
00003B74  43F9 000058AD           1421      lea     unlocked_door_msg,A1  Load the unlocked door message
00003B7A  103C 000E               1422      move.b  #14,D0          Move the number literal for trap command
00003B7E  4E4F                    1423      trap    #15             Display the loaded message
00003B80                          1424      
00003B80  3ABC 1000               1425      move.w  #OPEN_DOOR_POS,(A5) Move the door position out of the game for an open door
00003B84  5338 5FFA               1426      sub.b   #1,PLA_KEYS     Remove a key from the player
00003B88  6100 03C4               1427      bsr     press_continue  Wait for player input
00003B8C                          1428      
00003B8C  4E75                    1429      rts                     Return from subroutine
00003B8E                          1430  
00003B8E                          1431  blocked_door:
00003B8E  43F9 000058EA           1432      lea     blocked_door_msg,A1  Load the blocked door message
00003B94  103C 000E               1433      move.b  #14,D0          Move the number literal for trap command
00003B98  4E4F                    1434      trap    #15             Display the loaded message
00003B9A                          1435      
00003B9A  3638 5FF6               1436      move.w  PLA_P_POS,D3    Move the previous player position to D3
00003B9E  2C43                    1437      move.l  D3,A6           Move the player to their previous position
00003BA0                          1438      
00003BA0  6100 03AC               1439      bsr     press_continue  Wait for player input
00003BA4                          1440      
00003BA4  4E75                    1441      rts                     Return from subroutine
00003BA6                          1442      
00003BA6                          1443  *-------------------------------------------------------
00003BA6                          1444  *---------------------Manage Combat---------------------
00003BA6                          1445  *-------------------------------------------------------
00003BA6                          1446  combat:
00003BA6  6100 FDEA               1447      bsr endl                Break to a new line
00003BAA                          1448  
00003BAA  43F9 00005123           1449      lea     combat_msg,A1   Load the combat message
00003BB0  103C 000E               1450      move.b  #14,D0          Move literal 14 for display message trap command
00003BB4  4E4F                    1451      trap    #15             Display the loaded message
00003BB6                          1452  
00003BB6  7A05                    1453      move.l  #5,D5           Move the number 4 to D5 to tell the program how many options there are
00003BB8  6100 F564               1454      bsr     input           branch to the input subroutine
00003BBC  1801                    1455      move.b  D1,D4           Move the input to D4 for later use
00003BBE                          1456      
00003BBE  B23C 0001               1457      CMP.B   #1,D1           Compare input with number literal 1
00003BC2  6700 0024               1458      BEQ     block_counter   Branch to block/counter subroutine
00003BC6  B23C 0002               1459      CMP.B   #2,D1           Compare input with number literal 2
00003BCA  6700 0036               1460      BEQ     cast_magic      Branch to cast magic subroutine
00003BCE  B23C 0003               1461      CMP.B   #3,D1           Compare input with number literal 3
00003BD2  6700 0048               1462      BEQ     melee_attack    Branch to melee subroutine
00003BD6  B23C 0004               1463      CMP.B   #4,D1           Compare input with number literal 4
00003BDA  6700 005A               1464      BEQ     try_run         Branch to try run subroutine
00003BDE  B23C 0005               1465      CMP.B   #5,D1           Compare input with number literal 5
00003BE2  6700 039E               1466      BEQ     take_potion     Branch to take potion subroutine
00003BE6                          1467      
00003BE6  4E75                    1468      rts
00003BE8                          1469      
00003BE8                          1470  block_counter:
00003BE8  6100 037C               1471      bsr     random_number       Get a random number 1-100
00003BEC                          1472      
00003BEC  B47C 0021               1473      CMP.W   #33,D2              Compare random with #33
00003BF0  6F00 008E               1474      BLE     both_block          Enemy tries to block - attack failed
00003BF4  B47C 0042               1475      CMP.W   #66,D2              Compare random with #66
00003BF8  6F00 0118               1476      BLE     hit_by_magic        Enemy casts magic - player takes damage      
00003BFC  6E00 00E4               1477      BGT     hit_against_melee   Enemy tried to lunge - enemy takes damage
00003C00                          1478      
00003C00  4E75                    1479      rts                         Return from subroutine
00003C02                          1480      
00003C02                          1481  cast_magic:
00003C02  6100 0362               1482      bsr     random_number       Get a random number 1-100
00003C06                          1483  
00003C06  B47C 0021               1484      CMP.W   #33,D2              Compare random with #33
00003C0A  6F00 00AA               1485      BLE     hit_against_block    Enemy blocks - enemy takes damage
00003C0E  B47C 0042               1486      CMP.W   #66,D2              Compare random with #66
00003C12  6F00 007E               1487      BLE     both_cast_magic     Enemy casts magic - attack fails     
00003C16  6E00 0114               1488      BGT     hit_by_melee        Enemy lunges forward - player takes damage
00003C1A                          1489      
00003C1A  4E75                    1490      rts                         Return from subroutine
00003C1C                          1491  
00003C1C                          1492  melee_attack:
00003C1C  6100 0348               1493      bsr     random_number       Get a random number 1-100
00003C20                          1494  
00003C20  B47C 0021               1495      CMP.W   #33,D2              Compare random with #33
00003C24  6F00 00D2               1496      BLE     hit_by_counter      Enemy blocks and counters - player takes damage
00003C28  B47C 0042               1497      CMP.W   #66,D2              Compare random with #66
00003C2C  6F00 009E               1498      BLE     hit_against_magic   Enemy casts magic - player takes damage     
00003C30  6E00 0072               1499      BGT     both_melee          Enemy lunges forward - attack fails
00003C34                          1500      
00003C34  4E75                    1501      rts                         Return from subroutine
00003C36                          1502  
00003C36                          1503  try_run:
00003C36  6100 032E               1504      bsr     random_number       Get a random number
00003C3A                          1505      
00003C3A  B47C 0028               1506      CMP.W   #40,D2              Compare the random number to 40
00003C3E  6D00 0006               1507      BLT     escape_attack       If the random number is less than 40 the player escapes
00003C42  6C00 0020               1508      BGE     fail_escape         If the random number is more than 40 the player gets damaged
00003C46                          1509      
00003C46                          1510  escape_attack:
00003C46  3638 5FF6               1511      move.w  PLA_P_POS,D3    Move the player's previous position to D3 to avoid treating it as a negative number
00003C4A  2C43                    1512      move.l  D3,A6           Move the player to their position before entering the battle
00003C4C  11FC 0005 5FF3          1513      move.b  #5,GAME_STATE   Switch game state
00003C52                          1514      
00003C52  43F9 00005185           1515      lea     escape_msg,A1   Load escape message
00003C58  103C 000E               1516      move.b  #14,D0          Move literal for trap command
00003C5C  4E4F                    1517      trap    #15             Trap 15 to display messgae
00003C5E                          1518      
00003C5E  6100 02EE               1519      bsr     press_continue  Pause until the player presses to continue
00003C62                          1520      
00003C62  4E75                    1521      rts                     Return from subroutine
00003C64                          1522      
00003C64                          1523  fail_escape:
00003C64  43F9 000051A0           1524      lea     fail_escape_msg,A1  Load fail escape message
00003C6A  103C 000E               1525      move.b  #14,D0              Move literal for trap command
00003C6E  4E4F                    1526      trap    #15                 Trap 15 to display message
00003C70                          1527      
00003C70  524D                    1528      add.w   #DAMAGE,A5           Move the enemy pointer to its damage value
00003C72  1A15                    1529      move.b  (A5),D5             Store the damage value in D5
00003C74  534D                    1530      sub.w   #DAMAGE,A5           Move the enemy pointer back to the enemy health/root
00003C76  9B38 5FF0               1531      sub.b   D5,PLAYER           Remove the enemy's damage from the player's health
00003C7A                          1532      
00003C7A  6100 02D2               1533      bsr     press_continue      Pause until the player presses to continue
00003C7E  4E75                    1534      rts
00003C80                          1535      
00003C80                          1536  both_block:
00003C80  103C 000E               1537      move.b  #14,D0
00003C84  43F9 000051DB           1538      lea     both_block_msg,A1
00003C8A  4E4F                    1539      trap    #15
00003C8C                          1540      
00003C8C  6100 02C0               1541      bsr     press_continue
00003C90  4E75                    1542      rts
00003C92                          1543      
00003C92                          1544  both_cast_magic:
00003C92  103C 000E               1545      move.b  #14,D0
00003C96  43F9 00005200           1546      lea     both_cast_magic_msg,A1
00003C9C  4E4F                    1547      trap    #15
00003C9E                          1548      
00003C9E  6100 02AE               1549      bsr     press_continue
00003CA2  4E75                    1550      rts
00003CA4                          1551  
00003CA4                          1552  both_melee:
00003CA4  103C 000E               1553      move.b  #14,D0
00003CA8  43F9 00005255           1554      lea     both_melee_msg,A1
00003CAE  4E4F                    1555      trap    #15  
00003CB0                          1556      
00003CB0  6100 029C               1557      bsr     press_continue
00003CB4  4E75                    1558      rts
00003CB6                          1559  
00003CB6                          1560  hit_against_block:
00003CB6  103C 000E               1561      move.b  #14,D0
00003CBA  43F9 0000529E           1562      lea     hit_against_block_msg,A1
00003CC0  4E4F                    1563      trap    #15  
00003CC2                          1564      
00003CC2  6100 0082               1565      bsr     damage_enemy    Deal damage to the enemy
00003CC6                          1566      
00003CC6  6100 0286               1567      bsr     press_continue
00003CCA  4E75                    1568      rts
00003CCC                          1569  
00003CCC                          1570  hit_against_magic:
00003CCC  103C 000E               1571      move.b  #14,D0
00003CD0  43F9 000052E6           1572      lea     hit_against_magic_msg,A1
00003CD6  4E4F                    1573      trap    #15
00003CD8                          1574      
00003CD8  6100 006C               1575      bsr     damage_enemy    Deal damage to the enemy
00003CDC                          1576      
00003CDC  6100 0270               1577      bsr     press_continue
00003CE0  4E75                    1578      rts
00003CE2                          1579  
00003CE2                          1580  hit_against_melee:
00003CE2  103C 000E               1581      move.b  #14,D0
00003CE6  43F9 0000534A           1582      lea     hit_against_melee_msg,A1
00003CEC  4E4F                    1583      trap    #15
00003CEE                          1584      
00003CEE  6100 0056               1585      bsr     damage_enemy    Deal damage to the enemy
00003CF2                          1586      
00003CF2  6100 025A               1587      bsr     press_continue
00003CF6  4E75                    1588      rts
00003CF8                          1589  
00003CF8                          1590  hit_by_counter:
00003CF8  103C 000E               1591      move.b  #14,D0
00003CFC  43F9 000053A0           1592      lea     hit_by_counter_msg,A1
00003D02  4E4F                    1593      trap    #15  
00003D04                          1594      
00003D04  143C 0001               1595      move.b  #1,D2               Move the enemy attack type to D2
00003D08  6100 0076               1596      bsr     damage_player       Deal damage to the player
00003D0C                          1597      
00003D0C  6100 0240               1598      bsr     press_continue
00003D10  4E75                    1599      rts
00003D12                          1600  
00003D12                          1601  hit_by_magic:
00003D12  103C 000E               1602      move.b  #14,D0
00003D16  43F9 00005403           1603      lea     hit_by_magic_msg,A1
00003D1C  4E4F                    1604      trap    #15  
00003D1E                          1605      
00003D1E  143C 0002               1606      move.b  #2,D2               Move the enemy attack type to D2
00003D22  6100 005C               1607      bsr     damage_player       Deal damage to the player
00003D26                          1608      
00003D26  6100 0226               1609      bsr     press_continue
00003D2A  4E75                    1610      rts
00003D2C                          1611  
00003D2C                          1612  hit_by_melee:
00003D2C  103C 000E               1613      move.b  #14,D0
00003D30  43F9 00005473           1614      lea     hit_by_melee_msg,A1
00003D36  4E4F                    1615      trap    #15
00003D38                          1616      
00003D38  143C 0003               1617      move.b  #3,D2               Move the enemy attack type to D2
00003D3C  6100 0042               1618      bsr     damage_player       Deal damage to the player
00003D40                          1619      
00003D40  6100 020C               1620      bsr     press_continue
00003D44  4E75                    1621      rts
00003D46                          1622      
00003D46                          1623  damage_enemy:
00003D46  1A38 5FF1               1624      move.b  PLA_DAMAGE,D5       Store the player damage value in D5
00003D4A  B838 5FF2               1625      CMP.B   PLA_CLASS,D4        Check if the player attack type matches the player class
00003D4E  6700 0006               1626      BEQ     double_damage_enemy Deal double damage to the enemy if attack type matches the class
00003D52  9B15                    1627      sub.b   D5,(A5)             Remove the player's damage from the enemy's health
00003D54  4E75                    1628      rts                         Return from subroutine
00003D56                          1629      
00003D56                          1630  double_damage_enemy:
00003D56  E34D                    1631      LSL     #1,D5               Double the player damage
00003D58  9B15                    1632      sub.b   D5,(A5)             Remove double the player's damage from the enemy's health
00003D5A                          1633      
00003D5A  6100 FC36               1634      bsr     endl                Break to new line
00003D5E  223C 00F000F0           1635      move.l  #PURPLE,D1          Load colour purple
00003D64  6100 025C               1636      bsr     change_font_colour  Change the font colour
00003D68                          1637      
00003D68  43F9 00005818           1638      lea     double_damage_msg,A1    Load the double damage message
00003D6E  103C 000E               1639      move.b  #14,D0              Move number literal 14 to D0 for trap command
00003D72  4E4F                    1640      trap    #15
00003D74                          1641      
00003D74  223C 00FFFFFF           1642      move.l  #WHITE,D1           Load colour white
00003D7A  6100 0246               1643      bsr     change_font_colour  Change the font colour
00003D7E                          1644      
00003D7E  4E75                    1645      rts                         Return from subroutine
00003D80                          1646  
00003D80                          1647  damage_player:
00003D80  524D                    1648      add.w   #DAMAGE,A5          Move the enemy pointer to its damage value
00003D82  1A15                    1649      move.b  (A5),D5             Store the damage value in D5
00003D84                          1650      
00003D84  534D                    1651      sub.w   #DAMAGE,A5          Move the enemy pointer back to the enemy health/root
00003D86  544D                    1652      add.w   #CLASS,A5           Move the enemy pointer to its class value
00003D88                          1653      
00003D88  B415                    1654      CMP.B   (A5),D2             Compare the enemy attack type to its class
00003D8A  554D                    1655      sub.w   #CLASS,A5           Move the enemy pointer back to the enemy health/root
00003D8C  6700 0008               1656      BEQ     double_damage_player    Deal double damage to the player
00003D90                          1657      
00003D90  9B38 5FF0               1658      sub.b   D5,PLAYER           Remove the enemy's damage from the player's health
00003D94                          1659  
00003D94  4E75                    1660      rts                         Return from subroutine
00003D96                          1661      
00003D96                          1662  double_damage_player:
00003D96  E34D                    1663      LSL     #1,D5               Double the enemy damage
00003D98  9B38 5FF0               1664      sub.b   D5,PLAYER           Remove double the enemy's damage from the player's health
00003D9C                          1665      
00003D9C  6100 FBF4               1666      bsr     endl                Break to new line
00003DA0  223C 000000FF           1667      move.l  #RED,D1          Load colour purple
00003DA6  6100 021A               1668      bsr     change_font_colour  Change the font colour
00003DAA                          1669      
00003DAA  43F9 00005818           1670      lea     double_damage_msg,A1    Load the double damage message
00003DB0  103C 000E               1671      move.b  #14,D0              Move number literal 14 to D0 for trap command
00003DB4  4E4F                    1672      trap    #15
00003DB6                          1673      
00003DB6  223C 00FFFFFF           1674      move.l  #WHITE,D1           Load colour white
00003DBC  6100 0204               1675      bsr     change_font_colour  Change the font colour
00003DC0                          1676      
00003DC0  4E75                    1677      rts                         Return from subroutine
00003DC2                          1678  
00003DC2                          1679  *-------------------------------------------------------
00003DC2                          1680  *----------------------Shop State-----------------------
00003DC2                          1681  *-------------------------------------------------------
00003DC2                          1682  shop:
00003DC2  43F9 000056BE           1683      lea     shop_msg,A1     Load the shop message
00003DC8  103C 000E               1684      move.b  #14,D0          Move the number literal 14 to D0 for trap command
00003DCC  4E4F                    1685      trap    #15             Display the loaded message
00003DCE                          1686  
00003DCE  7A05                    1687      move.l  #5,D5           Move the number 4 to D5 to tell the program how many options there are
00003DD0  6100 F34C               1688      bsr     input           branch to the input subroutine
00003DD4                          1689      
00003DD4  B23C 0001               1690      CMP.B   #1,D1           Compare input with number literal 1
00003DD8  6700 0024               1691      BEQ     buy_potion      Branch to buy potion subroutine
00003DDC  B23C 0002               1692      CMP.B   #2,D1           Compare input with number literal 2
00003DE0  6700 004E               1693      BEQ     buy_key         Branch to buy key subroutine
00003DE4  B23C 0003               1694      CMP.B   #3,D1           Compare input with number literal 3
00003DE8  6700 007A               1695      BEQ     buy_torch       Branch to buy torch subroutine
00003DEC  B23C 0004               1696      CMP.B   #4,D1           Compare input with number literal 4
00003DF0  6700 00A8               1697      BEQ     upgrade_dmg     Branch to buy damage upgrade subroutine
00003DF4  B23C 0005               1698      CMP.B   #5,D1           Compare input with number literal 5
00003DF8  6700 00D4               1699      BEQ     leave_shop      Branch to leave shop subroutine
00003DFC                          1700  
00003DFC  4E75                    1701      rts                     Return from subroutine
00003DFE                          1702      
00003DFE                          1703  buy_potion:
00003DFE  0C38 0005 5FF8          1704      CMP.B   #POTION_PRICE,PLA_GOLD  Check if the player has money for a potion
00003E04  6D00 00E6               1705      BLT     no_money                If not enough money branch to no money subroutine
00003E08                          1706      
00003E08  544D                    1707      add.w   #S_POTIONS,A5           Move the shop pointer to the potions
00003E0A  0C15 0000               1708      CMP.B   #0,(A5)                 Check that the shop still has potions left
00003E0E  6F00 00EE               1709      BLE     no_shop_potions         If no potions left branch to no shop potions subroutine
00003E12                          1710      
00003E12  5B38 5FF8               1711      sub.b   #POTION_PRICE,PLA_GOLD  Remove the potion price from the player's gold
00003E16  5315                    1712      sub.b   #1,(A5)                 Remove one potion from the shop
00003E18  5238 5FF9               1713      add.b   #1,PLA_POTIONS          Add one potion to the player's inventory
00003E1C                          1714      
00003E1C  554D                    1715      sub.w   #S_POTIONS,A5           Move the shop pointer back to root
00003E1E                          1716      
00003E1E  43F9 00005750           1717      lea     buy_item_msg,A1         Load the buy item message into A1
00003E24  103C 000E               1718      move.b  #14,D0                  Move the number literal 14 to D0 for trap command
00003E28  4E4F                    1719      trap    #15                     Display the loaded message
00003E2A                          1720      
00003E2A  6100 0122               1721      bsr     press_continue          Pause for user input
00003E2E                          1722      
00003E2E  4E75                    1723      rts                             Return from subroutine
00003E30                          1724      
00003E30                          1725  buy_key:
00003E30  0C38 000F 5FF8          1726      CMP.B   #KEY_PRICE,PLA_GOLD     Check if the player has money for a key
00003E36  6D00 00B4               1727      BLT     no_money                If not enough money branch to no money subroutine
00003E3A                          1728      
00003E3A  564D                    1729      add.w   #S_KEYS,A5              Move the shop pointer to the keys
00003E3C  0C15 0000               1730      CMP.B   #0,(A5)                 Check that the shop still has keys left
00003E40  6F00 00D0               1731      BLE     no_shop_keys            If no keys left branch to no shop keys subroutine
00003E44                          1732      
00003E44  0438 000F 5FF8          1733      sub.b   #KEY_PRICE,PLA_GOLD     Remove the key price from the player's gold
00003E4A  5315                    1734      sub.b   #1,(A5)                 Remove one key from the shop
00003E4C  5238 5FFA               1735      add.b   #1,PLA_KEYS             Add one key to the player's inventory
00003E50                          1736      
00003E50  574D                    1737      sub.w   #S_KEYS,A5              Move the shop pointer back to root
00003E52                          1738  
00003E52  43F9 00005750           1739      lea     buy_item_msg,A1         Load the buy item message into A1
00003E58  103C 000E               1740      move.b  #14,D0                  Move the number literal 14 to D0 for trap command
00003E5C  4E4F                    1741      trap    #15                     Display the loaded message
00003E5E                          1742      
00003E5E  6100 00EE               1743      bsr     press_continue          Pause for user input
00003E62                          1744      
00003E62  4E75                    1745      rts                             Return from subroutine
00003E64                          1746      
00003E64                          1747  buy_torch:
00003E64  0C38 000A 5FF8          1748      CMP.B   #TORCH_PRICE,PLA_GOLD   Check if the player has money for a torch
00003E6A  6D00 0080               1749      BLT     no_money                If not enough money branch to no money subroutine
00003E6E                          1750      
00003E6E  584D                    1751      add.w   #S_TORCHES,A5           Move the shop pointer to the torches
00003E70  0C15 0000               1752      CMP.B   #0,(A5)                 Check that the shop still has torches left
00003E74  6F00 00B0               1753      BLE     no_shop_torches         If no torches left branch to no shop torches subroutine
00003E78                          1754      
00003E78  0438 000A 5FF8          1755      sub.b   #TORCH_PRICE,PLA_GOLD   Remove the torch price from the player's gold
00003E7E  5315                    1756      sub.b   #1,(A5)                 Remove one torch from the shop
00003E80  0638 000F 5FFB          1757      add.b   #LIFE_PER_TORCH,PLA_TORCH           Add ten to the player's torches life
00003E86                          1758      
00003E86  594D                    1759      sub.w   #S_TORCHES,A5           Move the shop pointer back to root
00003E88                          1760  
00003E88  43F9 00005750           1761      lea     buy_item_msg,A1         Load the buy item message into A1
00003E8E  103C 000E               1762      move.b  #14,D0                  Move the number literal 14 to D0 for trap command
00003E92  4E4F                    1763      trap    #15                     Display the loaded message
00003E94                          1764      
00003E94  6100 00B8               1765      bsr     press_continue          Pause for user input
00003E98                          1766      
00003E98  4E75                    1767      rts                             Return from subroutine
00003E9A                          1768      
00003E9A                          1769  upgrade_dmg:
00003E9A  0C38 0014 5FF8          1770      CMP.B   #DAMAGE_UP_PRICE,PLA_GOLD   Check if the player has money for a damage upgrade
00003EA0  6D00 004A               1771      BLT     no_money                    If not enough money branch to no money subroutine
00003EA4                          1772      
00003EA4  5A4D                    1773      add.w   #S_DAMAGE_IN,A5         Move the shop pointer to the damage upgrades
00003EA6  0C15 0000               1774      CMP.B   #0,(A5)                 Check that the shop still has damage upgrades left
00003EAA  6F00 008E               1775      BLE     no_shop_damage_up       If no damage upgrades left branch to no shop torches subroutine
00003EAE                          1776      
00003EAE  0438 0014 5FF8          1777      sub.b   #DAMAGE_UP_PRICE,PLA_GOLD   Remove the damage upgrade price from the player's gold
00003EB4  5315                    1778      sub.b   #1,(A5)                     Remove one damage upgrade from the shop
00003EB6  5238 5FF1               1779      add.b   #1,PLA_DAMAGE               Add one to the player's damage value
00003EBA                          1780      
00003EBA  5B4D                    1781      sub.w   #S_DAMAGE_IN,A5         Move the shop pointer back to root
00003EBC                          1782  
00003EBC  43F9 00005750           1783      lea     buy_item_msg,A1         Load the buy item message into A1
00003EC2  103C 000E               1784      move.b  #14,D0                  Move the number literal 14 to D0 for trap command
00003EC6  4E4F                    1785      trap    #15                     Display the loaded message
00003EC8                          1786      
00003EC8  6100 0084               1787      bsr     press_continue          Pause for user input
00003ECC                          1788      
00003ECC  4E75                    1789      rts                             Return from subroutine
00003ECE                          1790      
00003ECE                          1791  leave_shop:
00003ECE  3638 5FF6               1792      move.w  PLA_P_POS,D3        Move the player's previous position to D3 to avoid treating it as a negative number
00003ED2  2C43                    1793      move.l  D3,A6               Move the player to their position before entering the shop
00003ED4  11FC 0005 5FF3          1794      move.b  #5,GAME_STATE       Switch game state to movement
00003EDA                          1795      
00003EDA  43F9 0000572A           1796      lea     leave_shop_msg,A1   Load escape message
00003EE0  103C 000E               1797      move.b  #14,D0              Move literal for trap command
00003EE4  4E4F                    1798      trap    #15                 Trap 15 to display messgae
00003EE6                          1799      
00003EE6  6100 0066               1800      bsr     press_continue      Pause until the player presses to continue
00003EEA  4E75                    1801      rts                         Return from subroutine
00003EEC                          1802      
00003EEC                          1803  no_money:
00003EEC  43F9 00005772           1804      lea     no_money_msg,A1 Load the no money message
00003EF2  103C 000E               1805      move.b  #14,D0          Move the number literal 14 to D0 for trap command
00003EF6  4E4F                    1806      trap    #15             Display the loaded message
00003EF8                          1807      
00003EF8  6100 0054               1808      bsr     press_continue  Wait for player input
00003EFC  4E75                    1809      rts                     Return from subroutine
00003EFE                          1810      
00003EFE                          1811  no_shop_potions:
00003EFE  43F9 00005792           1812      lea     no_item_msg,A1  Load the no money message
00003F04  103C 000E               1813      move.b  #14,D0          Move the number literal 14 to D0 for trap command
00003F08  4E4F                    1814      trap    #15             Display the loaded message
00003F0A  554D                    1815      sub.w   #S_POTIONS,A5   Move the shop pointer back to root
00003F0C                          1816      
00003F0C  6100 0040               1817      bsr     press_continue  Wait for player input
00003F10  4E75                    1818      rts                     Return from subroutine
00003F12                          1819      
00003F12                          1820  no_shop_keys:
00003F12  43F9 00005792           1821      lea     no_item_msg,A1  Load the no money message
00003F18  103C 000E               1822      move.b  #14,D0          Move the number literal 14 to D0 for trap command
00003F1C  4E4F                    1823      trap    #15             Display the loaded message
00003F1E  574D                    1824      sub.w   #S_KEYS,A5      Move the shop pointer back to root
00003F20                          1825      
00003F20  6100 002C               1826      bsr     press_continue  Wait for player input
00003F24  4E75                    1827      rts                     Return from subroutine
00003F26                          1828      
00003F26                          1829  no_shop_torches:
00003F26  43F9 00005792           1830      lea     no_item_msg,A1  Load the no money message
00003F2C  103C 000E               1831      move.b  #14,D0          Move the number literal 14 to D0 for trap command
00003F30  4E4F                    1832      trap    #15             Display the loaded message
00003F32  594D                    1833      sub.w   #S_TORCHES,A5   Move the shop pointer back to root
00003F34                          1834      
00003F34  6100 0018               1835      bsr     press_continue  Wait for player input
00003F38  4E75                    1836      rts                     Return from subroutine
00003F3A                          1837  
00003F3A                          1838  no_shop_damage_up:
00003F3A  43F9 00005792           1839      lea     no_item_msg,A1  Load the no money message
00003F40  103C 000E               1840      move.b  #14,D0          Move the number literal 14 to D0 for trap command
00003F44  4E4F                    1841      trap    #15             Display the loaded message
00003F46  5B4D                    1842      sub.w   #S_DAMAGE_IN,A5 Move the shop pointer back to root
00003F48                          1843      
00003F48  6100 0004               1844      bsr     press_continue  Wait for player input
00003F4C  4E75                    1845      rts                     Return from subroutine
00003F4E                          1846  
00003F4E                          1847  *-------------------------------------------------------
00003F4E                          1848  *-------------------Misc Subroutines--------------------
00003F4E                          1849  *-------------------------------------------------------
00003F4E                          1850  press_continue:
00003F4E  6100 FA42               1851      bsr     endl
00003F52                          1852  
00003F52  43F9 0000505D           1853      lea     continue_msg,A1 Load message into A1
00003F58  103C 000E               1854      move.b  #14,D0          Move the trap command to display a message
00003F5C  4E4F                    1855      trap    #15             display the "press any ket to continue" text
00003F5E                          1856      
00003F5E  103C 0004               1857      move.b  #4,D0           Move the trap command to take input
00003F62  4E4F                    1858      trap    #15             take input to freeze the game
00003F64  4E75                    1859      rts                     Return from the 'press continue' subroutine
00003F66                          1860      
00003F66                          1861  random_number:              *Psuedo random number generator, courtesy of Pdraig
00003F66  103C 0008               1862      move.b  #8,D0
00003F6A  4E4F                    1863      trap    #15
00003F6C  C2BC 005FFFFF           1864      and.l   #$5FFFFF,d1     prevent overflow in divu
00003F72  82FC 0064               1865      divu    #100,D1         time count / 100
00003F76  4841                    1866      swap    D1              swap upper and lower words of D1 to put remainder in low word
00003F78  5241                    1867      addq.w  #1,D1           d1.w contains number from 1 to 100
00003F7A  3401                    1868      move    D1,D2           d2 = d1
00003F7C  4281                    1869      clr.l   D1
00003F7E                          1870      
00003F7E  4E75                    1871      rts                     Returns from random generation subroutine
00003F80                          1872      
00003F80                          1873  return:   *Subroutine to branch to to break out of a subroutine when a condition is met
00003F80  4E75                    1874      rts
00003F82                          1875      
00003F82                          1876  take_potion:
00003F82  0C38 0000 5FF9          1877      CMP.B   #0,PLA_POTIONS      Check if the player has potions to drink
00003F88  6F00 001A               1878      BLE     no_potions          If the potions are zero or below branch to no_potions
00003F8C                          1879      
00003F8C  5638 5FF0               1880      add.b   #3,PLAYER           Add 3 to the player's health
00003F90  5338 5FF9               1881      sub.b   #1,PLA_POTIONS      Remove one potion
00003F94                          1882      
00003F94  43F9 00005638           1883      lea     take_potion_msg,A1  Load the take potion message
00003F9A  103C 000E               1884      move.b  #14,D0              Move the number literal 14 to D0 for trap command
00003F9E  4E4F                    1885      trap    #15                 Display the loaded message
00003FA0                          1886      
00003FA0  61AC                    1887      bsr     press_continue      Wait for player input
00003FA2                          1888      
00003FA2  4E75                    1889      rts                         Return from subroutine
00003FA4                          1890  
00003FA4                          1891  no_potions:
00003FA4  43F9 00005672           1892      lea     no_potions_msg,A1   Load the no potions message
00003FAA  103C 000E               1893      move.b  #14,D0              Move the number literal 14 to D0 for trap command
00003FAE  4E4F                    1894      trap    #15                 Display the loaded message
00003FB0                          1895      
00003FB0  619C                    1896      bsr     press_continue      Wait for player input
00003FB2                          1897      
00003FB2  4E75                    1898      rts                         Return from subroutine
00003FB4                          1899      
00003FB4                          1900  decrement_torch:
00003FB4  0C38 0000 5FFB          1901      CMP.B   #0,PLA_TORCH    Compare the torch life to 0
00003FBA  6FC4                    1902      BLE     return          If it's less than or equalt to zero, return
00003FBC  5338 5FFB               1903      sub.b   #1,PLA_TORCH    Decrement by one if it's above zero
00003FC0  4E75                    1904      rts                     Return from subroutine
00003FC2                          1905      
00003FC2                          1906  change_font_colour:        * Changes the font colour to the colour loaded in D1
00003FC2  103C 0015               1907      move.b  #21,D0      Move #21 to D0 for trap command 21
00003FC6  243C 01090000           1908      move.l  #FONT,D2    Move the font to D2
00003FCC  4E4F                    1909      trap    #15         Set the colour
00003FCE  4281                    1910      clr.l   D1          Clear D1 for later use
00003FD0  4282                    1911      clr.l   D2          Clear D2 for later use
00003FD2  4E75                    1912      rts                 Return from subroutine
00003FD4                          1913      
00003FD4                          1914  get_cursor_pos:
00003FD4  323C 00FF               1915      move.w  #255,D1         Move the word #255 to D1 to set the type of trap 11
00003FD8  103C 000B               1916      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
00003FDC  4E4F                    1917      trap    #15             Trap to get the cursor position in D1
00003FDE                          1918      
00003FDE  2601                    1919      move.l  D1,D3           Move the value in D1 to D3 for storage
00003FE0  4E75                    1920      rts
00003FE2                          1921      
00003FE2                          1922  *-------------------------------------------------------
00003FE2                          1923  *----------------------Draw loop------------------------
00003FE2                          1924  *-------------------------------------------------------
00003FE2                          1925  draw_loop:
00003FE2  45F9 00008080           1926      lea     MAP_START_POINT,A2     Load starting memory location into A7
00003FE8  1C3C 0000               1927      move.b  #0,D6           Data register used for rows
00003FEC  1E3C 0000               1928      move.b  #0,D7           Data register used for columns
00003FF0  7200                    1929      move.l  #0,D1           Clear the D1 data register
00003FF2                          1930      
00003FF2  6100 0004               1931      bsr     loop_rows       Loop for every row
00003FF6  4E75                    1932      rts
00003FF8                          1933      
00003FF8                          1934  loop_rows:
00003FF8  BC7C 000F               1935      CMP     #MAP_LENGTH,D6          Check the rows don't go out of bounds
00003FFC  6E82                    1936      BGT     return          If the rows are greater than 22 end the loop
00003FFE                          1937      
00003FFE  1E3C 0000               1938      move.b  #0,D7           Reset to column 0
00004002  6100 000A               1939      bsr     loop_columns    Loop for every column
00004006                          1940      
00004006  5206                    1941      add.b   #1,D6           Add to the rows
00004008                          1942      
00004008  6100 F988               1943      bsr     endl            Break to the next line
0000400C  60EA                    1944      bra     loop_rows       Loop through the rows again
0000400E                          1945      
0000400E                          1946  loop_columns:
0000400E  BE3C 000F               1947      CMP.B   #15,D7              Check the rows don't go out of bounds
00004012  6E00 FF6C               1948      BGT     return              If the rows are greater than 22 end the loop
00004016                          1949      
00004016  6100 0020               1950      bsr     draw_tile           Draw the current tile
0000401A  6100 00C6               1951      bsr     check_for_loot_piles Draw the loot piles if there is one on the current tile
0000401E  6100 0140               1952      bsr     check_for_player    Draw the player in the current tile if they're there
00004022  6100 0184               1953      bsr     check_for_enemies   Draw an enemy in the current tile if they is one there
00004026  6100 02C0               1954      bsr     check_for_win_point Draw the win point in the current tile if it's there
0000402A  6100 01F2               1955      bsr     check_for_shops     Draw a shop in the current tile if there is one
0000402E  6100 025A               1956      bsr     check_for_doors     Draw a door in the current ile if there is one
00004032                          1957      
00004032  5207                    1958      add.b   #1,D7               Add to the column count
00004034  524A                    1959      add     #1,A2               Move to the next memory location
00004036  60D6                    1960      bra     loop_columns        Loop the columns again
00004038                          1961      
00004038                          1962  *-------------------------------------------------------
00004038                          1963  *----------------------Draw tile------------------------
00004038                          1964  *-------------------------------------------------------
00004038                          1965  *Draws the tile at the address in the address register A2
00004038                          1966  draw_tile:
00004038  0C12 00FF               1967      CMP.B   #255,(A2)           Check if the value is undifined
0000403C  6700 005E               1968      BEQ     draw_blocked_tile   Draw the blank tile
00004040                          1969      
00004040  0C12 0001               1970      CMP.B   #1,(A2)
00004044  6700 0064               1971      BEQ     draw_both_tile
00004048  0C12 0003               1972      CMP.B   #3,(A2)
0000404C  6700 006A               1973      BEQ     draw_left_tile
00004050  0C12 0004               1974      CMP.B   #4,(A2)
00004054  6700 0062               1975      BEQ     draw_left_tile
00004058  0C12 0005               1976      CMP.B   #5,(A2)
0000405C  6700 0068               1977      BEQ     draw_right_tile
00004060  0C12 0006               1978      CMP.B   #6,(A2)
00004064  6700 0060               1979      BEQ     draw_right_tile
00004068  0C12 0008               1980      CMP.B   #8,(A2)
0000406C  6700 004A               1981      BEQ     draw_left_tile
00004070  0C12 000A               1982      CMP.B   #10,(A2)
00004074  6700 0050               1983      BEQ     draw_right_tile
00004078  0C12 000B               1984      CMP.B   #11,(A2)
0000407C  6700 003A               1985      BEQ     draw_left_tile
00004080  0C12 000C               1986      CMP.B   #12,(A2)
00004084  6700 0024               1987      BEQ     draw_both_tile
00004088  0C12 000D               1988      CMP.B   #13,(A2)
0000408C  6700 0038               1989      BEQ     draw_right_tile
00004090  0C12 000E               1990      CMP.B   #14,(A2)
00004094  6700 0014               1991      BEQ     draw_both_tile
00004098                          1992      
00004098  6000 003A               1993      BRA     draw_blank_tile     Draw the blank tile
0000409C                          1994      
0000409C                          1995  draw_blocked_tile:
0000409C  43F9 0000508B           1996      lea     blocked_tile,A1
000040A2  103C 000E               1997      move.b  #14,D0
000040A6  4E4F                    1998      trap    #15
000040A8  4E75                    1999      rts
000040AA                          2000      
000040AA                          2001  draw_both_tile:
000040AA  43F9 0000507F           2002      lea     both_tile,A1
000040B0  103C 000E               2003      move.b  #14,D0
000040B4  4E4F                    2004      trap    #15
000040B6  4E75                    2005      rts
000040B8                          2006      
000040B8                          2007  draw_left_tile:
000040B8  43F9 00005083           2008      lea     left_tile,A1
000040BE  103C 000E               2009      move.b  #14,D0
000040C2  4E4F                    2010      trap    #15
000040C4  4E75                    2011      rts
000040C6                          2012      
000040C6                          2013  draw_right_tile:
000040C6  43F9 00005087           2014      lea     right_tile,A1
000040CC  103C 000E               2015      move.b  #14,D0
000040D0  4E4F                    2016      trap    #15
000040D2  4E75                    2017      rts
000040D4                          2018      
000040D4                          2019  draw_blank_tile:
000040D4  43F9 0000507B           2020      lea     blank_tile,A1
000040DA  103C 000E               2021      move.b  #14,D0
000040DE  4E4F                    2022      trap    #15
000040E0  4E75                    2023      rts
000040E2                          2024  
000040E2                          2025  *----------------------Draw Loot------------------------
000040E2                          2026  check_for_loot_piles:
000040E2  4BF8 7000               2027      lea     FIRST_LOOT,A5   Load the memory address of the first loot pile
000040E6  1A3C 0000               2028      move.b  #0,D5           Move the starting loot number to D5
000040EA  6100 0004               2029      bsr     loop_loot_piles Loop through all loot piles
000040EE  4E75                    2030      rts                     Return from subroutine
000040F0                          2031      
000040F0                          2032  loop_loot_piles:
000040F0  6100 0014               2033      bsr     check_for_loot  Check for a loot pile
000040F4                          2034      
000040F4  BA3C 0002               2035      CMP.B   #ENEMY_MAX,D5   Compare the enemy number with the maximum loot number
000040F8  6C00 FE86               2036      BGE     return          Return from the loop if the current loot number is greater than or equal to the max
000040FC                          2037      
000040FC  5205                    2038      add.b   #1,D5           Add to the current loot number
000040FE  DAFC 0010               2039      add.w   #16,A5          Add to the current loot pointer to move to the next loot pile
00004102  5D4D                    2040      sub.w   #L_ACTIVE,A5    Move to the root
00004104  60EA                    2041      bra     loop_loot_piles Keep looping the loot piles
00004106                          2042      
00004106                          2043  check_for_loot:
00004106  5C4D                    2044      add.w   #L_ACTIVE,A5    Move to the active state
00004108  0C15 0000               2045      CMP.B   #0,(A5)         Return if the loot is not active
0000410C  6700 FE72               2046      BEQ     return
00004110  5D4D                    2047      sub.w   #L_ACTIVE,A5    Move to the root
00004112                          2048  
00004112  3615                    2049      move.w  (A5),D3         Move the enemy coordinates into data register D3 for large-value comparisons
00004114  B5C3                    2050      CMP.L   D3,A2           Check if the enemy is in the current position
00004116  6700 0006               2051      BEQ     draw_loot       Draw the enemy if it is
0000411A  5C4D                    2052      add.w   #L_ACTIVE,A5    Move to the active state
0000411C  4E75                    2053      rts                     Return if the enemy is not in the current position
0000411E                          2054      
0000411E                          2055  draw_loot:
0000411E  5C4D                    2056      add.w   #L_ACTIVE,A5    Move to the active state
00004120                          2057  
00004120  323C 00FF               2058      move.w  #255,D1         Move the word #255 to D1 to set the type of trap 11
00004124  103C 000B               2059      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
00004128  4E4F                    2060      trap    #15             Trap to get the cursor position in D1
0000412A                          2061      
0000412A  0441 0200               2062      sub.w   #512,D1         Move the cursor back by two columns
0000412E  4E4F                    2063      trap    #15             Set the cursor position with trap command 11
00004130                          2064      
00004130  2601                    2065      move.l  D1,D3           Move the value in D1 to D3 for storage
00004132                          2066      
00004132  223C 0000FFFF           2067      move.l  #GOLD,D1         Move the colour red to D1
00004138  6100 FE88               2068      bsr     change_font_colour  Change the font colour
0000413C                          2069      
0000413C  43F9 00005097           2070      lea     loot_mark,A1   load the enemy symbol
00004142  103C 000E               2071      move.b  #14,D0          Move #14 to D0 for trap command 14
00004146  4E4F                    2072      trap    #15             Draw the player mark
00004148                          2073      
00004148  223C 00FFFFFF           2074      move.l  #WHITE,D1       Move the colour white to D1
0000414E  6100 FE72               2075      bsr     change_font_colour  Change the font colour
00004152                          2076      
00004152  2203                    2077      move.l  D3,D1           Move the value in D3 to D1 for previous cursor position
00004154                          2078      
00004154  0641 0200               2079      add.w   #512,D1         Move the cursor position two columns forward
00004158  103C 000B               2080      move.b  #11,D0          Move byte #11 for trap command 11 
0000415C  4E4F                    2081      trap    #15             Set the cursor position
0000415E                          2082      
0000415E  4E75                    2083      rts 
00004160                          2084  
00004160                          2085  *---------------------Draw Player-----------------------
00004160                          2086  check_for_player:
00004160  B5CE                    2087      CMP.L   A6,A2
00004162  6700 0004               2088      BEQ     draw_player
00004166  4E75                    2089      rts
00004168                          2090      
00004168                          2091  draw_player:
00004168  323C 00FF               2092      move.w  #255,D1         Move the word #255 to D1 to set the type of trap 11
0000416C  103C 000B               2093      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
00004170  4E4F                    2094      trap    #15             Trap to get the cursor position in D1
00004172                          2095      
00004172  0441 0200               2096      sub.w   #512,D1         Move the cursor back by two columns
00004176  4E4F                    2097      trap    #15             Set the cursor position with trap command 11
00004178                          2098      
00004178  2601                    2099      move.l  D1,D3          Move the value in D1 to D3 for storage
0000417A                          2100      
0000417A  223C 0000FF00           2101      move.l  #GREEN,D1       Move the colour green to D1
00004180  6100 FE40               2102      bsr     change_font_colour  Change the font colour
00004184                          2103      
00004184  43F9 0000508F           2104      lea     player_mark,A1  load the player symbol
0000418A  103C 000E               2105      move.b  #14,D0          Move #14 to D0 for trap command 14
0000418E  4E4F                    2106      trap    #15             Draw the player mark
00004190                          2107      
00004190  223C 00FFFFFF           2108      move.l  #WHITE,D1       Move the colour white to D1
00004196  6100 FE2A               2109      bsr     change_font_colour  Change the font colour
0000419A                          2110      
0000419A  2203                    2111      move.l  D3,D1           Move the value in D3 to D1 for previous cursor position
0000419C                          2112      
0000419C  0641 0200               2113      add.w   #512,D1         Move the cursor position two columns forward
000041A0  103C 000B               2114      move.b  #11,D0          Move byte #11 for trap command 11 
000041A4  4E4F                    2115      trap    #15             Set the cursor position
000041A6                          2116      
000041A6  4E75                    2117      rts
000041A8                          2118      
000041A8                          2119  *---------------------Draw Enemies----------------------
000041A8                          2120  check_for_enemies:
000041A8  4BF8 6000               2121      lea     FIRST_ENEMY,A5  Load the memory address of the first enemy
000041AC  1A3C 0000               2122      move.b  #0,D5           Move the starting enemy number to D5
000041B0  6100 0004               2123      bsr     loop_enemies    Loop through all enemies
000041B4  4E75                    2124      rts                     Return from subroutine
000041B6                          2125      
000041B6                          2126  loop_enemies:
000041B6  6100 0012               2127      bsr     check_for_enemy Check for an enemy
000041BA                          2128      
000041BA  BA3C 0002               2129      CMP.B   #ENEMY_MAX,D5   Compare the enemy number with the maximum enemy number
000041BE  6C00 FDC0               2130      BGE     return          Return from the loop if the current enemy number is greater than or equal to the max
000041C2                          2131      
000041C2  5205                    2132      add.b   #1,D5           Add to the current enemy number
000041C4  DAFC 000C               2133      add.w   #12,A5          Add to the current enemy pointer to move to the next enemy (16 for next enemy - 4 to get back from position)
000041C8  60EC                    2134      bra     loop_enemies    Keep looping the enemies
000041CA                          2135      
000041CA                          2136  check_for_enemy:
000041CA  564D                    2137      add.w   #ALIVE,A5       Add to the enemy memory address to get the enemy's alive state
000041CC  0C1D 0000               2138      CMP.B   #0,(A5)+        Check if the enemy is alive
000041D0  6700 FDAE               2139      BEQ     return          Return from the subroutine if not
000041D4                          2140      
000041D4  3615                    2141      move.w  (A5),D3         Move the enemy coordinates into data register D3 for large-value comparisons
000041D6  B5C3                    2142      CMP.L   D3,A2           Check if the enemy is in the current position
000041D8  6700 0004               2143      BEQ     draw_enemy      Draw the enemy if it is
000041DC  4E75                    2144      rts                     Return if the enemy is not in the current position
000041DE                          2145      
000041DE                          2146  draw_enemy:
000041DE  323C 00FF               2147      move.w  #255,D1         Move the word #255 to D1 to set the type of trap 11
000041E2  103C 000B               2148      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
000041E6  4E4F                    2149      trap    #15             Trap to get the cursor position in D1
000041E8                          2150      
000041E8  0441 0200               2151      sub.w   #512,D1         Move the cursor back by two columns
000041EC  4E4F                    2152      trap    #15             Set the cursor position with trap command 11
000041EE                          2153      
000041EE  2601                    2154      move.l  D1,D3          Move the value in D1 to D3 for storage
000041F0                          2155      
000041F0  223C 000000FF           2156      move.l  #RED,D1         Move the colour red to D1
000041F6  6100 FDCA               2157      bsr     change_font_colour  Change the font colour
000041FA                          2158      
000041FA  43F9 00005091           2159      lea     enemy_mark,A1   load the enemy symbol
00004200  103C 000E               2160      move.b  #14,D0          Move #14 to D0 for trap command 14
00004204  4E4F                    2161      trap    #15             Draw the player mark
00004206                          2162      
00004206  223C 00FFFFFF           2163      move.l  #WHITE,D1       Move the colour white to D1
0000420C  6100 FDB4               2164      bsr     change_font_colour  Change the font colour
00004210                          2165      
00004210  2203                    2166      move.l  D3,D1           Move the value in D3 to D1 for previous cursor position
00004212                          2167      
00004212  0641 0200               2168      add.w   #512,D1         Move the cursor position two columns forward
00004216  103C 000B               2169      move.b  #11,D0          Move byte #11 for trap command 11 
0000421A  4E4F                    2170      trap    #15             Set the cursor position
0000421C                          2171      
0000421C  4E75                    2172      rts 
0000421E                          2173   
0000421E                          2174  *----------------------Draw Shops-----------------------
0000421E                          2175  check_for_shops:
0000421E  4BF8 6500               2176      lea     FIRST_SHOP,A5   Load the memory address of the first shop
00004222  1A3C 0000               2177      move.b  #0,D5           Move the starting shop number to D5
00004226  6100 0004               2178      bsr     loop_shops      Loop through all shops
0000422A  4E75                    2179      rts                     Return from subroutine
0000422C                          2180      
0000422C                          2181  loop_shops:
0000422C  6100 0012               2182      bsr     check_for_shop  Check for a shop
00004230                          2183      
00004230  BA3C 0002               2184      CMP.B   #SHOP_MAX,D5    Compare the shop number with the maximum shop number
00004234  6C00 FD4A               2185      BGE     return          Return from the loop if the current shop number is greater than or equal to the max
00004238                          2186      
00004238  5205                    2187      add.b   #1,D5           Add to the current shop number
0000423A  DAFC 0010               2188      add.w   #16,A5          Add to the current shop pointer to move to the next shop
0000423E  60EC                    2189      bra     loop_shops      Keep looping the shops
00004240                          2190      
00004240                          2191  check_for_shop:
00004240  3615                    2192      move.w  (A5),D3         Move the shop coordinates into data register D3 for large-value comparisons
00004242  B5C3                    2193      CMP.L   D3,A2           Check if the shop is in the current position
00004244  6700 0004               2194      BEQ     draw_shop       Draw the shop if it is
00004248  4E75                    2195      rts                     Return if the shop is not in the current position
0000424A                          2196      
0000424A                          2197  draw_shop:
0000424A  323C 00FF               2198      move.w  #255,D1         Move the word #255 to D1 to set the type of trap 11
0000424E  103C 000B               2199      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
00004252  4E4F                    2200      trap    #15             Trap to get the cursor position in D1
00004254                          2201      
00004254  0441 0200               2202      sub.w   #512,D1         Move the cursor back by two columns
00004258  4E4F                    2203      trap    #15             Set the cursor position with trap command 11
0000425A                          2204      
0000425A  2601                    2205      move.l  D1,D3           Move the value in D1 to D3 for storage
0000425C                          2206      
0000425C  223C 00F000F0           2207      move.l  #PURPLE,D1      Move the colour red to D1
00004262  6100 FD5E               2208      bsr     change_font_colour  Change the font colour
00004266                          2209      
00004266  43F9 00005095           2210      lea     shop_mark,A1    load the enemy symbol
0000426C  103C 000E               2211      move.b  #14,D0          Move #14 to D0 for trap command 14
00004270  4E4F                    2212      trap    #15             Draw the player mark
00004272                          2213      
00004272  223C 00FFFFFF           2214      move.l  #WHITE,D1       Move the colour white to D1
00004278  6100 FD48               2215      bsr     change_font_colour  Change the font colour
0000427C                          2216      
0000427C  2203                    2217      move.l  D3,D1           Move the value in D3 to D1 for previous cursor position
0000427E                          2218      
0000427E  0641 0200               2219      add.w   #512,D1         Move the cursor position two columns forward
00004282  103C 000B               2220      move.b  #11,D0          Move byte #11 for trap command 11 
00004286  4E4F                    2221      trap    #15             Set the cursor position
00004288                          2222      
00004288  4E75                    2223      rts
0000428A                          2224  
0000428A                          2225  *----------------------Draw Doors-----------------------
0000428A                          2226  check_for_doors:
0000428A  4BF8 6FE0               2227      lea     FIRST_DOOR,A5   Load the memory address of the first door
0000428E  1A3C 0000               2228      move.b  #0,D5           Move the starting door number to D5
00004292  6100 0004               2229      bsr     loop_doors      Loop through all doors
00004296  4E75                    2230      rts                     Return from subroutine
00004298                          2231      
00004298                          2232  loop_doors:
00004298  6100 0010               2233      bsr     check_for_door  Check for a door
0000429C                          2234      
0000429C  BA3C 0003               2235      CMP.B   #DOOR_MAX,D5    Compare the door number with the maximum door number
000042A0  6C00 FCDE               2236      BGE     return          Return from the loop if the current door number is greater than or equal to the max
000042A4                          2237      
000042A4  5205                    2238      add.b   #1,D5           Add to the current door number
000042A6  544D                    2239      add.w   #2,A5          Add to the current door pointer to move to the next door
000042A8  60EE                    2240      bra     loop_doors      Keep looping the doors
000042AA                          2241      
000042AA                          2242  check_for_door:
000042AA  3615                    2243      move.w  (A5),D3         Move the door coordinates into data register D3 for large-value comparisons
000042AC  B5C3                    2244      CMP.L   D3,A2           Check if the door is in the current position
000042AE  6700 0004               2245      BEQ     draw_door       Draw the door if it is
000042B2  4E75                    2246      rts                     Return if the door is not in the current position
000042B4                          2247      
000042B4                          2248  draw_door:
000042B4  6100 FD1E               2249      bsr     get_cursor_pos  Get the position of the cursor and save the value to D1 and D3
000042B8                          2250      
000042B8  0441 0200               2251      sub.w   #512,D1         Move the cursor back by two columns
000042BC  4E4F                    2252      trap    #15             Set the cursor position with trap command 11
000042BE                          2253      
000042BE  223C 00507090           2254      move.l  #BROWN,D1       Move the colour red to D1
000042C4  6100 FCFC               2255      bsr     change_font_colour  Change the font colour
000042C8                          2256      
000042C8  43F9 00005099           2257      lea     door_mark,A1    load the door symbol
000042CE  103C 000E               2258      move.b  #14,D0          Move #14 to D0 for trap command 14
000042D2  4E4F                    2259      trap    #15             Draw the door mark
000042D4                          2260      
000042D4  223C 00FFFFFF           2261      move.l  #WHITE,D1       Move the colour white to D1
000042DA  6100 FCE6               2262      bsr     change_font_colour  Change the font colour
000042DE                          2263      
000042DE  2203                    2264      move.l  D3,D1           Move the value in D3 to D1 for previous cursor position
000042E0  103C 000B               2265      move.b  #11,D0          Move byte #11 for trap command 11 
000042E4  4E4F                    2266      trap    #15             Set the cursor position
000042E6                          2267      
000042E6  4E75                    2268      rts                     Return from subroutine
000042E8                          2269  
000042E8                          2270  *--------------------Draw Win Point---------------------
000042E8                          2271  check_for_win_point:
000042E8  B5FC 00008156           2272      CMP.L   #WIN_POINT,A2   Check if the win point is in the current tile
000042EE  6700 0004               2273      BEQ     draw_win_point  Branch to draw the win point if so
000042F2  4E75                    2274      rts                     Return from subroutine if not
000042F4                          2275      
000042F4                          2276  draw_win_point:
000042F4  323C 00FF               2277      move.w  #255,D1         Move the word #255 to D1 to set the type of trap 11
000042F8  103C 000B               2278      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
000042FC  4E4F                    2279      trap    #15             Trap to get the cursor position in D1
000042FE                          2280      
000042FE  0441 0200               2281      sub.w   #512,D1         Move the cursor back by two columns
00004302  4E4F                    2282      trap    #15             Set the cursor position with trap command 11
00004304                          2283      
00004304  2601                    2284      move.l  D1,D3           Move the value in D1 to D3 for storage
00004306                          2285      
00004306  223C 00FF0000           2286      move.l  #BLUE,D1        Move the colour blue to D1
0000430C  6100 FCB4               2287      bsr     change_font_colour  Change the font colour
00004310                          2288      
00004310  43F9 00005093           2289      lea     win_point_mark,A1   load the win point symbol
00004316  103C 000E               2290      move.b  #14,D0              Move #14 to D0 for trap command 14
0000431A  4E4F                    2291      trap    #15                 Draw the win point mark
0000431C                          2292      
0000431C  223C 00FFFFFF           2293      move.l  #WHITE,D1       Move the colour white to D1
00004322  6100 FC9E               2294      bsr     change_font_colour  Change the font colour
00004326                          2295      
00004326  2203                    2296      move.l  D3,D1           Move the value in D3 to D1 for previous cursor position
00004328                          2297      
00004328  0641 0200               2298      add.w   #512,D1         Move the cursor position two columns forward
0000432C  103C 000B               2299      move.b  #11,D0          Move byte #11 for trap command 11 
00004330  4E4F                    2300      trap    #15             Set the cursor position
00004332                          2301      
00004332  4E75                    2302      rts
00004334                          2303      
00004334                          2304  *-------------------------------------------------------
00004334                          2305  *-------------------Setup the world---------------------
00004334                          2306  *-------------------------------------------------------
00004334                          2307  setup_world:
00004334  13FC 000E 0000814A      2308      move.b  #14,$814A   Setup the starting corridor
0000433C  13FC 0007 0000813A      2309      move.b  #7,$813A    T junction upwards from starting corridor
00004344  13FC 0004 00008139      2310      move.b  #4,$8139    Left corridor
0000434C  13FC 0001 00008129      2311      move.b  #1,$8129
00004354  13FC 0001 00008119      2312      move.b  #1,$8119
0000435C                          2313      
0000435C  13FC 0004 00008108      2314      move.b  #4,$8108    First shop
00004364  13FC 0000 00008109      2315      move.b  #0,$8109    Entrance
0000436C  13FC 0005 0000810A      2316      move.b  #5,$810A
00004374  13FC 0008 000080F8      2317      move.b  #8,$80F8
0000437C  13FC 0000 000080F9      2318      move.b  #0,$80F9
00004384  13FC 000A 000080FA      2319      move.b  #10,$80FA
0000438C  13FC 0003 000080E8      2320      move.b  #3,$80E8
00004394  13FC 0007 000080E9      2321      move.b  #7,$80E9
0000439C  13FC 0006 000080EA      2322      move.b  #6,$80EA
000043A4                          2323      
000043A4  13FC 0005 0000813B      2324      move.b  #5,$813B    Right corridor
000043AC  13FC 0001 0000812B      2325      move.b  #1,$812B
000043B4  13FC 0001 0000811B      2326      move.b  #1,$811B
000043BC  13FC 0008 0000810B      2327      move.b  #8,$810B    Path continues up with a turn off to the right
000043C4                          2328      
000043C4  13FC 0002 0000810C      2329      move.b  #2,$810C    Right path
000043CC  13FC 0002 0000810D      2330      move.b  #2,$810D    Continue right
000043D4  13FC 0005 0000810E      2331      move.b  #5,$810E    Path upwards and to the left
000043DC  13FC 0001 000080FE      2332      move.b  #1,$80FE    Leads upwards into a room
000043E4                          2333      
000043E4  13FC 0004 000080ED      2334      move.b  #4,$80ED    First monster room
000043EC  13FC 0000 000080EE      2335      move.b  #0,$80EE    Entrance
000043F4  13FC 0005 000080EF      2336      move.b  #5,$80EF
000043FC  13FC 0008 000080DD      2337      move.b  #8,$80DD
00004404  13FC 0000 000080DE      2338      move.b  #0,$80DE
0000440C  13FC 000A 000080DF      2339      move.b  #10,$80DF
00004414  13FC 0003 000080CD      2340      move.b  #3,$80CD
0000441C  13FC 0007 000080CE      2341      move.b  #7,$80CE
00004424  13FC 0006 000080CF      2342      move.b  #6,$80CF
0000442C                          2343      
0000442C  13FC 0001 000080FB      2344      move.b  #1,$80FB    Path that continues up
00004434  13FC 0001 000080EB      2345      move.b  #1,$80EB    Path continues upwards
0000443C  13FC 0001 000080DB      2346      move.b  #1,$80DB
00004444                          2347      
00004444                          2348      *Bottom row of room
00004444  13FC 0004 000080C8      2349      move.b  #4,$80C8    Large monster room with locked door
0000444C  13FC 0009 000080C9      2350      move.b  #9,$80C9
00004454  13FC 0009 000080CA      2351      move.b  #9,$80CA
0000445C  13FC 0000 000080CB      2352      move.b  #0,$80CB    Entrance
00004464  13FC 0005 000080CC      2353      move.b  #5,$80CC
0000446C                          2354      *Middle row of room
0000446C  13FC 0000 000080B8      2355      move.b  #0,$80B8    Exit to the left
00004474  13FC 0000 000080B9      2356      move.b  #0,$80B9
0000447C  13FC 0000 000080BA      2357      move.b  #0,$80BA
00004484  13FC 0000 000080BB      2358      move.b  #0,$80BB
0000448C  13FC 000A 000080BC      2359      move.b  #10,$80BC
00004494                          2360      *Top row of room
00004494  13FC 0003 000080A8      2361      move.b  #3,$80A8
0000449C  13FC 0007 000080A9      2362      move.b  #7,$80A9
000044A4  13FC 0007 000080AA      2363      move.b  #7,$80AA
000044AC  13FC 0007 000080AB      2364      move.b  #7,$80AB    Locked door
000044B4  13FC 0006 000080AC      2365      move.b  #6,$80AC
000044BC                          2366      
000044BC  13FC 0002 000080B7      2367      move.b  #2,$80B7    Exit large room leftwards
000044C4  13FC 0002 000080B6      2368      move.b  #2,$80B6    Continue to the left
000044CC  13FC 0007 000080B5      2369      move.b  #7,$80B5    Continue to the left and a path downwards
000044D4  13FC 0002 000080B4      2370      move.b  #2,$80B4    Continue to the left
000044DC                          2371      
000044DC  13FC 0003 000080A1      2372      move.b  #3,$80A1    Room to the left
000044E4  13FC 0007 000080A2      2373      move.b  #7,$80A2
000044EC  13FC 0006 000080A3      2374      move.b  #6,$80A3
000044F4  13FC 0008 000080B1      2375      move.b  #8,$80B1
000044FC  13FC 0000 000080B2      2376      move.b  #0,$80B2
00004504  13FC 0000 000080B3      2377      move.b  #0,$80B3    Entrance to the right
0000450C  13FC 0004 000080C1      2378      move.b  #4,$80C1
00004514  13FC 0009 000080C2      2379      move.b  #9,$80C2
0000451C  13FC 0005 000080C3      2380      move.b  #5,$80C3
00004524                          2381      
00004524  13FC 0001 000080C5      2382      move.b  #1,$80C5    Path leading downwards
0000452C  13FC 0001 000080D5      2383      move.b  #1,$80D5
00004534  13FC 000A 000080E5      2384      move.b  #10,$80E5   Path leading downward and to the left
0000453C  13FC 0002 000080E4      2385      move.b  #2,$80E4    Path on the left
00004544  13FC 0002 000080E3      2386      move.b  #2,$80E3
0000454C  13FC 0003 000080E2      2387      move.b  #3,$80E2    Path takes a turn downwards
00004554  13FC 0001 000080F2      2388      move.b  #1,$80F2    Path continues downwards
0000455C                          2389      
0000455C  13FC 0003 00008101      2390      move.b  #3,$8101    Regular enemy room
00004564  13FC 0000 00008102      2391      move.b  #0,$8102    Entrance
0000456C  13FC 0006 00008103      2392      move.b  #6,$8103
00004574  13FC 0008 00008111      2393      move.b  #8,$8111
0000457C  13FC 0000 00008112      2394      move.b  #0,$8112
00004584  13FC 000A 00008113      2395      move.b  #10,$8113
0000458C  13FC 0004 00008121      2396      move.b  #4,$8121
00004594  13FC 0009 00008122      2397      move.b  #9,$8122
0000459C  13FC 000A 00008123      2398      move.b  #10,$8123   Exit at the bottom
000045A4                          2399      
000045A4  13FC 0001 000080F5      2400      move.b  #1,$80F5    Path leading downward
000045AC  13FC 0001 00008105      2401      move.b  #1,$8105
000045B4  13FC 0001 00008115      2402      move.b  #1,$8115
000045BC  13FC 0001 00008125      2403      move.b  #1,$8125
000045C4                          2404      
000045C4                          2405      *Top row of room
000045C4  13FC 0008 00008133      2406      move.b  #8,$8133    Large enemy room - Exit at top
000045CC  13FC 0007 00008134      2407      move.b  #7,$8134
000045D4  13FC 0000 00008135      2408      move.b  #0,$8135    Entrance
000045DC  13FC 0006 00008136      2409      move.b  #6,$8136
000045E4                          2410      
000045E4                          2411      *Middle row of room
000045E4  13FC 0008 00008143      2412      move.b  #8,$8143
000045EC  13FC 0000 00008144      2413      move.b  #0,$8144
000045F4  13FC 0000 00008145      2414      move.b  #0,$8145
000045FC  13FC 000A 00008146      2415      move.b  #10,$8146
00004604                          2416      
00004604                          2417      *Bottom row of room
00004604  13FC 0004 00008153      2418      move.b  #4,$8153
0000460C  13FC 0009 00008154      2419      move.b  #9,$8154
00004614  13FC 0009 00008155      2420      move.b  #9,$8155
0000461C  13FC 0005 00008156      2421      move.b  #5,$8156
00004624                          2422      
00004624                          2423      * Setup the doors
00004624  4BF8 6FE0               2424      lea     FIRST_DOOR,A5   Set the first door location to A5
00004628  3ABC 80EB               2425      move.w  #$80EB,(A5)     Set the location of the first door
0000462C  544D                    2426      add.w   #2,A5           Increment the door memory address
0000462E  3ABC 80B6               2427      move.w  #$80B6,(A5)     Set the location of the first door
00004632  544D                    2428      add.w   #2,A5           Increment the door memory address
00004634  3ABC 8115               2429      move.w  #$8115,(A5)
00004638                          2430      
00004638  4E75                    2431      rts
0000463A                          2432  
0000463A                          2433  setup_enemies:
0000463A                          2434      * Setup first enemy
0000463A  11FC 0003 6000          2435      move.b  #3,$6000    Health - Setup the first enemy
00004640  11FC 0001 6001          2436      move.b  #1,$6001    Damage/level
00004646  11FC 0003 6002          2437      move.b  #3,$6002    Class type (Knight)
0000464C  11FC 0001 6003          2438      move.b  #1,$6003    Alive state (Alive)
00004652  31FC 80DE 6004          2439      move.w  #$80DE,$6004  Move enemy coordinates
00004658                          2440      
00004658                          2441      * Setup second enemy
00004658  11FC 0003 6010          2442      move.b  #3,$6010    Health - Setup the first enemy
0000465E  11FC 0002 6011          2443      move.b  #2,$6011    Damage/level
00004664  11FC 0001 6012          2444      move.b  #1,$6012    Class type (Knight)
0000466A  11FC 0001 6013          2445      move.b  #1,$6013    Alive state (Alive)
00004670  31FC 8155 6014          2446      move.w  #$8155,$6014  Move enemy coordinates
00004676                          2447      
00004676  4E75                    2448      rts
00004678                          2449      
00004678                          2450  setup_loot:
00004678                          2451      * Setup first loot pile
00004678  31FC 80DE 7000          2452      move.w  #$80DE,$7000  Move loot coordinates
0000467E  11FC 0001 7002          2453      move.b  #1,$7002  Move loot potions
00004684  11FC 0002 7003          2454      move.b  #2,$7003  Move loot keys
0000468A  11FC 000F 7004          2455      move.b  #LIFE_PER_TORCH,$7004  Move loot torches
00004690  11FC 0005 7005          2456      move.b  #5,$7005  Move loot gold
00004696  11FC 0001 7006          2457      move.b  #1,$7006  Move loot active state
0000469C                          2458      
0000469C                          2459      * Setup second loot pile
0000469C  31FC 8155 7010          2460      move.w  #$8155,$7010  Move loot coordinates
000046A2  11FC 0003 7012          2461      move.b  #3,$7012  Move loot potions
000046A8  11FC 0005 7013          2462      move.b  #5,$7013  Move loot keys
000046AE  11FC 0001 7014          2463      move.b  #1,$7014  Move loot torches
000046B4  11FC 0002 7015          2464      move.b  #2,$7015  Move loot gold
000046BA  11FC 0001 7016          2465      move.b  #1,$7016  Move loot active state
000046C0                          2466  
000046C0                          2467      
000046C0                          2468  setup_player:
000046C0  11FC 000A 5FF0          2469      move.b  #10,PLAYER      put score/health in memory location $5FF0
000046C6  11FC 0001 5FF1          2470      move.b  #1,PLA_DAMAGE   Assign the default damage for the player
000046CC  11FC 0000 5FF3          2471      move.b  #0,GAME_STATE   Put game state number in memory location $5FF3
000046D2                          2472      *0 = Pick role/intro | 5 = Move around | 6 = Combat | 7 = Shop | 64 = End game
000046D2                          2473  
000046D2  11FC 0000 5FF2          2474      move.b  #0,PLA_CLASS    put class number in memory location $5FF2
000046D8                          2475      * 1 corresponds to knight - 2 corresponds to mage - 3 corresponds to rogue
000046D8                          2476      
000046D8  11FC 0064 5FF8          2477      move.b  #100,PLA_GOLD    Assign the player's base gold value
000046DE  11FC 0001 5FF9          2478      move.b  #1,PLA_POTIONS  Assign the player's base potions value
000046E4  11FC 0003 5FFA          2479      move.b  #3,PLA_KEYS     Assign the player's base keys value
000046EA                          2480      *move.b  #LIFE_PER_TORCH,PLA_TORCH   Assign the player's base torch value
000046EA  11FC 0032 5FFB          2481      move.b  #50,PLA_TORCH   Assign the player's base torch value
000046F0                          2482      
000046F0  4DF9 0000814A           2483      lea     $814A,A6        Set the player coordinate to the first corridor
000046F6  31CE 5FF6               2484      move.w  A6,PLA_P_POS    Set the player's previous position to their current
000046FA                          2485      
000046FA  4E75                    2486      rts
000046FC                          2487      
000046FC                          2488  setup_shops:
000046FC                          2489      * Setup the first shop
000046FC  31FC 80F9 6500          2490      move.w  #$80F9,$6500    Set the position
00004702  11FC 0002 6502          2491      move.b  #2,$6502        Set the potions
00004708  11FC 0003 6503          2492      move.b  #3,$6503        Set the keys
0000470E  11FC 0004 6504          2493      move.b  #4,$6504        Set the torches
00004714  11FC 0005 6505          2494      move.b  #5,$6505        Set the damage
0000471A                          2495      
0000471A                          2496      * Setup the second shop
0000471A  31FC 80B2 6510          2497      move.w  #$80B2,$6510    Set the position
00004720  11FC 0004 6512          2498      move.b  #4,$6512        Set the potions
00004726  11FC 0003 6513          2499      move.b  #3,$6513        Set the keys
0000472C  11FC 0002 6514          2500      move.b  #2,$6514        Set the torches
00004732  11FC 0001 6515          2501      move.b  #1,$6515        Set the damage
00004738                          2502  
00004738  4E75                    2503      rts
0000473A                          2504      
0000473A                          2505  *-------------------------------------------------------
0000473A                          2506  *-------------------Data Delarations--------------------
0000473A                          2507  *-------------------------------------------------------
0000473A                          2508  
0000473A= 0D 0A 00                2509  crlf:           dc.b    $0D,$0A,0
0000473D= 2A 2A 2A 2A 2A 2A ...   2510  welcome_msg:    dc.b    '*****************************************************************',$0D,$0A
00004780= 20 20 20 20 20 20 ...   2511                  dc.b    '      __  ___      ___  __      ___        ______    _____  ___',$0D,$0A
000047C1= 20 20 20 20 20 2F ...   2512                  dc.b    '     /""\|"  \    /"  |/""\    |"  |      /    " \  (\"   \|"  \',$0D,$0A
00004803= 20 20 20 20 2F 20 ...   2513                  dc.b    '    /    \\   \  //  //    \   ||  |     // ____  \ |.\\   \    |',$0D,$0A
00004846= 20 20 20 2F 20 20 ...   2514                  dc.b    '   /  /\  \\\  \/. .//  /\  \  |:  |    /  /    ) :)|: \.   \\  |',$0D,$0A
00004889= 20 20 2F 2F 20 20 ...   2515                  dc.b    '  //  __   \\.    ////  __   \  \  |___(: (____/ // |.  \    \. |',$0D,$0A
000048CC= 20 2F 20 20 20 2F ...   2516                  dc.b    ' /   /  \\  \\\   //   /  \\  \( \_|:  \\        /  |    \    \ |',$0D,$0A
0000490F= 28 5F 5F 5F 2F 20 ...   2517                  dc.b    '(___/    \___)\__/(___/    \___)\_______)\"_____/    \___|\____\)',$0D,$0A,$0D,$0A
00004954= 2A 2A 2A 2A 2A 2A ...   2518                  dc.b    '*****************************************************************',$0D,$0A,0
00004998= 2E 00                   2519  loop_msg:       dc.b    '.',0
0000499A= 20 20 20 20 20 20 ...   2520  blank_msg:      dc.b    '                                                                                   ',0
000049EE= 54 68 65 20 64 61 ...   2521  tutorial_msg    dc.b    'The darkness here is dangerious, keep your torch close and dont let it go out.',$0D,$0A
00004A3E= 45 76 65 72 79 20 ...   2522                  dc.b    'Every movement you make decreases your torch life, so think before you move.',$0D,$0A
00004A8C= 59 6F 75 20 63 61 ...   2523                  dc.b    'You can buy more torches in the shop, thats probably a good place to start...',$0D,$0A,0
00004ADC= 31 3E 20 52 65 73 ...   2524  replay_msg:     dc.b    '1> Restart the game.',$0D,$0A
00004AF2= 32 3E 20 51 75 69 ...   2525                  dc.b    '2> Quit the game.',$0D,$0A,0
00004B06= 59 6F 75 20 61 77 ...   2526  wake_up_msg:    dc.b    'You awake in a room, on a bed of red velvet, with no memory',$0D,$0A
00004B43= 6F 66 20 68 6F 77 ...   2527                  dc.b    'of how you got here. Stones crumble from the ceiling, the place looks like an',$0D,$0A
00004B92= 6F 6C 64 20 63 61 ...   2528                  dc.b    'old castle. You get a dark feeling from this place, and you know you must',$0D,$0A
00004BDD= 65 73 63 61 70 65 ...   2529                  dc.b    'escape...',$0D,$0A
00004BE8= 59 6F 75 20 63 6C ...   2530                  dc.b    'You climb from the bed and look in a nearby mirror:',$0D,$0A,0
00004C1E= 31 3E 20 59 6F 75 ...   2531  pick_role_msg:  dc.b    '1> You wear armour of polished iron, a short sword and heavy shield laying',$0D,$0A
00004C6A= 63 6C 6F 73 65 20 ...   2532                  dc.b    'close by. (Knight class)',$0D,$0A,$0D,$0A
00004C86= 32 3E 20 59 6F 75 ...   2533                  dc.b    '2> You wear a cloak with mystic symbols sewn into the fabrics, an ancient',$0D,$0A
00004CD1= 6C 6F 6F 6B 69 6E ...   2534                  dc.b    'looking staff lays near. (Mage class)',$0D,$0A,$0D,$0A
00004CFA= 33 3E 20 59 6F 75 ...   2535                  dc.b    '3> You wear tight, well-fitting leather armour with reminents of black dye',$0D,$0A
00004D46= 73 74 61 69 6E 65 ...   2536                  dc.b    'stained to the material. Two knives are fastened to your belt. (Rogue class)',$0D,$0A,0
00004D95= 45 6E 74 65 72 20 ...   2537  input_nums_msg: dc.b    'Enter num between 1 and ',0
00004DAE= 3A 20 00                2538  colon_msg:      dc.b    ': ',0
00004DB1= 49 6E 70 75 74 74 ...   2539  input_error_msg:    dc.b    'Inputted number is outside of range.',$0D,$0A,0
00004DD8= 47 61 6D 65 73 74 ...   2540  fake_gamestate_msg: dc.b    'Gamestate doesnt exist',$0D,$0A,0
00004DF1= 59 6F 75 20 67 72 ...   2541  knight_role_msg:    dc.b    'You grab your sword and shield, pull a torch from the wall, and leave the room.',$0D,$0A,0
00004E43= 59 6F 75 20 68 61 ...   2542  knight_spec_msg:    dc.b    'You have chosen the KNIGHT class. You specialise in blocking and countering',$0D,$0A,0
00004E91= 59 6F 75 20 70 69 ...   2543  mage_role_msg:  dc.b    'You pick up your staff, grab a torch from the wall, and leave the room.',$0D,$0A,0
00004EDB= 59 6F 75 20 68 61 ...   2544  mage_spec_msg:  dc.b    'You have chosen the MAGE class. You specialise in magic attacks.',$0D,$0A,0
00004F1E= 59 6F 75 20 66 61 ...   2545  rogue_role_msg: dc.b    'You fasten your belt, grab a torch from the wall, and leave the room.',$0D,$0A,0
00004F66= 59 6F 75 20 68 61 ...   2546  rogue_spec_msg: dc.b    'You have chosen the ROGUE class. You specialise in quick melee attacks.',$0D,$0A,0
00004FB0= 31 3E 20 4D 6F 76 ...   2547  movement_msg:   dc.b    '1> Move north.',$0D,$0A
00004FC0= 32 3E 20 4D 6F 76 ...   2548                  dc.b    '2> Move south.',$0D,$0A
00004FD0= 33 3E 20 4D 6F 76 ...   2549                  dc.b    '3> Move west.',$0D,$0A
00004FDF= 34 3E 20 4D 6F 76 ...   2550                  dc.b    '4> Move east.',$0D,$0A
00004FEE= 35 3E 20 44 72 69 ...   2551                  dc.b    '5> Drink health potion.',$0D,$0A,0
00005008= 4D 6F 76 65 64 20 ...   2552  move_north_msg: dc.b    'Moved north.',$0D,$0A,0
00005017= 4D 6F 76 65 64 20 ...   2553  move_east_msg:  dc.b    'Moved east.',$0D,$0A,0
00005025= 4D 6F 76 65 64 20 ...   2554  move_south_msg: dc.b    'Moved south.',$0D,$0A,0
00005034= 4D 6F 76 65 64 20 ...   2555  move_west_msg:  dc.b    'Moved west.',$0D,$0A,0
00005042= 41 20 77 61 6C 6C ...   2556  movement_blocked_msg:  dc.b    'A wall blocks your path.',$0D,$0A,0
0000505D= 45 6E 74 65 72 20 ...   2557  continue_msg:   dc.b    'Enter any key to continue... ',0
0000507B= 20 20 20 00             2558  blank_tile      dc.b    '   ',0
0000507F= 7C 20 7C 00             2559  both_tile       dc.b    '| |',0
00005083= 7C 20 20 00             2560  left_tile       dc.b    '|  ',0
00005087= 20 20 7C 00             2561  right_tile      dc.b    '  |',0
0000508B= 5C 2F 5C 00             2562  blocked_tile:   dc.b    '\/\',0
0000508F= 2A 00                   2563  player_mark:    dc.b    '*',0
00005091= 58 00                   2564  enemy_mark:     dc.b    'X',0
00005093= 40 00                   2565  win_point_mark: dc.b    '@',0
00005095= 24 00                   2566  shop_mark:      dc.b    '$',0
00005097= 25 00                   2567  loot_mark:      dc.b    '%',0
00005099= 23 00                   2568  door_mark:      dc.b    '#',0
0000509B= 4D 61 70 20 4C 65 ...   2569  map_legend_msg:     dc.b    'Map Legend:',0
000050A7= 20 3D 20 50 6C 61 ...   2570  map_player_msg:     dc.b    ' = Player',0
000050B1= 20 3D 20 45 6E 65 ...   2571  map_enemy_msg:      dc.b    ' = Enemy',0
000050BA= 20 3D 20 4F 62 6A ...   2572  map_win_point_msg:  dc.b    ' = Objective',0
000050C7= 20 3D 20 53 68 6F ...   2573  map_shop_msg:       dc.b    ' = Shop',0
000050CF= 20 3D 20 4C 6F 6F ...   2574  map_loot_msg:       dc.b    ' = Loot Pile',0
000050DC= 20 3D 20 4C 6F 63 ...   2575  map_door_msg:       dc.b    ' = Locked Door',0
000050EB= 41 20 6D 6F 6E 73 ...   2576  encounter_msg:      dc.b    'A monster blocks your path, it looks ready to attack!',$0D,$0A,0
00005123= 31 3E 20 42 6C 6F ...   2577  combat_msg:         dc.b    '1> Block and Counter.',$0D,$0A
0000513A= 32 3E 20 43 61 73 ...   2578                      dc.b    '2> Cast Magic.',$0D,$0A
0000514A= 33 3E 20 41 74 74 ...   2579                      dc.b    '3> Attack Swiftly.',$0D,$0A
0000515E= 34 3E 20 54 72 79 ...   2580                      dc.b    '4> Try Run.',$0D,$0A
0000516B= 35 3E 20 44 72 69 ...   2581                      dc.b    '5> Drink Health Potion.',$0D,$0A,0
00005185= 59 6F 75 20 65 73 ...   2582  escape_msg:             dc.b    'You escaped the monster!',$0D,$0A,0
000051A0= 59 6F 75 20 74 72 ...   2583  fail_escape_msg:        dc.b    'You try to run, but the monster catches and damages you!',$0D,$0A,0
000051DB= 59 6F 75 20 62 6F ...   2584  both_block_msg:         dc.b    'You both block, No damage is done!',$0D,$0A,0
00005200= 59 6F 75 20 62 6F ...   2585  both_cast_magic_msg:    dc.b    'You both cast magic at eachother, the spells clash in mid air! No damage',$0D,$0A
0000524A= 69 73 20 64 6F 6E ...   2586                          dc.b    'is done!',$0D,$0A,0
00005255= 59 6F 75 20 62 6F ...   2587  both_melee_msg:         dc.b    'You both lunge forward, metal clashes together, but no damage is done!',$0D,$0A,0
0000529E= 54 68 65 20 65 6E ...   2588  hit_against_block_msg:  dc.b    'The enemy blocks, you cast a cast a spell and it damages the monster!',$0D,$0A,0
000052E6= 54 68 65 20 65 6E ...   2589  hit_against_magic_msg:  dc.b    'The enemy begins to charge a spell but you lunge forward and hit it first,',$0D,$0A
00005332= 64 61 6D 61 67 69 ...   2590                          dc.b    'damaging the monster!',$0D,$0A,0
0000534A= 54 68 65 20 65 6E ...   2591  hit_against_melee_msg:  dc.b    'The enemy lunges forward but you block quicky, then counter, damaging the',$0D,$0A
00005395= 6D 6F 6E 73 74 65 ...   2592                          dc.b    'monster!',$0D,$0A,0
000053A0= 59 6F 75 20 6C 75 ...   2593  hit_by_counter_msg:     dc.b    'You lunge at the enemy but they block before you hit, they swing around quickly',$0D,$0A
000053F1= 61 6E 64 20 64 61 ...   2594                          dc.b    'and damage you!',$0D,$0A,0
00005403= 59 6F 75 20 74 72 ...   2595  hit_by_magic_msg:       dc.b    'You try to block the enemies attack, but they cast a spell that breaks through',$0D,$0A
00005453= 79 6F 75 72 20 64 ...   2596                          dc.b    'your defense and damages you!',$0D,$0A,0
00005473= 59 6F 75 20 74 72 ...   2597  hit_by_melee_msg:       dc.b    'You try to charge up a spell, but the enemy lunges forward and damages you!',$0D,$0A,0
000054C1= 48 65 61 6C 74 68 ...   2598  health_msg:             dc.b    'Health: ',0
000054CA= 20 4B 6E 69 67 68 ...   2599  knight_msg:         dc.b    ' Knight ',0
000054D3= 20 4D 61 67 65 20 00    2600  mage_msg:           dc.b    ' Mage ',0
000054DA= 20 52 6F 67 75 65 ...   2601  rogue_msg:          dc.b    ' Rogue ',0
000054E2= 45 6E 65 6D 79 00       2602  enemy_msg:          dc.b    'Enemy',0
000054E8= 50 6C 61 79 65 72 00    2603  player_msg:         dc.b    'Player',0
000054EF= 4C 65 76 65 6C 20 00    2604  level_msg:          dc.b    'Level ',0
000054F6= 54 6F 72 63 68 20 ...   2605  torch_msg:          dc.b    'Torch Life: ',0
00005503= 44 61 6D 61 67 65 ...   2606  damage_lvl_msg      dc.b    'Damage lvl: ',0
00005510= 49 6E 76 65 6E 74 ...   2607  inventory_msg:      dc.b    'Inventory:',0
0000551B= 2D 20 47 6F 6C 64 ...   2608  gold_msg:           dc.b    '- Gold ',0
00005523= 2D 20 4B 65 79 20 00    2609  key_msg:            dc.b    '- Key ',0
0000552A= 2D 20 50 6F 74 69 ...   2610  potions_msg:        dc.b    '- Potion ',0
00005534= 2D 20 54 6F 72 63 ...   2611  torches_msg:        dc.b    '- Torch ',0
0000553D= 2D 20 44 61 6D 61 ...   2612  damage_up_msg:      dc.b    '- Damage Upgrades ',0
00005550= 54 68 65 20 6D 6F ...   2613  battle_won_msg:     dc.b    'The monster collapses at your feet. It is dead!',$0D,$0A,0
00005582= 28 00                   2614  bracket_open_msg:   dc.b    '(',0
00005584= 29 00                   2615  bracket_close_msg:  dc.b    ')',0
00005586= 59 6F 75 20 66 65 ...   2616  death_msg:          dc.b    'You feel your last breath of air leave your lungs...',$0D,$0A
000055BC= 59 6F 75 72 20 6B ...   2617                      dc.b    'Your knees hit the ground...',$0D,$0A
000055DA= 59 6F 75 20 68 61 ...   2618                      dc.b    'You have died.',$0D,$0A,0
000055EB= 59 6F 75 20 66 65 ...   2619  win_msg:            dc.b    'You feel the outside breeze hit your face...',$0D,$0A
00005619= 59 6F 75 20 68 61 ...   2620                      dc.b    'You have escaped the castle!',$0D,$0A,0
00005638= 59 6F 75 20 64 72 ...   2621  take_potion_msg:    dc.b    'You drink a health potion...',$0D,$0A
00005656= 33 20 68 65 61 6C ...   2622                      dc.b    '3 health points restored!',$0D,$0A,0
00005672= 59 6F 75 20 61 72 ...   2623  no_potions_msg:     dc.b    'You are out of potions.',$0D,$0A,0
0000568C= 22 4C 6F 6F 6B 69 ...   2624  shop_enter_msg:     dc.b    '"Looking to lighten that coin pouch of yours?!"',$0D,$0A,0
000056BE= 31 3E 20 42 75 79 ...   2625  shop_msg:           dc.b    '1> Buy Potion. (5g)',$0D,$0A
000056D3= 32 3E 20 42 75 79 ...   2626                      dc.b    '2> Buy Key. (15g)',$0D,$0A
000056E6= 33 3E 20 42 75 79 ...   2627                      dc.b    '3> Buy Torch. (10g)',$0D,$0A
000056FB= 34 3E 20 42 75 79 ...   2628                      dc.b    '4> Buy Damage Upgrade. (20g)',$0D,$0A
00005719= 35 3E 20 4C 65 61 ...   2629                      dc.b    '5> Leave Shop.',$0D,$0A,0
0000572A= 22 50 6C 65 61 73 ...   2630  leave_shop_msg:     dc.b    '"Pleasure doing business with you."',$0D,$0A,0
00005750= 22 2E 2E 2E 41 6E ...   2631  buy_item_msg:       dc.b    '"...And its yours!"',$0D,$0A,0
00005766= 53 68 6F 70 20 53 ...   2632  shop_stock_msg:     dc.b    'Shop Stock:',0
00005772= 22 4E 6F 74 20 65 ...   2633  no_money_msg:       dc.b    '"Not enough gold, traveller."',$0D,$0A,0
00005792= 22 53 6F 72 72 79 ...   2634  no_item_msg:        dc.b    '"Sorry, I dont have any of them left..."',$0D,$0A,0
000057BD= 54 68 65 20 64 61 ...   2635  no_torch_msg:       dc.b    'The darkness burns...',$0D,$0A,0
000057D5= 59 6F 75 20 70 69 ...   2636  pickup_loot_msg:    dc.b    'You picked up a loot pile',$0D,$0A,0
000057F1= 2B 20 47 6F 6C 64 ...   2637  pickup_gold_msg:    dc.b    '+ Gold ',0
000057F9= 2B 20 50 6F 74 69 ...   2638  pickup_potion_msg:  dc.b    '+ Potion ',0
00005803= 2B 20 4B 65 79 20 00    2639  pickup_key_msg:     dc.b    '+ Key ',0
0000580A= 2B 20 54 6F 72 63 ...   2640  pickup_torch_msg:   dc.b    '+ Torch life ',0
00005818= 43 6C 61 73 73 20 ...   2641  double_damage_msg:  dc.b    'Class Bonus - Double Damage!',$0D,$0A,0
00005837= 54 68 65 20 64 6F ...   2642  locked_door_msg:    dc.b    'The door seems locked, you have a key that might fit it.',$0D,$0A
00005871= 44 6F 20 79 6F 75 ...   2643                      dc.b    'Do you want to try unlock it?',$0D,$0A,$0D,$0A
00005892= 31 3E 20 59 65 73 ...   2644                      dc.b    '1> Yes. (-1 key)',$0D,$0A
000058A4= 32 3E 20 4E 6F 2E ...   2645                      dc.b    '2> No.',$0D,$0A,0
000058AD= 54 68 65 20 64 6F ...   2646  unlocked_door_msg:  dc.b    'The door swings open, the key lodged stuck in the keyhole.',$0D,$0A,0
000058EA= 54 68 65 20 64 6F ...   2647  blocked_door_msg:   dc.b    'The door seems solid, it wont budge.',$0D,$0A,0
00005911= 20 20 20 20 20 20 ...   2648  graveyard_msg:  dc.b    '      ,-=-.       ______     _',$0D,$0A
00005931= 20 20 20 20 20 2F ...   2649                  dc.b    '     /  +  \     />----->  _|1|_',$0D,$0A
00005953= 20 20 20 20 20 7C ...   2650                  dc.b    '     | ~~~ |    // -/- /  |_ H _|',$0D,$0A
00005976= 20 20 20 20 20 7C ...   2651                  dc.b    '     |R.I.P|   //  /  /     |S|',$0D,$0A
00005997= 5C 76 56 2C 2C 7C ...   2652                  dc.b    '\vV,,|_____|V,//_____/VvV,v,|_|/,,vhjwv/,',$0D,$0A,0
000059C3= 20 20 20 20 20 20 ...   2653  skeleton_msg:   dc.b    '           .-.',$0D,$0A
000059D3= 20 2F 5C 5F 5F 5F ...   2654                  dc.b    ' /\____/\ (o.o)',$0D,$0A
000059E4= 7C 20 20 5F 7C 7C ...   2655                  dc.b    '|  _||_  | |=|',$0D,$0A
000059F4= 20 5C 2F 20 7C 7C ...   2656                  dc.b    ' \/ || \/ __|__',$0D,$0A
00005A05= 20 20 20 20 7C 7C ...   2657                  dc.b    '    ||\_//.=|=.\\',$0D,$0A
00005A18= 20 20 20 20 7C 7C ...   2658                  dc.b    '    ||\_/ .=|=. \\',$0D,$0A
00005A2C= 20 20 20 20 7C 7C ...   2659                  dc.b    '    ||    .=|=. //',$0D,$0A
00005A40= 20 20 20 20 7C 7C ...   2660                  dc.b    '    ||    (_=_)//',$0D,$0A
00005A53= 20 20 20 20 7C 7C ...   2661                  dc.b    '    ||   (:| |:)',$0D,$0A
00005A65= 20 20 20 20 7C 7C ...   2662                  dc.b    '    ||    || ||',$0D,$0A
00005A76= 20 20 20 20 7C 7C ...   2663                  dc.b    '    ||    () ()',$0D,$0A
00005A87= 20 20 20 20 2F 5C ...   2664                  dc.b    '    /\    || ||',$0D,$0A
00005A98= 20 20 20 20 7C 7C ...   2665                  dc.b    '    ||    || ||',$0D,$0A
00005AA9= 20 20 20 20 5C 2F ...   2666                  dc.b    '    \/  ==   ==',$0D,$0A,0
00005ABB= 20 20 20 20 20 20 ...   2667  merchant_msg:   dc.b    '         ____',$0D,$0A
00005ACA= 20 20 20 20 20 20 ...   2668                  dc.b    '        |    |',$0D,$0A
00005ADA= 20 20 20 20 20 20 ...   2669                  dc.b    '      --:<<>>:--',$0D,$0A
00005AEC= 20 20 20 20 20 20 ...   2670                  dc.b    '        :~_~ :',$0D,$0A
00005AFC= 20 20 20 20 20 20 ...   2671                  dc.b    '        _:"":\___',$0D,$0A
00005B0F= 20 20 5F 5F 5F 5F ...   2672                  dc.b    '  ____./ :::     \._',$0D,$0A
00005B25= 3C 3C 3D 29 20 20 ...   2673                  dc.b    '<<=)           \    :',$0D,$0A
00005B3C= 20 5C 2F 2D 2D 2D ...   2674                  dc.b    ' \/---/\_      /\._. ',$0D,$0A
00005B53= 20 7C 7C 20 20 20 ...   2675                  dc.b    ' ||       \====:_ ""',$0D,$0A
00005B69= 20 7C 7C 20 20 20 ...   2676                  dc.b    ' ||      ./     \\',$0D,$0A
00005B7D= 20 7C 7C 20 20 20 ...   2677                  dc.b    ' ||     :       :',$0D,$0A
00005B90= 20 7C 7C 20 20 20 ...   2678                  dc.b    ' ||    /   :    \',$0D,$0A
00005BA3= 20 7C 7C 20 20 20 ...   2679                  dc.b    ' ||   :   .      \.',$0D,$0A
00005BB8= 20 7C 7C 20 20 20 ...   2680                  dc.b    ' ||   :  : :      :',$0D,$0A
00005BCD= 20 7C 7C 20 20 20 ...   2681                  dc.b    ' ||   :__:-:__.;--',$0D,$0A,0
00005BE2= 20 20 20 20 20 20 ...   2682  castle_msg:     dc.b    '                T~~',$0D,$0A
00005BF7= 20 20 20 20 20 20 ...   2683                  dc.b    '                |',$0D,$0A
00005C0A= 20 20 20 20 20 20 ...   2684                  dc.b    '               /"\',$0D,$0A
00005C1E= 20 20 20 20 20 20 ...   2685                  dc.b    '       T~~     |.| T~~',$0D,$0A
00005C36= 20 20 20 54 7E 7E ...   2686                  dc.b    '   T~~ |    T~ WWWW|',$0D,$0A
00005C4C= 20 20 20 7C 20 20 ...   2687                  dc.b    '   |  /"\   |  |  |/\T~~',$0D,$0A
00005C66= 20 20 2F 22 5C 20 ...   2688                  dc.b    '  /"\ WWW  /"\ |. |WW|',$0D,$0A
00005C7E= 20 57 57 57 57 57 ...   2689                  dc.b    ' WWWWW/\| /   \|./\|/"\',$0D,$0A
00005C97= 20 7C 20 20 20 2F ...   2690                  dc.b    ' |   /__\/]WWW[\/__\WWWW',$0D,$0A
00005CB1= 20 7C 22 20 20 57 ...   2691                  dc.b    ' |"  WWWW.|I_I|.WWWW.   |',$0D,$0A
00005CCC= 20 7C 20 20 20 7C ...   2692                  dc.b    ' |   |. |/  -  \|. |.  |',$0D,$0A
00005CE6= 20 7C 2E 20 20 7C ...   2693                  dc.b    ' |.  |  |LI=H=LI|. |   |',$0D,$0A
00005D00= 20 7C 20 20 20 7C ...   2694                  dc.b    ' |   |. | |[_]| |  |.  |',$0D,$0A
00005D1A= 20 7C 20 20 20 7C ...   2695                  dc.b    ' |   |  |_|###|_|  |   |',$0D,$0A
00005D34= 20 20 2D 2D 2D 20 ...   2696                  dc.b    '  --- -- -/___\- -- --- ',$0D,$0A,0
00005D4F                          2697                  
00005D4F                          2698      end start

No errors detected
No warnings generated


SYMBOL TABLE INFORMATION
Symbol-name         Value
-------------------------
ALIVE               3
BATTLE_WON_MSG      5550
BLANK_MSG           499A
BLANK_TILE          507B
BLOCKED_DOOR        3B8E
BLOCKED_DOOR_MSG    58EA
BLOCKED_TILE        508B
BLOCK_COUNTER       3BE8
BLUE                FF0000
BOTH_BLOCK          3C80
BOTH_BLOCK_MSG      51DB
BOTH_CAST_MAGIC     3C92
BOTH_CAST_MAGIC_MSG  5200
BOTH_MELEE          3CA4
BOTH_MELEE_MSG      5255
BOTH_TILE           507F
BRACKET_CLOSE_MSG   5584
BRACKET_OPEN_MSG    5582
BROWN               507090
BUY_ITEM_MSG        5750
BUY_KEY             3E30
BUY_POTION          3DFE
BUY_TORCH           3E64
CASTLE_MSG          5BE2
CAST_MAGIC          3C02
CHANGE_FONT_COLOUR  3FC2
CHECK_BLOCKED       3B20
CHECK_FOR_A_DOOR    3B40
CHECK_FOR_DOOR      42AA
CHECK_FOR_DOORS     428A
CHECK_FOR_ENEMIES   41A8
CHECK_FOR_ENEMY     41CA
CHECK_FOR_LOOT      4106
CHECK_FOR_LOOT_PILES  40E2
CHECK_FOR_PLAYER    4160
CHECK_FOR_SHOP      4240
CHECK_FOR_SHOPS     421E
CHECK_FOR_WIN_POINT  42E8
CLASS               2
CLEAR_SCREEN        3964
COLON_MSG           4DAE
COMBAT              3BA6
COMBAT_MSG          5123
CONTINUE_MSG        505D
CRLF                473A
CSR_POS_BATTLE_E    1901
CSR_POS_BATTLE_P    3401
CSR_POS_MOVE        3201
CSR_POS_SHOP_P      3401
CSR_POS_SHOP_S      1801
DAMAGE              1
DAMAGE_ENEMY        3D46
DAMAGE_LVL_MSG      5503
DAMAGE_PLAYER       3D80
DAMAGE_UP_MSG       553D
DAMAGE_UP_PRICE     14
DEATH_MSG           5586
DECORATE            3946
DECREMENT_TORCH     3FB4
DISPLAY_KNIGHT      3798
DISPLAY_MAGE        37A6
DISPLAY_ROGUE       37B4
DISPLAY_ROLE        3784
DOOR_MARK           5099
DOOR_MAX            3
DOUBLE_DAMAGE_ENEMY  3D56
DOUBLE_DAMAGE_MSG   5818
DOUBLE_DAMAGE_PLAYER  3D96
DRAW                34A2
DRAW_BATTLE_INFO    36B0
DRAW_BLANK_TILE     40D4
DRAW_BLOCKED_TILE   409C
DRAW_BOTH_TILE      40AA
DRAW_CASTLE         34DE
DRAW_DOOR           42B4
DRAW_ENEMY          41DE
DRAW_GRAVEYARD      34D0
DRAW_HUD            34FA
DRAW_ITEM_NUMBER    38F6
DRAW_LEFT_TILE      40B8
DRAW_LOOP           3FE2
DRAW_LOOT           411E
DRAW_MAP_LEGEND     35C2
DRAW_MERCHANT       34EC
DRAW_PLAYER         4168
DRAW_PLAYER_INFO    351A
DRAW_RIGHT_TILE     40C6
DRAW_SHOP           424A
DRAW_SHOP_INFO      37C2
DRAW_SKELETON       34C2
DRAW_TILE           4038
DRAW_WIN_POINT      42F4
ENCOUNTER_MSG       50EB
END                 3006
ENDL                3992
ENEMIES_CHECK       3362
ENEMIES_LOOP        3370
ENEMY_ALIVE_CHECK   346A
ENEMY_CHECK         338E
ENEMY_DIED          3474
ENEMY_MARK          5091
ENEMY_MAX           2
ENEMY_MSG           54E2
ENTER_COMBAT        33C2
ENTER_SHOP          3442
ESCAPE_ATTACK       3C46
ESCAPE_MSG          5185
EXIT                0
FAIL_ESCAPE         3C64
FAIL_ESCAPE_MSG     51A0
FAKE_GAMESTATE_MSG  4DD8
FIRST_DOOR          6FE0
FIRST_ENEMY         6000
FIRST_LOOT          7000
FIRST_SHOP          6500
FONT                1090000
GAME                3000
GAMELOOP            3194
GAMEPLAY            3918
GAME_STATE          5FF3
GET_CURSOR_POS      3FD4
GOLD                FFFF
GOLD_MSG            551B
GRAVEYARD_MSG       5911
GREEN               FF00
HEALTH_MSG          54C1
HIT_AGAINST_BLOCK   3CB6
HIT_AGAINST_BLOCK_MSG  529E
HIT_AGAINST_MAGIC   3CCC
HIT_AGAINST_MAGIC_MSG  52E6
HIT_AGAINST_MELEE   3CE2
HIT_AGAINST_MELEE_MSG  534A
HIT_BY_COUNTER      3CF8
HIT_BY_COUNTER_MSG  53A0
HIT_BY_MAGIC        3D12
HIT_BY_MAGIC_MSG    5403
HIT_BY_MELEE        3D2C
HIT_BY_MELEE_MSG    5473
INPUT               311E
INPUT_ERROR_MSG     4DB1
INPUT_NUMS_MSG      4D95
INVALID_INPUT       3186
INVENTORY_MSG       5510
IN_A_DOOR           3B4A
KEY_MSG             5523
KEY_PRICE           F
KNIGHT_MSG          54CA
KNIGHT_ROLE_MSG     4DF1
KNIGHT_SELECT       3062
KNIGHT_SPEC_MSG     4E43
LEAVE_SHOP          3ECE
LEAVE_SHOP_MSG      572A
LEFT_TILE           5083
LEVEL_MSG           54EF
LIFE_PER_TORCH      F
LOCKED_DOOR_MSG     5837
LOOP_COLUMNS        400E
LOOP_DOORS          4298
LOOP_ENEMIES        41B6
LOOP_LOOT_PILES     40F0
LOOP_MSG            4998
LOOP_ROWS           3FF8
LOOP_SHOPS          422C
LOOP_THRU_DOORS     3B2E
LOOT_MARK           5097
LOOT_PILES_CHECK    3248
LOOT_PILE_CHECK     326A
LOOT_PILE_LOOP      3256
L_ACTIVE            6
MAGE_MSG            54D3
MAGE_ROLE_MSG       4E91
MAGE_SELECT         3092
MAGE_SPEC_MSG       4EDB
MANAGE_INPUT        316C
MANAGE_TORCH        332E
MAP_DOOR_MSG        50DC
MAP_ENEMY_MSG       50B1
MAP_LEGEND_MSG      509B
MAP_LENGTH          F
MAP_LOOT_MSG        50CF
MAP_PLAYER_MSG      50A7
MAP_SHOP_MSG        50C7
MAP_START_POINT     8080
MAP_WIN_POINT_MSG   50BA
MELEE_ATTACK        3C1C
MERCHANT_MSG        5ABB
MOVEMENT            39A8
MOVEMENT_BLOCKED    3B0E
MOVEMENT_BLOCKED_MSG  5042
MOVEMENT_CHECKS     322C
MOVEMENT_MSG        4FB0
MOVE_EAST           3AC6
MOVE_EAST_MSG       5017
MOVE_NORTH          39EA
MOVE_NORTH_MSG      5008
MOVE_SOUTH          3A34
MOVE_SOUTH_MSG      5025
MOVE_WEST           3A7E
MOVE_WEST_MSG       5034
NEXT_CURSOR_POS     38E8
NO_ITEM_MSG         5792
NO_MONEY            3EEC
NO_MONEY_MSG        5772
NO_POTIONS          3FA4
NO_POTIONS_MSG      5672
NO_SHOP_DAMAGE_UP   3F3A
NO_SHOP_KEYS        3F12
NO_SHOP_POTIONS     3EFE
NO_SHOP_TORCHES     3F26
NO_TORCH_MSG        57BD
OPEN_DOOR_POS       1000
OUT                 394E
PICKUP_GOLD_MSG     57F1
PICKUP_KEY_MSG      5803
PICKUP_LOOT         3280
PICKUP_LOOT_MSG     57D5
PICKUP_POTION_MSG   57F9
PICKUP_TORCH_MSG    580A
PICK_ROLE           301C
PICK_ROLE_MSG       4C1E
PLAYER              5FF0
PLAYER_DEAD         31D4
PLAYER_MARK         508F
PLAYER_MSG          54E8
PLA_CLASS           5FF2
PLA_DAMAGE          5FF1
PLA_GOLD            5FF8
PLA_KEYS            5FFA
PLA_POTIONS         5FF9
PLA_P_POS           5FF6
PLA_TORCH           5FFB
POSITION            4
POTIONS_MSG         552A
POTION_PRICE        5
PRESS_CONTINUE      3F4E
PURPLE              F000F0
RANDOM_NUMBER       3F66
RED                 FF
REPLAY              3970
REPLAY_MSG          4ADC
RETURN              3F80
RIGHT_TILE          5087
ROGUE_MSG           54DA
ROGUE_ROLE_MSG      4F1E
ROGUE_SELECT        30C2
ROGUE_SPEC_MSG      4F66
ROLE_INPUT          3044
SETUP_ENEMIES       463A
SETUP_LOOT          4678
SETUP_PLAYER        46C0
SETUP_SHOPS         46FC
SETUP_WORLD         4334
SHOP                3DC2
SHOPS_CHECK         33EC
SHOPS_LOOP          33FA
SHOP_CHECK          3418
SHOP_ENTER_MSG      568C
SHOP_MARK           5095
SHOP_MAX            2
SHOP_MSG            56BE
SHOP_STOCK_MSG      5766
SKELETON_MSG        59C3
START               1000
S_DAMAGE_IN         5
S_KEYS              3
S_POTIONS           2
S_TORCHES           4
TAKE_POTION         3F82
TAKE_POTION_MSG     5638
TORCHES_MSG         5534
TORCH_MSG           54F6
TORCH_PRICE         A
TRY_RUN             3C36
TUTORIAL_INTRO      30F2
TUTORIAL_MSG        49EE
UNLOCKED_DOOR_MSG   58AD
UNLOCK_DOOR         3B74
UPDATE              31AA
UPGRADE_DMG         3E9A
WAKE_UP_MSG         4B06
WALL_COLLISIONS     39C8
WELCOME             300A
WELCOME_MSG         473D
WHITE               FFFFFF
WIN_MSG             55EB
WIN_POINT           8156
WIN_POINT_MARK      5093
WON_GAME            31FE

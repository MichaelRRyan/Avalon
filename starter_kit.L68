00001000 Starting Address
Assembler used: EASy68K Editor/Assembler v5.16.01
Created On: 21/03/2019 22:41:39

00000000                             1  *-------------------------------------------------------
00000000                             2  * Author         : Michael Rainsford Ryan
00000000                             3  * Student Number : C00239510
00000000                             4  * Date Created   : 21/01/2019
00000000                             5  * Description    : A simplified, offline clone of the
00000000                             6  *                : online game "Avalon".
00000000                             7  * Issues/Bugs    : None currenty.
00000000                             8  *-------------------------------------------------------
00000000                             9  
00001000                            10      org $1000
00001000                            11  
00001000                            12  *-------------------------------------------------------
00001000                            13  *Choose to be a Worker or a God 
00001000                            14  *https://www.avalon-rpg.com/
00001000                            15  *-------------------------------------------------------
00001000                            16  
00001000                            17  *-------------------------------------------------------
00001000                            18  *-------------------Game Information-------------------
00001000                            19  *-------------------------------------------------------
00001000                            20  *A6 is used for player coordinates
00001000                            21  *A5 is used for enemy coordinates when in combat or looping through them
00001000                            22  *A5 is used for shops when in shop screen or when looping through them
00001000                            23  *A4 occasionally used for displaying the inventory
00001000                            24  *D5 is used occasionally for input range
00001000                            25  *$5FF0 holds player information
00001000                            26  *$6000 to $64F0 holds enemies
00001000                            27  *$6500 to $6FF0 holds shops
00001000                            28  *$7000 to $7500 holds loot
00001000                            29  *$8000 to $9000 holds maps
00001000                            30  
00001000                            31  *Enemies:
00001000                            32  *Byte:  Name:
00001000                            33  *0      Health
00001000                            34  *1      Damage/level
00001000                            35  *2      enemy type (Knight, mage, rogue)
00001000                            36  *3      Alive state (1 == alive, 0 == dead)
00001000                            37  *4 & 5  Coordinates
00001000                            38  
00001000                            39  *Player:
00001000                            40  *Byte:  Name:
00001000                            41  *0      Health
00001000                            42  *1      Damage/level
00001000                            43  *2      Class (Knight, mage, rogue)
00001000                            44  *3      Game state
00001000                            45  *4-5+A6 Coordinates
00001000                            46  *6-7    Last coordinates
00001000                            47  *8      Gold
00001000                            48  *9      Potions
00001000                            49  *A      Keys
00001000                            50  *B      Torch life
00001000                            51  
00001000                            52  *Shops:
00001000                            53  *Byte:  Name:
00001000                            54  *0-1    Position
00001000                            55  *2      Potions
00001000                            56  *3      Keys
00001000                            57  *4      Torches
00001000                            58  *5      Damage increase
00001000                            59  
00001000                            60      
00001000                            61  *Game state : 0 = Pick role/intro | 5 = Move around | 6 = Combat | 7 = Shop | 64 = End game
00001000                            62  *Class      : 1 corresponds to knight - 2 corresponds to mage - 3 corresponds to rogue
00001000                            63  
00001000                            64  
00001000                            65  *-------------------------------------------------------
00001000                            66  *Validation values to be used, modify as needed
00001000                            67  *Add additional validation values as required
00001000                            68  *-------------------------------------------------------
00001000  =00000000                 69  exit        EQU 0      used to exit assembly program
00001000                            70  
00001000                            71  * Text display
00001000  =000000FF                 72  RED         EQU $000000FF   Red colour value
00001000  =0000FF00                 73  GREEN       EQU $0000FF00   Green colour value
00001000  =00FF0000                 74  BLUE        EQU $00FF0000   Blue colour value
00001000  =00FFFFFF                 75  WHITE       EQU $00FFFFFF   White colour value
00001000  =00F000F0                 76  PURPLE      EQU $00F000F0   Purple colour value
00001000  =01090000                 77  FONT        EQU $01090000   Font value
00001000                            78  
00001000                            79  * Player
00001000  =00005FF0                 80  PLAYER      EQU $5FF0       Memory address for player information and health
00001000  =00005FF1                 81  PLA_DAMAGE  EQU $5FF1       Memory address for player damage value
00001000  =00005FF2                 82  PLA_CLASS   EQU $5FF2       The memory address for the player class
00001000  =00005FF3                 83  GAME_STATE  EQU $5FF3       The memory address of the game state
00001000  =00005FF6                 84  PLA_P_POS   EQU $5FF6       Memory location of the player's previous position
00001000  =00005FF8                 85  PLA_GOLD    EQU $5FF8       Memory address for player gold
00001000  =00005FF9                 86  PLA_POTIONS EQU $5FF9       Memory address for player potions
00001000  =00005FFA                 87  PLA_KEYS    EQU $5FFA       Memory address for player keys
00001000  =00005FFB                 88  PLA_TORCH   EQU $5FFB       Memory address for player torch life
00001000                            89  
00001000                            90  * Enemy
00001000  =00006000                 91  FIRST_ENEMY EQU $6000       Memory location of the first enemy
00001000  =00000002                 92  ENEMY_MAX   EQU 2           Number of enemies in the game
00001000                            93  
00001000  =00000001                 94  DAMAGE      EQU 1           The number of bytes to move from the enemy before reaching the damage
00001000  =00000002                 95  CLASS       EQU 2           The number of bytes to move from the enemy before reaching the class
00001000  =00000003                 96  ALIVE       EQU 3           The number of bytes to move from the enemy before reaching the alive state
00001000  =00000004                 97  POSITION    EQU 4           The number of bytes to move from the enemy before reaching the position
00001000                            98  
00001000                            99  * Shop
00001000  =00006500                100  FIRST_SHOP  EQU $6500       Memory location of the first shop
00001000  =00000002                101  SHOP_MAX    EQU 2           Number of shops in the game
00001000                           102  
00001000  =00000002                103  S_POTIONS   EQU 2           The number of bytes to move from the shop root before reaching the potions
00001000  =00000003                104  S_KEYS      EQU 3           The number of bytes to move from the shop root before reaching the keys
00001000  =00000004                105  S_TORCHES   EQU 4           The number of bytes to move from the shop root before reaching the torches
00001000  =00000005                106  S_DAMAGE_IN EQU 5           The number of bytes to move from the shop root before reaching the damage increase
00001000                           107  
00001000                           108  * HUD
00001000  =00003201                109  CSR_POS_MOVE    EQU $3201   The cursor position to draw the HUD to when in movement state
00001000  =00002001                110  CSR_POS_BATTLE  EQU $2001   The cursor position to draw the HUD to when in battle state
00001000  =00001801                111  CSR_POS_SHOP_S  EQU $1801   The cursor position to draw the HUD to when in shop state for shop info
00001000  =00003401                112  CSR_POS_SHOP_P  EQU $3401   The cursor position to draw the HUD to when in shop state for player info
00001000                           113  
00001000                           114  * Game
00001000  =00008156                115  WIN_POINT   EQU $8156       The position the player has to get to to win
00001000                           116  
00001000  =00000005                117  POTION_PRICE    EQU 5       The price in gold for a potion
00001000  =0000000F                118  KEY_PRICE       EQU 15      The price in gold for a key
00001000  =0000000A                119  TORCH_PRICE     EQU 10      The price in gold for a torch
00001000  =00000014                120  DAMAGE_UP_PRICE EQU 20      The price in gold for a damage upgrade
00001000                           121  
00001000  =0000000F                122  LIFE_PER_TORCH  EQU 15      The life value each torch has
00001000                           123  
00001000  =00008080                124  MAP_START_POINT EQU $8080   The starting coordinates the map draws at
00001000  =0000000F                125  MAP_LENGTH      EQU 15      The number of tiles downwords the map will draw
00001000                           126  
00001000                           127  
00001000                           128  *Start of Game
00001000                           129  start:
00001000  6100 3278                130      bsr     setup_player
00001004  6100 2F44                131      bsr     setup_world
00001008  6100 3232                132      bsr     setup_enemies
0000100C  6100 32A8                133      bsr     setup_shops
00001010                           134  
00001010  6100 1FF8                135      bsr     welcome    branch to the welcome subroutine
00001014  6100 2C40                136      bsr     press_continue
00001018  6100 1FE6                137      bsr     game       branch to the game subroutine
0000101C                           138  *Game loop
00003000                           139      org     $3000      the rest of the program is to be located from 3000 onwards
00003000                           140  
00003000                           141  *-------------------------------------------------------
00003000                           142  *-------------------Game Subroutine---------------------
00003000                           143  *-------------------------------------------------------
00003000                           144  game:
00003000  6100 016E                145      bsr     gameloop   branch to gameloop subroutine
00003004  4E75                     146      rts                return from game: subroutine
00003006                           147            
00003006                           148  end:
00003006  FFFF FFFF                149      simhalt
0000300A                           150  
0000300A                           151  *-------------------------------------------------------
0000300A                           152  *-------------------Welcome Subroutine------------------
0000300A                           153  *-------------------------------------------------------
0000300A                           154  welcome:
0000300A  43F9 000042F7            155      lea     welcome_msg,A1  assign message to address register A1
00003010  103C 000E                156      move.b  #14,D0          move literal 14 to DO
00003014  4E4F                     157      trap    #15             trap and interpret value in D0
00003016  6100 0762                158      bsr     endl            branch to endl subroutine
0000301A                           159      
0000301A  4E75                     160      rts                     return from welcome: subroutine
0000301C                           161  
0000301C                           162  *-------------------------------------------------------
0000301C                           163  *-------------------Role Picking Subroutine------------------
0000301C                           164  *-------------------------------------------------------
0000301C                           165  pick_role:
0000301C                           166  
0000301C  43F9 0000466C            167      lea     wake_up_msg,A1  assign message to address register A1
00003022  103C 000E                168      move.b  #14,D0          move literal 14 to DO
00003026  4E4F                     169      trap    #15             trap and interpret value in D0
00003028  6100 0750                170      bsr     endl            branch to endl subroutine
0000302C                           171      
0000302C  43F9 00004784            172      lea     pick_role_msg,A1 assign message to address register A1
00003032  103C 000E                173      move.b  #14,D0           move literal 14 to DO
00003036  4E4F                     174      trap    #15              trap and interpret value in D0
00003038                           175      
00003038  7A03                     176      move.l  #3,D5           Move the number 3 to D5 to tell the program how many options there are
0000303A                           177      
0000303A  6100 00E2                178      bsr     input           branch to the input subroutine
0000303E                           179      
0000303E  6100 0C16                180      bsr     press_continue          Pause the game until a key is pressed
00003042                           181      
00003042  4E75                     182      rts                     return from pick_role subroutine
00003044                           183      
00003044                           184  role_input:
00003044  11C1 5FF2                185      move.b  D1,PLA_CLASS    Move the role number to player class memory location to hold the class number
00003048                           186      
00003048                           187      *Give the player a message depending on the role chosen
00003048  B23C 0001                188      CMP.B   #1,D1
0000304C  6700 0014                189      BEQ     knight_select   Branch to knight message if role selected
00003050                           190      
00003050  B23C 0002                191      CMP.B   #2,D1
00003054  6700 003C                192      BEQ     mage_select     Branch to mage message if role selected
00003058                           193      
00003058  B23C 0003                194      CMP.B   #3,D1
0000305C  6700 0064                195      BEQ     rogue_select    Branch to rogue message if role selected
00003060                           196      
00003060  4E75                     197      rts
00003062                           198      
00003062                           199  knight_select:
00003062  43F9 00004957            200      lea     knight_role_msg,A1  assign message to address register A1
00003068  103C 000E                201      move.b  #14,D0              move literal 14 to DO
0000306C  4E4F                     202      trap    #15                 Display the knight message
0000306E                           203      
0000306E  223C 00F000F0            204      move.l  #PURPLE,D1          Load the purple colour
00003074  6100 0C54                205      bsr     change_font_colour  Change the font colour
00003078                           206      
00003078  43F9 000049A9            207      lea     knight_spec_msg,A1  assign message to address register A1
0000307E  103C 000E                208      move.b  #14,D0              move literal 14 to DO
00003082  4E4F                     209      trap    #15                 Display the knight message
00003084                           210      
00003084  223C 00FFFFFF            211      move.l  #WHITE,D1           Load the white colour
0000308A  6100 0C3E                212      bsr     change_font_colour  Change the font colour
0000308E                           213      
0000308E  6000 0062                214      bra     tutorial_intro      Branch to tutorial subroutine
00003092                           215  
00003092                           216  mage_select:
00003092  43F9 000049F7            217      lea     mage_role_msg,A1 a  ssign message to address register A1
00003098  103C 000E                218      move.b  #14,D0              move literal 14 to DO
0000309C  4E4F                     219      trap    #15                 Display the mage message
0000309E                           220      
0000309E  223C 00F000F0            221      move.l  #PURPLE,D1          Load the purple colour
000030A4  6100 0C24                222      bsr     change_font_colour  Change the font colour
000030A8                           223      
000030A8  43F9 00004A41            224      lea     mage_spec_msg,A1    assign message to address register A1
000030AE  103C 000E                225      move.b  #14,D0              move literal 14 to DO
000030B2  4E4F                     226      trap    #15                 Display the mage message
000030B4                           227      
000030B4  223C 00FFFFFF            228      move.l  #WHITE,D1           Load the white colour
000030BA  6100 0C0E                229      bsr     change_font_colour  Change the font colour
000030BE                           230      
000030BE  6000 0032                231      bra     tutorial_intro      Branch to tutorial subroutine
000030C2                           232  
000030C2                           233  rogue_select:
000030C2  43F9 00004A84            234      lea     rogue_role_msg,A1   Assign message to address register A1
000030C8  103C 000E                235      move.b  #14,D0              move literal 14 to DO
000030CC  4E4F                     236      trap    #15                 Display the rogue message
000030CE                           237      
000030CE  223C 00F000F0            238      move.l  #PURPLE,D1          Load the purple colour
000030D4  6100 0BF4                239      bsr     change_font_colour  Change the font colour
000030D8                           240      
000030D8  43F9 00004ACC            241      lea     rogue_spec_msg,A1   Assign message to address register A1
000030DE  103C 000E                242      move.b  #14,D0              move literal 14 to DO
000030E2  4E4F                     243      trap    #15                 Display the rogue message
000030E4                           244      
000030E4  223C 00FFFFFF            245      move.l  #WHITE,D1           Load the white colour
000030EA  6100 0BDE                246      bsr     change_font_colour  Change the font colour
000030EE                           247      
000030EE  6000 0002                248      bra     tutorial_intro      Branch to tutorial subroutine
000030F2                           249      
000030F2                           250  tutorial_intro:
000030F2  6100 0686                251      bsr     endl                Break to a new line
000030F6                           252  
000030F6  223C 000000FF            253      move.l  #RED,D1             Load the purple colour
000030FC  6100 0BCC                254      bsr     change_font_colour  Change the font colour
00003100                           255      
00003100  43F9 00004554            256      lea     tutorial_msg,A1     Load tutorial message to address register A1
00003106  103C 000E                257      move.b  #14,D0              move literal 14 to DO
0000310A  4E4F                     258      trap    #15                 Display the tutorial message
0000310C                           259      
0000310C  223C 00FFFFFF            260      move.l  #WHITE,D1           Load the white colour
00003112  6100 0BB6                261      bsr     change_font_colour  Change the font colour
00003116                           262      
00003116  11FC 0005 5FF3           263      move.b  #5,GAME_STATE       Change the game state to the movement state
0000311C                           264      
0000311C  4E75                     265      rts
0000311E                           266      
0000311E                           267  *-------------------------------------------------------
0000311E                           268  *---------Gameplay Input Values Subroutine--------------
0000311E                           269  *-------------------------------------------------------    
0000311E                           270  input:
0000311E  6100 065A                271      bsr     endl            Branch to end line subroutine
00003122                           272      
00003122  43F9 000048FB            273      lea     input_nums_msg,A1 assign message to address register A1
00003128  103C 000E                274      move.b  #14,D0          move literal 14 to DO
0000312C  4E4F                     275      trap    #15             Display the "enter number" message
0000312E                           276      
0000312E  2205                     277      move.l  D5,D1           Move the number of options to D1 to display it
00003130  103C 0003                278      move.b  #3,D0           move literal 3 to DO
00003134  4E4F                     279      trap    #15             Display the number in D1 to show the input range
00003136                           280      
00003136  43F9 00004914            281      lea     colon_msg,A1    assign message to address register A1
0000313C  103C 000E                282      move.b  #14,D0          move literal 14 to DO
00003140  4E4F                     283      trap    #15             Display a colon after the number range
00003142                           284      
00003142  103C 0004                285      move.b  #4,D0           Move the number 4 to D0
00003146  4E4F                     286      trap    #15             Take input
00003148                           287      
00003148                           288  manage_input:
00003148  B27C 0001                289      CMP     #1,D1           Check input against minimum value
0000314C  6D00 0014                290      BLT     invalid_input   Error if less than 1
00003150                           291      
00003150  B245                     292      CMP     D5,D1           Compare input against max value
00003152  6E00 000E                293      BGT     invalid_input   Error if more than max value
00003156                           294      
00003156  0C38 0000 5FF3           295      CMP.B   #0,GAME_STATE   Check which state the game is in
0000315C  6700 FEE6                296      BEQ     role_input      Branch to the manage input for the role picking
00003160                           297      
00003160  4E75                     298      rts                     Return out of subroutine
00003162                           299  
00003162                           300  invalid_input:
00003162  43F9 00004917            301      lea     input_error_msg,A1 assign message to address register A1
00003168  103C 000E                302      move.b  #14,D0          move literal 14 to DO
0000316C  4E4F                     303      trap    #15             Display the error message
0000316E                           304      
0000316E  60AE                     305      bra     input           Go back to taking input
00003170                           306  
00003170                           307  *-------------------------------------------------------
00003170                           308  *----------------Gameloop (main loop)-------------------
00003170                           309  *------------------------------------------------------- 
00003170                           310  gameloop:
00003170  6100 05D8                311      bsr     clear_screen    clears the screen  
00003174  6100 021E                312      bsr     draw            branch to draw screen subroutine
00003178  6100 0272                313      bsr     draw_hud
0000317C  6100 0008                314      bsr     update          branch to update game subroutine 
00003180  6100 057C                315      bsr     gameplay        branch to gameplay subroutine
00003184  60EA                     316      bra     gameloop        Continue looping the game loop     
00003186                           317  
00003186                           318  *-------------------------------------------------------
00003186                           319  *----------------Update Quest Progress------------------
00003186                           320  *  Complete Quest
00003186                           321  *------------------------------------------------------- 
00003186                           322  update:
00003186  0C38 0000 5FF0           323      CMP.B   #0,PLAYER           Check if the player health is zero
0000318C  6F00 0022                324      BLE     player_dead         Player is dead if health is zero or below
00003190                           325      
00003190  BDFC 00008156            326      CMP.L   #WIN_POINT,A6       Check if the player is standing on the win point
00003196  6700 0042                327      BEQ     won_game            Branch to the won game subroutine
0000319A                           328  
0000319A  0C38 0005 5FF3           329      CMP.B   #5,GAME_STATE       Check which state the game is in
000031A0  6700 0066                330      BEQ     movement_checks     Check for enemies and shops if in movement state
000031A4  0C38 0006 5FF3           331      CMP.B   #6,GAME_STATE       Check which state the game is in
000031AA  6700 01B0                332      BEQ     enemy_alive_check   Check if enemy is dead if in combat
000031AE                           333      
000031AE  4E75                     334      rts
000031B0                           335      
000031B0                           336  *-------------------------------------------------------
000031B0                           337  *---------------------Win or Lose----------------------- 
000031B0                           338  player_dead:
000031B0  6100 05C8                339      bsr     endl            Break to new line
000031B4                           340      
000031B4  43F9 0000507B            341      lea     death_msg,A1    Load the death message
000031BA  103C 000E                342      move.b  #14,D0          Move byte #14 to D0 for the trap command
000031BE  4E4F                     343      trap    #15             Display the loaded message
000031C0                           344  
000031C0  6100 0A94                345      bsr     press_continue  Pause to get input
000031C4  6100 0584                346      bsr     clear_screen    Clear the screen
000031C8  6100 01F8                347      bsr     draw_graveyard  Draw a graveyard
000031CC  6100 05AC                348      bsr     endl            Break to new line
000031D0  11FC 0040 5FF3           349      move.b  #64,GAME_STATE  Set the game state to end game
000031D6  6000 057E                350      bra     replay          Give the player the option to restart or quit
000031DA                           351      
000031DA                           352  won_game:
000031DA  6100 059E                353      bsr     endl            Break to new line
000031DE                           354      
000031DE  43F9 000050E0            355      lea     win_msg,A1      Load the win message
000031E4  103C 000E                356      move.b  #14,D0          Move byte #14 to D0 for the trap command
000031E8  4E4F                     357      trap    #15             Display the loaded message
000031EA                           358  
000031EA  6100 0A6A                359      bsr     press_continue  Pause to get input
000031EE  6100 055A                360      bsr     clear_screen    Clear the screen
000031F2  6100 0586                361      bsr     endl            Break to new line
000031F6  6100 01D8                362      bsr     draw_castle     Draw a castle
000031FA  6100 057E                363      bsr     endl            Break to new line
000031FE  11FC 0040 5FF3           364      move.b  #64,GAME_STATE  Set the game state to end game
00003204  6000 0550                365      bra     replay          Give the player the option to restart or quit
00003208                           366  
00003208                           367  *-------------------------------------------------------
00003208                           368  *--------------------Movement State--------------------- 
00003208                           369  movement_checks:
00003208  6100 0016                370      bsr     manage_torch    Check if the torch life is zero and if damage player if so  
0000320C  6100 0046                371      bsr     enemies_check   Check for enemies beside the player
00003210  0C38 0005 5FF3           372      CMP.B   #5,GAME_STATE   Compare the movement gamestate number with the current gamestate
00003216  6600 0A70                373      BNE     return          Return from the loop if the game is not in the movement state anymore
0000321A  6100 00C2                374      bsr     shops_check     Check for shops beside the player
0000321E                           375      
0000321E  4E75                     376      rts
00003220                           377  
00003220                           378  *---------------------Manage Torch----------------------
00003220                           379  manage_torch:
00003220  0C38 0000 5FFB           380      CMP.B   #0,PLA_TORCH    Compare the torch life with zero
00003226  6E00 0A60                381      BGT     return          Return if the torch life is greater than zero
0000322A                           382      
0000322A  5338 5FF0                383      sub.b   #1,PLAYER       Remove one health from the player
0000322E                           384      
0000322E  6100 054A                385      bsr     endl            Break to new line
00003232                           386      
00003232  223C 000000FF            387      move.l  #RED,D1
00003238  6100 0A90                388      bsr     change_font_colour  Change the font colour
0000323C                           389      
0000323C  43F9 000052BE            390      lea     no_torch_msg,A1 Load the no torch message into A1
00003242  103C 000E                391      move.b  #14,D0          Move the number literal 14 into D0 for trap command
00003246  4E4F                     392      trap    #15             Display the loaded message
00003248                           393      
00003248  223C 00FFFFFF            394      move.l  #WHITE,D1
0000324E  6100 0A7A                395      bsr     change_font_colour  Change the font colour
00003252                           396      
00003252  4E75                     397      rts                     Return from the subroutine
00003254                           398  
00003254                           399  *--------------------Enemy Checking--------------------- 
00003254                           400  enemies_check:
00003254  4BF8 6000                401      lea     FIRST_ENEMY,A5  Load the memory address of the first enemy
00003258  1A3C 0000                402      move.b  #0,D5           Move the starting enemy number to D5
0000325C  6100 0004                403      bsr     enemies_loop    Loop through all enemies
00003260  4E75                     404      rts                     Return from subroutine
00003262                           405      
00003262                           406  enemies_loop:
00003262  BA3C 0002                407      CMP.B   #ENEMY_MAX,D5   Compare the enemy number with the maximum enemy number
00003266  6C00 0A20                408      BGE     return          Return from the loop if the current enemy number is greater than or equal to the max
0000326A                           409  
0000326A  6100 0014                410      bsr     enemy_check     Check for an enemy
0000326E                           411      
0000326E  0C38 0005 5FF3           412      CMP.B   #5,GAME_STATE   Compare the movement gamestate number with the current gamestate
00003274  6600 0A12                413      BNE     return          Return from the loop if the game is not in the movement state anymore
00003278                           414      
00003278  5205                     415      add.b   #1,D5           Add to the current enemy number
0000327A  DAFC 000C                416      add.w   #12,A5          Add to the current enemy pointer to move to the next enemy (16 for next enemy - 4 to get back from position)
0000327E  60E2                     417      bra     enemies_loop    Keep looping the enemies
00003280                           418      
00003280                           419  
00003280                           420  enemy_check:
00003280  564D                     421      add.w   #ALIVE,A5       Move into enemy information to check if its alive
00003282  0C1D 0000                422      CMP.B   #0,(A5)+        Check if the enemy is alive
00003286  6700 0A00                423      BEQ     return          Return from the check if the enemy is dead
0000328A                           424      
0000328A  340E                     425      move.w  A6,D2           Move the player position to D2
0000328C                           426      
0000328C                           427      *Check if the player is beside an enemy
0000328C  0442 0010                428      sub.w   #16,D2          Check north
00003290  B455                     429      CMP.W   (A5),D2           
00003292  6700 0020                430      BEQ     enter_combat    Enter the player into combat
00003296                           431      
00003296  0642 0020                432      add.w   #32,D2          Check south
0000329A  B455                     433      CMP.W   (A5),D2           
0000329C  6700 0016                434      BEQ     enter_combat    Enter the player into combat
000032A0                           435      
000032A0  0442 0011                436      sub.w   #17,D2          Check west
000032A4  B455                     437      CMP.W   (A5),D2           
000032A6  6700 000C                438      BEQ     enter_combat    Enter the player into combat
000032AA                           439      
000032AA  5442                     440      add.w   #2,D2           Check east
000032AC  B455                     441      CMP.W   (A5),D2           
000032AE  6700 0004                442      BEQ     enter_combat    Enter the player into combat
000032B2                           443      
000032B2  4E75                     444      rts     Return if not touching an enemy
000032B4                           445      
000032B4                           446  enter_combat:
000032B4  594D                     447      sub.w   #4,A5               Get the memory address of the enemy opposed to it's position
000032B6  11FC 0006 5FF3           448      move.b  #6,GAME_STATE       Move to combat state
000032BC                           449      
000032BC  6100 04BC                450      bsr     endl                Line break
000032C0                           451      
000032C0  43F9 00004BFD            452      LEA     encounter_msg,A1    Load the encounter message int A1
000032C6  103C 000E                453      move.b  #14,D0              Move #14 to D0 to display message
000032CA  4E4F                     454      trap    #15                 Display the loaded message
000032CC                           455      
000032CC  6100 0988                456      bsr     press_continue      Branch to the press to continue subroutine
000032D0                           457      
000032D0  6100 0478                458      bsr     clear_screen        Clear the screen
000032D4                           459      
000032D4  6100 00DE                460      bsr     draw_skeleton       Draw the enemy
000032D8  6100 022E                461      bsr     draw_battle_info    Draw the info
000032DC                           462      
000032DC  4E75                     463      rts
000032DE                           464        
000032DE                           465  *--------------------Shop Checking----------------------
000032DE                           466  shops_check:
000032DE  4BF8 6500                467      lea     FIRST_SHOP,A5   Load the memory address of the first shop
000032E2  1A3C 0000                468      move.b  #0,D5           Move the starting shop number to D5
000032E6  6100 0004                469      bsr     shops_loop      Loop through all shops
000032EA  4E75                     470      rts                     Return from subroutine
000032EC                           471      
000032EC                           472  shops_loop:
000032EC  BA3C 0002                473      CMP.B   #SHOP_MAX,D5    Compare the shop number with the maximum shop number
000032F0  6C00 0996                474      BGE     return          Return from the loop if the current shop number is greater than or equal to the max
000032F4                           475      
000032F4  6100 0014                476      bsr     shop_check      Check for a shop
000032F8                           477      
000032F8  0C38 0005 5FF3           478      CMP.B   #5,GAME_STATE   Compare the movement gamestate number with the current gamestate
000032FE  6600 0988                479      BNE     return          Return from the loop if the game is not in the movement state anymore
00003302                           480      
00003302  5205                     481      add.b   #1,D5           Add to the current shop number
00003304  DAFC 0010                482      add.w   #16,A5          Add to the current shop pointer to move to the next shop
00003308  60E2                     483      bra     shops_loop      Keep looping the shops
0000330A                           484      
0000330A                           485  shop_check:    
0000330A  340E                     486      move.w  A6,D2           Move the player position to D2
0000330C                           487      
0000330C                           488      *Check if the player is beside a shop
0000330C  0442 0010                489      sub.w   #16,D2          Check north
00003310  B455                     490      CMP.W   (A5),D2           
00003312  6700 0020                491      BEQ     enter_shop      The player enters a shop
00003316                           492      
00003316  0642 0020                493      add.w   #32,D2          Check south
0000331A  B455                     494      CMP.W   (A5),D2           
0000331C  6700 0016                495      BEQ     enter_shop      The player enters a shop
00003320                           496      
00003320  0442 0011                497      sub.w   #17,D2          Check west
00003324  B455                     498      CMP.W   (A5),D2           
00003326  6700 000C                499      BEQ     enter_shop      The player enters a shop
0000332A                           500      
0000332A  5442                     501      add.w   #2,D2           Check east
0000332C  B455                     502      CMP.W   (A5),D2           
0000332E  6700 0004                503      BEQ     enter_shop      The player enters a shop
00003332                           504      
00003332  4E75                     505      rts     Return if not touching a shop
00003334                           506      
00003334                           507  enter_shop:
00003334  11FC 0007 5FF3           508      move.b  #7,GAME_STATE       Move to shop game state
0000333A                           509      
0000333A  6100 043E                510      bsr     endl                Line break
0000333E                           511      
0000333E  43F9 00005181            512      LEA     shop_enter_msg,A1   Load the encounter message int A1
00003344  103C 000E                513      move.b  #14,D0              Move #14 to D0 to display message
00003348  4E4F                     514      trap    #15                 Display the loaded message
0000334A                           515      
0000334A  6100 090A                516      bsr     press_continue      Branch to the press to continue subroutine
0000334E                           517      
0000334E  6100 03FA                518      bsr     clear_screen        Clear the screen
00003352                           519      
00003352  6100 008A                520      bsr     draw_merchant       Draw the merchant
00003356  6100 022A                521      bsr     draw_shop_info      Draw the info
0000335A                           522      
0000335A  4E75                     523      rts
0000335C                           524  
0000335C                           525  *-------------------------------------------------------
0000335C                           526  *---------------------Combat State---------------------- 
0000335C                           527  enemy_alive_check:
0000335C  0C15 0000                528      CMP.B   #0,(A5)     Compare the enemy health with zero
00003360  6F00 0004                529      BLE     enemy_died  If the enemy health is zero or below, they died
00003364                           530      
00003364  4E75                     531      rts
00003366                           532      
00003366                           533  enemy_died:
00003366  6100 0412                534      bsr     endl            Break to a new line
0000336A                           535  
0000336A  43F9 00005045            536      lea     battle_won_msg,A1   Load the won battle message
00003370  103C 000E                537      move.b  #14,D0              Move the literal #14 to D0 for trap task #14
00003374  4E4F                     538      trap    #15                 Display the message
00003376                           539      
00003376  11FC 0005 5FF3           540      move.b  #5,GAME_STATE   Set the game state mack to movement state
0000337C  564D                     541      add.w   #ALIVE,A5       Move from the enemy health to its alive status
0000337E  1ABC 0000                542      move.b  #0,(A5)         Set the enemy as dead
00003382                           543      
00003382  6100 08D2                544      bsr     press_continue
00003386                           545      
00003386  6100 03C2                546      bsr     clear_screen    Clear the screen
0000338A  6100 0008                547      bsr     draw            Draw the map for first frame back in movement
0000338E  6100 005C                548      bsr     draw_hud        Draw the hud for first frame back in movement
00003392                           549      
00003392  4E75                     550      rts
00003394                           551      
00003394                           552  *-------------------------------------------------------
00003394                           553  *-----------------Draw Quest Updates--------------------
00003394                           554  * Draw the game progress information, status regarding
00003394                           555  * quest
00003394                           556  *------------------------------------------------------- 
00003394                           557  draw:
00003394  0C38 0005 5FF3           558      CMP.B   #5,GAME_STATE   Check which state the game is in
0000339A  6700 0940                559      BEQ     draw_loop       If in the movement state, draw the map
0000339E  0C38 0006 5FF3           560      CMP.B   #6,GAME_STATE   Check which state the game is in
000033A4  6700 000E                561      BEQ     draw_skeleton   If in the combat state, draw the enemy
000033A8  0C38 0007 5FF3           562      CMP.B   #7,GAME_STATE   Check which state the game is in
000033AE  6700 002E                563      BEQ     draw_merchant   If in the shop state, draw the enemy
000033B2  4E75                     564      rts
000033B4                           565      
000033B4                           566  draw_skeleton:
000033B4  43F9 00005388            567      lea     skeleton_msg,A1 Load the skeleton message
000033BA  103C 000E                568      move.b  #14,D0          Move literal 14 for display message trap command
000033BE  4E4F                     569      trap    #15             Display the loaded message
000033C0                           570      
000033C0  4E75                     571      rts
000033C2                           572      
000033C2                           573  draw_graveyard:
000033C2  43F9 000052D6            574      lea     graveyard_msg,A1 Load the graveyard message
000033C8  103C 000E                575      move.b  #14,D0           Move literal 14 for display message trap command
000033CC  4E4F                     576      trap    #15              Display the loaded message
000033CE  4E75                     577      rts                      Return from the subroutine
000033D0                           578  
000033D0                           579  draw_castle:
000033D0  43F9 000055A7            580      lea     castle_msg,A1   Load the castle message
000033D6  103C 000E                581      move.b  #14,D0          Move literal 14 for display message trap command
000033DA  4E4F                     582      trap    #15             Display the loaded message
000033DC  4E75                     583      rts                     Return from the subroutine
000033DE                           584      
000033DE                           585  draw_merchant:
000033DE  43F9 00005480            586      lea     merchant_msg,A1  Load the merchant message
000033E4  103C 000E                587      move.b  #14,D0           Move literal 14 for display message trap command
000033E8  4E4F                     588      trap    #15              Display the loaded message
000033EA                           589      
000033EA  4E75                     590      rts
000033EC                           591      
000033EC                           592  draw_hud:
000033EC  0C38 0005 5FF3           593      CMP.B   #5,GAME_STATE       Check which state the game is in
000033F2  6700 0018                594      BEQ     draw_player_info    If in the movement state, draw the player info
000033F6  0C38 0006 5FF3           595      CMP.B   #6,GAME_STATE       Check which state the game is in
000033FC  6700 010A                596      BEQ     draw_battle_info    If in the combat state, draw the combat info
00003400  0C38 0007 5FF3           597      CMP.B   #7,GAME_STATE       Check which state the game is in
00003406  6700 017A                598      BEQ     draw_shop_info      If in the shop state, draw the shop info
0000340A                           599      
0000340A  4E75                     600      rts
0000340C                           601  
0000340C                           602  draw_player_info:
0000340C  323C 00FF                603      move.w  #255,D1         Move the word #255 to D1 to set the type of trap 11
00003410  103C 000B                604      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
00003414  4E4F                     605      trap    #15             Trap to get the cursor position in D1
00003416                           606      
00003416  3601                     607      move.w  D1,D3           Move the current cursor position to D3 for later
00003418                           608      
00003418                           609      * Display the player health
00003418  323C 3201                610      move.w  #CSR_POS_MOVE,D1           
0000341C  4E4F                     611      trap    #15             Set the cursor position with trap command 11
0000341E  4241                     612      clr     D1              Clear D1 of the cursor position
00003420                           613      
00003420  43F9 00004FD3            614      lea     health_msg,A1   Load the hud message
00003426  103C 000E                615      move.b  #14,D0          Move literal 14 for display message trap command
0000342A  4E4F                     616      trap    #15             Display the loaded message
0000342C                           617      
0000342C  1238 5FF0                618      move.b  PLAYER,D1       Move the player health value to D1 to display
00003430  103C 0003                619      move.b  #3,D0           Move literal 3 for display number trap command
00003434  4E4F                     620      trap    #15             Display the number in D1
00003436                           621      
00003436                           622      * Display the torch life
00003436  103C 000B                623      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
0000343A  323C 3201                624      move.w  #CSR_POS_MOVE,D1         
0000343E  5241                     625      add.w   #1,D1  
00003440  4E4F                     626      trap    #15             Set the cursor position with trap command 11
00003442  4241                     627      clr     D1              Clear D1 of the cursor position
00003444                           628      
00003444  43F9 00004FEB            629      lea     torch_msg,A1   Load the hud message
0000344A  103C 000E                630      move.b  #14,D0          Move literal 14 for display message trap command
0000344E  4E4F                     631      trap    #15             Display the loaded message
00003450                           632      
00003450  1238 5FFB                633      move.b  PLA_TORCH,D1    Move the player torch life value to D1 to display
00003454  103C 0003                634      move.b  #3,D0           Move literal 3 for display number trap command
00003458  4E4F                     635      trap    #15             Display the number in D1
0000345A                           636      
0000345A                           637      * Display the inventory
0000345A  103C 000B                638      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
0000345E  323C 3201                639      move.w  #CSR_POS_MOVE,D1
00003462  5441                     640      add.w   #2,D1          
00003464  4E4F                     641      trap    #15             Set the cursor position with trap command 11
00003466  4241                     642      clr     D1              Clear D1 of the cursor position
00003468                           643      
00003468  43F9 00005005            644      lea     inventory_msg,A1   Load the hud message
0000346E  103C 000E                645      move.b  #14,D0          Move literal 14 for display message trap command
00003472  4E4F                     646      trap    #15             Display the loaded message
00003474                           647      
00003474                           648      * Display the player gold
00003474  103C 000B                649      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
00003478  323C 3201                650      move.w  #CSR_POS_MOVE,D1         
0000347C  5641                     651      add.w   #3,D1  
0000347E  4E4F                     652      trap    #15             Set the cursor position with trap command 11
00003480  4241                     653      clr     D1              Clear D1 of the cursor position
00003482                           654      
00003482  43F9 00005010            655      lea     gold_msg,A1   Load the hud message
00003488  103C 000E                656      move.b  #14,D0          Move literal 14 for display message trap command
0000348C  4E4F                     657      trap    #15             Display the loaded message
0000348E                           658      
0000348E  49F8 5FF8                659      lea     PLA_GOLD,A4
00003492  6100 0052                660      bsr     draw_item_number
00003496                           661      
00003496                           662      * Display the player potions
00003496  103C 000B                663      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
0000349A  323C 3201                664      move.w  #CSR_POS_MOVE,D1         
0000349E  5841                     665      add.w   #4,D1  
000034A0  4E4F                     666      trap    #15             Set the cursor position with trap command 11
000034A2  4241                     667      clr     D1              Clear D1 of the cursor position
000034A4                           668      
000034A4  43F9 0000501F            669      lea     potions_msg,A1   Load the hud message
000034AA  103C 000E                670      move.b  #14,D0          Move literal 14 for display message trap command
000034AE  4E4F                     671      trap    #15             Display the loaded message
000034B0                           672      
000034B0  49F8 5FF9                673      lea     PLA_POTIONS,A4
000034B4  6100 0030                674      bsr     draw_item_number
000034B8                           675      
000034B8                           676      * Display the player keys
000034B8  103C 000B                677      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
000034BC  323C 3201                678      move.w  #CSR_POS_MOVE,D1         
000034C0  5A41                     679      add.w   #5,D1  
000034C2  4E4F                     680      trap    #15             Set the cursor position with trap command 11
000034C4  4241                     681      clr     D1              Clear D1 of the cursor position
000034C6                           682      
000034C6  43F9 00005018            683      lea     key_msg,A1   Load the hud message
000034CC  103C 000E                684      move.b  #14,D0          Move literal 14 for display message trap command
000034D0  4E4F                     685      trap    #15             Display the loaded message
000034D2                           686      
000034D2  49F8 5FFA                687      lea     PLA_KEYS,A4
000034D6  6100 000E                688      bsr     draw_item_number
000034DA                           689      
000034DA  3203                     690      move.w  D3,D1           Move the current cursor position to D3 for later
000034DC                           691      
000034DC  103C 000B                692      move.b  #11,D0          Move the byte #11 to D0 for trap command 11          
000034E0  4E4F                     693      trap    #15             Set the cursor position with trap command 11
000034E2                           694      
000034E2  4241                     695      clr     D1              Clear D1 for later use
000034E4                           696      
000034E4  4E75                     697      rts
000034E6                           698      
000034E6                           699  draw_item_number:
000034E6  103C 000E                700      move.b  #14,D0          Move literal 3 for display number trap command
000034EA  43F9 00005077            701      lea     bracket_open_msg,A1
000034F0  4E4F                     702      trap    #15
000034F2                           703  
000034F2  103C 0003                704      move.b  #3,D0           Move literal 3 for display number trap command
000034F6  1214                     705      move.b  (A4),D1         Move the value in the register A4 to D1 to display
000034F8  4E4F                     706      trap    #15             Display the number in D1
000034FA                           707      
000034FA  103C 000E                708      move.b  #14,D0          Move literal 3 for display number trap command
000034FE  43F9 00005079            709      lea     bracket_close_msg,A1
00003504  4E4F                     710      trap    #15
00003506  4E75                     711      rts
00003508                           712      
00003508                           713  
00003508                           714  draw_battle_info:
00003508  323C 00FF                715      move.w  #255,D1         Move the word #255 to D1 to set the type of trap 11
0000350C  103C 000B                716      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
00003510  4E4F                     717      trap    #15             Trap to get the cursor position in D1
00003512                           718      
00003512  3601                     719      move.w  D1,D3           Move the current cursor position to D3 for later
00003514                           720      
00003514                           721      * Move cursor to draw player info
00003514  323C 2001                722      move.w  #CSR_POS_BATTLE,D1           
00003518  4E4F                     723      trap    #15             Set the cursor position with trap command 11
0000351A  4241                     724      clr     D1              Clear D1 of the cursor position
0000351C                           725      
0000351C  43F9 00004FD3            726      lea     health_msg,A1   Load the hud message
00003522  103C 000E                727      move.b  #14,D0          Move literal 14 for display message trap command
00003526  4E4F                     728      trap    #15             Display the loaded message
00003528                           729      
00003528  1238 5FF0                730      move.b  PLAYER,D1       Move the player health value to D1 to display
0000352C  103C 0003                731      move.b  #3,D0           Move literal 3 for display number trap command
00003530  4E4F                     732      trap    #15             Display the number in D1
00003532                           733      
00003532                           734      * Move the cursor to draw enemy info
00003532  103C 000B                735      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
00003536  323C 2001                736      move.w  #CSR_POS_BATTLE,D1
0000353A  5241                     737      add.w   #1,D1
0000353C  4E4F                     738      trap    #15             Set the cursor position with trap command 11
0000353E  4241                     739      clr     D1              Clear D1 of the cursor position
00003540                           740      
00003540  43F9 00004FDC            741      lea     enemy_health_msg,A1 Load the hud message
00003546  103C 000E                742      move.b  #14,D0              Move literal 14 for display message trap command
0000354A  4E4F                     743      trap    #15                 Display the loaded message
0000354C                           744      
0000354C  1215                     745      move.b  (A5),D1         Move the enemy health value to D1 to display
0000354E  103C 0003                746      move.b  #3,D0           Move literal 3 for display number trap command
00003552  4E4F                     747      trap    #15             Display the number in D1
00003554                           748      
00003554                           749      * Move the cursor to draw potion information
00003554  103C 000B                750      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
00003558  323C 2001                751      move.w  #CSR_POS_BATTLE,D1
0000355C  5641                     752      add.w   #3,D1
0000355E  4E4F                     753      trap    #15             Set the cursor position with trap command 11
00003560  4241                     754      clr     D1              Clear D1 of the cursor position
00003562                           755      
00003562  43F9 0000501F            756      lea     potions_msg,A1   Load the hud message
00003568  103C 000E                757      move.b  #14,D0          Move literal 14 for display message trap command
0000356C  4E4F                     758      trap    #15             Display the loaded message
0000356E                           759      
0000356E  49F8 5FF9                760      lea     PLA_POTIONS,A4
00003572  6100 FF72                761      bsr     draw_item_number
00003576                           762      
00003576                           763      * Move the cursor back to its previous position
00003576  3203                     764      move.w  D3,D1           Move the previous cursor position back to D1
00003578  103C 000B                765      move.b  #11,D0          Move the byte #11 to D0 for trap command 11          
0000357C  4E4F                     766      trap    #15             Set the cursor position with trap command 11
0000357E                           767      
0000357E  4241                     768      clr     D1              Clear D1 for later use
00003580                           769      
00003580  4E75                     770      rts
00003582                           771      
00003582                           772  draw_shop_info:
00003582  323C 00FF                773      move.w  #255,D1         Move the word #255 to D1 to set the type of trap 11
00003586  103C 000B                774      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
0000358A  4E4F                     775      trap    #15             Trap to get the cursor position in D1
0000358C                           776      
0000358C  3601                     777      move.w  D1,D3           Move the current cursor position to D3 for later
0000358E                           778      
0000358E                           779      * Move cursor to draw shop info
0000358E  323C 1801                780      move.w  #CSR_POS_SHOP_S,D1           
00003592  4E4F                     781      trap    #15             Set the cursor position with trap command 11
00003594  4241                     782      clr     D1              Clear D1 of the cursor position
00003596                           783      
00003596  43F9 0000525B            784      lea     shop_stock_msg,A1   Load the hud message
0000359C  103C 000E                785      move.b  #14,D0          Move literal 14 for display message trap command
000035A0  4E4F                     786      trap    #15             Display the loaded message
000035A2                           787      
000035A2                           788      
000035A2                           789      * Display the shop's potions
000035A2  103C 000B                790      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
000035A6  323C 1801                791      move.w  #CSR_POS_SHOP_S,D1         
000035AA  5241                     792      add.w   #1,D1  
000035AC  4E4F                     793      trap    #15             Set the cursor position with trap command 11
000035AE  4241                     794      clr     D1              Clear D1 of the cursor position
000035B0                           795      
000035B0  43F9 0000501F            796      lea     potions_msg,A1   Load the hud message
000035B6  103C 000E                797      move.b  #14,D0          Move literal 14 for display message trap command
000035BA  4E4F                     798      trap    #15             Display the loaded message
000035BC                           799      
000035BC  544D                     800      add.w   #S_POTIONS,A5
000035BE  49D5                     801      lea     (A5),A4
000035C0  6100 FF24                802      bsr     draw_item_number
000035C4                           803      
000035C4                           804      * Display the shop's keys
000035C4  103C 000B                805      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
000035C8  323C 1801                806      move.w  #CSR_POS_SHOP_S,D1         
000035CC  5441                     807      add.w   #2,D1  
000035CE  4E4F                     808      trap    #15             Set the cursor position with trap command 11
000035D0  4241                     809      clr     D1              Clear D1 of the cursor position
000035D2                           810      
000035D2  43F9 00005018            811      lea     key_msg,A1      Load the hud message
000035D8  103C 000E                812      move.b  #14,D0          Move literal 14 for display message trap command
000035DC  4E4F                     813      trap    #15             Display the loaded message
000035DE                           814      
000035DE  524D                     815      add.w   #1,A5
000035E0  49D5                     816      lea     (A5),A4
000035E2  6100 FF02                817      bsr     draw_item_number
000035E6                           818      
000035E6                           819      * Display the shop's torches
000035E6  103C 000B                820      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
000035EA  323C 1801                821      move.w  #CSR_POS_SHOP_S,D1         
000035EE  5641                     822      add.w   #3,D1  
000035F0  4E4F                     823      trap    #15             Set the cursor position with trap command 11
000035F2  4241                     824      clr     D1              Clear D1 of the cursor position
000035F4                           825      
000035F4  43F9 00005029            826      lea     torches_msg,A1  Load the torches message
000035FA  103C 000E                827      move.b  #14,D0          Move literal 14 for display message trap command
000035FE  4E4F                     828      trap    #15             Display the loaded message
00003600                           829      
00003600  524D                     830      add.w   #1,A5
00003602  49D5                     831      lea     (A5),A4
00003604  6100 FEE0                832      bsr     draw_item_number
00003608                           833      
00003608                           834      * Display the shop's damage upgrades
00003608  103C 000B                835      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
0000360C  323C 1801                836      move.w  #CSR_POS_SHOP_S,D1         
00003610  5841                     837      add.w   #4,D1  
00003612  4E4F                     838      trap    #15             Set the cursor position with trap command 11
00003614  4241                     839      clr     D1              Clear D1 of the cursor position
00003616                           840      
00003616  43F9 00005032            841      lea     damage_up_msg,A1 Load the damage upgrades message
0000361C  103C 000E                842      move.b  #14,D0           Move literal 14 for display message trap command
00003620  4E4F                     843      trap    #15              Display the loaded message
00003622                           844      
00003622  524D                     845      add.w   #1,A5               Increment A5 to get to the damage upgrades
00003624  49D5                     846      lea     (A5),A4             Load the memory address in A5 to A4
00003626  6100 FEBE                847      bsr     draw_item_number    Draw the number of items
0000362A  5B4D                     848      sub.w   #S_DAMAGE_IN,A5     Bring the pointer back to the root of the shop
0000362C                           849      
0000362C                           850      * Display the inventory
0000362C  103C 000B                851      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
00003630  323C 3401                852      move.w  #CSR_POS_SHOP_P,D1       
00003634  4E4F                     853      trap    #15             Set the cursor position with trap command 11
00003636  4241                     854      clr     D1              Clear D1 of the cursor position
00003638                           855      
00003638  43F9 00005005            856      lea     inventory_msg,A1   Load the hud message
0000363E  103C 000E                857      move.b  #14,D0          Move literal 14 for display message trap command
00003642  4E4F                     858      trap    #15             Display the loaded message
00003644                           859      
00003644                           860      * Display the player gold
00003644  103C 000B                861      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
00003648  323C 3401                862      move.w  #CSR_POS_SHOP_P,D1         
0000364C  5241                     863      add.w   #1,D1  
0000364E  4E4F                     864      trap    #15             Set the cursor position with trap command 11
00003650  4241                     865      clr     D1              Clear D1 of the cursor position
00003652                           866      
00003652  43F9 00005010            867      lea     gold_msg,A1   Load the hud message
00003658  103C 000E                868      move.b  #14,D0          Move literal 14 for display message trap command
0000365C  4E4F                     869      trap    #15             Display the loaded message
0000365E                           870      
0000365E  49F8 5FF8                871      lea     PLA_GOLD,A4
00003662  6100 FE82                872      bsr     draw_item_number
00003666                           873      
00003666                           874      * Display the player potions
00003666  103C 000B                875      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
0000366A  323C 3401                876      move.w  #CSR_POS_SHOP_P,D1         
0000366E  5441                     877      add.w   #2,D1  
00003670  4E4F                     878      trap    #15             Set the cursor position with trap command 11
00003672  4241                     879      clr     D1              Clear D1 of the cursor position
00003674                           880      
00003674  43F9 0000501F            881      lea     potions_msg,A1   Load the hud message
0000367A  103C 000E                882      move.b  #14,D0          Move literal 14 for display message trap command
0000367E  4E4F                     883      trap    #15             Display the loaded message
00003680                           884      
00003680  49F8 5FF9                885      lea     PLA_POTIONS,A4
00003684  6100 FE60                886      bsr     draw_item_number
00003688                           887      
00003688                           888      * Display the player keys
00003688  103C 000B                889      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
0000368C  323C 3401                890      move.w  #CSR_POS_SHOP_P,D1         
00003690  5641                     891      add.w   #3,D1  
00003692  4E4F                     892      trap    #15             Set the cursor position with trap command 11
00003694  4241                     893      clr     D1              Clear D1 of the cursor position
00003696                           894      
00003696  43F9 00005018            895      lea     key_msg,A1   Load the hud message
0000369C  103C 000E                896      move.b  #14,D0          Move literal 14 for display message trap command
000036A0  4E4F                     897      trap    #15             Display the loaded message
000036A2                           898      
000036A2  49F8 5FFA                899      lea     PLA_KEYS,A4
000036A6  6100 FE3E                900      bsr     draw_item_number
000036AA                           901      
000036AA                           902      * Display the torch life
000036AA  103C 000B                903      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
000036AE  323C 3401                904      move.w  #CSR_POS_SHOP_P,D1
000036B2  5A41                     905      add.w   #5,D1       
000036B4  4E4F                     906      trap    #15             Set the cursor position with trap command 11
000036B6  4241                     907      clr     D1              Clear D1 of the cursor position
000036B8                           908      
000036B8  43F9 00004FEB            909      lea     torch_msg,A1   Load the hud message
000036BE  103C 000E                910      move.b  #14,D0          Move literal 14 for display message trap command
000036C2  4E4F                     911      trap    #15             Display the loaded message
000036C4                           912      
000036C4  1238 5FFB                913      move.b  PLA_TORCH,D1    Move the player torch life value to D1 to display
000036C8  103C 0003                914      move.b  #3,D0           Move literal 3 for display number trap command
000036CC  4E4F                     915      trap    #15             Display the number in D1
000036CE                           916      
000036CE                           917      * Display the player's damage level
000036CE  103C 000B                918      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
000036D2  323C 3401                919      move.w  #CSR_POS_SHOP_P,D1
000036D6  5C41                     920      add.w   #6,D1       
000036D8  4E4F                     921      trap    #15             Set the cursor position with trap command 11
000036DA  4241                     922      clr     D1              Clear D1 of the cursor position
000036DC                           923      
000036DC  43F9 00004FF8            924      lea     damage_lvl_msg,A1   Load the damage level message
000036E2  103C 000E                925      move.b  #14,D0              Move literal 14 for display message trap command
000036E6  4E4F                     926      trap    #15                 Display the loaded message
000036E8                           927      
000036E8  1238 5FF1                928      move.b  PLA_DAMAGE,D1   Move the player's damage level to D1 to display
000036EC  103C 0003                929      move.b  #3,D0           Move literal 3 for display number trap command
000036F0  4E4F                     930      trap    #15             Display the number in D1
000036F2                           931      
000036F2                           932      * Move the cursor back to its previous position
000036F2  3203                     933      move.w  D3,D1           Move the previous cursor position back to D1
000036F4  103C 000B                934      move.b  #11,D0          Move the byte #11 to D0 for trap command 11          
000036F8  4E4F                     935      trap    #15             Set the cursor position with trap command 11
000036FA                           936      
000036FA  4241                     937      clr     D1              Clear D1 for later use
000036FC                           938      
000036FC  4E75                     939      rts
000036FE                           940  
000036FE                           941  *-------------------------------------------------------
000036FE                           942  *---Game Play (Quest Progress)--------------------------
000036FE                           943  *------------------------------------------------------- 
000036FE                           944  gameplay:
000036FE  6100 007A                945      bsr     endl            Break to a new line
00003702  0C38 0000 5FF3           946      CMP.B   #0,GAME_STATE   Check which stage the game is in
00003708  6700 F912                947      BEQ     pick_role       Branch to the pick role subroutine
0000370C  0C38 0005 5FF3           948      CMP.B   #5,GAME_STATE   Check which stage the game is in
00003712  6700 007C                949      BEQ     movement        Branch to the movement subroutine
00003716  0C38 0006 5FF3           950      CMP.B   #6,GAME_STATE   Check which stage the game is in
0000371C  6700 01DA                951      BEQ     combat          branch to the combat subroutine
00003720  0C38 0007 5FF3           952      CMP.B   #7,GAME_STATE   Check which stage the game is in
00003726  6700 037A                953      BEQ     shop            branch to the shop subroutine
0000372A  4E75                     954      rts                     Return from 'gameplay' subroutine
0000372C                           955  
0000372C                           956  *-------------------------------------------------------
0000372C                           957  *------------------Screen Decoration--------------------
0000372C                           958  *-------------------------------------------------------
0000372C                           959  decorate:
0000372C  163C 003C                960      move.b  #60, D3
00003730  6100 0048                961      bsr     endl
00003734                           962  out:
00003734  43F9 00004552            963      lea     loop_msg,A1
0000373A  103C 000E                964      move.b  #14,D0
0000373E  4E4F                     965      trap    #15
00003740  5343                     966      sub     #1,D3   decrement loop counter
00003742  66F0                     967      bne     out     repeat until D0=0
00003744  6100 0034                968      bsr     endl
00003748  4E75                     969      rts
0000374A                           970      
0000374A                           971  clear_screen: 
0000374A  103C 000B                972      move.b  #11,D0      clear screen
0000374E  323C FF00                973      move.w  #$ff00,D1
00003752  4E4F                     974      trap    #15
00003754  4E75                     975      rts
00003756                           976  *-------------------------------------------------------
00003756                           977  *------------------------Replay-------------------------
00003756                           978  *-------------------------------------------------------
00003756                           979  replay:
00003756  43F9 00004642            980      lea     replay_msg,A1   Load the Replay message
0000375C  103C 000E                981      move.b  #14,D0          Move the number literal 14 to D0 for trap command
00003760  4E4F                     982      trap    #15             Display the loaded message
00003762                           983      
00003762  1A3C 0002                984      move.b  #2,D5           Move the number of input options to D5
00003766  6100 F9B6                985      bsr     input           Take user input
0000376A  1401                     986      move.b  D1,D2           Move the input to D2 so it's not trampled by the clear screen
0000376C                           987      
0000376C  61DC                     988      bsr     clear_screen    Clear the screen
0000376E                           989      
0000376E  B43C 0001                990      cmp.b   #1,D2           Compare the user input against the two options
00003772  6700 D88C                991      beq     start           Restart if the user enters 1
00003776  6100 F88E                992      bsr     end             Quit if the user enters 2
0000377A                           993  
0000377A                           994  endl:
0000377A  48E7 8040                995      movem.l D0/A1,-(A7)
0000377E  303C 000E                996      move    #14,D0
00003782  43F9 000042F4            997      lea     crlf,A1
00003788  4E4F                     998      trap    #15
0000378A  4CDF 0201                999      movem.l (A7)+,D0/A1
0000378E  4E75                    1000      rts
00003790                          1001          
00003790                          1002  *-------------------------------------------------------
00003790                          1003  *----------------------Manage Movement------------------
00003790                          1004  *-------------------------------------------------------
00003790                          1005  movement:
00003790  43F9 00004B16           1006      lea     movement_msg,A1 Load the movement message
00003796  103C 000E               1007      move.b  #14,D0          Move literal 14 for display message trap command
0000379A  4E4F                    1008      trap    #15             Display the loaded message
0000379C                          1009  
0000379C  7A05                    1010      move.l  #5,D5           Move the number 4 to D5 to tell the program how many options there are
0000379E                          1011      
0000379E  6100 F97E               1012      bsr     input           branch to the input subroutine
000037A2  6100 000C               1013      bsr     wall_collisions Branch to check wall collisions and movement
000037A6                          1014      
000037A6  B23C 0005               1015      CMP.B   #5,D1           Check the input against taking a potion
000037AA  6700 04DE               1016      BEQ     take_potion     Branch to take a potion
000037AE                          1017      
000037AE  4E75                    1018      rts
000037B0                          1019  
000037B0                          1020  *-------------------------------------------------------
000037B0                          1021  *-------------------Check Wall Collisions---------------
000037B0                          1022  *-------------------------------------------------------
000037B0                          1023  wall_collisions:
000037B0                          1024      *Check collisions in the movement direction
000037B0  B23C 0001               1025      CMP.B   #1,D1       Check the movement direction
000037B4  6700 001C               1026      BEQ     move_north  Branch to Display the corridor type
000037B8                          1027      
000037B8  B23C 0002               1028      CMP.B   #2,D1       Check the movement direction
000037BC  6700 005A               1029      BEQ     move_south  Branch to Display the corridor type
000037C0                          1030      
000037C0  B23C 0003               1031      CMP.B   #3,D1       Check the movement direction
000037C4  6700 0098               1032      BEQ     move_west   Branch to Display the corridor type
000037C8                          1033      
000037C8  B23C 0004               1034      CMP.B   #4,D1       Check the movement direction
000037CC  6700 00D4               1035      BEQ     move_east   Branch to Display the corridor type
000037D0                          1036      
000037D0  4E75                    1037      rts
000037D2                          1038      
000037D2                          1039  move_north:
000037D2                          1040      *Check if the tile is any of the corridor types with a wall at the top
000037D2  0C16 0002               1041      CMP.B   #2,(A6)
000037D6  6700 010E               1042      BEQ     movement_blocked
000037DA  0C16 0003               1043      CMP.B   #3,(A6)
000037DE  6700 0106               1044      BEQ     movement_blocked
000037E2  0C16 0006               1045      CMP.B   #6,(A6)
000037E6  6700 00FE               1046      BEQ     movement_blocked
000037EA  0C16 0007               1047      CMP.B   #7,(A6)
000037EE  6700 00F6               1048      BEQ     movement_blocked
000037F2  0C16 000B               1049      CMP.B   #11,(A6)
000037F6  6700 00EE               1050      BEQ     movement_blocked
000037FA  0C16 000C               1051      CMP.B   #12,(A6)
000037FE  6700 00E6               1052      BEQ     movement_blocked
00003802  0C16 000D               1053      CMP.B   #13,(A6)
00003806  6700 00DE               1054      BEQ     movement_blocked
0000380A                          1055      
0000380A  31CE 5FF6               1056      move.w  A6,PLA_P_POS        Move the player's previous location to a memory address for storage
0000380E  9CFC 0010               1057      sub     #16,A6              Move the player north
00003812                          1058      
00003812  6100 04A8               1059      bsr     decrement_torch     Remove one from the player's torch life
00003816                          1060      
00003816  4E75                    1061      rts
00003818                          1062      
00003818                          1063  move_south:
00003818                          1064      *Check if the tile is any of the corridor types with a wall at the bottom
00003818  0C16 0002               1065      CMP.B   #2,(A6)
0000381C  6700 00C8               1066      BEQ     movement_blocked
00003820  0C16 0004               1067      CMP.B   #4,(A6)
00003824  6700 00C0               1068      BEQ     movement_blocked
00003828  0C16 0005               1069      CMP.B   #5,(A6)
0000382C  6700 00B8               1070      BEQ     movement_blocked
00003830  0C16 0009               1071      CMP.B   #9,(A6)
00003834  6700 00B0               1072      BEQ     movement_blocked
00003838  0C16 000B               1073      CMP.B   #11,(A6)
0000383C  6700 00A8               1074      BEQ     movement_blocked
00003840  0C16 000D               1075      CMP.B   #13,(A6)
00003844  6700 00A0               1076      BEQ     movement_blocked
00003848  0C16 000E               1077      CMP.B   #14,(A6)
0000384C  6700 0098               1078      BEQ     movement_blocked
00003850                          1079      
00003850  31CE 5FF6               1080      move.w  A6,PLA_P_POS        Move the player's previous location to a memory address for storage
00003854  DCFC 0010               1081      add     #16,A6              Move the player south
00003858                          1082      
00003858  6100 0462               1083      bsr     decrement_torch     Remove one from the player's torch life
0000385C                          1084      
0000385C  4E75                    1085      rts
0000385E                          1086  
0000385E                          1087  move_west:
0000385E                          1088      *Check if the tile is any of the corridor types with a wall to the left
0000385E  0C16 0001               1089      CMP.B   #1,(A6)
00003862  6700 0082               1090      BEQ     movement_blocked
00003866  0C16 0003               1091      CMP.B   #3,(A6)
0000386A  6700 007A               1092      BEQ     movement_blocked
0000386E  0C16 0004               1093      CMP.B   #4,(A6)
00003872  6700 0072               1094      BEQ     movement_blocked
00003876  0C16 0008               1095      CMP.B   #8,(A6)
0000387A  6700 006A               1096      BEQ     movement_blocked
0000387E  0C16 000B               1097      CMP.B   #11,(A6)
00003882  6700 0062               1098      BEQ     movement_blocked
00003886  0C16 000C               1099      CMP.B   #12,(A6)
0000388A  6700 005A               1100      BEQ     movement_blocked
0000388E  0C16 000E               1101      CMP.B   #14,(A6)
00003892  6700 0052               1102      BEQ     movement_blocked
00003896                          1103      
00003896  31CE 5FF6               1104      move.w  A6,PLA_P_POS        Move the player's previous location to a memory address for storage
0000389A  534E                    1105      sub     #1,A6               Move the player west
0000389C                          1106      
0000389C  6100 041E               1107      bsr     decrement_torch     Remove one from the player's torch life
000038A0                          1108      
000038A0  4E75                    1109      rts
000038A2                          1110      
000038A2                          1111  move_east:
000038A2                          1112      *Check if the tile is any of the corridor types with a wall to the right
000038A2  0C16 0001               1113      CMP.B   #1,(A6)
000038A6  6700 003E               1114      BEQ     movement_blocked
000038AA  0C16 0005               1115      CMP.B   #5,(A6)
000038AE  6700 0036               1116      BEQ     movement_blocked
000038B2  0C16 0006               1117      CMP.B   #6,(A6)
000038B6  6700 002E               1118      BEQ     movement_blocked
000038BA  0C16 000A               1119      CMP.B   #10,(A6)
000038BE  6700 0026               1120      BEQ     movement_blocked
000038C2  0C16 000C               1121      CMP.B   #12,(A6)
000038C6  6700 001E               1122      BEQ     movement_blocked
000038CA  0C16 000D               1123      CMP.B   #13,(A6)
000038CE  6700 0016               1124      BEQ     movement_blocked
000038D2  0C16 000E               1125      CMP.B   #14,(A6)
000038D6  6700 000E               1126      BEQ     movement_blocked
000038DA                          1127      
000038DA  31CE 5FF6               1128      move.w  A6,PLA_P_POS        Move the player's previous location to a memory address for storage
000038DE  524E                    1129      add     #1,A6               Move the player east
000038E0                          1130      
000038E0  6100 03DA               1131      bsr     decrement_torch     Remove one from the player's torch life
000038E4                          1132      
000038E4  4E75                    1133      rts
000038E6                          1134  
000038E6                          1135  movement_blocked:
000038E6  43F9 00004BA8           1136      lea     movement_blocked_msg,A1 Load the message
000038EC  103C 000E               1137      move.b  #14,D0                  Move the trap command to display a message
000038F0  4E4F                    1138      trap    #15                     Display the movement blocked message
000038F2  6100 0362               1139      bsr     press_continue          Pause the game until a key is pressed
000038F6                          1140      
000038F6  4E75                    1141      rts                             Return from the subroutine
000038F8                          1142      
000038F8                          1143  *-------------------------------------------------------
000038F8                          1144  *---------------------Manage Combat---------------------
000038F8                          1145  *-------------------------------------------------------
000038F8                          1146  combat:
000038F8  6100 FE80               1147      bsr endl                Break to a new line
000038FC                          1148  
000038FC  43F9 00004C35           1149      lea     combat_msg,A1   Load the combat message
00003902  103C 000E               1150      move.b  #14,D0          Move literal 14 for display message trap command
00003906  4E4F                    1151      trap    #15             Display the loaded message
00003908                          1152  
00003908  7A05                    1153      move.l  #5,D5           Move the number 4 to D5 to tell the program how many options there are
0000390A  6100 F812               1154      bsr     input           branch to the input subroutine
0000390E                          1155      
0000390E  B23C 0001               1156      CMP.B   #1,D1           Compare input with number literal 1
00003912  6700 0024               1157      BEQ     block_counter   Branch to block/counter subroutine
00003916  B23C 0002               1158      CMP.B   #2,D1           Compare input with number literal 2
0000391A  6700 0036               1159      BEQ     cast_magic      Branch to cast magic subroutine
0000391E  B23C 0003               1160      CMP.B   #3,D1           Compare input with number literal 3
00003922  6700 0048               1161      BEQ     melee_attack    Branch to melee subroutine
00003926  B23C 0004               1162      CMP.B   #4,D1           Compare input with number literal 4
0000392A  6700 005A               1163      BEQ     try_run         Branch to try run subroutine
0000392E  B23C 0005               1164      CMP.B   #5,D1           Compare input with number literal 5
00003932  6700 0356               1165      BEQ     take_potion     Branch to take potion subroutine
00003936                          1166      
00003936  4E75                    1167      rts
00003938                          1168      
00003938                          1169  block_counter:
00003938  6100 0334               1170      bsr     random_number       Get a random number 1-100
0000393C                          1171      
0000393C  B47C 0021               1172      CMP.W   #33,D2              Compare random with #33
00003940  6F00 008E               1173      BLE     both_block          Enemy tries to block - attack failed
00003944  B47C 0042               1174      CMP.W   #66,D2              Compare random with #66
00003948  6F00 0120               1175      BLE     hit_by_magic        Enemy casts magic - player takes damage      
0000394C  6E00 00E8               1176      BGT     hit_against_melee   Enemy tried to lunge - enemy takes damage
00003950                          1177      
00003950  4E75                    1178      rts                         Return from subroutine
00003952                          1179      
00003952                          1180  cast_magic:
00003952  6100 031A               1181      bsr     random_number       Get a random number 1-100
00003956                          1182  
00003956  B47C 0021               1183      CMP.W   #33,D2              Compare random with #33
0000395A  6F00 00AA               1184      BLE     hit_against_block    Enemy blocks - enemy takes damage
0000395E  B47C 0042               1185      CMP.W   #66,D2              Compare random with #66
00003962  6F00 007E               1186      BLE     both_cast_magic     Enemy casts magic - attack fails     
00003966  6E00 011E               1187      BGT     hit_by_melee        Enemy lunges forward - player takes damage
0000396A                          1188      
0000396A  4E75                    1189      rts                         Return from subroutine
0000396C                          1190  
0000396C                          1191  melee_attack:
0000396C  6100 0300               1192      bsr     random_number       Get a random number 1-100
00003970                          1193  
00003970  B47C 0021               1194      CMP.W   #33,D2              Compare random with #33
00003974  6F00 00D8               1195      BLE     hit_by_counter      Enemy blocks and counters - player takes damage
00003978  B47C 0042               1196      CMP.W   #66,D2              Compare random with #66
0000397C  6F00 00A0               1197      BLE     hit_against_magic   Enemy casts magic - player takes damage     
00003980  6E00 0072               1198      BGT     both_melee          Enemy lunges forward - attack fails
00003984                          1199      
00003984  4E75                    1200      rts                         Return from subroutine
00003986                          1201  
00003986                          1202  try_run:
00003986  6100 02E6               1203      bsr     random_number       Get a random number
0000398A                          1204      
0000398A  B47C 0028               1205      CMP.W   #40,D2              Compare the random number to 40
0000398E  6D00 0006               1206      BLT     escape_attack       If the random number is less than 40 the player escapes
00003992  6C00 0020               1207      BGE     fail_escape         If the random number is more than 40 the player gets damaged
00003996                          1208      
00003996                          1209  escape_attack:
00003996  3638 5FF6               1210      move.w  PLA_P_POS,D3    Move the player's previous position to D3 to avoid treating it as a negative number
0000399A  2C43                    1211      move.l  D3,A6           Move the player to their position before entering the battle
0000399C  11FC 0005 5FF3          1212      move.b  #5,GAME_STATE   Switch game state
000039A2                          1213      
000039A2  43F9 00004C97           1214      lea     escape_msg,A1   Load escape message
000039A8  103C 000E               1215      move.b  #14,D0          Move literal for trap command
000039AC  4E4F                    1216      trap    #15             Trap 15 to display messgae
000039AE                          1217      
000039AE  6100 02A6               1218      bsr     press_continue  Pause until the player presses to continue
000039B2                          1219      
000039B2  4E75                    1220      rts                     Return from subroutine
000039B4                          1221      
000039B4                          1222  fail_escape:
000039B4  43F9 00004CB2           1223      lea     fail_escape_msg,A1  Load fail escape message
000039BA  103C 000E               1224      move.b  #14,D0              Move literal for trap command
000039BE  4E4F                    1225      trap    #15                 Trap 15 to display message
000039C0                          1226      
000039C0  524D                    1227      add.w   #DAMAGE,A5           Move the enemy pointer to its damage value
000039C2  1A15                    1228      move.b  (A5),D5             Store the damage value in D5
000039C4  534D                    1229      sub.w   #DAMAGE,A5           Move the enemy pointer back to the enemy health/root
000039C6  9B38 5FF0               1230      sub.b   D5,PLAYER           Remove the enemy's damage from the player's health
000039CA                          1231      
000039CA  6100 028A               1232      bsr     press_continue      Pause until the player presses to continue
000039CE  4E75                    1233      rts
000039D0                          1234      
000039D0                          1235  both_block:
000039D0  103C 000E               1236      move.b  #14,D0
000039D4  43F9 00004CED           1237      lea     both_block_msg,A1
000039DA  4E4F                    1238      trap    #15
000039DC                          1239      
000039DC  6100 0278               1240      bsr     press_continue
000039E0  4E75                    1241      rts
000039E2                          1242      
000039E2                          1243  both_cast_magic:
000039E2  103C 000E               1244      move.b  #14,D0
000039E6  43F9 00004D12           1245      lea     both_cast_magic_msg,A1
000039EC  4E4F                    1246      trap    #15
000039EE                          1247      
000039EE  6100 0266               1248      bsr     press_continue
000039F2  4E75                    1249      rts
000039F4                          1250  
000039F4                          1251  both_melee:
000039F4  103C 000E               1252      move.b  #14,D0
000039F8  43F9 00004D67           1253      lea     both_melee_msg,A1
000039FE  4E4F                    1254      trap    #15  
00003A00                          1255      
00003A00  6100 0254               1256      bsr     press_continue
00003A04  4E75                    1257      rts
00003A06                          1258  
00003A06                          1259  hit_against_block:
00003A06  103C 000E               1260      move.b  #14,D0
00003A0A  43F9 00004DB0           1261      lea     hit_against_block_msg,A1
00003A10  4E4F                    1262      trap    #15  
00003A12                          1263      
00003A12  1A38 5FF1               1264      move.b  PLA_DAMAGE,D5       Store the player damage value in D5
00003A16  9B15                    1265      sub.b   D5,(A5)           Remove the player's damage from the enemy's health
00003A18                          1266      
00003A18  6100 023C               1267      bsr     press_continue
00003A1C  4E75                    1268      rts
00003A1E                          1269  
00003A1E                          1270  hit_against_magic:
00003A1E  103C 000E               1271      move.b  #14,D0
00003A22  43F9 00004DF8           1272      lea     hit_against_magic_msg,A1
00003A28  4E4F                    1273      trap    #15
00003A2A                          1274      
00003A2A  1A38 5FF1               1275      move.b  PLA_DAMAGE,D5       Store the player damage value in D5
00003A2E  9B15                    1276      sub.b   D5,(A5)           Remove the player's damage from the enemy's health
00003A30                          1277      
00003A30  6100 0224               1278      bsr     press_continue
00003A34  4E75                    1279      rts
00003A36                          1280  
00003A36                          1281  hit_against_melee:
00003A36  103C 000E               1282      move.b  #14,D0
00003A3A  43F9 00004E5C           1283      lea     hit_against_melee_msg,A1
00003A40  4E4F                    1284      trap    #15
00003A42                          1285      
00003A42  1A38 5FF1               1286      move.b  PLA_DAMAGE,D5       Store the player damage value in D5
00003A46  9B15                    1287      sub.b   D5,(A5)           Remove the player's damage from the enemy's health
00003A48                          1288      
00003A48  6100 020C               1289      bsr     press_continue
00003A4C  4E75                    1290      rts
00003A4E                          1291  
00003A4E                          1292  hit_by_counter:
00003A4E  103C 000E               1293      move.b  #14,D0
00003A52  43F9 00004EB2           1294      lea     hit_by_counter_msg,A1
00003A58  4E4F                    1295      trap    #15  
00003A5A                          1296      
00003A5A  524D                    1297      add.w   #DAMAGE,A5           Move the enemy pointer to its damage value
00003A5C  1A15                    1298      move.b  (A5),D5             Store the damage value in D5
00003A5E  534D                    1299      sub.w   #DAMAGE,A5           Move the enemy pointer back to the enemy health/root
00003A60  9B38 5FF0               1300      sub.b   D5,PLAYER           Remove the enemy's damage from the player's health
00003A64                          1301      
00003A64  6100 01F0               1302      bsr     press_continue
00003A68  4E75                    1303      rts
00003A6A                          1304  
00003A6A                          1305  hit_by_magic:
00003A6A  103C 000E               1306      move.b  #14,D0
00003A6E  43F9 00004F15           1307      lea     hit_by_magic_msg,A1
00003A74  4E4F                    1308      trap    #15  
00003A76                          1309      
00003A76  524D                    1310      add.w   #DAMAGE,A5           Move the enemy pointer to its damage value
00003A78  1A15                    1311      move.b  (A5),D5             Store the damage value in D5
00003A7A  534D                    1312      sub.w   #DAMAGE,A5           Move the enemy pointer back to the enemy health/root
00003A7C  9B38 5FF0               1313      sub.b   D5,PLAYER           Remove the enemy's damage from the player's health
00003A80                          1314      
00003A80  6100 01D4               1315      bsr     press_continue
00003A84  4E75                    1316      rts
00003A86                          1317  
00003A86                          1318  hit_by_melee:
00003A86  103C 000E               1319      move.b  #14,D0
00003A8A  43F9 00004F85           1320      lea     hit_by_melee_msg,A1
00003A90  4E4F                    1321      trap    #15
00003A92                          1322      
00003A92  524D                    1323      add.w   #DAMAGE,A5           Move the enemy pointer to its damage value
00003A94  1A15                    1324      move.b  (A5),D5             Store the damage value in D5
00003A96  534D                    1325      sub.w   #DAMAGE,A5           Move the enemy pointer back to the enemy health/root
00003A98  9B38 5FF0               1326      sub.b   D5,PLAYER           Remove the enemy's damage from the player's health
00003A9C                          1327      
00003A9C  6100 01B8               1328      bsr     press_continue
00003AA0  4E75                    1329      rts
00003AA2                          1330  
00003AA2                          1331  *-------------------------------------------------------
00003AA2                          1332  *----------------------Shop State-----------------------
00003AA2                          1333  *-------------------------------------------------------
00003AA2                          1334  shop:
00003AA2  43F9 000051B3           1335      lea     shop_msg,A1     Load the shop message
00003AA8  103C 000E               1336      move.b  #14,D0          Move the number literal 14 to D0 for trap command
00003AAC  4E4F                    1337      trap    #15             Display the loaded message
00003AAE                          1338  
00003AAE  7A05                    1339      move.l  #5,D5           Move the number 4 to D5 to tell the program how many options there are
00003AB0  6100 F66C               1340      bsr     input           branch to the input subroutine
00003AB4                          1341      
00003AB4  B23C 0001               1342      CMP.B   #1,D1           Compare input with number literal 1
00003AB8  6700 0024               1343      BEQ     buy_potion      Branch to buy potion subroutine
00003ABC  B23C 0002               1344      CMP.B   #2,D1           Compare input with number literal 2
00003AC0  6700 0052               1345      BEQ     buy_key         Branch to buy key subroutine
00003AC4  B23C 0003               1346      CMP.B   #3,D1           Compare input with number literal 3
00003AC8  6700 0082               1347      BEQ     buy_torch       Branch to buy torch subroutine
00003ACC  B23C 0004               1348      CMP.B   #4,D1           Compare input with number literal 4
00003AD0  6700 00B4               1349      BEQ     upgrade_dmg     Branch to buy damage upgrade subroutine
00003AD4  B23C 0005               1350      CMP.B   #5,D1           Compare input with number literal 5
00003AD8  6700 00E4               1351      BEQ     leave_shop      Branch to leave shop subroutine
00003ADC                          1352  
00003ADC  4E75                    1353      rts                     Return from subroutine
00003ADE                          1354      
00003ADE                          1355  buy_potion:
00003ADE  0C38 0005 5FF8          1356      CMP.B   #POTION_PRICE,PLA_GOLD  Check if the player has money for a potion
00003AE4  6D00 00FA               1357      BLT     no_money                If not enough money branch to no money subroutine
00003AE8                          1358      
00003AE8  544D                    1359      add.w   #S_POTIONS,A5           Move the shop pointer to the potions
00003AEA  0C15 0000               1360      CMP.B   #0,(A5)                 Check that the shop still has potions left
00003AEE  6F00 0106               1361      BLE     no_shop_potions         If no potions left branch to no shop potions subroutine
00003AF2                          1362      
00003AF2  5B38 5FF8               1363      sub.b   #POTION_PRICE,PLA_GOLD  Remove the potion price from the player's gold
00003AF6  5315                    1364      sub.b   #1,(A5)                 Remove one potion from the shop
00003AF8  5238 5FF9               1365      add.b   #1,PLA_POTIONS          Add one potion to the player's inventory
00003AFC                          1366      
00003AFC  554D                    1367      sub.w   #S_POTIONS,A5           Move the shop pointer back to root
00003AFE                          1368      
00003AFE  6100 FC7A               1369      bsr     endl                    Break to new line
00003B02                          1370      
00003B02  43F9 00005245           1371      lea     buy_item_msg,A1         Load the buy item message into A1
00003B08  103C 000E               1372      move.b  #14,D0                  Move the number literal 14 to D0 for trap command
00003B0C  4E4F                    1373      trap    #15                     Display the loaded message
00003B0E                          1374      
00003B0E  6100 0146               1375      bsr     press_continue          Pause for user input
00003B12                          1376      
00003B12  4E75                    1377      rts                             Return from subroutine
00003B14                          1378      
00003B14                          1379  buy_key:
00003B14  0C38 000F 5FF8          1380      CMP.B   #KEY_PRICE,PLA_GOLD     Check if the player has money for a key
00003B1A  6D00 00C4               1381      BLT     no_money                If not enough money branch to no money subroutine
00003B1E                          1382      
00003B1E  564D                    1383      add.w   #S_KEYS,A5              Move the shop pointer to the keys
00003B20  0C15 0000               1384      CMP.B   #0,(A5)                 Check that the shop still has keys left
00003B24  6F00 00E8               1385      BLE     no_shop_keys            If no keys left branch to no shop keys subroutine
00003B28                          1386      
00003B28  0438 000F 5FF8          1387      sub.b   #KEY_PRICE,PLA_GOLD     Remove the key price from the player's gold
00003B2E  5315                    1388      sub.b   #1,(A5)                 Remove one key from the shop
00003B30  5238 5FFA               1389      add.b   #1,PLA_KEYS             Add one key to the player's inventory
00003B34                          1390      
00003B34  574D                    1391      sub.w   #S_KEYS,A5              Move the shop pointer back to root
00003B36                          1392      
00003B36  6100 FC42               1393      bsr     endl                    Break to new line
00003B3A                          1394      
00003B3A  43F9 00005245           1395      lea     buy_item_msg,A1         Load the buy item message into A1
00003B40  103C 000E               1396      move.b  #14,D0                  Move the number literal 14 to D0 for trap command
00003B44  4E4F                    1397      trap    #15                     Display the loaded message
00003B46                          1398      
00003B46  6100 010E               1399      bsr     press_continue          Pause for user input
00003B4A                          1400      
00003B4A  4E75                    1401      rts                             Return from subroutine
00003B4C                          1402      
00003B4C                          1403  buy_torch:
00003B4C  0C38 000A 5FF8          1404      CMP.B   #TORCH_PRICE,PLA_GOLD   Check if the player has money for a torch
00003B52  6D00 008C               1405      BLT     no_money                If not enough money branch to no money subroutine
00003B56                          1406      
00003B56  584D                    1407      add.w   #S_TORCHES,A5           Move the shop pointer to the torches
00003B58  0C15 0000               1408      CMP.B   #0,(A5)                 Check that the shop still has torches left
00003B5C  6F00 00C8               1409      BLE     no_shop_torches         If no torches left branch to no shop torches subroutine
00003B60                          1410      
00003B60  0438 000A 5FF8          1411      sub.b   #TORCH_PRICE,PLA_GOLD   Remove the torch price from the player's gold
00003B66  5315                    1412      sub.b   #1,(A5)                 Remove one torch from the shop
00003B68  0638 000F 5FFB          1413      add.b   #LIFE_PER_TORCH,PLA_TORCH           Add ten to the player's torches life
00003B6E                          1414      
00003B6E  594D                    1415      sub.w   #S_TORCHES,A5           Move the shop pointer back to root
00003B70                          1416      
00003B70  6100 FC08               1417      bsr     endl                    Break to new line
00003B74                          1418      
00003B74  43F9 00005245           1419      lea     buy_item_msg,A1         Load the buy item message into A1
00003B7A  103C 000E               1420      move.b  #14,D0                  Move the number literal 14 to D0 for trap command
00003B7E  4E4F                    1421      trap    #15                     Display the loaded message
00003B80                          1422      
00003B80  6100 00D4               1423      bsr     press_continue          Pause for user input
00003B84                          1424      
00003B84  4E75                    1425      rts                             Return from subroutine
00003B86                          1426      
00003B86                          1427  upgrade_dmg:
00003B86  0C38 0014 5FF8          1428      CMP.B   #DAMAGE_UP_PRICE,PLA_GOLD   Check if the player has money for a damage upgrade
00003B8C  6D00 0052               1429      BLT     no_money                    If not enough money branch to no money subroutine
00003B90                          1430      
00003B90  5A4D                    1431      add.w   #S_DAMAGE_IN,A5         Move the shop pointer to the damage upgrades
00003B92  0C15 0000               1432      CMP.B   #0,(A5)                 Check that the shop still has damage upgrades left
00003B96  6F00 00A6               1433      BLE     no_shop_damage_up       If no damage upgrades left branch to no shop torches subroutine
00003B9A                          1434      
00003B9A  0438 0014 5FF8          1435      sub.b   #DAMAGE_UP_PRICE,PLA_GOLD   Remove the damage upgrade price from the player's gold
00003BA0  5315                    1436      sub.b   #1,(A5)                     Remove one damage upgrade from the shop
00003BA2  5238 5FF1               1437      add.b   #1,PLA_DAMAGE               Add one to the player's damage value
00003BA6                          1438      
00003BA6  5B4D                    1439      sub.w   #S_DAMAGE_IN,A5         Move the shop pointer back to root
00003BA8                          1440      
00003BA8  6100 FBD0               1441      bsr     endl                    Break to new line
00003BAC                          1442          
00003BAC  43F9 00005245           1443      lea     buy_item_msg,A1         Load the buy item message into A1
00003BB2  103C 000E               1444      move.b  #14,D0                  Move the number literal 14 to D0 for trap command
00003BB6  4E4F                    1445      trap    #15                     Display the loaded message
00003BB8                          1446      
00003BB8  6100 009C               1447      bsr     press_continue          Pause for user input
00003BBC                          1448      
00003BBC  4E75                    1449      rts                             Return from subroutine
00003BBE                          1450      
00003BBE                          1451  leave_shop:
00003BBE  6100 FBBA               1452      bsr     endl                Break to new line
00003BC2                          1453  
00003BC2  3638 5FF6               1454      move.w  PLA_P_POS,D3        Move the player's previous position to D3 to avoid treating it as a negative number
00003BC6  2C43                    1455      move.l  D3,A6               Move the player to their position before entering the shop
00003BC8  11FC 0005 5FF3          1456      move.b  #5,GAME_STATE       Switch game state to movement
00003BCE                          1457      
00003BCE  43F9 0000521F           1458      lea     leave_shop_msg,A1   Load escape message
00003BD4  103C 000E               1459      move.b  #14,D0              Move literal for trap command
00003BD8  4E4F                    1460      trap    #15                 Trap 15 to display messgae
00003BDA                          1461      
00003BDA  6100 007A               1462      bsr     press_continue      Pause until the player presses to continue
00003BDE  4E75                    1463      rts                         Return from subroutine
00003BE0                          1464      
00003BE0                          1465  no_money:
00003BE0  6100 FB98               1466      bsr     endl            New line
00003BE4                          1467      
00003BE4  43F9 00005273           1468      lea     no_money_msg,A1 Load the no money message
00003BEA  103C 000E               1469      move.b  #14,D0          Move the number literal 14 to D0 for trap command
00003BEE  4E4F                    1470      trap    #15             Display the loaded message
00003BF0                          1471      
00003BF0  6100 0064               1472      bsr     press_continue  Wait for player input
00003BF4  4E75                    1473      rts                     Return from subroutine
00003BF6                          1474      
00003BF6                          1475  no_shop_potions:
00003BF6  6100 FB82               1476      bsr     endl            New line
00003BFA                          1477  
00003BFA  43F9 00005293           1478      lea     no_item_msg,A1  Load the no money message
00003C00  103C 000E               1479      move.b  #14,D0          Move the number literal 14 to D0 for trap command
00003C04  4E4F                    1480      trap    #15             Display the loaded message
00003C06  554D                    1481      sub.w   #S_POTIONS,A5   Move the shop pointer back to root
00003C08                          1482      
00003C08  6100 004C               1483      bsr     press_continue  Wait for player input
00003C0C  4E75                    1484      rts                     Return from subroutine
00003C0E                          1485      
00003C0E                          1486  no_shop_keys:
00003C0E  6100 FB6A               1487      bsr     endl            New line
00003C12                          1488  
00003C12  43F9 00005293           1489      lea     no_item_msg,A1  Load the no money message
00003C18  103C 000E               1490      move.b  #14,D0          Move the number literal 14 to D0 for trap command
00003C1C  4E4F                    1491      trap    #15             Display the loaded message
00003C1E  574D                    1492      sub.w   #S_KEYS,A5      Move the shop pointer back to root
00003C20                          1493      
00003C20  6100 0034               1494      bsr     press_continue  Wait for player input
00003C24  4E75                    1495      rts                     Return from subroutine
00003C26                          1496      
00003C26                          1497  no_shop_torches:
00003C26  6100 FB52               1498      bsr     endl            New line
00003C2A                          1499  
00003C2A  43F9 00005293           1500      lea     no_item_msg,A1  Load the no money message
00003C30  103C 000E               1501      move.b  #14,D0          Move the number literal 14 to D0 for trap command
00003C34  4E4F                    1502      trap    #15             Display the loaded message
00003C36  594D                    1503      sub.w   #S_TORCHES,A5   Move the shop pointer back to root
00003C38                          1504      
00003C38  6100 001C               1505      bsr     press_continue  Wait for player input
00003C3C  4E75                    1506      rts                     Return from subroutine
00003C3E                          1507  
00003C3E                          1508  no_shop_damage_up:
00003C3E  6100 FB3A               1509      bsr     endl            New line
00003C42                          1510  
00003C42  43F9 00005293           1511      lea     no_item_msg,A1  Load the no money message
00003C48  103C 000E               1512      move.b  #14,D0          Move the number literal 14 to D0 for trap command
00003C4C  4E4F                    1513      trap    #15             Display the loaded message
00003C4E  5B4D                    1514      sub.w   #S_DAMAGE_IN,A5 Move the shop pointer back to root
00003C50                          1515      
00003C50  6100 0004               1516      bsr     press_continue  Wait for player input
00003C54  4E75                    1517      rts                     Return from subroutine
00003C56                          1518  
00003C56                          1519  *-------------------------------------------------------
00003C56                          1520  *-------------------Misc Subroutines--------------------
00003C56                          1521  *-------------------------------------------------------
00003C56                          1522  press_continue:
00003C56  6100 FB22               1523      bsr     endl
00003C5A                          1524  
00003C5A  43F9 00004BC3           1525      lea     continue_msg,A1 Load message into A1
00003C60  103C 000E               1526      move.b  #14,D0          Move the trap command to display a message
00003C64  4E4F                    1527      trap    #15             display the "press any ket to continue" text
00003C66                          1528      
00003C66  103C 0004               1529      move.b  #4,D0           Move the trap command to take input
00003C6A  4E4F                    1530      trap    #15             take input to freeze the game
00003C6C  4E75                    1531      rts                     Return from the 'press continue' subroutine
00003C6E                          1532      
00003C6E                          1533  random_number:              *Psuedo random number generator, courtesy of Pdraig
00003C6E  103C 0008               1534      move.b  #8,D0
00003C72  4E4F                    1535      trap    #15
00003C74  C2BC 005FFFFF           1536      and.l   #$5FFFFF,d1     prevent overflow in divu
00003C7A  82FC 0064               1537      divu    #100,D1         time count / 100
00003C7E  4841                    1538      swap    D1              swap upper and lower words of D1 to put remainder in low word
00003C80  5241                    1539      addq.w  #1,D1           d1.w contains number from 1 to 100
00003C82  3401                    1540      move    D1,D2           d2 = d1
00003C84  4281                    1541      clr.l   D1
00003C86                          1542      
00003C86  4E75                    1543      rts                     Returns from random generation subroutine
00003C88                          1544      
00003C88                          1545  return:   *Subroutine to branch to to break out of a subroutine when a condition is met
00003C88  4E75                    1546      rts
00003C8A                          1547      
00003C8A                          1548  take_potion:
00003C8A  0C38 0000 5FF9          1549      CMP.B   #0,PLA_POTIONS      Check if the player has potions to drink
00003C90  6F00 001A               1550      BLE     no_potions          If the potions are zero or below branch to no_potions
00003C94                          1551      
00003C94  5638 5FF0               1552      add.b   #3,PLAYER           Add 3 to the player's health
00003C98  5338 5FF9               1553      sub.b   #1,PLA_POTIONS      Remove one potion
00003C9C                          1554      
00003C9C  43F9 0000512D           1555      lea     take_potion_msg,A1  Load the take potion message
00003CA2  103C 000E               1556      move.b  #14,D0              Move the number literal 14 to D0 for trap command
00003CA6  4E4F                    1557      trap    #15                 Display the loaded message
00003CA8                          1558      
00003CA8  61AC                    1559      bsr     press_continue      Wait for player input
00003CAA                          1560      
00003CAA  4E75                    1561      rts                         Return from subroutine
00003CAC                          1562  
00003CAC                          1563  no_potions:
00003CAC  43F9 00005167           1564      lea     no_potions_msg,A1   Load the no potions message
00003CB2  103C 000E               1565      move.b  #14,D0              Move the number literal 14 to D0 for trap command
00003CB6  4E4F                    1566      trap    #15                 Display the loaded message
00003CB8                          1567      
00003CB8  619C                    1568      bsr     press_continue      Wait for player input
00003CBA                          1569      
00003CBA  4E75                    1570      rts                         Return from subroutine
00003CBC                          1571      
00003CBC                          1572  decrement_torch:
00003CBC  0C38 0000 5FFB          1573      CMP.B   #0,PLA_TORCH    Compare the torch life to 0
00003CC2  6FC4                    1574      BLE     return          If it's less than or equalt to zero, return
00003CC4  5338 5FFB               1575      sub.b   #1,PLA_TORCH    Decrement by one if it's above zero
00003CC8  4E75                    1576      rts                     Return from subroutine
00003CCA                          1577      
00003CCA                          1578  change_font_colour:        * Changes the font colour to the colour loaded in D1
00003CCA  103C 0015               1579      move.b  #21,D0      Move #21 to D0 for trap command 21
00003CCE  243C 01090000           1580      move.l  #FONT,D2    Move the font to D2
00003CD4  4E4F                    1581      trap    #15         Set the colour
00003CD6  4281                    1582      clr.l   D1          Clear D1 for later use
00003CD8  4282                    1583      clr.l   D2          Clear D2 for later use
00003CDA  4E75                    1584      rts                 Return from subroutine
00003CDC                          1585      
00003CDC                          1586  *-------------------------------------------------------
00003CDC                          1587  *----------------------Draw loop------------------------
00003CDC                          1588  *-------------------------------------------------------
00003CDC                          1589  draw_loop:
00003CDC  45F9 00008080           1590      lea     MAP_START_POINT,A2     Load starting memory location into A7
00003CE2  1C3C 0000               1591      move.b  #0,D6           Data register used for rows
00003CE6  1E3C 0000               1592      move.b  #0,D7           Data register used for columns
00003CEA  7200                    1593      move.l  #0,D1           Clear the D1 data register
00003CEC                          1594      
00003CEC  6100 0004               1595      bsr     loop_rows       Loop for every row
00003CF0  4E75                    1596      rts
00003CF2                          1597      
00003CF2                          1598  loop_rows:
00003CF2  BC7C 000F               1599      CMP     #MAP_LENGTH,D6          Check the rows don't go out of bounds
00003CF6  6E90                    1600      BGT     return          If the rows are greater than 22 end the loop
00003CF8                          1601      
00003CF8  1E3C 0000               1602      move.b  #0,D7           Reset to column 0
00003CFC  6100 000A               1603      bsr     loop_columns    Loop for every column
00003D00                          1604      
00003D00  5206                    1605      add.b   #1,D6           Add to the rows
00003D02                          1606      
00003D02  6100 FA76               1607      bsr     endl            Break to the next line
00003D06  60EA                    1608      bra     loop_rows       Loop through the rows again
00003D08                          1609      
00003D08                          1610  loop_columns:
00003D08  BE3C 000F               1611      CMP.B   #15,D7              Check the rows don't go out of bounds
00003D0C  6E00 FF7A               1612      BGT     return              If the rows are greater than 22 end the loop
00003D10                          1613      
00003D10  6100 0018               1614      bsr     draw_tile           Draw the current tile
00003D14  6100 00BE               1615      bsr     check_for_player    Draw the player in the current tile if they're there
00003D18  6100 0102               1616      bsr     check_for_enemies   Draw an enemy in the current tile if they is one there
00003D1C  6100 01E0               1617      bsr     check_for_win_point Draw the win point in the current tile if it's there
00003D20  6100 0170               1618      bsr     check_for_shops     Draw a shop in the current tile if there is one
00003D24                          1619      
00003D24  5207                    1620      add.b   #1,D7               Add to the column count
00003D26  524A                    1621      add     #1,A2               Move to the next memory location
00003D28  60DE                    1622      bra     loop_columns        Loop the columns again
00003D2A                          1623      
00003D2A                          1624  *-------------------------------------------------------
00003D2A                          1625  *----------------------Draw tile------------------------
00003D2A                          1626  *-------------------------------------------------------
00003D2A                          1627  *Draws the tile at the address in the address register A2
00003D2A                          1628  draw_tile:
00003D2A  0C12 00FF               1629      CMP.B   #255,(A2)           Check if the value is undifined
00003D2E  6700 005E               1630      BEQ     draw_blocked_tile   Draw the blank tile
00003D32                          1631      
00003D32  0C12 0001               1632      CMP.B   #1,(A2)
00003D36  6700 0064               1633      BEQ     draw_both_tile
00003D3A  0C12 0003               1634      CMP.B   #3,(A2)
00003D3E  6700 006A               1635      BEQ     draw_left_tile
00003D42  0C12 0004               1636      CMP.B   #4,(A2)
00003D46  6700 0062               1637      BEQ     draw_left_tile
00003D4A  0C12 0005               1638      CMP.B   #5,(A2)
00003D4E  6700 0068               1639      BEQ     draw_right_tile
00003D52  0C12 0006               1640      CMP.B   #6,(A2)
00003D56  6700 0060               1641      BEQ     draw_right_tile
00003D5A  0C12 0008               1642      CMP.B   #8,(A2)
00003D5E  6700 004A               1643      BEQ     draw_left_tile
00003D62  0C12 000A               1644      CMP.B   #10,(A2)
00003D66  6700 0050               1645      BEQ     draw_right_tile
00003D6A  0C12 000B               1646      CMP.B   #11,(A2)
00003D6E  6700 003A               1647      BEQ     draw_left_tile
00003D72  0C12 000C               1648      CMP.B   #12,(A2)
00003D76  6700 0024               1649      BEQ     draw_both_tile
00003D7A  0C12 000D               1650      CMP.B   #13,(A2)
00003D7E  6700 0038               1651      BEQ     draw_right_tile
00003D82  0C12 000E               1652      CMP.B   #14,(A2)
00003D86  6700 0014               1653      BEQ     draw_both_tile
00003D8A                          1654      
00003D8A  6000 003A               1655      BRA     draw_blank_tile     Draw the blank tile
00003D8E                          1656      
00003D8E                          1657  draw_blocked_tile:
00003D8E  43F9 00004BF1           1658      lea     blocked_tile,A1
00003D94  103C 000E               1659      move.b  #14,D0
00003D98  4E4F                    1660      trap    #15
00003D9A  4E75                    1661      rts
00003D9C                          1662      
00003D9C                          1663  draw_both_tile:
00003D9C  43F9 00004BE5           1664      lea     both_tile,A1
00003DA2  103C 000E               1665      move.b  #14,D0
00003DA6  4E4F                    1666      trap    #15
00003DA8  4E75                    1667      rts
00003DAA                          1668      
00003DAA                          1669  draw_left_tile:
00003DAA  43F9 00004BE9           1670      lea     left_tile,A1
00003DB0  103C 000E               1671      move.b  #14,D0
00003DB4  4E4F                    1672      trap    #15
00003DB6  4E75                    1673      rts
00003DB8                          1674      
00003DB8                          1675  draw_right_tile:
00003DB8  43F9 00004BED           1676      lea     right_tile,A1
00003DBE  103C 000E               1677      move.b  #14,D0
00003DC2  4E4F                    1678      trap    #15
00003DC4  4E75                    1679      rts
00003DC6                          1680      
00003DC6                          1681  draw_blank_tile:
00003DC6  43F9 00004BE1           1682      lea     blank_tile,A1
00003DCC  103C 000E               1683      move.b  #14,D0
00003DD0  4E4F                    1684      trap    #15
00003DD2  4E75                    1685      rts
00003DD4                          1686      
00003DD4                          1687  check_for_player:
00003DD4  B5CE                    1688      CMP.L   A6,A2
00003DD6  6700 0004               1689      BEQ     draw_player
00003DDA  4E75                    1690      rts
00003DDC                          1691      
00003DDC                          1692  draw_player:
00003DDC  323C 00FF               1693      move.w  #255,D1         Move the word #255 to D1 to set the type of trap 11
00003DE0  103C 000B               1694      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
00003DE4  4E4F                    1695      trap    #15             Trap to get the cursor position in D1
00003DE6                          1696      
00003DE6  0441 0200               1697      sub.w   #512,D1         Move the cursor back by two columns
00003DEA  4E4F                    1698      trap    #15             Set the cursor position with trap command 11
00003DEC                          1699      
00003DEC  2601                    1700      move.l  D1,D3          Move the value in D1 to D3 for storage
00003DEE                          1701      
00003DEE  223C 0000FF00           1702      move.l  #GREEN,D1       Move the colour green to D1
00003DF4  6100 FED4               1703      bsr     change_font_colour  Change the font colour
00003DF8                          1704      
00003DF8  43F9 00004BF5           1705      lea     player_mark,A1  load the player symbol
00003DFE  103C 000E               1706      move.b  #14,D0          Move #14 to D0 for trap command 14
00003E02  4E4F                    1707      trap    #15             Draw the player mark
00003E04                          1708      
00003E04  223C 00FFFFFF           1709      move.l  #WHITE,D1       Move the colour white to D1
00003E0A  6100 FEBE               1710      bsr     change_font_colour  Change the font colour
00003E0E                          1711      
00003E0E  2203                    1712      move.l  D3,D1           Move the value in D3 to D1 for previous cursor position
00003E10                          1713      
00003E10  0641 0200               1714      add.w   #512,D1         Move the cursor position two columns forward
00003E14  103C 000B               1715      move.b  #11,D0          Move byte #11 for trap command 11 
00003E18  4E4F                    1716      trap    #15             Set the cursor position
00003E1A                          1717      
00003E1A  4E75                    1718      rts
00003E1C                          1719      
00003E1C                          1720  check_for_enemies:
00003E1C  4BF8 6000               1721      lea     FIRST_ENEMY,A5  Load the memory address of the first enemy
00003E20  1A3C 0000               1722      move.b  #0,D5           Move the starting enemy number to D5
00003E24  6100 0004               1723      bsr     loop_enemies    Loop through all enemies
00003E28  4E75                    1724      rts                     Return from subroutine
00003E2A                          1725      
00003E2A                          1726  loop_enemies:
00003E2A  6100 0012               1727      bsr     check_for_enemy Check for an enemy
00003E2E                          1728      
00003E2E  BA3C 0002               1729      CMP.B   #ENEMY_MAX,D5   Compare the enemy number with the maximum enemy number
00003E32  6C00 FE54               1730      BGE     return          Return from the loop if the current enemy number is greater than or equal to the max
00003E36                          1731      
00003E36  5205                    1732      add.b   #1,D5           Add to the current enemy number
00003E38  DAFC 000C               1733      add.w   #12,A5          Add to the current enemy pointer to move to the next enemy (16 for next enemy - 4 to get back from position)
00003E3C  60EC                    1734      bra     loop_enemies    Keep looping the enemies
00003E3E                          1735      
00003E3E                          1736  check_for_enemy:
00003E3E  564D                    1737      add.w   #ALIVE,A5       Add to the enemy memory address to get the enemy's alive state
00003E40  0C1D 0000               1738      CMP.B   #0,(A5)+        Check if the enemy is alive
00003E44  6700 FE42               1739      BEQ     return          Return from the subroutine if not
00003E48                          1740      
00003E48  3615                    1741      move.w  (A5),D3         Move the enemy coordinates into data register D3 for large-value comparisons
00003E4A  B5C3                    1742      CMP.L   D3,A2           Check if the enemy is in the current position
00003E4C  6700 0004               1743      BEQ     draw_enemy      Draw the enemy if it is
00003E50  4E75                    1744      rts                     Return if the enemy is not in the current position
00003E52                          1745      
00003E52                          1746  draw_enemy:
00003E52  323C 00FF               1747      move.w  #255,D1         Move the word #255 to D1 to set the type of trap 11
00003E56  103C 000B               1748      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
00003E5A  4E4F                    1749      trap    #15             Trap to get the cursor position in D1
00003E5C                          1750      
00003E5C  0441 0200               1751      sub.w   #512,D1         Move the cursor back by two columns
00003E60  4E4F                    1752      trap    #15             Set the cursor position with trap command 11
00003E62                          1753      
00003E62  2601                    1754      move.l  D1,D3          Move the value in D1 to D3 for storage
00003E64                          1755      
00003E64  223C 000000FF           1756      move.l  #RED,D1         Move the colour red to D1
00003E6A  6100 FE5E               1757      bsr     change_font_colour  Change the font colour
00003E6E                          1758      
00003E6E  43F9 00004BF7           1759      lea     enemy_mark,A1   load the enemy symbol
00003E74  103C 000E               1760      move.b  #14,D0          Move #14 to D0 for trap command 14
00003E78  4E4F                    1761      trap    #15             Draw the player mark
00003E7A                          1762      
00003E7A  223C 00FFFFFF           1763      move.l  #WHITE,D1       Move the colour white to D1
00003E80  6100 FE48               1764      bsr     change_font_colour  Change the font colour
00003E84                          1765      
00003E84  2203                    1766      move.l  D3,D1           Move the value in D3 to D1 for previous cursor position
00003E86                          1767      
00003E86  0641 0200               1768      add.w   #512,D1         Move the cursor position two columns forward
00003E8A  103C 000B               1769      move.b  #11,D0          Move byte #11 for trap command 11 
00003E8E  4E4F                    1770      trap    #15             Set the cursor position
00003E90                          1771      
00003E90  4E75                    1772      rts 
00003E92                          1773      
00003E92                          1774  check_for_shops:
00003E92  4BF8 6500               1775      lea     FIRST_SHOP,A5   Load the memory address of the first shop
00003E96  1A3C 0000               1776      move.b  #0,D5           Move the starting shop number to D5
00003E9A  6100 0004               1777      bsr     loop_shops      Loop through all shops
00003E9E  4E75                    1778      rts                     Return from subroutine
00003EA0                          1779      
00003EA0                          1780  loop_shops:
00003EA0  6100 0012               1781      bsr     check_for_shop  Check for a shop
00003EA4                          1782      
00003EA4  BA3C 0002               1783      CMP.B   #SHOP_MAX,D5    Compare the shop number with the maximum shop number
00003EA8  6C00 FDDE               1784      BGE     return          Return from the loop if the current shop number is greater than or equal to the max
00003EAC                          1785      
00003EAC  5205                    1786      add.b   #1,D5           Add to the current shop number
00003EAE  DAFC 0010               1787      add.w   #16,A5          Add to the current shop pointer to move to the next shop
00003EB2  60EC                    1788      bra     loop_shops      Keep looping the shops
00003EB4                          1789      
00003EB4                          1790  check_for_shop:
00003EB4  3615                    1791      move.w  (A5),D3         Move the shop coordinates into data register D3 for large-value comparisons
00003EB6  B5C3                    1792      CMP.L   D3,A2           Check if the shop is in the current position
00003EB8  6700 0004               1793      BEQ     draw_shop       Draw the shop if it is
00003EBC  4E75                    1794      rts                     Return if the shop is not in the current position
00003EBE                          1795      
00003EBE                          1796  draw_shop:
00003EBE  323C 00FF               1797      move.w  #255,D1         Move the word #255 to D1 to set the type of trap 11
00003EC2  103C 000B               1798      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
00003EC6  4E4F                    1799      trap    #15             Trap to get the cursor position in D1
00003EC8                          1800      
00003EC8  0441 0200               1801      sub.w   #512,D1         Move the cursor back by two columns
00003ECC  4E4F                    1802      trap    #15             Set the cursor position with trap command 11
00003ECE                          1803      
00003ECE  2601                    1804      move.l  D1,D3           Move the value in D1 to D3 for storage
00003ED0                          1805      
00003ED0  223C 00F000F0           1806      move.l  #PURPLE,D1      Move the colour red to D1
00003ED6  6100 FDF2               1807      bsr     change_font_colour  Change the font colour
00003EDA                          1808      
00003EDA  43F9 00004BFB           1809      lea     shop_mark,A1    load the enemy symbol
00003EE0  103C 000E               1810      move.b  #14,D0          Move #14 to D0 for trap command 14
00003EE4  4E4F                    1811      trap    #15             Draw the player mark
00003EE6                          1812      
00003EE6  223C 00FFFFFF           1813      move.l  #WHITE,D1       Move the colour white to D1
00003EEC  6100 FDDC               1814      bsr     change_font_colour  Change the font colour
00003EF0                          1815      
00003EF0  2203                    1816      move.l  D3,D1           Move the value in D3 to D1 for previous cursor position
00003EF2                          1817      
00003EF2  0641 0200               1818      add.w   #512,D1         Move the cursor position two columns forward
00003EF6  103C 000B               1819      move.b  #11,D0          Move byte #11 for trap command 11 
00003EFA  4E4F                    1820      trap    #15             Set the cursor position
00003EFC                          1821      
00003EFC  4E75                    1822      rts
00003EFE                          1823  
00003EFE                          1824  check_for_win_point:
00003EFE  B5FC 00008156           1825      CMP.L   #WIN_POINT,A2   Check if the win point is in the current tile
00003F04  6700 0004               1826      BEQ     draw_win_point  Branch to draw the win point if so
00003F08  4E75                    1827      rts                     Return from subroutine if not
00003F0A                          1828      
00003F0A                          1829  draw_win_point:
00003F0A  323C 00FF               1830      move.w  #255,D1         Move the word #255 to D1 to set the type of trap 11
00003F0E  103C 000B               1831      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
00003F12  4E4F                    1832      trap    #15             Trap to get the cursor position in D1
00003F14                          1833      
00003F14  0441 0200               1834      sub.w   #512,D1         Move the cursor back by two columns
00003F18  4E4F                    1835      trap    #15             Set the cursor position with trap command 11
00003F1A                          1836      
00003F1A  2601                    1837      move.l  D1,D3           Move the value in D1 to D3 for storage
00003F1C                          1838      
00003F1C  223C 00FF0000           1839      move.l  #BLUE,D1        Move the colour blue to D1
00003F22  6100 FDA6               1840      bsr     change_font_colour  Change the font colour
00003F26                          1841      
00003F26  43F9 00004BF9           1842      lea     win_point_mark,A1   load the win point symbol
00003F2C  103C 000E               1843      move.b  #14,D0              Move #14 to D0 for trap command 14
00003F30  4E4F                    1844      trap    #15                 Draw the win point mark
00003F32                          1845      
00003F32  223C 00FFFFFF           1846      move.l  #WHITE,D1       Move the colour white to D1
00003F38  6100 FD90               1847      bsr     change_font_colour  Change the font colour
00003F3C                          1848      
00003F3C  2203                    1849      move.l  D3,D1           Move the value in D3 to D1 for previous cursor position
00003F3E                          1850      
00003F3E  0641 0200               1851      add.w   #512,D1         Move the cursor position two columns forward
00003F42  103C 000B               1852      move.b  #11,D0          Move byte #11 for trap command 11 
00003F46  4E4F                    1853      trap    #15             Set the cursor position
00003F48                          1854      
00003F48  4E75                    1855      rts
00003F4A                          1856      
00003F4A                          1857  *-------------------------------------------------------
00003F4A                          1858  *-------------------Setup the world---------------------
00003F4A                          1859  *-------------------------------------------------------
00003F4A                          1860  setup_world:
00003F4A  13FC 000E 0000814A      1861      move.b  #14,$814A   Setup the starting corridor
00003F52  13FC 0007 0000813A      1862      move.b  #7,$813A    T junction upwards from starting corridor
00003F5A  13FC 0004 00008139      1863      move.b  #4,$8139    Left corridor
00003F62  13FC 0001 00008129      1864      move.b  #1,$8129
00003F6A  13FC 0001 00008119      1865      move.b  #1,$8119
00003F72                          1866      
00003F72  13FC 0004 00008108      1867      move.b  #4,$8108    First shop
00003F7A  13FC 0000 00008109      1868      move.b  #0,$8109    Entrance
00003F82  13FC 0005 0000810A      1869      move.b  #5,$810A
00003F8A  13FC 0008 000080F8      1870      move.b  #8,$80F8
00003F92  13FC 0000 000080F9      1871      move.b  #0,$80F9
00003F9A  13FC 000A 000080FA      1872      move.b  #10,$80FA
00003FA2  13FC 0003 000080E8      1873      move.b  #3,$80E8
00003FAA  13FC 0007 000080E9      1874      move.b  #7,$80E9
00003FB2  13FC 0006 000080EA      1875      move.b  #6,$80EA
00003FBA                          1876      
00003FBA  13FC 0005 0000813B      1877      move.b  #5,$813B    Right corridor
00003FC2  13FC 0001 0000812B      1878      move.b  #1,$812B
00003FCA  13FC 0001 0000811B      1879      move.b  #1,$811B
00003FD2  13FC 0008 0000810B      1880      move.b  #8,$810B    Path continues up with a turn off to the right
00003FDA                          1881      
00003FDA  13FC 0002 0000810C      1882      move.b  #2,$810C    Right path
00003FE2  13FC 0002 0000810D      1883      move.b  #2,$810D    Continue right
00003FEA  13FC 0005 0000810E      1884      move.b  #5,$810E    Path upwards and to the left
00003FF2  13FC 0001 000080FE      1885      move.b  #1,$80FE    Leads upwards into a room
00003FFA                          1886      
00003FFA  13FC 0004 000080ED      1887      move.b  #4,$80ED    First monster room
00004002  13FC 0000 000080EE      1888      move.b  #0,$80EE    Entrance
0000400A  13FC 0005 000080EF      1889      move.b  #5,$80EF
00004012  13FC 0008 000080DD      1890      move.b  #8,$80DD
0000401A  13FC 0000 000080DE      1891      move.b  #0,$80DE
00004022  13FC 000A 000080DF      1892      move.b  #10,$80DF
0000402A  13FC 0003 000080CD      1893      move.b  #3,$80CD
00004032  13FC 0007 000080CE      1894      move.b  #7,$80CE
0000403A  13FC 0006 000080CF      1895      move.b  #6,$80CF
00004042                          1896      
00004042  13FC 0001 000080FB      1897      move.b  #1,$80FB    Path that continues up
0000404A  13FC 0001 000080EB      1898      move.b  #1,$80EB    Path continues upwards
00004052  13FC 0001 000080DB      1899      move.b  #1,$80DB
0000405A                          1900      
0000405A                          1901      *Bottom row of room
0000405A  13FC 0004 000080C8      1902      move.b  #4,$80C8    Large monster room with locked door
00004062  13FC 0009 000080C9      1903      move.b  #9,$80C9
0000406A  13FC 0009 000080CA      1904      move.b  #9,$80CA
00004072  13FC 0000 000080CB      1905      move.b  #0,$80CB    Entrance
0000407A  13FC 0005 000080CC      1906      move.b  #5,$80CC
00004082                          1907      *Middle row of room
00004082  13FC 0000 000080B8      1908      move.b  #0,$80B8    Exit to the left
0000408A  13FC 0000 000080B9      1909      move.b  #0,$80B9
00004092  13FC 0000 000080BA      1910      move.b  #0,$80BA
0000409A  13FC 0000 000080BB      1911      move.b  #0,$80BB
000040A2  13FC 000A 000080BC      1912      move.b  #10,$80BC
000040AA                          1913      *Top row of room
000040AA  13FC 0003 000080A8      1914      move.b  #3,$80A8
000040B2  13FC 0007 000080A9      1915      move.b  #7,$80A9
000040BA  13FC 0007 000080AA      1916      move.b  #7,$80AA
000040C2  13FC 0007 000080AB      1917      move.b  #7,$80AB    Locked door
000040CA  13FC 0006 000080AC      1918      move.b  #6,$80AC
000040D2                          1919      
000040D2  13FC 0002 000080B7      1920      move.b  #2,$80B7    Exit large room leftwards
000040DA  13FC 0002 000080B6      1921      move.b  #2,$80B6    Continue to the left
000040E2  13FC 0007 000080B5      1922      move.b  #7,$80B5    Continue to the left and a path downwards
000040EA  13FC 0002 000080B4      1923      move.b  #2,$80B4    Continue to the left
000040F2                          1924      
000040F2  13FC 0003 000080A1      1925      move.b  #3,$80A1    Room to the left
000040FA  13FC 0007 000080A2      1926      move.b  #7,$80A2
00004102  13FC 0006 000080A3      1927      move.b  #6,$80A3
0000410A  13FC 0008 000080B1      1928      move.b  #8,$80B1
00004112  13FC 0000 000080B2      1929      move.b  #0,$80B2
0000411A  13FC 0000 000080B3      1930      move.b  #0,$80B3    Entrance to the right
00004122  13FC 0004 000080C1      1931      move.b  #4,$80C1
0000412A  13FC 0009 000080C2      1932      move.b  #9,$80C2
00004132  13FC 0005 000080C3      1933      move.b  #5,$80C3
0000413A                          1934      
0000413A  13FC 0001 000080C5      1935      move.b  #1,$80C5    Path leading downwards
00004142  13FC 0001 000080D5      1936      move.b  #1,$80D5
0000414A  13FC 000A 000080E5      1937      move.b  #10,$80E5   Path leading downward and to the left
00004152  13FC 0002 000080E4      1938      move.b  #2,$80E4    Path on the left
0000415A  13FC 0002 000080E3      1939      move.b  #2,$80E3
00004162  13FC 0003 000080E2      1940      move.b  #3,$80E2    Path takes a turn downwards
0000416A  13FC 0001 000080F2      1941      move.b  #1,$80F2    Path continues downwards
00004172                          1942      
00004172  13FC 0003 00008101      1943      move.b  #3,$8101    Regular enemy room
0000417A  13FC 0000 00008102      1944      move.b  #0,$8102    Entrance
00004182  13FC 0006 00008103      1945      move.b  #6,$8103
0000418A  13FC 0008 00008111      1946      move.b  #8,$8111
00004192  13FC 0000 00008112      1947      move.b  #0,$8112
0000419A  13FC 000A 00008113      1948      move.b  #10,$8113
000041A2  13FC 0004 00008121      1949      move.b  #4,$8121
000041AA  13FC 0009 00008122      1950      move.b  #9,$8122
000041B2  13FC 000A 00008123      1951      move.b  #10,$8123   Exit at the bottom
000041BA                          1952      
000041BA  13FC 0001 000080F5      1953      move.b  #1,$80F5    Path leading downward
000041C2  13FC 0001 00008105      1954      move.b  #1,$8105
000041CA  13FC 0001 00008115      1955      move.b  #1,$8115
000041D2  13FC 0001 00008125      1956      move.b  #1,$8125
000041DA                          1957      
000041DA                          1958      *Top row of room
000041DA  13FC 0008 00008133      1959      move.b  #8,$8133    Large enemy room - Exit at top
000041E2  13FC 0007 00008134      1960      move.b  #7,$8134
000041EA  13FC 0000 00008135      1961      move.b  #0,$8135    Entrance
000041F2  13FC 0006 00008136      1962      move.b  #6,$8136
000041FA                          1963      
000041FA                          1964      *Middle row of room
000041FA  13FC 0008 00008143      1965      move.b  #8,$8143
00004202  13FC 0000 00008144      1966      move.b  #0,$8144
0000420A  13FC 0000 00008145      1967      move.b  #0,$8145
00004212  13FC 000A 00008146      1968      move.b  #10,$8146
0000421A                          1969      
0000421A                          1970      *Bottom row of room
0000421A  13FC 0004 00008153      1971      move.b  #4,$8153
00004222  13FC 0009 00008154      1972      move.b  #9,$8154
0000422A  13FC 0009 00008155      1973      move.b  #9,$8155
00004232  13FC 0005 00008156      1974      move.b  #5,$8156
0000423A                          1975      
0000423A  4E75                    1976      rts
0000423C                          1977  
0000423C                          1978  setup_enemies:
0000423C                          1979      * Setup first enemy
0000423C  11FC 0003 6000          1980      move.b  #3,$6000    Health - Setup the first enemy
00004242  11FC 0001 6001          1981      move.b  #1,$6001    Damage/level
00004248  11FC 0001 6002          1982      move.b  #1,$6002    Class type (Knight)
0000424E  11FC 0001 6003          1983      move.b  #1,$6003    Alive state (Alive)
00004254  31FC 80DE 6004          1984      move.w  #$80DE,$6004  Move enemy coordinates
0000425A                          1985      
0000425A                          1986      * Setup second enemy
0000425A  11FC 0003 6010          1987      move.b  #3,$6010    Health - Setup the first enemy
00004260  11FC 0002 6011          1988      move.b  #2,$6011    Damage/level
00004266  11FC 0001 6012          1989      move.b  #1,$6012    Class type (Knight)
0000426C  11FC 0001 6013          1990      move.b  #1,$6013    Alive state (Alive)
00004272  31FC 8155 6014          1991      move.w  #$8155,$6014  Move enemy coordinates
00004278                          1992      
00004278  4E75                    1993      rts
0000427A                          1994      
0000427A                          1995  setup_player:
0000427A  11FC 000A 5FF0          1996      move.b  #10,PLAYER      put score/health in memory location $5FF0
00004280  11FC 0001 5FF1          1997      move.b  #1,PLA_DAMAGE   Assign the default damage for the player
00004286  11FC 0000 5FF3          1998      move.b  #0,GAME_STATE   Put game state number in memory location $5FF3
0000428C                          1999      *0 = Pick role/intro | 5 = Move around | 6 = Combat | 7 = Shop | 64 = End game
0000428C                          2000  
0000428C  11FC 0000 5FF2          2001      move.b  #0,PLA_CLASS    put class number in memory location $5FF2
00004292                          2002      * 1 corresponds to knight - 2 corresponds to mage - 3 corresponds to rogue
00004292                          2003      
00004292  11FC 0064 5FF8          2004      move.b  #100,PLA_GOLD    Assign the player's base gold value
00004298  11FC 0001 5FF9          2005      move.b  #1,PLA_POTIONS  Assign the player's base potions value
0000429E  11FC 0000 5FFA          2006      move.b  #0,PLA_KEYS     Assign the player's base keys value
000042A4                          2007      *move.b  #LIFE_PER_TORCH,PLA_TORCH   Assign the player's base torch value
000042A4  11FC 0032 5FFB          2008      move.b  #50,PLA_TORCH   Assign the player's base torch value
000042AA                          2009      
000042AA  4DF9 0000814A           2010      lea     $814A,A6        Set the player coordinate to the first corridor
000042B0  31CE 5FF6               2011      move.w  A6,PLA_P_POS    Set the player's previous position to their current
000042B4                          2012      
000042B4  4E75                    2013      rts
000042B6                          2014      
000042B6                          2015  setup_shops:
000042B6                          2016      * Setup the first shop
000042B6  31FC 80F9 6500          2017      move.w  #$80F9,$6500    Set the position
000042BC  11FC 0002 6502          2018      move.b  #2,$6502        Set the potions
000042C2  11FC 0003 6503          2019      move.b  #3,$6503        Set the keys
000042C8  11FC 0004 6504          2020      move.b  #4,$6504        Set the torches
000042CE  11FC 0005 6505          2021      move.b  #5,$6505        Set the damage
000042D4                          2022      
000042D4                          2023      * Setup the second shop
000042D4  31FC 80B2 6510          2024      move.w  #$80B2,$6510    Set the position
000042DA  11FC 0004 6512          2025      move.b  #4,$6512        Set the potions
000042E0  11FC 0003 6513          2026      move.b  #3,$6513        Set the keys
000042E6  11FC 0002 6514          2027      move.b  #2,$6514        Set the torches
000042EC  11FC 0001 6515          2028      move.b  #1,$6515        Set the damage
000042F2                          2029  
000042F2  4E75                    2030      rts
000042F4                          2031      
000042F4                          2032  *-------------------------------------------------------
000042F4                          2033  *-------------------Data Delarations--------------------
000042F4                          2034  *-------------------------------------------------------
000042F4                          2035  
000042F4= 0D 0A 00                2036  crlf:           dc.b    $0D,$0A,0
000042F7= 2A 2A 2A 2A 2A 2A ...   2037  welcome_msg:    dc.b    '*****************************************************************',$0D,$0A
0000433A= 20 20 20 20 20 20 ...   2038                  dc.b    '      __  ___      ___  __      ___        ______    _____  ___',$0D,$0A
0000437B= 20 20 20 20 20 2F ...   2039                  dc.b    '     /""\|"  \    /"  |/""\    |"  |      /    " \  (\"   \|"  \',$0D,$0A
000043BD= 20 20 20 20 2F 20 ...   2040                  dc.b    '    /    \\   \  //  //    \   ||  |     // ____  \ |.\\   \    |',$0D,$0A
00004400= 20 20 20 2F 20 20 ...   2041                  dc.b    '   /  /\  \\\  \/. .//  /\  \  |:  |    /  /    ) :)|: \.   \\  |',$0D,$0A
00004443= 20 20 2F 2F 20 20 ...   2042                  dc.b    '  //  __   \\.    ////  __   \  \  |___(: (____/ // |.  \    \. |',$0D,$0A
00004486= 20 2F 20 20 20 2F ...   2043                  dc.b    ' /   /  \\  \\\   //   /  \\  \( \_|:  \\        /  |    \    \ |',$0D,$0A
000044C9= 28 5F 5F 5F 2F 20 ...   2044                  dc.b    '(___/    \___)\__/(___/    \___)\_______)\"_____/    \___|\____\)',$0D,$0A,$0D,$0A
0000450E= 2A 2A 2A 2A 2A 2A ...   2045                  dc.b    '*****************************************************************',$0D,$0A,0
00004552= 2E 00                   2046  loop_msg:       dc.b    '.',0
00004554= 54 68 65 20 64 61 ...   2047  tutorial_msg    dc.b    'The darkness here is dangerious, keep your torch close and dont let it go out.',$0D,$0A
000045A4= 45 76 65 72 79 20 ...   2048                  dc.b    'Every movement you make decreases your torch life, so think before you move.',$0D,$0A
000045F2= 59 6F 75 20 63 61 ...   2049                  dc.b    'You can buy more torches in the shop, thats probably a good place to start...',$0D,$0A,0
00004642= 31 3E 20 52 65 73 ...   2050  replay_msg:     dc.b    '1> Restart the game.',$0D,$0A
00004658= 32 3E 20 51 75 69 ...   2051                  dc.b    '2> Quit the game.',$0D,$0A,0
0000466C= 59 6F 75 20 61 77 ...   2052  wake_up_msg:    dc.b    'You awake in a room, on a bed of red velvet, with no memory',$0D,$0A
000046A9= 6F 66 20 68 6F 77 ...   2053                  dc.b    'of how you got here. Stones crumble from the ceiling, the place looks like an',$0D,$0A
000046F8= 6F 6C 64 20 63 61 ...   2054                  dc.b    'old castle. You get a dark feeling from this place, and you know you must',$0D,$0A
00004743= 65 73 63 61 70 65 ...   2055                  dc.b    'escape...',$0D,$0A
0000474E= 59 6F 75 20 63 6C ...   2056                  dc.b    'You climb from the bed and look in a nearby mirror:',$0D,$0A,0
00004784= 31 3E 20 59 6F 75 ...   2057  pick_role_msg:  dc.b    '1> You wear armour of polished iron, a short sword and heavy shield laying',$0D,$0A
000047D0= 63 6C 6F 73 65 20 ...   2058                  dc.b    'close by. (Knight class)',$0D,$0A,$0D,$0A
000047EC= 32 3E 20 59 6F 75 ...   2059                  dc.b    '2> You wear a cloak with mystic symbols sewn into the fabrics, an ancient',$0D,$0A
00004837= 6C 6F 6F 6B 69 6E ...   2060                  dc.b    'looking staff lays near. (Mage class)',$0D,$0A,$0D,$0A
00004860= 33 3E 20 59 6F 75 ...   2061                  dc.b    '3> You wear tight, well-fitting leather armour with reminents of black dye',$0D,$0A
000048AC= 73 74 61 69 6E 65 ...   2062                  dc.b    'stained to the material. Two knives are fastened to your belt. (Rogue class)',$0D,$0A,0
000048FB= 45 6E 74 65 72 20 ...   2063  input_nums_msg: dc.b    'Enter num between 1 and ',0
00004914= 3A 20 00                2064  colon_msg:      dc.b    ': ',0
00004917                          2065  
00004917= 49 6E 70 75 74 74 ...   2066  input_error_msg:    dc.b    'Inputted number is outside of range.',$0D,$0A,0
0000493E= 47 61 6D 65 73 74 ...   2067  fake_gamestate_msg: dc.b    'Gamestate doesnt exist',$0D,$0A,0
00004957= 59 6F 75 20 67 72 ...   2068  knight_role_msg:    dc.b    'You grab your sword and shield, pull a torch from the wall, and leave the room.',$0D,$0A,0
000049A9= 59 6F 75 20 68 61 ...   2069  knight_spec_msg:    dc.b    'You have chosen the KNIGHT class. You specialise in blocking and countering',$0D,$0A,0
000049F7= 59 6F 75 20 70 69 ...   2070  mage_role_msg:  dc.b    'You pick up your staff, grab a torch from the wall, and leave the room.',$0D,$0A,0
00004A41= 59 6F 75 20 68 61 ...   2071  mage_spec_msg:  dc.b    'You have chosen the MAGE class. You specialise in magic attacks.',$0D,$0A,0
00004A84= 59 6F 75 20 66 61 ...   2072  rogue_role_msg: dc.b    'You fasten your belt, grab a torch from the wall, and leave the room.',$0D,$0A,0
00004ACC= 59 6F 75 20 68 61 ...   2073  rogue_spec_msg: dc.b    'You have chosen the ROGUE class. You specialise in quick melee attacks.',$0D,$0A,0
00004B16= 31 3E 20 4D 6F 76 ...   2074  movement_msg:   dc.b    '1> Move north.',$0D,$0A
00004B26= 32 3E 20 4D 6F 76 ...   2075                  dc.b    '2> Move south.',$0D,$0A
00004B36= 33 3E 20 4D 6F 76 ...   2076                  dc.b    '3> Move west.',$0D,$0A
00004B45= 34 3E 20 4D 6F 76 ...   2077                  dc.b    '4> Move east.',$0D,$0A
00004B54= 35 3E 20 44 72 69 ...   2078                  dc.b    '5> Drink health potion.',$0D,$0A,0
00004B6E= 4D 6F 76 65 64 20 ...   2079  move_north_msg: dc.b    'Moved north.',$0D,$0A,0
00004B7D= 4D 6F 76 65 64 20 ...   2080  move_east_msg:  dc.b    'Moved east.',$0D,$0A,0
00004B8B= 4D 6F 76 65 64 20 ...   2081  move_south_msg: dc.b    'Moved south.',$0D,$0A,0
00004B9A= 4D 6F 76 65 64 20 ...   2082  move_west_msg:  dc.b    'Moved west.',$0D,$0A,0
00004BA8= 41 20 77 61 6C 6C ...   2083  movement_blocked_msg:  dc.b    'A wall blocks your path.',$0D,$0A,0
00004BC3= 45 6E 74 65 72 20 ...   2084  continue_msg:   dc.b    'Enter any key to continue... ',0
00004BE1= 20 20 20 00             2085  blank_tile      dc.b    '   ',0
00004BE5= 7C 20 7C 00             2086  both_tile       dc.b    '| |',0
00004BE9= 7C 20 20 00             2087  left_tile       dc.b    '|  ',0
00004BED= 20 20 7C 00             2088  right_tile      dc.b    '  |',0
00004BF1= 5C 2F 5C 00             2089  blocked_tile:   dc.b    '\/\',0
00004BF5= 2A 00                   2090  player_mark:    dc.b    '*',0
00004BF7= 58 00                   2091  enemy_mark:     dc.b    'X',0
00004BF9= 40 00                   2092  win_point_mark: dc.b    '@',0
00004BFB= 24 00                   2093  shop_mark:      dc.b    '$',0
00004BFD= 41 20 6D 6F 6E 73 ...   2094  encounter_msg:  dc.b    'A monster blocks your path, it looks ready to attack!',$0D,$0A,0
00004C35= 31 3E 20 42 6C 6F ...   2095  combat_msg:     dc.b    '1> Block and Counter.',$0D,$0A
00004C4C= 32 3E 20 43 61 73 ...   2096                  dc.b    '2> Cast Magic.',$0D,$0A
00004C5C= 33 3E 20 41 74 74 ...   2097                  dc.b    '3> Attack Swiftly.',$0D,$0A
00004C70= 34 3E 20 54 72 79 ...   2098                  dc.b    '4> Try Run.',$0D,$0A
00004C7D= 35 3E 20 44 72 69 ...   2099                  dc.b    '5> Drink Health Potion.',$0D,$0A,0
00004C97= 59 6F 75 20 65 73 ...   2100  escape_msg:             dc.b    'You escaped the monster!',$0D,$0A,0
00004CB2= 59 6F 75 20 74 72 ...   2101  fail_escape_msg:        dc.b    'You try to run, but the monster catches and damages you!',$0D,$0A,0
00004CED= 59 6F 75 20 62 6F ...   2102  both_block_msg:         dc.b    'You both block, No damage is done!',$0D,$0A,0
00004D12= 59 6F 75 20 62 6F ...   2103  both_cast_magic_msg:    dc.b    'You both cast magic at eachother, the spells clash in mid air! No damage',$0D,$0A
00004D5C= 69 73 20 64 6F 6E ...   2104                          dc.b    'is done!',$0D,$0A,0
00004D67= 59 6F 75 20 62 6F ...   2105  both_melee_msg:         dc.b    'You both lunge forward, metal clashes together, but no damage is done!',$0D,$0A,0
00004DB0= 54 68 65 20 65 6E ...   2106  hit_against_block_msg:  dc.b    'The enemy blocks, you cast a cast a spell and it damages the monster!',$0D,$0A,0
00004DF8= 54 68 65 20 65 6E ...   2107  hit_against_magic_msg:  dc.b    'The enemy begins to charge a spell but you lunge forward and hit it first,',$0D,$0A
00004E44= 64 61 6D 61 67 69 ...   2108                          dc.b    'damaging the monster!',$0D,$0A,0
00004E5C= 54 68 65 20 65 6E ...   2109  hit_against_melee_msg:  dc.b    'The enemy lunges forward but you block quicky, then counter, damaging the',$0D,$0A
00004EA7= 6D 6F 6E 73 74 65 ...   2110                          dc.b    'monster!',$0D,$0A,0
00004EB2= 59 6F 75 20 6C 75 ...   2111  hit_by_counter_msg:     dc.b    'You lunge at the enemy but they block before you hit, they swing around quickly',$0D,$0A
00004F03= 61 6E 64 20 64 61 ...   2112                          dc.b    'and damage you!',$0D,$0A,0
00004F15= 59 6F 75 20 74 72 ...   2113  hit_by_magic_msg:       dc.b    'You try to block the enemies attack, but they cast a spell that breaks through',$0D,$0A
00004F65= 79 6F 75 72 20 64 ...   2114                          dc.b    'your defense and damages you!',$0D,$0A,0
00004F85= 59 6F 75 20 74 72 ...   2115  hit_by_melee_msg:       dc.b    'You try to charge up a spell, but the enemy lunges forward and damages you!',$0D,$0A,0
00004FD3= 48 65 61 6C 74 68 ...   2116  health_msg:             dc.b    'Health: ',0
00004FDC= 45 6E 65 6D 79 20 ...   2117  enemy_health_msg:       dc.b    'Enemy Health: ',0
00004FEB= 54 6F 72 63 68 20 ...   2118  torch_msg:              dc.b    'Torch Life: ',0
00004FF8= 44 61 6D 61 67 65 ...   2119  damage_lvl_msg          dc.b    'Damage lvl: ',0
00005005= 49 6E 76 65 6E 74 ...   2120  inventory_msg:          dc.b    'Inventory:',0
00005010= 2D 20 47 6F 6C 64 ...   2121  gold_msg:               dc.b    '- Gold ',0
00005018= 2D 20 4B 65 79 20 00    2122  key_msg:                dc.b    '- Key ',0
0000501F= 2D 20 50 6F 74 69 ...   2123  potions_msg:            dc.b    '- Potion ',0
00005029= 2D 20 54 6F 72 63 ...   2124  torches_msg:            dc.b    '- Torch ',0
00005032= 2D 20 44 61 6D 61 ...   2125  damage_up_msg:          dc.b    '- Damage Upgrades ',0
00005045= 54 68 65 20 6D 6F ...   2126  battle_won_msg:         dc.b    'The monster collapses at your feet. It is dead!',$0D,$0A,0
00005077= 28 00                   2127  bracket_open_msg:       dc.b    '(',0
00005079= 29 00                   2128  bracket_close_msg:      dc.b    ')',0
0000507B= 59 6F 75 20 66 65 ...   2129  death_msg:          dc.b    'You feel your last breath of air leave your lungs...',$0D,$0A
000050B1= 59 6F 75 72 20 6B ...   2130                      dc.b    'Your knees hit the ground...',$0D,$0A
000050CF= 59 6F 75 20 68 61 ...   2131                      dc.b    'You have died.',$0D,$0A,0
000050E0= 59 6F 75 20 66 65 ...   2132  win_msg:            dc.b    'You feel the outside breeze hit your face...',$0D,$0A
0000510E= 59 6F 75 20 68 61 ...   2133                      dc.b    'You have escaped the castle!',$0D,$0A,0
0000512D= 59 6F 75 20 64 72 ...   2134  take_potion_msg:    dc.b    'You drink a health potion...',$0D,$0A
0000514B= 33 20 68 65 61 6C ...   2135                      dc.b    '3 health points restored!',$0D,$0A,0
00005167= 59 6F 75 20 61 72 ...   2136  no_potions_msg:     dc.b    'You are out of potions.',$0D,$0A,0
00005181= 22 4C 6F 6F 6B 69 ...   2137  shop_enter_msg:     dc.b    '"Looking to lighten that coin pouch of yours?!"',$0D,$0A,0
000051B3= 31 3E 20 42 75 79 ...   2138  shop_msg:       dc.b    '1> Buy Potion. (5g)',$0D,$0A
000051C8= 32 3E 20 42 75 79 ...   2139                  dc.b    '2> Buy Key. (15g)',$0D,$0A
000051DB= 33 3E 20 42 75 79 ...   2140                  dc.b    '3> Buy Torch. (10g)',$0D,$0A
000051F0= 34 3E 20 42 75 79 ...   2141                  dc.b    '4> Buy Damage Upgrade. (20g)',$0D,$0A
0000520E= 35 3E 20 4C 65 61 ...   2142                  dc.b    '5> Leave Shop.',$0D,$0A,0
0000521F= 22 50 6C 65 61 73 ...   2143  leave_shop_msg: dc.b    '"Pleasure doing business with you."',$0D,$0A,0
00005245= 22 2E 2E 2E 41 6E ...   2144  buy_item_msg:   dc.b    '"...And its yours!"',$0D,$0A,0
0000525B= 53 68 6F 70 20 53 ...   2145  shop_stock_msg: dc.b    'Shop Stock:',0
00005267= 59 6F 75 72 20 49 ...   2146  player_msg:     dc.b    'Your Items:',0
00005273= 22 4E 6F 74 20 65 ...   2147  no_money_msg:   dc.b    '"Not enough gold, traveller."',$0D,$0A,0
00005293= 22 53 6F 72 72 79 ...   2148  no_item_msg:    dc.b    '"Sorry, I dont have any of them left..."',$0D,$0A,0
000052BE= 54 68 65 20 64 61 ...   2149  no_torch_msg:   dc.b    'The darkness burns...',$0D,$0A,0
000052D6= 20 20 20 20 20 20 ...   2150  graveyard_msg:  dc.b    '      ,-=-.       ______     _',$0D,$0A
000052F6= 20 20 20 20 20 2F ...   2151                  dc.b    '     /  +  \     />----->  _|1|_',$0D,$0A
00005318= 20 20 20 20 20 7C ...   2152                  dc.b    '     | ~~~ |    // -/- /  |_ H _|',$0D,$0A
0000533B= 20 20 20 20 20 7C ...   2153                  dc.b    '     |R.I.P|   //  /  /     |S|',$0D,$0A
0000535C= 5C 76 56 2C 2C 7C ...   2154                  dc.b    '\vV,,|_____|V,//_____/VvV,v,|_|/,,vhjwv/,',$0D,$0A,0
00005388= 20 20 20 20 20 20 ...   2155  skeleton_msg:   dc.b    '           .-.',$0D,$0A
00005398= 20 2F 5C 5F 5F 5F ...   2156                  dc.b    ' /\____/\ (o.o)',$0D,$0A
000053A9= 7C 20 20 5F 7C 7C ...   2157                  dc.b    '|  _||_  | |=|',$0D,$0A
000053B9= 20 5C 2F 20 7C 7C ...   2158                  dc.b    ' \/ || \/ __|__',$0D,$0A
000053CA= 20 20 20 20 7C 7C ...   2159                  dc.b    '    ||\_//.=|=.\\',$0D,$0A
000053DD= 20 20 20 20 7C 7C ...   2160                  dc.b    '    ||\_/ .=|=. \\',$0D,$0A
000053F1= 20 20 20 20 7C 7C ...   2161                  dc.b    '    ||    .=|=. //',$0D,$0A
00005405= 20 20 20 20 7C 7C ...   2162                  dc.b    '    ||    (_=_)//',$0D,$0A
00005418= 20 20 20 20 7C 7C ...   2163                  dc.b    '    ||   (:| |:)',$0D,$0A
0000542A= 20 20 20 20 7C 7C ...   2164                  dc.b    '    ||    || ||',$0D,$0A
0000543B= 20 20 20 20 7C 7C ...   2165                  dc.b    '    ||    () ()',$0D,$0A
0000544C= 20 20 20 20 2F 5C ...   2166                  dc.b    '    /\    || ||',$0D,$0A
0000545D= 20 20 20 20 7C 7C ...   2167                  dc.b    '    ||    || ||',$0D,$0A
0000546E= 20 20 20 20 5C 2F ...   2168                  dc.b    '    \/  ==   ==',$0D,$0A,0
00005480= 20 20 20 20 20 20 ...   2169  merchant_msg:   dc.b    '         ____',$0D,$0A
0000548F= 20 20 20 20 20 20 ...   2170                  dc.b    '        |    |',$0D,$0A
0000549F= 20 20 20 20 20 20 ...   2171                  dc.b    '      --:<<>>:--',$0D,$0A
000054B1= 20 20 20 20 20 20 ...   2172                  dc.b    '        :~_~ :',$0D,$0A
000054C1= 20 20 20 20 20 20 ...   2173                  dc.b    '        _:"":\___',$0D,$0A
000054D4= 20 20 5F 5F 5F 5F ...   2174                  dc.b    '  ____./ :::     \._',$0D,$0A
000054EA= 3C 3C 3D 29 20 20 ...   2175                  dc.b    '<<=)           \    :',$0D,$0A
00005501= 20 5C 2F 2D 2D 2D ...   2176                  dc.b    ' \/---/\_      /\._. ',$0D,$0A
00005518= 20 7C 7C 20 20 20 ...   2177                  dc.b    ' ||       \====:_ ""',$0D,$0A
0000552E= 20 7C 7C 20 20 20 ...   2178                  dc.b    ' ||      ./     \\',$0D,$0A
00005542= 20 7C 7C 20 20 20 ...   2179                  dc.b    ' ||     :       :',$0D,$0A
00005555= 20 7C 7C 20 20 20 ...   2180                  dc.b    ' ||    /   :    \',$0D,$0A
00005568= 20 7C 7C 20 20 20 ...   2181                  dc.b    ' ||   :   .      \.',$0D,$0A
0000557D= 20 7C 7C 20 20 20 ...   2182                  dc.b    ' ||   :  : :      :',$0D,$0A
00005592= 20 7C 7C 20 20 20 ...   2183                  dc.b    ' ||   :__:-:__.;--',$0D,$0A,0
000055A7= 20 20 20 20 20 20 ...   2184  castle_msg:     dc.b    '                T~~',$0D,$0A
000055BC= 20 20 20 20 20 20 ...   2185                  dc.b    '                |',$0D,$0A
000055CF= 20 20 20 20 20 20 ...   2186                  dc.b    '               /"\',$0D,$0A
000055E3= 20 20 20 20 20 20 ...   2187                  dc.b    '       T~~     |.| T~~',$0D,$0A
000055FB= 20 20 20 54 7E 7E ...   2188                  dc.b    '   T~~ |    T~ WWWW|',$0D,$0A
00005611= 20 20 20 7C 20 20 ...   2189                  dc.b    '   |  /"\   |  |  |/\T~~',$0D,$0A
0000562B= 20 20 2F 22 5C 20 ...   2190                  dc.b    '  /"\ WWW  /"\ |. |WW|',$0D,$0A
00005643= 20 57 57 57 57 57 ...   2191                  dc.b    ' WWWWW/\| /   \|./\|/"\',$0D,$0A
0000565C= 20 7C 20 20 20 2F ...   2192                  dc.b    ' |   /__\/]WWW[\/__\WWWW',$0D,$0A
00005676= 20 7C 22 20 20 57 ...   2193                  dc.b    ' |"  WWWW.|I_I|.WWWW.   |',$0D,$0A
00005691= 20 7C 20 20 20 7C ...   2194                  dc.b    ' |   |. |/  -  \|. |.  |',$0D,$0A
000056AB= 20 7C 2E 20 20 7C ...   2195                  dc.b    ' |.  |  |LI=H=LI|. |   |',$0D,$0A
000056C5= 20 7C 20 20 20 7C ...   2196                  dc.b    ' |   |. | |[_]| |  |.  |',$0D,$0A
000056DF= 20 7C 20 20 20 7C ...   2197                  dc.b    ' |   |  |_|###|_|  |   |',$0D,$0A
000056F9= 20 20 2D 2D 2D 20 ...   2198                  dc.b    '  --- -- -/___\- -- --- ',$0D,$0A,0
00005714                          2199                  
00005714                          2200  
00005714                          2201  
00005714                          2202  
00005714                          2203  
00005714                          2204  
00005714                          2205  
00005714                          2206  
00005714                          2207  
00005714                          2208  
00005714                          2209  
00005714                          2210  
00005714                          2211  
00005714                          2212  
00005714                          2213  
00005714                          2214  
00005714                          2215  
00005714                          2216      end start

No errors detected
No warnings generated


SYMBOL TABLE INFORMATION
Symbol-name         Value
-------------------------
ALIVE               3
BATTLE_WON_MSG      5045
BLANK_TILE          4BE1
BLOCKED_TILE        4BF1
BLOCK_COUNTER       3938
BLUE                FF0000
BOTH_BLOCK          39D0
BOTH_BLOCK_MSG      4CED
BOTH_CAST_MAGIC     39E2
BOTH_CAST_MAGIC_MSG  4D12
BOTH_MELEE          39F4
BOTH_MELEE_MSG      4D67
BOTH_TILE           4BE5
BRACKET_CLOSE_MSG   5079
BRACKET_OPEN_MSG    5077
BUY_ITEM_MSG        5245
BUY_KEY             3B14
BUY_POTION          3ADE
BUY_TORCH           3B4C
CASTLE_MSG          55A7
CAST_MAGIC          3952
CHANGE_FONT_COLOUR  3CCA
CHECK_FOR_ENEMIES   3E1C
CHECK_FOR_ENEMY     3E3E
CHECK_FOR_PLAYER    3DD4
CHECK_FOR_SHOP      3EB4
CHECK_FOR_SHOPS     3E92
CHECK_FOR_WIN_POINT  3EFE
CLASS               2
CLEAR_SCREEN        374A
COLON_MSG           4914
COMBAT              38F8
COMBAT_MSG          4C35
CONTINUE_MSG        4BC3
CRLF                42F4
CSR_POS_BATTLE      2001
CSR_POS_MOVE        3201
CSR_POS_SHOP_P      3401
CSR_POS_SHOP_S      1801
DAMAGE              1
DAMAGE_LVL_MSG      4FF8
DAMAGE_UP_MSG       5032
DAMAGE_UP_PRICE     14
DEATH_MSG           507B
DECORATE            372C
DECREMENT_TORCH     3CBC
DRAW                3394
DRAW_BATTLE_INFO    3508
DRAW_BLANK_TILE     3DC6
DRAW_BLOCKED_TILE   3D8E
DRAW_BOTH_TILE      3D9C
DRAW_CASTLE         33D0
DRAW_ENEMY          3E52
DRAW_GRAVEYARD      33C2
DRAW_HUD            33EC
DRAW_ITEM_NUMBER    34E6
DRAW_LEFT_TILE      3DAA
DRAW_LOOP           3CDC
DRAW_MERCHANT       33DE
DRAW_PLAYER         3DDC
DRAW_PLAYER_INFO    340C
DRAW_RIGHT_TILE     3DB8
DRAW_SHOP           3EBE
DRAW_SHOP_INFO      3582
DRAW_SKELETON       33B4
DRAW_TILE           3D2A
DRAW_WIN_POINT      3F0A
ENCOUNTER_MSG       4BFD
END                 3006
ENDL                377A
ENEMIES_CHECK       3254
ENEMIES_LOOP        3262
ENEMY_ALIVE_CHECK   335C
ENEMY_CHECK         3280
ENEMY_DIED          3366
ENEMY_HEALTH_MSG    4FDC
ENEMY_MARK          4BF7
ENEMY_MAX           2
ENTER_COMBAT        32B4
ENTER_SHOP          3334
ESCAPE_ATTACK       3996
ESCAPE_MSG          4C97
EXIT                0
FAIL_ESCAPE         39B4
FAIL_ESCAPE_MSG     4CB2
FAKE_GAMESTATE_MSG  493E
FIRST_ENEMY         6000
FIRST_SHOP          6500
FONT                1090000
GAME                3000
GAMELOOP            3170
GAMEPLAY            36FE
GAME_STATE          5FF3
GOLD_MSG            5010
GRAVEYARD_MSG       52D6
GREEN               FF00
HEALTH_MSG          4FD3
HIT_AGAINST_BLOCK   3A06
HIT_AGAINST_BLOCK_MSG  4DB0
HIT_AGAINST_MAGIC   3A1E
HIT_AGAINST_MAGIC_MSG  4DF8
HIT_AGAINST_MELEE   3A36
HIT_AGAINST_MELEE_MSG  4E5C
HIT_BY_COUNTER      3A4E
HIT_BY_COUNTER_MSG  4EB2
HIT_BY_MAGIC        3A6A
HIT_BY_MAGIC_MSG    4F15
HIT_BY_MELEE        3A86
HIT_BY_MELEE_MSG    4F85
INPUT               311E
INPUT_ERROR_MSG     4917
INPUT_NUMS_MSG      48FB
INVALID_INPUT       3162
INVENTORY_MSG       5005
KEY_MSG             5018
KEY_PRICE           F
KNIGHT_ROLE_MSG     4957
KNIGHT_SELECT       3062
KNIGHT_SPEC_MSG     49A9
LEAVE_SHOP          3BBE
LEAVE_SHOP_MSG      521F
LEFT_TILE           4BE9
LIFE_PER_TORCH      F
LOOP_COLUMNS        3D08
LOOP_ENEMIES        3E2A
LOOP_MSG            4552
LOOP_ROWS           3CF2
LOOP_SHOPS          3EA0
MAGE_ROLE_MSG       49F7
MAGE_SELECT         3092
MAGE_SPEC_MSG       4A41
MANAGE_INPUT        3148
MANAGE_TORCH        3220
MAP_LENGTH          F
MAP_START_POINT     8080
MELEE_ATTACK        396C
MERCHANT_MSG        5480
MOVEMENT            3790
MOVEMENT_BLOCKED    38E6
MOVEMENT_BLOCKED_MSG  4BA8
MOVEMENT_CHECKS     3208
MOVEMENT_MSG        4B16
MOVE_EAST           38A2
MOVE_EAST_MSG       4B7D
MOVE_NORTH          37D2
MOVE_NORTH_MSG      4B6E
MOVE_SOUTH          3818
MOVE_SOUTH_MSG      4B8B
MOVE_WEST           385E
MOVE_WEST_MSG       4B9A
NO_ITEM_MSG         5293
NO_MONEY            3BE0
NO_MONEY_MSG        5273
NO_POTIONS          3CAC
NO_POTIONS_MSG      5167
NO_SHOP_DAMAGE_UP   3C3E
NO_SHOP_KEYS        3C0E
NO_SHOP_POTIONS     3BF6
NO_SHOP_TORCHES     3C26
NO_TORCH_MSG        52BE
OUT                 3734
PICK_ROLE           301C
PICK_ROLE_MSG       4784
PLAYER              5FF0
PLAYER_DEAD         31B0
PLAYER_MARK         4BF5
PLAYER_MSG          5267
PLA_CLASS           5FF2
PLA_DAMAGE          5FF1
PLA_GOLD            5FF8
PLA_KEYS            5FFA
PLA_POTIONS         5FF9
PLA_P_POS           5FF6
PLA_TORCH           5FFB
POSITION            4
POTIONS_MSG         501F
POTION_PRICE        5
PRESS_CONTINUE      3C56
PURPLE              F000F0
RANDOM_NUMBER       3C6E
RED                 FF
REPLAY              3756
REPLAY_MSG          4642
RETURN              3C88
RIGHT_TILE          4BED
ROGUE_ROLE_MSG      4A84
ROGUE_SELECT        30C2
ROGUE_SPEC_MSG      4ACC
ROLE_INPUT          3044
SETUP_ENEMIES       423C
SETUP_PLAYER        427A
SETUP_SHOPS         42B6
SETUP_WORLD         3F4A
SHOP                3AA2
SHOPS_CHECK         32DE
SHOPS_LOOP          32EC
SHOP_CHECK          330A
SHOP_ENTER_MSG      5181
SHOP_MARK           4BFB
SHOP_MAX            2
SHOP_MSG            51B3
SHOP_STOCK_MSG      525B
SKELETON_MSG        5388
START               1000
S_DAMAGE_IN         5
S_KEYS              3
S_POTIONS           2
S_TORCHES           4
TAKE_POTION         3C8A
TAKE_POTION_MSG     512D
TORCHES_MSG         5029
TORCH_MSG           4FEB
TORCH_PRICE         A
TRY_RUN             3986
TUTORIAL_INTRO      30F2
TUTORIAL_MSG        4554
UPDATE              3186
UPGRADE_DMG         3B86
WAKE_UP_MSG         466C
WALL_COLLISIONS     37B0
WELCOME             300A
WELCOME_MSG         42F7
WHITE               FFFFFF
WIN_MSG             50E0
WIN_POINT           8156
WIN_POINT_MARK      4BF9
WON_GAME            31DA

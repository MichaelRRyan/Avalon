00001000 Starting Address
Assembler used: EASy68K Editor/Assembler v5.16.01
Created On: 23/03/2019 14:45:51

00000000                             1  *-------------------------------------------------------
00000000                             2  * Author         : Michael Rainsford Ryan
00000000                             3  * Student Number : C00239510
00000000                             4  * Date Created   : 21/01/2019
00000000                             5  * Description    : A simplified, offline clone of the
00000000                             6  *                : online game "Avalon".
00000000                             7  * Issues/Bugs    : None currenty.
00000000                             8  *-------------------------------------------------------
00000000                             9  
00001000                            10      org $1000
00001000                            11  
00001000                            12  *-------------------------------------------------------
00001000                            13  *Choose to be a Worker or a God 
00001000                            14  *https://www.avalon-rpg.com/
00001000                            15  *-------------------------------------------------------
00001000                            16  
00001000                            17  *-------------------------------------------------------
00001000                            18  *-------------------Game Information-------------------
00001000                            19  *-------------------------------------------------------
00001000                            20  *A6 is used for player coordinates
00001000                            21  *A5 is used for enemy coordinates when in combat or looping through them
00001000                            22  *A5 is used for shops when in shop screen or when looping through them
00001000                            23  *A4 occasionally used for displaying the inventory
00001000                            24  *D5 is used occasionally for input range
00001000                            25  *$5FF0 holds player information
00001000                            26  *$6000 to $64F0 holds enemies
00001000                            27  *$6500 to $6FE0 holds shops
00001000                            28  *$6FE0 to $6FEF Holds locked doors
00001000                            29  *$6FF0 to $6FFF Holds big key locked doors
00001000                            30  *$7000 to $7500 holds loot
00001000                            31  *$8000 to $9000 holds maps
00001000                            32  
00001000                            33  *Enemies:
00001000                            34  *Byte:  Name:
00001000                            35  *0      Health
00001000                            36  *1      Damage/level
00001000                            37  *2      enemy type (Knight, mage, rogue)
00001000                            38  *3      Alive state (1 == alive, 0 == dead)
00001000                            39  *4 & 5  Coordinates
00001000                            40  
00001000                            41  *Player:
00001000                            42  *Byte:  Name:
00001000                            43  *0      Health
00001000                            44  *1      Damage/level
00001000                            45  *2      Class (Knight, mage, rogue)
00001000                            46  *3      Game state
00001000                            47  *4-5+A6 Coordinates
00001000                            48  *6-7    Last coordinates
00001000                            49  *8      Gold
00001000                            50  *9      Potions
00001000                            51  *A      Keys
00001000                            52  *B      Torch life
00001000                            53  
00001000                            54  *Shops:
00001000                            55  *Byte:  Name:
00001000                            56  *0-1    Position
00001000                            57  *2      Potions
00001000                            58  *3      Keys
00001000                            59  *4      Torches
00001000                            60  *5      Damage increase
00001000                            61  
00001000                            62  *Loot:
00001000                            63  *Byte:  Name:
00001000                            64  *0-1    Position
00001000                            65  *2      Potions
00001000                            66  *3      Keys
00001000                            67  *4      Torches
00001000                            68  *5      Gold
00001000                            69  *6      Active State
00001000                            70      
00001000                            71  *Game state : 0 = Pick role/intro | 5 = Move around | 6 = Combat | 7 = Shop | 64 = End game
00001000                            72  *Class      : 1 corresponds to knight - 2 corresponds to mage - 3 corresponds to rogue
00001000                            73  
00001000                            74  
00001000                            75  *-------------------------------------------------------
00001000                            76  *Validation values to be used, modify as needed
00001000                            77  *Add additional validation values as required
00001000                            78  *-------------------------------------------------------
00001000  =00000000                 79  exit        EQU 0      used to exit assembly program
00001000                            80  
00001000                            81  * Text display
00001000  =000000FF                 82  RED         EQU $000000FF   Red colour value
00001000  =0000FF00                 83  GREEN       EQU $0000FF00   Green colour value
00001000  =00FF0000                 84  BLUE        EQU $00FF0000   Blue colour value
00001000  =00FFFFFF                 85  WHITE       EQU $00FFFFFF   White colour value
00001000  =00F000F0                 86  PURPLE      EQU $00F000F0   Purple colour value
00001000  =0000FFFF                 87  GOLD        EQU $0000FFFF   gold colour value
00001000  =00507090                 88  BROWN       EQU $00507090   brown colour value
00001000  =01090000                 89  FONT        EQU $01090000   Font value
00001000                            90  
00001000                            91  * Player
00001000  =00005FF0                 92  PLAYER      EQU $5FF0       Memory address for player information and health
00001000  =00005FF1                 93  PLA_DAMAGE  EQU $5FF1       Memory address for player damage value
00001000  =00005FF2                 94  PLA_CLASS   EQU $5FF2       The memory address for the player class
00001000  =00005FF3                 95  GAME_STATE  EQU $5FF3       The memory address of the game state
00001000  =00005FF6                 96  PLA_P_POS   EQU $5FF6       Memory location of the player's previous position
00001000  =00005FF8                 97  PLA_GOLD    EQU $5FF8       Memory address for player gold
00001000  =00005FF9                 98  PLA_POTIONS EQU $5FF9       Memory address for player potions
00001000  =00005FFA                 99  PLA_KEYS    EQU $5FFA       Memory address for player keys
00001000  =00005FFB                100  PLA_TORCH   EQU $5FFB       Memory address for player torch life
00001000                           101  
00001000                           102  * Enemy
00001000  =00006000                103  FIRST_ENEMY EQU $6000       Memory location of the first enemy
00001000  =00000002                104  ENEMY_MAX   EQU 2           Number of enemies in the game
00001000                           105  
00001000  =00000001                106  DAMAGE      EQU 1           The number of bytes to move from the enemy before reaching the damage
00001000  =00000002                107  CLASS       EQU 2           The number of bytes to move from the enemy before reaching the class
00001000  =00000003                108  ALIVE       EQU 3           The number of bytes to move from the enemy before reaching the alive state
00001000  =00000004                109  POSITION    EQU 4           The number of bytes to move from the enemy before reaching the position
00001000                           110  
00001000                           111  * Shop & Loot
00001000  =00006500                112  FIRST_SHOP  EQU $6500       Memory location of the first shop
00001000  =00000002                113  SHOP_MAX    EQU 2           Number of shops in the game
00001000                           114  
00001000  =00000002                115  S_POTIONS   EQU 2           The number of bytes to move from the shop root before reaching the potions
00001000  =00000003                116  S_KEYS      EQU 3           The number of bytes to move from the shop root before reaching the keys
00001000  =00000004                117  S_TORCHES   EQU 4           The number of bytes to move from the shop root before reaching the torches
00001000  =00000005                118  S_DAMAGE_IN EQU 5           The number of bytes to move from the shop root before reaching the damage increase
00001000                           119  
00001000  =00007000                120  FIRST_LOOT  EQU $7000       Memory location of the first loot pile
00001000  =00000006                121  L_ACTIVE    EQU 6           The number of bytes to move from the loot pile root before reaching the active state
00001000                           122  
00001000                           123  * HUD
00001000  =00003201                124  CSR_POS_MOVE    EQU $3201   The cursor position to draw the HUD to when in movement state
00001000  =00001801                125  CSR_POS_BATTLE_E    EQU $1801   The cursor position to draw the enemy HUD to when in battle state
00001000  =00003401                126  CSR_POS_BATTLE_P    EQU $3401   The cursor position to draw the player HUD to when in battle state
00001000  =00001801                127  CSR_POS_SHOP_S  EQU $1801   The cursor position to draw the HUD to when in shop state for shop info
00001000  =00003401                128  CSR_POS_SHOP_P  EQU $3401   The cursor position to draw the HUD to when in shop state for player info
00001000                           129  *$2001
00001000                           130  
00001000                           131  * Game
00001000  =00008156                132  WIN_POINT       EQU $8156   The position the player has to get to to win
00001000  =00006FE0                133  FIRST_DOOR      EQU $6FE0   The memory location of the first locked door
00001000  =00000003                134  DOOR_MAX        EQU 3       The number of locked doors in the game
00001000  =00001000                135  OPEN_DOOR_POS   EQU $1000   The position doors are given when opened
00001000                           136  
00001000  =00000005                137  POTION_PRICE    EQU 5       The price in gold for a potion
00001000  =0000000F                138  KEY_PRICE       EQU 15      The price in gold for a key
00001000  =0000000A                139  TORCH_PRICE     EQU 10      The price in gold for a torch
00001000  =00000014                140  DAMAGE_UP_PRICE EQU 20      The price in gold for a damage upgrade
00001000                           141  
00001000  =0000000F                142  LIFE_PER_TORCH  EQU 15      The life value each torch has
00001000                           143  
00001000  =00008080                144  MAP_START_POINT EQU $8080   The starting coordinates the map draws at
00001000  =0000000F                145  MAP_LENGTH      EQU 15      The number of tiles downwords the map will draw
00001000                           146  
00001000                           147  
00001000                           148  *Start of Game
00001000                           149  start:
00001000  6100 362A                150      bsr     setup_player
00001004  6100 329A                151      bsr     setup_world
00001008  6100 359C                152      bsr     setup_enemies
0000100C  6100 365A                153      bsr     setup_shops
00001010  6100 35D2                154      bsr     setup_loot
00001014                           155  
00001014  6100 1FF4                156      bsr     welcome    branch to the welcome subroutine
00001018  6100 2EA0                157      bsr     press_continue
0000101C  6100 1FE2                158      bsr     game       branch to the game subroutine
00001020                           159  *Game loop
00003000                           160      org     $3000      the rest of the program is to be located from 3000 onwards
00003000                           161  
00003000                           162  *-------------------------------------------------------
00003000                           163  *-------------------Game Subroutine---------------------
00003000                           164  *-------------------------------------------------------
00003000                           165  game:
00003000  6100 0192                166      bsr     gameloop   branch to gameloop subroutine
00003004  4E75                     167      rts                return from game: subroutine
00003006                           168            
00003006                           169  end:
00003006  FFFF FFFF                170      simhalt
0000300A                           171  
0000300A                           172  *-------------------------------------------------------
0000300A                           173  *-------------------Welcome Subroutine------------------
0000300A                           174  *-------------------------------------------------------
0000300A                           175  welcome:
0000300A  43F9 000046A9            176      lea     welcome_msg,A1  assign message to address register A1
00003010  103C 000E                177      move.b  #14,D0          move literal 14 to DO
00003014  4E4F                     178      trap    #15             trap and interpret value in D0
00003016  6100 08E6                179      bsr     endl            branch to endl subroutine
0000301A                           180      
0000301A  4E75                     181      rts                     return from welcome: subroutine
0000301C                           182  
0000301C                           183  *-------------------------------------------------------
0000301C                           184  *-------------------Role Picking Subroutine------------------
0000301C                           185  *-------------------------------------------------------
0000301C                           186  pick_role:
0000301C                           187  
0000301C  43F9 00004A72            188      lea     wake_up_msg,A1  assign message to address register A1
00003022  103C 000E                189      move.b  #14,D0          move literal 14 to DO
00003026  4E4F                     190      trap    #15             trap and interpret value in D0
00003028  6100 08D4                191      bsr     endl            branch to endl subroutine
0000302C                           192      
0000302C  43F9 00004B8A            193      lea     pick_role_msg,A1 assign message to address register A1
00003032  103C 000E                194      move.b  #14,D0           move literal 14 to DO
00003036  4E4F                     195      trap    #15              trap and interpret value in D0
00003038                           196      
00003038  7A03                     197      move.l  #3,D5           Move the number 3 to D5 to tell the program how many options there are
0000303A                           198      
0000303A  6100 00E2                199      bsr     input           branch to the input subroutine
0000303E                           200      
0000303E  6100 0E7A                201      bsr     press_continue          Pause the game until a key is pressed
00003042                           202      
00003042  4E75                     203      rts                     return from pick_role subroutine
00003044                           204      
00003044                           205  role_input:
00003044  11C1 5FF2                206      move.b  D1,PLA_CLASS    Move the role number to player class memory location to hold the class number
00003048                           207      
00003048                           208      *Give the player a message depending on the role chosen
00003048  B23C 0001                209      CMP.B   #1,D1
0000304C  6700 0014                210      BEQ     knight_select   Branch to knight message if role selected
00003050                           211      
00003050  B23C 0002                212      CMP.B   #2,D1
00003054  6700 003C                213      BEQ     mage_select     Branch to mage message if role selected
00003058                           214      
00003058  B23C 0003                215      CMP.B   #3,D1
0000305C  6700 0064                216      BEQ     rogue_select    Branch to rogue message if role selected
00003060                           217      
00003060  4E75                     218      rts
00003062                           219      
00003062                           220  knight_select:
00003062  43F9 00004D5D            221      lea     knight_role_msg,A1  assign message to address register A1
00003068  103C 000E                222      move.b  #14,D0              move literal 14 to DO
0000306C  4E4F                     223      trap    #15                 Display the knight message
0000306E                           224      
0000306E  223C 00F000F0            225      move.l  #PURPLE,D1          Load the purple colour
00003074  6100 0EB8                226      bsr     change_font_colour  Change the font colour
00003078                           227      
00003078  43F9 00004DAF            228      lea     knight_spec_msg,A1  assign message to address register A1
0000307E  103C 000E                229      move.b  #14,D0              move literal 14 to DO
00003082  4E4F                     230      trap    #15                 Display the knight message
00003084                           231      
00003084  223C 00FFFFFF            232      move.l  #WHITE,D1           Load the white colour
0000308A  6100 0EA2                233      bsr     change_font_colour  Change the font colour
0000308E                           234      
0000308E  6000 0062                235      bra     tutorial_intro      Branch to tutorial subroutine
00003092                           236  
00003092                           237  mage_select:
00003092  43F9 00004DFD            238      lea     mage_role_msg,A1    Assign message to address register A1
00003098  103C 000E                239      move.b  #14,D0              move literal 14 to DO
0000309C  4E4F                     240      trap    #15                 Display the mage message
0000309E                           241      
0000309E  223C 00F000F0            242      move.l  #PURPLE,D1          Load the purple colour
000030A4  6100 0E88                243      bsr     change_font_colour  Change the font colour
000030A8                           244      
000030A8  43F9 00004E47            245      lea     mage_spec_msg,A1    assign message to address register A1
000030AE  103C 000E                246      move.b  #14,D0              move literal 14 to DO
000030B2  4E4F                     247      trap    #15                 Display the mage message
000030B4                           248      
000030B4  223C 00FFFFFF            249      move.l  #WHITE,D1           Load the white colour
000030BA  6100 0E72                250      bsr     change_font_colour  Change the font colour
000030BE                           251      
000030BE  6000 0032                252      bra     tutorial_intro      Branch to tutorial subroutine
000030C2                           253  
000030C2                           254  rogue_select:
000030C2  43F9 00004E8A            255      lea     rogue_role_msg,A1   Assign message to address register A1
000030C8  103C 000E                256      move.b  #14,D0              move literal 14 to DO
000030CC  4E4F                     257      trap    #15                 Display the rogue message
000030CE                           258      
000030CE  223C 00F000F0            259      move.l  #PURPLE,D1          Load the purple colour
000030D4  6100 0E58                260      bsr     change_font_colour  Change the font colour
000030D8                           261      
000030D8  43F9 00004ED2            262      lea     rogue_spec_msg,A1   Assign message to address register A1
000030DE  103C 000E                263      move.b  #14,D0              move literal 14 to DO
000030E2  4E4F                     264      trap    #15                 Display the rogue message
000030E4                           265      
000030E4  223C 00FFFFFF            266      move.l  #WHITE,D1           Load the white colour
000030EA  6100 0E42                267      bsr     change_font_colour  Change the font colour
000030EE                           268      
000030EE  6000 0002                269      bra     tutorial_intro      Branch to tutorial subroutine
000030F2                           270      
000030F2                           271  tutorial_intro:
000030F2  6100 080A                272      bsr     endl                Break to a new line
000030F6                           273  
000030F6  223C 000000FF            274      move.l  #RED,D1             Load the purple colour
000030FC  6100 0E30                275      bsr     change_font_colour  Change the font colour
00003100                           276      
00003100  43F9 0000495A            277      lea     tutorial_msg,A1     Load tutorial message to address register A1
00003106  103C 000E                278      move.b  #14,D0              move literal 14 to DO
0000310A  4E4F                     279      trap    #15                 Display the tutorial message
0000310C                           280      
0000310C  223C 00FFFFFF            281      move.l  #WHITE,D1           Load the white colour
00003112  6100 0E1A                282      bsr     change_font_colour  Change the font colour
00003116                           283      
00003116  11FC 0005 5FF3           284      move.b  #5,GAME_STATE       Change the game state to the movement state
0000311C                           285      
0000311C  4E75                     286      rts
0000311E                           287      
0000311E                           288  *-------------------------------------------------------
0000311E                           289  *---------Gameplay Input Values Subroutine--------------
0000311E                           290  *-------------------------------------------------------    
0000311E                           291  input:
0000311E  6100 07DE                292      bsr     endl            Branch to end line subroutine
00003122  6100 0E1C                293      bsr     get_cursor_pos  Get the position of the cursor in D3
00003126                           294      
00003126  43F9 00004D01            295      lea     input_nums_msg,A1 assign message to address register A1
0000312C  103C 000E                296      move.b  #14,D0          move literal 14 to DO
00003130  4E4F                     297      trap    #15             Display the "enter number" message
00003132                           298      
00003132  2205                     299      move.l  D5,D1           Move the number of options to D1 to display it
00003134  103C 0003                300      move.b  #3,D0           move literal 3 to DO
00003138  4E4F                     301      trap    #15             Display the number in D1 to show the input range
0000313A                           302      
0000313A  43F9 00004D1A            303      lea     colon_msg,A1    assign message to address register A1
00003140  103C 000E                304      move.b  #14,D0          move literal 14 to DO
00003144  4E4F                     305      trap    #15             Display a colon after the number range
00003146                           306      
00003146  103C 0004                307      move.b  #4,D0           Move the number 4 to D0
0000314A  4E4F                     308      trap    #15             Take input
0000314C                           309      
0000314C  1A01                     310      move.b  D1,D5           Move the input to D5 for later
0000314E                           311      
0000314E  3203                     312      move.w  D3,D1           Move the cursor position of the start of the line
00003150  103C 000B                313      move.b  #11,D0          Move the number literal 11 to D0 for trap command
00003154  4E4F                     314      trap    #15             Move the cursor back to the start of the line
00003156                           315      
00003156  43F9 00004906            316      lea     blank_msg,A1    Load the blank message into A1 to wipe the line blank
0000315C  103C 000E                317      move.b  #14,D0          Move number literal to D0 for trap command
00003160  4E4F                     318      trap    #15             Display the loaded message
00003162                           319      
00003162  103C 000B                320      move.b  #11,D0          Move the number literal 11 to D0 for trap command
00003166  4E4F                     321      trap    #15             Move the cursor back to the start of the line
00003168                           322      
00003168  4281                     323      clr.l   D1              Clear D1 of large values
0000316A  1205                     324      move.b  D5,D1           Move the input back to D1
0000316C                           325      
0000316C                           326  manage_input:
0000316C  B27C 0001                327      CMP     #1,D1           Check input against minimum value
00003170  6D00 0014                328      BLT     invalid_input   Error if less than 1
00003174                           329      
00003174  B245                     330      CMP     D5,D1           Compare input against max value
00003176  6E00 000E                331      BGT     invalid_input   Error if more than max value
0000317A                           332      
0000317A  0C38 0000 5FF3           333      CMP.B   #0,GAME_STATE   Check which state the game is in
00003180  6700 FEC2                334      BEQ     role_input      Branch to the manage input for the role picking
00003184                           335      
00003184  4E75                     336      rts                     Return out of subroutine
00003186                           337  
00003186                           338  invalid_input:
00003186  43F9 00004D1D            339      lea     input_error_msg,A1 assign message to address register A1
0000318C  103C 000E                340      move.b  #14,D0          move literal 14 to DO
00003190  4E4F                     341      trap    #15             Display the error message
00003192                           342      
00003192  608A                     343      bra     input           Go back to taking input
00003194                           344  
00003194                           345  *-------------------------------------------------------
00003194                           346  *----------------Gameloop (main loop)-------------------
00003194                           347  *------------------------------------------------------- 
00003194                           348  gameloop:
00003194  6100 073A                349      bsr     clear_screen    clears the screen  
00003198  6100 0308                350      bsr     draw            branch to draw screen subroutine
0000319C  6100 035C                351      bsr     draw_hud
000031A0  6100 0008                352      bsr     update          branch to update game subroutine 
000031A4  6100 06DE                353      bsr     gameplay        branch to gameplay subroutine
000031A8  60EA                     354      bra     gameloop        Continue looping the game loop     
000031AA                           355  
000031AA                           356  *-------------------------------------------------------
000031AA                           357  *----------------Update Quest Progress------------------
000031AA                           358  *  Complete Quest
000031AA                           359  *------------------------------------------------------- 
000031AA                           360  update:
000031AA  0C38 0000 5FF0           361      CMP.B   #0,PLAYER           Check if the player health is zero
000031B0  6F00 0022                362      BLE     player_dead         Player is dead if health is zero or below
000031B4                           363      
000031B4  BDFC 00008156            364      CMP.L   #WIN_POINT,A6       Check if the player is standing on the win point
000031BA  6700 0042                365      BEQ     won_game            Branch to the won game subroutine
000031BE                           366  
000031BE  0C38 0005 5FF3           367      CMP.B   #5,GAME_STATE       Check which state the game is in
000031C4  6700 0066                368      BEQ     movement_checks     Check for enemies and shops if in movement state
000031C8  0C38 0006 5FF3           369      CMP.B   #6,GAME_STATE       Check which state the game is in
000031CE  6700 029A                370      BEQ     enemy_alive_check   Check if enemy is dead if in combat
000031D2                           371      
000031D2  4E75                     372      rts
000031D4                           373      
000031D4                           374  *-------------------------------------------------------
000031D4                           375  *---------------------Win or Lose----------------------- 
000031D4                           376  player_dead:
000031D4  6100 0728                377      bsr     endl            Break to new line
000031D8                           378      
000031D8  43F9 000054EA            379      lea     death_msg,A1    Load the death message
000031DE  103C 000E                380      move.b  #14,D0          Move byte #14 to D0 for the trap command
000031E2  4E4F                     381      trap    #15             Display the loaded message
000031E4                           382  
000031E4  6100 0CD4                383      bsr     press_continue  Pause to get input
000031E8  6100 06E6                384      bsr     clear_screen    Clear the screen
000031EC  6100 02E2                385      bsr     draw_graveyard  Draw a graveyard
000031F0  6100 070C                386      bsr     endl            Break to new line
000031F4  11FC 0040 5FF3           387      move.b  #64,GAME_STATE  Set the game state to end game
000031FA  6000 06E0                388      bra     replay          Give the player the option to restart or quit
000031FE                           389      
000031FE                           390  won_game:
000031FE  6100 06FE                391      bsr     endl            Break to new line
00003202                           392      
00003202  43F9 0000554F            393      lea     win_msg,A1      Load the win message
00003208  103C 000E                394      move.b  #14,D0          Move byte #14 to D0 for the trap command
0000320C  4E4F                     395      trap    #15             Display the loaded message
0000320E                           396  
0000320E  6100 0CAA                397      bsr     press_continue  Pause to get input
00003212  6100 06BC                398      bsr     clear_screen    Clear the screen
00003216  6100 06E6                399      bsr     endl            Break to new line
0000321A  6100 02C2                400      bsr     draw_castle     Draw a castle
0000321E  6100 06DE                401      bsr     endl            Break to new line
00003222  11FC 0040 5FF3           402      move.b  #64,GAME_STATE  Set the game state to end game
00003228  6000 06B2                403      bra     replay          Give the player the option to restart or quit
0000322C                           404  
0000322C                           405  *-------------------------------------------------------
0000322C                           406  *--------------------Movement State--------------------- 
0000322C                           407  movement_checks:
0000322C  6100 0100                408      bsr     manage_torch    Check if the torch life is zero and if damage player if so
00003230  6100 0016                409      bsr     loot_piles_check Check for loot piles under the player 
00003234  6100 012C                410      bsr     enemies_check   Check for enemies beside the player
00003238  0C38 0005 5FF3           411      CMP.B   #5,GAME_STATE   Compare the movement gamestate number with the current gamestate
0000323E  6600 0CAC                412      BNE     return          Return from the loop if the game is not in the movement state anymore
00003242  6100 01A8                413      bsr     shops_check     Check for shops beside the player
00003246                           414      
00003246  4E75                     415      rts
00003248                           416  
00003248                           417  *-------------------Loot pile checks--------------------
00003248                           418  loot_piles_check:
00003248  4BF8 7000                419      lea     FIRST_LOOT,A5   Load the memory address of the first loot pile
0000324C  1A3C 0000                420      move.b  #0,D5           Move the starting loot number to D5
00003250  6100 0004                421      bsr     loot_pile_loop  Loop through all loot piles
00003254  4E75                     422      rts                     Return from subroutine
00003256                           423      
00003256                           424  loot_pile_loop:
00003256  BA3C 0002                425      CMP.B   #ENEMY_MAX,D5   Compare the loot number with the maximum enemy number
0000325A  6C00 0C90                426      BGE     return          Return from the loop if the current loot number is greater than or equal to the max
0000325E                           427  
0000325E  6100 000A                428      bsr     loot_pile_check Check for a loot pile
00003262                           429      
00003262  5205                     430      add.b   #1,D5           Add to the current loot number
00003264  DAFC 0010                431      add.w   #16,A5          Add to the current loot pointer to move to the next loot pile
00003268  60EC                     432      bra     loot_pile_loop  Keep looping the loot piles
0000326A                           433      
0000326A                           434  loot_pile_check:
0000326A  5C4D                     435      add.w   #L_ACTIVE,A5    Move to the active state
0000326C  0C15 0000                436      CMP.B   #0,(A5)         Check if the loot is active
00003270  5D4D                     437      sub.w   #L_ACTIVE,A5    Move to the active state
00003272  6700 0C78                438      BEQ     return          Return if not active
00003276                           439  
00003276  3415                     440      move.w  (A5),D2         Move the loot pile position to D2 for large value comparison
00003278  BDC2                     441      CMP.L   D2,A6           Check if the player is on a loot pile   
0000327A  6700 0004                442      BEQ     pickup_loot     Pickup the loot
0000327E                           443      
0000327E  4E75                     444      rts     Return if not touching a loot pile
00003280                           445      
00003280                           446  pickup_loot:
00003280  6100 067C                447      bsr     endl                Line break
00003284                           448      
00003284  223C 0000FFFF            449      move.l  #GOLD,D1            Load gold colour
0000328A  6100 0CA2                450      bsr     change_font_colour  Change the font colour
0000328E                           451      
0000328E  43F9 00005745            452      LEA     pickup_loot_msg,A1  Load the encounter message int A1
00003294  103C 000E                453      move.b  #14,D0              Move #14 to D0 to display message
00003298  4E4F                     454      trap    #15                 Display the loaded message
0000329A                           455      
0000329A  544D                     456      add.w   #S_POTIONS,A5       Move to potions number
0000329C  1215                     457      move.b  (A5),D1            Move the loot potions number to D1 and increment
0000329E  D338 5FF9                458      add.b   D1,PLA_POTIONS      Give the player the number of potions in the loot
000032A2                           459      
000032A2  43F9 00005769            460      LEA     pickup_potion_msg,A1  Load the pickup potions message into A1
000032A8  103C 000E                461      move.b  #14,D0              Move #14 to D0 to display message
000032AC  4E4F                     462      trap    #15                 Display the loaded message
000032AE                           463      
000032AE  384D                     464      move.w  A5,A4               Move the item number to A4 to draw it
000032B0  6100 05B0                465      bsr     draw_item_number    Draw the item number
000032B4  6100 0648                466      bsr     endl                Break to new line
000032B8  524D                     467      add.w   #1,A5               Move to the next item in the loot pile
000032BA                           468      
000032BA  1215                     469      move.b  (A5),D1             Move the key number to D1 and increment
000032BC  D338 5FFA                470      add.b   D1,PLA_KEYS         Give the player the number of keys in the loot
000032C0                           471      
000032C0  43F9 00005773            472      LEA     pickup_key_msg,A1   Load the pickup key message into A1
000032C6  103C 000E                473      move.b  #14,D0              Move #14 to D0 to display message
000032CA  4E4F                     474      trap    #15                 Display the loaded message
000032CC                           475      
000032CC  384D                     476      move.w  A5,A4               Move the item number to A4 to draw it
000032CE  6100 0592                477      bsr     draw_item_number    Draw the item number
000032D2  6100 062A                478      bsr     endl                Break to new line
000032D6  524D                     479      add.w   #1,A5               Move to the next item in the loot pile
000032D8                           480      
000032D8  1215                     481      move.b  (A5),D1             Move the torch number to D1 and increment
000032DA  D338 5FFB                482      add.b   D1,PLA_TORCH        Give the player the number of torches in the loot
000032DE                           483      
000032DE  43F9 0000577A            484      LEA     pickup_torch_msg,A1 Load the pickup torch message into A1
000032E4  103C 000E                485      move.b  #14,D0              Move #14 to D0 to display message
000032E8  4E4F                     486      trap    #15                 Display the loaded message
000032EA                           487      
000032EA  384D                     488      move.w  A5,A4               Move the item number to A4 to draw it
000032EC  6100 0574                489      bsr     draw_item_number    Draw the item number
000032F0  6100 060C                490      bsr     endl                Break to new line
000032F4  524D                     491      add.w   #1,A5               Move to the next item in the loot pile
000032F6                           492      
000032F6  1215                     493      move.b  (A5),D1             Move the torch number to D1 and increment
000032F8  D338 5FF8                494      add.b   D1,PLA_GOLD         Give the player the number of gold in the loot
000032FC                           495      
000032FC  43F9 00005761            496      LEA     pickup_gold_msg,A1  Load the pickup gold message int A1
00003302  103C 000E                497      move.b  #14,D0              Move #14 to D0 to display message
00003306  4E4F                     498      trap    #15                 Display the loaded message
00003308                           499      
00003308  384D                     500      move.w  A5,A4               Move the item number to A4 to draw it
0000330A  6100 0556                501      bsr     draw_item_number    Draw the item number
0000330E  6100 05EE                502      bsr     endl                Break to new line
00003312  524D                     503      add.w   #1,A5               Move to the next item in the loot pile
00003314                           504      
00003314  1ABC 0000                505      move.b  #0,(A5)             Set the loot to not active
00003318  5D4D                     506      sub.w   #L_ACTIVE,A5        Move to active state
0000331A                           507      
0000331A  223C 00FFFFFF            508      move.l  #WHITE,D1           Load the white colour
00003320  6100 0C0C                509      bsr     change_font_colour  Change the font colour
00003324                           510      
00003324  6100 0B94                511      bsr     press_continue      Wait for user input
00003328  6100 01D0                512      bsr     draw_hud            Re-draw the hud
0000332C                           513      
0000332C  4E75                     514      rts
0000332E                           515  
0000332E                           516  *---------------------Manage Torch----------------------
0000332E                           517  manage_torch:
0000332E  0C38 0000 5FFB           518      CMP.B   #0,PLA_TORCH    Compare the torch life with zero
00003334  6E00 0BB6                519      BGT     return          Return if the torch life is greater than zero
00003338                           520      
00003338  5338 5FF0                521      sub.b   #1,PLAYER       Remove one health from the player
0000333C                           522      
0000333C  6100 05C0                523      bsr     endl            Break to new line
00003340                           524      
00003340  223C 000000FF            525      move.l  #RED,D1
00003346  6100 0BE6                526      bsr     change_font_colour  Change the font colour
0000334A                           527      
0000334A  43F9 0000572D            528      lea     no_torch_msg,A1 Load the no torch message into A1
00003350  103C 000E                529      move.b  #14,D0          Move the number literal 14 into D0 for trap command
00003354  4E4F                     530      trap    #15             Display the loaded message
00003356                           531      
00003356  223C 00FFFFFF            532      move.l  #WHITE,D1
0000335C  6100 0BD0                533      bsr     change_font_colour  Change the font colour
00003360                           534      
00003360  4E75                     535      rts                     Return from the subroutine
00003362                           536  
00003362                           537  *--------------------Enemy Checking--------------------- 
00003362                           538  enemies_check:
00003362  4BF8 6000                539      lea     FIRST_ENEMY,A5  Load the memory address of the first enemy
00003366  1A3C 0000                540      move.b  #0,D5           Move the starting enemy number to D5
0000336A  6100 0004                541      bsr     enemies_loop    Loop through all enemies
0000336E  4E75                     542      rts                     Return from subroutine
00003370                           543      
00003370                           544  enemies_loop:
00003370  BA3C 0002                545      CMP.B   #ENEMY_MAX,D5   Compare the enemy number with the maximum enemy number
00003374  6C00 0B76                546      BGE     return          Return from the loop if the current enemy number is greater than or equal to the max
00003378                           547  
00003378  6100 0014                548      bsr     enemy_check     Check for an enemy
0000337C                           549      
0000337C  0C38 0005 5FF3           550      CMP.B   #5,GAME_STATE   Compare the movement gamestate number with the current gamestate
00003382  6600 0B68                551      BNE     return          Return from the loop if the game is not in the movement state anymore
00003386                           552      
00003386  5205                     553      add.b   #1,D5           Add to the current enemy number
00003388  DAFC 000C                554      add.w   #12,A5          Add to the current enemy pointer to move to the next enemy (16 for next enemy - 4 to get back from position)
0000338C  60E2                     555      bra     enemies_loop    Keep looping the enemies
0000338E                           556      
0000338E                           557  
0000338E                           558  enemy_check:
0000338E  564D                     559      add.w   #ALIVE,A5       Move into enemy information to check if its alive
00003390  0C1D 0000                560      CMP.B   #0,(A5)+        Check if the enemy is alive
00003394  6700 0B56                561      BEQ     return          Return from the check if the enemy is dead
00003398                           562      
00003398  340E                     563      move.w  A6,D2           Move the player position to D2
0000339A                           564      
0000339A                           565      *Check if the player is beside an enemy
0000339A  0442 0010                566      sub.w   #16,D2          Check north
0000339E  B455                     567      CMP.W   (A5),D2           
000033A0  6700 0020                568      BEQ     enter_combat    Enter the player into combat
000033A4                           569      
000033A4  0642 0020                570      add.w   #32,D2          Check south
000033A8  B455                     571      CMP.W   (A5),D2           
000033AA  6700 0016                572      BEQ     enter_combat    Enter the player into combat
000033AE                           573      
000033AE  0442 0011                574      sub.w   #17,D2          Check west
000033B2  B455                     575      CMP.W   (A5),D2           
000033B4  6700 000C                576      BEQ     enter_combat    Enter the player into combat
000033B8                           577      
000033B8  5442                     578      add.w   #2,D2           Check east
000033BA  B455                     579      CMP.W   (A5),D2           
000033BC  6700 0004                580      BEQ     enter_combat    Enter the player into combat
000033C0                           581      
000033C0  4E75                     582      rts     Return if not touching an enemy
000033C2                           583      
000033C2                           584  enter_combat:
000033C2  594D                     585      sub.w   #4,A5               Get the memory address of the enemy opposed to it's position
000033C4  11FC 0006 5FF3           586      move.b  #6,GAME_STATE       Move to combat state
000033CA                           587      
000033CA  6100 0532                588      bsr     endl                Line break
000033CE                           589      
000033CE  43F9 00005057            590      LEA     encounter_msg,A1    Load the encounter message int A1
000033D4  103C 000E                591      move.b  #14,D0              Move #14 to D0 to display message
000033D8  4E4F                     592      trap    #15                 Display the loaded message
000033DA                           593      
000033DA  6100 0ADE                594      bsr     press_continue      Branch to the press to continue subroutine
000033DE                           595      
000033DE  6100 04F0                596      bsr     clear_screen        Clear the screen
000033E2                           597      
000033E2  6100 00DE                598      bsr     draw_skeleton       Draw the enemy
000033E6  6100 02C8                599      bsr     draw_battle_info    Draw the info
000033EA                           600      
000033EA  4E75                     601      rts
000033EC                           602        
000033EC                           603  *--------------------Shop Checking----------------------
000033EC                           604  shops_check:
000033EC  4BF8 6500                605      lea     FIRST_SHOP,A5   Load the memory address of the first shop
000033F0  1A3C 0000                606      move.b  #0,D5           Move the starting shop number to D5
000033F4  6100 0004                607      bsr     shops_loop      Loop through all shops
000033F8  4E75                     608      rts                     Return from subroutine
000033FA                           609      
000033FA                           610  shops_loop:
000033FA  BA3C 0002                611      CMP.B   #SHOP_MAX,D5    Compare the shop number with the maximum shop number
000033FE  6C00 0AEC                612      BGE     return          Return from the loop if the current shop number is greater than or equal to the max
00003402                           613      
00003402  6100 0014                614      bsr     shop_check      Check for a shop
00003406                           615      
00003406  0C38 0005 5FF3           616      CMP.B   #5,GAME_STATE   Compare the movement gamestate number with the current gamestate
0000340C  6600 0ADE                617      BNE     return          Return from the loop if the game is not in the movement state anymore
00003410                           618      
00003410  5205                     619      add.b   #1,D5           Add to the current shop number
00003412  DAFC 0010                620      add.w   #16,A5          Add to the current shop pointer to move to the next shop
00003416  60E2                     621      bra     shops_loop      Keep looping the shops
00003418                           622      
00003418                           623  shop_check:    
00003418  340E                     624      move.w  A6,D2           Move the player position to D2
0000341A                           625      
0000341A                           626      *Check if the player is beside a shop
0000341A  0442 0010                627      sub.w   #16,D2          Check north
0000341E  B455                     628      CMP.W   (A5),D2           
00003420  6700 0020                629      BEQ     enter_shop      The player enters a shop
00003424                           630      
00003424  0642 0020                631      add.w   #32,D2          Check south
00003428  B455                     632      CMP.W   (A5),D2           
0000342A  6700 0016                633      BEQ     enter_shop      The player enters a shop
0000342E                           634      
0000342E  0442 0011                635      sub.w   #17,D2          Check west
00003432  B455                     636      CMP.W   (A5),D2           
00003434  6700 000C                637      BEQ     enter_shop      The player enters a shop
00003438                           638      
00003438  5442                     639      add.w   #2,D2           Check east
0000343A  B455                     640      CMP.W   (A5),D2           
0000343C  6700 0004                641      BEQ     enter_shop      The player enters a shop
00003440                           642      
00003440  4E75                     643      rts     Return if not touching a shop
00003442                           644      
00003442                           645  enter_shop:
00003442  11FC 0007 5FF3           646      move.b  #7,GAME_STATE       Move to shop game state
00003448                           647      
00003448  6100 04B4                648      bsr     endl                Line break
0000344C                           649      
0000344C  43F9 000055F0            650      LEA     shop_enter_msg,A1   Load the encounter message int A1
00003452  103C 000E                651      move.b  #14,D0              Move #14 to D0 to display message
00003456  4E4F                     652      trap    #15                 Display the loaded message
00003458                           653      
00003458  6100 0A60                654      bsr     press_continue      Branch to the press to continue subroutine
0000345C                           655      
0000345C  6100 0472                656      bsr     clear_screen        Clear the screen
00003460                           657      
00003460  6100 008A                658      bsr     draw_merchant       Draw the merchant
00003464  6100 02C8                659      bsr     draw_shop_info      Draw the info
00003468                           660      
00003468  4E75                     661      rts
0000346A                           662  
0000346A                           663  *-------------------------------------------------------
0000346A                           664  *---------------------Combat State---------------------- 
0000346A                           665  enemy_alive_check:
0000346A  0C15 0000                666      CMP.B   #0,(A5)     Compare the enemy health with zero
0000346E  6F00 0004                667      BLE     enemy_died  If the enemy health is zero or below, they died
00003472                           668      
00003472  4E75                     669      rts
00003474                           670      
00003474                           671  enemy_died:
00003474  6100 0488                672      bsr     endl            Break to a new line
00003478                           673  
00003478  43F9 000054B4            674      lea     battle_won_msg,A1   Load the won battle message
0000347E  103C 000E                675      move.b  #14,D0              Move the literal #14 to D0 for trap task #14
00003482  4E4F                     676      trap    #15                 Display the message
00003484                           677      
00003484  11FC 0005 5FF3           678      move.b  #5,GAME_STATE   Set the game state mack to movement state
0000348A  564D                     679      add.w   #ALIVE,A5       Move from the enemy health to its alive status
0000348C  1ABC 0000                680      move.b  #0,(A5)         Set the enemy as dead
00003490                           681      
00003490  6100 0A28                682      bsr     press_continue
00003494                           683      
00003494  6100 043A                684      bsr     clear_screen    Clear the screen
00003498  6100 0008                685      bsr     draw            Draw the map for first frame back in movement
0000349C  6100 005C                686      bsr     draw_hud        Draw the hud for first frame back in movement
000034A0                           687      
000034A0  4E75                     688      rts
000034A2                           689      
000034A2                           690  *-------------------------------------------------------
000034A2                           691  *-----------------Draw Quest Updates--------------------
000034A2                           692  * Draw the game progress information, status regarding
000034A2                           693  * quest
000034A2                           694  *------------------------------------------------------- 
000034A2                           695  draw:
000034A2  0C38 0005 5FF3           696      CMP.B   #5,GAME_STATE   Check which state the game is in
000034A8  6700 0AA4                697      BEQ     draw_loop       If in the movement state, draw the map
000034AC  0C38 0006 5FF3           698      CMP.B   #6,GAME_STATE   Check which state the game is in
000034B2  6700 000E                699      BEQ     draw_skeleton   If in the combat state, draw the enemy
000034B6  0C38 0007 5FF3           700      CMP.B   #7,GAME_STATE   Check which state the game is in
000034BC  6700 002E                701      BEQ     draw_merchant   If in the shop state, draw the enemy
000034C0  4E75                     702      rts
000034C2                           703      
000034C2                           704  draw_skeleton:
000034C2  43F9 00005933            705      lea     skeleton_msg,A1 Load the skeleton message
000034C8  103C 000E                706      move.b  #14,D0          Move literal 14 for display message trap command
000034CC  4E4F                     707      trap    #15             Display the loaded message
000034CE                           708      
000034CE  4E75                     709      rts
000034D0                           710      
000034D0                           711  draw_graveyard:
000034D0  43F9 00005881            712      lea     graveyard_msg,A1 Load the graveyard message
000034D6  103C 000E                713      move.b  #14,D0           Move literal 14 for display message trap command
000034DA  4E4F                     714      trap    #15              Display the loaded message
000034DC  4E75                     715      rts                      Return from the subroutine
000034DE                           716  
000034DE                           717  draw_castle:
000034DE  43F9 00005B52            718      lea     castle_msg,A1   Load the castle message
000034E4  103C 000E                719      move.b  #14,D0          Move literal 14 for display message trap command
000034E8  4E4F                     720      trap    #15             Display the loaded message
000034EA  4E75                     721      rts                     Return from the subroutine
000034EC                           722      
000034EC                           723  draw_merchant:
000034EC  43F9 00005A2B            724      lea     merchant_msg,A1  Load the merchant message
000034F2  103C 000E                725      move.b  #14,D0           Move literal 14 for display message trap command
000034F6  4E4F                     726      trap    #15              Display the loaded message
000034F8                           727      
000034F8  4E75                     728      rts
000034FA                           729      
000034FA                           730  draw_hud:
000034FA  0C38 0005 5FF3           731      CMP.B   #5,GAME_STATE       Check which state the game is in
00003500  6700 0018                732      BEQ     draw_player_info    If in the movement state, draw the player info
00003504  0C38 0006 5FF3           733      CMP.B   #6,GAME_STATE       Check which state the game is in
0000350A  6700 01A4                734      BEQ     draw_battle_info    If in the combat state, draw the combat info
0000350E  0C38 0007 5FF3           735      CMP.B   #7,GAME_STATE       Check which state the game is in
00003514  6700 0218                736      BEQ     draw_shop_info      If in the shop state, draw the shop info
00003518                           737      
00003518  4E75                     738      rts
0000351A                           739  
0000351A                           740  *-------------------Draw Player Info--------------------
0000351A                           741  draw_player_info:
0000351A  6100 0A24                742      bsr     get_cursor_pos   Get the cursor position and store it in D3
0000351E                           743      
0000351E                           744      * Display the player health
0000351E  3A3C 3201                745      move.w  #CSR_POS_MOVE,D5 Move a start cursor position to D5
00003522  323C 3201                746      move.w  #CSR_POS_MOVE,D1 Move a start cursor position to D1 to move the cursor
00003526  4E4F                     747      trap    #15              Move the cursor position
00003528  4281                     748      clr.l   D1               Clear the cursor position from D1
0000352A                           749      
0000352A  43F9 0000542D            750      lea     health_msg,A1   Load the hud message
00003530  103C 000E                751      move.b  #14,D0          Move literal 14 for display message trap command
00003534  4E4F                     752      trap    #15             Display the loaded message
00003536                           753      
00003536  1238 5FF0                754      move.b  PLAYER,D1       Move the player health value to D1 to display
0000353A  103C 0003                755      move.b  #3,D0           Move literal 3 for display number trap command
0000353E  4E4F                     756      trap    #15             Display the number in D1
00003540                           757      
00003540                           758      * Display the torch life
00003540  6100 0312                759      bsr     next_cursor_pos  Move to the next cursor position
00003544                           760      
00003544  43F9 0000545A            761      lea     torch_msg,A1    Load the hud message
0000354A  103C 000E                762      move.b  #14,D0          Move literal 14 for display message trap command
0000354E  4E4F                     763      trap    #15             Display the loaded message
00003550                           764      
00003550  1238 5FFB                765      move.b  PLA_TORCH,D1    Move the player torch life value to D1 to display
00003554  103C 0003                766      move.b  #3,D0           Move literal 3 for display number trap command
00003558  4E4F                     767      trap    #15             Display the number in D1
0000355A                           768      
0000355A                           769      * Display the inventory
0000355A  6100 02F8                770      bsr     next_cursor_pos  Move to the next cursor position
0000355E                           771      
0000355E  43F9 00005474            772      lea     inventory_msg,A1   Load the hud message
00003564  103C 000E                773      move.b  #14,D0          Move literal 14 for display message trap command
00003568  4E4F                     774      trap    #15             Display the loaded message
0000356A                           775      
0000356A                           776      * Display the player gold
0000356A  6100 02E8                777      bsr     next_cursor_pos  Move to the next cursor position
0000356E                           778      
0000356E  43F9 0000547F            779      lea     gold_msg,A1   Load the hud message
00003574  103C 000E                780      move.b  #14,D0          Move literal 14 for display message trap command
00003578  4E4F                     781      trap    #15             Display the loaded message
0000357A                           782      
0000357A  49F8 5FF8                783      lea     PLA_GOLD,A4
0000357E  6100 02E2                784      bsr     draw_item_number
00003582                           785      
00003582                           786      * Display the player potions
00003582  6100 02D0                787      bsr     next_cursor_pos  Move to the next cursor position
00003586                           788      
00003586  43F9 0000548E            789      lea     potions_msg,A1   Load the hud message
0000358C  103C 000E                790      move.b  #14,D0          Move literal 14 for display message trap command
00003590  4E4F                     791      trap    #15             Display the loaded message
00003592                           792      
00003592  49F8 5FF9                793      lea     PLA_POTIONS,A4
00003596  6100 02CA                794      bsr     draw_item_number
0000359A                           795      
0000359A                           796      * Display the player keys
0000359A  6100 02B8                797      bsr     next_cursor_pos  Move to the next cursor position
0000359E                           798      
0000359E  43F9 00005487            799      lea     key_msg,A1   Load the hud message
000035A4  103C 000E                800      move.b  #14,D0          Move literal 14 for display message trap command
000035A8  4E4F                     801      trap    #15             Display the loaded message
000035AA                           802      
000035AA  49F8 5FFA                803      lea     PLA_KEYS,A4
000035AE  6100 02B2                804      bsr     draw_item_number
000035B2                           805      
000035B2  6100 000E                806      bsr     draw_map_legend Draw the map legend
000035B6                           807      
000035B6  3203                     808      move.w  D3,D1           Move the previos cursor position to D1 to put it back in place
000035B8                           809      
000035B8  103C 000B                810      move.b  #11,D0          Move the byte #11 to D0 for trap command 11          
000035BC  4E4F                     811      trap    #15             Set the cursor position with trap command 11
000035BE                           812      
000035BE  4241                     813      clr     D1              Clear D1 for later use
000035C0                           814      
000035C0  4E75                     815      rts
000035C2                           816      
000035C2                           817  *-------------------Draw Map Legend---------------------
000035C2                           818  draw_map_legend:
000035C2                           819      * Display the legend message
000035C2  3A3C 3201                820      move.w  #CSR_POS_MOVE,D5 Move a start cursor position to D5
000035C6  5E45                     821      add.w   #7,D5            increment the start position by 7
000035C8  6100 028A                822      bsr     next_cursor_pos  Move to the next cursor position
000035CC                           823      
000035CC  103C 000E                824      move.b  #14,D0          Move literal 14 for display message trap command
000035D0  43F9 00005007            825      lea     map_legend_msg,A1 Load the message into A1
000035D6  4E4F                     826      trap    #15             Display the loaded message
000035D8                           827      
000035D8                           828      * Display the player mark
000035D8  6100 027A                829      bsr     next_cursor_pos  Move to the next cursor position
000035DC  223C 0000FF00            830      move.l  #GREEN,D1       Load the colour green to D1
000035E2  6100 094A                831      bsr     change_font_colour  Change the font colour
000035E6                           832      
000035E6  103C 000E                833      move.b  #14,D0          Move literal 14 for display message trap command
000035EA  43F9 00004FFB            834      lea     player_mark,A1  Load the message into A1
000035F0  4E4F                     835      trap    #15             Display the loaded message
000035F2  43F9 00005013            836      lea     map_player_msg,A1 Load the message into A1
000035F8  4E4F                     837      trap    #15             Display the loaded message
000035FA                           838      
000035FA                           839      * Display the enemy mark
000035FA  6100 0258                840      bsr     next_cursor_pos  Move to the next cursor position
000035FE  223C 000000FF            841      move.l  #RED,D1         Load the colour red to D1
00003604  6100 0928                842      bsr     change_font_colour  Change the font colour
00003608                           843      
00003608  103C 000E                844      move.b  #14,D0          Move literal 14 for display message trap command
0000360C  43F9 00004FFD            845      lea     enemy_mark,A1   Load the message into A1
00003612  4E4F                     846      trap    #15             Display the loaded message
00003614  43F9 0000501D            847      lea     map_enemy_msg,A1 Load the message into A1
0000361A  4E4F                     848      trap    #15             Display the loaded message
0000361C                           849      
0000361C                           850      * Display the win point mark
0000361C  6100 0236                851      bsr     next_cursor_pos  Move to the next cursor position
00003620  223C 00FF0000            852      move.l  #BLUE,D1       Load the colour blue to D1
00003626  6100 0906                853      bsr     change_font_colour  Change the font colour
0000362A                           854      
0000362A  103C 000E                855      move.b  #14,D0          Move literal 14 for display message trap command
0000362E  43F9 00004FFF            856      lea     win_point_mark,A1   Load the message into A1
00003634  4E4F                     857      trap    #15             Display the loaded message
00003636  43F9 00005026            858      lea     map_win_point_msg,A1 Load the message into A1
0000363C  4E4F                     859      trap    #15             Display the loaded message
0000363E                           860     
0000363E                           861      * Display the shop mark
0000363E  6100 0214                862      bsr     next_cursor_pos  Move to the next cursor position
00003642  223C 00F000F0            863      move.l  #PURPLE,D1      Load the colour purple to D1
00003648  6100 08E4                864      bsr     change_font_colour  Change the font colour
0000364C                           865      
0000364C  103C 000E                866      move.b  #14,D0          Move literal 14 for display message trap command
00003650  43F9 00005001            867      lea     shop_mark,A1   Load the message into A1
00003656  4E4F                     868      trap    #15             Display the loaded message
00003658  43F9 00005033            869      lea     map_shop_msg,A1 Load the message into A1
0000365E  4E4F                     870      trap    #15             Display the loaded message
00003660                           871      
00003660                           872      * Display the loot mark
00003660  6100 01F2                873      bsr     next_cursor_pos  Move to the next cursor position
00003664  223C 0000FFFF            874      move.l  #GOLD,D1       Load the colour gold to D1
0000366A  6100 08C2                875      bsr     change_font_colour  Change the font colour
0000366E                           876      
0000366E  103C 000E                877      move.b  #14,D0          Move literal 14 for display message trap command
00003672  43F9 00005003            878      lea     loot_mark,A1    Load the message into A1
00003678  4E4F                     879      trap    #15             Display the loaded message
0000367A  43F9 0000503B            880      lea     map_loot_msg,A1 Load the message into A1
00003680  4E4F                     881      trap    #15             Display the loaded message
00003682                           882      
00003682                           883      * Display the door mark
00003682  6100 01D0                884      bsr     next_cursor_pos Move to the next cursor position
00003686  223C 00507090            885      move.l  #BROWN,D1       Load the colour brown to D1
0000368C  6100 08A0                886      bsr     change_font_colour  Change the font colour
00003690                           887      
00003690  103C 000E                888      move.b  #14,D0          Move literal 14 for display message trap command
00003694  43F9 00005005            889      lea     door_mark,A1    Load the message into A1
0000369A  4E4F                     890      trap    #15             Display the loaded message
0000369C  43F9 00005048            891      lea     map_door_msg,A1 Load the message into A1
000036A2  4E4F                     892      trap    #15             Display the loaded message
000036A4                           893      
000036A4  223C 00FFFFFF            894      move.l  #WHITE,D1       Load the colour brown to D1
000036AA  6100 0882                895      bsr     change_font_colour  Change the font colour
000036AE                           896      
000036AE  4E75                     897      rts                     Return from subroutine
000036B0                           898  
000036B0                           899  *-------------------Draw Battle Info--------------------
000036B0                           900  draw_battle_info:
000036B0  6100 088E                901      bsr     get_cursor_pos   Get the cursor position and store it in D3
000036B4                           902      
000036B4                           903      * Move cursor to draw player info
000036B4  3A3C 3401                904      move.w  #CSR_POS_BATTLE_P,D5
000036B8  323C 3401                905      move.w  #CSR_POS_BATTLE_P,D1           
000036BC  4E4F                     906      trap    #15             Set the cursor position with trap command 11
000036BE  4241                     907      clr     D1              Clear D1 of the cursor position
000036C0                           908      
000036C0  43F9 0000542D            909      lea     health_msg,A1   Load the hud message
000036C6  103C 000E                910      move.b  #14,D0          Move literal 14 for display message trap command
000036CA  4E4F                     911      trap    #15             Display the loaded message
000036CC                           912      
000036CC  1238 5FF0                913      move.b  PLAYER,D1       Move the player health value to D1 to display
000036D0  103C 0003                914      move.b  #3,D0           Move literal 3 for display number trap command
000036D4  4E4F                     915      trap    #15             Display the number in D1
000036D6                           916      
000036D6                           917      * Move the cursor to draw potion information
000036D6  6100 017C                918      bsr     next_cursor_pos Move to the next cursor position
000036DA                           919      
000036DA  43F9 0000548E            920      lea     potions_msg,A1   Load the hud message
000036E0  103C 000E                921      move.b  #14,D0          Move literal 14 for display message trap command
000036E4  4E4F                     922      trap    #15             Display the loaded message
000036E6                           923      
000036E6  49F8 5FF9                924      lea     PLA_POTIONS,A4
000036EA  6100 0176                925      bsr     draw_item_number
000036EE                           926      
000036EE                           927      * Move the cursor to draw enemy info
000036EE  103C 000B                928      move.b  #11,D0
000036F2  3A3C 1801                929      move.w  #CSR_POS_BATTLE_E,D5
000036F6  323C 1801                930      move.w  #CSR_POS_BATTLE_E,D1           
000036FA  4E4F                     931      trap    #15             Set the cursor position with trap command 11
000036FC  4241                     932      clr     D1              Clear D1 of the cursor position
000036FE                           933      
000036FE  43F9 0000542D            934      lea     health_msg,A1 Load the hud message
00003704  103C 000E                935      move.b  #14,D0              Move literal 14 for display message trap command
00003708  4E4F                     936      trap    #15                 Display the loaded message
0000370A                           937      
0000370A  1215                     938      move.b  (A5),D1         Move the enemy health value to D1 to display
0000370C  103C 0003                939      move.b  #3,D0           Move literal 3 for display number trap command
00003710  4E4F                     940      trap    #15             Display the number in D1
00003712                           941      
00003712                           942      * Move the cursor to draw potion information
00003712  6100 0140                943      bsr     next_cursor_pos Move to the next cursor position
00003716                           944      
00003716  43F9 00005436            945      lea     enemy_knight_msg,A1   Load the hud message
0000371C  103C 000E                946      move.b  #14,D0          Move literal 14 for display message trap command
00003720  4E4F                     947      trap    #15             Display the loaded message
00003722                           948      
00003722                           949      * Move the cursor back to its previous position
00003722  3203                     950      move.w  D3,D1           Move the previous cursor position back to D1
00003724  103C 000B                951      move.b  #11,D0          Move the byte #11 to D0 for trap command 11          
00003728  4E4F                     952      trap    #15             Set the cursor position with trap command 11
0000372A                           953      
0000372A  4241                     954      clr     D1              Clear D1 for later use
0000372C                           955      
0000372C  4E75                     956      rts
0000372E                           957  
0000372E                           958  *-------------------Draw Shop Info----------------------
0000372E                           959  draw_shop_info:
0000372E  6100 0810                960      bsr     get_cursor_pos   Get the cursor position and store it in D3
00003732                           961      
00003732                           962      * Move cursor to draw shop info
00003732  3A3C 1801                963      move.w  #CSR_POS_SHOP_S,D5
00003736  323C 1801                964      move.w  #CSR_POS_SHOP_S,D1           
0000373A  4E4F                     965      trap    #15             Set the cursor position with trap command 11
0000373C  4241                     966      clr     D1              Clear D1 of the cursor position
0000373E                           967      
0000373E  43F9 000056CA            968      lea     shop_stock_msg,A1   Load the hud message
00003744  103C 000E                969      move.b  #14,D0          Move literal 14 for display message trap command
00003748  4E4F                     970      trap    #15             Display the loaded message
0000374A                           971      
0000374A                           972      
0000374A                           973      * Display the shop's potions
0000374A  6100 0108                974      bsr     next_cursor_pos Move to the next cursor position
0000374E                           975      
0000374E  43F9 0000548E            976      lea     potions_msg,A1   Load the hud message
00003754  103C 000E                977      move.b  #14,D0          Move literal 14 for display message trap command
00003758  4E4F                     978      trap    #15             Display the loaded message
0000375A                           979      
0000375A  544D                     980      add.w   #S_POTIONS,A5
0000375C  49D5                     981      lea     (A5),A4
0000375E  6100 0102                982      bsr     draw_item_number
00003762                           983      
00003762                           984      * Display the shop's keys
00003762  6100 00F0                985      bsr     next_cursor_pos Move to the next cursor position
00003766                           986      
00003766  43F9 00005487            987      lea     key_msg,A1      Load the hud message
0000376C  103C 000E                988      move.b  #14,D0          Move literal 14 for display message trap command
00003770  4E4F                     989      trap    #15             Display the loaded message
00003772                           990      
00003772  524D                     991      add.w   #1,A5
00003774  49D5                     992      lea     (A5),A4
00003776  6100 00EA                993      bsr     draw_item_number
0000377A                           994      
0000377A                           995      * Display the shop's torches
0000377A  6100 00D8                996      bsr     next_cursor_pos Move to the next cursor position
0000377E                           997      
0000377E  43F9 00005498            998      lea     torches_msg,A1  Load the torches message
00003784  103C 000E                999      move.b  #14,D0          Move literal 14 for display message trap command
00003788  4E4F                    1000      trap    #15             Display the loaded message
0000378A                          1001      
0000378A  524D                    1002      add.w   #1,A5
0000378C  49D5                    1003      lea     (A5),A4
0000378E  6100 00D2               1004      bsr     draw_item_number
00003792                          1005      
00003792                          1006      * Display the shop's damage upgrades
00003792  6100 00C0               1007      bsr     next_cursor_pos Move to the next cursor position
00003796                          1008      
00003796  43F9 000054A1           1009      lea     damage_up_msg,A1 Load the damage upgrades message
0000379C  103C 000E               1010      move.b  #14,D0           Move literal 14 for display message trap command
000037A0  4E4F                    1011      trap    #15              Display the loaded message
000037A2                          1012      
000037A2  524D                    1013      add.w   #1,A5               Increment A5 to get to the damage upgrades
000037A4  49D5                    1014      lea     (A5),A4             Load the memory address in A5 to A4
000037A6  6100 00BA               1015      bsr     draw_item_number    Draw the number of items
000037AA  5B4D                    1016      sub.w   #S_DAMAGE_IN,A5     Bring the pointer back to the root of the shop
000037AC                          1017      
000037AC                          1018      * Display the inventory
000037AC  103C 000B               1019      move.b  #11,D0              Move the byte #11 to D0 for trap command 11
000037B0  3A3C 3401               1020      move.w  #CSR_POS_SHOP_P,D5   
000037B4  323C 3401               1021      move.w  #CSR_POS_SHOP_P,D1       
000037B8  4E4F                    1022      trap    #15                 Set the cursor position with trap command 11
000037BA  4241                    1023      clr     D1                  Clear D1 of the cursor position
000037BC                          1024      
000037BC  43F9 00005474           1025      lea     inventory_msg,A1    Load the hud message
000037C2  103C 000E               1026      move.b  #14,D0              Move literal 14 for display message trap command
000037C6  4E4F                    1027      trap    #15                 Display the loaded message
000037C8                          1028      
000037C8                          1029      * Display the player gold
000037C8  6100 008A               1030      bsr     next_cursor_pos Move to the next cursor position
000037CC                          1031      
000037CC  43F9 0000547F           1032      lea     gold_msg,A1   Load the hud message
000037D2  103C 000E               1033      move.b  #14,D0          Move literal 14 for display message trap command
000037D6  4E4F                    1034      trap    #15             Display the loaded message
000037D8                          1035      
000037D8  49F8 5FF8               1036      lea     PLA_GOLD,A4
000037DC  6100 0084               1037      bsr     draw_item_number
000037E0                          1038      
000037E0                          1039      * Display the player potions
000037E0  6100 0072               1040      bsr     next_cursor_pos Move to the next cursor position
000037E4                          1041      
000037E4  43F9 0000548E           1042      lea     potions_msg,A1   Load the hud message
000037EA  103C 000E               1043      move.b  #14,D0          Move literal 14 for display message trap command
000037EE  4E4F                    1044      trap    #15             Display the loaded message
000037F0                          1045      
000037F0  49F8 5FF9               1046      lea     PLA_POTIONS,A4
000037F4  6100 006C               1047      bsr     draw_item_number
000037F8                          1048      
000037F8                          1049      * Display the player keys
000037F8  6100 005A               1050      bsr     next_cursor_pos Move to the next cursor position
000037FC                          1051      
000037FC  43F9 00005487           1052      lea     key_msg,A1   Load the hud message
00003802  103C 000E               1053      move.b  #14,D0          Move literal 14 for display message trap command
00003806  4E4F                    1054      trap    #15             Display the loaded message
00003808                          1055      
00003808  49F8 5FFA               1056      lea     PLA_KEYS,A4
0000380C  6100 0054               1057      bsr     draw_item_number
00003810                          1058      
00003810                          1059      * Display the torch life
00003810  6100 0042               1060      bsr     next_cursor_pos Move to the next cursor position
00003814  6100 003E               1061      bsr     next_cursor_pos Move to the next cursor position
00003818                          1062      
00003818  43F9 0000545A           1063      lea     torch_msg,A1   Load the hud message
0000381E  103C 000E               1064      move.b  #14,D0          Move literal 14 for display message trap command
00003822  4E4F                    1065      trap    #15             Display the loaded message
00003824                          1066      
00003824  1238 5FFB               1067      move.b  PLA_TORCH,D1    Move the player torch life value to D1 to display
00003828  103C 0003               1068      move.b  #3,D0           Move literal 3 for display number trap command
0000382C  4E4F                    1069      trap    #15             Display the number in D1
0000382E                          1070      
0000382E                          1071      * Display the player's damage level
0000382E  6100 0024               1072      bsr     next_cursor_pos Move to the next cursor position
00003832                          1073      
00003832  43F9 00005467           1074      lea     damage_lvl_msg,A1   Load the damage level message
00003838  103C 000E               1075      move.b  #14,D0              Move literal 14 for display message trap command
0000383C  4E4F                    1076      trap    #15                 Display the loaded message
0000383E                          1077      
0000383E  1238 5FF1               1078      move.b  PLA_DAMAGE,D1   Move the player's damage level to D1 to display
00003842  103C 0003               1079      move.b  #3,D0           Move literal 3 for display number trap command
00003846  4E4F                    1080      trap    #15             Display the number in D1
00003848                          1081      
00003848                          1082      * Move the cursor back to its previous position
00003848  3203                    1083      move.w  D3,D1           Move the previous cursor position back to D1
0000384A  103C 000B               1084      move.b  #11,D0          Move the byte #11 to D0 for trap command 11          
0000384E  4E4F                    1085      trap    #15             Set the cursor position with trap command 11
00003850                          1086      
00003850  4241                    1087      clr     D1              Clear D1 for later use
00003852                          1088      
00003852  4E75                    1089      rts
00003854                          1090  
00003854                          1091  *-------------------Helper Branches---------------------
00003854                          1092  next_cursor_pos:          * Moves the cursor one row down
00003854  103C 000B               1093      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
00003858  5245                    1094      add.w   #1,D5           Move down rows
0000385A  3205                    1095      move.w  D5,D1           Move the current cursor pos to D1 to set it
0000385C  4E4F                    1096      trap    #15             Set the cursor position with trap command 11
0000385E  4241                    1097      clr     D1              Clear D1 of the cursor position
00003860  4E75                    1098      rts                     Return from the subroutine
00003862                          1099  
00003862                          1100  draw_item_number:
00003862  103C 000E               1101      move.b  #14,D0          Move literal 3 for display number trap command
00003866  43F9 000054E6           1102      lea     bracket_open_msg,A1
0000386C  4E4F                    1103      trap    #15
0000386E                          1104  
0000386E  103C 0003               1105      move.b  #3,D0           Move literal 3 for display number trap command
00003872  1214                    1106      move.b  (A4),D1         Move the value in the register A4 to D1 to display
00003874  4E4F                    1107      trap    #15             Display the number in D1
00003876                          1108      
00003876  103C 000E               1109      move.b  #14,D0          Move literal 3 for display number trap command
0000387A  43F9 000054E8           1110      lea     bracket_close_msg,A1
00003880  4E4F                    1111      trap    #15
00003882  4E75                    1112      rts
00003884                          1113  
00003884                          1114  *-------------------------------------------------------
00003884                          1115  *---Game Play (Quest Progress)--------------------------
00003884                          1116  *------------------------------------------------------- 
00003884                          1117  gameplay:
00003884  6100 0078               1118      bsr     endl            Break to a new line
00003888  0C38 0000 5FF3          1119      CMP.B   #0,GAME_STATE   Check which stage the game is in
0000388E  6700 F78C               1120      BEQ     pick_role       Branch to the pick role subroutine
00003892  0C38 0005 5FF3          1121      CMP.B   #5,GAME_STATE   Check which stage the game is in
00003898  6700 007A               1122      BEQ     movement        Branch to the movement subroutine
0000389C  0C38 0006 5FF3          1123      CMP.B   #6,GAME_STATE   Check which stage the game is in
000038A2  6700 026E               1124      BEQ     combat          branch to the combat subroutine
000038A6  0C38 0007 5FF3          1125      CMP.B   #7,GAME_STATE   Check which stage the game is in
000038AC  6700 0480               1126      BEQ     shop            branch to the shop subroutine
000038B0  4E75                    1127      rts                     Return from 'gameplay' subroutine
000038B2                          1128  
000038B2                          1129  *-------------------------------------------------------
000038B2                          1130  *------------------Screen Decoration--------------------
000038B2                          1131  *-------------------------------------------------------
000038B2                          1132  decorate:
000038B2  163C 003C               1133      move.b  #60, D3
000038B6  6100 0046               1134      bsr     endl
000038BA                          1135  out:
000038BA  43F9 00004904           1136      lea     loop_msg,A1
000038C0  103C 000E               1137      move.b  #14,D0
000038C4  4E4F                    1138      trap    #15
000038C6  5343                    1139      sub     #1,D3   decrement loop counter
000038C8  66F0                    1140      bne     out     repeat until D0=0
000038CA  6100 0032               1141      bsr     endl
000038CE  4E75                    1142      rts
000038D0                          1143      
000038D0                          1144  clear_screen: 
000038D0  103C 000B               1145      move.b  #11,D0      clear screen
000038D4  323C FF00               1146      move.w  #$ff00,D1
000038D8  4E4F                    1147      trap    #15
000038DA  4E75                    1148      rts
000038DC                          1149  *-------------------------------------------------------
000038DC                          1150  *------------------------Replay-------------------------
000038DC                          1151  *-------------------------------------------------------
000038DC                          1152  replay:
000038DC  43F9 00004A48           1153      lea     replay_msg,A1   Load the Replay message
000038E2  103C 000E               1154      move.b  #14,D0          Move the number literal 14 to D0 for trap command
000038E6  4E4F                    1155      trap    #15             Display the loaded message
000038E8                          1156      
000038E8  7A02                    1157      move.l  #2,D5           Move the number of input options to D5
000038EA  6100 F832               1158      bsr     input           Take user input
000038EE  1401                    1159      move.b  D1,D2           Move the input to D2 so it's not trampled by the clear screen
000038F0                          1160      
000038F0  61DE                    1161      bsr     clear_screen    Clear the screen
000038F2                          1162      
000038F2  B43C 0001               1163      cmp.b   #1,D2           Compare the user input against the two options
000038F6  6700 D708               1164      beq     start           Restart if the user enters 1
000038FA  6100 F70A               1165      bsr     end             Quit if the user enters 2
000038FE                          1166  
000038FE                          1167  endl:
000038FE  48E7 8040               1168      movem.l D0/A1,-(A7)
00003902  303C 000E               1169      move    #14,D0
00003906  43F9 000046A6           1170      lea     crlf,A1
0000390C  4E4F                    1171      trap    #15
0000390E  4CDF 0201               1172      movem.l (A7)+,D0/A1
00003912  4E75                    1173      rts
00003914                          1174          
00003914                          1175  *-------------------------------------------------------
00003914                          1176  *----------------------Manage Movement------------------
00003914                          1177  *-------------------------------------------------------
00003914                          1178  movement:
00003914  43F9 00004F1C           1179      lea     movement_msg,A1 Load the movement message
0000391A  103C 000E               1180      move.b  #14,D0          Move literal 14 for display message trap command
0000391E  4E4F                    1181      trap    #15             Display the loaded message
00003920                          1182  
00003920  7A05                    1183      move.l  #5,D5           Move the number 4 to D5 to tell the program how many options there are
00003922                          1184      
00003922  6100 F7FA               1185      bsr     input           branch to the input subroutine
00003926  6100 000C               1186      bsr     wall_collisions Branch to check wall collisions and movement
0000392A                          1187      
0000392A  B23C 0005               1188      CMP.B   #5,D1           Check the input against taking a potion
0000392E  6700 05BE               1189      BEQ     take_potion     Branch to take a potion
00003932                          1190      
00003932  4E75                    1191      rts
00003934                          1192  
00003934                          1193  *-------------------------------------------------------
00003934                          1194  *-------------------Check Wall Collisions---------------
00003934                          1195  *-------------------------------------------------------
00003934                          1196  wall_collisions:
00003934                          1197      *Check collisions in the movement direction
00003934  B23C 0001               1198      CMP.B   #1,D1       Check the movement direction
00003938  6700 001C               1199      BEQ     move_north  Branch to Display the corridor type
0000393C                          1200      
0000393C  B23C 0002               1201      CMP.B   #2,D1       Check the movement direction
00003940  6700 005E               1202      BEQ     move_south  Branch to Display the corridor type
00003944                          1203      
00003944  B23C 0003               1204      CMP.B   #3,D1       Check the movement direction
00003948  6700 00A0               1205      BEQ     move_west   Branch to Display the corridor type
0000394C                          1206      
0000394C  B23C 0004               1207      CMP.B   #4,D1       Check the movement direction
00003950  6700 00E0               1208      BEQ     move_east   Branch to Display the corridor type
00003954                          1209      
00003954  4E75                    1210      rts
00003956                          1211      
00003956                          1212  move_north:
00003956                          1213      *Check if the tile is any of the corridor types with a wall at the top
00003956  0C16 0002               1214      CMP.B   #2,(A6)
0000395A  6700 011E               1215      BEQ     movement_blocked
0000395E  0C16 0003               1216      CMP.B   #3,(A6)
00003962  6700 0116               1217      BEQ     movement_blocked
00003966  0C16 0006               1218      CMP.B   #6,(A6)
0000396A  6700 010E               1219      BEQ     movement_blocked
0000396E  0C16 0007               1220      CMP.B   #7,(A6)
00003972  6700 0106               1221      BEQ     movement_blocked
00003976  0C16 000B               1222      CMP.B   #11,(A6)
0000397A  6700 00FE               1223      BEQ     movement_blocked
0000397E  0C16 000C               1224      CMP.B   #12,(A6)
00003982  6700 00F6               1225      BEQ     movement_blocked
00003986  0C16 000D               1226      CMP.B   #13,(A6)
0000398A  6700 00EE               1227      BEQ     movement_blocked
0000398E                          1228      
0000398E  31CE 5FF6               1229      move.w  A6,PLA_P_POS        Move the player's previous location to a memory address for storage
00003992  9CFC 0010               1230      sub     #16,A6              Move the player north
00003996                          1231      
00003996  6100 00F4               1232      bsr     check_blocked       Check if the player is in a door
0000399A  6100 0584               1233      bsr     decrement_torch     Remove one from the player's torch life
0000399E                          1234  
0000399E  4E75                    1235      rts
000039A0                          1236      
000039A0                          1237  move_south:
000039A0                          1238      *Check if the tile is any of the corridor types with a wall at the bottom
000039A0  0C16 0002               1239      CMP.B   #2,(A6)
000039A4  6700 00D4               1240      BEQ     movement_blocked
000039A8  0C16 0004               1241      CMP.B   #4,(A6)
000039AC  6700 00CC               1242      BEQ     movement_blocked
000039B0  0C16 0005               1243      CMP.B   #5,(A6)
000039B4  6700 00C4               1244      BEQ     movement_blocked
000039B8  0C16 0009               1245      CMP.B   #9,(A6)
000039BC  6700 00BC               1246      BEQ     movement_blocked
000039C0  0C16 000B               1247      CMP.B   #11,(A6)
000039C4  6700 00B4               1248      BEQ     movement_blocked
000039C8  0C16 000D               1249      CMP.B   #13,(A6)
000039CC  6700 00AC               1250      BEQ     movement_blocked
000039D0  0C16 000E               1251      CMP.B   #14,(A6)
000039D4  6700 00A4               1252      BEQ     movement_blocked
000039D8                          1253      
000039D8  31CE 5FF6               1254      move.w  A6,PLA_P_POS        Move the player's previous location to a memory address for storage
000039DC  DCFC 0010               1255      add     #16,A6              Move the player south
000039E0                          1256      
000039E0  6100 00AA               1257      bsr     check_blocked       Check if the player is in a door
000039E4  6100 053A               1258      bsr     decrement_torch     Remove one from the player's torch life
000039E8                          1259      
000039E8  4E75                    1260      rts
000039EA                          1261  
000039EA                          1262  move_west:
000039EA                          1263      *Check if the tile is any of the corridor types with a wall to the left
000039EA  0C16 0001               1264      CMP.B   #1,(A6)
000039EE  6700 008A               1265      BEQ     movement_blocked
000039F2  0C16 0003               1266      CMP.B   #3,(A6)
000039F6  6700 0082               1267      BEQ     movement_blocked
000039FA  0C16 0004               1268      CMP.B   #4,(A6)
000039FE  6700 007A               1269      BEQ     movement_blocked
00003A02  0C16 0008               1270      CMP.B   #8,(A6)
00003A06  6700 0072               1271      BEQ     movement_blocked
00003A0A  0C16 000B               1272      CMP.B   #11,(A6)
00003A0E  6700 006A               1273      BEQ     movement_blocked
00003A12  0C16 000C               1274      CMP.B   #12,(A6)
00003A16  6700 0062               1275      BEQ     movement_blocked
00003A1A  0C16 000E               1276      CMP.B   #14,(A6)
00003A1E  6700 005A               1277      BEQ     movement_blocked
00003A22                          1278      
00003A22  31CE 5FF6               1279      move.w  A6,PLA_P_POS        Move the player's previous location to a memory address for storage
00003A26  534E                    1280      sub     #1,A6               Move the player west
00003A28                          1281      
00003A28  6100 0062               1282      bsr     check_blocked       Check if the player is in a door
00003A2C  6100 04F2               1283      bsr     decrement_torch     Remove one from the player's torch life
00003A30                          1284      
00003A30  4E75                    1285      rts
00003A32                          1286      
00003A32                          1287  move_east:
00003A32                          1288      *Check if the tile is any of the corridor types with a wall to the right
00003A32  0C16 0001               1289      CMP.B   #1,(A6)
00003A36  6700 0042               1290      BEQ     movement_blocked
00003A3A  0C16 0005               1291      CMP.B   #5,(A6)
00003A3E  6700 003A               1292      BEQ     movement_blocked
00003A42  0C16 0006               1293      CMP.B   #6,(A6)
00003A46  6700 0032               1294      BEQ     movement_blocked
00003A4A  0C16 000A               1295      CMP.B   #10,(A6)
00003A4E  6700 002A               1296      BEQ     movement_blocked
00003A52  0C16 000C               1297      CMP.B   #12,(A6)
00003A56  6700 0022               1298      BEQ     movement_blocked
00003A5A  0C16 000D               1299      CMP.B   #13,(A6)
00003A5E  6700 001A               1300      BEQ     movement_blocked
00003A62  0C16 000E               1301      CMP.B   #14,(A6)
00003A66  6700 0012               1302      BEQ     movement_blocked
00003A6A                          1303      
00003A6A  31CE 5FF6               1304      move.w  A6,PLA_P_POS        Move the player's previous location to a memory address for storage
00003A6E  524E                    1305      add     #1,A6               Move the player east
00003A70                          1306      
00003A70  6100 001A               1307      bsr     check_blocked       Check if the player is in a door
00003A74  6100 04AA               1308      bsr     decrement_torch     Remove one from the player's torch life
00003A78                          1309      
00003A78  4E75                    1310      rts
00003A7A                          1311  
00003A7A                          1312  movement_blocked:
00003A7A  43F9 00004FAE           1313      lea     movement_blocked_msg,A1 Load the message
00003A80  103C 000E               1314      move.b  #14,D0                  Move the trap command to display a message
00003A84  4E4F                    1315      trap    #15                     Display the movement blocked message
00003A86  6100 0432               1316      bsr     press_continue          Pause the game until a key is pressed
00003A8A                          1317      
00003A8A  4E75                    1318      rts                             Return from the subroutine
00003A8C                          1319      
00003A8C                          1320  check_blocked:
00003A8C  4BF8 6FE0               1321      lea     FIRST_DOOR,A5   Load the memory address of the first door
00003A90  1E3C 0000               1322      move.b  #0,D7           Move the starting door number to D5
00003A94  6100 0004               1323      bsr     loop_thru_doors Loop through all doors
00003A98  4E75                    1324      rts                     Return from subroutine
00003A9A                          1325      
00003A9A                          1326  loop_thru_doors:
00003A9A  BE3C 0003               1327      CMP.B   #DOOR_MAX,D7    Compare the door number with the maximum door number
00003A9E  6C00 044C               1328      BGE     return          Return from the loop if the current door number is greater than or equal to the max
00003AA2                          1329  
00003AA2  6100 0008               1330      bsr     check_for_a_door  Check for a door
00003AA6                          1331      
00003AA6  5207                    1332      add.b   #1,D7           Add to the current door number
00003AA8  544D                    1333      add.w   #2,A5           Add to the current door pointer to move to the next door
00003AAA  60EE                    1334      bra     loop_thru_doors Keep looping the doors
00003AAC                          1335  
00003AAC                          1336  check_for_a_door:
00003AAC  3615                    1337      move.w  (A5),D3         Move the door coordinates into data register D3 for large-value comparisons
00003AAE  BDC3                    1338      CMP.L   D3,A6           Check if the door is in the current position
00003AB0  6700 0004               1339      BEQ     in_a_door       Collide with the door if it is
00003AB4  4E75                    1340      rts                     Return if the door is not in the current position
00003AB6                          1341      
00003AB6                          1342  in_a_door:
00003AB6  0C38 0000 5FFA          1343      CMP.B   #0,PLA_KEYS     Check if the player has keys left
00003ABC  6F00 003C               1344      BLE     blocked_door    If the player has no keys they're blocked
00003AC0                          1345      
00003AC0  43F9 000057A7           1346      lea     locked_door_msg,A1  Load the locked door message
00003AC6  103C 000E               1347      move.b  #14,D0          Move the number literal for trap command
00003ACA  4E4F                    1348      trap    #15             Display the loaded message
00003ACC                          1349      
00003ACC  1A3C 0002               1350      move.b  #2,D5           Move the number of input options
00003AD0  6100 F64C               1351      bsr     input           Take user input
00003AD4                          1352      
00003AD4  B23C 0001               1353      CMP.B   #1,D1           Compare the user input with num 1
00003AD8  6700 0006               1354      BEQ     unlock_door     Unlock the door if the user chooses to
00003ADC  6600 001C               1355      BNE     blocked_door    Branch to blocked door if the player doesn't unlock the door
00003AE0                          1356      
00003AE0                          1357  unlock_door:
00003AE0  43F9 0000581D           1358      lea     unlocked_door_msg,A1  Load the unlocked door message
00003AE6  103C 000E               1359      move.b  #14,D0          Move the number literal for trap command
00003AEA  4E4F                    1360      trap    #15             Display the loaded message
00003AEC                          1361      
00003AEC  3ABC 1000               1362      move.w  #OPEN_DOOR_POS,(A5) Move the door position out of the game for an open door
00003AF0  5338 5FFA               1363      sub.b   #1,PLA_KEYS     Remove a key from the player
00003AF4  6100 03C4               1364      bsr     press_continue  Wait for player input
00003AF8                          1365      
00003AF8  4E75                    1366      rts                     Return from subroutine
00003AFA                          1367  
00003AFA                          1368  blocked_door:
00003AFA  43F9 0000585A           1369      lea     blocked_door_msg,A1  Load the blocked door message
00003B00  103C 000E               1370      move.b  #14,D0          Move the number literal for trap command
00003B04  4E4F                    1371      trap    #15             Display the loaded message
00003B06                          1372      
00003B06  3638 5FF6               1373      move.w  PLA_P_POS,D3    Move the previous player position to D3
00003B0A  2C43                    1374      move.l  D3,A6           Move the player to their previous position
00003B0C                          1375      
00003B0C  6100 03AC               1376      bsr     press_continue  Wait for player input
00003B10                          1377      
00003B10  4E75                    1378      rts                     Return from subroutine
00003B12                          1379      
00003B12                          1380  *-------------------------------------------------------
00003B12                          1381  *---------------------Manage Combat---------------------
00003B12                          1382  *-------------------------------------------------------
00003B12                          1383  combat:
00003B12  6100 FDEA               1384      bsr endl                Break to a new line
00003B16                          1385  
00003B16  43F9 0000508F           1386      lea     combat_msg,A1   Load the combat message
00003B1C  103C 000E               1387      move.b  #14,D0          Move literal 14 for display message trap command
00003B20  4E4F                    1388      trap    #15             Display the loaded message
00003B22                          1389  
00003B22  7A05                    1390      move.l  #5,D5           Move the number 4 to D5 to tell the program how many options there are
00003B24  6100 F5F8               1391      bsr     input           branch to the input subroutine
00003B28  1801                    1392      move.b  D1,D4           Move the input to D4 for later use
00003B2A                          1393      
00003B2A  B23C 0001               1394      CMP.B   #1,D1           Compare input with number literal 1
00003B2E  6700 0024               1395      BEQ     block_counter   Branch to block/counter subroutine
00003B32  B23C 0002               1396      CMP.B   #2,D1           Compare input with number literal 2
00003B36  6700 0036               1397      BEQ     cast_magic      Branch to cast magic subroutine
00003B3A  B23C 0003               1398      CMP.B   #3,D1           Compare input with number literal 3
00003B3E  6700 0048               1399      BEQ     melee_attack    Branch to melee subroutine
00003B42  B23C 0004               1400      CMP.B   #4,D1           Compare input with number literal 4
00003B46  6700 005A               1401      BEQ     try_run         Branch to try run subroutine
00003B4A  B23C 0005               1402      CMP.B   #5,D1           Compare input with number literal 5
00003B4E  6700 039E               1403      BEQ     take_potion     Branch to take potion subroutine
00003B52                          1404      
00003B52  4E75                    1405      rts
00003B54                          1406      
00003B54                          1407  block_counter:
00003B54  6100 037C               1408      bsr     random_number       Get a random number 1-100
00003B58                          1409      
00003B58  B47C 0021               1410      CMP.W   #33,D2              Compare random with #33
00003B5C  6F00 008E               1411      BLE     both_block          Enemy tries to block - attack failed
00003B60  B47C 0042               1412      CMP.W   #66,D2              Compare random with #66
00003B64  6F00 0118               1413      BLE     hit_by_magic        Enemy casts magic - player takes damage      
00003B68  6E00 00E4               1414      BGT     hit_against_melee   Enemy tried to lunge - enemy takes damage
00003B6C                          1415      
00003B6C  4E75                    1416      rts                         Return from subroutine
00003B6E                          1417      
00003B6E                          1418  cast_magic:
00003B6E  6100 0362               1419      bsr     random_number       Get a random number 1-100
00003B72                          1420  
00003B72  B47C 0021               1421      CMP.W   #33,D2              Compare random with #33
00003B76  6F00 00AA               1422      BLE     hit_against_block    Enemy blocks - enemy takes damage
00003B7A  B47C 0042               1423      CMP.W   #66,D2              Compare random with #66
00003B7E  6F00 007E               1424      BLE     both_cast_magic     Enemy casts magic - attack fails     
00003B82  6E00 0114               1425      BGT     hit_by_melee        Enemy lunges forward - player takes damage
00003B86                          1426      
00003B86  4E75                    1427      rts                         Return from subroutine
00003B88                          1428  
00003B88                          1429  melee_attack:
00003B88  6100 0348               1430      bsr     random_number       Get a random number 1-100
00003B8C                          1431  
00003B8C  B47C 0021               1432      CMP.W   #33,D2              Compare random with #33
00003B90  6F00 00D2               1433      BLE     hit_by_counter      Enemy blocks and counters - player takes damage
00003B94  B47C 0042               1434      CMP.W   #66,D2              Compare random with #66
00003B98  6F00 009E               1435      BLE     hit_against_magic   Enemy casts magic - player takes damage     
00003B9C  6E00 0072               1436      BGT     both_melee          Enemy lunges forward - attack fails
00003BA0                          1437      
00003BA0  4E75                    1438      rts                         Return from subroutine
00003BA2                          1439  
00003BA2                          1440  try_run:
00003BA2  6100 032E               1441      bsr     random_number       Get a random number
00003BA6                          1442      
00003BA6  B47C 0028               1443      CMP.W   #40,D2              Compare the random number to 40
00003BAA  6D00 0006               1444      BLT     escape_attack       If the random number is less than 40 the player escapes
00003BAE  6C00 0020               1445      BGE     fail_escape         If the random number is more than 40 the player gets damaged
00003BB2                          1446      
00003BB2                          1447  escape_attack:
00003BB2  3638 5FF6               1448      move.w  PLA_P_POS,D3    Move the player's previous position to D3 to avoid treating it as a negative number
00003BB6  2C43                    1449      move.l  D3,A6           Move the player to their position before entering the battle
00003BB8  11FC 0005 5FF3          1450      move.b  #5,GAME_STATE   Switch game state
00003BBE                          1451      
00003BBE  43F9 000050F1           1452      lea     escape_msg,A1   Load escape message
00003BC4  103C 000E               1453      move.b  #14,D0          Move literal for trap command
00003BC8  4E4F                    1454      trap    #15             Trap 15 to display messgae
00003BCA                          1455      
00003BCA  6100 02EE               1456      bsr     press_continue  Pause until the player presses to continue
00003BCE                          1457      
00003BCE  4E75                    1458      rts                     Return from subroutine
00003BD0                          1459      
00003BD0                          1460  fail_escape:
00003BD0  43F9 0000510C           1461      lea     fail_escape_msg,A1  Load fail escape message
00003BD6  103C 000E               1462      move.b  #14,D0              Move literal for trap command
00003BDA  4E4F                    1463      trap    #15                 Trap 15 to display message
00003BDC                          1464      
00003BDC  524D                    1465      add.w   #DAMAGE,A5           Move the enemy pointer to its damage value
00003BDE  1A15                    1466      move.b  (A5),D5             Store the damage value in D5
00003BE0  534D                    1467      sub.w   #DAMAGE,A5           Move the enemy pointer back to the enemy health/root
00003BE2  9B38 5FF0               1468      sub.b   D5,PLAYER           Remove the enemy's damage from the player's health
00003BE6                          1469      
00003BE6  6100 02D2               1470      bsr     press_continue      Pause until the player presses to continue
00003BEA  4E75                    1471      rts
00003BEC                          1472      
00003BEC                          1473  both_block:
00003BEC  103C 000E               1474      move.b  #14,D0
00003BF0  43F9 00005147           1475      lea     both_block_msg,A1
00003BF6  4E4F                    1476      trap    #15
00003BF8                          1477      
00003BF8  6100 02C0               1478      bsr     press_continue
00003BFC  4E75                    1479      rts
00003BFE                          1480      
00003BFE                          1481  both_cast_magic:
00003BFE  103C 000E               1482      move.b  #14,D0
00003C02  43F9 0000516C           1483      lea     both_cast_magic_msg,A1
00003C08  4E4F                    1484      trap    #15
00003C0A                          1485      
00003C0A  6100 02AE               1486      bsr     press_continue
00003C0E  4E75                    1487      rts
00003C10                          1488  
00003C10                          1489  both_melee:
00003C10  103C 000E               1490      move.b  #14,D0
00003C14  43F9 000051C1           1491      lea     both_melee_msg,A1
00003C1A  4E4F                    1492      trap    #15  
00003C1C                          1493      
00003C1C  6100 029C               1494      bsr     press_continue
00003C20  4E75                    1495      rts
00003C22                          1496  
00003C22                          1497  hit_against_block:
00003C22  103C 000E               1498      move.b  #14,D0
00003C26  43F9 0000520A           1499      lea     hit_against_block_msg,A1
00003C2C  4E4F                    1500      trap    #15  
00003C2E                          1501      
00003C2E  6100 0082               1502      bsr     damage_enemy    Deal damage to the enemy
00003C32                          1503      
00003C32  6100 0286               1504      bsr     press_continue
00003C36  4E75                    1505      rts
00003C38                          1506  
00003C38                          1507  hit_against_magic:
00003C38  103C 000E               1508      move.b  #14,D0
00003C3C  43F9 00005252           1509      lea     hit_against_magic_msg,A1
00003C42  4E4F                    1510      trap    #15
00003C44                          1511      
00003C44  6100 006C               1512      bsr     damage_enemy    Deal damage to the enemy
00003C48                          1513      
00003C48  6100 0270               1514      bsr     press_continue
00003C4C  4E75                    1515      rts
00003C4E                          1516  
00003C4E                          1517  hit_against_melee:
00003C4E  103C 000E               1518      move.b  #14,D0
00003C52  43F9 000052B6           1519      lea     hit_against_melee_msg,A1
00003C58  4E4F                    1520      trap    #15
00003C5A                          1521      
00003C5A  6100 0056               1522      bsr     damage_enemy    Deal damage to the enemy
00003C5E                          1523      
00003C5E  6100 025A               1524      bsr     press_continue
00003C62  4E75                    1525      rts
00003C64                          1526  
00003C64                          1527  hit_by_counter:
00003C64  103C 000E               1528      move.b  #14,D0
00003C68  43F9 0000530C           1529      lea     hit_by_counter_msg,A1
00003C6E  4E4F                    1530      trap    #15  
00003C70                          1531      
00003C70  143C 0001               1532      move.b  #1,D2               Move the enemy attack type to D2
00003C74  6100 0076               1533      bsr     damage_player       Deal damage to the player
00003C78                          1534      
00003C78  6100 0240               1535      bsr     press_continue
00003C7C  4E75                    1536      rts
00003C7E                          1537  
00003C7E                          1538  hit_by_magic:
00003C7E  103C 000E               1539      move.b  #14,D0
00003C82  43F9 0000536F           1540      lea     hit_by_magic_msg,A1
00003C88  4E4F                    1541      trap    #15  
00003C8A                          1542      
00003C8A  143C 0002               1543      move.b  #2,D2               Move the enemy attack type to D2
00003C8E  6100 005C               1544      bsr     damage_player       Deal damage to the player
00003C92                          1545      
00003C92  6100 0226               1546      bsr     press_continue
00003C96  4E75                    1547      rts
00003C98                          1548  
00003C98                          1549  hit_by_melee:
00003C98  103C 000E               1550      move.b  #14,D0
00003C9C  43F9 000053DF           1551      lea     hit_by_melee_msg,A1
00003CA2  4E4F                    1552      trap    #15
00003CA4                          1553      
00003CA4  143C 0003               1554      move.b  #3,D2               Move the enemy attack type to D2
00003CA8  6100 0042               1555      bsr     damage_player       Deal damage to the player
00003CAC                          1556      
00003CAC  6100 020C               1557      bsr     press_continue
00003CB0  4E75                    1558      rts
00003CB2                          1559      
00003CB2                          1560  damage_enemy:
00003CB2  1A38 5FF1               1561      move.b  PLA_DAMAGE,D5       Store the player damage value in D5
00003CB6  B838 5FF2               1562      CMP.B   PLA_CLASS,D4        Check if the player attack type matches the player class
00003CBA  6700 0006               1563      BEQ     double_damage_enemy Deal double damage to the enemy if attack type matches the class
00003CBE  9B15                    1564      sub.b   D5,(A5)             Remove the player's damage from the enemy's health
00003CC0  4E75                    1565      rts                         Return from subroutine
00003CC2                          1566      
00003CC2                          1567  double_damage_enemy:
00003CC2  E34D                    1568      LSL     #1,D5               Double the player damage
00003CC4  9B15                    1569      sub.b   D5,(A5)             Remove double the player's damage from the enemy's health
00003CC6                          1570      
00003CC6  6100 FC36               1571      bsr     endl                Break to new line
00003CCA  223C 00F000F0           1572      move.l  #PURPLE,D1          Load colour purple
00003CD0  6100 025C               1573      bsr     change_font_colour  Change the font colour
00003CD4                          1574      
00003CD4  43F9 00005788           1575      lea     double_damage_msg,A1    Load the double damage message
00003CDA  103C 000E               1576      move.b  #14,D0              Move number literal 14 to D0 for trap command
00003CDE  4E4F                    1577      trap    #15
00003CE0                          1578      
00003CE0  223C 00FFFFFF           1579      move.l  #WHITE,D1           Load colour white
00003CE6  6100 0246               1580      bsr     change_font_colour  Change the font colour
00003CEA                          1581      
00003CEA  4E75                    1582      rts                         Return from subroutine
00003CEC                          1583  
00003CEC                          1584  damage_player:
00003CEC  524D                    1585      add.w   #DAMAGE,A5          Move the enemy pointer to its damage value
00003CEE  1A15                    1586      move.b  (A5),D5             Store the damage value in D5
00003CF0                          1587      
00003CF0  534D                    1588      sub.w   #DAMAGE,A5          Move the enemy pointer back to the enemy health/root
00003CF2  544D                    1589      add.w   #CLASS,A5           Move the enemy pointer to its class value
00003CF4                          1590      
00003CF4  B415                    1591      CMP.B   (A5),D2             Compare the enemy attack type to its class
00003CF6  554D                    1592      sub.w   #CLASS,A5           Move the enemy pointer back to the enemy health/root
00003CF8  6700 0008               1593      BEQ     double_damage_player    Deal double damage to the player
00003CFC                          1594      
00003CFC  9B38 5FF0               1595      sub.b   D5,PLAYER           Remove the enemy's damage from the player's health
00003D00                          1596  
00003D00  4E75                    1597      rts                         Return from subroutine
00003D02                          1598      
00003D02                          1599  double_damage_player:
00003D02  E34D                    1600      LSL     #1,D5               Double the enemy damage
00003D04  9B38 5FF0               1601      sub.b   D5,PLAYER           Remove double the enemy's damage from the player's health
00003D08                          1602      
00003D08  6100 FBF4               1603      bsr     endl                Break to new line
00003D0C  223C 000000FF           1604      move.l  #RED,D1          Load colour purple
00003D12  6100 021A               1605      bsr     change_font_colour  Change the font colour
00003D16                          1606      
00003D16  43F9 00005788           1607      lea     double_damage_msg,A1    Load the double damage message
00003D1C  103C 000E               1608      move.b  #14,D0              Move number literal 14 to D0 for trap command
00003D20  4E4F                    1609      trap    #15
00003D22                          1610      
00003D22  223C 00FFFFFF           1611      move.l  #WHITE,D1           Load colour white
00003D28  6100 0204               1612      bsr     change_font_colour  Change the font colour
00003D2C                          1613      
00003D2C  4E75                    1614      rts                         Return from subroutine
00003D2E                          1615  
00003D2E                          1616  *-------------------------------------------------------
00003D2E                          1617  *----------------------Shop State-----------------------
00003D2E                          1618  *-------------------------------------------------------
00003D2E                          1619  shop:
00003D2E  43F9 00005622           1620      lea     shop_msg,A1     Load the shop message
00003D34  103C 000E               1621      move.b  #14,D0          Move the number literal 14 to D0 for trap command
00003D38  4E4F                    1622      trap    #15             Display the loaded message
00003D3A                          1623  
00003D3A  7A05                    1624      move.l  #5,D5           Move the number 4 to D5 to tell the program how many options there are
00003D3C  6100 F3E0               1625      bsr     input           branch to the input subroutine
00003D40                          1626      
00003D40  B23C 0001               1627      CMP.B   #1,D1           Compare input with number literal 1
00003D44  6700 0024               1628      BEQ     buy_potion      Branch to buy potion subroutine
00003D48  B23C 0002               1629      CMP.B   #2,D1           Compare input with number literal 2
00003D4C  6700 004E               1630      BEQ     buy_key         Branch to buy key subroutine
00003D50  B23C 0003               1631      CMP.B   #3,D1           Compare input with number literal 3
00003D54  6700 007A               1632      BEQ     buy_torch       Branch to buy torch subroutine
00003D58  B23C 0004               1633      CMP.B   #4,D1           Compare input with number literal 4
00003D5C  6700 00A8               1634      BEQ     upgrade_dmg     Branch to buy damage upgrade subroutine
00003D60  B23C 0005               1635      CMP.B   #5,D1           Compare input with number literal 5
00003D64  6700 00D4               1636      BEQ     leave_shop      Branch to leave shop subroutine
00003D68                          1637  
00003D68  4E75                    1638      rts                     Return from subroutine
00003D6A                          1639      
00003D6A                          1640  buy_potion:
00003D6A  0C38 0005 5FF8          1641      CMP.B   #POTION_PRICE,PLA_GOLD  Check if the player has money for a potion
00003D70  6D00 00E6               1642      BLT     no_money                If not enough money branch to no money subroutine
00003D74                          1643      
00003D74  544D                    1644      add.w   #S_POTIONS,A5           Move the shop pointer to the potions
00003D76  0C15 0000               1645      CMP.B   #0,(A5)                 Check that the shop still has potions left
00003D7A  6F00 00EE               1646      BLE     no_shop_potions         If no potions left branch to no shop potions subroutine
00003D7E                          1647      
00003D7E  5B38 5FF8               1648      sub.b   #POTION_PRICE,PLA_GOLD  Remove the potion price from the player's gold
00003D82  5315                    1649      sub.b   #1,(A5)                 Remove one potion from the shop
00003D84  5238 5FF9               1650      add.b   #1,PLA_POTIONS          Add one potion to the player's inventory
00003D88                          1651      
00003D88  554D                    1652      sub.w   #S_POTIONS,A5           Move the shop pointer back to root
00003D8A                          1653      
00003D8A  43F9 000056B4           1654      lea     buy_item_msg,A1         Load the buy item message into A1
00003D90  103C 000E               1655      move.b  #14,D0                  Move the number literal 14 to D0 for trap command
00003D94  4E4F                    1656      trap    #15                     Display the loaded message
00003D96                          1657      
00003D96  6100 0122               1658      bsr     press_continue          Pause for user input
00003D9A                          1659      
00003D9A  4E75                    1660      rts                             Return from subroutine
00003D9C                          1661      
00003D9C                          1662  buy_key:
00003D9C  0C38 000F 5FF8          1663      CMP.B   #KEY_PRICE,PLA_GOLD     Check if the player has money for a key
00003DA2  6D00 00B4               1664      BLT     no_money                If not enough money branch to no money subroutine
00003DA6                          1665      
00003DA6  564D                    1666      add.w   #S_KEYS,A5              Move the shop pointer to the keys
00003DA8  0C15 0000               1667      CMP.B   #0,(A5)                 Check that the shop still has keys left
00003DAC  6F00 00D0               1668      BLE     no_shop_keys            If no keys left branch to no shop keys subroutine
00003DB0                          1669      
00003DB0  0438 000F 5FF8          1670      sub.b   #KEY_PRICE,PLA_GOLD     Remove the key price from the player's gold
00003DB6  5315                    1671      sub.b   #1,(A5)                 Remove one key from the shop
00003DB8  5238 5FFA               1672      add.b   #1,PLA_KEYS             Add one key to the player's inventory
00003DBC                          1673      
00003DBC  574D                    1674      sub.w   #S_KEYS,A5              Move the shop pointer back to root
00003DBE                          1675  
00003DBE  43F9 000056B4           1676      lea     buy_item_msg,A1         Load the buy item message into A1
00003DC4  103C 000E               1677      move.b  #14,D0                  Move the number literal 14 to D0 for trap command
00003DC8  4E4F                    1678      trap    #15                     Display the loaded message
00003DCA                          1679      
00003DCA  6100 00EE               1680      bsr     press_continue          Pause for user input
00003DCE                          1681      
00003DCE  4E75                    1682      rts                             Return from subroutine
00003DD0                          1683      
00003DD0                          1684  buy_torch:
00003DD0  0C38 000A 5FF8          1685      CMP.B   #TORCH_PRICE,PLA_GOLD   Check if the player has money for a torch
00003DD6  6D00 0080               1686      BLT     no_money                If not enough money branch to no money subroutine
00003DDA                          1687      
00003DDA  584D                    1688      add.w   #S_TORCHES,A5           Move the shop pointer to the torches
00003DDC  0C15 0000               1689      CMP.B   #0,(A5)                 Check that the shop still has torches left
00003DE0  6F00 00B0               1690      BLE     no_shop_torches         If no torches left branch to no shop torches subroutine
00003DE4                          1691      
00003DE4  0438 000A 5FF8          1692      sub.b   #TORCH_PRICE,PLA_GOLD   Remove the torch price from the player's gold
00003DEA  5315                    1693      sub.b   #1,(A5)                 Remove one torch from the shop
00003DEC  0638 000F 5FFB          1694      add.b   #LIFE_PER_TORCH,PLA_TORCH           Add ten to the player's torches life
00003DF2                          1695      
00003DF2  594D                    1696      sub.w   #S_TORCHES,A5           Move the shop pointer back to root
00003DF4                          1697  
00003DF4  43F9 000056B4           1698      lea     buy_item_msg,A1         Load the buy item message into A1
00003DFA  103C 000E               1699      move.b  #14,D0                  Move the number literal 14 to D0 for trap command
00003DFE  4E4F                    1700      trap    #15                     Display the loaded message
00003E00                          1701      
00003E00  6100 00B8               1702      bsr     press_continue          Pause for user input
00003E04                          1703      
00003E04  4E75                    1704      rts                             Return from subroutine
00003E06                          1705      
00003E06                          1706  upgrade_dmg:
00003E06  0C38 0014 5FF8          1707      CMP.B   #DAMAGE_UP_PRICE,PLA_GOLD   Check if the player has money for a damage upgrade
00003E0C  6D00 004A               1708      BLT     no_money                    If not enough money branch to no money subroutine
00003E10                          1709      
00003E10  5A4D                    1710      add.w   #S_DAMAGE_IN,A5         Move the shop pointer to the damage upgrades
00003E12  0C15 0000               1711      CMP.B   #0,(A5)                 Check that the shop still has damage upgrades left
00003E16  6F00 008E               1712      BLE     no_shop_damage_up       If no damage upgrades left branch to no shop torches subroutine
00003E1A                          1713      
00003E1A  0438 0014 5FF8          1714      sub.b   #DAMAGE_UP_PRICE,PLA_GOLD   Remove the damage upgrade price from the player's gold
00003E20  5315                    1715      sub.b   #1,(A5)                     Remove one damage upgrade from the shop
00003E22  5238 5FF1               1716      add.b   #1,PLA_DAMAGE               Add one to the player's damage value
00003E26                          1717      
00003E26  5B4D                    1718      sub.w   #S_DAMAGE_IN,A5         Move the shop pointer back to root
00003E28                          1719  
00003E28  43F9 000056B4           1720      lea     buy_item_msg,A1         Load the buy item message into A1
00003E2E  103C 000E               1721      move.b  #14,D0                  Move the number literal 14 to D0 for trap command
00003E32  4E4F                    1722      trap    #15                     Display the loaded message
00003E34                          1723      
00003E34  6100 0084               1724      bsr     press_continue          Pause for user input
00003E38                          1725      
00003E38  4E75                    1726      rts                             Return from subroutine
00003E3A                          1727      
00003E3A                          1728  leave_shop:
00003E3A  3638 5FF6               1729      move.w  PLA_P_POS,D3        Move the player's previous position to D3 to avoid treating it as a negative number
00003E3E  2C43                    1730      move.l  D3,A6               Move the player to their position before entering the shop
00003E40  11FC 0005 5FF3          1731      move.b  #5,GAME_STATE       Switch game state to movement
00003E46                          1732      
00003E46  43F9 0000568E           1733      lea     leave_shop_msg,A1   Load escape message
00003E4C  103C 000E               1734      move.b  #14,D0              Move literal for trap command
00003E50  4E4F                    1735      trap    #15                 Trap 15 to display messgae
00003E52                          1736      
00003E52  6100 0066               1737      bsr     press_continue      Pause until the player presses to continue
00003E56  4E75                    1738      rts                         Return from subroutine
00003E58                          1739      
00003E58                          1740  no_money:
00003E58  43F9 000056E2           1741      lea     no_money_msg,A1 Load the no money message
00003E5E  103C 000E               1742      move.b  #14,D0          Move the number literal 14 to D0 for trap command
00003E62  4E4F                    1743      trap    #15             Display the loaded message
00003E64                          1744      
00003E64  6100 0054               1745      bsr     press_continue  Wait for player input
00003E68  4E75                    1746      rts                     Return from subroutine
00003E6A                          1747      
00003E6A                          1748  no_shop_potions:
00003E6A  43F9 00005702           1749      lea     no_item_msg,A1  Load the no money message
00003E70  103C 000E               1750      move.b  #14,D0          Move the number literal 14 to D0 for trap command
00003E74  4E4F                    1751      trap    #15             Display the loaded message
00003E76  554D                    1752      sub.w   #S_POTIONS,A5   Move the shop pointer back to root
00003E78                          1753      
00003E78  6100 0040               1754      bsr     press_continue  Wait for player input
00003E7C  4E75                    1755      rts                     Return from subroutine
00003E7E                          1756      
00003E7E                          1757  no_shop_keys:
00003E7E  43F9 00005702           1758      lea     no_item_msg,A1  Load the no money message
00003E84  103C 000E               1759      move.b  #14,D0          Move the number literal 14 to D0 for trap command
00003E88  4E4F                    1760      trap    #15             Display the loaded message
00003E8A  574D                    1761      sub.w   #S_KEYS,A5      Move the shop pointer back to root
00003E8C                          1762      
00003E8C  6100 002C               1763      bsr     press_continue  Wait for player input
00003E90  4E75                    1764      rts                     Return from subroutine
00003E92                          1765      
00003E92                          1766  no_shop_torches:
00003E92  43F9 00005702           1767      lea     no_item_msg,A1  Load the no money message
00003E98  103C 000E               1768      move.b  #14,D0          Move the number literal 14 to D0 for trap command
00003E9C  4E4F                    1769      trap    #15             Display the loaded message
00003E9E  594D                    1770      sub.w   #S_TORCHES,A5   Move the shop pointer back to root
00003EA0                          1771      
00003EA0  6100 0018               1772      bsr     press_continue  Wait for player input
00003EA4  4E75                    1773      rts                     Return from subroutine
00003EA6                          1774  
00003EA6                          1775  no_shop_damage_up:
00003EA6  43F9 00005702           1776      lea     no_item_msg,A1  Load the no money message
00003EAC  103C 000E               1777      move.b  #14,D0          Move the number literal 14 to D0 for trap command
00003EB0  4E4F                    1778      trap    #15             Display the loaded message
00003EB2  5B4D                    1779      sub.w   #S_DAMAGE_IN,A5 Move the shop pointer back to root
00003EB4                          1780      
00003EB4  6100 0004               1781      bsr     press_continue  Wait for player input
00003EB8  4E75                    1782      rts                     Return from subroutine
00003EBA                          1783  
00003EBA                          1784  *-------------------------------------------------------
00003EBA                          1785  *-------------------Misc Subroutines--------------------
00003EBA                          1786  *-------------------------------------------------------
00003EBA                          1787  press_continue:
00003EBA  6100 FA42               1788      bsr     endl
00003EBE                          1789  
00003EBE  43F9 00004FC9           1790      lea     continue_msg,A1 Load message into A1
00003EC4  103C 000E               1791      move.b  #14,D0          Move the trap command to display a message
00003EC8  4E4F                    1792      trap    #15             display the "press any ket to continue" text
00003ECA                          1793      
00003ECA  103C 0004               1794      move.b  #4,D0           Move the trap command to take input
00003ECE  4E4F                    1795      trap    #15             take input to freeze the game
00003ED0  4E75                    1796      rts                     Return from the 'press continue' subroutine
00003ED2                          1797      
00003ED2                          1798  random_number:              *Psuedo random number generator, courtesy of Pdraig
00003ED2  103C 0008               1799      move.b  #8,D0
00003ED6  4E4F                    1800      trap    #15
00003ED8  C2BC 005FFFFF           1801      and.l   #$5FFFFF,d1     prevent overflow in divu
00003EDE  82FC 0064               1802      divu    #100,D1         time count / 100
00003EE2  4841                    1803      swap    D1              swap upper and lower words of D1 to put remainder in low word
00003EE4  5241                    1804      addq.w  #1,D1           d1.w contains number from 1 to 100
00003EE6  3401                    1805      move    D1,D2           d2 = d1
00003EE8  4281                    1806      clr.l   D1
00003EEA                          1807      
00003EEA  4E75                    1808      rts                     Returns from random generation subroutine
00003EEC                          1809      
00003EEC                          1810  return:   *Subroutine to branch to to break out of a subroutine when a condition is met
00003EEC  4E75                    1811      rts
00003EEE                          1812      
00003EEE                          1813  take_potion:
00003EEE  0C38 0000 5FF9          1814      CMP.B   #0,PLA_POTIONS      Check if the player has potions to drink
00003EF4  6F00 001A               1815      BLE     no_potions          If the potions are zero or below branch to no_potions
00003EF8                          1816      
00003EF8  5638 5FF0               1817      add.b   #3,PLAYER           Add 3 to the player's health
00003EFC  5338 5FF9               1818      sub.b   #1,PLA_POTIONS      Remove one potion
00003F00                          1819      
00003F00  43F9 0000559C           1820      lea     take_potion_msg,A1  Load the take potion message
00003F06  103C 000E               1821      move.b  #14,D0              Move the number literal 14 to D0 for trap command
00003F0A  4E4F                    1822      trap    #15                 Display the loaded message
00003F0C                          1823      
00003F0C  61AC                    1824      bsr     press_continue      Wait for player input
00003F0E                          1825      
00003F0E  4E75                    1826      rts                         Return from subroutine
00003F10                          1827  
00003F10                          1828  no_potions:
00003F10  43F9 000055D6           1829      lea     no_potions_msg,A1   Load the no potions message
00003F16  103C 000E               1830      move.b  #14,D0              Move the number literal 14 to D0 for trap command
00003F1A  4E4F                    1831      trap    #15                 Display the loaded message
00003F1C                          1832      
00003F1C  619C                    1833      bsr     press_continue      Wait for player input
00003F1E                          1834      
00003F1E  4E75                    1835      rts                         Return from subroutine
00003F20                          1836      
00003F20                          1837  decrement_torch:
00003F20  0C38 0000 5FFB          1838      CMP.B   #0,PLA_TORCH    Compare the torch life to 0
00003F26  6FC4                    1839      BLE     return          If it's less than or equalt to zero, return
00003F28  5338 5FFB               1840      sub.b   #1,PLA_TORCH    Decrement by one if it's above zero
00003F2C  4E75                    1841      rts                     Return from subroutine
00003F2E                          1842      
00003F2E                          1843  change_font_colour:        * Changes the font colour to the colour loaded in D1
00003F2E  103C 0015               1844      move.b  #21,D0      Move #21 to D0 for trap command 21
00003F32  243C 01090000           1845      move.l  #FONT,D2    Move the font to D2
00003F38  4E4F                    1846      trap    #15         Set the colour
00003F3A  4281                    1847      clr.l   D1          Clear D1 for later use
00003F3C  4282                    1848      clr.l   D2          Clear D2 for later use
00003F3E  4E75                    1849      rts                 Return from subroutine
00003F40                          1850      
00003F40                          1851  get_cursor_pos:
00003F40  323C 00FF               1852      move.w  #255,D1         Move the word #255 to D1 to set the type of trap 11
00003F44  103C 000B               1853      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
00003F48  4E4F                    1854      trap    #15             Trap to get the cursor position in D1
00003F4A                          1855      
00003F4A  2601                    1856      move.l  D1,D3           Move the value in D1 to D3 for storage
00003F4C  4E75                    1857      rts
00003F4E                          1858      
00003F4E                          1859  *-------------------------------------------------------
00003F4E                          1860  *----------------------Draw loop------------------------
00003F4E                          1861  *-------------------------------------------------------
00003F4E                          1862  draw_loop:
00003F4E  45F9 00008080           1863      lea     MAP_START_POINT,A2     Load starting memory location into A7
00003F54  1C3C 0000               1864      move.b  #0,D6           Data register used for rows
00003F58  1E3C 0000               1865      move.b  #0,D7           Data register used for columns
00003F5C  7200                    1866      move.l  #0,D1           Clear the D1 data register
00003F5E                          1867      
00003F5E  6100 0004               1868      bsr     loop_rows       Loop for every row
00003F62  4E75                    1869      rts
00003F64                          1870      
00003F64                          1871  loop_rows:
00003F64  BC7C 000F               1872      CMP     #MAP_LENGTH,D6          Check the rows don't go out of bounds
00003F68  6E82                    1873      BGT     return          If the rows are greater than 22 end the loop
00003F6A                          1874      
00003F6A  1E3C 0000               1875      move.b  #0,D7           Reset to column 0
00003F6E  6100 000A               1876      bsr     loop_columns    Loop for every column
00003F72                          1877      
00003F72  5206                    1878      add.b   #1,D6           Add to the rows
00003F74                          1879      
00003F74  6100 F988               1880      bsr     endl            Break to the next line
00003F78  60EA                    1881      bra     loop_rows       Loop through the rows again
00003F7A                          1882      
00003F7A                          1883  loop_columns:
00003F7A  BE3C 000F               1884      CMP.B   #15,D7              Check the rows don't go out of bounds
00003F7E  6E00 FF6C               1885      BGT     return              If the rows are greater than 22 end the loop
00003F82                          1886      
00003F82  6100 0020               1887      bsr     draw_tile           Draw the current tile
00003F86  6100 00C6               1888      bsr     check_for_loot_piles Draw the loot piles if there is one on the current tile
00003F8A  6100 0140               1889      bsr     check_for_player    Draw the player in the current tile if they're there
00003F8E  6100 0184               1890      bsr     check_for_enemies   Draw an enemy in the current tile if they is one there
00003F92  6100 02C0               1891      bsr     check_for_win_point Draw the win point in the current tile if it's there
00003F96  6100 01F2               1892      bsr     check_for_shops     Draw a shop in the current tile if there is one
00003F9A  6100 025A               1893      bsr     check_for_doors     Draw a door in the current ile if there is one
00003F9E                          1894      
00003F9E  5207                    1895      add.b   #1,D7               Add to the column count
00003FA0  524A                    1896      add     #1,A2               Move to the next memory location
00003FA2  60D6                    1897      bra     loop_columns        Loop the columns again
00003FA4                          1898      
00003FA4                          1899  *-------------------------------------------------------
00003FA4                          1900  *----------------------Draw tile------------------------
00003FA4                          1901  *-------------------------------------------------------
00003FA4                          1902  *Draws the tile at the address in the address register A2
00003FA4                          1903  draw_tile:
00003FA4  0C12 00FF               1904      CMP.B   #255,(A2)           Check if the value is undifined
00003FA8  6700 005E               1905      BEQ     draw_blocked_tile   Draw the blank tile
00003FAC                          1906      
00003FAC  0C12 0001               1907      CMP.B   #1,(A2)
00003FB0  6700 0064               1908      BEQ     draw_both_tile
00003FB4  0C12 0003               1909      CMP.B   #3,(A2)
00003FB8  6700 006A               1910      BEQ     draw_left_tile
00003FBC  0C12 0004               1911      CMP.B   #4,(A2)
00003FC0  6700 0062               1912      BEQ     draw_left_tile
00003FC4  0C12 0005               1913      CMP.B   #5,(A2)
00003FC8  6700 0068               1914      BEQ     draw_right_tile
00003FCC  0C12 0006               1915      CMP.B   #6,(A2)
00003FD0  6700 0060               1916      BEQ     draw_right_tile
00003FD4  0C12 0008               1917      CMP.B   #8,(A2)
00003FD8  6700 004A               1918      BEQ     draw_left_tile
00003FDC  0C12 000A               1919      CMP.B   #10,(A2)
00003FE0  6700 0050               1920      BEQ     draw_right_tile
00003FE4  0C12 000B               1921      CMP.B   #11,(A2)
00003FE8  6700 003A               1922      BEQ     draw_left_tile
00003FEC  0C12 000C               1923      CMP.B   #12,(A2)
00003FF0  6700 0024               1924      BEQ     draw_both_tile
00003FF4  0C12 000D               1925      CMP.B   #13,(A2)
00003FF8  6700 0038               1926      BEQ     draw_right_tile
00003FFC  0C12 000E               1927      CMP.B   #14,(A2)
00004000  6700 0014               1928      BEQ     draw_both_tile
00004004                          1929      
00004004  6000 003A               1930      BRA     draw_blank_tile     Draw the blank tile
00004008                          1931      
00004008                          1932  draw_blocked_tile:
00004008  43F9 00004FF7           1933      lea     blocked_tile,A1
0000400E  103C 000E               1934      move.b  #14,D0
00004012  4E4F                    1935      trap    #15
00004014  4E75                    1936      rts
00004016                          1937      
00004016                          1938  draw_both_tile:
00004016  43F9 00004FEB           1939      lea     both_tile,A1
0000401C  103C 000E               1940      move.b  #14,D0
00004020  4E4F                    1941      trap    #15
00004022  4E75                    1942      rts
00004024                          1943      
00004024                          1944  draw_left_tile:
00004024  43F9 00004FEF           1945      lea     left_tile,A1
0000402A  103C 000E               1946      move.b  #14,D0
0000402E  4E4F                    1947      trap    #15
00004030  4E75                    1948      rts
00004032                          1949      
00004032                          1950  draw_right_tile:
00004032  43F9 00004FF3           1951      lea     right_tile,A1
00004038  103C 000E               1952      move.b  #14,D0
0000403C  4E4F                    1953      trap    #15
0000403E  4E75                    1954      rts
00004040                          1955      
00004040                          1956  draw_blank_tile:
00004040  43F9 00004FE7           1957      lea     blank_tile,A1
00004046  103C 000E               1958      move.b  #14,D0
0000404A  4E4F                    1959      trap    #15
0000404C  4E75                    1960      rts
0000404E                          1961  
0000404E                          1962  *----------------------Draw Loot------------------------
0000404E                          1963  check_for_loot_piles:
0000404E  4BF8 7000               1964      lea     FIRST_LOOT,A5   Load the memory address of the first loot pile
00004052  1A3C 0000               1965      move.b  #0,D5           Move the starting loot number to D5
00004056  6100 0004               1966      bsr     loop_loot_piles Loop through all loot piles
0000405A  4E75                    1967      rts                     Return from subroutine
0000405C                          1968      
0000405C                          1969  loop_loot_piles:
0000405C  6100 0014               1970      bsr     check_for_loot  Check for a loot pile
00004060                          1971      
00004060  BA3C 0002               1972      CMP.B   #ENEMY_MAX,D5   Compare the enemy number with the maximum loot number
00004064  6C00 FE86               1973      BGE     return          Return from the loop if the current loot number is greater than or equal to the max
00004068                          1974      
00004068  5205                    1975      add.b   #1,D5           Add to the current loot number
0000406A  DAFC 0010               1976      add.w   #16,A5          Add to the current loot pointer to move to the next loot pile
0000406E  5D4D                    1977      sub.w   #L_ACTIVE,A5    Move to the root
00004070  60EA                    1978      bra     loop_loot_piles Keep looping the loot piles
00004072                          1979      
00004072                          1980  check_for_loot:
00004072  5C4D                    1981      add.w   #L_ACTIVE,A5    Move to the active state
00004074  0C15 0000               1982      CMP.B   #0,(A5)         Return if the loot is not active
00004078  6700 FE72               1983      BEQ     return
0000407C  5D4D                    1984      sub.w   #L_ACTIVE,A5    Move to the root
0000407E                          1985  
0000407E  3615                    1986      move.w  (A5),D3         Move the enemy coordinates into data register D3 for large-value comparisons
00004080  B5C3                    1987      CMP.L   D3,A2           Check if the enemy is in the current position
00004082  6700 0006               1988      BEQ     draw_loot       Draw the enemy if it is
00004086  5C4D                    1989      add.w   #L_ACTIVE,A5    Move to the active state
00004088  4E75                    1990      rts                     Return if the enemy is not in the current position
0000408A                          1991      
0000408A                          1992  draw_loot:
0000408A  5C4D                    1993      add.w   #L_ACTIVE,A5    Move to the active state
0000408C                          1994  
0000408C  323C 00FF               1995      move.w  #255,D1         Move the word #255 to D1 to set the type of trap 11
00004090  103C 000B               1996      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
00004094  4E4F                    1997      trap    #15             Trap to get the cursor position in D1
00004096                          1998      
00004096  0441 0200               1999      sub.w   #512,D1         Move the cursor back by two columns
0000409A  4E4F                    2000      trap    #15             Set the cursor position with trap command 11
0000409C                          2001      
0000409C  2601                    2002      move.l  D1,D3           Move the value in D1 to D3 for storage
0000409E                          2003      
0000409E  223C 0000FFFF           2004      move.l  #GOLD,D1         Move the colour red to D1
000040A4  6100 FE88               2005      bsr     change_font_colour  Change the font colour
000040A8                          2006      
000040A8  43F9 00005003           2007      lea     loot_mark,A1   load the enemy symbol
000040AE  103C 000E               2008      move.b  #14,D0          Move #14 to D0 for trap command 14
000040B2  4E4F                    2009      trap    #15             Draw the player mark
000040B4                          2010      
000040B4  223C 00FFFFFF           2011      move.l  #WHITE,D1       Move the colour white to D1
000040BA  6100 FE72               2012      bsr     change_font_colour  Change the font colour
000040BE                          2013      
000040BE  2203                    2014      move.l  D3,D1           Move the value in D3 to D1 for previous cursor position
000040C0                          2015      
000040C0  0641 0200               2016      add.w   #512,D1         Move the cursor position two columns forward
000040C4  103C 000B               2017      move.b  #11,D0          Move byte #11 for trap command 11 
000040C8  4E4F                    2018      trap    #15             Set the cursor position
000040CA                          2019      
000040CA  4E75                    2020      rts 
000040CC                          2021  
000040CC                          2022  *---------------------Draw Player-----------------------
000040CC                          2023  check_for_player:
000040CC  B5CE                    2024      CMP.L   A6,A2
000040CE  6700 0004               2025      BEQ     draw_player
000040D2  4E75                    2026      rts
000040D4                          2027      
000040D4                          2028  draw_player:
000040D4  323C 00FF               2029      move.w  #255,D1         Move the word #255 to D1 to set the type of trap 11
000040D8  103C 000B               2030      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
000040DC  4E4F                    2031      trap    #15             Trap to get the cursor position in D1
000040DE                          2032      
000040DE  0441 0200               2033      sub.w   #512,D1         Move the cursor back by two columns
000040E2  4E4F                    2034      trap    #15             Set the cursor position with trap command 11
000040E4                          2035      
000040E4  2601                    2036      move.l  D1,D3          Move the value in D1 to D3 for storage
000040E6                          2037      
000040E6  223C 0000FF00           2038      move.l  #GREEN,D1       Move the colour green to D1
000040EC  6100 FE40               2039      bsr     change_font_colour  Change the font colour
000040F0                          2040      
000040F0  43F9 00004FFB           2041      lea     player_mark,A1  load the player symbol
000040F6  103C 000E               2042      move.b  #14,D0          Move #14 to D0 for trap command 14
000040FA  4E4F                    2043      trap    #15             Draw the player mark
000040FC                          2044      
000040FC  223C 00FFFFFF           2045      move.l  #WHITE,D1       Move the colour white to D1
00004102  6100 FE2A               2046      bsr     change_font_colour  Change the font colour
00004106                          2047      
00004106  2203                    2048      move.l  D3,D1           Move the value in D3 to D1 for previous cursor position
00004108                          2049      
00004108  0641 0200               2050      add.w   #512,D1         Move the cursor position two columns forward
0000410C  103C 000B               2051      move.b  #11,D0          Move byte #11 for trap command 11 
00004110  4E4F                    2052      trap    #15             Set the cursor position
00004112                          2053      
00004112  4E75                    2054      rts
00004114                          2055      
00004114                          2056  *---------------------Draw Enemies----------------------
00004114                          2057  check_for_enemies:
00004114  4BF8 6000               2058      lea     FIRST_ENEMY,A5  Load the memory address of the first enemy
00004118  1A3C 0000               2059      move.b  #0,D5           Move the starting enemy number to D5
0000411C  6100 0004               2060      bsr     loop_enemies    Loop through all enemies
00004120  4E75                    2061      rts                     Return from subroutine
00004122                          2062      
00004122                          2063  loop_enemies:
00004122  6100 0012               2064      bsr     check_for_enemy Check for an enemy
00004126                          2065      
00004126  BA3C 0002               2066      CMP.B   #ENEMY_MAX,D5   Compare the enemy number with the maximum enemy number
0000412A  6C00 FDC0               2067      BGE     return          Return from the loop if the current enemy number is greater than or equal to the max
0000412E                          2068      
0000412E  5205                    2069      add.b   #1,D5           Add to the current enemy number
00004130  DAFC 000C               2070      add.w   #12,A5          Add to the current enemy pointer to move to the next enemy (16 for next enemy - 4 to get back from position)
00004134  60EC                    2071      bra     loop_enemies    Keep looping the enemies
00004136                          2072      
00004136                          2073  check_for_enemy:
00004136  564D                    2074      add.w   #ALIVE,A5       Add to the enemy memory address to get the enemy's alive state
00004138  0C1D 0000               2075      CMP.B   #0,(A5)+        Check if the enemy is alive
0000413C  6700 FDAE               2076      BEQ     return          Return from the subroutine if not
00004140                          2077      
00004140  3615                    2078      move.w  (A5),D3         Move the enemy coordinates into data register D3 for large-value comparisons
00004142  B5C3                    2079      CMP.L   D3,A2           Check if the enemy is in the current position
00004144  6700 0004               2080      BEQ     draw_enemy      Draw the enemy if it is
00004148  4E75                    2081      rts                     Return if the enemy is not in the current position
0000414A                          2082      
0000414A                          2083  draw_enemy:
0000414A  323C 00FF               2084      move.w  #255,D1         Move the word #255 to D1 to set the type of trap 11
0000414E  103C 000B               2085      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
00004152  4E4F                    2086      trap    #15             Trap to get the cursor position in D1
00004154                          2087      
00004154  0441 0200               2088      sub.w   #512,D1         Move the cursor back by two columns
00004158  4E4F                    2089      trap    #15             Set the cursor position with trap command 11
0000415A                          2090      
0000415A  2601                    2091      move.l  D1,D3          Move the value in D1 to D3 for storage
0000415C                          2092      
0000415C  223C 000000FF           2093      move.l  #RED,D1         Move the colour red to D1
00004162  6100 FDCA               2094      bsr     change_font_colour  Change the font colour
00004166                          2095      
00004166  43F9 00004FFD           2096      lea     enemy_mark,A1   load the enemy symbol
0000416C  103C 000E               2097      move.b  #14,D0          Move #14 to D0 for trap command 14
00004170  4E4F                    2098      trap    #15             Draw the player mark
00004172                          2099      
00004172  223C 00FFFFFF           2100      move.l  #WHITE,D1       Move the colour white to D1
00004178  6100 FDB4               2101      bsr     change_font_colour  Change the font colour
0000417C                          2102      
0000417C  2203                    2103      move.l  D3,D1           Move the value in D3 to D1 for previous cursor position
0000417E                          2104      
0000417E  0641 0200               2105      add.w   #512,D1         Move the cursor position two columns forward
00004182  103C 000B               2106      move.b  #11,D0          Move byte #11 for trap command 11 
00004186  4E4F                    2107      trap    #15             Set the cursor position
00004188                          2108      
00004188  4E75                    2109      rts 
0000418A                          2110   
0000418A                          2111  *----------------------Draw Shops-----------------------
0000418A                          2112  check_for_shops:
0000418A  4BF8 6500               2113      lea     FIRST_SHOP,A5   Load the memory address of the first shop
0000418E  1A3C 0000               2114      move.b  #0,D5           Move the starting shop number to D5
00004192  6100 0004               2115      bsr     loop_shops      Loop through all shops
00004196  4E75                    2116      rts                     Return from subroutine
00004198                          2117      
00004198                          2118  loop_shops:
00004198  6100 0012               2119      bsr     check_for_shop  Check for a shop
0000419C                          2120      
0000419C  BA3C 0002               2121      CMP.B   #SHOP_MAX,D5    Compare the shop number with the maximum shop number
000041A0  6C00 FD4A               2122      BGE     return          Return from the loop if the current shop number is greater than or equal to the max
000041A4                          2123      
000041A4  5205                    2124      add.b   #1,D5           Add to the current shop number
000041A6  DAFC 0010               2125      add.w   #16,A5          Add to the current shop pointer to move to the next shop
000041AA  60EC                    2126      bra     loop_shops      Keep looping the shops
000041AC                          2127      
000041AC                          2128  check_for_shop:
000041AC  3615                    2129      move.w  (A5),D3         Move the shop coordinates into data register D3 for large-value comparisons
000041AE  B5C3                    2130      CMP.L   D3,A2           Check if the shop is in the current position
000041B0  6700 0004               2131      BEQ     draw_shop       Draw the shop if it is
000041B4  4E75                    2132      rts                     Return if the shop is not in the current position
000041B6                          2133      
000041B6                          2134  draw_shop:
000041B6  323C 00FF               2135      move.w  #255,D1         Move the word #255 to D1 to set the type of trap 11
000041BA  103C 000B               2136      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
000041BE  4E4F                    2137      trap    #15             Trap to get the cursor position in D1
000041C0                          2138      
000041C0  0441 0200               2139      sub.w   #512,D1         Move the cursor back by two columns
000041C4  4E4F                    2140      trap    #15             Set the cursor position with trap command 11
000041C6                          2141      
000041C6  2601                    2142      move.l  D1,D3           Move the value in D1 to D3 for storage
000041C8                          2143      
000041C8  223C 00F000F0           2144      move.l  #PURPLE,D1      Move the colour red to D1
000041CE  6100 FD5E               2145      bsr     change_font_colour  Change the font colour
000041D2                          2146      
000041D2  43F9 00005001           2147      lea     shop_mark,A1    load the enemy symbol
000041D8  103C 000E               2148      move.b  #14,D0          Move #14 to D0 for trap command 14
000041DC  4E4F                    2149      trap    #15             Draw the player mark
000041DE                          2150      
000041DE  223C 00FFFFFF           2151      move.l  #WHITE,D1       Move the colour white to D1
000041E4  6100 FD48               2152      bsr     change_font_colour  Change the font colour
000041E8                          2153      
000041E8  2203                    2154      move.l  D3,D1           Move the value in D3 to D1 for previous cursor position
000041EA                          2155      
000041EA  0641 0200               2156      add.w   #512,D1         Move the cursor position two columns forward
000041EE  103C 000B               2157      move.b  #11,D0          Move byte #11 for trap command 11 
000041F2  4E4F                    2158      trap    #15             Set the cursor position
000041F4                          2159      
000041F4  4E75                    2160      rts
000041F6                          2161  
000041F6                          2162  *----------------------Draw Doors-----------------------
000041F6                          2163  check_for_doors:
000041F6  4BF8 6FE0               2164      lea     FIRST_DOOR,A5   Load the memory address of the first door
000041FA  1A3C 0000               2165      move.b  #0,D5           Move the starting door number to D5
000041FE  6100 0004               2166      bsr     loop_doors      Loop through all doors
00004202  4E75                    2167      rts                     Return from subroutine
00004204                          2168      
00004204                          2169  loop_doors:
00004204  6100 0010               2170      bsr     check_for_door  Check for a door
00004208                          2171      
00004208  BA3C 0003               2172      CMP.B   #DOOR_MAX,D5    Compare the door number with the maximum door number
0000420C  6C00 FCDE               2173      BGE     return          Return from the loop if the current door number is greater than or equal to the max
00004210                          2174      
00004210  5205                    2175      add.b   #1,D5           Add to the current door number
00004212  544D                    2176      add.w   #2,A5          Add to the current door pointer to move to the next door
00004214  60EE                    2177      bra     loop_doors      Keep looping the doors
00004216                          2178      
00004216                          2179  check_for_door:
00004216  3615                    2180      move.w  (A5),D3         Move the door coordinates into data register D3 for large-value comparisons
00004218  B5C3                    2181      CMP.L   D3,A2           Check if the door is in the current position
0000421A  6700 0004               2182      BEQ     draw_door       Draw the door if it is
0000421E  4E75                    2183      rts                     Return if the door is not in the current position
00004220                          2184      
00004220                          2185  draw_door:
00004220  6100 FD1E               2186      bsr     get_cursor_pos  Get the position of the cursor and save the value to D1 and D3
00004224                          2187      
00004224  0441 0200               2188      sub.w   #512,D1         Move the cursor back by two columns
00004228  4E4F                    2189      trap    #15             Set the cursor position with trap command 11
0000422A                          2190      
0000422A  223C 00507090           2191      move.l  #BROWN,D1       Move the colour red to D1
00004230  6100 FCFC               2192      bsr     change_font_colour  Change the font colour
00004234                          2193      
00004234  43F9 00005005           2194      lea     door_mark,A1    load the door symbol
0000423A  103C 000E               2195      move.b  #14,D0          Move #14 to D0 for trap command 14
0000423E  4E4F                    2196      trap    #15             Draw the door mark
00004240                          2197      
00004240  223C 00FFFFFF           2198      move.l  #WHITE,D1       Move the colour white to D1
00004246  6100 FCE6               2199      bsr     change_font_colour  Change the font colour
0000424A                          2200      
0000424A  2203                    2201      move.l  D3,D1           Move the value in D3 to D1 for previous cursor position
0000424C  103C 000B               2202      move.b  #11,D0          Move byte #11 for trap command 11 
00004250  4E4F                    2203      trap    #15             Set the cursor position
00004252                          2204      
00004252  4E75                    2205      rts                     Return from subroutine
00004254                          2206  
00004254                          2207  *--------------------Draw Win Point---------------------
00004254                          2208  check_for_win_point:
00004254  B5FC 00008156           2209      CMP.L   #WIN_POINT,A2   Check if the win point is in the current tile
0000425A  6700 0004               2210      BEQ     draw_win_point  Branch to draw the win point if so
0000425E  4E75                    2211      rts                     Return from subroutine if not
00004260                          2212      
00004260                          2213  draw_win_point:
00004260  323C 00FF               2214      move.w  #255,D1         Move the word #255 to D1 to set the type of trap 11
00004264  103C 000B               2215      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
00004268  4E4F                    2216      trap    #15             Trap to get the cursor position in D1
0000426A                          2217      
0000426A  0441 0200               2218      sub.w   #512,D1         Move the cursor back by two columns
0000426E  4E4F                    2219      trap    #15             Set the cursor position with trap command 11
00004270                          2220      
00004270  2601                    2221      move.l  D1,D3           Move the value in D1 to D3 for storage
00004272                          2222      
00004272  223C 00FF0000           2223      move.l  #BLUE,D1        Move the colour blue to D1
00004278  6100 FCB4               2224      bsr     change_font_colour  Change the font colour
0000427C                          2225      
0000427C  43F9 00004FFF           2226      lea     win_point_mark,A1   load the win point symbol
00004282  103C 000E               2227      move.b  #14,D0              Move #14 to D0 for trap command 14
00004286  4E4F                    2228      trap    #15                 Draw the win point mark
00004288                          2229      
00004288  223C 00FFFFFF           2230      move.l  #WHITE,D1       Move the colour white to D1
0000428E  6100 FC9E               2231      bsr     change_font_colour  Change the font colour
00004292                          2232      
00004292  2203                    2233      move.l  D3,D1           Move the value in D3 to D1 for previous cursor position
00004294                          2234      
00004294  0641 0200               2235      add.w   #512,D1         Move the cursor position two columns forward
00004298  103C 000B               2236      move.b  #11,D0          Move byte #11 for trap command 11 
0000429C  4E4F                    2237      trap    #15             Set the cursor position
0000429E                          2238      
0000429E  4E75                    2239      rts
000042A0                          2240      
000042A0                          2241  *-------------------------------------------------------
000042A0                          2242  *-------------------Setup the world---------------------
000042A0                          2243  *-------------------------------------------------------
000042A0                          2244  setup_world:
000042A0  13FC 000E 0000814A      2245      move.b  #14,$814A   Setup the starting corridor
000042A8  13FC 0007 0000813A      2246      move.b  #7,$813A    T junction upwards from starting corridor
000042B0  13FC 0004 00008139      2247      move.b  #4,$8139    Left corridor
000042B8  13FC 0001 00008129      2248      move.b  #1,$8129
000042C0  13FC 0001 00008119      2249      move.b  #1,$8119
000042C8                          2250      
000042C8  13FC 0004 00008108      2251      move.b  #4,$8108    First shop
000042D0  13FC 0000 00008109      2252      move.b  #0,$8109    Entrance
000042D8  13FC 0005 0000810A      2253      move.b  #5,$810A
000042E0  13FC 0008 000080F8      2254      move.b  #8,$80F8
000042E8  13FC 0000 000080F9      2255      move.b  #0,$80F9
000042F0  13FC 000A 000080FA      2256      move.b  #10,$80FA
000042F8  13FC 0003 000080E8      2257      move.b  #3,$80E8
00004300  13FC 0007 000080E9      2258      move.b  #7,$80E9
00004308  13FC 0006 000080EA      2259      move.b  #6,$80EA
00004310                          2260      
00004310  13FC 0005 0000813B      2261      move.b  #5,$813B    Right corridor
00004318  13FC 0001 0000812B      2262      move.b  #1,$812B
00004320  13FC 0001 0000811B      2263      move.b  #1,$811B
00004328  13FC 0008 0000810B      2264      move.b  #8,$810B    Path continues up with a turn off to the right
00004330                          2265      
00004330  13FC 0002 0000810C      2266      move.b  #2,$810C    Right path
00004338  13FC 0002 0000810D      2267      move.b  #2,$810D    Continue right
00004340  13FC 0005 0000810E      2268      move.b  #5,$810E    Path upwards and to the left
00004348  13FC 0001 000080FE      2269      move.b  #1,$80FE    Leads upwards into a room
00004350                          2270      
00004350  13FC 0004 000080ED      2271      move.b  #4,$80ED    First monster room
00004358  13FC 0000 000080EE      2272      move.b  #0,$80EE    Entrance
00004360  13FC 0005 000080EF      2273      move.b  #5,$80EF
00004368  13FC 0008 000080DD      2274      move.b  #8,$80DD
00004370  13FC 0000 000080DE      2275      move.b  #0,$80DE
00004378  13FC 000A 000080DF      2276      move.b  #10,$80DF
00004380  13FC 0003 000080CD      2277      move.b  #3,$80CD
00004388  13FC 0007 000080CE      2278      move.b  #7,$80CE
00004390  13FC 0006 000080CF      2279      move.b  #6,$80CF
00004398                          2280      
00004398  13FC 0001 000080FB      2281      move.b  #1,$80FB    Path that continues up
000043A0  13FC 0001 000080EB      2282      move.b  #1,$80EB    Path continues upwards
000043A8  13FC 0001 000080DB      2283      move.b  #1,$80DB
000043B0                          2284      
000043B0                          2285      *Bottom row of room
000043B0  13FC 0004 000080C8      2286      move.b  #4,$80C8    Large monster room with locked door
000043B8  13FC 0009 000080C9      2287      move.b  #9,$80C9
000043C0  13FC 0009 000080CA      2288      move.b  #9,$80CA
000043C8  13FC 0000 000080CB      2289      move.b  #0,$80CB    Entrance
000043D0  13FC 0005 000080CC      2290      move.b  #5,$80CC
000043D8                          2291      *Middle row of room
000043D8  13FC 0000 000080B8      2292      move.b  #0,$80B8    Exit to the left
000043E0  13FC 0000 000080B9      2293      move.b  #0,$80B9
000043E8  13FC 0000 000080BA      2294      move.b  #0,$80BA
000043F0  13FC 0000 000080BB      2295      move.b  #0,$80BB
000043F8  13FC 000A 000080BC      2296      move.b  #10,$80BC
00004400                          2297      *Top row of room
00004400  13FC 0003 000080A8      2298      move.b  #3,$80A8
00004408  13FC 0007 000080A9      2299      move.b  #7,$80A9
00004410  13FC 0007 000080AA      2300      move.b  #7,$80AA
00004418  13FC 0007 000080AB      2301      move.b  #7,$80AB    Locked door
00004420  13FC 0006 000080AC      2302      move.b  #6,$80AC
00004428                          2303      
00004428  13FC 0002 000080B7      2304      move.b  #2,$80B7    Exit large room leftwards
00004430  13FC 0002 000080B6      2305      move.b  #2,$80B6    Continue to the left
00004438  13FC 0007 000080B5      2306      move.b  #7,$80B5    Continue to the left and a path downwards
00004440  13FC 0002 000080B4      2307      move.b  #2,$80B4    Continue to the left
00004448                          2308      
00004448  13FC 0003 000080A1      2309      move.b  #3,$80A1    Room to the left
00004450  13FC 0007 000080A2      2310      move.b  #7,$80A2
00004458  13FC 0006 000080A3      2311      move.b  #6,$80A3
00004460  13FC 0008 000080B1      2312      move.b  #8,$80B1
00004468  13FC 0000 000080B2      2313      move.b  #0,$80B2
00004470  13FC 0000 000080B3      2314      move.b  #0,$80B3    Entrance to the right
00004478  13FC 0004 000080C1      2315      move.b  #4,$80C1
00004480  13FC 0009 000080C2      2316      move.b  #9,$80C2
00004488  13FC 0005 000080C3      2317      move.b  #5,$80C3
00004490                          2318      
00004490  13FC 0001 000080C5      2319      move.b  #1,$80C5    Path leading downwards
00004498  13FC 0001 000080D5      2320      move.b  #1,$80D5
000044A0  13FC 000A 000080E5      2321      move.b  #10,$80E5   Path leading downward and to the left
000044A8  13FC 0002 000080E4      2322      move.b  #2,$80E4    Path on the left
000044B0  13FC 0002 000080E3      2323      move.b  #2,$80E3
000044B8  13FC 0003 000080E2      2324      move.b  #3,$80E2    Path takes a turn downwards
000044C0  13FC 0001 000080F2      2325      move.b  #1,$80F2    Path continues downwards
000044C8                          2326      
000044C8  13FC 0003 00008101      2327      move.b  #3,$8101    Regular enemy room
000044D0  13FC 0000 00008102      2328      move.b  #0,$8102    Entrance
000044D8  13FC 0006 00008103      2329      move.b  #6,$8103
000044E0  13FC 0008 00008111      2330      move.b  #8,$8111
000044E8  13FC 0000 00008112      2331      move.b  #0,$8112
000044F0  13FC 000A 00008113      2332      move.b  #10,$8113
000044F8  13FC 0004 00008121      2333      move.b  #4,$8121
00004500  13FC 0009 00008122      2334      move.b  #9,$8122
00004508  13FC 000A 00008123      2335      move.b  #10,$8123   Exit at the bottom
00004510                          2336      
00004510  13FC 0001 000080F5      2337      move.b  #1,$80F5    Path leading downward
00004518  13FC 0001 00008105      2338      move.b  #1,$8105
00004520  13FC 0001 00008115      2339      move.b  #1,$8115
00004528  13FC 0001 00008125      2340      move.b  #1,$8125
00004530                          2341      
00004530                          2342      *Top row of room
00004530  13FC 0008 00008133      2343      move.b  #8,$8133    Large enemy room - Exit at top
00004538  13FC 0007 00008134      2344      move.b  #7,$8134
00004540  13FC 0000 00008135      2345      move.b  #0,$8135    Entrance
00004548  13FC 0006 00008136      2346      move.b  #6,$8136
00004550                          2347      
00004550                          2348      *Middle row of room
00004550  13FC 0008 00008143      2349      move.b  #8,$8143
00004558  13FC 0000 00008144      2350      move.b  #0,$8144
00004560  13FC 0000 00008145      2351      move.b  #0,$8145
00004568  13FC 000A 00008146      2352      move.b  #10,$8146
00004570                          2353      
00004570                          2354      *Bottom row of room
00004570  13FC 0004 00008153      2355      move.b  #4,$8153
00004578  13FC 0009 00008154      2356      move.b  #9,$8154
00004580  13FC 0009 00008155      2357      move.b  #9,$8155
00004588  13FC 0005 00008156      2358      move.b  #5,$8156
00004590                          2359      
00004590                          2360      * Setup the doors
00004590  4BF8 6FE0               2361      lea     FIRST_DOOR,A5   Set the first door location to A5
00004594  3ABC 80EB               2362      move.w  #$80EB,(A5)     Set the location of the first door
00004598  544D                    2363      add.w   #2,A5           Increment the door memory address
0000459A  3ABC 80B6               2364      move.w  #$80B6,(A5)     Set the location of the first door
0000459E  544D                    2365      add.w   #2,A5           Increment the door memory address
000045A0  3ABC 8115               2366      move.w  #$8115,(A5)
000045A4                          2367      
000045A4  4E75                    2368      rts
000045A6                          2369  
000045A6                          2370  setup_enemies:
000045A6                          2371      * Setup first enemy
000045A6  11FC 0003 6000          2372      move.b  #3,$6000    Health - Setup the first enemy
000045AC  11FC 0001 6001          2373      move.b  #1,$6001    Damage/level
000045B2  11FC 0001 6002          2374      move.b  #1,$6002    Class type (Knight)
000045B8  11FC 0001 6003          2375      move.b  #1,$6003    Alive state (Alive)
000045BE  31FC 80DE 6004          2376      move.w  #$80DE,$6004  Move enemy coordinates
000045C4                          2377      
000045C4                          2378      * Setup second enemy
000045C4  11FC 0003 6010          2379      move.b  #3,$6010    Health - Setup the first enemy
000045CA  11FC 0002 6011          2380      move.b  #2,$6011    Damage/level
000045D0  11FC 0001 6012          2381      move.b  #1,$6012    Class type (Knight)
000045D6  11FC 0001 6013          2382      move.b  #1,$6013    Alive state (Alive)
000045DC  31FC 8155 6014          2383      move.w  #$8155,$6014  Move enemy coordinates
000045E2                          2384      
000045E2  4E75                    2385      rts
000045E4                          2386      
000045E4                          2387  setup_loot:
000045E4                          2388      * Setup first loot pile
000045E4  31FC 80DE 7000          2389      move.w  #$80DE,$7000  Move loot coordinates
000045EA  11FC 0001 7002          2390      move.b  #1,$7002  Move loot potions
000045F0  11FC 0002 7003          2391      move.b  #2,$7003  Move loot keys
000045F6  11FC 000F 7004          2392      move.b  #LIFE_PER_TORCH,$7004  Move loot torches
000045FC  11FC 0005 7005          2393      move.b  #5,$7005  Move loot gold
00004602  11FC 0001 7006          2394      move.b  #1,$7006  Move loot active state
00004608                          2395      
00004608                          2396      * Setup second loot pile
00004608  31FC 8155 7010          2397      move.w  #$8155,$7010  Move loot coordinates
0000460E  11FC 0003 7012          2398      move.b  #3,$7012  Move loot potions
00004614  11FC 0005 7013          2399      move.b  #5,$7013  Move loot keys
0000461A  11FC 0001 7014          2400      move.b  #1,$7014  Move loot torches
00004620  11FC 0002 7015          2401      move.b  #2,$7015  Move loot gold
00004626  11FC 0001 7016          2402      move.b  #1,$7016  Move loot active state
0000462C                          2403  
0000462C                          2404      
0000462C                          2405  setup_player:
0000462C  11FC 000A 5FF0          2406      move.b  #10,PLAYER      put score/health in memory location $5FF0
00004632  11FC 0001 5FF1          2407      move.b  #1,PLA_DAMAGE   Assign the default damage for the player
00004638  11FC 0000 5FF3          2408      move.b  #0,GAME_STATE   Put game state number in memory location $5FF3
0000463E                          2409      *0 = Pick role/intro | 5 = Move around | 6 = Combat | 7 = Shop | 64 = End game
0000463E                          2410  
0000463E  11FC 0000 5FF2          2411      move.b  #0,PLA_CLASS    put class number in memory location $5FF2
00004644                          2412      * 1 corresponds to knight - 2 corresponds to mage - 3 corresponds to rogue
00004644                          2413      
00004644  11FC 0064 5FF8          2414      move.b  #100,PLA_GOLD    Assign the player's base gold value
0000464A  11FC 0001 5FF9          2415      move.b  #1,PLA_POTIONS  Assign the player's base potions value
00004650  11FC 0003 5FFA          2416      move.b  #3,PLA_KEYS     Assign the player's base keys value
00004656                          2417      *move.b  #LIFE_PER_TORCH,PLA_TORCH   Assign the player's base torch value
00004656  11FC 0032 5FFB          2418      move.b  #50,PLA_TORCH   Assign the player's base torch value
0000465C                          2419      
0000465C  4DF9 0000814A           2420      lea     $814A,A6        Set the player coordinate to the first corridor
00004662  31CE 5FF6               2421      move.w  A6,PLA_P_POS    Set the player's previous position to their current
00004666                          2422      
00004666  4E75                    2423      rts
00004668                          2424      
00004668                          2425  setup_shops:
00004668                          2426      * Setup the first shop
00004668  31FC 80F9 6500          2427      move.w  #$80F9,$6500    Set the position
0000466E  11FC 0002 6502          2428      move.b  #2,$6502        Set the potions
00004674  11FC 0003 6503          2429      move.b  #3,$6503        Set the keys
0000467A  11FC 0004 6504          2430      move.b  #4,$6504        Set the torches
00004680  11FC 0005 6505          2431      move.b  #5,$6505        Set the damage
00004686                          2432      
00004686                          2433      * Setup the second shop
00004686  31FC 80B2 6510          2434      move.w  #$80B2,$6510    Set the position
0000468C  11FC 0004 6512          2435      move.b  #4,$6512        Set the potions
00004692  11FC 0003 6513          2436      move.b  #3,$6513        Set the keys
00004698  11FC 0002 6514          2437      move.b  #2,$6514        Set the torches
0000469E  11FC 0001 6515          2438      move.b  #1,$6515        Set the damage
000046A4                          2439  
000046A4  4E75                    2440      rts
000046A6                          2441      
000046A6                          2442  *-------------------------------------------------------
000046A6                          2443  *-------------------Data Delarations--------------------
000046A6                          2444  *-------------------------------------------------------
000046A6                          2445  
000046A6= 0D 0A 00                2446  crlf:           dc.b    $0D,$0A,0
000046A9= 2A 2A 2A 2A 2A 2A ...   2447  welcome_msg:    dc.b    '*****************************************************************',$0D,$0A
000046EC= 20 20 20 20 20 20 ...   2448                  dc.b    '      __  ___      ___  __      ___        ______    _____  ___',$0D,$0A
0000472D= 20 20 20 20 20 2F ...   2449                  dc.b    '     /""\|"  \    /"  |/""\    |"  |      /    " \  (\"   \|"  \',$0D,$0A
0000476F= 20 20 20 20 2F 20 ...   2450                  dc.b    '    /    \\   \  //  //    \   ||  |     // ____  \ |.\\   \    |',$0D,$0A
000047B2= 20 20 20 2F 20 20 ...   2451                  dc.b    '   /  /\  \\\  \/. .//  /\  \  |:  |    /  /    ) :)|: \.   \\  |',$0D,$0A
000047F5= 20 20 2F 2F 20 20 ...   2452                  dc.b    '  //  __   \\.    ////  __   \  \  |___(: (____/ // |.  \    \. |',$0D,$0A
00004838= 20 2F 20 20 20 2F ...   2453                  dc.b    ' /   /  \\  \\\   //   /  \\  \( \_|:  \\        /  |    \    \ |',$0D,$0A
0000487B= 28 5F 5F 5F 2F 20 ...   2454                  dc.b    '(___/    \___)\__/(___/    \___)\_______)\"_____/    \___|\____\)',$0D,$0A,$0D,$0A
000048C0= 2A 2A 2A 2A 2A 2A ...   2455                  dc.b    '*****************************************************************',$0D,$0A,0
00004904= 2E 00                   2456  loop_msg:       dc.b    '.',0
00004906= 20 20 20 20 20 20 ...   2457  blank_msg:      dc.b    '                                                                                   ',0
0000495A= 54 68 65 20 64 61 ...   2458  tutorial_msg    dc.b    'The darkness here is dangerious, keep your torch close and dont let it go out.',$0D,$0A
000049AA= 45 76 65 72 79 20 ...   2459                  dc.b    'Every movement you make decreases your torch life, so think before you move.',$0D,$0A
000049F8= 59 6F 75 20 63 61 ...   2460                  dc.b    'You can buy more torches in the shop, thats probably a good place to start...',$0D,$0A,0
00004A48= 31 3E 20 52 65 73 ...   2461  replay_msg:     dc.b    '1> Restart the game.',$0D,$0A
00004A5E= 32 3E 20 51 75 69 ...   2462                  dc.b    '2> Quit the game.',$0D,$0A,0
00004A72= 59 6F 75 20 61 77 ...   2463  wake_up_msg:    dc.b    'You awake in a room, on a bed of red velvet, with no memory',$0D,$0A
00004AAF= 6F 66 20 68 6F 77 ...   2464                  dc.b    'of how you got here. Stones crumble from the ceiling, the place looks like an',$0D,$0A
00004AFE= 6F 6C 64 20 63 61 ...   2465                  dc.b    'old castle. You get a dark feeling from this place, and you know you must',$0D,$0A
00004B49= 65 73 63 61 70 65 ...   2466                  dc.b    'escape...',$0D,$0A
00004B54= 59 6F 75 20 63 6C ...   2467                  dc.b    'You climb from the bed and look in a nearby mirror:',$0D,$0A,0
00004B8A= 31 3E 20 59 6F 75 ...   2468  pick_role_msg:  dc.b    '1> You wear armour of polished iron, a short sword and heavy shield laying',$0D,$0A
00004BD6= 63 6C 6F 73 65 20 ...   2469                  dc.b    'close by. (Knight class)',$0D,$0A,$0D,$0A
00004BF2= 32 3E 20 59 6F 75 ...   2470                  dc.b    '2> You wear a cloak with mystic symbols sewn into the fabrics, an ancient',$0D,$0A
00004C3D= 6C 6F 6F 6B 69 6E ...   2471                  dc.b    'looking staff lays near. (Mage class)',$0D,$0A,$0D,$0A
00004C66= 33 3E 20 59 6F 75 ...   2472                  dc.b    '3> You wear tight, well-fitting leather armour with reminents of black dye',$0D,$0A
00004CB2= 73 74 61 69 6E 65 ...   2473                  dc.b    'stained to the material. Two knives are fastened to your belt. (Rogue class)',$0D,$0A,0
00004D01= 45 6E 74 65 72 20 ...   2474  input_nums_msg: dc.b    'Enter num between 1 and ',0
00004D1A= 3A 20 00                2475  colon_msg:      dc.b    ': ',0
00004D1D                          2476  
00004D1D= 49 6E 70 75 74 74 ...   2477  input_error_msg:    dc.b    'Inputted number is outside of range.',$0D,$0A,0
00004D44= 47 61 6D 65 73 74 ...   2478  fake_gamestate_msg: dc.b    'Gamestate doesnt exist',$0D,$0A,0
00004D5D= 59 6F 75 20 67 72 ...   2479  knight_role_msg:    dc.b    'You grab your sword and shield, pull a torch from the wall, and leave the room.',$0D,$0A,0
00004DAF= 59 6F 75 20 68 61 ...   2480  knight_spec_msg:    dc.b    'You have chosen the KNIGHT class. You specialise in blocking and countering',$0D,$0A,0
00004DFD= 59 6F 75 20 70 69 ...   2481  mage_role_msg:  dc.b    'You pick up your staff, grab a torch from the wall, and leave the room.',$0D,$0A,0
00004E47= 59 6F 75 20 68 61 ...   2482  mage_spec_msg:  dc.b    'You have chosen the MAGE class. You specialise in magic attacks.',$0D,$0A,0
00004E8A= 59 6F 75 20 66 61 ...   2483  rogue_role_msg: dc.b    'You fasten your belt, grab a torch from the wall, and leave the room.',$0D,$0A,0
00004ED2= 59 6F 75 20 68 61 ...   2484  rogue_spec_msg: dc.b    'You have chosen the ROGUE class. You specialise in quick melee attacks.',$0D,$0A,0
00004F1C= 31 3E 20 4D 6F 76 ...   2485  movement_msg:   dc.b    '1> Move north.',$0D,$0A
00004F2C= 32 3E 20 4D 6F 76 ...   2486                  dc.b    '2> Move south.',$0D,$0A
00004F3C= 33 3E 20 4D 6F 76 ...   2487                  dc.b    '3> Move west.',$0D,$0A
00004F4B= 34 3E 20 4D 6F 76 ...   2488                  dc.b    '4> Move east.',$0D,$0A
00004F5A= 35 3E 20 44 72 69 ...   2489                  dc.b    '5> Drink health potion.',$0D,$0A,0
00004F74= 4D 6F 76 65 64 20 ...   2490  move_north_msg: dc.b    'Moved north.',$0D,$0A,0
00004F83= 4D 6F 76 65 64 20 ...   2491  move_east_msg:  dc.b    'Moved east.',$0D,$0A,0
00004F91= 4D 6F 76 65 64 20 ...   2492  move_south_msg: dc.b    'Moved south.',$0D,$0A,0
00004FA0= 4D 6F 76 65 64 20 ...   2493  move_west_msg:  dc.b    'Moved west.',$0D,$0A,0
00004FAE= 41 20 77 61 6C 6C ...   2494  movement_blocked_msg:  dc.b    'A wall blocks your path.',$0D,$0A,0
00004FC9= 45 6E 74 65 72 20 ...   2495  continue_msg:   dc.b    'Enter any key to continue... ',0
00004FE7= 20 20 20 00             2496  blank_tile      dc.b    '   ',0
00004FEB= 7C 20 7C 00             2497  both_tile       dc.b    '| |',0
00004FEF= 7C 20 20 00             2498  left_tile       dc.b    '|  ',0
00004FF3= 20 20 7C 00             2499  right_tile      dc.b    '  |',0
00004FF7= 5C 2F 5C 00             2500  blocked_tile:   dc.b    '\/\',0
00004FFB= 2A 00                   2501  player_mark:    dc.b    '*',0
00004FFD= 58 00                   2502  enemy_mark:     dc.b    'X',0
00004FFF= 40 00                   2503  win_point_mark: dc.b    '@',0
00005001= 24 00                   2504  shop_mark:      dc.b    '$',0
00005003= 25 00                   2505  loot_mark:      dc.b    '%',0
00005005= 23 00                   2506  door_mark:      dc.b    '#',0
00005007= 4D 61 70 20 4C 65 ...   2507  map_legend_msg:     dc.b    'Map Legend:',0
00005013= 20 3D 20 50 6C 61 ...   2508  map_player_msg:     dc.b    ' = Player',0
0000501D= 20 3D 20 45 6E 65 ...   2509  map_enemy_msg:      dc.b    ' = Enemy',0
00005026= 20 3D 20 4F 62 6A ...   2510  map_win_point_msg:  dc.b    ' = Objective',0
00005033= 20 3D 20 53 68 6F ...   2511  map_shop_msg:       dc.b    ' = Shop',0
0000503B= 20 3D 20 4C 6F 6F ...   2512  map_loot_msg:       dc.b    ' = Loot Pile',0
00005048= 20 3D 20 4C 6F 63 ...   2513  map_door_msg:       dc.b    ' = Locked Door',0
00005057= 41 20 6D 6F 6E 73 ...   2514  encounter_msg:  dc.b    'A monster blocks your path, it looks ready to attack!',$0D,$0A,0
0000508F= 31 3E 20 42 6C 6F ...   2515  combat_msg:     dc.b    '1> Block and Counter.',$0D,$0A
000050A6= 32 3E 20 43 61 73 ...   2516                  dc.b    '2> Cast Magic.',$0D,$0A
000050B6= 33 3E 20 41 74 74 ...   2517                  dc.b    '3> Attack Swiftly.',$0D,$0A
000050CA= 34 3E 20 54 72 79 ...   2518                  dc.b    '4> Try Run.',$0D,$0A
000050D7= 35 3E 20 44 72 69 ...   2519                  dc.b    '5> Drink Health Potion.',$0D,$0A,0
000050F1= 59 6F 75 20 65 73 ...   2520  escape_msg:             dc.b    'You escaped the monster!',$0D,$0A,0
0000510C= 59 6F 75 20 74 72 ...   2521  fail_escape_msg:        dc.b    'You try to run, but the monster catches and damages you!',$0D,$0A,0
00005147= 59 6F 75 20 62 6F ...   2522  both_block_msg:         dc.b    'You both block, No damage is done!',$0D,$0A,0
0000516C= 59 6F 75 20 62 6F ...   2523  both_cast_magic_msg:    dc.b    'You both cast magic at eachother, the spells clash in mid air! No damage',$0D,$0A
000051B6= 69 73 20 64 6F 6E ...   2524                          dc.b    'is done!',$0D,$0A,0
000051C1= 59 6F 75 20 62 6F ...   2525  both_melee_msg:         dc.b    'You both lunge forward, metal clashes together, but no damage is done!',$0D,$0A,0
0000520A= 54 68 65 20 65 6E ...   2526  hit_against_block_msg:  dc.b    'The enemy blocks, you cast a cast a spell and it damages the monster!',$0D,$0A,0
00005252= 54 68 65 20 65 6E ...   2527  hit_against_magic_msg:  dc.b    'The enemy begins to charge a spell but you lunge forward and hit it first,',$0D,$0A
0000529E= 64 61 6D 61 67 69 ...   2528                          dc.b    'damaging the monster!',$0D,$0A,0
000052B6= 54 68 65 20 65 6E ...   2529  hit_against_melee_msg:  dc.b    'The enemy lunges forward but you block quicky, then counter, damaging the',$0D,$0A
00005301= 6D 6F 6E 73 74 65 ...   2530                          dc.b    'monster!',$0D,$0A,0
0000530C= 59 6F 75 20 6C 75 ...   2531  hit_by_counter_msg:     dc.b    'You lunge at the enemy but they block before you hit, they swing around quickly',$0D,$0A
0000535D= 61 6E 64 20 64 61 ...   2532                          dc.b    'and damage you!',$0D,$0A,0
0000536F= 59 6F 75 20 74 72 ...   2533  hit_by_magic_msg:       dc.b    'You try to block the enemies attack, but they cast a spell that breaks through',$0D,$0A
000053BF= 79 6F 75 72 20 64 ...   2534                          dc.b    'your defense and damages you!',$0D,$0A,0
000053DF= 59 6F 75 20 74 72 ...   2535  hit_by_melee_msg:       dc.b    'You try to charge up a spell, but the enemy lunges forward and damages you!',$0D,$0A,0
0000542D= 48 65 61 6C 74 68 ...   2536  health_msg:             dc.b    'Health: ',0
00005436= 45 6E 65 6D 79 20 ...   2537  enemy_knight_msg:       dc.b    'Enemy Knight',0
00005443= 45 6E 65 6D 79 20 ...   2538  enemy_mage_msg:         dc.b    'Enemy Mage',0
0000544E= 45 6E 65 6D 79 20 ...   2539  enemy_rogue_msg:        dc.b    'Enemy Rogue',0
0000545A= 54 6F 72 63 68 20 ...   2540  torch_msg:              dc.b    'Torch Life: ',0
00005467= 44 61 6D 61 67 65 ...   2541  damage_lvl_msg          dc.b    'Damage lvl: ',0
00005474= 49 6E 76 65 6E 74 ...   2542  inventory_msg:          dc.b    'Inventory:',0
0000547F= 2D 20 47 6F 6C 64 ...   2543  gold_msg:               dc.b    '- Gold ',0
00005487= 2D 20 4B 65 79 20 00    2544  key_msg:                dc.b    '- Key ',0
0000548E= 2D 20 50 6F 74 69 ...   2545  potions_msg:            dc.b    '- Potion ',0
00005498= 2D 20 54 6F 72 63 ...   2546  torches_msg:            dc.b    '- Torch ',0
000054A1= 2D 20 44 61 6D 61 ...   2547  damage_up_msg:          dc.b    '- Damage Upgrades ',0
000054B4= 54 68 65 20 6D 6F ...   2548  battle_won_msg:         dc.b    'The monster collapses at your feet. It is dead!',$0D,$0A,0
000054E6= 28 00                   2549  bracket_open_msg:       dc.b    '(',0
000054E8= 29 00                   2550  bracket_close_msg:      dc.b    ')',0
000054EA= 59 6F 75 20 66 65 ...   2551  death_msg:          dc.b    'You feel your last breath of air leave your lungs...',$0D,$0A
00005520= 59 6F 75 72 20 6B ...   2552                      dc.b    'Your knees hit the ground...',$0D,$0A
0000553E= 59 6F 75 20 68 61 ...   2553                      dc.b    'You have died.',$0D,$0A,0
0000554F= 59 6F 75 20 66 65 ...   2554  win_msg:            dc.b    'You feel the outside breeze hit your face...',$0D,$0A
0000557D= 59 6F 75 20 68 61 ...   2555                      dc.b    'You have escaped the castle!',$0D,$0A,0
0000559C= 59 6F 75 20 64 72 ...   2556  take_potion_msg:    dc.b    'You drink a health potion...',$0D,$0A
000055BA= 33 20 68 65 61 6C ...   2557                      dc.b    '3 health points restored!',$0D,$0A,0
000055D6= 59 6F 75 20 61 72 ...   2558  no_potions_msg:     dc.b    'You are out of potions.',$0D,$0A,0
000055F0= 22 4C 6F 6F 6B 69 ...   2559  shop_enter_msg:     dc.b    '"Looking to lighten that coin pouch of yours?!"',$0D,$0A,0
00005622= 31 3E 20 42 75 79 ...   2560  shop_msg:       dc.b    '1> Buy Potion. (5g)',$0D,$0A
00005637= 32 3E 20 42 75 79 ...   2561                  dc.b    '2> Buy Key. (15g)',$0D,$0A
0000564A= 33 3E 20 42 75 79 ...   2562                  dc.b    '3> Buy Torch. (10g)',$0D,$0A
0000565F= 34 3E 20 42 75 79 ...   2563                  dc.b    '4> Buy Damage Upgrade. (20g)',$0D,$0A
0000567D= 35 3E 20 4C 65 61 ...   2564                  dc.b    '5> Leave Shop.',$0D,$0A,0
0000568E= 22 50 6C 65 61 73 ...   2565  leave_shop_msg: dc.b    '"Pleasure doing business with you."',$0D,$0A,0
000056B4= 22 2E 2E 2E 41 6E ...   2566  buy_item_msg:   dc.b    '"...And its yours!"',$0D,$0A,0
000056CA= 53 68 6F 70 20 53 ...   2567  shop_stock_msg: dc.b    'Shop Stock:',0
000056D6= 59 6F 75 72 20 49 ...   2568  player_msg:     dc.b    'Your Items:',0
000056E2= 22 4E 6F 74 20 65 ...   2569  no_money_msg:   dc.b    '"Not enough gold, traveller."',$0D,$0A,0
00005702= 22 53 6F 72 72 79 ...   2570  no_item_msg:    dc.b    '"Sorry, I dont have any of them left..."',$0D,$0A,0
0000572D= 54 68 65 20 64 61 ...   2571  no_torch_msg:   dc.b    'The darkness burns...',$0D,$0A,0
00005745= 59 6F 75 20 70 69 ...   2572  pickup_loot_msg:    dc.b    'You picked up a loot pile',$0D,$0A,0
00005761= 2B 20 47 6F 6C 64 ...   2573  pickup_gold_msg:    dc.b    '+ Gold ',0
00005769= 2B 20 50 6F 74 69 ...   2574  pickup_potion_msg:  dc.b    '+ Potion ',0
00005773= 2B 20 4B 65 79 20 00    2575  pickup_key_msg:     dc.b    '+ Key ',0
0000577A= 2B 20 54 6F 72 63 ...   2576  pickup_torch_msg:   dc.b    '+ Torch life ',0
00005788= 43 6C 61 73 73 20 ...   2577  double_damage_msg:  dc.b    'Class Bonus - Double Damage!',$0D,$0A,0
000057A7= 54 68 65 20 64 6F ...   2578  locked_door_msg:    dc.b    'The door seems locked, you have a key that might fit it.',$0D,$0A
000057E1= 44 6F 20 79 6F 75 ...   2579                      dc.b    'Do you want to try unlock it?',$0D,$0A,$0D,$0A
00005802= 31 3E 20 59 65 73 ...   2580                      dc.b    '1> Yes. (-1 key)',$0D,$0A
00005814= 32 3E 20 4E 6F 2E ...   2581                      dc.b    '2> No.',$0D,$0A,0
0000581D= 54 68 65 20 64 6F ...   2582  unlocked_door_msg:  dc.b    'The door swings open, the key lodged stuck in the keyhole.',$0D,$0A,0
0000585A= 54 68 65 20 64 6F ...   2583  blocked_door_msg:   dc.b    'The door seems solid, it wont budge.',$0D,$0A,0
00005881= 20 20 20 20 20 20 ...   2584  graveyard_msg:  dc.b    '      ,-=-.       ______     _',$0D,$0A
000058A1= 20 20 20 20 20 2F ...   2585                  dc.b    '     /  +  \     />----->  _|1|_',$0D,$0A
000058C3= 20 20 20 20 20 7C ...   2586                  dc.b    '     | ~~~ |    // -/- /  |_ H _|',$0D,$0A
000058E6= 20 20 20 20 20 7C ...   2587                  dc.b    '     |R.I.P|   //  /  /     |S|',$0D,$0A
00005907= 5C 76 56 2C 2C 7C ...   2588                  dc.b    '\vV,,|_____|V,//_____/VvV,v,|_|/,,vhjwv/,',$0D,$0A,0
00005933= 20 20 20 20 20 20 ...   2589  skeleton_msg:   dc.b    '           .-.',$0D,$0A
00005943= 20 2F 5C 5F 5F 5F ...   2590                  dc.b    ' /\____/\ (o.o)',$0D,$0A
00005954= 7C 20 20 5F 7C 7C ...   2591                  dc.b    '|  _||_  | |=|',$0D,$0A
00005964= 20 5C 2F 20 7C 7C ...   2592                  dc.b    ' \/ || \/ __|__',$0D,$0A
00005975= 20 20 20 20 7C 7C ...   2593                  dc.b    '    ||\_//.=|=.\\',$0D,$0A
00005988= 20 20 20 20 7C 7C ...   2594                  dc.b    '    ||\_/ .=|=. \\',$0D,$0A
0000599C= 20 20 20 20 7C 7C ...   2595                  dc.b    '    ||    .=|=. //',$0D,$0A
000059B0= 20 20 20 20 7C 7C ...   2596                  dc.b    '    ||    (_=_)//',$0D,$0A
000059C3= 20 20 20 20 7C 7C ...   2597                  dc.b    '    ||   (:| |:)',$0D,$0A
000059D5= 20 20 20 20 7C 7C ...   2598                  dc.b    '    ||    || ||',$0D,$0A
000059E6= 20 20 20 20 7C 7C ...   2599                  dc.b    '    ||    () ()',$0D,$0A
000059F7= 20 20 20 20 2F 5C ...   2600                  dc.b    '    /\    || ||',$0D,$0A
00005A08= 20 20 20 20 7C 7C ...   2601                  dc.b    '    ||    || ||',$0D,$0A
00005A19= 20 20 20 20 5C 2F ...   2602                  dc.b    '    \/  ==   ==',$0D,$0A,0
00005A2B= 20 20 20 20 20 20 ...   2603  merchant_msg:   dc.b    '         ____',$0D,$0A
00005A3A= 20 20 20 20 20 20 ...   2604                  dc.b    '        |    |',$0D,$0A
00005A4A= 20 20 20 20 20 20 ...   2605                  dc.b    '      --:<<>>:--',$0D,$0A
00005A5C= 20 20 20 20 20 20 ...   2606                  dc.b    '        :~_~ :',$0D,$0A
00005A6C= 20 20 20 20 20 20 ...   2607                  dc.b    '        _:"":\___',$0D,$0A
00005A7F= 20 20 5F 5F 5F 5F ...   2608                  dc.b    '  ____./ :::     \._',$0D,$0A
00005A95= 3C 3C 3D 29 20 20 ...   2609                  dc.b    '<<=)           \    :',$0D,$0A
00005AAC= 20 5C 2F 2D 2D 2D ...   2610                  dc.b    ' \/---/\_      /\._. ',$0D,$0A
00005AC3= 20 7C 7C 20 20 20 ...   2611                  dc.b    ' ||       \====:_ ""',$0D,$0A
00005AD9= 20 7C 7C 20 20 20 ...   2612                  dc.b    ' ||      ./     \\',$0D,$0A
00005AED= 20 7C 7C 20 20 20 ...   2613                  dc.b    ' ||     :       :',$0D,$0A
00005B00= 20 7C 7C 20 20 20 ...   2614                  dc.b    ' ||    /   :    \',$0D,$0A
00005B13= 20 7C 7C 20 20 20 ...   2615                  dc.b    ' ||   :   .      \.',$0D,$0A
00005B28= 20 7C 7C 20 20 20 ...   2616                  dc.b    ' ||   :  : :      :',$0D,$0A
00005B3D= 20 7C 7C 20 20 20 ...   2617                  dc.b    ' ||   :__:-:__.;--',$0D,$0A,0
00005B52= 20 20 20 20 20 20 ...   2618  castle_msg:     dc.b    '                T~~',$0D,$0A
00005B67= 20 20 20 20 20 20 ...   2619                  dc.b    '                |',$0D,$0A
00005B7A= 20 20 20 20 20 20 ...   2620                  dc.b    '               /"\',$0D,$0A
00005B8E= 20 20 20 20 20 20 ...   2621                  dc.b    '       T~~     |.| T~~',$0D,$0A
00005BA6= 20 20 20 54 7E 7E ...   2622                  dc.b    '   T~~ |    T~ WWWW|',$0D,$0A
00005BBC= 20 20 20 7C 20 20 ...   2623                  dc.b    '   |  /"\   |  |  |/\T~~',$0D,$0A
00005BD6= 20 20 2F 22 5C 20 ...   2624                  dc.b    '  /"\ WWW  /"\ |. |WW|',$0D,$0A
00005BEE= 20 57 57 57 57 57 ...   2625                  dc.b    ' WWWWW/\| /   \|./\|/"\',$0D,$0A
00005C07= 20 7C 20 20 20 2F ...   2626                  dc.b    ' |   /__\/]WWW[\/__\WWWW',$0D,$0A
00005C21= 20 7C 22 20 20 57 ...   2627                  dc.b    ' |"  WWWW.|I_I|.WWWW.   |',$0D,$0A
00005C3C= 20 7C 20 20 20 7C ...   2628                  dc.b    ' |   |. |/  -  \|. |.  |',$0D,$0A
00005C56= 20 7C 2E 20 20 7C ...   2629                  dc.b    ' |.  |  |LI=H=LI|. |   |',$0D,$0A
00005C70= 20 7C 20 20 20 7C ...   2630                  dc.b    ' |   |. | |[_]| |  |.  |',$0D,$0A
00005C8A= 20 7C 20 20 20 7C ...   2631                  dc.b    ' |   |  |_|###|_|  |   |',$0D,$0A
00005CA4= 20 20 2D 2D 2D 20 ...   2632                  dc.b    '  --- -- -/___\- -- --- ',$0D,$0A,0
00005CBF                          2633                  
00005CBF                          2634      end start

No errors detected
No warnings generated


SYMBOL TABLE INFORMATION
Symbol-name         Value
-------------------------
ALIVE               3
BATTLE_WON_MSG      54B4
BLANK_MSG           4906
BLANK_TILE          4FE7
BLOCKED_DOOR        3AFA
BLOCKED_DOOR_MSG    585A
BLOCKED_TILE        4FF7
BLOCK_COUNTER       3B54
BLUE                FF0000
BOTH_BLOCK          3BEC
BOTH_BLOCK_MSG      5147
BOTH_CAST_MAGIC     3BFE
BOTH_CAST_MAGIC_MSG  516C
BOTH_MELEE          3C10
BOTH_MELEE_MSG      51C1
BOTH_TILE           4FEB
BRACKET_CLOSE_MSG   54E8
BRACKET_OPEN_MSG    54E6
BROWN               507090
BUY_ITEM_MSG        56B4
BUY_KEY             3D9C
BUY_POTION          3D6A
BUY_TORCH           3DD0
CASTLE_MSG          5B52
CAST_MAGIC          3B6E
CHANGE_FONT_COLOUR  3F2E
CHECK_BLOCKED       3A8C
CHECK_FOR_A_DOOR    3AAC
CHECK_FOR_DOOR      4216
CHECK_FOR_DOORS     41F6
CHECK_FOR_ENEMIES   4114
CHECK_FOR_ENEMY     4136
CHECK_FOR_LOOT      4072
CHECK_FOR_LOOT_PILES  404E
CHECK_FOR_PLAYER    40CC
CHECK_FOR_SHOP      41AC
CHECK_FOR_SHOPS     418A
CHECK_FOR_WIN_POINT  4254
CLASS               2
CLEAR_SCREEN        38D0
COLON_MSG           4D1A
COMBAT              3B12
COMBAT_MSG          508F
CONTINUE_MSG        4FC9
CRLF                46A6
CSR_POS_BATTLE_E    1801
CSR_POS_BATTLE_P    3401
CSR_POS_MOVE        3201
CSR_POS_SHOP_P      3401
CSR_POS_SHOP_S      1801
DAMAGE              1
DAMAGE_ENEMY        3CB2
DAMAGE_LVL_MSG      5467
DAMAGE_PLAYER       3CEC
DAMAGE_UP_MSG       54A1
DAMAGE_UP_PRICE     14
DEATH_MSG           54EA
DECORATE            38B2
DECREMENT_TORCH     3F20
DOOR_MARK           5005
DOOR_MAX            3
DOUBLE_DAMAGE_ENEMY  3CC2
DOUBLE_DAMAGE_MSG   5788
DOUBLE_DAMAGE_PLAYER  3D02
DRAW                34A2
DRAW_BATTLE_INFO    36B0
DRAW_BLANK_TILE     4040
DRAW_BLOCKED_TILE   4008
DRAW_BOTH_TILE      4016
DRAW_CASTLE         34DE
DRAW_DOOR           4220
DRAW_ENEMY          414A
DRAW_GRAVEYARD      34D0
DRAW_HUD            34FA
DRAW_ITEM_NUMBER    3862
DRAW_LEFT_TILE      4024
DRAW_LOOP           3F4E
DRAW_LOOT           408A
DRAW_MAP_LEGEND     35C2
DRAW_MERCHANT       34EC
DRAW_PLAYER         40D4
DRAW_PLAYER_INFO    351A
DRAW_RIGHT_TILE     4032
DRAW_SHOP           41B6
DRAW_SHOP_INFO      372E
DRAW_SKELETON       34C2
DRAW_TILE           3FA4
DRAW_WIN_POINT      4260
ENCOUNTER_MSG       5057
END                 3006
ENDL                38FE
ENEMIES_CHECK       3362
ENEMIES_LOOP        3370
ENEMY_ALIVE_CHECK   346A
ENEMY_CHECK         338E
ENEMY_DIED          3474
ENEMY_KNIGHT_MSG    5436
ENEMY_MAGE_MSG      5443
ENEMY_MARK          4FFD
ENEMY_MAX           2
ENEMY_ROGUE_MSG     544E
ENTER_COMBAT        33C2
ENTER_SHOP          3442
ESCAPE_ATTACK       3BB2
ESCAPE_MSG          50F1
EXIT                0
FAIL_ESCAPE         3BD0
FAIL_ESCAPE_MSG     510C
FAKE_GAMESTATE_MSG  4D44
FIRST_DOOR          6FE0
FIRST_ENEMY         6000
FIRST_LOOT          7000
FIRST_SHOP          6500
FONT                1090000
GAME                3000
GAMELOOP            3194
GAMEPLAY            3884
GAME_STATE          5FF3
GET_CURSOR_POS      3F40
GOLD                FFFF
GOLD_MSG            547F
GRAVEYARD_MSG       5881
GREEN               FF00
HEALTH_MSG          542D
HIT_AGAINST_BLOCK   3C22
HIT_AGAINST_BLOCK_MSG  520A
HIT_AGAINST_MAGIC   3C38
HIT_AGAINST_MAGIC_MSG  5252
HIT_AGAINST_MELEE   3C4E
HIT_AGAINST_MELEE_MSG  52B6
HIT_BY_COUNTER      3C64
HIT_BY_COUNTER_MSG  530C
HIT_BY_MAGIC        3C7E
HIT_BY_MAGIC_MSG    536F
HIT_BY_MELEE        3C98
HIT_BY_MELEE_MSG    53DF
INPUT               311E
INPUT_ERROR_MSG     4D1D
INPUT_NUMS_MSG      4D01
INVALID_INPUT       3186
INVENTORY_MSG       5474
IN_A_DOOR           3AB6
KEY_MSG             5487
KEY_PRICE           F
KNIGHT_ROLE_MSG     4D5D
KNIGHT_SELECT       3062
KNIGHT_SPEC_MSG     4DAF
LEAVE_SHOP          3E3A
LEAVE_SHOP_MSG      568E
LEFT_TILE           4FEF
LIFE_PER_TORCH      F
LOCKED_DOOR_MSG     57A7
LOOP_COLUMNS        3F7A
LOOP_DOORS          4204
LOOP_ENEMIES        4122
LOOP_LOOT_PILES     405C
LOOP_MSG            4904
LOOP_ROWS           3F64
LOOP_SHOPS          4198
LOOP_THRU_DOORS     3A9A
LOOT_MARK           5003
LOOT_PILES_CHECK    3248
LOOT_PILE_CHECK     326A
LOOT_PILE_LOOP      3256
L_ACTIVE            6
MAGE_ROLE_MSG       4DFD
MAGE_SELECT         3092
MAGE_SPEC_MSG       4E47
MANAGE_INPUT        316C
MANAGE_TORCH        332E
MAP_DOOR_MSG        5048
MAP_ENEMY_MSG       501D
MAP_LEGEND_MSG      5007
MAP_LENGTH          F
MAP_LOOT_MSG        503B
MAP_PLAYER_MSG      5013
MAP_SHOP_MSG        5033
MAP_START_POINT     8080
MAP_WIN_POINT_MSG   5026
MELEE_ATTACK        3B88
MERCHANT_MSG        5A2B
MOVEMENT            3914
MOVEMENT_BLOCKED    3A7A
MOVEMENT_BLOCKED_MSG  4FAE
MOVEMENT_CHECKS     322C
MOVEMENT_MSG        4F1C
MOVE_EAST           3A32
MOVE_EAST_MSG       4F83
MOVE_NORTH          3956
MOVE_NORTH_MSG      4F74
MOVE_SOUTH          39A0
MOVE_SOUTH_MSG      4F91
MOVE_WEST           39EA
MOVE_WEST_MSG       4FA0
NEXT_CURSOR_POS     3854
NO_ITEM_MSG         5702
NO_MONEY            3E58
NO_MONEY_MSG        56E2
NO_POTIONS          3F10
NO_POTIONS_MSG      55D6
NO_SHOP_DAMAGE_UP   3EA6
NO_SHOP_KEYS        3E7E
NO_SHOP_POTIONS     3E6A
NO_SHOP_TORCHES     3E92
NO_TORCH_MSG        572D
OPEN_DOOR_POS       1000
OUT                 38BA
PICKUP_GOLD_MSG     5761
PICKUP_KEY_MSG      5773
PICKUP_LOOT         3280
PICKUP_LOOT_MSG     5745
PICKUP_POTION_MSG   5769
PICKUP_TORCH_MSG    577A
PICK_ROLE           301C
PICK_ROLE_MSG       4B8A
PLAYER              5FF0
PLAYER_DEAD         31D4
PLAYER_MARK         4FFB
PLAYER_MSG          56D6
PLA_CLASS           5FF2
PLA_DAMAGE          5FF1
PLA_GOLD            5FF8
PLA_KEYS            5FFA
PLA_POTIONS         5FF9
PLA_P_POS           5FF6
PLA_TORCH           5FFB
POSITION            4
POTIONS_MSG         548E
POTION_PRICE        5
PRESS_CONTINUE      3EBA
PURPLE              F000F0
RANDOM_NUMBER       3ED2
RED                 FF
REPLAY              38DC
REPLAY_MSG          4A48
RETURN              3EEC
RIGHT_TILE          4FF3
ROGUE_ROLE_MSG      4E8A
ROGUE_SELECT        30C2
ROGUE_SPEC_MSG      4ED2
ROLE_INPUT          3044
SETUP_ENEMIES       45A6
SETUP_LOOT          45E4
SETUP_PLAYER        462C
SETUP_SHOPS         4668
SETUP_WORLD         42A0
SHOP                3D2E
SHOPS_CHECK         33EC
SHOPS_LOOP          33FA
SHOP_CHECK          3418
SHOP_ENTER_MSG      55F0
SHOP_MARK           5001
SHOP_MAX            2
SHOP_MSG            5622
SHOP_STOCK_MSG      56CA
SKELETON_MSG        5933
START               1000
S_DAMAGE_IN         5
S_KEYS              3
S_POTIONS           2
S_TORCHES           4
TAKE_POTION         3EEE
TAKE_POTION_MSG     559C
TORCHES_MSG         5498
TORCH_MSG           545A
TORCH_PRICE         A
TRY_RUN             3BA2
TUTORIAL_INTRO      30F2
TUTORIAL_MSG        495A
UNLOCKED_DOOR_MSG   581D
UNLOCK_DOOR         3AE0
UPDATE              31AA
UPGRADE_DMG         3E06
WAKE_UP_MSG         4A72
WALL_COLLISIONS     3934
WELCOME             300A
WELCOME_MSG         46A9
WHITE               FFFFFF
WIN_MSG             554F
WIN_POINT           8156
WIN_POINT_MARK      4FFF
WON_GAME            31FE

00001000 Starting Address
Assembler used: EASy68K Editor/Assembler v5.16.01
Created On: 22/03/2019 17:49:52

00000000                             1  *-------------------------------------------------------
00000000                             2  * Author         : Michael Rainsford Ryan
00000000                             3  * Student Number : C00239510
00000000                             4  * Date Created   : 21/01/2019
00000000                             5  * Description    : A simplified, offline clone of the
00000000                             6  *                : online game "Avalon".
00000000                             7  * Issues/Bugs    : None currenty.
00000000                             8  *-------------------------------------------------------
00000000                             9  
00001000                            10      org $1000
00001000                            11  
00001000                            12  *-------------------------------------------------------
00001000                            13  *Choose to be a Worker or a God 
00001000                            14  *https://www.avalon-rpg.com/
00001000                            15  *-------------------------------------------------------
00001000                            16  
00001000                            17  *-------------------------------------------------------
00001000                            18  *-------------------Game Information-------------------
00001000                            19  *-------------------------------------------------------
00001000                            20  *A6 is used for player coordinates
00001000                            21  *A5 is used for enemy coordinates when in combat or looping through them
00001000                            22  *A5 is used for shops when in shop screen or when looping through them
00001000                            23  *A4 occasionally used for displaying the inventory
00001000                            24  *D5 is used occasionally for input range
00001000                            25  *$5FF0 holds player information
00001000                            26  *$6000 to $64F0 holds enemies
00001000                            27  *$6500 to $6FE0 holds shops
00001000                            28  *$6FE0 to $6FEF Holds locked doors
00001000                            29  *$6FF0 to $6FFF Holds big key locked doors
00001000                            30  *$7000 to $7500 holds loot
00001000                            31  *$8000 to $9000 holds maps
00001000                            32  
00001000                            33  *Enemies:
00001000                            34  *Byte:  Name:
00001000                            35  *0      Health
00001000                            36  *1      Damage/level
00001000                            37  *2      enemy type (Knight, mage, rogue)
00001000                            38  *3      Alive state (1 == alive, 0 == dead)
00001000                            39  *4 & 5  Coordinates
00001000                            40  
00001000                            41  *Player:
00001000                            42  *Byte:  Name:
00001000                            43  *0      Health
00001000                            44  *1      Damage/level
00001000                            45  *2      Class (Knight, mage, rogue)
00001000                            46  *3      Game state
00001000                            47  *4-5+A6 Coordinates
00001000                            48  *6-7    Last coordinates
00001000                            49  *8      Gold
00001000                            50  *9      Potions
00001000                            51  *A      Keys
00001000                            52  *B      Torch life
00001000                            53  
00001000                            54  *Shops:
00001000                            55  *Byte:  Name:
00001000                            56  *0-1    Position
00001000                            57  *2      Potions
00001000                            58  *3      Keys
00001000                            59  *4      Torches
00001000                            60  *5      Damage increase
00001000                            61  
00001000                            62  *Loot:
00001000                            63  *Byte:  Name:
00001000                            64  *0-1    Position
00001000                            65  *2      Potions
00001000                            66  *3      Keys
00001000                            67  *4      Torches
00001000                            68  *5      Gold
00001000                            69  *6      Active State
00001000                            70      
00001000                            71  *Game state : 0 = Pick role/intro | 5 = Move around | 6 = Combat | 7 = Shop | 64 = End game
00001000                            72  *Class      : 1 corresponds to knight - 2 corresponds to mage - 3 corresponds to rogue
00001000                            73  
00001000                            74  
00001000                            75  *-------------------------------------------------------
00001000                            76  *Validation values to be used, modify as needed
00001000                            77  *Add additional validation values as required
00001000                            78  *-------------------------------------------------------
00001000  =00000000                 79  exit        EQU 0      used to exit assembly program
00001000                            80  
00001000                            81  * Text display
00001000  =000000FF                 82  RED         EQU $000000FF   Red colour value
00001000  =0000FF00                 83  GREEN       EQU $0000FF00   Green colour value
00001000  =00FF0000                 84  BLUE        EQU $00FF0000   Blue colour value
00001000  =00FFFFFF                 85  WHITE       EQU $00FFFFFF   White colour value
00001000  =00F000F0                 86  PURPLE      EQU $00F000F0   Purple colour value
00001000  =0000FFFF                 87  GOLD        EQU $0000FFFF   Purple colour value
00001000  =00000080                 88  MAROON      EQU $00000080   Maroon colour value
00001000  =01090000                 89  FONT        EQU $01090000   Font value
00001000                            90  
00001000                            91  * Player
00001000  =00005FF0                 92  PLAYER      EQU $5FF0       Memory address for player information and health
00001000  =00005FF1                 93  PLA_DAMAGE  EQU $5FF1       Memory address for player damage value
00001000  =00005FF2                 94  PLA_CLASS   EQU $5FF2       The memory address for the player class
00001000  =00005FF3                 95  GAME_STATE  EQU $5FF3       The memory address of the game state
00001000  =00005FF6                 96  PLA_P_POS   EQU $5FF6       Memory location of the player's previous position
00001000  =00005FF8                 97  PLA_GOLD    EQU $5FF8       Memory address for player gold
00001000  =00005FF9                 98  PLA_POTIONS EQU $5FF9       Memory address for player potions
00001000  =00005FFA                 99  PLA_KEYS    EQU $5FFA       Memory address for player keys
00001000  =00005FFB                100  PLA_TORCH   EQU $5FFB       Memory address for player torch life
00001000                           101  
00001000                           102  * Enemy
00001000  =00006000                103  FIRST_ENEMY EQU $6000       Memory location of the first enemy
00001000  =00000002                104  ENEMY_MAX   EQU 2           Number of enemies in the game
00001000                           105  
00001000  =00000001                106  DAMAGE      EQU 1           The number of bytes to move from the enemy before reaching the damage
00001000  =00000002                107  CLASS       EQU 2           The number of bytes to move from the enemy before reaching the class
00001000  =00000003                108  ALIVE       EQU 3           The number of bytes to move from the enemy before reaching the alive state
00001000  =00000004                109  POSITION    EQU 4           The number of bytes to move from the enemy before reaching the position
00001000                           110  
00001000                           111  * Shop & Loot
00001000  =00006500                112  FIRST_SHOP  EQU $6500       Memory location of the first shop
00001000  =00000002                113  SHOP_MAX    EQU 2           Number of shops in the game
00001000                           114  
00001000  =00000002                115  S_POTIONS   EQU 2           The number of bytes to move from the shop root before reaching the potions
00001000  =00000003                116  S_KEYS      EQU 3           The number of bytes to move from the shop root before reaching the keys
00001000  =00000004                117  S_TORCHES   EQU 4           The number of bytes to move from the shop root before reaching the torches
00001000  =00000005                118  S_DAMAGE_IN EQU 5           The number of bytes to move from the shop root before reaching the damage increase
00001000                           119  
00001000  =00007000                120  FIRST_LOOT  EQU $7000       Memory location of the first loot pile
00001000  =00000006                121  L_ACTIVE    EQU 6           The number of bytes to move from the loot pile root before reaching the active state
00001000                           122  
00001000                           123  * HUD
00001000  =00003201                124  CSR_POS_MOVE    EQU $3201   The cursor position to draw the HUD to when in movement state
00001000  =00002001                125  CSR_POS_BATTLE  EQU $2001   The cursor position to draw the HUD to when in battle state
00001000  =00001801                126  CSR_POS_SHOP_S  EQU $1801   The cursor position to draw the HUD to when in shop state for shop info
00001000  =00003401                127  CSR_POS_SHOP_P  EQU $3401   The cursor position to draw the HUD to when in shop state for player info
00001000                           128  
00001000                           129  * Game
00001000  =00008156                130  WIN_POINT       EQU $8156   The position the player has to get to to win
00001000  =00006FE0                131  FIRST_DOOR      EQU $6FE0   The memory location of the first locked door
00001000  =00000001                132  MAX_DOORS       EQU 1       The number of locked doors in the game
00001000                           133  
00001000  =00000005                134  POTION_PRICE    EQU 5       The price in gold for a potion
00001000  =0000000F                135  KEY_PRICE       EQU 15      The price in gold for a key
00001000  =0000000A                136  TORCH_PRICE     EQU 10      The price in gold for a torch
00001000  =00000014                137  DAMAGE_UP_PRICE EQU 20      The price in gold for a damage upgrade
00001000                           138  
00001000  =0000000F                139  LIFE_PER_TORCH  EQU 15      The life value each torch has
00001000                           140  
00001000  =00008080                141  MAP_START_POINT EQU $8080   The starting coordinates the map draws at
00001000  =0000000F                142  MAP_LENGTH      EQU 15      The number of tiles downwords the map will draw
00001000                           143  
00001000                           144  
00001000                           145  *Start of Game
00001000                           146  start:
00001000  6100 349E                147      bsr     setup_player
00001004  6100 311A                148      bsr     setup_world
00001008  6100 3410                149      bsr     setup_enemies
0000100C  6100 34CE                150      bsr     setup_shops
00001010  6100 3446                151      bsr     setup_loot
00001014                           152  
00001014  6100 1FF4                153      bsr     welcome    branch to the welcome subroutine
00001018  6100 2D90                154      bsr     press_continue
0000101C  6100 1FE2                155      bsr     game       branch to the game subroutine
00001020                           156  *Game loop
00003000                           157      org     $3000      the rest of the program is to be located from 3000 onwards
00003000                           158  
00003000                           159  *-------------------------------------------------------
00003000                           160  *-------------------Game Subroutine---------------------
00003000                           161  *-------------------------------------------------------
00003000                           162  game:
00003000  6100 016E                163      bsr     gameloop   branch to gameloop subroutine
00003004  4E75                     164      rts                return from game: subroutine
00003006                           165            
00003006                           166  end:
00003006  FFFF FFFF                167      simhalt
0000300A                           168  
0000300A                           169  *-------------------------------------------------------
0000300A                           170  *-------------------Welcome Subroutine------------------
0000300A                           171  *-------------------------------------------------------
0000300A                           172  welcome:
0000300A  43F9 0000451D            173      lea     welcome_msg,A1  assign message to address register A1
00003010  103C 000E                174      move.b  #14,D0          move literal 14 to DO
00003014  4E4F                     175      trap    #15             trap and interpret value in D0
00003016  6100 0844                176      bsr     endl            branch to endl subroutine
0000301A                           177      
0000301A  4E75                     178      rts                     return from welcome: subroutine
0000301C                           179  
0000301C                           180  *-------------------------------------------------------
0000301C                           181  *-------------------Role Picking Subroutine------------------
0000301C                           182  *-------------------------------------------------------
0000301C                           183  pick_role:
0000301C                           184  
0000301C  43F9 00004892            185      lea     wake_up_msg,A1  assign message to address register A1
00003022  103C 000E                186      move.b  #14,D0          move literal 14 to DO
00003026  4E4F                     187      trap    #15             trap and interpret value in D0
00003028  6100 0832                188      bsr     endl            branch to endl subroutine
0000302C                           189      
0000302C  43F9 000049AA            190      lea     pick_role_msg,A1 assign message to address register A1
00003032  103C 000E                191      move.b  #14,D0           move literal 14 to DO
00003036  4E4F                     192      trap    #15              trap and interpret value in D0
00003038                           193      
00003038  7A03                     194      move.l  #3,D5           Move the number 3 to D5 to tell the program how many options there are
0000303A                           195      
0000303A  6100 00E2                196      bsr     input           branch to the input subroutine
0000303E                           197      
0000303E  6100 0D6A                198      bsr     press_continue          Pause the game until a key is pressed
00003042                           199      
00003042  4E75                     200      rts                     return from pick_role subroutine
00003044                           201      
00003044                           202  role_input:
00003044  11C1 5FF2                203      move.b  D1,PLA_CLASS    Move the role number to player class memory location to hold the class number
00003048                           204      
00003048                           205      *Give the player a message depending on the role chosen
00003048  B23C 0001                206      CMP.B   #1,D1
0000304C  6700 0014                207      BEQ     knight_select   Branch to knight message if role selected
00003050                           208      
00003050  B23C 0002                209      CMP.B   #2,D1
00003054  6700 003C                210      BEQ     mage_select     Branch to mage message if role selected
00003058                           211      
00003058  B23C 0003                212      CMP.B   #3,D1
0000305C  6700 0064                213      BEQ     rogue_select    Branch to rogue message if role selected
00003060                           214      
00003060  4E75                     215      rts
00003062                           216      
00003062                           217  knight_select:
00003062  43F9 00004B7D            218      lea     knight_role_msg,A1  assign message to address register A1
00003068  103C 000E                219      move.b  #14,D0              move literal 14 to DO
0000306C  4E4F                     220      trap    #15                 Display the knight message
0000306E                           221      
0000306E  223C 00F000F0            222      move.l  #PURPLE,D1          Load the purple colour
00003074  6100 0DA8                223      bsr     change_font_colour  Change the font colour
00003078                           224      
00003078  43F9 00004BCF            225      lea     knight_spec_msg,A1  assign message to address register A1
0000307E  103C 000E                226      move.b  #14,D0              move literal 14 to DO
00003082  4E4F                     227      trap    #15                 Display the knight message
00003084                           228      
00003084  223C 00FFFFFF            229      move.l  #WHITE,D1           Load the white colour
0000308A  6100 0D92                230      bsr     change_font_colour  Change the font colour
0000308E                           231      
0000308E  6000 0062                232      bra     tutorial_intro      Branch to tutorial subroutine
00003092                           233  
00003092                           234  mage_select:
00003092  43F9 00004C1D            235      lea     mage_role_msg,A1    Assign message to address register A1
00003098  103C 000E                236      move.b  #14,D0              move literal 14 to DO
0000309C  4E4F                     237      trap    #15                 Display the mage message
0000309E                           238      
0000309E  223C 00F000F0            239      move.l  #PURPLE,D1          Load the purple colour
000030A4  6100 0D78                240      bsr     change_font_colour  Change the font colour
000030A8                           241      
000030A8  43F9 00004C67            242      lea     mage_spec_msg,A1    assign message to address register A1
000030AE  103C 000E                243      move.b  #14,D0              move literal 14 to DO
000030B2  4E4F                     244      trap    #15                 Display the mage message
000030B4                           245      
000030B4  223C 00FFFFFF            246      move.l  #WHITE,D1           Load the white colour
000030BA  6100 0D62                247      bsr     change_font_colour  Change the font colour
000030BE                           248      
000030BE  6000 0032                249      bra     tutorial_intro      Branch to tutorial subroutine
000030C2                           250  
000030C2                           251  rogue_select:
000030C2  43F9 00004CAA            252      lea     rogue_role_msg,A1   Assign message to address register A1
000030C8  103C 000E                253      move.b  #14,D0              move literal 14 to DO
000030CC  4E4F                     254      trap    #15                 Display the rogue message
000030CE                           255      
000030CE  223C 00F000F0            256      move.l  #PURPLE,D1          Load the purple colour
000030D4  6100 0D48                257      bsr     change_font_colour  Change the font colour
000030D8                           258      
000030D8  43F9 00004CF2            259      lea     rogue_spec_msg,A1   Assign message to address register A1
000030DE  103C 000E                260      move.b  #14,D0              move literal 14 to DO
000030E2  4E4F                     261      trap    #15                 Display the rogue message
000030E4                           262      
000030E4  223C 00FFFFFF            263      move.l  #WHITE,D1           Load the white colour
000030EA  6100 0D32                264      bsr     change_font_colour  Change the font colour
000030EE                           265      
000030EE  6000 0002                266      bra     tutorial_intro      Branch to tutorial subroutine
000030F2                           267      
000030F2                           268  tutorial_intro:
000030F2  6100 0768                269      bsr     endl                Break to a new line
000030F6                           270  
000030F6  223C 000000FF            271      move.l  #RED,D1             Load the purple colour
000030FC  6100 0D20                272      bsr     change_font_colour  Change the font colour
00003100                           273      
00003100  43F9 0000477A            274      lea     tutorial_msg,A1     Load tutorial message to address register A1
00003106  103C 000E                275      move.b  #14,D0              move literal 14 to DO
0000310A  4E4F                     276      trap    #15                 Display the tutorial message
0000310C                           277      
0000310C  223C 00FFFFFF            278      move.l  #WHITE,D1           Load the white colour
00003112  6100 0D0A                279      bsr     change_font_colour  Change the font colour
00003116                           280      
00003116  11FC 0005 5FF3           281      move.b  #5,GAME_STATE       Change the game state to the movement state
0000311C                           282      
0000311C  4E75                     283      rts
0000311E                           284      
0000311E                           285  *-------------------------------------------------------
0000311E                           286  *---------Gameplay Input Values Subroutine--------------
0000311E                           287  *-------------------------------------------------------    
0000311E                           288  input:
0000311E  6100 073C                289      bsr     endl            Branch to end line subroutine
00003122                           290      
00003122  43F9 00004B21            291      lea     input_nums_msg,A1 assign message to address register A1
00003128  103C 000E                292      move.b  #14,D0          move literal 14 to DO
0000312C  4E4F                     293      trap    #15             Display the "enter number" message
0000312E                           294      
0000312E  2205                     295      move.l  D5,D1           Move the number of options to D1 to display it
00003130  103C 0003                296      move.b  #3,D0           move literal 3 to DO
00003134  4E4F                     297      trap    #15             Display the number in D1 to show the input range
00003136                           298      
00003136  43F9 00004B3A            299      lea     colon_msg,A1    assign message to address register A1
0000313C  103C 000E                300      move.b  #14,D0          move literal 14 to DO
00003140  4E4F                     301      trap    #15             Display a colon after the number range
00003142                           302      
00003142  103C 0004                303      move.b  #4,D0           Move the number 4 to D0
00003146  4E4F                     304      trap    #15             Take input
00003148                           305      
00003148                           306  manage_input:
00003148  B27C 0001                307      CMP     #1,D1           Check input against minimum value
0000314C  6D00 0014                308      BLT     invalid_input   Error if less than 1
00003150                           309      
00003150  B245                     310      CMP     D5,D1           Compare input against max value
00003152  6E00 000E                311      BGT     invalid_input   Error if more than max value
00003156                           312      
00003156  0C38 0000 5FF3           313      CMP.B   #0,GAME_STATE   Check which state the game is in
0000315C  6700 FEE6                314      BEQ     role_input      Branch to the manage input for the role picking
00003160                           315      
00003160  4E75                     316      rts                     Return out of subroutine
00003162                           317  
00003162                           318  invalid_input:
00003162  43F9 00004B3D            319      lea     input_error_msg,A1 assign message to address register A1
00003168  103C 000E                320      move.b  #14,D0          move literal 14 to DO
0000316C  4E4F                     321      trap    #15             Display the error message
0000316E                           322      
0000316E  60AE                     323      bra     input           Go back to taking input
00003170                           324  
00003170                           325  *-------------------------------------------------------
00003170                           326  *----------------Gameloop (main loop)-------------------
00003170                           327  *------------------------------------------------------- 
00003170                           328  gameloop:
00003170  6100 06BA                329      bsr     clear_screen    clears the screen  
00003174  6100 0300                330      bsr     draw            branch to draw screen subroutine
00003178  6100 0354                331      bsr     draw_hud
0000317C  6100 0008                332      bsr     update          branch to update game subroutine 
00003180  6100 065E                333      bsr     gameplay        branch to gameplay subroutine
00003184  60EA                     334      bra     gameloop        Continue looping the game loop     
00003186                           335  
00003186                           336  *-------------------------------------------------------
00003186                           337  *----------------Update Quest Progress------------------
00003186                           338  *  Complete Quest
00003186                           339  *------------------------------------------------------- 
00003186                           340  update:
00003186  0C38 0000 5FF0           341      CMP.B   #0,PLAYER           Check if the player health is zero
0000318C  6F00 0022                342      BLE     player_dead         Player is dead if health is zero or below
00003190                           343      
00003190  BDFC 00008156            344      CMP.L   #WIN_POINT,A6       Check if the player is standing on the win point
00003196  6700 0042                345      BEQ     won_game            Branch to the won game subroutine
0000319A                           346  
0000319A  0C38 0005 5FF3           347      CMP.B   #5,GAME_STATE       Check which state the game is in
000031A0  6700 0066                348      BEQ     movement_checks     Check for enemies and shops if in movement state
000031A4  0C38 0006 5FF3           349      CMP.B   #6,GAME_STATE       Check which state the game is in
000031AA  6700 0292                350      BEQ     enemy_alive_check   Check if enemy is dead if in combat
000031AE                           351      
000031AE  4E75                     352      rts
000031B0                           353      
000031B0                           354  *-------------------------------------------------------
000031B0                           355  *---------------------Win or Lose----------------------- 
000031B0                           356  player_dead:
000031B0  6100 06AA                357      bsr     endl            Break to new line
000031B4                           358      
000031B4  43F9 000052A5            359      lea     death_msg,A1    Load the death message
000031BA  103C 000E                360      move.b  #14,D0          Move byte #14 to D0 for the trap command
000031BE  4E4F                     361      trap    #15             Display the loaded message
000031C0                           362  
000031C0  6100 0BE8                363      bsr     press_continue  Pause to get input
000031C4  6100 0666                364      bsr     clear_screen    Clear the screen
000031C8  6100 02DA                365      bsr     draw_graveyard  Draw a graveyard
000031CC  6100 068E                366      bsr     endl            Break to new line
000031D0  11FC 0040 5FF3           367      move.b  #64,GAME_STATE  Set the game state to end game
000031D6  6000 0660                368      bra     replay          Give the player the option to restart or quit
000031DA                           369      
000031DA                           370  won_game:
000031DA  6100 0680                371      bsr     endl            Break to new line
000031DE                           372      
000031DE  43F9 0000530A            373      lea     win_msg,A1      Load the win message
000031E4  103C 000E                374      move.b  #14,D0          Move byte #14 to D0 for the trap command
000031E8  4E4F                     375      trap    #15             Display the loaded message
000031EA                           376  
000031EA  6100 0BBE                377      bsr     press_continue  Pause to get input
000031EE  6100 063C                378      bsr     clear_screen    Clear the screen
000031F2  6100 0668                379      bsr     endl            Break to new line
000031F6  6100 02BA                380      bsr     draw_castle     Draw a castle
000031FA  6100 0660                381      bsr     endl            Break to new line
000031FE  11FC 0040 5FF3           382      move.b  #64,GAME_STATE  Set the game state to end game
00003204  6000 0632                383      bra     replay          Give the player the option to restart or quit
00003208                           384  
00003208                           385  *-------------------------------------------------------
00003208                           386  *--------------------Movement State--------------------- 
00003208                           387  movement_checks:
00003208  6100 00F8                388      bsr     manage_torch    Check if the torch life is zero and if damage player if so
0000320C  6100 0016                389      bsr     loot_piles_check Check for loot piles under the player 
00003210  6100 0124                390      bsr     enemies_check   Check for enemies beside the player
00003214  0C38 0005 5FF3           391      CMP.B   #5,GAME_STATE   Compare the movement gamestate number with the current gamestate
0000321A  6600 0BC0                392      BNE     return          Return from the loop if the game is not in the movement state anymore
0000321E  6100 01A0                393      bsr     shops_check     Check for shops beside the player
00003222                           394      
00003222  4E75                     395      rts
00003224                           396  
00003224                           397  *-------------------Loot pile checks--------------------
00003224                           398  loot_piles_check:
00003224  4BF8 7000                399      lea     FIRST_LOOT,A5   Load the memory address of the first loot pile
00003228  1A3C 0000                400      move.b  #0,D5           Move the starting loot number to D5
0000322C  6100 0004                401      bsr     loot_pile_loop  Loop through all loot piles
00003230  4E75                     402      rts                     Return from subroutine
00003232                           403      
00003232                           404  loot_pile_loop:
00003232  BA3C 0002                405      CMP.B   #ENEMY_MAX,D5   Compare the loot number with the maximum enemy number
00003236  6C00 0BA4                406      BGE     return          Return from the loop if the current loot number is greater than or equal to the max
0000323A                           407  
0000323A  6100 000A                408      bsr     loot_pile_check Check for a loot pile
0000323E                           409      
0000323E  5205                     410      add.b   #1,D5           Add to the current loot number
00003240  DAFC 000C                411      add.w   #12,A5          Add to the current loot pointer to move to the next loot pile
00003244  60EC                     412      bra     loot_pile_loop  Keep looping the loot piles
00003246                           413      
00003246                           414  loot_pile_check:
00003246  5C4D                     415      add.w   #L_ACTIVE,A5    Move to the active state
00003248  0C15 0000                416      CMP.B   #0,(A5)         Check if the loot is active
0000324C  5D4D                     417      sub.w   #L_ACTIVE,A5    Move to the active state
0000324E  6700 0B8C                418      BEQ     return          Return if not active
00003252                           419  
00003252  3415                     420      move.w  (A5),D2         Move the loot pile position to D2 for large value comparison
00003254  BDC2                     421      CMP.L   D2,A6           Check if the player is on a loot pile   
00003256  6700 0004                422      BEQ     pickup_loot     Pickup the loot
0000325A                           423      
0000325A  4E75                     424      rts     Return if not touching a loot pile
0000325C                           425      
0000325C                           426  pickup_loot:
0000325C  6100 05FE                427      bsr     endl                Line break
00003260                           428      
00003260  223C 0000FFFF            429      move.l  #GOLD,D1            Load gold colour
00003266  6100 0BB6                430      bsr     change_font_colour  Change the font colour
0000326A                           431      
0000326A  43F9 00005500            432      LEA     pickup_loot_msg,A1  Load the encounter message int A1
00003270  103C 000E                433      move.b  #14,D0              Move #14 to D0 to display message
00003274  4E4F                     434      trap    #15                 Display the loaded message
00003276                           435      
00003276  544D                     436      add.w   #S_POTIONS,A5       Move to potions number
00003278  1215                     437      move.b  (A5),D1            Move the loot potions number to D1 and increment
0000327A  D338 5FF9                438      add.b   D1,PLA_POTIONS      Give the player the number of potions in the loot
0000327E                           439      
0000327E  43F9 00005524            440      LEA     pickup_potion_msg,A1  Load the pickup potions message into A1
00003284  103C 000E                441      move.b  #14,D0              Move #14 to D0 to display message
00003288  4E4F                     442      trap    #15                 Display the loaded message
0000328A                           443      
0000328A  384D                     444      move.w  A5,A4               Move the item number to A4 to draw it
0000328C  6100 033A                445      bsr     draw_item_number    Draw the item number
00003290  6100 05CA                446      bsr     endl                Break to new line
00003294  524D                     447      add.w   #1,A5               Move to the next item in the loot pile
00003296                           448      
00003296  1215                     449      move.b  (A5),D1             Move the key number to D1 and increment
00003298  D338 5FFA                450      add.b   D1,PLA_KEYS         Give the player the number of keys in the loot
0000329C                           451      
0000329C  43F9 0000552E            452      LEA     pickup_key_msg,A1   Load the pickup key message into A1
000032A2  103C 000E                453      move.b  #14,D0              Move #14 to D0 to display message
000032A6  4E4F                     454      trap    #15                 Display the loaded message
000032A8                           455      
000032A8  384D                     456      move.w  A5,A4               Move the item number to A4 to draw it
000032AA  6100 031C                457      bsr     draw_item_number    Draw the item number
000032AE  6100 05AC                458      bsr     endl                Break to new line
000032B2  524D                     459      add.w   #1,A5               Move to the next item in the loot pile
000032B4                           460      
000032B4  1215                     461      move.b  (A5),D1             Move the torch number to D1 and increment
000032B6  D338 5FFB                462      add.b   D1,PLA_TORCH        Give the player the number of torches in the loot
000032BA                           463      
000032BA  43F9 00005535            464      LEA     pickup_torch_msg,A1 Load the pickup torch message into A1
000032C0  103C 000E                465      move.b  #14,D0              Move #14 to D0 to display message
000032C4  4E4F                     466      trap    #15                 Display the loaded message
000032C6                           467      
000032C6  384D                     468      move.w  A5,A4               Move the item number to A4 to draw it
000032C8  6100 02FE                469      bsr     draw_item_number    Draw the item number
000032CC  6100 058E                470      bsr     endl                Break to new line
000032D0  524D                     471      add.w   #1,A5               Move to the next item in the loot pile
000032D2                           472      
000032D2  1215                     473      move.b  (A5),D1             Move the torch number to D1 and increment
000032D4  D338 5FF8                474      add.b   D1,PLA_GOLD         Give the player the number of gold in the loot
000032D8                           475      
000032D8  43F9 0000551C            476      LEA     pickup_gold_msg,A1  Load the pickup gold message int A1
000032DE  103C 000E                477      move.b  #14,D0              Move #14 to D0 to display message
000032E2  4E4F                     478      trap    #15                 Display the loaded message
000032E4                           479      
000032E4  384D                     480      move.w  A5,A4               Move the item number to A4 to draw it
000032E6  6100 02E0                481      bsr     draw_item_number    Draw the item number
000032EA  6100 0570                482      bsr     endl                Break to new line
000032EE  524D                     483      add.w   #1,A5               Move to the next item in the loot pile
000032F0                           484      
000032F0  1ABC 0000                485      move.b  #0,(A5)             Set the loot to not active
000032F4  5D4D                     486      sub.w   #L_ACTIVE,A5        Move to active state
000032F6                           487      
000032F6  223C 00FFFFFF            488      move.l  #WHITE,D1           Load the white colour
000032FC  6100 0B20                489      bsr     change_font_colour  Change the font colour
00003300                           490      
00003300  4E75                     491      rts
00003302                           492  
00003302                           493  *---------------------Manage Torch----------------------
00003302                           494  manage_torch:
00003302  0C38 0000 5FFB           495      CMP.B   #0,PLA_TORCH    Compare the torch life with zero
00003308  6E00 0AD2                496      BGT     return          Return if the torch life is greater than zero
0000330C                           497      
0000330C  5338 5FF0                498      sub.b   #1,PLAYER       Remove one health from the player
00003310                           499      
00003310  6100 054A                500      bsr     endl            Break to new line
00003314                           501      
00003314  223C 000000FF            502      move.l  #RED,D1
0000331A  6100 0B02                503      bsr     change_font_colour  Change the font colour
0000331E                           504      
0000331E  43F9 000054E8            505      lea     no_torch_msg,A1 Load the no torch message into A1
00003324  103C 000E                506      move.b  #14,D0          Move the number literal 14 into D0 for trap command
00003328  4E4F                     507      trap    #15             Display the loaded message
0000332A                           508      
0000332A  223C 00FFFFFF            509      move.l  #WHITE,D1
00003330  6100 0AEC                510      bsr     change_font_colour  Change the font colour
00003334                           511      
00003334  4E75                     512      rts                     Return from the subroutine
00003336                           513  
00003336                           514  *--------------------Enemy Checking--------------------- 
00003336                           515  enemies_check:
00003336  4BF8 6000                516      lea     FIRST_ENEMY,A5  Load the memory address of the first enemy
0000333A  1A3C 0000                517      move.b  #0,D5           Move the starting enemy number to D5
0000333E  6100 0004                518      bsr     enemies_loop    Loop through all enemies
00003342  4E75                     519      rts                     Return from subroutine
00003344                           520      
00003344                           521  enemies_loop:
00003344  BA3C 0002                522      CMP.B   #ENEMY_MAX,D5   Compare the enemy number with the maximum enemy number
00003348  6C00 0A92                523      BGE     return          Return from the loop if the current enemy number is greater than or equal to the max
0000334C                           524  
0000334C  6100 0014                525      bsr     enemy_check     Check for an enemy
00003350                           526      
00003350  0C38 0005 5FF3           527      CMP.B   #5,GAME_STATE   Compare the movement gamestate number with the current gamestate
00003356  6600 0A84                528      BNE     return          Return from the loop if the game is not in the movement state anymore
0000335A                           529      
0000335A  5205                     530      add.b   #1,D5           Add to the current enemy number
0000335C  DAFC 000C                531      add.w   #12,A5          Add to the current enemy pointer to move to the next enemy (16 for next enemy - 4 to get back from position)
00003360  60E2                     532      bra     enemies_loop    Keep looping the enemies
00003362                           533      
00003362                           534  
00003362                           535  enemy_check:
00003362  564D                     536      add.w   #ALIVE,A5       Move into enemy information to check if its alive
00003364  0C1D 0000                537      CMP.B   #0,(A5)+        Check if the enemy is alive
00003368  6700 0A72                538      BEQ     return          Return from the check if the enemy is dead
0000336C                           539      
0000336C  340E                     540      move.w  A6,D2           Move the player position to D2
0000336E                           541      
0000336E                           542      *Check if the player is beside an enemy
0000336E  0442 0010                543      sub.w   #16,D2          Check north
00003372  B455                     544      CMP.W   (A5),D2           
00003374  6700 0020                545      BEQ     enter_combat    Enter the player into combat
00003378                           546      
00003378  0642 0020                547      add.w   #32,D2          Check south
0000337C  B455                     548      CMP.W   (A5),D2           
0000337E  6700 0016                549      BEQ     enter_combat    Enter the player into combat
00003382                           550      
00003382  0442 0011                551      sub.w   #17,D2          Check west
00003386  B455                     552      CMP.W   (A5),D2           
00003388  6700 000C                553      BEQ     enter_combat    Enter the player into combat
0000338C                           554      
0000338C  5442                     555      add.w   #2,D2           Check east
0000338E  B455                     556      CMP.W   (A5),D2           
00003390  6700 0004                557      BEQ     enter_combat    Enter the player into combat
00003394                           558      
00003394  4E75                     559      rts     Return if not touching an enemy
00003396                           560      
00003396                           561  enter_combat:
00003396  594D                     562      sub.w   #4,A5               Get the memory address of the enemy opposed to it's position
00003398  11FC 0006 5FF3           563      move.b  #6,GAME_STATE       Move to combat state
0000339E                           564      
0000339E  6100 04BC                565      bsr     endl                Line break
000033A2                           566      
000033A2  43F9 00004E27            567      LEA     encounter_msg,A1    Load the encounter message int A1
000033A8  103C 000E                568      move.b  #14,D0              Move #14 to D0 to display message
000033AC  4E4F                     569      trap    #15                 Display the loaded message
000033AE                           570      
000033AE  6100 09FA                571      bsr     press_continue      Branch to the press to continue subroutine
000033B2                           572      
000033B2  6100 0478                573      bsr     clear_screen        Clear the screen
000033B6                           574      
000033B6  6100 00DE                575      bsr     draw_skeleton       Draw the enemy
000033BA  6100 022E                576      bsr     draw_battle_info    Draw the info
000033BE                           577      
000033BE  4E75                     578      rts
000033C0                           579        
000033C0                           580  *--------------------Shop Checking----------------------
000033C0                           581  shops_check:
000033C0  4BF8 6500                582      lea     FIRST_SHOP,A5   Load the memory address of the first shop
000033C4  1A3C 0000                583      move.b  #0,D5           Move the starting shop number to D5
000033C8  6100 0004                584      bsr     shops_loop      Loop through all shops
000033CC  4E75                     585      rts                     Return from subroutine
000033CE                           586      
000033CE                           587  shops_loop:
000033CE  BA3C 0002                588      CMP.B   #SHOP_MAX,D5    Compare the shop number with the maximum shop number
000033D2  6C00 0A08                589      BGE     return          Return from the loop if the current shop number is greater than or equal to the max
000033D6                           590      
000033D6  6100 0014                591      bsr     shop_check      Check for a shop
000033DA                           592      
000033DA  0C38 0005 5FF3           593      CMP.B   #5,GAME_STATE   Compare the movement gamestate number with the current gamestate
000033E0  6600 09FA                594      BNE     return          Return from the loop if the game is not in the movement state anymore
000033E4                           595      
000033E4  5205                     596      add.b   #1,D5           Add to the current shop number
000033E6  DAFC 0010                597      add.w   #16,A5          Add to the current shop pointer to move to the next shop
000033EA  60E2                     598      bra     shops_loop      Keep looping the shops
000033EC                           599      
000033EC                           600  shop_check:    
000033EC  340E                     601      move.w  A6,D2           Move the player position to D2
000033EE                           602      
000033EE                           603      *Check if the player is beside a shop
000033EE  0442 0010                604      sub.w   #16,D2          Check north
000033F2  B455                     605      CMP.W   (A5),D2           
000033F4  6700 0020                606      BEQ     enter_shop      The player enters a shop
000033F8                           607      
000033F8  0642 0020                608      add.w   #32,D2          Check south
000033FC  B455                     609      CMP.W   (A5),D2           
000033FE  6700 0016                610      BEQ     enter_shop      The player enters a shop
00003402                           611      
00003402  0442 0011                612      sub.w   #17,D2          Check west
00003406  B455                     613      CMP.W   (A5),D2           
00003408  6700 000C                614      BEQ     enter_shop      The player enters a shop
0000340C                           615      
0000340C  5442                     616      add.w   #2,D2           Check east
0000340E  B455                     617      CMP.W   (A5),D2           
00003410  6700 0004                618      BEQ     enter_shop      The player enters a shop
00003414                           619      
00003414  4E75                     620      rts     Return if not touching a shop
00003416                           621      
00003416                           622  enter_shop:
00003416  11FC 0007 5FF3           623      move.b  #7,GAME_STATE       Move to shop game state
0000341C                           624      
0000341C  6100 043E                625      bsr     endl                Line break
00003420                           626      
00003420  43F9 000053AB            627      LEA     shop_enter_msg,A1   Load the encounter message int A1
00003426  103C 000E                628      move.b  #14,D0              Move #14 to D0 to display message
0000342A  4E4F                     629      trap    #15                 Display the loaded message
0000342C                           630      
0000342C  6100 097C                631      bsr     press_continue      Branch to the press to continue subroutine
00003430                           632      
00003430  6100 03FA                633      bsr     clear_screen        Clear the screen
00003434                           634      
00003434  6100 008A                635      bsr     draw_merchant       Draw the merchant
00003438  6100 022A                636      bsr     draw_shop_info      Draw the info
0000343C                           637      
0000343C  4E75                     638      rts
0000343E                           639  
0000343E                           640  *-------------------------------------------------------
0000343E                           641  *---------------------Combat State---------------------- 
0000343E                           642  enemy_alive_check:
0000343E  0C15 0000                643      CMP.B   #0,(A5)     Compare the enemy health with zero
00003442  6F00 0004                644      BLE     enemy_died  If the enemy health is zero or below, they died
00003446                           645      
00003446  4E75                     646      rts
00003448                           647      
00003448                           648  enemy_died:
00003448  6100 0412                649      bsr     endl            Break to a new line
0000344C                           650  
0000344C  43F9 0000526F            651      lea     battle_won_msg,A1   Load the won battle message
00003452  103C 000E                652      move.b  #14,D0              Move the literal #14 to D0 for trap task #14
00003456  4E4F                     653      trap    #15                 Display the message
00003458                           654      
00003458  11FC 0005 5FF3           655      move.b  #5,GAME_STATE   Set the game state mack to movement state
0000345E  564D                     656      add.w   #ALIVE,A5       Move from the enemy health to its alive status
00003460  1ABC 0000                657      move.b  #0,(A5)         Set the enemy as dead
00003464                           658      
00003464  6100 0944                659      bsr     press_continue
00003468                           660      
00003468  6100 03C2                661      bsr     clear_screen    Clear the screen
0000346C  6100 0008                662      bsr     draw            Draw the map for first frame back in movement
00003470  6100 005C                663      bsr     draw_hud        Draw the hud for first frame back in movement
00003474                           664      
00003474  4E75                     665      rts
00003476                           666      
00003476                           667  *-------------------------------------------------------
00003476                           668  *-----------------Draw Quest Updates--------------------
00003476                           669  * Draw the game progress information, status regarding
00003476                           670  * quest
00003476                           671  *------------------------------------------------------- 
00003476                           672  draw:
00003476  0C38 0005 5FF3           673      CMP.B   #5,GAME_STATE   Check which state the game is in
0000347C  6700 09B2                674      BEQ     draw_loop       If in the movement state, draw the map
00003480  0C38 0006 5FF3           675      CMP.B   #6,GAME_STATE   Check which state the game is in
00003486  6700 000E                676      BEQ     draw_skeleton   If in the combat state, draw the enemy
0000348A  0C38 0007 5FF3           677      CMP.B   #7,GAME_STATE   Check which state the game is in
00003490  6700 002E                678      BEQ     draw_merchant   If in the shop state, draw the enemy
00003494  4E75                     679      rts
00003496                           680      
00003496                           681  draw_skeleton:
00003496  43F9 00005614            682      lea     skeleton_msg,A1 Load the skeleton message
0000349C  103C 000E                683      move.b  #14,D0          Move literal 14 for display message trap command
000034A0  4E4F                     684      trap    #15             Display the loaded message
000034A2                           685      
000034A2  4E75                     686      rts
000034A4                           687      
000034A4                           688  draw_graveyard:
000034A4  43F9 00005562            689      lea     graveyard_msg,A1 Load the graveyard message
000034AA  103C 000E                690      move.b  #14,D0           Move literal 14 for display message trap command
000034AE  4E4F                     691      trap    #15              Display the loaded message
000034B0  4E75                     692      rts                      Return from the subroutine
000034B2                           693  
000034B2                           694  draw_castle:
000034B2  43F9 00005833            695      lea     castle_msg,A1   Load the castle message
000034B8  103C 000E                696      move.b  #14,D0          Move literal 14 for display message trap command
000034BC  4E4F                     697      trap    #15             Display the loaded message
000034BE  4E75                     698      rts                     Return from the subroutine
000034C0                           699      
000034C0                           700  draw_merchant:
000034C0  43F9 0000570C            701      lea     merchant_msg,A1  Load the merchant message
000034C6  103C 000E                702      move.b  #14,D0           Move literal 14 for display message trap command
000034CA  4E4F                     703      trap    #15              Display the loaded message
000034CC                           704      
000034CC  4E75                     705      rts
000034CE                           706      
000034CE                           707  draw_hud:
000034CE  0C38 0005 5FF3           708      CMP.B   #5,GAME_STATE       Check which state the game is in
000034D4  6700 0018                709      BEQ     draw_player_info    If in the movement state, draw the player info
000034D8  0C38 0006 5FF3           710      CMP.B   #6,GAME_STATE       Check which state the game is in
000034DE  6700 010A                711      BEQ     draw_battle_info    If in the combat state, draw the combat info
000034E2  0C38 0007 5FF3           712      CMP.B   #7,GAME_STATE       Check which state the game is in
000034E8  6700 017A                713      BEQ     draw_shop_info      If in the shop state, draw the shop info
000034EC                           714      
000034EC  4E75                     715      rts
000034EE                           716  
000034EE                           717  draw_player_info:
000034EE  323C 00FF                718      move.w  #255,D1         Move the word #255 to D1 to set the type of trap 11
000034F2  103C 000B                719      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
000034F6  4E4F                     720      trap    #15             Trap to get the cursor position in D1
000034F8                           721      
000034F8  3601                     722      move.w  D1,D3           Move the current cursor position to D3 for later
000034FA                           723      
000034FA                           724      * Display the player health
000034FA  323C 3201                725      move.w  #CSR_POS_MOVE,D1           
000034FE  4E4F                     726      trap    #15             Set the cursor position with trap command 11
00003500  4241                     727      clr     D1              Clear D1 of the cursor position
00003502                           728      
00003502  43F9 000051FD            729      lea     health_msg,A1   Load the hud message
00003508  103C 000E                730      move.b  #14,D0          Move literal 14 for display message trap command
0000350C  4E4F                     731      trap    #15             Display the loaded message
0000350E                           732      
0000350E  1238 5FF0                733      move.b  PLAYER,D1       Move the player health value to D1 to display
00003512  103C 0003                734      move.b  #3,D0           Move literal 3 for display number trap command
00003516  4E4F                     735      trap    #15             Display the number in D1
00003518                           736      
00003518                           737      * Display the torch life
00003518  103C 000B                738      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
0000351C  323C 3201                739      move.w  #CSR_POS_MOVE,D1         
00003520  5241                     740      add.w   #1,D1  
00003522  4E4F                     741      trap    #15             Set the cursor position with trap command 11
00003524  4241                     742      clr     D1              Clear D1 of the cursor position
00003526                           743      
00003526  43F9 00005215            744      lea     torch_msg,A1   Load the hud message
0000352C  103C 000E                745      move.b  #14,D0          Move literal 14 for display message trap command
00003530  4E4F                     746      trap    #15             Display the loaded message
00003532                           747      
00003532  1238 5FFB                748      move.b  PLA_TORCH,D1    Move the player torch life value to D1 to display
00003536  103C 0003                749      move.b  #3,D0           Move literal 3 for display number trap command
0000353A  4E4F                     750      trap    #15             Display the number in D1
0000353C                           751      
0000353C                           752      * Display the inventory
0000353C  103C 000B                753      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
00003540  323C 3201                754      move.w  #CSR_POS_MOVE,D1
00003544  5441                     755      add.w   #2,D1          
00003546  4E4F                     756      trap    #15             Set the cursor position with trap command 11
00003548  4241                     757      clr     D1              Clear D1 of the cursor position
0000354A                           758      
0000354A  43F9 0000522F            759      lea     inventory_msg,A1   Load the hud message
00003550  103C 000E                760      move.b  #14,D0          Move literal 14 for display message trap command
00003554  4E4F                     761      trap    #15             Display the loaded message
00003556                           762      
00003556                           763      * Display the player gold
00003556  103C 000B                764      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
0000355A  323C 3201                765      move.w  #CSR_POS_MOVE,D1         
0000355E  5641                     766      add.w   #3,D1  
00003560  4E4F                     767      trap    #15             Set the cursor position with trap command 11
00003562  4241                     768      clr     D1              Clear D1 of the cursor position
00003564                           769      
00003564  43F9 0000523A            770      lea     gold_msg,A1   Load the hud message
0000356A  103C 000E                771      move.b  #14,D0          Move literal 14 for display message trap command
0000356E  4E4F                     772      trap    #15             Display the loaded message
00003570                           773      
00003570  49F8 5FF8                774      lea     PLA_GOLD,A4
00003574  6100 0052                775      bsr     draw_item_number
00003578                           776      
00003578                           777      * Display the player potions
00003578  103C 000B                778      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
0000357C  323C 3201                779      move.w  #CSR_POS_MOVE,D1         
00003580  5841                     780      add.w   #4,D1  
00003582  4E4F                     781      trap    #15             Set the cursor position with trap command 11
00003584  4241                     782      clr     D1              Clear D1 of the cursor position
00003586                           783      
00003586  43F9 00005249            784      lea     potions_msg,A1   Load the hud message
0000358C  103C 000E                785      move.b  #14,D0          Move literal 14 for display message trap command
00003590  4E4F                     786      trap    #15             Display the loaded message
00003592                           787      
00003592  49F8 5FF9                788      lea     PLA_POTIONS,A4
00003596  6100 0030                789      bsr     draw_item_number
0000359A                           790      
0000359A                           791      * Display the player keys
0000359A  103C 000B                792      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
0000359E  323C 3201                793      move.w  #CSR_POS_MOVE,D1         
000035A2  5A41                     794      add.w   #5,D1  
000035A4  4E4F                     795      trap    #15             Set the cursor position with trap command 11
000035A6  4241                     796      clr     D1              Clear D1 of the cursor position
000035A8                           797      
000035A8  43F9 00005242            798      lea     key_msg,A1   Load the hud message
000035AE  103C 000E                799      move.b  #14,D0          Move literal 14 for display message trap command
000035B2  4E4F                     800      trap    #15             Display the loaded message
000035B4                           801      
000035B4  49F8 5FFA                802      lea     PLA_KEYS,A4
000035B8  6100 000E                803      bsr     draw_item_number
000035BC                           804      
000035BC  3203                     805      move.w  D3,D1           Move the current cursor position to D3 for later
000035BE                           806      
000035BE  103C 000B                807      move.b  #11,D0          Move the byte #11 to D0 for trap command 11          
000035C2  4E4F                     808      trap    #15             Set the cursor position with trap command 11
000035C4                           809      
000035C4  4241                     810      clr     D1              Clear D1 for later use
000035C6                           811      
000035C6  4E75                     812      rts
000035C8                           813      
000035C8                           814  draw_item_number:
000035C8  103C 000E                815      move.b  #14,D0          Move literal 3 for display number trap command
000035CC  43F9 000052A1            816      lea     bracket_open_msg,A1
000035D2  4E4F                     817      trap    #15
000035D4                           818  
000035D4  103C 0003                819      move.b  #3,D0           Move literal 3 for display number trap command
000035D8  1214                     820      move.b  (A4),D1         Move the value in the register A4 to D1 to display
000035DA  4E4F                     821      trap    #15             Display the number in D1
000035DC                           822      
000035DC  103C 000E                823      move.b  #14,D0          Move literal 3 for display number trap command
000035E0  43F9 000052A3            824      lea     bracket_close_msg,A1
000035E6  4E4F                     825      trap    #15
000035E8  4E75                     826      rts
000035EA                           827      
000035EA                           828  
000035EA                           829  draw_battle_info:
000035EA  323C 00FF                830      move.w  #255,D1         Move the word #255 to D1 to set the type of trap 11
000035EE  103C 000B                831      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
000035F2  4E4F                     832      trap    #15             Trap to get the cursor position in D1
000035F4                           833      
000035F4  3601                     834      move.w  D1,D3           Move the current cursor position to D3 for later
000035F6                           835      
000035F6                           836      * Move cursor to draw player info
000035F6  323C 2001                837      move.w  #CSR_POS_BATTLE,D1           
000035FA  4E4F                     838      trap    #15             Set the cursor position with trap command 11
000035FC  4241                     839      clr     D1              Clear D1 of the cursor position
000035FE                           840      
000035FE  43F9 000051FD            841      lea     health_msg,A1   Load the hud message
00003604  103C 000E                842      move.b  #14,D0          Move literal 14 for display message trap command
00003608  4E4F                     843      trap    #15             Display the loaded message
0000360A                           844      
0000360A  1238 5FF0                845      move.b  PLAYER,D1       Move the player health value to D1 to display
0000360E  103C 0003                846      move.b  #3,D0           Move literal 3 for display number trap command
00003612  4E4F                     847      trap    #15             Display the number in D1
00003614                           848      
00003614                           849      * Move the cursor to draw enemy info
00003614  103C 000B                850      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
00003618  323C 2001                851      move.w  #CSR_POS_BATTLE,D1
0000361C  5241                     852      add.w   #1,D1
0000361E  4E4F                     853      trap    #15             Set the cursor position with trap command 11
00003620  4241                     854      clr     D1              Clear D1 of the cursor position
00003622                           855      
00003622  43F9 00005206            856      lea     enemy_health_msg,A1 Load the hud message
00003628  103C 000E                857      move.b  #14,D0              Move literal 14 for display message trap command
0000362C  4E4F                     858      trap    #15                 Display the loaded message
0000362E                           859      
0000362E  1215                     860      move.b  (A5),D1         Move the enemy health value to D1 to display
00003630  103C 0003                861      move.b  #3,D0           Move literal 3 for display number trap command
00003634  4E4F                     862      trap    #15             Display the number in D1
00003636                           863      
00003636                           864      * Move the cursor to draw potion information
00003636  103C 000B                865      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
0000363A  323C 2001                866      move.w  #CSR_POS_BATTLE,D1
0000363E  5641                     867      add.w   #3,D1
00003640  4E4F                     868      trap    #15             Set the cursor position with trap command 11
00003642  4241                     869      clr     D1              Clear D1 of the cursor position
00003644                           870      
00003644  43F9 00005249            871      lea     potions_msg,A1   Load the hud message
0000364A  103C 000E                872      move.b  #14,D0          Move literal 14 for display message trap command
0000364E  4E4F                     873      trap    #15             Display the loaded message
00003650                           874      
00003650  49F8 5FF9                875      lea     PLA_POTIONS,A4
00003654  6100 FF72                876      bsr     draw_item_number
00003658                           877      
00003658                           878      * Move the cursor back to its previous position
00003658  3203                     879      move.w  D3,D1           Move the previous cursor position back to D1
0000365A  103C 000B                880      move.b  #11,D0          Move the byte #11 to D0 for trap command 11          
0000365E  4E4F                     881      trap    #15             Set the cursor position with trap command 11
00003660                           882      
00003660  4241                     883      clr     D1              Clear D1 for later use
00003662                           884      
00003662  4E75                     885      rts
00003664                           886      
00003664                           887  draw_shop_info:
00003664  323C 00FF                888      move.w  #255,D1         Move the word #255 to D1 to set the type of trap 11
00003668  103C 000B                889      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
0000366C  4E4F                     890      trap    #15             Trap to get the cursor position in D1
0000366E                           891      
0000366E  3601                     892      move.w  D1,D3           Move the current cursor position to D3 for later
00003670                           893      
00003670                           894      * Move cursor to draw shop info
00003670  323C 1801                895      move.w  #CSR_POS_SHOP_S,D1           
00003674  4E4F                     896      trap    #15             Set the cursor position with trap command 11
00003676  4241                     897      clr     D1              Clear D1 of the cursor position
00003678                           898      
00003678  43F9 00005485            899      lea     shop_stock_msg,A1   Load the hud message
0000367E  103C 000E                900      move.b  #14,D0          Move literal 14 for display message trap command
00003682  4E4F                     901      trap    #15             Display the loaded message
00003684                           902      
00003684                           903      
00003684                           904      * Display the shop's potions
00003684  103C 000B                905      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
00003688  323C 1801                906      move.w  #CSR_POS_SHOP_S,D1         
0000368C  5241                     907      add.w   #1,D1  
0000368E  4E4F                     908      trap    #15             Set the cursor position with trap command 11
00003690  4241                     909      clr     D1              Clear D1 of the cursor position
00003692                           910      
00003692  43F9 00005249            911      lea     potions_msg,A1   Load the hud message
00003698  103C 000E                912      move.b  #14,D0          Move literal 14 for display message trap command
0000369C  4E4F                     913      trap    #15             Display the loaded message
0000369E                           914      
0000369E  544D                     915      add.w   #S_POTIONS,A5
000036A0  49D5                     916      lea     (A5),A4
000036A2  6100 FF24                917      bsr     draw_item_number
000036A6                           918      
000036A6                           919      * Display the shop's keys
000036A6  103C 000B                920      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
000036AA  323C 1801                921      move.w  #CSR_POS_SHOP_S,D1         
000036AE  5441                     922      add.w   #2,D1  
000036B0  4E4F                     923      trap    #15             Set the cursor position with trap command 11
000036B2  4241                     924      clr     D1              Clear D1 of the cursor position
000036B4                           925      
000036B4  43F9 00005242            926      lea     key_msg,A1      Load the hud message
000036BA  103C 000E                927      move.b  #14,D0          Move literal 14 for display message trap command
000036BE  4E4F                     928      trap    #15             Display the loaded message
000036C0                           929      
000036C0  524D                     930      add.w   #1,A5
000036C2  49D5                     931      lea     (A5),A4
000036C4  6100 FF02                932      bsr     draw_item_number
000036C8                           933      
000036C8                           934      * Display the shop's torches
000036C8  103C 000B                935      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
000036CC  323C 1801                936      move.w  #CSR_POS_SHOP_S,D1         
000036D0  5641                     937      add.w   #3,D1  
000036D2  4E4F                     938      trap    #15             Set the cursor position with trap command 11
000036D4  4241                     939      clr     D1              Clear D1 of the cursor position
000036D6                           940      
000036D6  43F9 00005253            941      lea     torches_msg,A1  Load the torches message
000036DC  103C 000E                942      move.b  #14,D0          Move literal 14 for display message trap command
000036E0  4E4F                     943      trap    #15             Display the loaded message
000036E2                           944      
000036E2  524D                     945      add.w   #1,A5
000036E4  49D5                     946      lea     (A5),A4
000036E6  6100 FEE0                947      bsr     draw_item_number
000036EA                           948      
000036EA                           949      * Display the shop's damage upgrades
000036EA  103C 000B                950      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
000036EE  323C 1801                951      move.w  #CSR_POS_SHOP_S,D1         
000036F2  5841                     952      add.w   #4,D1  
000036F4  4E4F                     953      trap    #15             Set the cursor position with trap command 11
000036F6  4241                     954      clr     D1              Clear D1 of the cursor position
000036F8                           955      
000036F8  43F9 0000525C            956      lea     damage_up_msg,A1 Load the damage upgrades message
000036FE  103C 000E                957      move.b  #14,D0           Move literal 14 for display message trap command
00003702  4E4F                     958      trap    #15              Display the loaded message
00003704                           959      
00003704  524D                     960      add.w   #1,A5               Increment A5 to get to the damage upgrades
00003706  49D5                     961      lea     (A5),A4             Load the memory address in A5 to A4
00003708  6100 FEBE                962      bsr     draw_item_number    Draw the number of items
0000370C  5B4D                     963      sub.w   #S_DAMAGE_IN,A5     Bring the pointer back to the root of the shop
0000370E                           964      
0000370E                           965      * Display the inventory
0000370E  103C 000B                966      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
00003712  323C 3401                967      move.w  #CSR_POS_SHOP_P,D1       
00003716  4E4F                     968      trap    #15             Set the cursor position with trap command 11
00003718  4241                     969      clr     D1              Clear D1 of the cursor position
0000371A                           970      
0000371A  43F9 0000522F            971      lea     inventory_msg,A1   Load the hud message
00003720  103C 000E                972      move.b  #14,D0          Move literal 14 for display message trap command
00003724  4E4F                     973      trap    #15             Display the loaded message
00003726                           974      
00003726                           975      * Display the player gold
00003726  103C 000B                976      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
0000372A  323C 3401                977      move.w  #CSR_POS_SHOP_P,D1         
0000372E  5241                     978      add.w   #1,D1  
00003730  4E4F                     979      trap    #15             Set the cursor position with trap command 11
00003732  4241                     980      clr     D1              Clear D1 of the cursor position
00003734                           981      
00003734  43F9 0000523A            982      lea     gold_msg,A1   Load the hud message
0000373A  103C 000E                983      move.b  #14,D0          Move literal 14 for display message trap command
0000373E  4E4F                     984      trap    #15             Display the loaded message
00003740                           985      
00003740  49F8 5FF8                986      lea     PLA_GOLD,A4
00003744  6100 FE82                987      bsr     draw_item_number
00003748                           988      
00003748                           989      * Display the player potions
00003748  103C 000B                990      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
0000374C  323C 3401                991      move.w  #CSR_POS_SHOP_P,D1         
00003750  5441                     992      add.w   #2,D1  
00003752  4E4F                     993      trap    #15             Set the cursor position with trap command 11
00003754  4241                     994      clr     D1              Clear D1 of the cursor position
00003756                           995      
00003756  43F9 00005249            996      lea     potions_msg,A1   Load the hud message
0000375C  103C 000E                997      move.b  #14,D0          Move literal 14 for display message trap command
00003760  4E4F                     998      trap    #15             Display the loaded message
00003762                           999      
00003762  49F8 5FF9               1000      lea     PLA_POTIONS,A4
00003766  6100 FE60               1001      bsr     draw_item_number
0000376A                          1002      
0000376A                          1003      * Display the player keys
0000376A  103C 000B               1004      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
0000376E  323C 3401               1005      move.w  #CSR_POS_SHOP_P,D1         
00003772  5641                    1006      add.w   #3,D1  
00003774  4E4F                    1007      trap    #15             Set the cursor position with trap command 11
00003776  4241                    1008      clr     D1              Clear D1 of the cursor position
00003778                          1009      
00003778  43F9 00005242           1010      lea     key_msg,A1   Load the hud message
0000377E  103C 000E               1011      move.b  #14,D0          Move literal 14 for display message trap command
00003782  4E4F                    1012      trap    #15             Display the loaded message
00003784                          1013      
00003784  49F8 5FFA               1014      lea     PLA_KEYS,A4
00003788  6100 FE3E               1015      bsr     draw_item_number
0000378C                          1016      
0000378C                          1017      * Display the torch life
0000378C  103C 000B               1018      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
00003790  323C 3401               1019      move.w  #CSR_POS_SHOP_P,D1
00003794  5A41                    1020      add.w   #5,D1       
00003796  4E4F                    1021      trap    #15             Set the cursor position with trap command 11
00003798  4241                    1022      clr     D1              Clear D1 of the cursor position
0000379A                          1023      
0000379A  43F9 00005215           1024      lea     torch_msg,A1   Load the hud message
000037A0  103C 000E               1025      move.b  #14,D0          Move literal 14 for display message trap command
000037A4  4E4F                    1026      trap    #15             Display the loaded message
000037A6                          1027      
000037A6  1238 5FFB               1028      move.b  PLA_TORCH,D1    Move the player torch life value to D1 to display
000037AA  103C 0003               1029      move.b  #3,D0           Move literal 3 for display number trap command
000037AE  4E4F                    1030      trap    #15             Display the number in D1
000037B0                          1031      
000037B0                          1032      * Display the player's damage level
000037B0  103C 000B               1033      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
000037B4  323C 3401               1034      move.w  #CSR_POS_SHOP_P,D1
000037B8  5C41                    1035      add.w   #6,D1       
000037BA  4E4F                    1036      trap    #15             Set the cursor position with trap command 11
000037BC  4241                    1037      clr     D1              Clear D1 of the cursor position
000037BE                          1038      
000037BE  43F9 00005222           1039      lea     damage_lvl_msg,A1   Load the damage level message
000037C4  103C 000E               1040      move.b  #14,D0              Move literal 14 for display message trap command
000037C8  4E4F                    1041      trap    #15                 Display the loaded message
000037CA                          1042      
000037CA  1238 5FF1               1043      move.b  PLA_DAMAGE,D1   Move the player's damage level to D1 to display
000037CE  103C 0003               1044      move.b  #3,D0           Move literal 3 for display number trap command
000037D2  4E4F                    1045      trap    #15             Display the number in D1
000037D4                          1046      
000037D4                          1047      * Move the cursor back to its previous position
000037D4  3203                    1048      move.w  D3,D1           Move the previous cursor position back to D1
000037D6  103C 000B               1049      move.b  #11,D0          Move the byte #11 to D0 for trap command 11          
000037DA  4E4F                    1050      trap    #15             Set the cursor position with trap command 11
000037DC                          1051      
000037DC  4241                    1052      clr     D1              Clear D1 for later use
000037DE                          1053      
000037DE  4E75                    1054      rts
000037E0                          1055  
000037E0                          1056  *-------------------------------------------------------
000037E0                          1057  *---Game Play (Quest Progress)--------------------------
000037E0                          1058  *------------------------------------------------------- 
000037E0                          1059  gameplay:
000037E0  6100 007A               1060      bsr     endl            Break to a new line
000037E4  0C38 0000 5FF3          1061      CMP.B   #0,GAME_STATE   Check which stage the game is in
000037EA  6700 F830               1062      BEQ     pick_role       Branch to the pick role subroutine
000037EE  0C38 0005 5FF3          1063      CMP.B   #5,GAME_STATE   Check which stage the game is in
000037F4  6700 007C               1064      BEQ     movement        Branch to the movement subroutine
000037F8  0C38 0006 5FF3          1065      CMP.B   #6,GAME_STATE   Check which stage the game is in
000037FE  6700 01DA               1066      BEQ     combat          branch to the combat subroutine
00003802  0C38 0007 5FF3          1067      CMP.B   #7,GAME_STATE   Check which stage the game is in
00003808  6700 03EC               1068      BEQ     shop            branch to the shop subroutine
0000380C  4E75                    1069      rts                     Return from 'gameplay' subroutine
0000380E                          1070  
0000380E                          1071  *-------------------------------------------------------
0000380E                          1072  *------------------Screen Decoration--------------------
0000380E                          1073  *-------------------------------------------------------
0000380E                          1074  decorate:
0000380E  163C 003C               1075      move.b  #60, D3
00003812  6100 0048               1076      bsr     endl
00003816                          1077  out:
00003816  43F9 00004778           1078      lea     loop_msg,A1
0000381C  103C 000E               1079      move.b  #14,D0
00003820  4E4F                    1080      trap    #15
00003822  5343                    1081      sub     #1,D3   decrement loop counter
00003824  66F0                    1082      bne     out     repeat until D0=0
00003826  6100 0034               1083      bsr     endl
0000382A  4E75                    1084      rts
0000382C                          1085      
0000382C                          1086  clear_screen: 
0000382C  103C 000B               1087      move.b  #11,D0      clear screen
00003830  323C FF00               1088      move.w  #$ff00,D1
00003834  4E4F                    1089      trap    #15
00003836  4E75                    1090      rts
00003838                          1091  *-------------------------------------------------------
00003838                          1092  *------------------------Replay-------------------------
00003838                          1093  *-------------------------------------------------------
00003838                          1094  replay:
00003838  43F9 00004868           1095      lea     replay_msg,A1   Load the Replay message
0000383E  103C 000E               1096      move.b  #14,D0          Move the number literal 14 to D0 for trap command
00003842  4E4F                    1097      trap    #15             Display the loaded message
00003844                          1098      
00003844  1A3C 0002               1099      move.b  #2,D5           Move the number of input options to D5
00003848  6100 F8D4               1100      bsr     input           Take user input
0000384C  1401                    1101      move.b  D1,D2           Move the input to D2 so it's not trampled by the clear screen
0000384E                          1102      
0000384E  61DC                    1103      bsr     clear_screen    Clear the screen
00003850                          1104      
00003850  B43C 0001               1105      cmp.b   #1,D2           Compare the user input against the two options
00003854  6700 D7AA               1106      beq     start           Restart if the user enters 1
00003858  6100 F7AC               1107      bsr     end             Quit if the user enters 2
0000385C                          1108  
0000385C                          1109  endl:
0000385C  48E7 8040               1110      movem.l D0/A1,-(A7)
00003860  303C 000E               1111      move    #14,D0
00003864  43F9 0000451A           1112      lea     crlf,A1
0000386A  4E4F                    1113      trap    #15
0000386C  4CDF 0201               1114      movem.l (A7)+,D0/A1
00003870  4E75                    1115      rts
00003872                          1116          
00003872                          1117  *-------------------------------------------------------
00003872                          1118  *----------------------Manage Movement------------------
00003872                          1119  *-------------------------------------------------------
00003872                          1120  movement:
00003872  43F9 00004D3C           1121      lea     movement_msg,A1 Load the movement message
00003878  103C 000E               1122      move.b  #14,D0          Move literal 14 for display message trap command
0000387C  4E4F                    1123      trap    #15             Display the loaded message
0000387E                          1124  
0000387E  7A05                    1125      move.l  #5,D5           Move the number 4 to D5 to tell the program how many options there are
00003880                          1126      
00003880  6100 F89C               1127      bsr     input           branch to the input subroutine
00003884  6100 000C               1128      bsr     wall_collisions Branch to check wall collisions and movement
00003888                          1129      
00003888  B23C 0005               1130      CMP.B   #5,D1           Check the input against taking a potion
0000388C  6700 0550               1131      BEQ     take_potion     Branch to take a potion
00003890                          1132      
00003890  4E75                    1133      rts
00003892                          1134  
00003892                          1135  *-------------------------------------------------------
00003892                          1136  *-------------------Check Wall Collisions---------------
00003892                          1137  *-------------------------------------------------------
00003892                          1138  wall_collisions:
00003892                          1139      *Check collisions in the movement direction
00003892  B23C 0001               1140      CMP.B   #1,D1       Check the movement direction
00003896  6700 001C               1141      BEQ     move_north  Branch to Display the corridor type
0000389A                          1142      
0000389A  B23C 0002               1143      CMP.B   #2,D1       Check the movement direction
0000389E  6700 005A               1144      BEQ     move_south  Branch to Display the corridor type
000038A2                          1145      
000038A2  B23C 0003               1146      CMP.B   #3,D1       Check the movement direction
000038A6  6700 0098               1147      BEQ     move_west   Branch to Display the corridor type
000038AA                          1148      
000038AA  B23C 0004               1149      CMP.B   #4,D1       Check the movement direction
000038AE  6700 00D4               1150      BEQ     move_east   Branch to Display the corridor type
000038B2                          1151      
000038B2  4E75                    1152      rts
000038B4                          1153      
000038B4                          1154  move_north:
000038B4                          1155      *Check if the tile is any of the corridor types with a wall at the top
000038B4  0C16 0002               1156      CMP.B   #2,(A6)
000038B8  6700 010E               1157      BEQ     movement_blocked
000038BC  0C16 0003               1158      CMP.B   #3,(A6)
000038C0  6700 0106               1159      BEQ     movement_blocked
000038C4  0C16 0006               1160      CMP.B   #6,(A6)
000038C8  6700 00FE               1161      BEQ     movement_blocked
000038CC  0C16 0007               1162      CMP.B   #7,(A6)
000038D0  6700 00F6               1163      BEQ     movement_blocked
000038D4  0C16 000B               1164      CMP.B   #11,(A6)
000038D8  6700 00EE               1165      BEQ     movement_blocked
000038DC  0C16 000C               1166      CMP.B   #12,(A6)
000038E0  6700 00E6               1167      BEQ     movement_blocked
000038E4  0C16 000D               1168      CMP.B   #13,(A6)
000038E8  6700 00DE               1169      BEQ     movement_blocked
000038EC                          1170      
000038EC  31CE 5FF6               1171      move.w  A6,PLA_P_POS        Move the player's previous location to a memory address for storage
000038F0  9CFC 0010               1172      sub     #16,A6              Move the player north
000038F4                          1173      
000038F4  6100 051A               1174      bsr     decrement_torch     Remove one from the player's torch life
000038F8                          1175      
000038F8  4E75                    1176      rts
000038FA                          1177      
000038FA                          1178  move_south:
000038FA                          1179      *Check if the tile is any of the corridor types with a wall at the bottom
000038FA  0C16 0002               1180      CMP.B   #2,(A6)
000038FE  6700 00C8               1181      BEQ     movement_blocked
00003902  0C16 0004               1182      CMP.B   #4,(A6)
00003906  6700 00C0               1183      BEQ     movement_blocked
0000390A  0C16 0005               1184      CMP.B   #5,(A6)
0000390E  6700 00B8               1185      BEQ     movement_blocked
00003912  0C16 0009               1186      CMP.B   #9,(A6)
00003916  6700 00B0               1187      BEQ     movement_blocked
0000391A  0C16 000B               1188      CMP.B   #11,(A6)
0000391E  6700 00A8               1189      BEQ     movement_blocked
00003922  0C16 000D               1190      CMP.B   #13,(A6)
00003926  6700 00A0               1191      BEQ     movement_blocked
0000392A  0C16 000E               1192      CMP.B   #14,(A6)
0000392E  6700 0098               1193      BEQ     movement_blocked
00003932                          1194      
00003932  31CE 5FF6               1195      move.w  A6,PLA_P_POS        Move the player's previous location to a memory address for storage
00003936  DCFC 0010               1196      add     #16,A6              Move the player south
0000393A                          1197      
0000393A  6100 04D4               1198      bsr     decrement_torch     Remove one from the player's torch life
0000393E                          1199      
0000393E  4E75                    1200      rts
00003940                          1201  
00003940                          1202  move_west:
00003940                          1203      *Check if the tile is any of the corridor types with a wall to the left
00003940  0C16 0001               1204      CMP.B   #1,(A6)
00003944  6700 0082               1205      BEQ     movement_blocked
00003948  0C16 0003               1206      CMP.B   #3,(A6)
0000394C  6700 007A               1207      BEQ     movement_blocked
00003950  0C16 0004               1208      CMP.B   #4,(A6)
00003954  6700 0072               1209      BEQ     movement_blocked
00003958  0C16 0008               1210      CMP.B   #8,(A6)
0000395C  6700 006A               1211      BEQ     movement_blocked
00003960  0C16 000B               1212      CMP.B   #11,(A6)
00003964  6700 0062               1213      BEQ     movement_blocked
00003968  0C16 000C               1214      CMP.B   #12,(A6)
0000396C  6700 005A               1215      BEQ     movement_blocked
00003970  0C16 000E               1216      CMP.B   #14,(A6)
00003974  6700 0052               1217      BEQ     movement_blocked
00003978                          1218      
00003978  31CE 5FF6               1219      move.w  A6,PLA_P_POS        Move the player's previous location to a memory address for storage
0000397C  534E                    1220      sub     #1,A6               Move the player west
0000397E                          1221      
0000397E  6100 0490               1222      bsr     decrement_torch     Remove one from the player's torch life
00003982                          1223      
00003982  4E75                    1224      rts
00003984                          1225      
00003984                          1226  move_east:
00003984                          1227      *Check if the tile is any of the corridor types with a wall to the right
00003984  0C16 0001               1228      CMP.B   #1,(A6)
00003988  6700 003E               1229      BEQ     movement_blocked
0000398C  0C16 0005               1230      CMP.B   #5,(A6)
00003990  6700 0036               1231      BEQ     movement_blocked
00003994  0C16 0006               1232      CMP.B   #6,(A6)
00003998  6700 002E               1233      BEQ     movement_blocked
0000399C  0C16 000A               1234      CMP.B   #10,(A6)
000039A0  6700 0026               1235      BEQ     movement_blocked
000039A4  0C16 000C               1236      CMP.B   #12,(A6)
000039A8  6700 001E               1237      BEQ     movement_blocked
000039AC  0C16 000D               1238      CMP.B   #13,(A6)
000039B0  6700 0016               1239      BEQ     movement_blocked
000039B4  0C16 000E               1240      CMP.B   #14,(A6)
000039B8  6700 000E               1241      BEQ     movement_blocked
000039BC                          1242      
000039BC  31CE 5FF6               1243      move.w  A6,PLA_P_POS        Move the player's previous location to a memory address for storage
000039C0  524E                    1244      add     #1,A6               Move the player east
000039C2                          1245      
000039C2  6100 044C               1246      bsr     decrement_torch     Remove one from the player's torch life
000039C6                          1247      
000039C6  4E75                    1248      rts
000039C8                          1249  
000039C8                          1250  movement_blocked:
000039C8  43F9 00004DCE           1251      lea     movement_blocked_msg,A1 Load the message
000039CE  103C 000E               1252      move.b  #14,D0                  Move the trap command to display a message
000039D2  4E4F                    1253      trap    #15                     Display the movement blocked message
000039D4  6100 03D4               1254      bsr     press_continue          Pause the game until a key is pressed
000039D8                          1255      
000039D8  4E75                    1256      rts                             Return from the subroutine
000039DA                          1257      
000039DA                          1258  *-------------------------------------------------------
000039DA                          1259  *---------------------Manage Combat---------------------
000039DA                          1260  *-------------------------------------------------------
000039DA                          1261  combat:
000039DA  6100 FE80               1262      bsr endl                Break to a new line
000039DE                          1263  
000039DE  43F9 00004E5F           1264      lea     combat_msg,A1   Load the combat message
000039E4  103C 000E               1265      move.b  #14,D0          Move literal 14 for display message trap command
000039E8  4E4F                    1266      trap    #15             Display the loaded message
000039EA                          1267  
000039EA  7A05                    1268      move.l  #5,D5           Move the number 4 to D5 to tell the program how many options there are
000039EC  6100 F730               1269      bsr     input           branch to the input subroutine
000039F0  1801                    1270      move.b  D1,D4           Move the input to D4 for later use
000039F2                          1271      
000039F2  B23C 0001               1272      CMP.B   #1,D1           Compare input with number literal 1
000039F6  6700 0024               1273      BEQ     block_counter   Branch to block/counter subroutine
000039FA  B23C 0002               1274      CMP.B   #2,D1           Compare input with number literal 2
000039FE  6700 0036               1275      BEQ     cast_magic      Branch to cast magic subroutine
00003A02  B23C 0003               1276      CMP.B   #3,D1           Compare input with number literal 3
00003A06  6700 0048               1277      BEQ     melee_attack    Branch to melee subroutine
00003A0A  B23C 0004               1278      CMP.B   #4,D1           Compare input with number literal 4
00003A0E  6700 005A               1279      BEQ     try_run         Branch to try run subroutine
00003A12  B23C 0005               1280      CMP.B   #5,D1           Compare input with number literal 5
00003A16  6700 03C6               1281      BEQ     take_potion     Branch to take potion subroutine
00003A1A                          1282      
00003A1A  4E75                    1283      rts
00003A1C                          1284      
00003A1C                          1285  block_counter:
00003A1C  6100 03A4               1286      bsr     random_number       Get a random number 1-100
00003A20                          1287      
00003A20  B47C 0021               1288      CMP.W   #33,D2              Compare random with #33
00003A24  6F00 008E               1289      BLE     both_block          Enemy tries to block - attack failed
00003A28  B47C 0042               1290      CMP.W   #66,D2              Compare random with #66
00003A2C  6F00 0118               1291      BLE     hit_by_magic        Enemy casts magic - player takes damage      
00003A30  6E00 00E4               1292      BGT     hit_against_melee   Enemy tried to lunge - enemy takes damage
00003A34                          1293      
00003A34  4E75                    1294      rts                         Return from subroutine
00003A36                          1295      
00003A36                          1296  cast_magic:
00003A36  6100 038A               1297      bsr     random_number       Get a random number 1-100
00003A3A                          1298  
00003A3A  B47C 0021               1299      CMP.W   #33,D2              Compare random with #33
00003A3E  6F00 00AA               1300      BLE     hit_against_block    Enemy blocks - enemy takes damage
00003A42  B47C 0042               1301      CMP.W   #66,D2              Compare random with #66
00003A46  6F00 007E               1302      BLE     both_cast_magic     Enemy casts magic - attack fails     
00003A4A  6E00 0114               1303      BGT     hit_by_melee        Enemy lunges forward - player takes damage
00003A4E                          1304      
00003A4E  4E75                    1305      rts                         Return from subroutine
00003A50                          1306  
00003A50                          1307  melee_attack:
00003A50  6100 0370               1308      bsr     random_number       Get a random number 1-100
00003A54                          1309  
00003A54  B47C 0021               1310      CMP.W   #33,D2              Compare random with #33
00003A58  6F00 00D2               1311      BLE     hit_by_counter      Enemy blocks and counters - player takes damage
00003A5C  B47C 0042               1312      CMP.W   #66,D2              Compare random with #66
00003A60  6F00 009E               1313      BLE     hit_against_magic   Enemy casts magic - player takes damage     
00003A64  6E00 0072               1314      BGT     both_melee          Enemy lunges forward - attack fails
00003A68                          1315      
00003A68  4E75                    1316      rts                         Return from subroutine
00003A6A                          1317  
00003A6A                          1318  try_run:
00003A6A  6100 0356               1319      bsr     random_number       Get a random number
00003A6E                          1320      
00003A6E  B47C 0028               1321      CMP.W   #40,D2              Compare the random number to 40
00003A72  6D00 0006               1322      BLT     escape_attack       If the random number is less than 40 the player escapes
00003A76  6C00 0020               1323      BGE     fail_escape         If the random number is more than 40 the player gets damaged
00003A7A                          1324      
00003A7A                          1325  escape_attack:
00003A7A  3638 5FF6               1326      move.w  PLA_P_POS,D3    Move the player's previous position to D3 to avoid treating it as a negative number
00003A7E  2C43                    1327      move.l  D3,A6           Move the player to their position before entering the battle
00003A80  11FC 0005 5FF3          1328      move.b  #5,GAME_STATE   Switch game state
00003A86                          1329      
00003A86  43F9 00004EC1           1330      lea     escape_msg,A1   Load escape message
00003A8C  103C 000E               1331      move.b  #14,D0          Move literal for trap command
00003A90  4E4F                    1332      trap    #15             Trap 15 to display messgae
00003A92                          1333      
00003A92  6100 0316               1334      bsr     press_continue  Pause until the player presses to continue
00003A96                          1335      
00003A96  4E75                    1336      rts                     Return from subroutine
00003A98                          1337      
00003A98                          1338  fail_escape:
00003A98  43F9 00004EDC           1339      lea     fail_escape_msg,A1  Load fail escape message
00003A9E  103C 000E               1340      move.b  #14,D0              Move literal for trap command
00003AA2  4E4F                    1341      trap    #15                 Trap 15 to display message
00003AA4                          1342      
00003AA4  524D                    1343      add.w   #DAMAGE,A5           Move the enemy pointer to its damage value
00003AA6  1A15                    1344      move.b  (A5),D5             Store the damage value in D5
00003AA8  534D                    1345      sub.w   #DAMAGE,A5           Move the enemy pointer back to the enemy health/root
00003AAA  9B38 5FF0               1346      sub.b   D5,PLAYER           Remove the enemy's damage from the player's health
00003AAE                          1347      
00003AAE  6100 02FA               1348      bsr     press_continue      Pause until the player presses to continue
00003AB2  4E75                    1349      rts
00003AB4                          1350      
00003AB4                          1351  both_block:
00003AB4  103C 000E               1352      move.b  #14,D0
00003AB8  43F9 00004F17           1353      lea     both_block_msg,A1
00003ABE  4E4F                    1354      trap    #15
00003AC0                          1355      
00003AC0  6100 02E8               1356      bsr     press_continue
00003AC4  4E75                    1357      rts
00003AC6                          1358      
00003AC6                          1359  both_cast_magic:
00003AC6  103C 000E               1360      move.b  #14,D0
00003ACA  43F9 00004F3C           1361      lea     both_cast_magic_msg,A1
00003AD0  4E4F                    1362      trap    #15
00003AD2                          1363      
00003AD2  6100 02D6               1364      bsr     press_continue
00003AD6  4E75                    1365      rts
00003AD8                          1366  
00003AD8                          1367  both_melee:
00003AD8  103C 000E               1368      move.b  #14,D0
00003ADC  43F9 00004F91           1369      lea     both_melee_msg,A1
00003AE2  4E4F                    1370      trap    #15  
00003AE4                          1371      
00003AE4  6100 02C4               1372      bsr     press_continue
00003AE8  4E75                    1373      rts
00003AEA                          1374  
00003AEA                          1375  hit_against_block:
00003AEA  103C 000E               1376      move.b  #14,D0
00003AEE  43F9 00004FDA           1377      lea     hit_against_block_msg,A1
00003AF4  4E4F                    1378      trap    #15  
00003AF6                          1379      
00003AF6  6100 0082               1380      bsr     damage_enemy    Deal damage to the enemy
00003AFA                          1381      
00003AFA  6100 02AE               1382      bsr     press_continue
00003AFE  4E75                    1383      rts
00003B00                          1384  
00003B00                          1385  hit_against_magic:
00003B00  103C 000E               1386      move.b  #14,D0
00003B04  43F9 00005022           1387      lea     hit_against_magic_msg,A1
00003B0A  4E4F                    1388      trap    #15
00003B0C                          1389      
00003B0C  6100 006C               1390      bsr     damage_enemy    Deal damage to the enemy
00003B10                          1391      
00003B10  6100 0298               1392      bsr     press_continue
00003B14  4E75                    1393      rts
00003B16                          1394  
00003B16                          1395  hit_against_melee:
00003B16  103C 000E               1396      move.b  #14,D0
00003B1A  43F9 00005086           1397      lea     hit_against_melee_msg,A1
00003B20  4E4F                    1398      trap    #15
00003B22                          1399      
00003B22  6100 0056               1400      bsr     damage_enemy    Deal damage to the enemy
00003B26                          1401      
00003B26  6100 0282               1402      bsr     press_continue
00003B2A  4E75                    1403      rts
00003B2C                          1404  
00003B2C                          1405  hit_by_counter:
00003B2C  103C 000E               1406      move.b  #14,D0
00003B30  43F9 000050DC           1407      lea     hit_by_counter_msg,A1
00003B36  4E4F                    1408      trap    #15  
00003B38                          1409      
00003B38  143C 0001               1410      move.b  #1,D2               Move the enemy attack type to D2
00003B3C  6100 0076               1411      bsr     damage_player       Deal damage to the player
00003B40                          1412      
00003B40  6100 0268               1413      bsr     press_continue
00003B44  4E75                    1414      rts
00003B46                          1415  
00003B46                          1416  hit_by_magic:
00003B46  103C 000E               1417      move.b  #14,D0
00003B4A  43F9 0000513F           1418      lea     hit_by_magic_msg,A1
00003B50  4E4F                    1419      trap    #15  
00003B52                          1420      
00003B52  143C 0002               1421      move.b  #2,D2               Move the enemy attack type to D2
00003B56  6100 005C               1422      bsr     damage_player       Deal damage to the player
00003B5A                          1423      
00003B5A  6100 024E               1424      bsr     press_continue
00003B5E  4E75                    1425      rts
00003B60                          1426  
00003B60                          1427  hit_by_melee:
00003B60  103C 000E               1428      move.b  #14,D0
00003B64  43F9 000051AF           1429      lea     hit_by_melee_msg,A1
00003B6A  4E4F                    1430      trap    #15
00003B6C                          1431      
00003B6C  143C 0003               1432      move.b  #3,D2               Move the enemy attack type to D2
00003B70  6100 0042               1433      bsr     damage_player       Deal damage to the player
00003B74                          1434      
00003B74  6100 0234               1435      bsr     press_continue
00003B78  4E75                    1436      rts
00003B7A                          1437      
00003B7A                          1438  damage_enemy:
00003B7A  1A38 5FF1               1439      move.b  PLA_DAMAGE,D5       Store the player damage value in D5
00003B7E  B838 5FF2               1440      CMP.B   PLA_CLASS,D4        Check if the player attack type matches the player class
00003B82  6700 0006               1441      BEQ     double_damage_enemy Deal double damage to the enemy if attack type matches the class
00003B86  9B15                    1442      sub.b   D5,(A5)             Remove the player's damage from the enemy's health
00003B88  4E75                    1443      rts                         Return from subroutine
00003B8A                          1444      
00003B8A                          1445  double_damage_enemy:
00003B8A  E34D                    1446      LSL     #1,D5               Double the player damage
00003B8C  9B15                    1447      sub.b   D5,(A5)             Remove double the player's damage from the enemy's health
00003B8E                          1448      
00003B8E  6100 FCCC               1449      bsr     endl                Break to new line
00003B92  223C 00F000F0           1450      move.l  #PURPLE,D1          Load colour purple
00003B98  6100 0284               1451      bsr     change_font_colour  Change the font colour
00003B9C                          1452      
00003B9C  43F9 00005543           1453      lea     double_damage_msg,A1    Load the double damage message
00003BA2  103C 000E               1454      move.b  #14,D0              Move number literal 14 to D0 for trap command
00003BA6  4E4F                    1455      trap    #15
00003BA8                          1456      
00003BA8  223C 00FFFFFF           1457      move.l  #WHITE,D1           Load colour white
00003BAE  6100 026E               1458      bsr     change_font_colour  Change the font colour
00003BB2                          1459      
00003BB2  4E75                    1460      rts                         Return from subroutine
00003BB4                          1461  
00003BB4                          1462  damage_player:
00003BB4  524D                    1463      add.w   #DAMAGE,A5          Move the enemy pointer to its damage value
00003BB6  1A15                    1464      move.b  (A5),D5             Store the damage value in D5
00003BB8                          1465      
00003BB8  534D                    1466      sub.w   #DAMAGE,A5          Move the enemy pointer back to the enemy health/root
00003BBA  544D                    1467      add.w   #CLASS,A5           Move the enemy pointer to its class value
00003BBC                          1468      
00003BBC  B415                    1469      CMP.B   (A5),D2             Compare the enemy attack type to its class
00003BBE  554D                    1470      sub.w   #CLASS,A5           Move the enemy pointer back to the enemy health/root
00003BC0  6700 0008               1471      BEQ     double_damage_player    Deal double damage to the player
00003BC4                          1472      
00003BC4  9B38 5FF0               1473      sub.b   D5,PLAYER           Remove the enemy's damage from the player's health
00003BC8                          1474  
00003BC8  4E75                    1475      rts                         Return from subroutine
00003BCA                          1476      
00003BCA                          1477  double_damage_player:
00003BCA  E34D                    1478      LSL     #1,D5               Double the enemy damage
00003BCC  9B38 5FF0               1479      sub.b   D5,PLAYER           Remove double the enemy's damage from the player's health
00003BD0                          1480      
00003BD0  6100 FC8A               1481      bsr     endl                Break to new line
00003BD4  223C 000000FF           1482      move.l  #RED,D1          Load colour purple
00003BDA  6100 0242               1483      bsr     change_font_colour  Change the font colour
00003BDE                          1484      
00003BDE  43F9 00005543           1485      lea     double_damage_msg,A1    Load the double damage message
00003BE4  103C 000E               1486      move.b  #14,D0              Move number literal 14 to D0 for trap command
00003BE8  4E4F                    1487      trap    #15
00003BEA                          1488      
00003BEA  223C 00FFFFFF           1489      move.l  #WHITE,D1           Load colour white
00003BF0  6100 022C               1490      bsr     change_font_colour  Change the font colour
00003BF4                          1491      
00003BF4  4E75                    1492      rts                         Return from subroutine
00003BF6                          1493  
00003BF6                          1494  *-------------------------------------------------------
00003BF6                          1495  *----------------------Shop State-----------------------
00003BF6                          1496  *-------------------------------------------------------
00003BF6                          1497  shop:
00003BF6  43F9 000053DD           1498      lea     shop_msg,A1     Load the shop message
00003BFC  103C 000E               1499      move.b  #14,D0          Move the number literal 14 to D0 for trap command
00003C00  4E4F                    1500      trap    #15             Display the loaded message
00003C02                          1501  
00003C02  7A05                    1502      move.l  #5,D5           Move the number 4 to D5 to tell the program how many options there are
00003C04  6100 F518               1503      bsr     input           branch to the input subroutine
00003C08                          1504      
00003C08  B23C 0001               1505      CMP.B   #1,D1           Compare input with number literal 1
00003C0C  6700 0024               1506      BEQ     buy_potion      Branch to buy potion subroutine
00003C10  B23C 0002               1507      CMP.B   #2,D1           Compare input with number literal 2
00003C14  6700 0052               1508      BEQ     buy_key         Branch to buy key subroutine
00003C18  B23C 0003               1509      CMP.B   #3,D1           Compare input with number literal 3
00003C1C  6700 0082               1510      BEQ     buy_torch       Branch to buy torch subroutine
00003C20  B23C 0004               1511      CMP.B   #4,D1           Compare input with number literal 4
00003C24  6700 00B4               1512      BEQ     upgrade_dmg     Branch to buy damage upgrade subroutine
00003C28  B23C 0005               1513      CMP.B   #5,D1           Compare input with number literal 5
00003C2C  6700 00E4               1514      BEQ     leave_shop      Branch to leave shop subroutine
00003C30                          1515  
00003C30  4E75                    1516      rts                     Return from subroutine
00003C32                          1517      
00003C32                          1518  buy_potion:
00003C32  0C38 0005 5FF8          1519      CMP.B   #POTION_PRICE,PLA_GOLD  Check if the player has money for a potion
00003C38  6D00 00FA               1520      BLT     no_money                If not enough money branch to no money subroutine
00003C3C                          1521      
00003C3C  544D                    1522      add.w   #S_POTIONS,A5           Move the shop pointer to the potions
00003C3E  0C15 0000               1523      CMP.B   #0,(A5)                 Check that the shop still has potions left
00003C42  6F00 0106               1524      BLE     no_shop_potions         If no potions left branch to no shop potions subroutine
00003C46                          1525      
00003C46  5B38 5FF8               1526      sub.b   #POTION_PRICE,PLA_GOLD  Remove the potion price from the player's gold
00003C4A  5315                    1527      sub.b   #1,(A5)                 Remove one potion from the shop
00003C4C  5238 5FF9               1528      add.b   #1,PLA_POTIONS          Add one potion to the player's inventory
00003C50                          1529      
00003C50  554D                    1530      sub.w   #S_POTIONS,A5           Move the shop pointer back to root
00003C52                          1531      
00003C52  6100 FC08               1532      bsr     endl                    Break to new line
00003C56                          1533      
00003C56  43F9 0000546F           1534      lea     buy_item_msg,A1         Load the buy item message into A1
00003C5C  103C 000E               1535      move.b  #14,D0                  Move the number literal 14 to D0 for trap command
00003C60  4E4F                    1536      trap    #15                     Display the loaded message
00003C62                          1537      
00003C62  6100 0146               1538      bsr     press_continue          Pause for user input
00003C66                          1539      
00003C66  4E75                    1540      rts                             Return from subroutine
00003C68                          1541      
00003C68                          1542  buy_key:
00003C68  0C38 000F 5FF8          1543      CMP.B   #KEY_PRICE,PLA_GOLD     Check if the player has money for a key
00003C6E  6D00 00C4               1544      BLT     no_money                If not enough money branch to no money subroutine
00003C72                          1545      
00003C72  564D                    1546      add.w   #S_KEYS,A5              Move the shop pointer to the keys
00003C74  0C15 0000               1547      CMP.B   #0,(A5)                 Check that the shop still has keys left
00003C78  6F00 00E8               1548      BLE     no_shop_keys            If no keys left branch to no shop keys subroutine
00003C7C                          1549      
00003C7C  0438 000F 5FF8          1550      sub.b   #KEY_PRICE,PLA_GOLD     Remove the key price from the player's gold
00003C82  5315                    1551      sub.b   #1,(A5)                 Remove one key from the shop
00003C84  5238 5FFA               1552      add.b   #1,PLA_KEYS             Add one key to the player's inventory
00003C88                          1553      
00003C88  574D                    1554      sub.w   #S_KEYS,A5              Move the shop pointer back to root
00003C8A                          1555      
00003C8A  6100 FBD0               1556      bsr     endl                    Break to new line
00003C8E                          1557      
00003C8E  43F9 0000546F           1558      lea     buy_item_msg,A1         Load the buy item message into A1
00003C94  103C 000E               1559      move.b  #14,D0                  Move the number literal 14 to D0 for trap command
00003C98  4E4F                    1560      trap    #15                     Display the loaded message
00003C9A                          1561      
00003C9A  6100 010E               1562      bsr     press_continue          Pause for user input
00003C9E                          1563      
00003C9E  4E75                    1564      rts                             Return from subroutine
00003CA0                          1565      
00003CA0                          1566  buy_torch:
00003CA0  0C38 000A 5FF8          1567      CMP.B   #TORCH_PRICE,PLA_GOLD   Check if the player has money for a torch
00003CA6  6D00 008C               1568      BLT     no_money                If not enough money branch to no money subroutine
00003CAA                          1569      
00003CAA  584D                    1570      add.w   #S_TORCHES,A5           Move the shop pointer to the torches
00003CAC  0C15 0000               1571      CMP.B   #0,(A5)                 Check that the shop still has torches left
00003CB0  6F00 00C8               1572      BLE     no_shop_torches         If no torches left branch to no shop torches subroutine
00003CB4                          1573      
00003CB4  0438 000A 5FF8          1574      sub.b   #TORCH_PRICE,PLA_GOLD   Remove the torch price from the player's gold
00003CBA  5315                    1575      sub.b   #1,(A5)                 Remove one torch from the shop
00003CBC  0638 000F 5FFB          1576      add.b   #LIFE_PER_TORCH,PLA_TORCH           Add ten to the player's torches life
00003CC2                          1577      
00003CC2  594D                    1578      sub.w   #S_TORCHES,A5           Move the shop pointer back to root
00003CC4                          1579      
00003CC4  6100 FB96               1580      bsr     endl                    Break to new line
00003CC8                          1581      
00003CC8  43F9 0000546F           1582      lea     buy_item_msg,A1         Load the buy item message into A1
00003CCE  103C 000E               1583      move.b  #14,D0                  Move the number literal 14 to D0 for trap command
00003CD2  4E4F                    1584      trap    #15                     Display the loaded message
00003CD4                          1585      
00003CD4  6100 00D4               1586      bsr     press_continue          Pause for user input
00003CD8                          1587      
00003CD8  4E75                    1588      rts                             Return from subroutine
00003CDA                          1589      
00003CDA                          1590  upgrade_dmg:
00003CDA  0C38 0014 5FF8          1591      CMP.B   #DAMAGE_UP_PRICE,PLA_GOLD   Check if the player has money for a damage upgrade
00003CE0  6D00 0052               1592      BLT     no_money                    If not enough money branch to no money subroutine
00003CE4                          1593      
00003CE4  5A4D                    1594      add.w   #S_DAMAGE_IN,A5         Move the shop pointer to the damage upgrades
00003CE6  0C15 0000               1595      CMP.B   #0,(A5)                 Check that the shop still has damage upgrades left
00003CEA  6F00 00A6               1596      BLE     no_shop_damage_up       If no damage upgrades left branch to no shop torches subroutine
00003CEE                          1597      
00003CEE  0438 0014 5FF8          1598      sub.b   #DAMAGE_UP_PRICE,PLA_GOLD   Remove the damage upgrade price from the player's gold
00003CF4  5315                    1599      sub.b   #1,(A5)                     Remove one damage upgrade from the shop
00003CF6  5238 5FF1               1600      add.b   #1,PLA_DAMAGE               Add one to the player's damage value
00003CFA                          1601      
00003CFA  5B4D                    1602      sub.w   #S_DAMAGE_IN,A5         Move the shop pointer back to root
00003CFC                          1603      
00003CFC  6100 FB5E               1604      bsr     endl                    Break to new line
00003D00                          1605          
00003D00  43F9 0000546F           1606      lea     buy_item_msg,A1         Load the buy item message into A1
00003D06  103C 000E               1607      move.b  #14,D0                  Move the number literal 14 to D0 for trap command
00003D0A  4E4F                    1608      trap    #15                     Display the loaded message
00003D0C                          1609      
00003D0C  6100 009C               1610      bsr     press_continue          Pause for user input
00003D10                          1611      
00003D10  4E75                    1612      rts                             Return from subroutine
00003D12                          1613      
00003D12                          1614  leave_shop:
00003D12  6100 FB48               1615      bsr     endl                Break to new line
00003D16                          1616  
00003D16  3638 5FF6               1617      move.w  PLA_P_POS,D3        Move the player's previous position to D3 to avoid treating it as a negative number
00003D1A  2C43                    1618      move.l  D3,A6               Move the player to their position before entering the shop
00003D1C  11FC 0005 5FF3          1619      move.b  #5,GAME_STATE       Switch game state to movement
00003D22                          1620      
00003D22  43F9 00005449           1621      lea     leave_shop_msg,A1   Load escape message
00003D28  103C 000E               1622      move.b  #14,D0              Move literal for trap command
00003D2C  4E4F                    1623      trap    #15                 Trap 15 to display messgae
00003D2E                          1624      
00003D2E  6100 007A               1625      bsr     press_continue      Pause until the player presses to continue
00003D32  4E75                    1626      rts                         Return from subroutine
00003D34                          1627      
00003D34                          1628  no_money:
00003D34  6100 FB26               1629      bsr     endl            New line
00003D38                          1630      
00003D38  43F9 0000549D           1631      lea     no_money_msg,A1 Load the no money message
00003D3E  103C 000E               1632      move.b  #14,D0          Move the number literal 14 to D0 for trap command
00003D42  4E4F                    1633      trap    #15             Display the loaded message
00003D44                          1634      
00003D44  6100 0064               1635      bsr     press_continue  Wait for player input
00003D48  4E75                    1636      rts                     Return from subroutine
00003D4A                          1637      
00003D4A                          1638  no_shop_potions:
00003D4A  6100 FB10               1639      bsr     endl            New line
00003D4E                          1640  
00003D4E  43F9 000054BD           1641      lea     no_item_msg,A1  Load the no money message
00003D54  103C 000E               1642      move.b  #14,D0          Move the number literal 14 to D0 for trap command
00003D58  4E4F                    1643      trap    #15             Display the loaded message
00003D5A  554D                    1644      sub.w   #S_POTIONS,A5   Move the shop pointer back to root
00003D5C                          1645      
00003D5C  6100 004C               1646      bsr     press_continue  Wait for player input
00003D60  4E75                    1647      rts                     Return from subroutine
00003D62                          1648      
00003D62                          1649  no_shop_keys:
00003D62  6100 FAF8               1650      bsr     endl            New line
00003D66                          1651  
00003D66  43F9 000054BD           1652      lea     no_item_msg,A1  Load the no money message
00003D6C  103C 000E               1653      move.b  #14,D0          Move the number literal 14 to D0 for trap command
00003D70  4E4F                    1654      trap    #15             Display the loaded message
00003D72  574D                    1655      sub.w   #S_KEYS,A5      Move the shop pointer back to root
00003D74                          1656      
00003D74  6100 0034               1657      bsr     press_continue  Wait for player input
00003D78  4E75                    1658      rts                     Return from subroutine
00003D7A                          1659      
00003D7A                          1660  no_shop_torches:
00003D7A  6100 FAE0               1661      bsr     endl            New line
00003D7E                          1662  
00003D7E  43F9 000054BD           1663      lea     no_item_msg,A1  Load the no money message
00003D84  103C 000E               1664      move.b  #14,D0          Move the number literal 14 to D0 for trap command
00003D88  4E4F                    1665      trap    #15             Display the loaded message
00003D8A  594D                    1666      sub.w   #S_TORCHES,A5   Move the shop pointer back to root
00003D8C                          1667      
00003D8C  6100 001C               1668      bsr     press_continue  Wait for player input
00003D90  4E75                    1669      rts                     Return from subroutine
00003D92                          1670  
00003D92                          1671  no_shop_damage_up:
00003D92  6100 FAC8               1672      bsr     endl            New line
00003D96                          1673  
00003D96  43F9 000054BD           1674      lea     no_item_msg,A1  Load the no money message
00003D9C  103C 000E               1675      move.b  #14,D0          Move the number literal 14 to D0 for trap command
00003DA0  4E4F                    1676      trap    #15             Display the loaded message
00003DA2  5B4D                    1677      sub.w   #S_DAMAGE_IN,A5 Move the shop pointer back to root
00003DA4                          1678      
00003DA4  6100 0004               1679      bsr     press_continue  Wait for player input
00003DA8  4E75                    1680      rts                     Return from subroutine
00003DAA                          1681  
00003DAA                          1682  *-------------------------------------------------------
00003DAA                          1683  *-------------------Misc Subroutines--------------------
00003DAA                          1684  *-------------------------------------------------------
00003DAA                          1685  press_continue:
00003DAA  6100 FAB0               1686      bsr     endl
00003DAE                          1687  
00003DAE  43F9 00004DE9           1688      lea     continue_msg,A1 Load message into A1
00003DB4  103C 000E               1689      move.b  #14,D0          Move the trap command to display a message
00003DB8  4E4F                    1690      trap    #15             display the "press any ket to continue" text
00003DBA                          1691      
00003DBA  103C 0004               1692      move.b  #4,D0           Move the trap command to take input
00003DBE  4E4F                    1693      trap    #15             take input to freeze the game
00003DC0  4E75                    1694      rts                     Return from the 'press continue' subroutine
00003DC2                          1695      
00003DC2                          1696  random_number:              *Psuedo random number generator, courtesy of Pdraig
00003DC2  103C 0008               1697      move.b  #8,D0
00003DC6  4E4F                    1698      trap    #15
00003DC8  C2BC 005FFFFF           1699      and.l   #$5FFFFF,d1     prevent overflow in divu
00003DCE  82FC 0064               1700      divu    #100,D1         time count / 100
00003DD2  4841                    1701      swap    D1              swap upper and lower words of D1 to put remainder in low word
00003DD4  5241                    1702      addq.w  #1,D1           d1.w contains number from 1 to 100
00003DD6  3401                    1703      move    D1,D2           d2 = d1
00003DD8  4281                    1704      clr.l   D1
00003DDA                          1705      
00003DDA  4E75                    1706      rts                     Returns from random generation subroutine
00003DDC                          1707      
00003DDC                          1708  return:   *Subroutine to branch to to break out of a subroutine when a condition is met
00003DDC  4E75                    1709      rts
00003DDE                          1710      
00003DDE                          1711  take_potion:
00003DDE  0C38 0000 5FF9          1712      CMP.B   #0,PLA_POTIONS      Check if the player has potions to drink
00003DE4  6F00 001A               1713      BLE     no_potions          If the potions are zero or below branch to no_potions
00003DE8                          1714      
00003DE8  5638 5FF0               1715      add.b   #3,PLAYER           Add 3 to the player's health
00003DEC  5338 5FF9               1716      sub.b   #1,PLA_POTIONS      Remove one potion
00003DF0                          1717      
00003DF0  43F9 00005357           1718      lea     take_potion_msg,A1  Load the take potion message
00003DF6  103C 000E               1719      move.b  #14,D0              Move the number literal 14 to D0 for trap command
00003DFA  4E4F                    1720      trap    #15                 Display the loaded message
00003DFC                          1721      
00003DFC  61AC                    1722      bsr     press_continue      Wait for player input
00003DFE                          1723      
00003DFE  4E75                    1724      rts                         Return from subroutine
00003E00                          1725  
00003E00                          1726  no_potions:
00003E00  43F9 00005391           1727      lea     no_potions_msg,A1   Load the no potions message
00003E06  103C 000E               1728      move.b  #14,D0              Move the number literal 14 to D0 for trap command
00003E0A  4E4F                    1729      trap    #15                 Display the loaded message
00003E0C                          1730      
00003E0C  619C                    1731      bsr     press_continue      Wait for player input
00003E0E                          1732      
00003E0E  4E75                    1733      rts                         Return from subroutine
00003E10                          1734      
00003E10                          1735  decrement_torch:
00003E10  0C38 0000 5FFB          1736      CMP.B   #0,PLA_TORCH    Compare the torch life to 0
00003E16  6FC4                    1737      BLE     return          If it's less than or equalt to zero, return
00003E18  5338 5FFB               1738      sub.b   #1,PLA_TORCH    Decrement by one if it's above zero
00003E1C  4E75                    1739      rts                     Return from subroutine
00003E1E                          1740      
00003E1E                          1741  change_font_colour:        * Changes the font colour to the colour loaded in D1
00003E1E  103C 0015               1742      move.b  #21,D0      Move #21 to D0 for trap command 21
00003E22  243C 01090000           1743      move.l  #FONT,D2    Move the font to D2
00003E28  4E4F                    1744      trap    #15         Set the colour
00003E2A  4281                    1745      clr.l   D1          Clear D1 for later use
00003E2C  4282                    1746      clr.l   D2          Clear D2 for later use
00003E2E  4E75                    1747      rts                 Return from subroutine
00003E30                          1748      
00003E30                          1749  *-------------------------------------------------------
00003E30                          1750  *----------------------Draw loop------------------------
00003E30                          1751  *-------------------------------------------------------
00003E30                          1752  draw_loop:
00003E30  45F9 00008080           1753      lea     MAP_START_POINT,A2     Load starting memory location into A7
00003E36  1C3C 0000               1754      move.b  #0,D6           Data register used for rows
00003E3A  1E3C 0000               1755      move.b  #0,D7           Data register used for columns
00003E3E  7200                    1756      move.l  #0,D1           Clear the D1 data register
00003E40                          1757      
00003E40  6100 0004               1758      bsr     loop_rows       Loop for every row
00003E44  4E75                    1759      rts
00003E46                          1760      
00003E46                          1761  loop_rows:
00003E46  BC7C 000F               1762      CMP     #MAP_LENGTH,D6          Check the rows don't go out of bounds
00003E4A  6E90                    1763      BGT     return          If the rows are greater than 22 end the loop
00003E4C                          1764      
00003E4C  1E3C 0000               1765      move.b  #0,D7           Reset to column 0
00003E50  6100 000A               1766      bsr     loop_columns    Loop for every column
00003E54                          1767      
00003E54  5206                    1768      add.b   #1,D6           Add to the rows
00003E56                          1769      
00003E56  6100 FA04               1770      bsr     endl            Break to the next line
00003E5A  60EA                    1771      bra     loop_rows       Loop through the rows again
00003E5C                          1772      
00003E5C                          1773  loop_columns:
00003E5C  BE3C 000F               1774      CMP.B   #15,D7              Check the rows don't go out of bounds
00003E60  6E00 FF7A               1775      BGT     return              If the rows are greater than 22 end the loop
00003E64                          1776      
00003E64  6100 001C               1777      bsr     draw_tile           Draw the current tile
00003E68  6100 00C2               1778      bsr     check_for_loot_piles Draw the loot piles if there is one on the current tile
00003E6C  6100 013C               1779      bsr     check_for_player    Draw the player in the current tile if they're there
00003E70  6100 0180               1780      bsr     check_for_enemies   Draw an enemy in the current tile if they is one there
00003E74  6100 025E               1781      bsr     check_for_win_point Draw the win point in the current tile if it's there
00003E78  6100 01EE               1782      bsr     check_for_shops     Draw a shop in the current tile if there is one
00003E7C                          1783      
00003E7C  5207                    1784      add.b   #1,D7               Add to the column count
00003E7E  524A                    1785      add     #1,A2               Move to the next memory location
00003E80  60DA                    1786      bra     loop_columns        Loop the columns again
00003E82                          1787      
00003E82                          1788  *-------------------------------------------------------
00003E82                          1789  *----------------------Draw tile------------------------
00003E82                          1790  *-------------------------------------------------------
00003E82                          1791  *Draws the tile at the address in the address register A2
00003E82                          1792  draw_tile:
00003E82  0C12 00FF               1793      CMP.B   #255,(A2)           Check if the value is undifined
00003E86  6700 005E               1794      BEQ     draw_blocked_tile   Draw the blank tile
00003E8A                          1795      
00003E8A  0C12 0001               1796      CMP.B   #1,(A2)
00003E8E  6700 0064               1797      BEQ     draw_both_tile
00003E92  0C12 0003               1798      CMP.B   #3,(A2)
00003E96  6700 006A               1799      BEQ     draw_left_tile
00003E9A  0C12 0004               1800      CMP.B   #4,(A2)
00003E9E  6700 0062               1801      BEQ     draw_left_tile
00003EA2  0C12 0005               1802      CMP.B   #5,(A2)
00003EA6  6700 0068               1803      BEQ     draw_right_tile
00003EAA  0C12 0006               1804      CMP.B   #6,(A2)
00003EAE  6700 0060               1805      BEQ     draw_right_tile
00003EB2  0C12 0008               1806      CMP.B   #8,(A2)
00003EB6  6700 004A               1807      BEQ     draw_left_tile
00003EBA  0C12 000A               1808      CMP.B   #10,(A2)
00003EBE  6700 0050               1809      BEQ     draw_right_tile
00003EC2  0C12 000B               1810      CMP.B   #11,(A2)
00003EC6  6700 003A               1811      BEQ     draw_left_tile
00003ECA  0C12 000C               1812      CMP.B   #12,(A2)
00003ECE  6700 0024               1813      BEQ     draw_both_tile
00003ED2  0C12 000D               1814      CMP.B   #13,(A2)
00003ED6  6700 0038               1815      BEQ     draw_right_tile
00003EDA  0C12 000E               1816      CMP.B   #14,(A2)
00003EDE  6700 0014               1817      BEQ     draw_both_tile
00003EE2                          1818      
00003EE2  6000 003A               1819      BRA     draw_blank_tile     Draw the blank tile
00003EE6                          1820      
00003EE6                          1821  draw_blocked_tile:
00003EE6  43F9 00004E17           1822      lea     blocked_tile,A1
00003EEC  103C 000E               1823      move.b  #14,D0
00003EF0  4E4F                    1824      trap    #15
00003EF2  4E75                    1825      rts
00003EF4                          1826      
00003EF4                          1827  draw_both_tile:
00003EF4  43F9 00004E0B           1828      lea     both_tile,A1
00003EFA  103C 000E               1829      move.b  #14,D0
00003EFE  4E4F                    1830      trap    #15
00003F00  4E75                    1831      rts
00003F02                          1832      
00003F02                          1833  draw_left_tile:
00003F02  43F9 00004E0F           1834      lea     left_tile,A1
00003F08  103C 000E               1835      move.b  #14,D0
00003F0C  4E4F                    1836      trap    #15
00003F0E  4E75                    1837      rts
00003F10                          1838      
00003F10                          1839  draw_right_tile:
00003F10  43F9 00004E13           1840      lea     right_tile,A1
00003F16  103C 000E               1841      move.b  #14,D0
00003F1A  4E4F                    1842      trap    #15
00003F1C  4E75                    1843      rts
00003F1E                          1844      
00003F1E                          1845  draw_blank_tile:
00003F1E  43F9 00004E07           1846      lea     blank_tile,A1
00003F24  103C 000E               1847      move.b  #14,D0
00003F28  4E4F                    1848      trap    #15
00003F2A  4E75                    1849      rts
00003F2C                          1850  
00003F2C                          1851  check_for_loot_piles:
00003F2C  4BF8 7000               1852      lea     FIRST_LOOT,A5   Load the memory address of the first loot pile
00003F30  1A3C 0000               1853      move.b  #0,D5           Move the starting loot number to D5
00003F34  6100 0004               1854      bsr     loop_loot_piles Loop through all loot piles
00003F38  4E75                    1855      rts                     Return from subroutine
00003F3A                          1856      
00003F3A                          1857  loop_loot_piles:
00003F3A  6100 0014               1858      bsr     check_for_loot  Check for a loot pile
00003F3E                          1859      
00003F3E  BA3C 0002               1860      CMP.B   #ENEMY_MAX,D5   Compare the enemy number with the maximum loot number
00003F42  6C00 FE98               1861      BGE     return          Return from the loop if the current loot number is greater than or equal to the max
00003F46                          1862      
00003F46  5205                    1863      add.b   #1,D5           Add to the current loot number
00003F48  DAFC 0010               1864      add.w   #16,A5          Add to the current loot pointer to move to the next loot pile
00003F4C  5D4D                    1865      sub.w   #L_ACTIVE,A5    Move to the root
00003F4E  60EA                    1866      bra     loop_loot_piles Keep looping the loot piles
00003F50                          1867      
00003F50                          1868  check_for_loot:
00003F50  5C4D                    1869      add.w   #L_ACTIVE,A5    Move to the active state
00003F52  0C15 0000               1870      CMP.B   #0,(A5)         Return if the loot is not active
00003F56  6700 FE84               1871      BEQ     return
00003F5A  5D4D                    1872      sub.w   #L_ACTIVE,A5    Move to the root
00003F5C                          1873  
00003F5C  3615                    1874      move.w  (A5),D3         Move the enemy coordinates into data register D3 for large-value comparisons
00003F5E  B5C3                    1875      CMP.L   D3,A2           Check if the enemy is in the current position
00003F60  6700 0006               1876      BEQ     draw_loot       Draw the enemy if it is
00003F64  5C4D                    1877      add.w   #L_ACTIVE,A5    Move to the active state
00003F66  4E75                    1878      rts                     Return if the enemy is not in the current position
00003F68                          1879      
00003F68                          1880  draw_loot:
00003F68  5C4D                    1881      add.w   #L_ACTIVE,A5    Move to the active state
00003F6A                          1882  
00003F6A  323C 00FF               1883      move.w  #255,D1         Move the word #255 to D1 to set the type of trap 11
00003F6E  103C 000B               1884      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
00003F72  4E4F                    1885      trap    #15             Trap to get the cursor position in D1
00003F74                          1886      
00003F74  0441 0200               1887      sub.w   #512,D1         Move the cursor back by two columns
00003F78  4E4F                    1888      trap    #15             Set the cursor position with trap command 11
00003F7A                          1889      
00003F7A  2601                    1890      move.l  D1,D3           Move the value in D1 to D3 for storage
00003F7C                          1891      
00003F7C  223C 0000FFFF           1892      move.l  #GOLD,D1         Move the colour red to D1
00003F82  6100 FE9A               1893      bsr     change_font_colour  Change the font colour
00003F86                          1894      
00003F86  43F9 00004E23           1895      lea     loot_mark,A1   load the enemy symbol
00003F8C  103C 000E               1896      move.b  #14,D0          Move #14 to D0 for trap command 14
00003F90  4E4F                    1897      trap    #15             Draw the player mark
00003F92                          1898      
00003F92  223C 00FFFFFF           1899      move.l  #WHITE,D1       Move the colour white to D1
00003F98  6100 FE84               1900      bsr     change_font_colour  Change the font colour
00003F9C                          1901      
00003F9C  2203                    1902      move.l  D3,D1           Move the value in D3 to D1 for previous cursor position
00003F9E                          1903      
00003F9E  0641 0200               1904      add.w   #512,D1         Move the cursor position two columns forward
00003FA2  103C 000B               1905      move.b  #11,D0          Move byte #11 for trap command 11 
00003FA6  4E4F                    1906      trap    #15             Set the cursor position
00003FA8                          1907      
00003FA8  4E75                    1908      rts 
00003FAA                          1909  
00003FAA                          1910  check_for_player:
00003FAA  B5CE                    1911      CMP.L   A6,A2
00003FAC  6700 0004               1912      BEQ     draw_player
00003FB0  4E75                    1913      rts
00003FB2                          1914      
00003FB2                          1915  draw_player:
00003FB2  323C 00FF               1916      move.w  #255,D1         Move the word #255 to D1 to set the type of trap 11
00003FB6  103C 000B               1917      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
00003FBA  4E4F                    1918      trap    #15             Trap to get the cursor position in D1
00003FBC                          1919      
00003FBC  0441 0200               1920      sub.w   #512,D1         Move the cursor back by two columns
00003FC0  4E4F                    1921      trap    #15             Set the cursor position with trap command 11
00003FC2                          1922      
00003FC2  2601                    1923      move.l  D1,D3          Move the value in D1 to D3 for storage
00003FC4                          1924      
00003FC4  223C 0000FF00           1925      move.l  #GREEN,D1       Move the colour green to D1
00003FCA  6100 FE52               1926      bsr     change_font_colour  Change the font colour
00003FCE                          1927      
00003FCE  43F9 00004E1B           1928      lea     player_mark,A1  load the player symbol
00003FD4  103C 000E               1929      move.b  #14,D0          Move #14 to D0 for trap command 14
00003FD8  4E4F                    1930      trap    #15             Draw the player mark
00003FDA                          1931      
00003FDA  223C 00FFFFFF           1932      move.l  #WHITE,D1       Move the colour white to D1
00003FE0  6100 FE3C               1933      bsr     change_font_colour  Change the font colour
00003FE4                          1934      
00003FE4  2203                    1935      move.l  D3,D1           Move the value in D3 to D1 for previous cursor position
00003FE6                          1936      
00003FE6  0641 0200               1937      add.w   #512,D1         Move the cursor position two columns forward
00003FEA  103C 000B               1938      move.b  #11,D0          Move byte #11 for trap command 11 
00003FEE  4E4F                    1939      trap    #15             Set the cursor position
00003FF0                          1940      
00003FF0  4E75                    1941      rts
00003FF2                          1942      
00003FF2                          1943  check_for_enemies:
00003FF2  4BF8 6000               1944      lea     FIRST_ENEMY,A5  Load the memory address of the first enemy
00003FF6  1A3C 0000               1945      move.b  #0,D5           Move the starting enemy number to D5
00003FFA  6100 0004               1946      bsr     loop_enemies    Loop through all enemies
00003FFE  4E75                    1947      rts                     Return from subroutine
00004000                          1948      
00004000                          1949  loop_enemies:
00004000  6100 0012               1950      bsr     check_for_enemy Check for an enemy
00004004                          1951      
00004004  BA3C 0002               1952      CMP.B   #ENEMY_MAX,D5   Compare the enemy number with the maximum enemy number
00004008  6C00 FDD2               1953      BGE     return          Return from the loop if the current enemy number is greater than or equal to the max
0000400C                          1954      
0000400C  5205                    1955      add.b   #1,D5           Add to the current enemy number
0000400E  DAFC 000C               1956      add.w   #12,A5          Add to the current enemy pointer to move to the next enemy (16 for next enemy - 4 to get back from position)
00004012  60EC                    1957      bra     loop_enemies    Keep looping the enemies
00004014                          1958      
00004014                          1959  check_for_enemy:
00004014  564D                    1960      add.w   #ALIVE,A5       Add to the enemy memory address to get the enemy's alive state
00004016  0C1D 0000               1961      CMP.B   #0,(A5)+        Check if the enemy is alive
0000401A  6700 FDC0               1962      BEQ     return          Return from the subroutine if not
0000401E                          1963      
0000401E  3615                    1964      move.w  (A5),D3         Move the enemy coordinates into data register D3 for large-value comparisons
00004020  B5C3                    1965      CMP.L   D3,A2           Check if the enemy is in the current position
00004022  6700 0004               1966      BEQ     draw_enemy      Draw the enemy if it is
00004026  4E75                    1967      rts                     Return if the enemy is not in the current position
00004028                          1968      
00004028                          1969  draw_enemy:
00004028  323C 00FF               1970      move.w  #255,D1         Move the word #255 to D1 to set the type of trap 11
0000402C  103C 000B               1971      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
00004030  4E4F                    1972      trap    #15             Trap to get the cursor position in D1
00004032                          1973      
00004032  0441 0200               1974      sub.w   #512,D1         Move the cursor back by two columns
00004036  4E4F                    1975      trap    #15             Set the cursor position with trap command 11
00004038                          1976      
00004038  2601                    1977      move.l  D1,D3          Move the value in D1 to D3 for storage
0000403A                          1978      
0000403A  223C 000000FF           1979      move.l  #RED,D1         Move the colour red to D1
00004040  6100 FDDC               1980      bsr     change_font_colour  Change the font colour
00004044                          1981      
00004044  43F9 00004E1D           1982      lea     enemy_mark,A1   load the enemy symbol
0000404A  103C 000E               1983      move.b  #14,D0          Move #14 to D0 for trap command 14
0000404E  4E4F                    1984      trap    #15             Draw the player mark
00004050                          1985      
00004050  223C 00FFFFFF           1986      move.l  #WHITE,D1       Move the colour white to D1
00004056  6100 FDC6               1987      bsr     change_font_colour  Change the font colour
0000405A                          1988      
0000405A  2203                    1989      move.l  D3,D1           Move the value in D3 to D1 for previous cursor position
0000405C                          1990      
0000405C  0641 0200               1991      add.w   #512,D1         Move the cursor position two columns forward
00004060  103C 000B               1992      move.b  #11,D0          Move byte #11 for trap command 11 
00004064  4E4F                    1993      trap    #15             Set the cursor position
00004066                          1994      
00004066  4E75                    1995      rts 
00004068                          1996      
00004068                          1997  check_for_shops:
00004068  4BF8 6500               1998      lea     FIRST_SHOP,A5   Load the memory address of the first shop
0000406C  1A3C 0000               1999      move.b  #0,D5           Move the starting shop number to D5
00004070  6100 0004               2000      bsr     loop_shops      Loop through all shops
00004074  4E75                    2001      rts                     Return from subroutine
00004076                          2002      
00004076                          2003  loop_shops:
00004076  6100 0012               2004      bsr     check_for_shop  Check for a shop
0000407A                          2005      
0000407A  BA3C 0002               2006      CMP.B   #SHOP_MAX,D5    Compare the shop number with the maximum shop number
0000407E  6C00 FD5C               2007      BGE     return          Return from the loop if the current shop number is greater than or equal to the max
00004082                          2008      
00004082  5205                    2009      add.b   #1,D5           Add to the current shop number
00004084  DAFC 0010               2010      add.w   #16,A5          Add to the current shop pointer to move to the next shop
00004088  60EC                    2011      bra     loop_shops      Keep looping the shops
0000408A                          2012      
0000408A                          2013  check_for_shop:
0000408A  3615                    2014      move.w  (A5),D3         Move the shop coordinates into data register D3 for large-value comparisons
0000408C  B5C3                    2015      CMP.L   D3,A2           Check if the shop is in the current position
0000408E  6700 0004               2016      BEQ     draw_shop       Draw the shop if it is
00004092  4E75                    2017      rts                     Return if the shop is not in the current position
00004094                          2018      
00004094                          2019  draw_shop:
00004094  323C 00FF               2020      move.w  #255,D1         Move the word #255 to D1 to set the type of trap 11
00004098  103C 000B               2021      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
0000409C  4E4F                    2022      trap    #15             Trap to get the cursor position in D1
0000409E                          2023      
0000409E  0441 0200               2024      sub.w   #512,D1         Move the cursor back by two columns
000040A2  4E4F                    2025      trap    #15             Set the cursor position with trap command 11
000040A4                          2026      
000040A4  2601                    2027      move.l  D1,D3           Move the value in D1 to D3 for storage
000040A6                          2028      
000040A6  223C 00F000F0           2029      move.l  #PURPLE,D1      Move the colour red to D1
000040AC  6100 FD70               2030      bsr     change_font_colour  Change the font colour
000040B0                          2031      
000040B0  43F9 00004E21           2032      lea     shop_mark,A1    load the enemy symbol
000040B6  103C 000E               2033      move.b  #14,D0          Move #14 to D0 for trap command 14
000040BA  4E4F                    2034      trap    #15             Draw the player mark
000040BC                          2035      
000040BC  223C 00FFFFFF           2036      move.l  #WHITE,D1       Move the colour white to D1
000040C2  6100 FD5A               2037      bsr     change_font_colour  Change the font colour
000040C6                          2038      
000040C6  2203                    2039      move.l  D3,D1           Move the value in D3 to D1 for previous cursor position
000040C8                          2040      
000040C8  0641 0200               2041      add.w   #512,D1         Move the cursor position two columns forward
000040CC  103C 000B               2042      move.b  #11,D0          Move byte #11 for trap command 11 
000040D0  4E4F                    2043      trap    #15             Set the cursor position
000040D2                          2044      
000040D2  4E75                    2045      rts
000040D4                          2046  
000040D4                          2047  check_for_win_point:
000040D4  B5FC 00008156           2048      CMP.L   #WIN_POINT,A2   Check if the win point is in the current tile
000040DA  6700 0004               2049      BEQ     draw_win_point  Branch to draw the win point if so
000040DE  4E75                    2050      rts                     Return from subroutine if not
000040E0                          2051      
000040E0                          2052  draw_win_point:
000040E0  323C 00FF               2053      move.w  #255,D1         Move the word #255 to D1 to set the type of trap 11
000040E4  103C 000B               2054      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
000040E8  4E4F                    2055      trap    #15             Trap to get the cursor position in D1
000040EA                          2056      
000040EA  0441 0200               2057      sub.w   #512,D1         Move the cursor back by two columns
000040EE  4E4F                    2058      trap    #15             Set the cursor position with trap command 11
000040F0                          2059      
000040F0  2601                    2060      move.l  D1,D3           Move the value in D1 to D3 for storage
000040F2                          2061      
000040F2  223C 00FF0000           2062      move.l  #BLUE,D1        Move the colour blue to D1
000040F8  6100 FD24               2063      bsr     change_font_colour  Change the font colour
000040FC                          2064      
000040FC  43F9 00004E1F           2065      lea     win_point_mark,A1   load the win point symbol
00004102  103C 000E               2066      move.b  #14,D0              Move #14 to D0 for trap command 14
00004106  4E4F                    2067      trap    #15                 Draw the win point mark
00004108                          2068      
00004108  223C 00FFFFFF           2069      move.l  #WHITE,D1       Move the colour white to D1
0000410E  6100 FD0E               2070      bsr     change_font_colour  Change the font colour
00004112                          2071      
00004112  2203                    2072      move.l  D3,D1           Move the value in D3 to D1 for previous cursor position
00004114                          2073      
00004114  0641 0200               2074      add.w   #512,D1         Move the cursor position two columns forward
00004118  103C 000B               2075      move.b  #11,D0          Move byte #11 for trap command 11 
0000411C  4E4F                    2076      trap    #15             Set the cursor position
0000411E                          2077      
0000411E  4E75                    2078      rts
00004120                          2079      
00004120                          2080  *-------------------------------------------------------
00004120                          2081  *-------------------Setup the world---------------------
00004120                          2082  *-------------------------------------------------------
00004120                          2083  setup_world:
00004120  13FC 000E 0000814A      2084      move.b  #14,$814A   Setup the starting corridor
00004128  13FC 0007 0000813A      2085      move.b  #7,$813A    T junction upwards from starting corridor
00004130  13FC 0004 00008139      2086      move.b  #4,$8139    Left corridor
00004138  13FC 0001 00008129      2087      move.b  #1,$8129
00004140  13FC 0001 00008119      2088      move.b  #1,$8119
00004148                          2089      
00004148  13FC 0004 00008108      2090      move.b  #4,$8108    First shop
00004150  13FC 0000 00008109      2091      move.b  #0,$8109    Entrance
00004158  13FC 0005 0000810A      2092      move.b  #5,$810A
00004160  13FC 0008 000080F8      2093      move.b  #8,$80F8
00004168  13FC 0000 000080F9      2094      move.b  #0,$80F9
00004170  13FC 000A 000080FA      2095      move.b  #10,$80FA
00004178  13FC 0003 000080E8      2096      move.b  #3,$80E8
00004180  13FC 0007 000080E9      2097      move.b  #7,$80E9
00004188  13FC 0006 000080EA      2098      move.b  #6,$80EA
00004190                          2099      
00004190  13FC 0005 0000813B      2100      move.b  #5,$813B    Right corridor
00004198  13FC 0001 0000812B      2101      move.b  #1,$812B
000041A0  13FC 0001 0000811B      2102      move.b  #1,$811B
000041A8  13FC 0008 0000810B      2103      move.b  #8,$810B    Path continues up with a turn off to the right
000041B0                          2104      
000041B0  13FC 0002 0000810C      2105      move.b  #2,$810C    Right path
000041B8  13FC 0002 0000810D      2106      move.b  #2,$810D    Continue right
000041C0  13FC 0005 0000810E      2107      move.b  #5,$810E    Path upwards and to the left
000041C8  13FC 0001 000080FE      2108      move.b  #1,$80FE    Leads upwards into a room
000041D0                          2109      
000041D0  13FC 0004 000080ED      2110      move.b  #4,$80ED    First monster room
000041D8  13FC 0000 000080EE      2111      move.b  #0,$80EE    Entrance
000041E0  13FC 0005 000080EF      2112      move.b  #5,$80EF
000041E8  13FC 0008 000080DD      2113      move.b  #8,$80DD
000041F0  13FC 0000 000080DE      2114      move.b  #0,$80DE
000041F8  13FC 000A 000080DF      2115      move.b  #10,$80DF
00004200  13FC 0003 000080CD      2116      move.b  #3,$80CD
00004208  13FC 0007 000080CE      2117      move.b  #7,$80CE
00004210  13FC 0006 000080CF      2118      move.b  #6,$80CF
00004218                          2119      
00004218  13FC 0001 000080FB      2120      move.b  #1,$80FB    Path that continues up
00004220  13FC 0001 000080EB      2121      move.b  #1,$80EB    Path continues upwards
00004228  13FC 0001 000080DB      2122      move.b  #1,$80DB
00004230                          2123      
00004230                          2124      *Bottom row of room
00004230  13FC 0004 000080C8      2125      move.b  #4,$80C8    Large monster room with locked door
00004238  13FC 0009 000080C9      2126      move.b  #9,$80C9
00004240  13FC 0009 000080CA      2127      move.b  #9,$80CA
00004248  13FC 0000 000080CB      2128      move.b  #0,$80CB    Entrance
00004250  13FC 0005 000080CC      2129      move.b  #5,$80CC
00004258                          2130      *Middle row of room
00004258  13FC 0000 000080B8      2131      move.b  #0,$80B8    Exit to the left
00004260  13FC 0000 000080B9      2132      move.b  #0,$80B9
00004268  13FC 0000 000080BA      2133      move.b  #0,$80BA
00004270  13FC 0000 000080BB      2134      move.b  #0,$80BB
00004278  13FC 000A 000080BC      2135      move.b  #10,$80BC
00004280                          2136      *Top row of room
00004280  13FC 0003 000080A8      2137      move.b  #3,$80A8
00004288  13FC 0007 000080A9      2138      move.b  #7,$80A9
00004290  13FC 0007 000080AA      2139      move.b  #7,$80AA
00004298  13FC 0007 000080AB      2140      move.b  #7,$80AB    Locked door
000042A0  13FC 0006 000080AC      2141      move.b  #6,$80AC
000042A8                          2142      
000042A8  13FC 0002 000080B7      2143      move.b  #2,$80B7    Exit large room leftwards
000042B0  13FC 0002 000080B6      2144      move.b  #2,$80B6    Continue to the left
000042B8  13FC 0007 000080B5      2145      move.b  #7,$80B5    Continue to the left and a path downwards
000042C0  13FC 0002 000080B4      2146      move.b  #2,$80B4    Continue to the left
000042C8                          2147      
000042C8  13FC 0003 000080A1      2148      move.b  #3,$80A1    Room to the left
000042D0  13FC 0007 000080A2      2149      move.b  #7,$80A2
000042D8  13FC 0006 000080A3      2150      move.b  #6,$80A3
000042E0  13FC 0008 000080B1      2151      move.b  #8,$80B1
000042E8  13FC 0000 000080B2      2152      move.b  #0,$80B2
000042F0  13FC 0000 000080B3      2153      move.b  #0,$80B3    Entrance to the right
000042F8  13FC 0004 000080C1      2154      move.b  #4,$80C1
00004300  13FC 0009 000080C2      2155      move.b  #9,$80C2
00004308  13FC 0005 000080C3      2156      move.b  #5,$80C3
00004310                          2157      
00004310  13FC 0001 000080C5      2158      move.b  #1,$80C5    Path leading downwards
00004318  13FC 0001 000080D5      2159      move.b  #1,$80D5
00004320  13FC 000A 000080E5      2160      move.b  #10,$80E5   Path leading downward and to the left
00004328  13FC 0002 000080E4      2161      move.b  #2,$80E4    Path on the left
00004330  13FC 0002 000080E3      2162      move.b  #2,$80E3
00004338  13FC 0003 000080E2      2163      move.b  #3,$80E2    Path takes a turn downwards
00004340  13FC 0001 000080F2      2164      move.b  #1,$80F2    Path continues downwards
00004348                          2165      
00004348  13FC 0003 00008101      2166      move.b  #3,$8101    Regular enemy room
00004350  13FC 0000 00008102      2167      move.b  #0,$8102    Entrance
00004358  13FC 0006 00008103      2168      move.b  #6,$8103
00004360  13FC 0008 00008111      2169      move.b  #8,$8111
00004368  13FC 0000 00008112      2170      move.b  #0,$8112
00004370  13FC 000A 00008113      2171      move.b  #10,$8113
00004378  13FC 0004 00008121      2172      move.b  #4,$8121
00004380  13FC 0009 00008122      2173      move.b  #9,$8122
00004388  13FC 000A 00008123      2174      move.b  #10,$8123   Exit at the bottom
00004390                          2175      
00004390  13FC 0001 000080F5      2176      move.b  #1,$80F5    Path leading downward
00004398  13FC 0001 00008105      2177      move.b  #1,$8105
000043A0  13FC 0001 00008115      2178      move.b  #1,$8115
000043A8  13FC 0001 00008125      2179      move.b  #1,$8125
000043B0                          2180      
000043B0                          2181      *Top row of room
000043B0  13FC 0008 00008133      2182      move.b  #8,$8133    Large enemy room - Exit at top
000043B8  13FC 0007 00008134      2183      move.b  #7,$8134
000043C0  13FC 0000 00008135      2184      move.b  #0,$8135    Entrance
000043C8  13FC 0006 00008136      2185      move.b  #6,$8136
000043D0                          2186      
000043D0                          2187      *Middle row of room
000043D0  13FC 0008 00008143      2188      move.b  #8,$8143
000043D8  13FC 0000 00008144      2189      move.b  #0,$8144
000043E0  13FC 0000 00008145      2190      move.b  #0,$8145
000043E8  13FC 000A 00008146      2191      move.b  #10,$8146
000043F0                          2192      
000043F0                          2193      *Bottom row of room
000043F0  13FC 0004 00008153      2194      move.b  #4,$8153
000043F8  13FC 0009 00008154      2195      move.b  #9,$8154
00004400  13FC 0009 00008155      2196      move.b  #9,$8155
00004408  13FC 0005 00008156      2197      move.b  #5,$8156
00004410                          2198      
00004410                          2199      * Setup the doors
00004410  31F9 00008139 6FE0      2200      move.w  $8139,FIRST_DOOR
00004418                          2201      
00004418  4E75                    2202      rts
0000441A                          2203  
0000441A                          2204  setup_enemies:
0000441A                          2205      * Setup first enemy
0000441A  11FC 0003 6000          2206      move.b  #3,$6000    Health - Setup the first enemy
00004420  11FC 0001 6001          2207      move.b  #1,$6001    Damage/level
00004426  11FC 0001 6002          2208      move.b  #1,$6002    Class type (Knight)
0000442C  11FC 0001 6003          2209      move.b  #1,$6003    Alive state (Alive)
00004432  31FC 80DE 6004          2210      move.w  #$80DE,$6004  Move enemy coordinates
00004438                          2211      
00004438                          2212      * Setup second enemy
00004438  11FC 0003 6010          2213      move.b  #3,$6010    Health - Setup the first enemy
0000443E  11FC 0002 6011          2214      move.b  #2,$6011    Damage/level
00004444  11FC 0001 6012          2215      move.b  #1,$6012    Class type (Knight)
0000444A  11FC 0001 6013          2216      move.b  #1,$6013    Alive state (Alive)
00004450  31FC 8155 6014          2217      move.w  #$8155,$6014  Move enemy coordinates
00004456                          2218      
00004456  4E75                    2219      rts
00004458                          2220      
00004458                          2221  setup_loot:
00004458                          2222      * Setup first loot pile
00004458  31FC 80DE 7000          2223      move.w  #$80DE,$7000  Move loot coordinates
0000445E  11FC 0001 7002          2224      move.b  #1,$7002  Move loot potions
00004464  11FC 0002 7003          2225      move.b  #2,$7003  Move loot keys
0000446A  11FC 000F 7004          2226      move.b  #LIFE_PER_TORCH,$7004  Move loot torches
00004470  11FC 0005 7005          2227      move.b  #5,$7005  Move loot gold
00004476  11FC 0001 7006          2228      move.b  #1,$7006  Move loot active state
0000447C                          2229      
0000447C                          2230      * Setup second loot pile
0000447C  31FC 8155 7010          2231      move.w  #$8155,$7010  Move loot coordinates
00004482  11FC 0003 7012          2232      move.b  #3,$7012  Move loot potions
00004488  11FC 0005 7013          2233      move.b  #5,$7013  Move loot keys
0000448E  11FC 0001 7014          2234      move.b  #1,$7014  Move loot torches
00004494  11FC 0002 7015          2235      move.b  #2,$7015  Move loot gold
0000449A  11FC 0001 7016          2236      move.b  #1,$7016  Move loot active state
000044A0                          2237  
000044A0                          2238      
000044A0                          2239  setup_player:
000044A0  11FC 000A 5FF0          2240      move.b  #10,PLAYER      put score/health in memory location $5FF0
000044A6  11FC 0001 5FF1          2241      move.b  #1,PLA_DAMAGE   Assign the default damage for the player
000044AC  11FC 0000 5FF3          2242      move.b  #0,GAME_STATE   Put game state number in memory location $5FF3
000044B2                          2243      *0 = Pick role/intro | 5 = Move around | 6 = Combat | 7 = Shop | 64 = End game
000044B2                          2244  
000044B2  11FC 0000 5FF2          2245      move.b  #0,PLA_CLASS    put class number in memory location $5FF2
000044B8                          2246      * 1 corresponds to knight - 2 corresponds to mage - 3 corresponds to rogue
000044B8                          2247      
000044B8  11FC 0064 5FF8          2248      move.b  #100,PLA_GOLD    Assign the player's base gold value
000044BE  11FC 0001 5FF9          2249      move.b  #1,PLA_POTIONS  Assign the player's base potions value
000044C4  11FC 0000 5FFA          2250      move.b  #0,PLA_KEYS     Assign the player's base keys value
000044CA                          2251      *move.b  #LIFE_PER_TORCH,PLA_TORCH   Assign the player's base torch value
000044CA  11FC 0032 5FFB          2252      move.b  #50,PLA_TORCH   Assign the player's base torch value
000044D0                          2253      
000044D0  4DF9 0000814A           2254      lea     $814A,A6        Set the player coordinate to the first corridor
000044D6  31CE 5FF6               2255      move.w  A6,PLA_P_POS    Set the player's previous position to their current
000044DA                          2256      
000044DA  4E75                    2257      rts
000044DC                          2258      
000044DC                          2259  setup_shops:
000044DC                          2260      * Setup the first shop
000044DC  31FC 80F9 6500          2261      move.w  #$80F9,$6500    Set the position
000044E2  11FC 0002 6502          2262      move.b  #2,$6502        Set the potions
000044E8  11FC 0003 6503          2263      move.b  #3,$6503        Set the keys
000044EE  11FC 0004 6504          2264      move.b  #4,$6504        Set the torches
000044F4  11FC 0005 6505          2265      move.b  #5,$6505        Set the damage
000044FA                          2266      
000044FA                          2267      * Setup the second shop
000044FA  31FC 80B2 6510          2268      move.w  #$80B2,$6510    Set the position
00004500  11FC 0004 6512          2269      move.b  #4,$6512        Set the potions
00004506  11FC 0003 6513          2270      move.b  #3,$6513        Set the keys
0000450C  11FC 0002 6514          2271      move.b  #2,$6514        Set the torches
00004512  11FC 0001 6515          2272      move.b  #1,$6515        Set the damage
00004518                          2273  
00004518  4E75                    2274      rts
0000451A                          2275      
0000451A                          2276  *-------------------------------------------------------
0000451A                          2277  *-------------------Data Delarations--------------------
0000451A                          2278  *-------------------------------------------------------
0000451A                          2279  
0000451A= 0D 0A 00                2280  crlf:           dc.b    $0D,$0A,0
0000451D= 2A 2A 2A 2A 2A 2A ...   2281  welcome_msg:    dc.b    '*****************************************************************',$0D,$0A
00004560= 20 20 20 20 20 20 ...   2282                  dc.b    '      __  ___      ___  __      ___        ______    _____  ___',$0D,$0A
000045A1= 20 20 20 20 20 2F ...   2283                  dc.b    '     /""\|"  \    /"  |/""\    |"  |      /    " \  (\"   \|"  \',$0D,$0A
000045E3= 20 20 20 20 2F 20 ...   2284                  dc.b    '    /    \\   \  //  //    \   ||  |     // ____  \ |.\\   \    |',$0D,$0A
00004626= 20 20 20 2F 20 20 ...   2285                  dc.b    '   /  /\  \\\  \/. .//  /\  \  |:  |    /  /    ) :)|: \.   \\  |',$0D,$0A
00004669= 20 20 2F 2F 20 20 ...   2286                  dc.b    '  //  __   \\.    ////  __   \  \  |___(: (____/ // |.  \    \. |',$0D,$0A
000046AC= 20 2F 20 20 20 2F ...   2287                  dc.b    ' /   /  \\  \\\   //   /  \\  \( \_|:  \\        /  |    \    \ |',$0D,$0A
000046EF= 28 5F 5F 5F 2F 20 ...   2288                  dc.b    '(___/    \___)\__/(___/    \___)\_______)\"_____/    \___|\____\)',$0D,$0A,$0D,$0A
00004734= 2A 2A 2A 2A 2A 2A ...   2289                  dc.b    '*****************************************************************',$0D,$0A,0
00004778= 2E 00                   2290  loop_msg:       dc.b    '.',0
0000477A= 54 68 65 20 64 61 ...   2291  tutorial_msg    dc.b    'The darkness here is dangerious, keep your torch close and dont let it go out.',$0D,$0A
000047CA= 45 76 65 72 79 20 ...   2292                  dc.b    'Every movement you make decreases your torch life, so think before you move.',$0D,$0A
00004818= 59 6F 75 20 63 61 ...   2293                  dc.b    'You can buy more torches in the shop, thats probably a good place to start...',$0D,$0A,0
00004868= 31 3E 20 52 65 73 ...   2294  replay_msg:     dc.b    '1> Restart the game.',$0D,$0A
0000487E= 32 3E 20 51 75 69 ...   2295                  dc.b    '2> Quit the game.',$0D,$0A,0
00004892= 59 6F 75 20 61 77 ...   2296  wake_up_msg:    dc.b    'You awake in a room, on a bed of red velvet, with no memory',$0D,$0A
000048CF= 6F 66 20 68 6F 77 ...   2297                  dc.b    'of how you got here. Stones crumble from the ceiling, the place looks like an',$0D,$0A
0000491E= 6F 6C 64 20 63 61 ...   2298                  dc.b    'old castle. You get a dark feeling from this place, and you know you must',$0D,$0A
00004969= 65 73 63 61 70 65 ...   2299                  dc.b    'escape...',$0D,$0A
00004974= 59 6F 75 20 63 6C ...   2300                  dc.b    'You climb from the bed and look in a nearby mirror:',$0D,$0A,0
000049AA= 31 3E 20 59 6F 75 ...   2301  pick_role_msg:  dc.b    '1> You wear armour of polished iron, a short sword and heavy shield laying',$0D,$0A
000049F6= 63 6C 6F 73 65 20 ...   2302                  dc.b    'close by. (Knight class)',$0D,$0A,$0D,$0A
00004A12= 32 3E 20 59 6F 75 ...   2303                  dc.b    '2> You wear a cloak with mystic symbols sewn into the fabrics, an ancient',$0D,$0A
00004A5D= 6C 6F 6F 6B 69 6E ...   2304                  dc.b    'looking staff lays near. (Mage class)',$0D,$0A,$0D,$0A
00004A86= 33 3E 20 59 6F 75 ...   2305                  dc.b    '3> You wear tight, well-fitting leather armour with reminents of black dye',$0D,$0A
00004AD2= 73 74 61 69 6E 65 ...   2306                  dc.b    'stained to the material. Two knives are fastened to your belt. (Rogue class)',$0D,$0A,0
00004B21= 45 6E 74 65 72 20 ...   2307  input_nums_msg: dc.b    'Enter num between 1 and ',0
00004B3A= 3A 20 00                2308  colon_msg:      dc.b    ': ',0
00004B3D                          2309  
00004B3D= 49 6E 70 75 74 74 ...   2310  input_error_msg:    dc.b    'Inputted number is outside of range.',$0D,$0A,0
00004B64= 47 61 6D 65 73 74 ...   2311  fake_gamestate_msg: dc.b    'Gamestate doesnt exist',$0D,$0A,0
00004B7D= 59 6F 75 20 67 72 ...   2312  knight_role_msg:    dc.b    'You grab your sword and shield, pull a torch from the wall, and leave the room.',$0D,$0A,0
00004BCF= 59 6F 75 20 68 61 ...   2313  knight_spec_msg:    dc.b    'You have chosen the KNIGHT class. You specialise in blocking and countering',$0D,$0A,0
00004C1D= 59 6F 75 20 70 69 ...   2314  mage_role_msg:  dc.b    'You pick up your staff, grab a torch from the wall, and leave the room.',$0D,$0A,0
00004C67= 59 6F 75 20 68 61 ...   2315  mage_spec_msg:  dc.b    'You have chosen the MAGE class. You specialise in magic attacks.',$0D,$0A,0
00004CAA= 59 6F 75 20 66 61 ...   2316  rogue_role_msg: dc.b    'You fasten your belt, grab a torch from the wall, and leave the room.',$0D,$0A,0
00004CF2= 59 6F 75 20 68 61 ...   2317  rogue_spec_msg: dc.b    'You have chosen the ROGUE class. You specialise in quick melee attacks.',$0D,$0A,0
00004D3C= 31 3E 20 4D 6F 76 ...   2318  movement_msg:   dc.b    '1> Move north.',$0D,$0A
00004D4C= 32 3E 20 4D 6F 76 ...   2319                  dc.b    '2> Move south.',$0D,$0A
00004D5C= 33 3E 20 4D 6F 76 ...   2320                  dc.b    '3> Move west.',$0D,$0A
00004D6B= 34 3E 20 4D 6F 76 ...   2321                  dc.b    '4> Move east.',$0D,$0A
00004D7A= 35 3E 20 44 72 69 ...   2322                  dc.b    '5> Drink health potion.',$0D,$0A,0
00004D94= 4D 6F 76 65 64 20 ...   2323  move_north_msg: dc.b    'Moved north.',$0D,$0A,0
00004DA3= 4D 6F 76 65 64 20 ...   2324  move_east_msg:  dc.b    'Moved east.',$0D,$0A,0
00004DB1= 4D 6F 76 65 64 20 ...   2325  move_south_msg: dc.b    'Moved south.',$0D,$0A,0
00004DC0= 4D 6F 76 65 64 20 ...   2326  move_west_msg:  dc.b    'Moved west.',$0D,$0A,0
00004DCE= 41 20 77 61 6C 6C ...   2327  movement_blocked_msg:  dc.b    'A wall blocks your path.',$0D,$0A,0
00004DE9= 45 6E 74 65 72 20 ...   2328  continue_msg:   dc.b    'Enter any key to continue... ',0
00004E07= 20 20 20 00             2329  blank_tile      dc.b    '   ',0
00004E0B= 7C 20 7C 00             2330  both_tile       dc.b    '| |',0
00004E0F= 7C 20 20 00             2331  left_tile       dc.b    '|  ',0
00004E13= 20 20 7C 00             2332  right_tile      dc.b    '  |',0
00004E17= 5C 2F 5C 00             2333  blocked_tile:   dc.b    '\/\',0
00004E1B= 2A 00                   2334  player_mark:    dc.b    '*',0
00004E1D= 58 00                   2335  enemy_mark:     dc.b    'X',0
00004E1F= 40 00                   2336  win_point_mark: dc.b    '@',0
00004E21= 24 00                   2337  shop_mark:      dc.b    '$',0
00004E23= 25 00                   2338  loot_mark:      dc.b    '%',0
00004E25= 23 00                   2339  door_mark:      dc.b    '#',0
00004E27= 41 20 6D 6F 6E 73 ...   2340  encounter_msg:  dc.b    'A monster blocks your path, it looks ready to attack!',$0D,$0A,0
00004E5F= 31 3E 20 42 6C 6F ...   2341  combat_msg:     dc.b    '1> Block and Counter.',$0D,$0A
00004E76= 32 3E 20 43 61 73 ...   2342                  dc.b    '2> Cast Magic.',$0D,$0A
00004E86= 33 3E 20 41 74 74 ...   2343                  dc.b    '3> Attack Swiftly.',$0D,$0A
00004E9A= 34 3E 20 54 72 79 ...   2344                  dc.b    '4> Try Run.',$0D,$0A
00004EA7= 35 3E 20 44 72 69 ...   2345                  dc.b    '5> Drink Health Potion.',$0D,$0A,0
00004EC1= 59 6F 75 20 65 73 ...   2346  escape_msg:             dc.b    'You escaped the monster!',$0D,$0A,0
00004EDC= 59 6F 75 20 74 72 ...   2347  fail_escape_msg:        dc.b    'You try to run, but the monster catches and damages you!',$0D,$0A,0
00004F17= 59 6F 75 20 62 6F ...   2348  both_block_msg:         dc.b    'You both block, No damage is done!',$0D,$0A,0
00004F3C= 59 6F 75 20 62 6F ...   2349  both_cast_magic_msg:    dc.b    'You both cast magic at eachother, the spells clash in mid air! No damage',$0D,$0A
00004F86= 69 73 20 64 6F 6E ...   2350                          dc.b    'is done!',$0D,$0A,0
00004F91= 59 6F 75 20 62 6F ...   2351  both_melee_msg:         dc.b    'You both lunge forward, metal clashes together, but no damage is done!',$0D,$0A,0
00004FDA= 54 68 65 20 65 6E ...   2352  hit_against_block_msg:  dc.b    'The enemy blocks, you cast a cast a spell and it damages the monster!',$0D,$0A,0
00005022= 54 68 65 20 65 6E ...   2353  hit_against_magic_msg:  dc.b    'The enemy begins to charge a spell but you lunge forward and hit it first,',$0D,$0A
0000506E= 64 61 6D 61 67 69 ...   2354                          dc.b    'damaging the monster!',$0D,$0A,0
00005086= 54 68 65 20 65 6E ...   2355  hit_against_melee_msg:  dc.b    'The enemy lunges forward but you block quicky, then counter, damaging the',$0D,$0A
000050D1= 6D 6F 6E 73 74 65 ...   2356                          dc.b    'monster!',$0D,$0A,0
000050DC= 59 6F 75 20 6C 75 ...   2357  hit_by_counter_msg:     dc.b    'You lunge at the enemy but they block before you hit, they swing around quickly',$0D,$0A
0000512D= 61 6E 64 20 64 61 ...   2358                          dc.b    'and damage you!',$0D,$0A,0
0000513F= 59 6F 75 20 74 72 ...   2359  hit_by_magic_msg:       dc.b    'You try to block the enemies attack, but they cast a spell that breaks through',$0D,$0A
0000518F= 79 6F 75 72 20 64 ...   2360                          dc.b    'your defense and damages you!',$0D,$0A,0
000051AF= 59 6F 75 20 74 72 ...   2361  hit_by_melee_msg:       dc.b    'You try to charge up a spell, but the enemy lunges forward and damages you!',$0D,$0A,0
000051FD= 48 65 61 6C 74 68 ...   2362  health_msg:             dc.b    'Health: ',0
00005206= 45 6E 65 6D 79 20 ...   2363  enemy_health_msg:       dc.b    'Enemy Health: ',0
00005215= 54 6F 72 63 68 20 ...   2364  torch_msg:              dc.b    'Torch Life: ',0
00005222= 44 61 6D 61 67 65 ...   2365  damage_lvl_msg          dc.b    'Damage lvl: ',0
0000522F= 49 6E 76 65 6E 74 ...   2366  inventory_msg:          dc.b    'Inventory:',0
0000523A= 2D 20 47 6F 6C 64 ...   2367  gold_msg:               dc.b    '- Gold ',0
00005242= 2D 20 4B 65 79 20 00    2368  key_msg:                dc.b    '- Key ',0
00005249= 2D 20 50 6F 74 69 ...   2369  potions_msg:            dc.b    '- Potion ',0
00005253= 2D 20 54 6F 72 63 ...   2370  torches_msg:            dc.b    '- Torch ',0
0000525C= 2D 20 44 61 6D 61 ...   2371  damage_up_msg:          dc.b    '- Damage Upgrades ',0
0000526F= 54 68 65 20 6D 6F ...   2372  battle_won_msg:         dc.b    'The monster collapses at your feet. It is dead!',$0D,$0A,0
000052A1= 28 00                   2373  bracket_open_msg:       dc.b    '(',0
000052A3= 29 00                   2374  bracket_close_msg:      dc.b    ')',0
000052A5= 59 6F 75 20 66 65 ...   2375  death_msg:          dc.b    'You feel your last breath of air leave your lungs...',$0D,$0A
000052DB= 59 6F 75 72 20 6B ...   2376                      dc.b    'Your knees hit the ground...',$0D,$0A
000052F9= 59 6F 75 20 68 61 ...   2377                      dc.b    'You have died.',$0D,$0A,0
0000530A= 59 6F 75 20 66 65 ...   2378  win_msg:            dc.b    'You feel the outside breeze hit your face...',$0D,$0A
00005338= 59 6F 75 20 68 61 ...   2379                      dc.b    'You have escaped the castle!',$0D,$0A,0
00005357= 59 6F 75 20 64 72 ...   2380  take_potion_msg:    dc.b    'You drink a health potion...',$0D,$0A
00005375= 33 20 68 65 61 6C ...   2381                      dc.b    '3 health points restored!',$0D,$0A,0
00005391= 59 6F 75 20 61 72 ...   2382  no_potions_msg:     dc.b    'You are out of potions.',$0D,$0A,0
000053AB= 22 4C 6F 6F 6B 69 ...   2383  shop_enter_msg:     dc.b    '"Looking to lighten that coin pouch of yours?!"',$0D,$0A,0
000053DD= 31 3E 20 42 75 79 ...   2384  shop_msg:       dc.b    '1> Buy Potion. (5g)',$0D,$0A
000053F2= 32 3E 20 42 75 79 ...   2385                  dc.b    '2> Buy Key. (15g)',$0D,$0A
00005405= 33 3E 20 42 75 79 ...   2386                  dc.b    '3> Buy Torch. (10g)',$0D,$0A
0000541A= 34 3E 20 42 75 79 ...   2387                  dc.b    '4> Buy Damage Upgrade. (20g)',$0D,$0A
00005438= 35 3E 20 4C 65 61 ...   2388                  dc.b    '5> Leave Shop.',$0D,$0A,0
00005449= 22 50 6C 65 61 73 ...   2389  leave_shop_msg: dc.b    '"Pleasure doing business with you."',$0D,$0A,0
0000546F= 22 2E 2E 2E 41 6E ...   2390  buy_item_msg:   dc.b    '"...And its yours!"',$0D,$0A,0
00005485= 53 68 6F 70 20 53 ...   2391  shop_stock_msg: dc.b    'Shop Stock:',0
00005491= 59 6F 75 72 20 49 ...   2392  player_msg:     dc.b    'Your Items:',0
0000549D= 22 4E 6F 74 20 65 ...   2393  no_money_msg:   dc.b    '"Not enough gold, traveller."',$0D,$0A,0
000054BD= 22 53 6F 72 72 79 ...   2394  no_item_msg:    dc.b    '"Sorry, I dont have any of them left..."',$0D,$0A,0
000054E8= 54 68 65 20 64 61 ...   2395  no_torch_msg:   dc.b    'The darkness burns...',$0D,$0A,0
00005500= 59 6F 75 20 70 69 ...   2396  pickup_loot_msg:    dc.b    'You picked up a loot pile',$0D,$0A,0
0000551C= 2B 20 47 6F 6C 64 ...   2397  pickup_gold_msg:    dc.b    '+ Gold ',0
00005524= 2B 20 50 6F 74 69 ...   2398  pickup_potion_msg:  dc.b    '+ Potion ',0
0000552E= 2B 20 4B 65 79 20 00    2399  pickup_key_msg:     dc.b    '+ Key ',0
00005535= 2B 20 54 6F 72 63 ...   2400  pickup_torch_msg:   dc.b    '+ Torch life ',0
00005543= 43 6C 61 73 73 20 ...   2401  double_damage_msg:  dc.b    'Class Bonus - Double Damage!',$0D,$0A,0
00005562= 20 20 20 20 20 20 ...   2402  graveyard_msg:  dc.b    '      ,-=-.       ______     _',$0D,$0A
00005582= 20 20 20 20 20 2F ...   2403                  dc.b    '     /  +  \     />----->  _|1|_',$0D,$0A
000055A4= 20 20 20 20 20 7C ...   2404                  dc.b    '     | ~~~ |    // -/- /  |_ H _|',$0D,$0A
000055C7= 20 20 20 20 20 7C ...   2405                  dc.b    '     |R.I.P|   //  /  /     |S|',$0D,$0A
000055E8= 5C 76 56 2C 2C 7C ...   2406                  dc.b    '\vV,,|_____|V,//_____/VvV,v,|_|/,,vhjwv/,',$0D,$0A,0
00005614= 20 20 20 20 20 20 ...   2407  skeleton_msg:   dc.b    '           .-.',$0D,$0A
00005624= 20 2F 5C 5F 5F 5F ...   2408                  dc.b    ' /\____/\ (o.o)',$0D,$0A
00005635= 7C 20 20 5F 7C 7C ...   2409                  dc.b    '|  _||_  | |=|',$0D,$0A
00005645= 20 5C 2F 20 7C 7C ...   2410                  dc.b    ' \/ || \/ __|__',$0D,$0A
00005656= 20 20 20 20 7C 7C ...   2411                  dc.b    '    ||\_//.=|=.\\',$0D,$0A
00005669= 20 20 20 20 7C 7C ...   2412                  dc.b    '    ||\_/ .=|=. \\',$0D,$0A
0000567D= 20 20 20 20 7C 7C ...   2413                  dc.b    '    ||    .=|=. //',$0D,$0A
00005691= 20 20 20 20 7C 7C ...   2414                  dc.b    '    ||    (_=_)//',$0D,$0A
000056A4= 20 20 20 20 7C 7C ...   2415                  dc.b    '    ||   (:| |:)',$0D,$0A
000056B6= 20 20 20 20 7C 7C ...   2416                  dc.b    '    ||    || ||',$0D,$0A
000056C7= 20 20 20 20 7C 7C ...   2417                  dc.b    '    ||    () ()',$0D,$0A
000056D8= 20 20 20 20 2F 5C ...   2418                  dc.b    '    /\    || ||',$0D,$0A
000056E9= 20 20 20 20 7C 7C ...   2419                  dc.b    '    ||    || ||',$0D,$0A
000056FA= 20 20 20 20 5C 2F ...   2420                  dc.b    '    \/  ==   ==',$0D,$0A,0
0000570C= 20 20 20 20 20 20 ...   2421  merchant_msg:   dc.b    '         ____',$0D,$0A
0000571B= 20 20 20 20 20 20 ...   2422                  dc.b    '        |    |',$0D,$0A
0000572B= 20 20 20 20 20 20 ...   2423                  dc.b    '      --:<<>>:--',$0D,$0A
0000573D= 20 20 20 20 20 20 ...   2424                  dc.b    '        :~_~ :',$0D,$0A
0000574D= 20 20 20 20 20 20 ...   2425                  dc.b    '        _:"":\___',$0D,$0A
00005760= 20 20 5F 5F 5F 5F ...   2426                  dc.b    '  ____./ :::     \._',$0D,$0A
00005776= 3C 3C 3D 29 20 20 ...   2427                  dc.b    '<<=)           \    :',$0D,$0A
0000578D= 20 5C 2F 2D 2D 2D ...   2428                  dc.b    ' \/---/\_      /\._. ',$0D,$0A
000057A4= 20 7C 7C 20 20 20 ...   2429                  dc.b    ' ||       \====:_ ""',$0D,$0A
000057BA= 20 7C 7C 20 20 20 ...   2430                  dc.b    ' ||      ./     \\',$0D,$0A
000057CE= 20 7C 7C 20 20 20 ...   2431                  dc.b    ' ||     :       :',$0D,$0A
000057E1= 20 7C 7C 20 20 20 ...   2432                  dc.b    ' ||    /   :    \',$0D,$0A
000057F4= 20 7C 7C 20 20 20 ...   2433                  dc.b    ' ||   :   .      \.',$0D,$0A
00005809= 20 7C 7C 20 20 20 ...   2434                  dc.b    ' ||   :  : :      :',$0D,$0A
0000581E= 20 7C 7C 20 20 20 ...   2435                  dc.b    ' ||   :__:-:__.;--',$0D,$0A,0
00005833= 20 20 20 20 20 20 ...   2436  castle_msg:     dc.b    '                T~~',$0D,$0A
00005848= 20 20 20 20 20 20 ...   2437                  dc.b    '                |',$0D,$0A
0000585B= 20 20 20 20 20 20 ...   2438                  dc.b    '               /"\',$0D,$0A
0000586F= 20 20 20 20 20 20 ...   2439                  dc.b    '       T~~     |.| T~~',$0D,$0A
00005887= 20 20 20 54 7E 7E ...   2440                  dc.b    '   T~~ |    T~ WWWW|',$0D,$0A
0000589D= 20 20 20 7C 20 20 ...   2441                  dc.b    '   |  /"\   |  |  |/\T~~',$0D,$0A
000058B7= 20 20 2F 22 5C 20 ...   2442                  dc.b    '  /"\ WWW  /"\ |. |WW|',$0D,$0A
000058CF= 20 57 57 57 57 57 ...   2443                  dc.b    ' WWWWW/\| /   \|./\|/"\',$0D,$0A
000058E8= 20 7C 20 20 20 2F ...   2444                  dc.b    ' |   /__\/]WWW[\/__\WWWW',$0D,$0A
00005902= 20 7C 22 20 20 57 ...   2445                  dc.b    ' |"  WWWW.|I_I|.WWWW.   |',$0D,$0A
0000591D= 20 7C 20 20 20 7C ...   2446                  dc.b    ' |   |. |/  -  \|. |.  |',$0D,$0A
00005937= 20 7C 2E 20 20 7C ...   2447                  dc.b    ' |.  |  |LI=H=LI|. |   |',$0D,$0A
00005951= 20 7C 20 20 20 7C ...   2448                  dc.b    ' |   |. | |[_]| |  |.  |',$0D,$0A
0000596B= 20 7C 20 20 20 7C ...   2449                  dc.b    ' |   |  |_|###|_|  |   |',$0D,$0A
00005985= 20 20 2D 2D 2D 20 ...   2450                  dc.b    '  --- -- -/___\- -- --- ',$0D,$0A,0
000059A0                          2451                  
000059A0                          2452  
000059A0                          2453  
000059A0                          2454  
000059A0                          2455  
000059A0                          2456  
000059A0                          2457  
000059A0                          2458  
000059A0                          2459  
000059A0                          2460  
000059A0                          2461  
000059A0                          2462  
000059A0                          2463  
000059A0                          2464  
000059A0                          2465  
000059A0                          2466  
000059A0                          2467  
000059A0                          2468      end start

No errors detected
No warnings generated


SYMBOL TABLE INFORMATION
Symbol-name         Value
-------------------------
ALIVE               3
BATTLE_WON_MSG      526F
BLANK_TILE          4E07
BLOCKED_TILE        4E17
BLOCK_COUNTER       3A1C
BLUE                FF0000
BOTH_BLOCK          3AB4
BOTH_BLOCK_MSG      4F17
BOTH_CAST_MAGIC     3AC6
BOTH_CAST_MAGIC_MSG  4F3C
BOTH_MELEE          3AD8
BOTH_MELEE_MSG      4F91
BOTH_TILE           4E0B
BRACKET_CLOSE_MSG   52A3
BRACKET_OPEN_MSG    52A1
BUY_ITEM_MSG        546F
BUY_KEY             3C68
BUY_POTION          3C32
BUY_TORCH           3CA0
CASTLE_MSG          5833
CAST_MAGIC          3A36
CHANGE_FONT_COLOUR  3E1E
CHECK_FOR_ENEMIES   3FF2
CHECK_FOR_ENEMY     4014
CHECK_FOR_LOOT      3F50
CHECK_FOR_LOOT_PILES  3F2C
CHECK_FOR_PLAYER    3FAA
CHECK_FOR_SHOP      408A
CHECK_FOR_SHOPS     4068
CHECK_FOR_WIN_POINT  40D4
CLASS               2
CLEAR_SCREEN        382C
COLON_MSG           4B3A
COMBAT              39DA
COMBAT_MSG          4E5F
CONTINUE_MSG        4DE9
CRLF                451A
CSR_POS_BATTLE      2001
CSR_POS_MOVE        3201
CSR_POS_SHOP_P      3401
CSR_POS_SHOP_S      1801
DAMAGE              1
DAMAGE_ENEMY        3B7A
DAMAGE_LVL_MSG      5222
DAMAGE_PLAYER       3BB4
DAMAGE_UP_MSG       525C
DAMAGE_UP_PRICE     14
DEATH_MSG           52A5
DECORATE            380E
DECREMENT_TORCH     3E10
DOOR_MARK           4E25
DOUBLE_DAMAGE_ENEMY  3B8A
DOUBLE_DAMAGE_MSG   5543
DOUBLE_DAMAGE_PLAYER  3BCA
DRAW                3476
DRAW_BATTLE_INFO    35EA
DRAW_BLANK_TILE     3F1E
DRAW_BLOCKED_TILE   3EE6
DRAW_BOTH_TILE      3EF4
DRAW_CASTLE         34B2
DRAW_ENEMY          4028
DRAW_GRAVEYARD      34A4
DRAW_HUD            34CE
DRAW_ITEM_NUMBER    35C8
DRAW_LEFT_TILE      3F02
DRAW_LOOP           3E30
DRAW_LOOT           3F68
DRAW_MERCHANT       34C0
DRAW_PLAYER         3FB2
DRAW_PLAYER_INFO    34EE
DRAW_RIGHT_TILE     3F10
DRAW_SHOP           4094
DRAW_SHOP_INFO      3664
DRAW_SKELETON       3496
DRAW_TILE           3E82
DRAW_WIN_POINT      40E0
ENCOUNTER_MSG       4E27
END                 3006
ENDL                385C
ENEMIES_CHECK       3336
ENEMIES_LOOP        3344
ENEMY_ALIVE_CHECK   343E
ENEMY_CHECK         3362
ENEMY_DIED          3448
ENEMY_HEALTH_MSG    5206
ENEMY_MARK          4E1D
ENEMY_MAX           2
ENTER_COMBAT        3396
ENTER_SHOP          3416
ESCAPE_ATTACK       3A7A
ESCAPE_MSG          4EC1
EXIT                0
FAIL_ESCAPE         3A98
FAIL_ESCAPE_MSG     4EDC
FAKE_GAMESTATE_MSG  4B64
FIRST_DOOR          6FE0
FIRST_ENEMY         6000
FIRST_LOOT          7000
FIRST_SHOP          6500
FONT                1090000
GAME                3000
GAMELOOP            3170
GAMEPLAY            37E0
GAME_STATE          5FF3
GOLD                FFFF
GOLD_MSG            523A
GRAVEYARD_MSG       5562
GREEN               FF00
HEALTH_MSG          51FD
HIT_AGAINST_BLOCK   3AEA
HIT_AGAINST_BLOCK_MSG  4FDA
HIT_AGAINST_MAGIC   3B00
HIT_AGAINST_MAGIC_MSG  5022
HIT_AGAINST_MELEE   3B16
HIT_AGAINST_MELEE_MSG  5086
HIT_BY_COUNTER      3B2C
HIT_BY_COUNTER_MSG  50DC
HIT_BY_MAGIC        3B46
HIT_BY_MAGIC_MSG    513F
HIT_BY_MELEE        3B60
HIT_BY_MELEE_MSG    51AF
INPUT               311E
INPUT_ERROR_MSG     4B3D
INPUT_NUMS_MSG      4B21
INVALID_INPUT       3162
INVENTORY_MSG       522F
KEY_MSG             5242
KEY_PRICE           F
KNIGHT_ROLE_MSG     4B7D
KNIGHT_SELECT       3062
KNIGHT_SPEC_MSG     4BCF
LEAVE_SHOP          3D12
LEAVE_SHOP_MSG      5449
LEFT_TILE           4E0F
LIFE_PER_TORCH      F
LOOP_COLUMNS        3E5C
LOOP_ENEMIES        4000
LOOP_LOOT_PILES     3F3A
LOOP_MSG            4778
LOOP_ROWS           3E46
LOOP_SHOPS          4076
LOOT_MARK           4E23
LOOT_PILES_CHECK    3224
LOOT_PILE_CHECK     3246
LOOT_PILE_LOOP      3232
L_ACTIVE            6
MAGE_ROLE_MSG       4C1D
MAGE_SELECT         3092
MAGE_SPEC_MSG       4C67
MANAGE_INPUT        3148
MANAGE_TORCH        3302
MAP_LENGTH          F
MAP_START_POINT     8080
MAROON              80
MAX_DOORS           1
MELEE_ATTACK        3A50
MERCHANT_MSG        570C
MOVEMENT            3872
MOVEMENT_BLOCKED    39C8
MOVEMENT_BLOCKED_MSG  4DCE
MOVEMENT_CHECKS     3208
MOVEMENT_MSG        4D3C
MOVE_EAST           3984
MOVE_EAST_MSG       4DA3
MOVE_NORTH          38B4
MOVE_NORTH_MSG      4D94
MOVE_SOUTH          38FA
MOVE_SOUTH_MSG      4DB1
MOVE_WEST           3940
MOVE_WEST_MSG       4DC0
NO_ITEM_MSG         54BD
NO_MONEY            3D34
NO_MONEY_MSG        549D
NO_POTIONS          3E00
NO_POTIONS_MSG      5391
NO_SHOP_DAMAGE_UP   3D92
NO_SHOP_KEYS        3D62
NO_SHOP_POTIONS     3D4A
NO_SHOP_TORCHES     3D7A
NO_TORCH_MSG        54E8
OUT                 3816
PICKUP_GOLD_MSG     551C
PICKUP_KEY_MSG      552E
PICKUP_LOOT         325C
PICKUP_LOOT_MSG     5500
PICKUP_POTION_MSG   5524
PICKUP_TORCH_MSG    5535
PICK_ROLE           301C
PICK_ROLE_MSG       49AA
PLAYER              5FF0
PLAYER_DEAD         31B0
PLAYER_MARK         4E1B
PLAYER_MSG          5491
PLA_CLASS           5FF2
PLA_DAMAGE          5FF1
PLA_GOLD            5FF8
PLA_KEYS            5FFA
PLA_POTIONS         5FF9
PLA_P_POS           5FF6
PLA_TORCH           5FFB
POSITION            4
POTIONS_MSG         5249
POTION_PRICE        5
PRESS_CONTINUE      3DAA
PURPLE              F000F0
RANDOM_NUMBER       3DC2
RED                 FF
REPLAY              3838
REPLAY_MSG          4868
RETURN              3DDC
RIGHT_TILE          4E13
ROGUE_ROLE_MSG      4CAA
ROGUE_SELECT        30C2
ROGUE_SPEC_MSG      4CF2
ROLE_INPUT          3044
SETUP_ENEMIES       441A
SETUP_LOOT          4458
SETUP_PLAYER        44A0
SETUP_SHOPS         44DC
SETUP_WORLD         4120
SHOP                3BF6
SHOPS_CHECK         33C0
SHOPS_LOOP          33CE
SHOP_CHECK          33EC
SHOP_ENTER_MSG      53AB
SHOP_MARK           4E21
SHOP_MAX            2
SHOP_MSG            53DD
SHOP_STOCK_MSG      5485
SKELETON_MSG        5614
START               1000
S_DAMAGE_IN         5
S_KEYS              3
S_POTIONS           2
S_TORCHES           4
TAKE_POTION         3DDE
TAKE_POTION_MSG     5357
TORCHES_MSG         5253
TORCH_MSG           5215
TORCH_PRICE         A
TRY_RUN             3A6A
TUTORIAL_INTRO      30F2
TUTORIAL_MSG        477A
UPDATE              3186
UPGRADE_DMG         3CDA
WAKE_UP_MSG         4892
WALL_COLLISIONS     3892
WELCOME             300A
WELCOME_MSG         451D
WHITE               FFFFFF
WIN_MSG             530A
WIN_POINT           8156
WIN_POINT_MARK      4E1F
WON_GAME            31DA

00001000 Starting Address
Assembler used: EASy68K Editor/Assembler v5.16.01
Created On: 22/03/2019 17:24:37

00000000                             1  *-------------------------------------------------------
00000000                             2  * Author         : Michael Rainsford Ryan
00000000                             3  * Student Number : C00239510
00000000                             4  * Date Created   : 21/01/2019
00000000                             5  * Description    : A simplified, offline clone of the
00000000                             6  *                : online game "Avalon".
00000000                             7  * Issues/Bugs    : None currenty.
00000000                             8  *-------------------------------------------------------
00000000                             9  
00001000                            10      org $1000
00001000                            11  
00001000                            12  *-------------------------------------------------------
00001000                            13  *Choose to be a Worker or a God 
00001000                            14  *https://www.avalon-rpg.com/
00001000                            15  *-------------------------------------------------------
00001000                            16  
00001000                            17  *-------------------------------------------------------
00001000                            18  *-------------------Game Information-------------------
00001000                            19  *-------------------------------------------------------
00001000                            20  *A6 is used for player coordinates
00001000                            21  *A5 is used for enemy coordinates when in combat or looping through them
00001000                            22  *A5 is used for shops when in shop screen or when looping through them
00001000                            23  *A4 occasionally used for displaying the inventory
00001000                            24  *D5 is used occasionally for input range
00001000                            25  *$5FF0 holds player information
00001000                            26  *$6000 to $64F0 holds enemies
00001000                            27  *$6500 to $6FF0 holds shops
00001000                            28  *$7000 to $7500 holds loot
00001000                            29  *$8000 to $9000 holds maps
00001000                            30  
00001000                            31  *Enemies:
00001000                            32  *Byte:  Name:
00001000                            33  *0      Health
00001000                            34  *1      Damage/level
00001000                            35  *2      enemy type (Knight, mage, rogue)
00001000                            36  *3      Alive state (1 == alive, 0 == dead)
00001000                            37  *4 & 5  Coordinates
00001000                            38  
00001000                            39  *Player:
00001000                            40  *Byte:  Name:
00001000                            41  *0      Health
00001000                            42  *1      Damage/level
00001000                            43  *2      Class (Knight, mage, rogue)
00001000                            44  *3      Game state
00001000                            45  *4-5+A6 Coordinates
00001000                            46  *6-7    Last coordinates
00001000                            47  *8      Gold
00001000                            48  *9      Potions
00001000                            49  *A      Keys
00001000                            50  *B      Torch life
00001000                            51  
00001000                            52  *Shops:
00001000                            53  *Byte:  Name:
00001000                            54  *0-1    Position
00001000                            55  *2      Potions
00001000                            56  *3      Keys
00001000                            57  *4      Torches
00001000                            58  *5      Damage increase
00001000                            59  
00001000                            60  *Loot:
00001000                            61  *Byte:  Name:
00001000                            62  *0-1    Position
00001000                            63  *2      Potions
00001000                            64  *3      Keys
00001000                            65  *4      Torches
00001000                            66  *5      Gold
00001000                            67  *6      Active State
00001000                            68      
00001000                            69  *Game state : 0 = Pick role/intro | 5 = Move around | 6 = Combat | 7 = Shop | 64 = End game
00001000                            70  *Class      : 1 corresponds to knight - 2 corresponds to mage - 3 corresponds to rogue
00001000                            71  
00001000                            72  
00001000                            73  *-------------------------------------------------------
00001000                            74  *Validation values to be used, modify as needed
00001000                            75  *Add additional validation values as required
00001000                            76  *-------------------------------------------------------
00001000  =00000000                 77  exit        EQU 0      used to exit assembly program
00001000                            78  
00001000                            79  * Text display
00001000  =000000FF                 80  RED         EQU $000000FF   Red colour value
00001000  =0000FF00                 81  GREEN       EQU $0000FF00   Green colour value
00001000  =00FF0000                 82  BLUE        EQU $00FF0000   Blue colour value
00001000  =00FFFFFF                 83  WHITE       EQU $00FFFFFF   White colour value
00001000  =00F000F0                 84  PURPLE      EQU $00F000F0   Purple colour value
00001000  =0000FFFF                 85  GOLD        EQU $0000FFFF   Purple colour value
00001000  =01090000                 86  FONT        EQU $01090000   Font value
00001000                            87  
00001000                            88  * Player
00001000  =00005FF0                 89  PLAYER      EQU $5FF0       Memory address for player information and health
00001000  =00005FF1                 90  PLA_DAMAGE  EQU $5FF1       Memory address for player damage value
00001000  =00005FF2                 91  PLA_CLASS   EQU $5FF2       The memory address for the player class
00001000  =00005FF3                 92  GAME_STATE  EQU $5FF3       The memory address of the game state
00001000  =00005FF6                 93  PLA_P_POS   EQU $5FF6       Memory location of the player's previous position
00001000  =00005FF8                 94  PLA_GOLD    EQU $5FF8       Memory address for player gold
00001000  =00005FF9                 95  PLA_POTIONS EQU $5FF9       Memory address for player potions
00001000  =00005FFA                 96  PLA_KEYS    EQU $5FFA       Memory address for player keys
00001000  =00005FFB                 97  PLA_TORCH   EQU $5FFB       Memory address for player torch life
00001000                            98  
00001000                            99  * Enemy
00001000  =00006000                100  FIRST_ENEMY EQU $6000       Memory location of the first enemy
00001000  =00000002                101  ENEMY_MAX   EQU 2           Number of enemies in the game
00001000                           102  
00001000  =00000001                103  DAMAGE      EQU 1           The number of bytes to move from the enemy before reaching the damage
00001000  =00000002                104  CLASS       EQU 2           The number of bytes to move from the enemy before reaching the class
00001000  =00000003                105  ALIVE       EQU 3           The number of bytes to move from the enemy before reaching the alive state
00001000  =00000004                106  POSITION    EQU 4           The number of bytes to move from the enemy before reaching the position
00001000                           107  
00001000                           108  * Shop & Loot
00001000  =00006500                109  FIRST_SHOP  EQU $6500       Memory location of the first shop
00001000  =00000002                110  SHOP_MAX    EQU 2           Number of shops in the game
00001000                           111  
00001000  =00000002                112  S_POTIONS   EQU 2           The number of bytes to move from the shop root before reaching the potions
00001000  =00000003                113  S_KEYS      EQU 3           The number of bytes to move from the shop root before reaching the keys
00001000  =00000004                114  S_TORCHES   EQU 4           The number of bytes to move from the shop root before reaching the torches
00001000  =00000005                115  S_DAMAGE_IN EQU 5           The number of bytes to move from the shop root before reaching the damage increase
00001000                           116  
00001000  =00007000                117  FIRST_LOOT  EQU $7000       Memory location of the first loot pile
00001000  =00000006                118  L_ACTIVE    EQU 6           The number of bytes to move from the loot pile root before reaching the active state
00001000                           119  
00001000                           120  * HUD
00001000  =00003201                121  CSR_POS_MOVE    EQU $3201   The cursor position to draw the HUD to when in movement state
00001000  =00002001                122  CSR_POS_BATTLE  EQU $2001   The cursor position to draw the HUD to when in battle state
00001000  =00001801                123  CSR_POS_SHOP_S  EQU $1801   The cursor position to draw the HUD to when in shop state for shop info
00001000  =00003401                124  CSR_POS_SHOP_P  EQU $3401   The cursor position to draw the HUD to when in shop state for player info
00001000                           125  
00001000                           126  * Game
00001000  =00008156                127  WIN_POINT   EQU $8156       The position the player has to get to to win
00001000                           128  
00001000  =00000005                129  POTION_PRICE    EQU 5       The price in gold for a potion
00001000  =0000000F                130  KEY_PRICE       EQU 15      The price in gold for a key
00001000  =0000000A                131  TORCH_PRICE     EQU 10      The price in gold for a torch
00001000  =00000014                132  DAMAGE_UP_PRICE EQU 20      The price in gold for a damage upgrade
00001000                           133  
00001000  =0000000F                134  LIFE_PER_TORCH  EQU 15      The life value each torch has
00001000                           135  
00001000  =00008080                136  MAP_START_POINT EQU $8080   The starting coordinates the map draws at
00001000  =0000000F                137  MAP_LENGTH      EQU 15      The number of tiles downwords the map will draw
00001000                           138  
00001000                           139  
00001000                           140  *Start of Game
00001000                           141  start:
00001000  6100 3496                142      bsr     setup_player
00001004  6100 311A                143      bsr     setup_world
00001008  6100 3408                144      bsr     setup_enemies
0000100C  6100 34C6                145      bsr     setup_shops
00001010  6100 343E                146      bsr     setup_loot
00001014                           147  
00001014  6100 1FF4                148      bsr     welcome    branch to the welcome subroutine
00001018  6100 2D90                149      bsr     press_continue
0000101C  6100 1FE2                150      bsr     game       branch to the game subroutine
00001020                           151  *Game loop
00003000                           152      org     $3000      the rest of the program is to be located from 3000 onwards
00003000                           153  
00003000                           154  *-------------------------------------------------------
00003000                           155  *-------------------Game Subroutine---------------------
00003000                           156  *-------------------------------------------------------
00003000                           157  game:
00003000  6100 016E                158      bsr     gameloop   branch to gameloop subroutine
00003004  4E75                     159      rts                return from game: subroutine
00003006                           160            
00003006                           161  end:
00003006  FFFF FFFF                162      simhalt
0000300A                           163  
0000300A                           164  *-------------------------------------------------------
0000300A                           165  *-------------------Welcome Subroutine------------------
0000300A                           166  *-------------------------------------------------------
0000300A                           167  welcome:
0000300A  43F9 00004515            168      lea     welcome_msg,A1  assign message to address register A1
00003010  103C 000E                169      move.b  #14,D0          move literal 14 to DO
00003014  4E4F                     170      trap    #15             trap and interpret value in D0
00003016  6100 0844                171      bsr     endl            branch to endl subroutine
0000301A                           172      
0000301A  4E75                     173      rts                     return from welcome: subroutine
0000301C                           174  
0000301C                           175  *-------------------------------------------------------
0000301C                           176  *-------------------Role Picking Subroutine------------------
0000301C                           177  *-------------------------------------------------------
0000301C                           178  pick_role:
0000301C                           179  
0000301C  43F9 0000488A            180      lea     wake_up_msg,A1  assign message to address register A1
00003022  103C 000E                181      move.b  #14,D0          move literal 14 to DO
00003026  4E4F                     182      trap    #15             trap and interpret value in D0
00003028  6100 0832                183      bsr     endl            branch to endl subroutine
0000302C                           184      
0000302C  43F9 000049A2            185      lea     pick_role_msg,A1 assign message to address register A1
00003032  103C 000E                186      move.b  #14,D0           move literal 14 to DO
00003036  4E4F                     187      trap    #15              trap and interpret value in D0
00003038                           188      
00003038  7A03                     189      move.l  #3,D5           Move the number 3 to D5 to tell the program how many options there are
0000303A                           190      
0000303A  6100 00E2                191      bsr     input           branch to the input subroutine
0000303E                           192      
0000303E  6100 0D6A                193      bsr     press_continue          Pause the game until a key is pressed
00003042                           194      
00003042  4E75                     195      rts                     return from pick_role subroutine
00003044                           196      
00003044                           197  role_input:
00003044  11C1 5FF2                198      move.b  D1,PLA_CLASS    Move the role number to player class memory location to hold the class number
00003048                           199      
00003048                           200      *Give the player a message depending on the role chosen
00003048  B23C 0001                201      CMP.B   #1,D1
0000304C  6700 0014                202      BEQ     knight_select   Branch to knight message if role selected
00003050                           203      
00003050  B23C 0002                204      CMP.B   #2,D1
00003054  6700 003C                205      BEQ     mage_select     Branch to mage message if role selected
00003058                           206      
00003058  B23C 0003                207      CMP.B   #3,D1
0000305C  6700 0064                208      BEQ     rogue_select    Branch to rogue message if role selected
00003060                           209      
00003060  4E75                     210      rts
00003062                           211      
00003062                           212  knight_select:
00003062  43F9 00004B75            213      lea     knight_role_msg,A1  assign message to address register A1
00003068  103C 000E                214      move.b  #14,D0              move literal 14 to DO
0000306C  4E4F                     215      trap    #15                 Display the knight message
0000306E                           216      
0000306E  223C 00F000F0            217      move.l  #PURPLE,D1          Load the purple colour
00003074  6100 0DA8                218      bsr     change_font_colour  Change the font colour
00003078                           219      
00003078  43F9 00004BC7            220      lea     knight_spec_msg,A1  assign message to address register A1
0000307E  103C 000E                221      move.b  #14,D0              move literal 14 to DO
00003082  4E4F                     222      trap    #15                 Display the knight message
00003084                           223      
00003084  223C 00FFFFFF            224      move.l  #WHITE,D1           Load the white colour
0000308A  6100 0D92                225      bsr     change_font_colour  Change the font colour
0000308E                           226      
0000308E  6000 0062                227      bra     tutorial_intro      Branch to tutorial subroutine
00003092                           228  
00003092                           229  mage_select:
00003092  43F9 00004C15            230      lea     mage_role_msg,A1    Assign message to address register A1
00003098  103C 000E                231      move.b  #14,D0              move literal 14 to DO
0000309C  4E4F                     232      trap    #15                 Display the mage message
0000309E                           233      
0000309E  223C 00F000F0            234      move.l  #PURPLE,D1          Load the purple colour
000030A4  6100 0D78                235      bsr     change_font_colour  Change the font colour
000030A8                           236      
000030A8  43F9 00004C5F            237      lea     mage_spec_msg,A1    assign message to address register A1
000030AE  103C 000E                238      move.b  #14,D0              move literal 14 to DO
000030B2  4E4F                     239      trap    #15                 Display the mage message
000030B4                           240      
000030B4  223C 00FFFFFF            241      move.l  #WHITE,D1           Load the white colour
000030BA  6100 0D62                242      bsr     change_font_colour  Change the font colour
000030BE                           243      
000030BE  6000 0032                244      bra     tutorial_intro      Branch to tutorial subroutine
000030C2                           245  
000030C2                           246  rogue_select:
000030C2  43F9 00004CA2            247      lea     rogue_role_msg,A1   Assign message to address register A1
000030C8  103C 000E                248      move.b  #14,D0              move literal 14 to DO
000030CC  4E4F                     249      trap    #15                 Display the rogue message
000030CE                           250      
000030CE  223C 00F000F0            251      move.l  #PURPLE,D1          Load the purple colour
000030D4  6100 0D48                252      bsr     change_font_colour  Change the font colour
000030D8                           253      
000030D8  43F9 00004CEA            254      lea     rogue_spec_msg,A1   Assign message to address register A1
000030DE  103C 000E                255      move.b  #14,D0              move literal 14 to DO
000030E2  4E4F                     256      trap    #15                 Display the rogue message
000030E4                           257      
000030E4  223C 00FFFFFF            258      move.l  #WHITE,D1           Load the white colour
000030EA  6100 0D32                259      bsr     change_font_colour  Change the font colour
000030EE                           260      
000030EE  6000 0002                261      bra     tutorial_intro      Branch to tutorial subroutine
000030F2                           262      
000030F2                           263  tutorial_intro:
000030F2  6100 0768                264      bsr     endl                Break to a new line
000030F6                           265  
000030F6  223C 000000FF            266      move.l  #RED,D1             Load the purple colour
000030FC  6100 0D20                267      bsr     change_font_colour  Change the font colour
00003100                           268      
00003100  43F9 00004772            269      lea     tutorial_msg,A1     Load tutorial message to address register A1
00003106  103C 000E                270      move.b  #14,D0              move literal 14 to DO
0000310A  4E4F                     271      trap    #15                 Display the tutorial message
0000310C                           272      
0000310C  223C 00FFFFFF            273      move.l  #WHITE,D1           Load the white colour
00003112  6100 0D0A                274      bsr     change_font_colour  Change the font colour
00003116                           275      
00003116  11FC 0005 5FF3           276      move.b  #5,GAME_STATE       Change the game state to the movement state
0000311C                           277      
0000311C  4E75                     278      rts
0000311E                           279      
0000311E                           280  *-------------------------------------------------------
0000311E                           281  *---------Gameplay Input Values Subroutine--------------
0000311E                           282  *-------------------------------------------------------    
0000311E                           283  input:
0000311E  6100 073C                284      bsr     endl            Branch to end line subroutine
00003122                           285      
00003122  43F9 00004B19            286      lea     input_nums_msg,A1 assign message to address register A1
00003128  103C 000E                287      move.b  #14,D0          move literal 14 to DO
0000312C  4E4F                     288      trap    #15             Display the "enter number" message
0000312E                           289      
0000312E  2205                     290      move.l  D5,D1           Move the number of options to D1 to display it
00003130  103C 0003                291      move.b  #3,D0           move literal 3 to DO
00003134  4E4F                     292      trap    #15             Display the number in D1 to show the input range
00003136                           293      
00003136  43F9 00004B32            294      lea     colon_msg,A1    assign message to address register A1
0000313C  103C 000E                295      move.b  #14,D0          move literal 14 to DO
00003140  4E4F                     296      trap    #15             Display a colon after the number range
00003142                           297      
00003142  103C 0004                298      move.b  #4,D0           Move the number 4 to D0
00003146  4E4F                     299      trap    #15             Take input
00003148                           300      
00003148                           301  manage_input:
00003148  B27C 0001                302      CMP     #1,D1           Check input against minimum value
0000314C  6D00 0014                303      BLT     invalid_input   Error if less than 1
00003150                           304      
00003150  B245                     305      CMP     D5,D1           Compare input against max value
00003152  6E00 000E                306      BGT     invalid_input   Error if more than max value
00003156                           307      
00003156  0C38 0000 5FF3           308      CMP.B   #0,GAME_STATE   Check which state the game is in
0000315C  6700 FEE6                309      BEQ     role_input      Branch to the manage input for the role picking
00003160                           310      
00003160  4E75                     311      rts                     Return out of subroutine
00003162                           312  
00003162                           313  invalid_input:
00003162  43F9 00004B35            314      lea     input_error_msg,A1 assign message to address register A1
00003168  103C 000E                315      move.b  #14,D0          move literal 14 to DO
0000316C  4E4F                     316      trap    #15             Display the error message
0000316E                           317      
0000316E  60AE                     318      bra     input           Go back to taking input
00003170                           319  
00003170                           320  *-------------------------------------------------------
00003170                           321  *----------------Gameloop (main loop)-------------------
00003170                           322  *------------------------------------------------------- 
00003170                           323  gameloop:
00003170  6100 06BA                324      bsr     clear_screen    clears the screen  
00003174  6100 0300                325      bsr     draw            branch to draw screen subroutine
00003178  6100 0354                326      bsr     draw_hud
0000317C  6100 0008                327      bsr     update          branch to update game subroutine 
00003180  6100 065E                328      bsr     gameplay        branch to gameplay subroutine
00003184  60EA                     329      bra     gameloop        Continue looping the game loop     
00003186                           330  
00003186                           331  *-------------------------------------------------------
00003186                           332  *----------------Update Quest Progress------------------
00003186                           333  *  Complete Quest
00003186                           334  *------------------------------------------------------- 
00003186                           335  update:
00003186  0C38 0000 5FF0           336      CMP.B   #0,PLAYER           Check if the player health is zero
0000318C  6F00 0022                337      BLE     player_dead         Player is dead if health is zero or below
00003190                           338      
00003190  BDFC 00008156            339      CMP.L   #WIN_POINT,A6       Check if the player is standing on the win point
00003196  6700 0042                340      BEQ     won_game            Branch to the won game subroutine
0000319A                           341  
0000319A  0C38 0005 5FF3           342      CMP.B   #5,GAME_STATE       Check which state the game is in
000031A0  6700 0066                343      BEQ     movement_checks     Check for enemies and shops if in movement state
000031A4  0C38 0006 5FF3           344      CMP.B   #6,GAME_STATE       Check which state the game is in
000031AA  6700 0292                345      BEQ     enemy_alive_check   Check if enemy is dead if in combat
000031AE                           346      
000031AE  4E75                     347      rts
000031B0                           348      
000031B0                           349  *-------------------------------------------------------
000031B0                           350  *---------------------Win or Lose----------------------- 
000031B0                           351  player_dead:
000031B0  6100 06AA                352      bsr     endl            Break to new line
000031B4                           353      
000031B4  43F9 0000529B            354      lea     death_msg,A1    Load the death message
000031BA  103C 000E                355      move.b  #14,D0          Move byte #14 to D0 for the trap command
000031BE  4E4F                     356      trap    #15             Display the loaded message
000031C0                           357  
000031C0  6100 0BE8                358      bsr     press_continue  Pause to get input
000031C4  6100 0666                359      bsr     clear_screen    Clear the screen
000031C8  6100 02DA                360      bsr     draw_graveyard  Draw a graveyard
000031CC  6100 068E                361      bsr     endl            Break to new line
000031D0  11FC 0040 5FF3           362      move.b  #64,GAME_STATE  Set the game state to end game
000031D6  6000 0660                363      bra     replay          Give the player the option to restart or quit
000031DA                           364      
000031DA                           365  won_game:
000031DA  6100 0680                366      bsr     endl            Break to new line
000031DE                           367      
000031DE  43F9 00005300            368      lea     win_msg,A1      Load the win message
000031E4  103C 000E                369      move.b  #14,D0          Move byte #14 to D0 for the trap command
000031E8  4E4F                     370      trap    #15             Display the loaded message
000031EA                           371  
000031EA  6100 0BBE                372      bsr     press_continue  Pause to get input
000031EE  6100 063C                373      bsr     clear_screen    Clear the screen
000031F2  6100 0668                374      bsr     endl            Break to new line
000031F6  6100 02BA                375      bsr     draw_castle     Draw a castle
000031FA  6100 0660                376      bsr     endl            Break to new line
000031FE  11FC 0040 5FF3           377      move.b  #64,GAME_STATE  Set the game state to end game
00003204  6000 0632                378      bra     replay          Give the player the option to restart or quit
00003208                           379  
00003208                           380  *-------------------------------------------------------
00003208                           381  *--------------------Movement State--------------------- 
00003208                           382  movement_checks:
00003208  6100 00F8                383      bsr     manage_torch    Check if the torch life is zero and if damage player if so
0000320C  6100 0016                384      bsr     loot_piles_check Check for loot piles under the player 
00003210  6100 0124                385      bsr     enemies_check   Check for enemies beside the player
00003214  0C38 0005 5FF3           386      CMP.B   #5,GAME_STATE   Compare the movement gamestate number with the current gamestate
0000321A  6600 0BC0                387      BNE     return          Return from the loop if the game is not in the movement state anymore
0000321E  6100 01A0                388      bsr     shops_check     Check for shops beside the player
00003222                           389      
00003222  4E75                     390      rts
00003224                           391  
00003224                           392  *-------------------Loot pile checks--------------------
00003224                           393  loot_piles_check:
00003224  4BF8 7000                394      lea     FIRST_LOOT,A5   Load the memory address of the first loot pile
00003228  1A3C 0000                395      move.b  #0,D5           Move the starting loot number to D5
0000322C  6100 0004                396      bsr     loot_pile_loop  Loop through all loot piles
00003230  4E75                     397      rts                     Return from subroutine
00003232                           398      
00003232                           399  loot_pile_loop:
00003232  BA3C 0002                400      CMP.B   #ENEMY_MAX,D5   Compare the loot number with the maximum enemy number
00003236  6C00 0BA4                401      BGE     return          Return from the loop if the current loot number is greater than or equal to the max
0000323A                           402  
0000323A  6100 000A                403      bsr     loot_pile_check Check for a loot pile
0000323E                           404      
0000323E  5205                     405      add.b   #1,D5           Add to the current loot number
00003240  DAFC 000C                406      add.w   #12,A5          Add to the current loot pointer to move to the next loot pile
00003244  60EC                     407      bra     loot_pile_loop  Keep looping the loot piles
00003246                           408      
00003246                           409  loot_pile_check:
00003246  5C4D                     410      add.w   #L_ACTIVE,A5    Move to the active state
00003248  0C15 0000                411      CMP.B   #0,(A5)         Check if the loot is active
0000324C  5D4D                     412      sub.w   #L_ACTIVE,A5    Move to the active state
0000324E  6700 0B8C                413      BEQ     return          Return if not active
00003252                           414  
00003252  3415                     415      move.w  (A5),D2         Move the loot pile position to D2 for large value comparison
00003254  BDC2                     416      CMP.L   D2,A6           Check if the player is on a loot pile   
00003256  6700 0004                417      BEQ     pickup_loot     Pickup the loot
0000325A                           418      
0000325A  4E75                     419      rts     Return if not touching a loot pile
0000325C                           420      
0000325C                           421  pickup_loot:
0000325C  6100 05FE                422      bsr     endl                Line break
00003260                           423      
00003260  223C 0000FFFF            424      move.l  #GOLD,D1            Load gold colour
00003266  6100 0BB6                425      bsr     change_font_colour  Change the font colour
0000326A                           426      
0000326A  43F9 000054F6            427      LEA     pickup_loot_msg,A1  Load the encounter message int A1
00003270  103C 000E                428      move.b  #14,D0              Move #14 to D0 to display message
00003274  4E4F                     429      trap    #15                 Display the loaded message
00003276                           430      
00003276  544D                     431      add.w   #S_POTIONS,A5       Move to potions number
00003278  1215                     432      move.b  (A5),D1            Move the loot potions number to D1 and increment
0000327A  D338 5FF9                433      add.b   D1,PLA_POTIONS      Give the player the number of potions in the loot
0000327E                           434      
0000327E  43F9 0000551A            435      LEA     pickup_potion_msg,A1  Load the pickup potions message into A1
00003284  103C 000E                436      move.b  #14,D0              Move #14 to D0 to display message
00003288  4E4F                     437      trap    #15                 Display the loaded message
0000328A                           438      
0000328A  384D                     439      move.w  A5,A4               Move the item number to A4 to draw it
0000328C  6100 033A                440      bsr     draw_item_number    Draw the item number
00003290  6100 05CA                441      bsr     endl                Break to new line
00003294  524D                     442      add.w   #1,A5               Move to the next item in the loot pile
00003296                           443      
00003296  1215                     444      move.b  (A5),D1             Move the key number to D1 and increment
00003298  D338 5FFA                445      add.b   D1,PLA_KEYS         Give the player the number of keys in the loot
0000329C                           446      
0000329C  43F9 00005524            447      LEA     pickup_key_msg,A1   Load the pickup key message into A1
000032A2  103C 000E                448      move.b  #14,D0              Move #14 to D0 to display message
000032A6  4E4F                     449      trap    #15                 Display the loaded message
000032A8                           450      
000032A8  384D                     451      move.w  A5,A4               Move the item number to A4 to draw it
000032AA  6100 031C                452      bsr     draw_item_number    Draw the item number
000032AE  6100 05AC                453      bsr     endl                Break to new line
000032B2  524D                     454      add.w   #1,A5               Move to the next item in the loot pile
000032B4                           455      
000032B4  1215                     456      move.b  (A5),D1             Move the torch number to D1 and increment
000032B6  D338 5FFB                457      add.b   D1,PLA_TORCH        Give the player the number of torches in the loot
000032BA                           458      
000032BA  43F9 0000552B            459      LEA     pickup_torch_msg,A1 Load the pickup torch message into A1
000032C0  103C 000E                460      move.b  #14,D0              Move #14 to D0 to display message
000032C4  4E4F                     461      trap    #15                 Display the loaded message
000032C6                           462      
000032C6  384D                     463      move.w  A5,A4               Move the item number to A4 to draw it
000032C8  6100 02FE                464      bsr     draw_item_number    Draw the item number
000032CC  6100 058E                465      bsr     endl                Break to new line
000032D0  524D                     466      add.w   #1,A5               Move to the next item in the loot pile
000032D2                           467      
000032D2  1215                     468      move.b  (A5),D1             Move the torch number to D1 and increment
000032D4  D338 5FF8                469      add.b   D1,PLA_GOLD         Give the player the number of gold in the loot
000032D8                           470      
000032D8  43F9 00005512            471      LEA     pickup_gold_msg,A1  Load the pickup gold message int A1
000032DE  103C 000E                472      move.b  #14,D0              Move #14 to D0 to display message
000032E2  4E4F                     473      trap    #15                 Display the loaded message
000032E4                           474      
000032E4  384D                     475      move.w  A5,A4               Move the item number to A4 to draw it
000032E6  6100 02E0                476      bsr     draw_item_number    Draw the item number
000032EA  6100 0570                477      bsr     endl                Break to new line
000032EE  524D                     478      add.w   #1,A5               Move to the next item in the loot pile
000032F0                           479      
000032F0  1ABC 0000                480      move.b  #0,(A5)             Set the loot to not active
000032F4  5D4D                     481      sub.w   #L_ACTIVE,A5        Move to active state
000032F6                           482      
000032F6  223C 00FFFFFF            483      move.l  #WHITE,D1           Load the white colour
000032FC  6100 0B20                484      bsr     change_font_colour  Change the font colour
00003300                           485      
00003300  4E75                     486      rts
00003302                           487  
00003302                           488  *---------------------Manage Torch----------------------
00003302                           489  manage_torch:
00003302  0C38 0000 5FFB           490      CMP.B   #0,PLA_TORCH    Compare the torch life with zero
00003308  6E00 0AD2                491      BGT     return          Return if the torch life is greater than zero
0000330C                           492      
0000330C  5338 5FF0                493      sub.b   #1,PLAYER       Remove one health from the player
00003310                           494      
00003310  6100 054A                495      bsr     endl            Break to new line
00003314                           496      
00003314  223C 000000FF            497      move.l  #RED,D1
0000331A  6100 0B02                498      bsr     change_font_colour  Change the font colour
0000331E                           499      
0000331E  43F9 000054DE            500      lea     no_torch_msg,A1 Load the no torch message into A1
00003324  103C 000E                501      move.b  #14,D0          Move the number literal 14 into D0 for trap command
00003328  4E4F                     502      trap    #15             Display the loaded message
0000332A                           503      
0000332A  223C 00FFFFFF            504      move.l  #WHITE,D1
00003330  6100 0AEC                505      bsr     change_font_colour  Change the font colour
00003334                           506      
00003334  4E75                     507      rts                     Return from the subroutine
00003336                           508  
00003336                           509  *--------------------Enemy Checking--------------------- 
00003336                           510  enemies_check:
00003336  4BF8 6000                511      lea     FIRST_ENEMY,A5  Load the memory address of the first enemy
0000333A  1A3C 0000                512      move.b  #0,D5           Move the starting enemy number to D5
0000333E  6100 0004                513      bsr     enemies_loop    Loop through all enemies
00003342  4E75                     514      rts                     Return from subroutine
00003344                           515      
00003344                           516  enemies_loop:
00003344  BA3C 0002                517      CMP.B   #ENEMY_MAX,D5   Compare the enemy number with the maximum enemy number
00003348  6C00 0A92                518      BGE     return          Return from the loop if the current enemy number is greater than or equal to the max
0000334C                           519  
0000334C  6100 0014                520      bsr     enemy_check     Check for an enemy
00003350                           521      
00003350  0C38 0005 5FF3           522      CMP.B   #5,GAME_STATE   Compare the movement gamestate number with the current gamestate
00003356  6600 0A84                523      BNE     return          Return from the loop if the game is not in the movement state anymore
0000335A                           524      
0000335A  5205                     525      add.b   #1,D5           Add to the current enemy number
0000335C  DAFC 000C                526      add.w   #12,A5          Add to the current enemy pointer to move to the next enemy (16 for next enemy - 4 to get back from position)
00003360  60E2                     527      bra     enemies_loop    Keep looping the enemies
00003362                           528      
00003362                           529  
00003362                           530  enemy_check:
00003362  564D                     531      add.w   #ALIVE,A5       Move into enemy information to check if its alive
00003364  0C1D 0000                532      CMP.B   #0,(A5)+        Check if the enemy is alive
00003368  6700 0A72                533      BEQ     return          Return from the check if the enemy is dead
0000336C                           534      
0000336C  340E                     535      move.w  A6,D2           Move the player position to D2
0000336E                           536      
0000336E                           537      *Check if the player is beside an enemy
0000336E  0442 0010                538      sub.w   #16,D2          Check north
00003372  B455                     539      CMP.W   (A5),D2           
00003374  6700 0020                540      BEQ     enter_combat    Enter the player into combat
00003378                           541      
00003378  0642 0020                542      add.w   #32,D2          Check south
0000337C  B455                     543      CMP.W   (A5),D2           
0000337E  6700 0016                544      BEQ     enter_combat    Enter the player into combat
00003382                           545      
00003382  0442 0011                546      sub.w   #17,D2          Check west
00003386  B455                     547      CMP.W   (A5),D2           
00003388  6700 000C                548      BEQ     enter_combat    Enter the player into combat
0000338C                           549      
0000338C  5442                     550      add.w   #2,D2           Check east
0000338E  B455                     551      CMP.W   (A5),D2           
00003390  6700 0004                552      BEQ     enter_combat    Enter the player into combat
00003394                           553      
00003394  4E75                     554      rts     Return if not touching an enemy
00003396                           555      
00003396                           556  enter_combat:
00003396  594D                     557      sub.w   #4,A5               Get the memory address of the enemy opposed to it's position
00003398  11FC 0006 5FF3           558      move.b  #6,GAME_STATE       Move to combat state
0000339E                           559      
0000339E  6100 04BC                560      bsr     endl                Line break
000033A2                           561      
000033A2  43F9 00004E1D            562      LEA     encounter_msg,A1    Load the encounter message int A1
000033A8  103C 000E                563      move.b  #14,D0              Move #14 to D0 to display message
000033AC  4E4F                     564      trap    #15                 Display the loaded message
000033AE                           565      
000033AE  6100 09FA                566      bsr     press_continue      Branch to the press to continue subroutine
000033B2                           567      
000033B2  6100 0478                568      bsr     clear_screen        Clear the screen
000033B6                           569      
000033B6  6100 00DE                570      bsr     draw_skeleton       Draw the enemy
000033BA  6100 022E                571      bsr     draw_battle_info    Draw the info
000033BE                           572      
000033BE  4E75                     573      rts
000033C0                           574        
000033C0                           575  *--------------------Shop Checking----------------------
000033C0                           576  shops_check:
000033C0  4BF8 6500                577      lea     FIRST_SHOP,A5   Load the memory address of the first shop
000033C4  1A3C 0000                578      move.b  #0,D5           Move the starting shop number to D5
000033C8  6100 0004                579      bsr     shops_loop      Loop through all shops
000033CC  4E75                     580      rts                     Return from subroutine
000033CE                           581      
000033CE                           582  shops_loop:
000033CE  BA3C 0002                583      CMP.B   #SHOP_MAX,D5    Compare the shop number with the maximum shop number
000033D2  6C00 0A08                584      BGE     return          Return from the loop if the current shop number is greater than or equal to the max
000033D6                           585      
000033D6  6100 0014                586      bsr     shop_check      Check for a shop
000033DA                           587      
000033DA  0C38 0005 5FF3           588      CMP.B   #5,GAME_STATE   Compare the movement gamestate number with the current gamestate
000033E0  6600 09FA                589      BNE     return          Return from the loop if the game is not in the movement state anymore
000033E4                           590      
000033E4  5205                     591      add.b   #1,D5           Add to the current shop number
000033E6  DAFC 0010                592      add.w   #16,A5          Add to the current shop pointer to move to the next shop
000033EA  60E2                     593      bra     shops_loop      Keep looping the shops
000033EC                           594      
000033EC                           595  shop_check:    
000033EC  340E                     596      move.w  A6,D2           Move the player position to D2
000033EE                           597      
000033EE                           598      *Check if the player is beside a shop
000033EE  0442 0010                599      sub.w   #16,D2          Check north
000033F2  B455                     600      CMP.W   (A5),D2           
000033F4  6700 0020                601      BEQ     enter_shop      The player enters a shop
000033F8                           602      
000033F8  0642 0020                603      add.w   #32,D2          Check south
000033FC  B455                     604      CMP.W   (A5),D2           
000033FE  6700 0016                605      BEQ     enter_shop      The player enters a shop
00003402                           606      
00003402  0442 0011                607      sub.w   #17,D2          Check west
00003406  B455                     608      CMP.W   (A5),D2           
00003408  6700 000C                609      BEQ     enter_shop      The player enters a shop
0000340C                           610      
0000340C  5442                     611      add.w   #2,D2           Check east
0000340E  B455                     612      CMP.W   (A5),D2           
00003410  6700 0004                613      BEQ     enter_shop      The player enters a shop
00003414                           614      
00003414  4E75                     615      rts     Return if not touching a shop
00003416                           616      
00003416                           617  enter_shop:
00003416  11FC 0007 5FF3           618      move.b  #7,GAME_STATE       Move to shop game state
0000341C                           619      
0000341C  6100 043E                620      bsr     endl                Line break
00003420                           621      
00003420  43F9 000053A1            622      LEA     shop_enter_msg,A1   Load the encounter message int A1
00003426  103C 000E                623      move.b  #14,D0              Move #14 to D0 to display message
0000342A  4E4F                     624      trap    #15                 Display the loaded message
0000342C                           625      
0000342C  6100 097C                626      bsr     press_continue      Branch to the press to continue subroutine
00003430                           627      
00003430  6100 03FA                628      bsr     clear_screen        Clear the screen
00003434                           629      
00003434  6100 008A                630      bsr     draw_merchant       Draw the merchant
00003438  6100 022A                631      bsr     draw_shop_info      Draw the info
0000343C                           632      
0000343C  4E75                     633      rts
0000343E                           634  
0000343E                           635  *-------------------------------------------------------
0000343E                           636  *---------------------Combat State---------------------- 
0000343E                           637  enemy_alive_check:
0000343E  0C15 0000                638      CMP.B   #0,(A5)     Compare the enemy health with zero
00003442  6F00 0004                639      BLE     enemy_died  If the enemy health is zero or below, they died
00003446                           640      
00003446  4E75                     641      rts
00003448                           642      
00003448                           643  enemy_died:
00003448  6100 0412                644      bsr     endl            Break to a new line
0000344C                           645  
0000344C  43F9 00005265            646      lea     battle_won_msg,A1   Load the won battle message
00003452  103C 000E                647      move.b  #14,D0              Move the literal #14 to D0 for trap task #14
00003456  4E4F                     648      trap    #15                 Display the message
00003458                           649      
00003458  11FC 0005 5FF3           650      move.b  #5,GAME_STATE   Set the game state mack to movement state
0000345E  564D                     651      add.w   #ALIVE,A5       Move from the enemy health to its alive status
00003460  1ABC 0000                652      move.b  #0,(A5)         Set the enemy as dead
00003464                           653      
00003464  6100 0944                654      bsr     press_continue
00003468                           655      
00003468  6100 03C2                656      bsr     clear_screen    Clear the screen
0000346C  6100 0008                657      bsr     draw            Draw the map for first frame back in movement
00003470  6100 005C                658      bsr     draw_hud        Draw the hud for first frame back in movement
00003474                           659      
00003474  4E75                     660      rts
00003476                           661      
00003476                           662  *-------------------------------------------------------
00003476                           663  *-----------------Draw Quest Updates--------------------
00003476                           664  * Draw the game progress information, status regarding
00003476                           665  * quest
00003476                           666  *------------------------------------------------------- 
00003476                           667  draw:
00003476  0C38 0005 5FF3           668      CMP.B   #5,GAME_STATE   Check which state the game is in
0000347C  6700 09B2                669      BEQ     draw_loop       If in the movement state, draw the map
00003480  0C38 0006 5FF3           670      CMP.B   #6,GAME_STATE   Check which state the game is in
00003486  6700 000E                671      BEQ     draw_skeleton   If in the combat state, draw the enemy
0000348A  0C38 0007 5FF3           672      CMP.B   #7,GAME_STATE   Check which state the game is in
00003490  6700 002E                673      BEQ     draw_merchant   If in the shop state, draw the enemy
00003494  4E75                     674      rts
00003496                           675      
00003496                           676  draw_skeleton:
00003496  43F9 0000560A            677      lea     skeleton_msg,A1 Load the skeleton message
0000349C  103C 000E                678      move.b  #14,D0          Move literal 14 for display message trap command
000034A0  4E4F                     679      trap    #15             Display the loaded message
000034A2                           680      
000034A2  4E75                     681      rts
000034A4                           682      
000034A4                           683  draw_graveyard:
000034A4  43F9 00005558            684      lea     graveyard_msg,A1 Load the graveyard message
000034AA  103C 000E                685      move.b  #14,D0           Move literal 14 for display message trap command
000034AE  4E4F                     686      trap    #15              Display the loaded message
000034B0  4E75                     687      rts                      Return from the subroutine
000034B2                           688  
000034B2                           689  draw_castle:
000034B2  43F9 00005829            690      lea     castle_msg,A1   Load the castle message
000034B8  103C 000E                691      move.b  #14,D0          Move literal 14 for display message trap command
000034BC  4E4F                     692      trap    #15             Display the loaded message
000034BE  4E75                     693      rts                     Return from the subroutine
000034C0                           694      
000034C0                           695  draw_merchant:
000034C0  43F9 00005702            696      lea     merchant_msg,A1  Load the merchant message
000034C6  103C 000E                697      move.b  #14,D0           Move literal 14 for display message trap command
000034CA  4E4F                     698      trap    #15              Display the loaded message
000034CC                           699      
000034CC  4E75                     700      rts
000034CE                           701      
000034CE                           702  draw_hud:
000034CE  0C38 0005 5FF3           703      CMP.B   #5,GAME_STATE       Check which state the game is in
000034D4  6700 0018                704      BEQ     draw_player_info    If in the movement state, draw the player info
000034D8  0C38 0006 5FF3           705      CMP.B   #6,GAME_STATE       Check which state the game is in
000034DE  6700 010A                706      BEQ     draw_battle_info    If in the combat state, draw the combat info
000034E2  0C38 0007 5FF3           707      CMP.B   #7,GAME_STATE       Check which state the game is in
000034E8  6700 017A                708      BEQ     draw_shop_info      If in the shop state, draw the shop info
000034EC                           709      
000034EC  4E75                     710      rts
000034EE                           711  
000034EE                           712  draw_player_info:
000034EE  323C 00FF                713      move.w  #255,D1         Move the word #255 to D1 to set the type of trap 11
000034F2  103C 000B                714      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
000034F6  4E4F                     715      trap    #15             Trap to get the cursor position in D1
000034F8                           716      
000034F8  3601                     717      move.w  D1,D3           Move the current cursor position to D3 for later
000034FA                           718      
000034FA                           719      * Display the player health
000034FA  323C 3201                720      move.w  #CSR_POS_MOVE,D1           
000034FE  4E4F                     721      trap    #15             Set the cursor position with trap command 11
00003500  4241                     722      clr     D1              Clear D1 of the cursor position
00003502                           723      
00003502  43F9 000051F3            724      lea     health_msg,A1   Load the hud message
00003508  103C 000E                725      move.b  #14,D0          Move literal 14 for display message trap command
0000350C  4E4F                     726      trap    #15             Display the loaded message
0000350E                           727      
0000350E  1238 5FF0                728      move.b  PLAYER,D1       Move the player health value to D1 to display
00003512  103C 0003                729      move.b  #3,D0           Move literal 3 for display number trap command
00003516  4E4F                     730      trap    #15             Display the number in D1
00003518                           731      
00003518                           732      * Display the torch life
00003518  103C 000B                733      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
0000351C  323C 3201                734      move.w  #CSR_POS_MOVE,D1         
00003520  5241                     735      add.w   #1,D1  
00003522  4E4F                     736      trap    #15             Set the cursor position with trap command 11
00003524  4241                     737      clr     D1              Clear D1 of the cursor position
00003526                           738      
00003526  43F9 0000520B            739      lea     torch_msg,A1   Load the hud message
0000352C  103C 000E                740      move.b  #14,D0          Move literal 14 for display message trap command
00003530  4E4F                     741      trap    #15             Display the loaded message
00003532                           742      
00003532  1238 5FFB                743      move.b  PLA_TORCH,D1    Move the player torch life value to D1 to display
00003536  103C 0003                744      move.b  #3,D0           Move literal 3 for display number trap command
0000353A  4E4F                     745      trap    #15             Display the number in D1
0000353C                           746      
0000353C                           747      * Display the inventory
0000353C  103C 000B                748      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
00003540  323C 3201                749      move.w  #CSR_POS_MOVE,D1
00003544  5441                     750      add.w   #2,D1          
00003546  4E4F                     751      trap    #15             Set the cursor position with trap command 11
00003548  4241                     752      clr     D1              Clear D1 of the cursor position
0000354A                           753      
0000354A  43F9 00005225            754      lea     inventory_msg,A1   Load the hud message
00003550  103C 000E                755      move.b  #14,D0          Move literal 14 for display message trap command
00003554  4E4F                     756      trap    #15             Display the loaded message
00003556                           757      
00003556                           758      * Display the player gold
00003556  103C 000B                759      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
0000355A  323C 3201                760      move.w  #CSR_POS_MOVE,D1         
0000355E  5641                     761      add.w   #3,D1  
00003560  4E4F                     762      trap    #15             Set the cursor position with trap command 11
00003562  4241                     763      clr     D1              Clear D1 of the cursor position
00003564                           764      
00003564  43F9 00005230            765      lea     gold_msg,A1   Load the hud message
0000356A  103C 000E                766      move.b  #14,D0          Move literal 14 for display message trap command
0000356E  4E4F                     767      trap    #15             Display the loaded message
00003570                           768      
00003570  49F8 5FF8                769      lea     PLA_GOLD,A4
00003574  6100 0052                770      bsr     draw_item_number
00003578                           771      
00003578                           772      * Display the player potions
00003578  103C 000B                773      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
0000357C  323C 3201                774      move.w  #CSR_POS_MOVE,D1         
00003580  5841                     775      add.w   #4,D1  
00003582  4E4F                     776      trap    #15             Set the cursor position with trap command 11
00003584  4241                     777      clr     D1              Clear D1 of the cursor position
00003586                           778      
00003586  43F9 0000523F            779      lea     potions_msg,A1   Load the hud message
0000358C  103C 000E                780      move.b  #14,D0          Move literal 14 for display message trap command
00003590  4E4F                     781      trap    #15             Display the loaded message
00003592                           782      
00003592  49F8 5FF9                783      lea     PLA_POTIONS,A4
00003596  6100 0030                784      bsr     draw_item_number
0000359A                           785      
0000359A                           786      * Display the player keys
0000359A  103C 000B                787      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
0000359E  323C 3201                788      move.w  #CSR_POS_MOVE,D1         
000035A2  5A41                     789      add.w   #5,D1  
000035A4  4E4F                     790      trap    #15             Set the cursor position with trap command 11
000035A6  4241                     791      clr     D1              Clear D1 of the cursor position
000035A8                           792      
000035A8  43F9 00005238            793      lea     key_msg,A1   Load the hud message
000035AE  103C 000E                794      move.b  #14,D0          Move literal 14 for display message trap command
000035B2  4E4F                     795      trap    #15             Display the loaded message
000035B4                           796      
000035B4  49F8 5FFA                797      lea     PLA_KEYS,A4
000035B8  6100 000E                798      bsr     draw_item_number
000035BC                           799      
000035BC  3203                     800      move.w  D3,D1           Move the current cursor position to D3 for later
000035BE                           801      
000035BE  103C 000B                802      move.b  #11,D0          Move the byte #11 to D0 for trap command 11          
000035C2  4E4F                     803      trap    #15             Set the cursor position with trap command 11
000035C4                           804      
000035C4  4241                     805      clr     D1              Clear D1 for later use
000035C6                           806      
000035C6  4E75                     807      rts
000035C8                           808      
000035C8                           809  draw_item_number:
000035C8  103C 000E                810      move.b  #14,D0          Move literal 3 for display number trap command
000035CC  43F9 00005297            811      lea     bracket_open_msg,A1
000035D2  4E4F                     812      trap    #15
000035D4                           813  
000035D4  103C 0003                814      move.b  #3,D0           Move literal 3 for display number trap command
000035D8  1214                     815      move.b  (A4),D1         Move the value in the register A4 to D1 to display
000035DA  4E4F                     816      trap    #15             Display the number in D1
000035DC                           817      
000035DC  103C 000E                818      move.b  #14,D0          Move literal 3 for display number trap command
000035E0  43F9 00005299            819      lea     bracket_close_msg,A1
000035E6  4E4F                     820      trap    #15
000035E8  4E75                     821      rts
000035EA                           822      
000035EA                           823  
000035EA                           824  draw_battle_info:
000035EA  323C 00FF                825      move.w  #255,D1         Move the word #255 to D1 to set the type of trap 11
000035EE  103C 000B                826      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
000035F2  4E4F                     827      trap    #15             Trap to get the cursor position in D1
000035F4                           828      
000035F4  3601                     829      move.w  D1,D3           Move the current cursor position to D3 for later
000035F6                           830      
000035F6                           831      * Move cursor to draw player info
000035F6  323C 2001                832      move.w  #CSR_POS_BATTLE,D1           
000035FA  4E4F                     833      trap    #15             Set the cursor position with trap command 11
000035FC  4241                     834      clr     D1              Clear D1 of the cursor position
000035FE                           835      
000035FE  43F9 000051F3            836      lea     health_msg,A1   Load the hud message
00003604  103C 000E                837      move.b  #14,D0          Move literal 14 for display message trap command
00003608  4E4F                     838      trap    #15             Display the loaded message
0000360A                           839      
0000360A  1238 5FF0                840      move.b  PLAYER,D1       Move the player health value to D1 to display
0000360E  103C 0003                841      move.b  #3,D0           Move literal 3 for display number trap command
00003612  4E4F                     842      trap    #15             Display the number in D1
00003614                           843      
00003614                           844      * Move the cursor to draw enemy info
00003614  103C 000B                845      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
00003618  323C 2001                846      move.w  #CSR_POS_BATTLE,D1
0000361C  5241                     847      add.w   #1,D1
0000361E  4E4F                     848      trap    #15             Set the cursor position with trap command 11
00003620  4241                     849      clr     D1              Clear D1 of the cursor position
00003622                           850      
00003622  43F9 000051FC            851      lea     enemy_health_msg,A1 Load the hud message
00003628  103C 000E                852      move.b  #14,D0              Move literal 14 for display message trap command
0000362C  4E4F                     853      trap    #15                 Display the loaded message
0000362E                           854      
0000362E  1215                     855      move.b  (A5),D1         Move the enemy health value to D1 to display
00003630  103C 0003                856      move.b  #3,D0           Move literal 3 for display number trap command
00003634  4E4F                     857      trap    #15             Display the number in D1
00003636                           858      
00003636                           859      * Move the cursor to draw potion information
00003636  103C 000B                860      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
0000363A  323C 2001                861      move.w  #CSR_POS_BATTLE,D1
0000363E  5641                     862      add.w   #3,D1
00003640  4E4F                     863      trap    #15             Set the cursor position with trap command 11
00003642  4241                     864      clr     D1              Clear D1 of the cursor position
00003644                           865      
00003644  43F9 0000523F            866      lea     potions_msg,A1   Load the hud message
0000364A  103C 000E                867      move.b  #14,D0          Move literal 14 for display message trap command
0000364E  4E4F                     868      trap    #15             Display the loaded message
00003650                           869      
00003650  49F8 5FF9                870      lea     PLA_POTIONS,A4
00003654  6100 FF72                871      bsr     draw_item_number
00003658                           872      
00003658                           873      * Move the cursor back to its previous position
00003658  3203                     874      move.w  D3,D1           Move the previous cursor position back to D1
0000365A  103C 000B                875      move.b  #11,D0          Move the byte #11 to D0 for trap command 11          
0000365E  4E4F                     876      trap    #15             Set the cursor position with trap command 11
00003660                           877      
00003660  4241                     878      clr     D1              Clear D1 for later use
00003662                           879      
00003662  4E75                     880      rts
00003664                           881      
00003664                           882  draw_shop_info:
00003664  323C 00FF                883      move.w  #255,D1         Move the word #255 to D1 to set the type of trap 11
00003668  103C 000B                884      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
0000366C  4E4F                     885      trap    #15             Trap to get the cursor position in D1
0000366E                           886      
0000366E  3601                     887      move.w  D1,D3           Move the current cursor position to D3 for later
00003670                           888      
00003670                           889      * Move cursor to draw shop info
00003670  323C 1801                890      move.w  #CSR_POS_SHOP_S,D1           
00003674  4E4F                     891      trap    #15             Set the cursor position with trap command 11
00003676  4241                     892      clr     D1              Clear D1 of the cursor position
00003678                           893      
00003678  43F9 0000547B            894      lea     shop_stock_msg,A1   Load the hud message
0000367E  103C 000E                895      move.b  #14,D0          Move literal 14 for display message trap command
00003682  4E4F                     896      trap    #15             Display the loaded message
00003684                           897      
00003684                           898      
00003684                           899      * Display the shop's potions
00003684  103C 000B                900      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
00003688  323C 1801                901      move.w  #CSR_POS_SHOP_S,D1         
0000368C  5241                     902      add.w   #1,D1  
0000368E  4E4F                     903      trap    #15             Set the cursor position with trap command 11
00003690  4241                     904      clr     D1              Clear D1 of the cursor position
00003692                           905      
00003692  43F9 0000523F            906      lea     potions_msg,A1   Load the hud message
00003698  103C 000E                907      move.b  #14,D0          Move literal 14 for display message trap command
0000369C  4E4F                     908      trap    #15             Display the loaded message
0000369E                           909      
0000369E  544D                     910      add.w   #S_POTIONS,A5
000036A0  49D5                     911      lea     (A5),A4
000036A2  6100 FF24                912      bsr     draw_item_number
000036A6                           913      
000036A6                           914      * Display the shop's keys
000036A6  103C 000B                915      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
000036AA  323C 1801                916      move.w  #CSR_POS_SHOP_S,D1         
000036AE  5441                     917      add.w   #2,D1  
000036B0  4E4F                     918      trap    #15             Set the cursor position with trap command 11
000036B2  4241                     919      clr     D1              Clear D1 of the cursor position
000036B4                           920      
000036B4  43F9 00005238            921      lea     key_msg,A1      Load the hud message
000036BA  103C 000E                922      move.b  #14,D0          Move literal 14 for display message trap command
000036BE  4E4F                     923      trap    #15             Display the loaded message
000036C0                           924      
000036C0  524D                     925      add.w   #1,A5
000036C2  49D5                     926      lea     (A5),A4
000036C4  6100 FF02                927      bsr     draw_item_number
000036C8                           928      
000036C8                           929      * Display the shop's torches
000036C8  103C 000B                930      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
000036CC  323C 1801                931      move.w  #CSR_POS_SHOP_S,D1         
000036D0  5641                     932      add.w   #3,D1  
000036D2  4E4F                     933      trap    #15             Set the cursor position with trap command 11
000036D4  4241                     934      clr     D1              Clear D1 of the cursor position
000036D6                           935      
000036D6  43F9 00005249            936      lea     torches_msg,A1  Load the torches message
000036DC  103C 000E                937      move.b  #14,D0          Move literal 14 for display message trap command
000036E0  4E4F                     938      trap    #15             Display the loaded message
000036E2                           939      
000036E2  524D                     940      add.w   #1,A5
000036E4  49D5                     941      lea     (A5),A4
000036E6  6100 FEE0                942      bsr     draw_item_number
000036EA                           943      
000036EA                           944      * Display the shop's damage upgrades
000036EA  103C 000B                945      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
000036EE  323C 1801                946      move.w  #CSR_POS_SHOP_S,D1         
000036F2  5841                     947      add.w   #4,D1  
000036F4  4E4F                     948      trap    #15             Set the cursor position with trap command 11
000036F6  4241                     949      clr     D1              Clear D1 of the cursor position
000036F8                           950      
000036F8  43F9 00005252            951      lea     damage_up_msg,A1 Load the damage upgrades message
000036FE  103C 000E                952      move.b  #14,D0           Move literal 14 for display message trap command
00003702  4E4F                     953      trap    #15              Display the loaded message
00003704                           954      
00003704  524D                     955      add.w   #1,A5               Increment A5 to get to the damage upgrades
00003706  49D5                     956      lea     (A5),A4             Load the memory address in A5 to A4
00003708  6100 FEBE                957      bsr     draw_item_number    Draw the number of items
0000370C  5B4D                     958      sub.w   #S_DAMAGE_IN,A5     Bring the pointer back to the root of the shop
0000370E                           959      
0000370E                           960      * Display the inventory
0000370E  103C 000B                961      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
00003712  323C 3401                962      move.w  #CSR_POS_SHOP_P,D1       
00003716  4E4F                     963      trap    #15             Set the cursor position with trap command 11
00003718  4241                     964      clr     D1              Clear D1 of the cursor position
0000371A                           965      
0000371A  43F9 00005225            966      lea     inventory_msg,A1   Load the hud message
00003720  103C 000E                967      move.b  #14,D0          Move literal 14 for display message trap command
00003724  4E4F                     968      trap    #15             Display the loaded message
00003726                           969      
00003726                           970      * Display the player gold
00003726  103C 000B                971      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
0000372A  323C 3401                972      move.w  #CSR_POS_SHOP_P,D1         
0000372E  5241                     973      add.w   #1,D1  
00003730  4E4F                     974      trap    #15             Set the cursor position with trap command 11
00003732  4241                     975      clr     D1              Clear D1 of the cursor position
00003734                           976      
00003734  43F9 00005230            977      lea     gold_msg,A1   Load the hud message
0000373A  103C 000E                978      move.b  #14,D0          Move literal 14 for display message trap command
0000373E  4E4F                     979      trap    #15             Display the loaded message
00003740                           980      
00003740  49F8 5FF8                981      lea     PLA_GOLD,A4
00003744  6100 FE82                982      bsr     draw_item_number
00003748                           983      
00003748                           984      * Display the player potions
00003748  103C 000B                985      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
0000374C  323C 3401                986      move.w  #CSR_POS_SHOP_P,D1         
00003750  5441                     987      add.w   #2,D1  
00003752  4E4F                     988      trap    #15             Set the cursor position with trap command 11
00003754  4241                     989      clr     D1              Clear D1 of the cursor position
00003756                           990      
00003756  43F9 0000523F            991      lea     potions_msg,A1   Load the hud message
0000375C  103C 000E                992      move.b  #14,D0          Move literal 14 for display message trap command
00003760  4E4F                     993      trap    #15             Display the loaded message
00003762                           994      
00003762  49F8 5FF9                995      lea     PLA_POTIONS,A4
00003766  6100 FE60                996      bsr     draw_item_number
0000376A                           997      
0000376A                           998      * Display the player keys
0000376A  103C 000B                999      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
0000376E  323C 3401               1000      move.w  #CSR_POS_SHOP_P,D1         
00003772  5641                    1001      add.w   #3,D1  
00003774  4E4F                    1002      trap    #15             Set the cursor position with trap command 11
00003776  4241                    1003      clr     D1              Clear D1 of the cursor position
00003778                          1004      
00003778  43F9 00005238           1005      lea     key_msg,A1   Load the hud message
0000377E  103C 000E               1006      move.b  #14,D0          Move literal 14 for display message trap command
00003782  4E4F                    1007      trap    #15             Display the loaded message
00003784                          1008      
00003784  49F8 5FFA               1009      lea     PLA_KEYS,A4
00003788  6100 FE3E               1010      bsr     draw_item_number
0000378C                          1011      
0000378C                          1012      * Display the torch life
0000378C  103C 000B               1013      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
00003790  323C 3401               1014      move.w  #CSR_POS_SHOP_P,D1
00003794  5A41                    1015      add.w   #5,D1       
00003796  4E4F                    1016      trap    #15             Set the cursor position with trap command 11
00003798  4241                    1017      clr     D1              Clear D1 of the cursor position
0000379A                          1018      
0000379A  43F9 0000520B           1019      lea     torch_msg,A1   Load the hud message
000037A0  103C 000E               1020      move.b  #14,D0          Move literal 14 for display message trap command
000037A4  4E4F                    1021      trap    #15             Display the loaded message
000037A6                          1022      
000037A6  1238 5FFB               1023      move.b  PLA_TORCH,D1    Move the player torch life value to D1 to display
000037AA  103C 0003               1024      move.b  #3,D0           Move literal 3 for display number trap command
000037AE  4E4F                    1025      trap    #15             Display the number in D1
000037B0                          1026      
000037B0                          1027      * Display the player's damage level
000037B0  103C 000B               1028      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
000037B4  323C 3401               1029      move.w  #CSR_POS_SHOP_P,D1
000037B8  5C41                    1030      add.w   #6,D1       
000037BA  4E4F                    1031      trap    #15             Set the cursor position with trap command 11
000037BC  4241                    1032      clr     D1              Clear D1 of the cursor position
000037BE                          1033      
000037BE  43F9 00005218           1034      lea     damage_lvl_msg,A1   Load the damage level message
000037C4  103C 000E               1035      move.b  #14,D0              Move literal 14 for display message trap command
000037C8  4E4F                    1036      trap    #15                 Display the loaded message
000037CA                          1037      
000037CA  1238 5FF1               1038      move.b  PLA_DAMAGE,D1   Move the player's damage level to D1 to display
000037CE  103C 0003               1039      move.b  #3,D0           Move literal 3 for display number trap command
000037D2  4E4F                    1040      trap    #15             Display the number in D1
000037D4                          1041      
000037D4                          1042      * Move the cursor back to its previous position
000037D4  3203                    1043      move.w  D3,D1           Move the previous cursor position back to D1
000037D6  103C 000B               1044      move.b  #11,D0          Move the byte #11 to D0 for trap command 11          
000037DA  4E4F                    1045      trap    #15             Set the cursor position with trap command 11
000037DC                          1046      
000037DC  4241                    1047      clr     D1              Clear D1 for later use
000037DE                          1048      
000037DE  4E75                    1049      rts
000037E0                          1050  
000037E0                          1051  *-------------------------------------------------------
000037E0                          1052  *---Game Play (Quest Progress)--------------------------
000037E0                          1053  *------------------------------------------------------- 
000037E0                          1054  gameplay:
000037E0  6100 007A               1055      bsr     endl            Break to a new line
000037E4  0C38 0000 5FF3          1056      CMP.B   #0,GAME_STATE   Check which stage the game is in
000037EA  6700 F830               1057      BEQ     pick_role       Branch to the pick role subroutine
000037EE  0C38 0005 5FF3          1058      CMP.B   #5,GAME_STATE   Check which stage the game is in
000037F4  6700 007C               1059      BEQ     movement        Branch to the movement subroutine
000037F8  0C38 0006 5FF3          1060      CMP.B   #6,GAME_STATE   Check which stage the game is in
000037FE  6700 01DA               1061      BEQ     combat          branch to the combat subroutine
00003802  0C38 0007 5FF3          1062      CMP.B   #7,GAME_STATE   Check which stage the game is in
00003808  6700 03EC               1063      BEQ     shop            branch to the shop subroutine
0000380C  4E75                    1064      rts                     Return from 'gameplay' subroutine
0000380E                          1065  
0000380E                          1066  *-------------------------------------------------------
0000380E                          1067  *------------------Screen Decoration--------------------
0000380E                          1068  *-------------------------------------------------------
0000380E                          1069  decorate:
0000380E  163C 003C               1070      move.b  #60, D3
00003812  6100 0048               1071      bsr     endl
00003816                          1072  out:
00003816  43F9 00004770           1073      lea     loop_msg,A1
0000381C  103C 000E               1074      move.b  #14,D0
00003820  4E4F                    1075      trap    #15
00003822  5343                    1076      sub     #1,D3   decrement loop counter
00003824  66F0                    1077      bne     out     repeat until D0=0
00003826  6100 0034               1078      bsr     endl
0000382A  4E75                    1079      rts
0000382C                          1080      
0000382C                          1081  clear_screen: 
0000382C  103C 000B               1082      move.b  #11,D0      clear screen
00003830  323C FF00               1083      move.w  #$ff00,D1
00003834  4E4F                    1084      trap    #15
00003836  4E75                    1085      rts
00003838                          1086  *-------------------------------------------------------
00003838                          1087  *------------------------Replay-------------------------
00003838                          1088  *-------------------------------------------------------
00003838                          1089  replay:
00003838  43F9 00004860           1090      lea     replay_msg,A1   Load the Replay message
0000383E  103C 000E               1091      move.b  #14,D0          Move the number literal 14 to D0 for trap command
00003842  4E4F                    1092      trap    #15             Display the loaded message
00003844                          1093      
00003844  1A3C 0002               1094      move.b  #2,D5           Move the number of input options to D5
00003848  6100 F8D4               1095      bsr     input           Take user input
0000384C  1401                    1096      move.b  D1,D2           Move the input to D2 so it's not trampled by the clear screen
0000384E                          1097      
0000384E  61DC                    1098      bsr     clear_screen    Clear the screen
00003850                          1099      
00003850  B43C 0001               1100      cmp.b   #1,D2           Compare the user input against the two options
00003854  6700 D7AA               1101      beq     start           Restart if the user enters 1
00003858  6100 F7AC               1102      bsr     end             Quit if the user enters 2
0000385C                          1103  
0000385C                          1104  endl:
0000385C  48E7 8040               1105      movem.l D0/A1,-(A7)
00003860  303C 000E               1106      move    #14,D0
00003864  43F9 00004512           1107      lea     crlf,A1
0000386A  4E4F                    1108      trap    #15
0000386C  4CDF 0201               1109      movem.l (A7)+,D0/A1
00003870  4E75                    1110      rts
00003872                          1111          
00003872                          1112  *-------------------------------------------------------
00003872                          1113  *----------------------Manage Movement------------------
00003872                          1114  *-------------------------------------------------------
00003872                          1115  movement:
00003872  43F9 00004D34           1116      lea     movement_msg,A1 Load the movement message
00003878  103C 000E               1117      move.b  #14,D0          Move literal 14 for display message trap command
0000387C  4E4F                    1118      trap    #15             Display the loaded message
0000387E                          1119  
0000387E  7A05                    1120      move.l  #5,D5           Move the number 4 to D5 to tell the program how many options there are
00003880                          1121      
00003880  6100 F89C               1122      bsr     input           branch to the input subroutine
00003884  6100 000C               1123      bsr     wall_collisions Branch to check wall collisions and movement
00003888                          1124      
00003888  B23C 0005               1125      CMP.B   #5,D1           Check the input against taking a potion
0000388C  6700 0550               1126      BEQ     take_potion     Branch to take a potion
00003890                          1127      
00003890  4E75                    1128      rts
00003892                          1129  
00003892                          1130  *-------------------------------------------------------
00003892                          1131  *-------------------Check Wall Collisions---------------
00003892                          1132  *-------------------------------------------------------
00003892                          1133  wall_collisions:
00003892                          1134      *Check collisions in the movement direction
00003892  B23C 0001               1135      CMP.B   #1,D1       Check the movement direction
00003896  6700 001C               1136      BEQ     move_north  Branch to Display the corridor type
0000389A                          1137      
0000389A  B23C 0002               1138      CMP.B   #2,D1       Check the movement direction
0000389E  6700 005A               1139      BEQ     move_south  Branch to Display the corridor type
000038A2                          1140      
000038A2  B23C 0003               1141      CMP.B   #3,D1       Check the movement direction
000038A6  6700 0098               1142      BEQ     move_west   Branch to Display the corridor type
000038AA                          1143      
000038AA  B23C 0004               1144      CMP.B   #4,D1       Check the movement direction
000038AE  6700 00D4               1145      BEQ     move_east   Branch to Display the corridor type
000038B2                          1146      
000038B2  4E75                    1147      rts
000038B4                          1148      
000038B4                          1149  move_north:
000038B4                          1150      *Check if the tile is any of the corridor types with a wall at the top
000038B4  0C16 0002               1151      CMP.B   #2,(A6)
000038B8  6700 010E               1152      BEQ     movement_blocked
000038BC  0C16 0003               1153      CMP.B   #3,(A6)
000038C0  6700 0106               1154      BEQ     movement_blocked
000038C4  0C16 0006               1155      CMP.B   #6,(A6)
000038C8  6700 00FE               1156      BEQ     movement_blocked
000038CC  0C16 0007               1157      CMP.B   #7,(A6)
000038D0  6700 00F6               1158      BEQ     movement_blocked
000038D4  0C16 000B               1159      CMP.B   #11,(A6)
000038D8  6700 00EE               1160      BEQ     movement_blocked
000038DC  0C16 000C               1161      CMP.B   #12,(A6)
000038E0  6700 00E6               1162      BEQ     movement_blocked
000038E4  0C16 000D               1163      CMP.B   #13,(A6)
000038E8  6700 00DE               1164      BEQ     movement_blocked
000038EC                          1165      
000038EC  31CE 5FF6               1166      move.w  A6,PLA_P_POS        Move the player's previous location to a memory address for storage
000038F0  9CFC 0010               1167      sub     #16,A6              Move the player north
000038F4                          1168      
000038F4  6100 051A               1169      bsr     decrement_torch     Remove one from the player's torch life
000038F8                          1170      
000038F8  4E75                    1171      rts
000038FA                          1172      
000038FA                          1173  move_south:
000038FA                          1174      *Check if the tile is any of the corridor types with a wall at the bottom
000038FA  0C16 0002               1175      CMP.B   #2,(A6)
000038FE  6700 00C8               1176      BEQ     movement_blocked
00003902  0C16 0004               1177      CMP.B   #4,(A6)
00003906  6700 00C0               1178      BEQ     movement_blocked
0000390A  0C16 0005               1179      CMP.B   #5,(A6)
0000390E  6700 00B8               1180      BEQ     movement_blocked
00003912  0C16 0009               1181      CMP.B   #9,(A6)
00003916  6700 00B0               1182      BEQ     movement_blocked
0000391A  0C16 000B               1183      CMP.B   #11,(A6)
0000391E  6700 00A8               1184      BEQ     movement_blocked
00003922  0C16 000D               1185      CMP.B   #13,(A6)
00003926  6700 00A0               1186      BEQ     movement_blocked
0000392A  0C16 000E               1187      CMP.B   #14,(A6)
0000392E  6700 0098               1188      BEQ     movement_blocked
00003932                          1189      
00003932  31CE 5FF6               1190      move.w  A6,PLA_P_POS        Move the player's previous location to a memory address for storage
00003936  DCFC 0010               1191      add     #16,A6              Move the player south
0000393A                          1192      
0000393A  6100 04D4               1193      bsr     decrement_torch     Remove one from the player's torch life
0000393E                          1194      
0000393E  4E75                    1195      rts
00003940                          1196  
00003940                          1197  move_west:
00003940                          1198      *Check if the tile is any of the corridor types with a wall to the left
00003940  0C16 0001               1199      CMP.B   #1,(A6)
00003944  6700 0082               1200      BEQ     movement_blocked
00003948  0C16 0003               1201      CMP.B   #3,(A6)
0000394C  6700 007A               1202      BEQ     movement_blocked
00003950  0C16 0004               1203      CMP.B   #4,(A6)
00003954  6700 0072               1204      BEQ     movement_blocked
00003958  0C16 0008               1205      CMP.B   #8,(A6)
0000395C  6700 006A               1206      BEQ     movement_blocked
00003960  0C16 000B               1207      CMP.B   #11,(A6)
00003964  6700 0062               1208      BEQ     movement_blocked
00003968  0C16 000C               1209      CMP.B   #12,(A6)
0000396C  6700 005A               1210      BEQ     movement_blocked
00003970  0C16 000E               1211      CMP.B   #14,(A6)
00003974  6700 0052               1212      BEQ     movement_blocked
00003978                          1213      
00003978  31CE 5FF6               1214      move.w  A6,PLA_P_POS        Move the player's previous location to a memory address for storage
0000397C  534E                    1215      sub     #1,A6               Move the player west
0000397E                          1216      
0000397E  6100 0490               1217      bsr     decrement_torch     Remove one from the player's torch life
00003982                          1218      
00003982  4E75                    1219      rts
00003984                          1220      
00003984                          1221  move_east:
00003984                          1222      *Check if the tile is any of the corridor types with a wall to the right
00003984  0C16 0001               1223      CMP.B   #1,(A6)
00003988  6700 003E               1224      BEQ     movement_blocked
0000398C  0C16 0005               1225      CMP.B   #5,(A6)
00003990  6700 0036               1226      BEQ     movement_blocked
00003994  0C16 0006               1227      CMP.B   #6,(A6)
00003998  6700 002E               1228      BEQ     movement_blocked
0000399C  0C16 000A               1229      CMP.B   #10,(A6)
000039A0  6700 0026               1230      BEQ     movement_blocked
000039A4  0C16 000C               1231      CMP.B   #12,(A6)
000039A8  6700 001E               1232      BEQ     movement_blocked
000039AC  0C16 000D               1233      CMP.B   #13,(A6)
000039B0  6700 0016               1234      BEQ     movement_blocked
000039B4  0C16 000E               1235      CMP.B   #14,(A6)
000039B8  6700 000E               1236      BEQ     movement_blocked
000039BC                          1237      
000039BC  31CE 5FF6               1238      move.w  A6,PLA_P_POS        Move the player's previous location to a memory address for storage
000039C0  524E                    1239      add     #1,A6               Move the player east
000039C2                          1240      
000039C2  6100 044C               1241      bsr     decrement_torch     Remove one from the player's torch life
000039C6                          1242      
000039C6  4E75                    1243      rts
000039C8                          1244  
000039C8                          1245  movement_blocked:
000039C8  43F9 00004DC6           1246      lea     movement_blocked_msg,A1 Load the message
000039CE  103C 000E               1247      move.b  #14,D0                  Move the trap command to display a message
000039D2  4E4F                    1248      trap    #15                     Display the movement blocked message
000039D4  6100 03D4               1249      bsr     press_continue          Pause the game until a key is pressed
000039D8                          1250      
000039D8  4E75                    1251      rts                             Return from the subroutine
000039DA                          1252      
000039DA                          1253  *-------------------------------------------------------
000039DA                          1254  *---------------------Manage Combat---------------------
000039DA                          1255  *-------------------------------------------------------
000039DA                          1256  combat:
000039DA  6100 FE80               1257      bsr endl                Break to a new line
000039DE                          1258  
000039DE  43F9 00004E55           1259      lea     combat_msg,A1   Load the combat message
000039E4  103C 000E               1260      move.b  #14,D0          Move literal 14 for display message trap command
000039E8  4E4F                    1261      trap    #15             Display the loaded message
000039EA                          1262  
000039EA  7A05                    1263      move.l  #5,D5           Move the number 4 to D5 to tell the program how many options there are
000039EC  6100 F730               1264      bsr     input           branch to the input subroutine
000039F0  1801                    1265      move.b  D1,D4           Move the input to D4 for later use
000039F2                          1266      
000039F2  B23C 0001               1267      CMP.B   #1,D1           Compare input with number literal 1
000039F6  6700 0024               1268      BEQ     block_counter   Branch to block/counter subroutine
000039FA  B23C 0002               1269      CMP.B   #2,D1           Compare input with number literal 2
000039FE  6700 0036               1270      BEQ     cast_magic      Branch to cast magic subroutine
00003A02  B23C 0003               1271      CMP.B   #3,D1           Compare input with number literal 3
00003A06  6700 0048               1272      BEQ     melee_attack    Branch to melee subroutine
00003A0A  B23C 0004               1273      CMP.B   #4,D1           Compare input with number literal 4
00003A0E  6700 005A               1274      BEQ     try_run         Branch to try run subroutine
00003A12  B23C 0005               1275      CMP.B   #5,D1           Compare input with number literal 5
00003A16  6700 03C6               1276      BEQ     take_potion     Branch to take potion subroutine
00003A1A                          1277      
00003A1A  4E75                    1278      rts
00003A1C                          1279      
00003A1C                          1280  block_counter:
00003A1C  6100 03A4               1281      bsr     random_number       Get a random number 1-100
00003A20                          1282      
00003A20  B47C 0021               1283      CMP.W   #33,D2              Compare random with #33
00003A24  6F00 008E               1284      BLE     both_block          Enemy tries to block - attack failed
00003A28  B47C 0042               1285      CMP.W   #66,D2              Compare random with #66
00003A2C  6F00 0118               1286      BLE     hit_by_magic        Enemy casts magic - player takes damage      
00003A30  6E00 00E4               1287      BGT     hit_against_melee   Enemy tried to lunge - enemy takes damage
00003A34                          1288      
00003A34  4E75                    1289      rts                         Return from subroutine
00003A36                          1290      
00003A36                          1291  cast_magic:
00003A36  6100 038A               1292      bsr     random_number       Get a random number 1-100
00003A3A                          1293  
00003A3A  B47C 0021               1294      CMP.W   #33,D2              Compare random with #33
00003A3E  6F00 00AA               1295      BLE     hit_against_block    Enemy blocks - enemy takes damage
00003A42  B47C 0042               1296      CMP.W   #66,D2              Compare random with #66
00003A46  6F00 007E               1297      BLE     both_cast_magic     Enemy casts magic - attack fails     
00003A4A  6E00 0114               1298      BGT     hit_by_melee        Enemy lunges forward - player takes damage
00003A4E                          1299      
00003A4E  4E75                    1300      rts                         Return from subroutine
00003A50                          1301  
00003A50                          1302  melee_attack:
00003A50  6100 0370               1303      bsr     random_number       Get a random number 1-100
00003A54                          1304  
00003A54  B47C 0021               1305      CMP.W   #33,D2              Compare random with #33
00003A58  6F00 00D2               1306      BLE     hit_by_counter      Enemy blocks and counters - player takes damage
00003A5C  B47C 0042               1307      CMP.W   #66,D2              Compare random with #66
00003A60  6F00 009E               1308      BLE     hit_against_magic   Enemy casts magic - player takes damage     
00003A64  6E00 0072               1309      BGT     both_melee          Enemy lunges forward - attack fails
00003A68                          1310      
00003A68  4E75                    1311      rts                         Return from subroutine
00003A6A                          1312  
00003A6A                          1313  try_run:
00003A6A  6100 0356               1314      bsr     random_number       Get a random number
00003A6E                          1315      
00003A6E  B47C 0028               1316      CMP.W   #40,D2              Compare the random number to 40
00003A72  6D00 0006               1317      BLT     escape_attack       If the random number is less than 40 the player escapes
00003A76  6C00 0020               1318      BGE     fail_escape         If the random number is more than 40 the player gets damaged
00003A7A                          1319      
00003A7A                          1320  escape_attack:
00003A7A  3638 5FF6               1321      move.w  PLA_P_POS,D3    Move the player's previous position to D3 to avoid treating it as a negative number
00003A7E  2C43                    1322      move.l  D3,A6           Move the player to their position before entering the battle
00003A80  11FC 0005 5FF3          1323      move.b  #5,GAME_STATE   Switch game state
00003A86                          1324      
00003A86  43F9 00004EB7           1325      lea     escape_msg,A1   Load escape message
00003A8C  103C 000E               1326      move.b  #14,D0          Move literal for trap command
00003A90  4E4F                    1327      trap    #15             Trap 15 to display messgae
00003A92                          1328      
00003A92  6100 0316               1329      bsr     press_continue  Pause until the player presses to continue
00003A96                          1330      
00003A96  4E75                    1331      rts                     Return from subroutine
00003A98                          1332      
00003A98                          1333  fail_escape:
00003A98  43F9 00004ED2           1334      lea     fail_escape_msg,A1  Load fail escape message
00003A9E  103C 000E               1335      move.b  #14,D0              Move literal for trap command
00003AA2  4E4F                    1336      trap    #15                 Trap 15 to display message
00003AA4                          1337      
00003AA4  524D                    1338      add.w   #DAMAGE,A5           Move the enemy pointer to its damage value
00003AA6  1A15                    1339      move.b  (A5),D5             Store the damage value in D5
00003AA8  534D                    1340      sub.w   #DAMAGE,A5           Move the enemy pointer back to the enemy health/root
00003AAA  9B38 5FF0               1341      sub.b   D5,PLAYER           Remove the enemy's damage from the player's health
00003AAE                          1342      
00003AAE  6100 02FA               1343      bsr     press_continue      Pause until the player presses to continue
00003AB2  4E75                    1344      rts
00003AB4                          1345      
00003AB4                          1346  both_block:
00003AB4  103C 000E               1347      move.b  #14,D0
00003AB8  43F9 00004F0D           1348      lea     both_block_msg,A1
00003ABE  4E4F                    1349      trap    #15
00003AC0                          1350      
00003AC0  6100 02E8               1351      bsr     press_continue
00003AC4  4E75                    1352      rts
00003AC6                          1353      
00003AC6                          1354  both_cast_magic:
00003AC6  103C 000E               1355      move.b  #14,D0
00003ACA  43F9 00004F32           1356      lea     both_cast_magic_msg,A1
00003AD0  4E4F                    1357      trap    #15
00003AD2                          1358      
00003AD2  6100 02D6               1359      bsr     press_continue
00003AD6  4E75                    1360      rts
00003AD8                          1361  
00003AD8                          1362  both_melee:
00003AD8  103C 000E               1363      move.b  #14,D0
00003ADC  43F9 00004F87           1364      lea     both_melee_msg,A1
00003AE2  4E4F                    1365      trap    #15  
00003AE4                          1366      
00003AE4  6100 02C4               1367      bsr     press_continue
00003AE8  4E75                    1368      rts
00003AEA                          1369  
00003AEA                          1370  hit_against_block:
00003AEA  103C 000E               1371      move.b  #14,D0
00003AEE  43F9 00004FD0           1372      lea     hit_against_block_msg,A1
00003AF4  4E4F                    1373      trap    #15  
00003AF6                          1374      
00003AF6  6100 0082               1375      bsr     damage_enemy    Deal damage to the enemy
00003AFA                          1376      
00003AFA  6100 02AE               1377      bsr     press_continue
00003AFE  4E75                    1378      rts
00003B00                          1379  
00003B00                          1380  hit_against_magic:
00003B00  103C 000E               1381      move.b  #14,D0
00003B04  43F9 00005018           1382      lea     hit_against_magic_msg,A1
00003B0A  4E4F                    1383      trap    #15
00003B0C                          1384      
00003B0C  6100 006C               1385      bsr     damage_enemy    Deal damage to the enemy
00003B10                          1386      
00003B10  6100 0298               1387      bsr     press_continue
00003B14  4E75                    1388      rts
00003B16                          1389  
00003B16                          1390  hit_against_melee:
00003B16  103C 000E               1391      move.b  #14,D0
00003B1A  43F9 0000507C           1392      lea     hit_against_melee_msg,A1
00003B20  4E4F                    1393      trap    #15
00003B22                          1394      
00003B22  6100 0056               1395      bsr     damage_enemy    Deal damage to the enemy
00003B26                          1396      
00003B26  6100 0282               1397      bsr     press_continue
00003B2A  4E75                    1398      rts
00003B2C                          1399  
00003B2C                          1400  hit_by_counter:
00003B2C  103C 000E               1401      move.b  #14,D0
00003B30  43F9 000050D2           1402      lea     hit_by_counter_msg,A1
00003B36  4E4F                    1403      trap    #15  
00003B38                          1404      
00003B38  143C 0001               1405      move.b  #1,D2               Move the enemy attack type to D2
00003B3C  6100 0076               1406      bsr     damage_player       Deal damage to the player
00003B40                          1407      
00003B40  6100 0268               1408      bsr     press_continue
00003B44  4E75                    1409      rts
00003B46                          1410  
00003B46                          1411  hit_by_magic:
00003B46  103C 000E               1412      move.b  #14,D0
00003B4A  43F9 00005135           1413      lea     hit_by_magic_msg,A1
00003B50  4E4F                    1414      trap    #15  
00003B52                          1415      
00003B52  143C 0002               1416      move.b  #2,D2               Move the enemy attack type to D2
00003B56  6100 005C               1417      bsr     damage_player       Deal damage to the player
00003B5A                          1418      
00003B5A  6100 024E               1419      bsr     press_continue
00003B5E  4E75                    1420      rts
00003B60                          1421  
00003B60                          1422  hit_by_melee:
00003B60  103C 000E               1423      move.b  #14,D0
00003B64  43F9 000051A5           1424      lea     hit_by_melee_msg,A1
00003B6A  4E4F                    1425      trap    #15
00003B6C                          1426      
00003B6C  143C 0003               1427      move.b  #3,D2               Move the enemy attack type to D2
00003B70  6100 0042               1428      bsr     damage_player       Deal damage to the player
00003B74                          1429      
00003B74  6100 0234               1430      bsr     press_continue
00003B78  4E75                    1431      rts
00003B7A                          1432      
00003B7A                          1433  damage_enemy:
00003B7A  1A38 5FF1               1434      move.b  PLA_DAMAGE,D5       Store the player damage value in D5
00003B7E  B838 5FF2               1435      CMP.B   PLA_CLASS,D4        Check if the player attack type matches the player class
00003B82  6700 0006               1436      BEQ     double_damage_enemy Deal double damage to the enemy if attack type matches the class
00003B86  9B15                    1437      sub.b   D5,(A5)             Remove the player's damage from the enemy's health
00003B88  4E75                    1438      rts                         Return from subroutine
00003B8A                          1439      
00003B8A                          1440  double_damage_enemy:
00003B8A  E34D                    1441      LSL     #1,D5               Double the player damage
00003B8C  9B15                    1442      sub.b   D5,(A5)             Remove double the player's damage from the enemy's health
00003B8E                          1443      
00003B8E  6100 FCCC               1444      bsr     endl                Break to new line
00003B92  223C 00F000F0           1445      move.l  #PURPLE,D1          Load colour purple
00003B98  6100 0284               1446      bsr     change_font_colour  Change the font colour
00003B9C                          1447      
00003B9C  43F9 00005539           1448      lea     double_damage_msg,A1    Load the double damage message
00003BA2  103C 000E               1449      move.b  #14,D0              Move number literal 14 to D0 for trap command
00003BA6  4E4F                    1450      trap    #15
00003BA8                          1451      
00003BA8  223C 00FFFFFF           1452      move.l  #WHITE,D1           Load colour white
00003BAE  6100 026E               1453      bsr     change_font_colour  Change the font colour
00003BB2                          1454      
00003BB2  4E75                    1455      rts                         Return from subroutine
00003BB4                          1456  
00003BB4                          1457  damage_player:
00003BB4  524D                    1458      add.w   #DAMAGE,A5          Move the enemy pointer to its damage value
00003BB6  1A15                    1459      move.b  (A5),D5             Store the damage value in D5
00003BB8                          1460      
00003BB8  534D                    1461      sub.w   #DAMAGE,A5          Move the enemy pointer back to the enemy health/root
00003BBA  544D                    1462      add.w   #CLASS,A5           Move the enemy pointer to its class value
00003BBC                          1463      
00003BBC  B415                    1464      CMP.B   (A5),D2             Compare the enemy attack type to its class
00003BBE  554D                    1465      sub.w   #CLASS,A5           Move the enemy pointer back to the enemy health/root
00003BC0  6700 0008               1466      BEQ     double_damage_player    Deal double damage to the player
00003BC4                          1467      
00003BC4  9B38 5FF0               1468      sub.b   D5,PLAYER           Remove the enemy's damage from the player's health
00003BC8                          1469  
00003BC8  4E75                    1470      rts                         Return from subroutine
00003BCA                          1471      
00003BCA                          1472  double_damage_player:
00003BCA  E34D                    1473      LSL     #1,D5               Double the enemy damage
00003BCC  9B38 5FF0               1474      sub.b   D5,PLAYER           Remove double the enemy's damage from the player's health
00003BD0                          1475      
00003BD0  6100 FC8A               1476      bsr     endl                Break to new line
00003BD4  223C 000000FF           1477      move.l  #RED,D1          Load colour purple
00003BDA  6100 0242               1478      bsr     change_font_colour  Change the font colour
00003BDE                          1479      
00003BDE  43F9 00005539           1480      lea     double_damage_msg,A1    Load the double damage message
00003BE4  103C 000E               1481      move.b  #14,D0              Move number literal 14 to D0 for trap command
00003BE8  4E4F                    1482      trap    #15
00003BEA                          1483      
00003BEA  223C 00FFFFFF           1484      move.l  #WHITE,D1           Load colour white
00003BF0  6100 022C               1485      bsr     change_font_colour  Change the font colour
00003BF4                          1486      
00003BF4  4E75                    1487      rts                         Return from subroutine
00003BF6                          1488  
00003BF6                          1489  *-------------------------------------------------------
00003BF6                          1490  *----------------------Shop State-----------------------
00003BF6                          1491  *-------------------------------------------------------
00003BF6                          1492  shop:
00003BF6  43F9 000053D3           1493      lea     shop_msg,A1     Load the shop message
00003BFC  103C 000E               1494      move.b  #14,D0          Move the number literal 14 to D0 for trap command
00003C00  4E4F                    1495      trap    #15             Display the loaded message
00003C02                          1496  
00003C02  7A05                    1497      move.l  #5,D5           Move the number 4 to D5 to tell the program how many options there are
00003C04  6100 F518               1498      bsr     input           branch to the input subroutine
00003C08                          1499      
00003C08  B23C 0001               1500      CMP.B   #1,D1           Compare input with number literal 1
00003C0C  6700 0024               1501      BEQ     buy_potion      Branch to buy potion subroutine
00003C10  B23C 0002               1502      CMP.B   #2,D1           Compare input with number literal 2
00003C14  6700 0052               1503      BEQ     buy_key         Branch to buy key subroutine
00003C18  B23C 0003               1504      CMP.B   #3,D1           Compare input with number literal 3
00003C1C  6700 0082               1505      BEQ     buy_torch       Branch to buy torch subroutine
00003C20  B23C 0004               1506      CMP.B   #4,D1           Compare input with number literal 4
00003C24  6700 00B4               1507      BEQ     upgrade_dmg     Branch to buy damage upgrade subroutine
00003C28  B23C 0005               1508      CMP.B   #5,D1           Compare input with number literal 5
00003C2C  6700 00E4               1509      BEQ     leave_shop      Branch to leave shop subroutine
00003C30                          1510  
00003C30  4E75                    1511      rts                     Return from subroutine
00003C32                          1512      
00003C32                          1513  buy_potion:
00003C32  0C38 0005 5FF8          1514      CMP.B   #POTION_PRICE,PLA_GOLD  Check if the player has money for a potion
00003C38  6D00 00FA               1515      BLT     no_money                If not enough money branch to no money subroutine
00003C3C                          1516      
00003C3C  544D                    1517      add.w   #S_POTIONS,A5           Move the shop pointer to the potions
00003C3E  0C15 0000               1518      CMP.B   #0,(A5)                 Check that the shop still has potions left
00003C42  6F00 0106               1519      BLE     no_shop_potions         If no potions left branch to no shop potions subroutine
00003C46                          1520      
00003C46  5B38 5FF8               1521      sub.b   #POTION_PRICE,PLA_GOLD  Remove the potion price from the player's gold
00003C4A  5315                    1522      sub.b   #1,(A5)                 Remove one potion from the shop
00003C4C  5238 5FF9               1523      add.b   #1,PLA_POTIONS          Add one potion to the player's inventory
00003C50                          1524      
00003C50  554D                    1525      sub.w   #S_POTIONS,A5           Move the shop pointer back to root
00003C52                          1526      
00003C52  6100 FC08               1527      bsr     endl                    Break to new line
00003C56                          1528      
00003C56  43F9 00005465           1529      lea     buy_item_msg,A1         Load the buy item message into A1
00003C5C  103C 000E               1530      move.b  #14,D0                  Move the number literal 14 to D0 for trap command
00003C60  4E4F                    1531      trap    #15                     Display the loaded message
00003C62                          1532      
00003C62  6100 0146               1533      bsr     press_continue          Pause for user input
00003C66                          1534      
00003C66  4E75                    1535      rts                             Return from subroutine
00003C68                          1536      
00003C68                          1537  buy_key:
00003C68  0C38 000F 5FF8          1538      CMP.B   #KEY_PRICE,PLA_GOLD     Check if the player has money for a key
00003C6E  6D00 00C4               1539      BLT     no_money                If not enough money branch to no money subroutine
00003C72                          1540      
00003C72  564D                    1541      add.w   #S_KEYS,A5              Move the shop pointer to the keys
00003C74  0C15 0000               1542      CMP.B   #0,(A5)                 Check that the shop still has keys left
00003C78  6F00 00E8               1543      BLE     no_shop_keys            If no keys left branch to no shop keys subroutine
00003C7C                          1544      
00003C7C  0438 000F 5FF8          1545      sub.b   #KEY_PRICE,PLA_GOLD     Remove the key price from the player's gold
00003C82  5315                    1546      sub.b   #1,(A5)                 Remove one key from the shop
00003C84  5238 5FFA               1547      add.b   #1,PLA_KEYS             Add one key to the player's inventory
00003C88                          1548      
00003C88  574D                    1549      sub.w   #S_KEYS,A5              Move the shop pointer back to root
00003C8A                          1550      
00003C8A  6100 FBD0               1551      bsr     endl                    Break to new line
00003C8E                          1552      
00003C8E  43F9 00005465           1553      lea     buy_item_msg,A1         Load the buy item message into A1
00003C94  103C 000E               1554      move.b  #14,D0                  Move the number literal 14 to D0 for trap command
00003C98  4E4F                    1555      trap    #15                     Display the loaded message
00003C9A                          1556      
00003C9A  6100 010E               1557      bsr     press_continue          Pause for user input
00003C9E                          1558      
00003C9E  4E75                    1559      rts                             Return from subroutine
00003CA0                          1560      
00003CA0                          1561  buy_torch:
00003CA0  0C38 000A 5FF8          1562      CMP.B   #TORCH_PRICE,PLA_GOLD   Check if the player has money for a torch
00003CA6  6D00 008C               1563      BLT     no_money                If not enough money branch to no money subroutine
00003CAA                          1564      
00003CAA  584D                    1565      add.w   #S_TORCHES,A5           Move the shop pointer to the torches
00003CAC  0C15 0000               1566      CMP.B   #0,(A5)                 Check that the shop still has torches left
00003CB0  6F00 00C8               1567      BLE     no_shop_torches         If no torches left branch to no shop torches subroutine
00003CB4                          1568      
00003CB4  0438 000A 5FF8          1569      sub.b   #TORCH_PRICE,PLA_GOLD   Remove the torch price from the player's gold
00003CBA  5315                    1570      sub.b   #1,(A5)                 Remove one torch from the shop
00003CBC  0638 000F 5FFB          1571      add.b   #LIFE_PER_TORCH,PLA_TORCH           Add ten to the player's torches life
00003CC2                          1572      
00003CC2  594D                    1573      sub.w   #S_TORCHES,A5           Move the shop pointer back to root
00003CC4                          1574      
00003CC4  6100 FB96               1575      bsr     endl                    Break to new line
00003CC8                          1576      
00003CC8  43F9 00005465           1577      lea     buy_item_msg,A1         Load the buy item message into A1
00003CCE  103C 000E               1578      move.b  #14,D0                  Move the number literal 14 to D0 for trap command
00003CD2  4E4F                    1579      trap    #15                     Display the loaded message
00003CD4                          1580      
00003CD4  6100 00D4               1581      bsr     press_continue          Pause for user input
00003CD8                          1582      
00003CD8  4E75                    1583      rts                             Return from subroutine
00003CDA                          1584      
00003CDA                          1585  upgrade_dmg:
00003CDA  0C38 0014 5FF8          1586      CMP.B   #DAMAGE_UP_PRICE,PLA_GOLD   Check if the player has money for a damage upgrade
00003CE0  6D00 0052               1587      BLT     no_money                    If not enough money branch to no money subroutine
00003CE4                          1588      
00003CE4  5A4D                    1589      add.w   #S_DAMAGE_IN,A5         Move the shop pointer to the damage upgrades
00003CE6  0C15 0000               1590      CMP.B   #0,(A5)                 Check that the shop still has damage upgrades left
00003CEA  6F00 00A6               1591      BLE     no_shop_damage_up       If no damage upgrades left branch to no shop torches subroutine
00003CEE                          1592      
00003CEE  0438 0014 5FF8          1593      sub.b   #DAMAGE_UP_PRICE,PLA_GOLD   Remove the damage upgrade price from the player's gold
00003CF4  5315                    1594      sub.b   #1,(A5)                     Remove one damage upgrade from the shop
00003CF6  5238 5FF1               1595      add.b   #1,PLA_DAMAGE               Add one to the player's damage value
00003CFA                          1596      
00003CFA  5B4D                    1597      sub.w   #S_DAMAGE_IN,A5         Move the shop pointer back to root
00003CFC                          1598      
00003CFC  6100 FB5E               1599      bsr     endl                    Break to new line
00003D00                          1600          
00003D00  43F9 00005465           1601      lea     buy_item_msg,A1         Load the buy item message into A1
00003D06  103C 000E               1602      move.b  #14,D0                  Move the number literal 14 to D0 for trap command
00003D0A  4E4F                    1603      trap    #15                     Display the loaded message
00003D0C                          1604      
00003D0C  6100 009C               1605      bsr     press_continue          Pause for user input
00003D10                          1606      
00003D10  4E75                    1607      rts                             Return from subroutine
00003D12                          1608      
00003D12                          1609  leave_shop:
00003D12  6100 FB48               1610      bsr     endl                Break to new line
00003D16                          1611  
00003D16  3638 5FF6               1612      move.w  PLA_P_POS,D3        Move the player's previous position to D3 to avoid treating it as a negative number
00003D1A  2C43                    1613      move.l  D3,A6               Move the player to their position before entering the shop
00003D1C  11FC 0005 5FF3          1614      move.b  #5,GAME_STATE       Switch game state to movement
00003D22                          1615      
00003D22  43F9 0000543F           1616      lea     leave_shop_msg,A1   Load escape message
00003D28  103C 000E               1617      move.b  #14,D0              Move literal for trap command
00003D2C  4E4F                    1618      trap    #15                 Trap 15 to display messgae
00003D2E                          1619      
00003D2E  6100 007A               1620      bsr     press_continue      Pause until the player presses to continue
00003D32  4E75                    1621      rts                         Return from subroutine
00003D34                          1622      
00003D34                          1623  no_money:
00003D34  6100 FB26               1624      bsr     endl            New line
00003D38                          1625      
00003D38  43F9 00005493           1626      lea     no_money_msg,A1 Load the no money message
00003D3E  103C 000E               1627      move.b  #14,D0          Move the number literal 14 to D0 for trap command
00003D42  4E4F                    1628      trap    #15             Display the loaded message
00003D44                          1629      
00003D44  6100 0064               1630      bsr     press_continue  Wait for player input
00003D48  4E75                    1631      rts                     Return from subroutine
00003D4A                          1632      
00003D4A                          1633  no_shop_potions:
00003D4A  6100 FB10               1634      bsr     endl            New line
00003D4E                          1635  
00003D4E  43F9 000054B3           1636      lea     no_item_msg,A1  Load the no money message
00003D54  103C 000E               1637      move.b  #14,D0          Move the number literal 14 to D0 for trap command
00003D58  4E4F                    1638      trap    #15             Display the loaded message
00003D5A  554D                    1639      sub.w   #S_POTIONS,A5   Move the shop pointer back to root
00003D5C                          1640      
00003D5C  6100 004C               1641      bsr     press_continue  Wait for player input
00003D60  4E75                    1642      rts                     Return from subroutine
00003D62                          1643      
00003D62                          1644  no_shop_keys:
00003D62  6100 FAF8               1645      bsr     endl            New line
00003D66                          1646  
00003D66  43F9 000054B3           1647      lea     no_item_msg,A1  Load the no money message
00003D6C  103C 000E               1648      move.b  #14,D0          Move the number literal 14 to D0 for trap command
00003D70  4E4F                    1649      trap    #15             Display the loaded message
00003D72  574D                    1650      sub.w   #S_KEYS,A5      Move the shop pointer back to root
00003D74                          1651      
00003D74  6100 0034               1652      bsr     press_continue  Wait for player input
00003D78  4E75                    1653      rts                     Return from subroutine
00003D7A                          1654      
00003D7A                          1655  no_shop_torches:
00003D7A  6100 FAE0               1656      bsr     endl            New line
00003D7E                          1657  
00003D7E  43F9 000054B3           1658      lea     no_item_msg,A1  Load the no money message
00003D84  103C 000E               1659      move.b  #14,D0          Move the number literal 14 to D0 for trap command
00003D88  4E4F                    1660      trap    #15             Display the loaded message
00003D8A  594D                    1661      sub.w   #S_TORCHES,A5   Move the shop pointer back to root
00003D8C                          1662      
00003D8C  6100 001C               1663      bsr     press_continue  Wait for player input
00003D90  4E75                    1664      rts                     Return from subroutine
00003D92                          1665  
00003D92                          1666  no_shop_damage_up:
00003D92  6100 FAC8               1667      bsr     endl            New line
00003D96                          1668  
00003D96  43F9 000054B3           1669      lea     no_item_msg,A1  Load the no money message
00003D9C  103C 000E               1670      move.b  #14,D0          Move the number literal 14 to D0 for trap command
00003DA0  4E4F                    1671      trap    #15             Display the loaded message
00003DA2  5B4D                    1672      sub.w   #S_DAMAGE_IN,A5 Move the shop pointer back to root
00003DA4                          1673      
00003DA4  6100 0004               1674      bsr     press_continue  Wait for player input
00003DA8  4E75                    1675      rts                     Return from subroutine
00003DAA                          1676  
00003DAA                          1677  *-------------------------------------------------------
00003DAA                          1678  *-------------------Misc Subroutines--------------------
00003DAA                          1679  *-------------------------------------------------------
00003DAA                          1680  press_continue:
00003DAA  6100 FAB0               1681      bsr     endl
00003DAE                          1682  
00003DAE  43F9 00004DE1           1683      lea     continue_msg,A1 Load message into A1
00003DB4  103C 000E               1684      move.b  #14,D0          Move the trap command to display a message
00003DB8  4E4F                    1685      trap    #15             display the "press any ket to continue" text
00003DBA                          1686      
00003DBA  103C 0004               1687      move.b  #4,D0           Move the trap command to take input
00003DBE  4E4F                    1688      trap    #15             take input to freeze the game
00003DC0  4E75                    1689      rts                     Return from the 'press continue' subroutine
00003DC2                          1690      
00003DC2                          1691  random_number:              *Psuedo random number generator, courtesy of Pdraig
00003DC2  103C 0008               1692      move.b  #8,D0
00003DC6  4E4F                    1693      trap    #15
00003DC8  C2BC 005FFFFF           1694      and.l   #$5FFFFF,d1     prevent overflow in divu
00003DCE  82FC 0064               1695      divu    #100,D1         time count / 100
00003DD2  4841                    1696      swap    D1              swap upper and lower words of D1 to put remainder in low word
00003DD4  5241                    1697      addq.w  #1,D1           d1.w contains number from 1 to 100
00003DD6  3401                    1698      move    D1,D2           d2 = d1
00003DD8  4281                    1699      clr.l   D1
00003DDA                          1700      
00003DDA  4E75                    1701      rts                     Returns from random generation subroutine
00003DDC                          1702      
00003DDC                          1703  return:   *Subroutine to branch to to break out of a subroutine when a condition is met
00003DDC  4E75                    1704      rts
00003DDE                          1705      
00003DDE                          1706  take_potion:
00003DDE  0C38 0000 5FF9          1707      CMP.B   #0,PLA_POTIONS      Check if the player has potions to drink
00003DE4  6F00 001A               1708      BLE     no_potions          If the potions are zero or below branch to no_potions
00003DE8                          1709      
00003DE8  5638 5FF0               1710      add.b   #3,PLAYER           Add 3 to the player's health
00003DEC  5338 5FF9               1711      sub.b   #1,PLA_POTIONS      Remove one potion
00003DF0                          1712      
00003DF0  43F9 0000534D           1713      lea     take_potion_msg,A1  Load the take potion message
00003DF6  103C 000E               1714      move.b  #14,D0              Move the number literal 14 to D0 for trap command
00003DFA  4E4F                    1715      trap    #15                 Display the loaded message
00003DFC                          1716      
00003DFC  61AC                    1717      bsr     press_continue      Wait for player input
00003DFE                          1718      
00003DFE  4E75                    1719      rts                         Return from subroutine
00003E00                          1720  
00003E00                          1721  no_potions:
00003E00  43F9 00005387           1722      lea     no_potions_msg,A1   Load the no potions message
00003E06  103C 000E               1723      move.b  #14,D0              Move the number literal 14 to D0 for trap command
00003E0A  4E4F                    1724      trap    #15                 Display the loaded message
00003E0C                          1725      
00003E0C  619C                    1726      bsr     press_continue      Wait for player input
00003E0E                          1727      
00003E0E  4E75                    1728      rts                         Return from subroutine
00003E10                          1729      
00003E10                          1730  decrement_torch:
00003E10  0C38 0000 5FFB          1731      CMP.B   #0,PLA_TORCH    Compare the torch life to 0
00003E16  6FC4                    1732      BLE     return          If it's less than or equalt to zero, return
00003E18  5338 5FFB               1733      sub.b   #1,PLA_TORCH    Decrement by one if it's above zero
00003E1C  4E75                    1734      rts                     Return from subroutine
00003E1E                          1735      
00003E1E                          1736  change_font_colour:        * Changes the font colour to the colour loaded in D1
00003E1E  103C 0015               1737      move.b  #21,D0      Move #21 to D0 for trap command 21
00003E22  243C 01090000           1738      move.l  #FONT,D2    Move the font to D2
00003E28  4E4F                    1739      trap    #15         Set the colour
00003E2A  4281                    1740      clr.l   D1          Clear D1 for later use
00003E2C  4282                    1741      clr.l   D2          Clear D2 for later use
00003E2E  4E75                    1742      rts                 Return from subroutine
00003E30                          1743      
00003E30                          1744  *-------------------------------------------------------
00003E30                          1745  *----------------------Draw loop------------------------
00003E30                          1746  *-------------------------------------------------------
00003E30                          1747  draw_loop:
00003E30  45F9 00008080           1748      lea     MAP_START_POINT,A2     Load starting memory location into A7
00003E36  1C3C 0000               1749      move.b  #0,D6           Data register used for rows
00003E3A  1E3C 0000               1750      move.b  #0,D7           Data register used for columns
00003E3E  7200                    1751      move.l  #0,D1           Clear the D1 data register
00003E40                          1752      
00003E40  6100 0004               1753      bsr     loop_rows       Loop for every row
00003E44  4E75                    1754      rts
00003E46                          1755      
00003E46                          1756  loop_rows:
00003E46  BC7C 000F               1757      CMP     #MAP_LENGTH,D6          Check the rows don't go out of bounds
00003E4A  6E90                    1758      BGT     return          If the rows are greater than 22 end the loop
00003E4C                          1759      
00003E4C  1E3C 0000               1760      move.b  #0,D7           Reset to column 0
00003E50  6100 000A               1761      bsr     loop_columns    Loop for every column
00003E54                          1762      
00003E54  5206                    1763      add.b   #1,D6           Add to the rows
00003E56                          1764      
00003E56  6100 FA04               1765      bsr     endl            Break to the next line
00003E5A  60EA                    1766      bra     loop_rows       Loop through the rows again
00003E5C                          1767      
00003E5C                          1768  loop_columns:
00003E5C  BE3C 000F               1769      CMP.B   #15,D7              Check the rows don't go out of bounds
00003E60  6E00 FF7A               1770      BGT     return              If the rows are greater than 22 end the loop
00003E64                          1771      
00003E64  6100 001C               1772      bsr     draw_tile           Draw the current tile
00003E68  6100 00C2               1773      bsr     check_for_loot_piles Draw the loot piles if there is one on the current tile
00003E6C  6100 013C               1774      bsr     check_for_player    Draw the player in the current tile if they're there
00003E70  6100 0180               1775      bsr     check_for_enemies   Draw an enemy in the current tile if they is one there
00003E74  6100 025E               1776      bsr     check_for_win_point Draw the win point in the current tile if it's there
00003E78  6100 01EE               1777      bsr     check_for_shops     Draw a shop in the current tile if there is one
00003E7C                          1778      
00003E7C  5207                    1779      add.b   #1,D7               Add to the column count
00003E7E  524A                    1780      add     #1,A2               Move to the next memory location
00003E80  60DA                    1781      bra     loop_columns        Loop the columns again
00003E82                          1782      
00003E82                          1783  *-------------------------------------------------------
00003E82                          1784  *----------------------Draw tile------------------------
00003E82                          1785  *-------------------------------------------------------
00003E82                          1786  *Draws the tile at the address in the address register A2
00003E82                          1787  draw_tile:
00003E82  0C12 00FF               1788      CMP.B   #255,(A2)           Check if the value is undifined
00003E86  6700 005E               1789      BEQ     draw_blocked_tile   Draw the blank tile
00003E8A                          1790      
00003E8A  0C12 0001               1791      CMP.B   #1,(A2)
00003E8E  6700 0064               1792      BEQ     draw_both_tile
00003E92  0C12 0003               1793      CMP.B   #3,(A2)
00003E96  6700 006A               1794      BEQ     draw_left_tile
00003E9A  0C12 0004               1795      CMP.B   #4,(A2)
00003E9E  6700 0062               1796      BEQ     draw_left_tile
00003EA2  0C12 0005               1797      CMP.B   #5,(A2)
00003EA6  6700 0068               1798      BEQ     draw_right_tile
00003EAA  0C12 0006               1799      CMP.B   #6,(A2)
00003EAE  6700 0060               1800      BEQ     draw_right_tile
00003EB2  0C12 0008               1801      CMP.B   #8,(A2)
00003EB6  6700 004A               1802      BEQ     draw_left_tile
00003EBA  0C12 000A               1803      CMP.B   #10,(A2)
00003EBE  6700 0050               1804      BEQ     draw_right_tile
00003EC2  0C12 000B               1805      CMP.B   #11,(A2)
00003EC6  6700 003A               1806      BEQ     draw_left_tile
00003ECA  0C12 000C               1807      CMP.B   #12,(A2)
00003ECE  6700 0024               1808      BEQ     draw_both_tile
00003ED2  0C12 000D               1809      CMP.B   #13,(A2)
00003ED6  6700 0038               1810      BEQ     draw_right_tile
00003EDA  0C12 000E               1811      CMP.B   #14,(A2)
00003EDE  6700 0014               1812      BEQ     draw_both_tile
00003EE2                          1813      
00003EE2  6000 003A               1814      BRA     draw_blank_tile     Draw the blank tile
00003EE6                          1815      
00003EE6                          1816  draw_blocked_tile:
00003EE6  43F9 00004E0F           1817      lea     blocked_tile,A1
00003EEC  103C 000E               1818      move.b  #14,D0
00003EF0  4E4F                    1819      trap    #15
00003EF2  4E75                    1820      rts
00003EF4                          1821      
00003EF4                          1822  draw_both_tile:
00003EF4  43F9 00004E03           1823      lea     both_tile,A1
00003EFA  103C 000E               1824      move.b  #14,D0
00003EFE  4E4F                    1825      trap    #15
00003F00  4E75                    1826      rts
00003F02                          1827      
00003F02                          1828  draw_left_tile:
00003F02  43F9 00004E07           1829      lea     left_tile,A1
00003F08  103C 000E               1830      move.b  #14,D0
00003F0C  4E4F                    1831      trap    #15
00003F0E  4E75                    1832      rts
00003F10                          1833      
00003F10                          1834  draw_right_tile:
00003F10  43F9 00004E0B           1835      lea     right_tile,A1
00003F16  103C 000E               1836      move.b  #14,D0
00003F1A  4E4F                    1837      trap    #15
00003F1C  4E75                    1838      rts
00003F1E                          1839      
00003F1E                          1840  draw_blank_tile:
00003F1E  43F9 00004DFF           1841      lea     blank_tile,A1
00003F24  103C 000E               1842      move.b  #14,D0
00003F28  4E4F                    1843      trap    #15
00003F2A  4E75                    1844      rts
00003F2C                          1845  
00003F2C                          1846  check_for_loot_piles:
00003F2C  4BF8 7000               1847      lea     FIRST_LOOT,A5   Load the memory address of the first loot pile
00003F30  1A3C 0000               1848      move.b  #0,D5           Move the starting loot number to D5
00003F34  6100 0004               1849      bsr     loop_loot_piles Loop through all loot piles
00003F38  4E75                    1850      rts                     Return from subroutine
00003F3A                          1851      
00003F3A                          1852  loop_loot_piles:
00003F3A  6100 0014               1853      bsr     check_for_loot  Check for a loot pile
00003F3E                          1854      
00003F3E  BA3C 0002               1855      CMP.B   #ENEMY_MAX,D5   Compare the enemy number with the maximum loot number
00003F42  6C00 FE98               1856      BGE     return          Return from the loop if the current loot number is greater than or equal to the max
00003F46                          1857      
00003F46  5205                    1858      add.b   #1,D5           Add to the current loot number
00003F48  DAFC 0010               1859      add.w   #16,A5          Add to the current loot pointer to move to the next loot pile
00003F4C  5D4D                    1860      sub.w   #L_ACTIVE,A5    Move to the root
00003F4E  60EA                    1861      bra     loop_loot_piles Keep looping the loot piles
00003F50                          1862      
00003F50                          1863  check_for_loot:
00003F50  5C4D                    1864      add.w   #L_ACTIVE,A5    Move to the active state
00003F52  0C15 0000               1865      CMP.B   #0,(A5)         Return if the loot is not active
00003F56  6700 FE84               1866      BEQ     return
00003F5A  5D4D                    1867      sub.w   #L_ACTIVE,A5    Move to the root
00003F5C                          1868  
00003F5C  3615                    1869      move.w  (A5),D3         Move the enemy coordinates into data register D3 for large-value comparisons
00003F5E  B5C3                    1870      CMP.L   D3,A2           Check if the enemy is in the current position
00003F60  6700 0006               1871      BEQ     draw_loot       Draw the enemy if it is
00003F64  5C4D                    1872      add.w   #L_ACTIVE,A5    Move to the active state
00003F66  4E75                    1873      rts                     Return if the enemy is not in the current position
00003F68                          1874      
00003F68                          1875  draw_loot:
00003F68  5C4D                    1876      add.w   #L_ACTIVE,A5    Move to the active state
00003F6A                          1877  
00003F6A  323C 00FF               1878      move.w  #255,D1         Move the word #255 to D1 to set the type of trap 11
00003F6E  103C 000B               1879      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
00003F72  4E4F                    1880      trap    #15             Trap to get the cursor position in D1
00003F74                          1881      
00003F74  0441 0200               1882      sub.w   #512,D1         Move the cursor back by two columns
00003F78  4E4F                    1883      trap    #15             Set the cursor position with trap command 11
00003F7A                          1884      
00003F7A  2601                    1885      move.l  D1,D3           Move the value in D1 to D3 for storage
00003F7C                          1886      
00003F7C  223C 0000FFFF           1887      move.l  #GOLD,D1         Move the colour red to D1
00003F82  6100 FE9A               1888      bsr     change_font_colour  Change the font colour
00003F86                          1889      
00003F86  43F9 00004E1B           1890      lea     loot_mark,A1   load the enemy symbol
00003F8C  103C 000E               1891      move.b  #14,D0          Move #14 to D0 for trap command 14
00003F90  4E4F                    1892      trap    #15             Draw the player mark
00003F92                          1893      
00003F92  223C 00FFFFFF           1894      move.l  #WHITE,D1       Move the colour white to D1
00003F98  6100 FE84               1895      bsr     change_font_colour  Change the font colour
00003F9C                          1896      
00003F9C  2203                    1897      move.l  D3,D1           Move the value in D3 to D1 for previous cursor position
00003F9E                          1898      
00003F9E  0641 0200               1899      add.w   #512,D1         Move the cursor position two columns forward
00003FA2  103C 000B               1900      move.b  #11,D0          Move byte #11 for trap command 11 
00003FA6  4E4F                    1901      trap    #15             Set the cursor position
00003FA8                          1902      
00003FA8  4E75                    1903      rts 
00003FAA                          1904  
00003FAA                          1905  check_for_player:
00003FAA  B5CE                    1906      CMP.L   A6,A2
00003FAC  6700 0004               1907      BEQ     draw_player
00003FB0  4E75                    1908      rts
00003FB2                          1909      
00003FB2                          1910  draw_player:
00003FB2  323C 00FF               1911      move.w  #255,D1         Move the word #255 to D1 to set the type of trap 11
00003FB6  103C 000B               1912      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
00003FBA  4E4F                    1913      trap    #15             Trap to get the cursor position in D1
00003FBC                          1914      
00003FBC  0441 0200               1915      sub.w   #512,D1         Move the cursor back by two columns
00003FC0  4E4F                    1916      trap    #15             Set the cursor position with trap command 11
00003FC2                          1917      
00003FC2  2601                    1918      move.l  D1,D3          Move the value in D1 to D3 for storage
00003FC4                          1919      
00003FC4  223C 0000FF00           1920      move.l  #GREEN,D1       Move the colour green to D1
00003FCA  6100 FE52               1921      bsr     change_font_colour  Change the font colour
00003FCE                          1922      
00003FCE  43F9 00004E13           1923      lea     player_mark,A1  load the player symbol
00003FD4  103C 000E               1924      move.b  #14,D0          Move #14 to D0 for trap command 14
00003FD8  4E4F                    1925      trap    #15             Draw the player mark
00003FDA                          1926      
00003FDA  223C 00FFFFFF           1927      move.l  #WHITE,D1       Move the colour white to D1
00003FE0  6100 FE3C               1928      bsr     change_font_colour  Change the font colour
00003FE4                          1929      
00003FE4  2203                    1930      move.l  D3,D1           Move the value in D3 to D1 for previous cursor position
00003FE6                          1931      
00003FE6  0641 0200               1932      add.w   #512,D1         Move the cursor position two columns forward
00003FEA  103C 000B               1933      move.b  #11,D0          Move byte #11 for trap command 11 
00003FEE  4E4F                    1934      trap    #15             Set the cursor position
00003FF0                          1935      
00003FF0  4E75                    1936      rts
00003FF2                          1937      
00003FF2                          1938  check_for_enemies:
00003FF2  4BF8 6000               1939      lea     FIRST_ENEMY,A5  Load the memory address of the first enemy
00003FF6  1A3C 0000               1940      move.b  #0,D5           Move the starting enemy number to D5
00003FFA  6100 0004               1941      bsr     loop_enemies    Loop through all enemies
00003FFE  4E75                    1942      rts                     Return from subroutine
00004000                          1943      
00004000                          1944  loop_enemies:
00004000  6100 0012               1945      bsr     check_for_enemy Check for an enemy
00004004                          1946      
00004004  BA3C 0002               1947      CMP.B   #ENEMY_MAX,D5   Compare the enemy number with the maximum enemy number
00004008  6C00 FDD2               1948      BGE     return          Return from the loop if the current enemy number is greater than or equal to the max
0000400C                          1949      
0000400C  5205                    1950      add.b   #1,D5           Add to the current enemy number
0000400E  DAFC 000C               1951      add.w   #12,A5          Add to the current enemy pointer to move to the next enemy (16 for next enemy - 4 to get back from position)
00004012  60EC                    1952      bra     loop_enemies    Keep looping the enemies
00004014                          1953      
00004014                          1954  check_for_enemy:
00004014  564D                    1955      add.w   #ALIVE,A5       Add to the enemy memory address to get the enemy's alive state
00004016  0C1D 0000               1956      CMP.B   #0,(A5)+        Check if the enemy is alive
0000401A  6700 FDC0               1957      BEQ     return          Return from the subroutine if not
0000401E                          1958      
0000401E  3615                    1959      move.w  (A5),D3         Move the enemy coordinates into data register D3 for large-value comparisons
00004020  B5C3                    1960      CMP.L   D3,A2           Check if the enemy is in the current position
00004022  6700 0004               1961      BEQ     draw_enemy      Draw the enemy if it is
00004026  4E75                    1962      rts                     Return if the enemy is not in the current position
00004028                          1963      
00004028                          1964  draw_enemy:
00004028  323C 00FF               1965      move.w  #255,D1         Move the word #255 to D1 to set the type of trap 11
0000402C  103C 000B               1966      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
00004030  4E4F                    1967      trap    #15             Trap to get the cursor position in D1
00004032                          1968      
00004032  0441 0200               1969      sub.w   #512,D1         Move the cursor back by two columns
00004036  4E4F                    1970      trap    #15             Set the cursor position with trap command 11
00004038                          1971      
00004038  2601                    1972      move.l  D1,D3          Move the value in D1 to D3 for storage
0000403A                          1973      
0000403A  223C 000000FF           1974      move.l  #RED,D1         Move the colour red to D1
00004040  6100 FDDC               1975      bsr     change_font_colour  Change the font colour
00004044                          1976      
00004044  43F9 00004E15           1977      lea     enemy_mark,A1   load the enemy symbol
0000404A  103C 000E               1978      move.b  #14,D0          Move #14 to D0 for trap command 14
0000404E  4E4F                    1979      trap    #15             Draw the player mark
00004050                          1980      
00004050  223C 00FFFFFF           1981      move.l  #WHITE,D1       Move the colour white to D1
00004056  6100 FDC6               1982      bsr     change_font_colour  Change the font colour
0000405A                          1983      
0000405A  2203                    1984      move.l  D3,D1           Move the value in D3 to D1 for previous cursor position
0000405C                          1985      
0000405C  0641 0200               1986      add.w   #512,D1         Move the cursor position two columns forward
00004060  103C 000B               1987      move.b  #11,D0          Move byte #11 for trap command 11 
00004064  4E4F                    1988      trap    #15             Set the cursor position
00004066                          1989      
00004066  4E75                    1990      rts 
00004068                          1991      
00004068                          1992  check_for_shops:
00004068  4BF8 6500               1993      lea     FIRST_SHOP,A5   Load the memory address of the first shop
0000406C  1A3C 0000               1994      move.b  #0,D5           Move the starting shop number to D5
00004070  6100 0004               1995      bsr     loop_shops      Loop through all shops
00004074  4E75                    1996      rts                     Return from subroutine
00004076                          1997      
00004076                          1998  loop_shops:
00004076  6100 0012               1999      bsr     check_for_shop  Check for a shop
0000407A                          2000      
0000407A  BA3C 0002               2001      CMP.B   #SHOP_MAX,D5    Compare the shop number with the maximum shop number
0000407E  6C00 FD5C               2002      BGE     return          Return from the loop if the current shop number is greater than or equal to the max
00004082                          2003      
00004082  5205                    2004      add.b   #1,D5           Add to the current shop number
00004084  DAFC 0010               2005      add.w   #16,A5          Add to the current shop pointer to move to the next shop
00004088  60EC                    2006      bra     loop_shops      Keep looping the shops
0000408A                          2007      
0000408A                          2008  check_for_shop:
0000408A  3615                    2009      move.w  (A5),D3         Move the shop coordinates into data register D3 for large-value comparisons
0000408C  B5C3                    2010      CMP.L   D3,A2           Check if the shop is in the current position
0000408E  6700 0004               2011      BEQ     draw_shop       Draw the shop if it is
00004092  4E75                    2012      rts                     Return if the shop is not in the current position
00004094                          2013      
00004094                          2014  draw_shop:
00004094  323C 00FF               2015      move.w  #255,D1         Move the word #255 to D1 to set the type of trap 11
00004098  103C 000B               2016      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
0000409C  4E4F                    2017      trap    #15             Trap to get the cursor position in D1
0000409E                          2018      
0000409E  0441 0200               2019      sub.w   #512,D1         Move the cursor back by two columns
000040A2  4E4F                    2020      trap    #15             Set the cursor position with trap command 11
000040A4                          2021      
000040A4  2601                    2022      move.l  D1,D3           Move the value in D1 to D3 for storage
000040A6                          2023      
000040A6  223C 00F000F0           2024      move.l  #PURPLE,D1      Move the colour red to D1
000040AC  6100 FD70               2025      bsr     change_font_colour  Change the font colour
000040B0                          2026      
000040B0  43F9 00004E19           2027      lea     shop_mark,A1    load the enemy symbol
000040B6  103C 000E               2028      move.b  #14,D0          Move #14 to D0 for trap command 14
000040BA  4E4F                    2029      trap    #15             Draw the player mark
000040BC                          2030      
000040BC  223C 00FFFFFF           2031      move.l  #WHITE,D1       Move the colour white to D1
000040C2  6100 FD5A               2032      bsr     change_font_colour  Change the font colour
000040C6                          2033      
000040C6  2203                    2034      move.l  D3,D1           Move the value in D3 to D1 for previous cursor position
000040C8                          2035      
000040C8  0641 0200               2036      add.w   #512,D1         Move the cursor position two columns forward
000040CC  103C 000B               2037      move.b  #11,D0          Move byte #11 for trap command 11 
000040D0  4E4F                    2038      trap    #15             Set the cursor position
000040D2                          2039      
000040D2  4E75                    2040      rts
000040D4                          2041  
000040D4                          2042  check_for_win_point:
000040D4  B5FC 00008156           2043      CMP.L   #WIN_POINT,A2   Check if the win point is in the current tile
000040DA  6700 0004               2044      BEQ     draw_win_point  Branch to draw the win point if so
000040DE  4E75                    2045      rts                     Return from subroutine if not
000040E0                          2046      
000040E0                          2047  draw_win_point:
000040E0  323C 00FF               2048      move.w  #255,D1         Move the word #255 to D1 to set the type of trap 11
000040E4  103C 000B               2049      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
000040E8  4E4F                    2050      trap    #15             Trap to get the cursor position in D1
000040EA                          2051      
000040EA  0441 0200               2052      sub.w   #512,D1         Move the cursor back by two columns
000040EE  4E4F                    2053      trap    #15             Set the cursor position with trap command 11
000040F0                          2054      
000040F0  2601                    2055      move.l  D1,D3           Move the value in D1 to D3 for storage
000040F2                          2056      
000040F2  223C 00FF0000           2057      move.l  #BLUE,D1        Move the colour blue to D1
000040F8  6100 FD24               2058      bsr     change_font_colour  Change the font colour
000040FC                          2059      
000040FC  43F9 00004E17           2060      lea     win_point_mark,A1   load the win point symbol
00004102  103C 000E               2061      move.b  #14,D0              Move #14 to D0 for trap command 14
00004106  4E4F                    2062      trap    #15                 Draw the win point mark
00004108                          2063      
00004108  223C 00FFFFFF           2064      move.l  #WHITE,D1       Move the colour white to D1
0000410E  6100 FD0E               2065      bsr     change_font_colour  Change the font colour
00004112                          2066      
00004112  2203                    2067      move.l  D3,D1           Move the value in D3 to D1 for previous cursor position
00004114                          2068      
00004114  0641 0200               2069      add.w   #512,D1         Move the cursor position two columns forward
00004118  103C 000B               2070      move.b  #11,D0          Move byte #11 for trap command 11 
0000411C  4E4F                    2071      trap    #15             Set the cursor position
0000411E                          2072      
0000411E  4E75                    2073      rts
00004120                          2074      
00004120                          2075  *-------------------------------------------------------
00004120                          2076  *-------------------Setup the world---------------------
00004120                          2077  *-------------------------------------------------------
00004120                          2078  setup_world:
00004120  13FC 000E 0000814A      2079      move.b  #14,$814A   Setup the starting corridor
00004128  13FC 0007 0000813A      2080      move.b  #7,$813A    T junction upwards from starting corridor
00004130  13FC 0004 00008139      2081      move.b  #4,$8139    Left corridor
00004138  13FC 0001 00008129      2082      move.b  #1,$8129
00004140  13FC 0001 00008119      2083      move.b  #1,$8119
00004148                          2084      
00004148  13FC 0004 00008108      2085      move.b  #4,$8108    First shop
00004150  13FC 0000 00008109      2086      move.b  #0,$8109    Entrance
00004158  13FC 0005 0000810A      2087      move.b  #5,$810A
00004160  13FC 0008 000080F8      2088      move.b  #8,$80F8
00004168  13FC 0000 000080F9      2089      move.b  #0,$80F9
00004170  13FC 000A 000080FA      2090      move.b  #10,$80FA
00004178  13FC 0003 000080E8      2091      move.b  #3,$80E8
00004180  13FC 0007 000080E9      2092      move.b  #7,$80E9
00004188  13FC 0006 000080EA      2093      move.b  #6,$80EA
00004190                          2094      
00004190  13FC 0005 0000813B      2095      move.b  #5,$813B    Right corridor
00004198  13FC 0001 0000812B      2096      move.b  #1,$812B
000041A0  13FC 0001 0000811B      2097      move.b  #1,$811B
000041A8  13FC 0008 0000810B      2098      move.b  #8,$810B    Path continues up with a turn off to the right
000041B0                          2099      
000041B0  13FC 0002 0000810C      2100      move.b  #2,$810C    Right path
000041B8  13FC 0002 0000810D      2101      move.b  #2,$810D    Continue right
000041C0  13FC 0005 0000810E      2102      move.b  #5,$810E    Path upwards and to the left
000041C8  13FC 0001 000080FE      2103      move.b  #1,$80FE    Leads upwards into a room
000041D0                          2104      
000041D0  13FC 0004 000080ED      2105      move.b  #4,$80ED    First monster room
000041D8  13FC 0000 000080EE      2106      move.b  #0,$80EE    Entrance
000041E0  13FC 0005 000080EF      2107      move.b  #5,$80EF
000041E8  13FC 0008 000080DD      2108      move.b  #8,$80DD
000041F0  13FC 0000 000080DE      2109      move.b  #0,$80DE
000041F8  13FC 000A 000080DF      2110      move.b  #10,$80DF
00004200  13FC 0003 000080CD      2111      move.b  #3,$80CD
00004208  13FC 0007 000080CE      2112      move.b  #7,$80CE
00004210  13FC 0006 000080CF      2113      move.b  #6,$80CF
00004218                          2114      
00004218  13FC 0001 000080FB      2115      move.b  #1,$80FB    Path that continues up
00004220  13FC 0001 000080EB      2116      move.b  #1,$80EB    Path continues upwards
00004228  13FC 0001 000080DB      2117      move.b  #1,$80DB
00004230                          2118      
00004230                          2119      *Bottom row of room
00004230  13FC 0004 000080C8      2120      move.b  #4,$80C8    Large monster room with locked door
00004238  13FC 0009 000080C9      2121      move.b  #9,$80C9
00004240  13FC 0009 000080CA      2122      move.b  #9,$80CA
00004248  13FC 0000 000080CB      2123      move.b  #0,$80CB    Entrance
00004250  13FC 0005 000080CC      2124      move.b  #5,$80CC
00004258                          2125      *Middle row of room
00004258  13FC 0000 000080B8      2126      move.b  #0,$80B8    Exit to the left
00004260  13FC 0000 000080B9      2127      move.b  #0,$80B9
00004268  13FC 0000 000080BA      2128      move.b  #0,$80BA
00004270  13FC 0000 000080BB      2129      move.b  #0,$80BB
00004278  13FC 000A 000080BC      2130      move.b  #10,$80BC
00004280                          2131      *Top row of room
00004280  13FC 0003 000080A8      2132      move.b  #3,$80A8
00004288  13FC 0007 000080A9      2133      move.b  #7,$80A9
00004290  13FC 0007 000080AA      2134      move.b  #7,$80AA
00004298  13FC 0007 000080AB      2135      move.b  #7,$80AB    Locked door
000042A0  13FC 0006 000080AC      2136      move.b  #6,$80AC
000042A8                          2137      
000042A8  13FC 0002 000080B7      2138      move.b  #2,$80B7    Exit large room leftwards
000042B0  13FC 0002 000080B6      2139      move.b  #2,$80B6    Continue to the left
000042B8  13FC 0007 000080B5      2140      move.b  #7,$80B5    Continue to the left and a path downwards
000042C0  13FC 0002 000080B4      2141      move.b  #2,$80B4    Continue to the left
000042C8                          2142      
000042C8  13FC 0003 000080A1      2143      move.b  #3,$80A1    Room to the left
000042D0  13FC 0007 000080A2      2144      move.b  #7,$80A2
000042D8  13FC 0006 000080A3      2145      move.b  #6,$80A3
000042E0  13FC 0008 000080B1      2146      move.b  #8,$80B1
000042E8  13FC 0000 000080B2      2147      move.b  #0,$80B2
000042F0  13FC 0000 000080B3      2148      move.b  #0,$80B3    Entrance to the right
000042F8  13FC 0004 000080C1      2149      move.b  #4,$80C1
00004300  13FC 0009 000080C2      2150      move.b  #9,$80C2
00004308  13FC 0005 000080C3      2151      move.b  #5,$80C3
00004310                          2152      
00004310  13FC 0001 000080C5      2153      move.b  #1,$80C5    Path leading downwards
00004318  13FC 0001 000080D5      2154      move.b  #1,$80D5
00004320  13FC 000A 000080E5      2155      move.b  #10,$80E5   Path leading downward and to the left
00004328  13FC 0002 000080E4      2156      move.b  #2,$80E4    Path on the left
00004330  13FC 0002 000080E3      2157      move.b  #2,$80E3
00004338  13FC 0003 000080E2      2158      move.b  #3,$80E2    Path takes a turn downwards
00004340  13FC 0001 000080F2      2159      move.b  #1,$80F2    Path continues downwards
00004348                          2160      
00004348  13FC 0003 00008101      2161      move.b  #3,$8101    Regular enemy room
00004350  13FC 0000 00008102      2162      move.b  #0,$8102    Entrance
00004358  13FC 0006 00008103      2163      move.b  #6,$8103
00004360  13FC 0008 00008111      2164      move.b  #8,$8111
00004368  13FC 0000 00008112      2165      move.b  #0,$8112
00004370  13FC 000A 00008113      2166      move.b  #10,$8113
00004378  13FC 0004 00008121      2167      move.b  #4,$8121
00004380  13FC 0009 00008122      2168      move.b  #9,$8122
00004388  13FC 000A 00008123      2169      move.b  #10,$8123   Exit at the bottom
00004390                          2170      
00004390  13FC 0001 000080F5      2171      move.b  #1,$80F5    Path leading downward
00004398  13FC 0001 00008105      2172      move.b  #1,$8105
000043A0  13FC 0001 00008115      2173      move.b  #1,$8115
000043A8  13FC 0001 00008125      2174      move.b  #1,$8125
000043B0                          2175      
000043B0                          2176      *Top row of room
000043B0  13FC 0008 00008133      2177      move.b  #8,$8133    Large enemy room - Exit at top
000043B8  13FC 0007 00008134      2178      move.b  #7,$8134
000043C0  13FC 0000 00008135      2179      move.b  #0,$8135    Entrance
000043C8  13FC 0006 00008136      2180      move.b  #6,$8136
000043D0                          2181      
000043D0                          2182      *Middle row of room
000043D0  13FC 0008 00008143      2183      move.b  #8,$8143
000043D8  13FC 0000 00008144      2184      move.b  #0,$8144
000043E0  13FC 0000 00008145      2185      move.b  #0,$8145
000043E8  13FC 000A 00008146      2186      move.b  #10,$8146
000043F0                          2187      
000043F0                          2188      *Bottom row of room
000043F0  13FC 0004 00008153      2189      move.b  #4,$8153
000043F8  13FC 0009 00008154      2190      move.b  #9,$8154
00004400  13FC 0009 00008155      2191      move.b  #9,$8155
00004408  13FC 0005 00008156      2192      move.b  #5,$8156
00004410                          2193      
00004410  4E75                    2194      rts
00004412                          2195  
00004412                          2196  setup_enemies:
00004412                          2197      * Setup first enemy
00004412  11FC 0003 6000          2198      move.b  #3,$6000    Health - Setup the first enemy
00004418  11FC 0001 6001          2199      move.b  #1,$6001    Damage/level
0000441E  11FC 0001 6002          2200      move.b  #1,$6002    Class type (Knight)
00004424  11FC 0001 6003          2201      move.b  #1,$6003    Alive state (Alive)
0000442A  31FC 80DE 6004          2202      move.w  #$80DE,$6004  Move enemy coordinates
00004430                          2203      
00004430                          2204      * Setup second enemy
00004430  11FC 0003 6010          2205      move.b  #3,$6010    Health - Setup the first enemy
00004436  11FC 0002 6011          2206      move.b  #2,$6011    Damage/level
0000443C  11FC 0001 6012          2207      move.b  #1,$6012    Class type (Knight)
00004442  11FC 0001 6013          2208      move.b  #1,$6013    Alive state (Alive)
00004448  31FC 8155 6014          2209      move.w  #$8155,$6014  Move enemy coordinates
0000444E                          2210      
0000444E  4E75                    2211      rts
00004450                          2212      
00004450                          2213  setup_loot:
00004450                          2214      * Setup first loot pile
00004450  31FC 80DE 7000          2215      move.w  #$80DE,$7000  Move loot coordinates
00004456  11FC 0001 7002          2216      move.b  #1,$7002  Move loot potions
0000445C  11FC 0002 7003          2217      move.b  #2,$7003  Move loot keys
00004462  11FC 000F 7004          2218      move.b  #LIFE_PER_TORCH,$7004  Move loot torches
00004468  11FC 0005 7005          2219      move.b  #5,$7005  Move loot gold
0000446E  11FC 0001 7006          2220      move.b  #1,$7006  Move loot active state
00004474                          2221      
00004474                          2222      * Setup second loot pile
00004474  31FC 8155 7010          2223      move.w  #$8155,$7010  Move loot coordinates
0000447A  11FC 0003 7012          2224      move.b  #3,$7012  Move loot potions
00004480  11FC 0005 7013          2225      move.b  #5,$7013  Move loot keys
00004486  11FC 0001 7014          2226      move.b  #1,$7014  Move loot torches
0000448C  11FC 0002 7015          2227      move.b  #2,$7015  Move loot gold
00004492  11FC 0001 7016          2228      move.b  #1,$7016  Move loot active state
00004498                          2229  
00004498                          2230      
00004498                          2231  setup_player:
00004498  11FC 000A 5FF0          2232      move.b  #10,PLAYER      put score/health in memory location $5FF0
0000449E  11FC 0001 5FF1          2233      move.b  #1,PLA_DAMAGE   Assign the default damage for the player
000044A4  11FC 0000 5FF3          2234      move.b  #0,GAME_STATE   Put game state number in memory location $5FF3
000044AA                          2235      *0 = Pick role/intro | 5 = Move around | 6 = Combat | 7 = Shop | 64 = End game
000044AA                          2236  
000044AA  11FC 0000 5FF2          2237      move.b  #0,PLA_CLASS    put class number in memory location $5FF2
000044B0                          2238      * 1 corresponds to knight - 2 corresponds to mage - 3 corresponds to rogue
000044B0                          2239      
000044B0  11FC 0064 5FF8          2240      move.b  #100,PLA_GOLD    Assign the player's base gold value
000044B6  11FC 0001 5FF9          2241      move.b  #1,PLA_POTIONS  Assign the player's base potions value
000044BC  11FC 0000 5FFA          2242      move.b  #0,PLA_KEYS     Assign the player's base keys value
000044C2                          2243      *move.b  #LIFE_PER_TORCH,PLA_TORCH   Assign the player's base torch value
000044C2  11FC 0032 5FFB          2244      move.b  #50,PLA_TORCH   Assign the player's base torch value
000044C8                          2245      
000044C8  4DF9 0000814A           2246      lea     $814A,A6        Set the player coordinate to the first corridor
000044CE  31CE 5FF6               2247      move.w  A6,PLA_P_POS    Set the player's previous position to their current
000044D2                          2248      
000044D2  4E75                    2249      rts
000044D4                          2250      
000044D4                          2251  setup_shops:
000044D4                          2252      * Setup the first shop
000044D4  31FC 80F9 6500          2253      move.w  #$80F9,$6500    Set the position
000044DA  11FC 0002 6502          2254      move.b  #2,$6502        Set the potions
000044E0  11FC 0003 6503          2255      move.b  #3,$6503        Set the keys
000044E6  11FC 0004 6504          2256      move.b  #4,$6504        Set the torches
000044EC  11FC 0005 6505          2257      move.b  #5,$6505        Set the damage
000044F2                          2258      
000044F2                          2259      * Setup the second shop
000044F2  31FC 80B2 6510          2260      move.w  #$80B2,$6510    Set the position
000044F8  11FC 0004 6512          2261      move.b  #4,$6512        Set the potions
000044FE  11FC 0003 6513          2262      move.b  #3,$6513        Set the keys
00004504  11FC 0002 6514          2263      move.b  #2,$6514        Set the torches
0000450A  11FC 0001 6515          2264      move.b  #1,$6515        Set the damage
00004510                          2265  
00004510  4E75                    2266      rts
00004512                          2267      
00004512                          2268  *-------------------------------------------------------
00004512                          2269  *-------------------Data Delarations--------------------
00004512                          2270  *-------------------------------------------------------
00004512                          2271  
00004512= 0D 0A 00                2272  crlf:           dc.b    $0D,$0A,0
00004515= 2A 2A 2A 2A 2A 2A ...   2273  welcome_msg:    dc.b    '*****************************************************************',$0D,$0A
00004558= 20 20 20 20 20 20 ...   2274                  dc.b    '      __  ___      ___  __      ___        ______    _____  ___',$0D,$0A
00004599= 20 20 20 20 20 2F ...   2275                  dc.b    '     /""\|"  \    /"  |/""\    |"  |      /    " \  (\"   \|"  \',$0D,$0A
000045DB= 20 20 20 20 2F 20 ...   2276                  dc.b    '    /    \\   \  //  //    \   ||  |     // ____  \ |.\\   \    |',$0D,$0A
0000461E= 20 20 20 2F 20 20 ...   2277                  dc.b    '   /  /\  \\\  \/. .//  /\  \  |:  |    /  /    ) :)|: \.   \\  |',$0D,$0A
00004661= 20 20 2F 2F 20 20 ...   2278                  dc.b    '  //  __   \\.    ////  __   \  \  |___(: (____/ // |.  \    \. |',$0D,$0A
000046A4= 20 2F 20 20 20 2F ...   2279                  dc.b    ' /   /  \\  \\\   //   /  \\  \( \_|:  \\        /  |    \    \ |',$0D,$0A
000046E7= 28 5F 5F 5F 2F 20 ...   2280                  dc.b    '(___/    \___)\__/(___/    \___)\_______)\"_____/    \___|\____\)',$0D,$0A,$0D,$0A
0000472C= 2A 2A 2A 2A 2A 2A ...   2281                  dc.b    '*****************************************************************',$0D,$0A,0
00004770= 2E 00                   2282  loop_msg:       dc.b    '.',0
00004772= 54 68 65 20 64 61 ...   2283  tutorial_msg    dc.b    'The darkness here is dangerious, keep your torch close and dont let it go out.',$0D,$0A
000047C2= 45 76 65 72 79 20 ...   2284                  dc.b    'Every movement you make decreases your torch life, so think before you move.',$0D,$0A
00004810= 59 6F 75 20 63 61 ...   2285                  dc.b    'You can buy more torches in the shop, thats probably a good place to start...',$0D,$0A,0
00004860= 31 3E 20 52 65 73 ...   2286  replay_msg:     dc.b    '1> Restart the game.',$0D,$0A
00004876= 32 3E 20 51 75 69 ...   2287                  dc.b    '2> Quit the game.',$0D,$0A,0
0000488A= 59 6F 75 20 61 77 ...   2288  wake_up_msg:    dc.b    'You awake in a room, on a bed of red velvet, with no memory',$0D,$0A
000048C7= 6F 66 20 68 6F 77 ...   2289                  dc.b    'of how you got here. Stones crumble from the ceiling, the place looks like an',$0D,$0A
00004916= 6F 6C 64 20 63 61 ...   2290                  dc.b    'old castle. You get a dark feeling from this place, and you know you must',$0D,$0A
00004961= 65 73 63 61 70 65 ...   2291                  dc.b    'escape...',$0D,$0A
0000496C= 59 6F 75 20 63 6C ...   2292                  dc.b    'You climb from the bed and look in a nearby mirror:',$0D,$0A,0
000049A2= 31 3E 20 59 6F 75 ...   2293  pick_role_msg:  dc.b    '1> You wear armour of polished iron, a short sword and heavy shield laying',$0D,$0A
000049EE= 63 6C 6F 73 65 20 ...   2294                  dc.b    'close by. (Knight class)',$0D,$0A,$0D,$0A
00004A0A= 32 3E 20 59 6F 75 ...   2295                  dc.b    '2> You wear a cloak with mystic symbols sewn into the fabrics, an ancient',$0D,$0A
00004A55= 6C 6F 6F 6B 69 6E ...   2296                  dc.b    'looking staff lays near. (Mage class)',$0D,$0A,$0D,$0A
00004A7E= 33 3E 20 59 6F 75 ...   2297                  dc.b    '3> You wear tight, well-fitting leather armour with reminents of black dye',$0D,$0A
00004ACA= 73 74 61 69 6E 65 ...   2298                  dc.b    'stained to the material. Two knives are fastened to your belt. (Rogue class)',$0D,$0A,0
00004B19= 45 6E 74 65 72 20 ...   2299  input_nums_msg: dc.b    'Enter num between 1 and ',0
00004B32= 3A 20 00                2300  colon_msg:      dc.b    ': ',0
00004B35                          2301  
00004B35= 49 6E 70 75 74 74 ...   2302  input_error_msg:    dc.b    'Inputted number is outside of range.',$0D,$0A,0
00004B5C= 47 61 6D 65 73 74 ...   2303  fake_gamestate_msg: dc.b    'Gamestate doesnt exist',$0D,$0A,0
00004B75= 59 6F 75 20 67 72 ...   2304  knight_role_msg:    dc.b    'You grab your sword and shield, pull a torch from the wall, and leave the room.',$0D,$0A,0
00004BC7= 59 6F 75 20 68 61 ...   2305  knight_spec_msg:    dc.b    'You have chosen the KNIGHT class. You specialise in blocking and countering',$0D,$0A,0
00004C15= 59 6F 75 20 70 69 ...   2306  mage_role_msg:  dc.b    'You pick up your staff, grab a torch from the wall, and leave the room.',$0D,$0A,0
00004C5F= 59 6F 75 20 68 61 ...   2307  mage_spec_msg:  dc.b    'You have chosen the MAGE class. You specialise in magic attacks.',$0D,$0A,0
00004CA2= 59 6F 75 20 66 61 ...   2308  rogue_role_msg: dc.b    'You fasten your belt, grab a torch from the wall, and leave the room.',$0D,$0A,0
00004CEA= 59 6F 75 20 68 61 ...   2309  rogue_spec_msg: dc.b    'You have chosen the ROGUE class. You specialise in quick melee attacks.',$0D,$0A,0
00004D34= 31 3E 20 4D 6F 76 ...   2310  movement_msg:   dc.b    '1> Move north.',$0D,$0A
00004D44= 32 3E 20 4D 6F 76 ...   2311                  dc.b    '2> Move south.',$0D,$0A
00004D54= 33 3E 20 4D 6F 76 ...   2312                  dc.b    '3> Move west.',$0D,$0A
00004D63= 34 3E 20 4D 6F 76 ...   2313                  dc.b    '4> Move east.',$0D,$0A
00004D72= 35 3E 20 44 72 69 ...   2314                  dc.b    '5> Drink health potion.',$0D,$0A,0
00004D8C= 4D 6F 76 65 64 20 ...   2315  move_north_msg: dc.b    'Moved north.',$0D,$0A,0
00004D9B= 4D 6F 76 65 64 20 ...   2316  move_east_msg:  dc.b    'Moved east.',$0D,$0A,0
00004DA9= 4D 6F 76 65 64 20 ...   2317  move_south_msg: dc.b    'Moved south.',$0D,$0A,0
00004DB8= 4D 6F 76 65 64 20 ...   2318  move_west_msg:  dc.b    'Moved west.',$0D,$0A,0
00004DC6= 41 20 77 61 6C 6C ...   2319  movement_blocked_msg:  dc.b    'A wall blocks your path.',$0D,$0A,0
00004DE1= 45 6E 74 65 72 20 ...   2320  continue_msg:   dc.b    'Enter any key to continue... ',0
00004DFF= 20 20 20 00             2321  blank_tile      dc.b    '   ',0
00004E03= 7C 20 7C 00             2322  both_tile       dc.b    '| |',0
00004E07= 7C 20 20 00             2323  left_tile       dc.b    '|  ',0
00004E0B= 20 20 7C 00             2324  right_tile      dc.b    '  |',0
00004E0F= 5C 2F 5C 00             2325  blocked_tile:   dc.b    '\/\',0
00004E13= 2A 00                   2326  player_mark:    dc.b    '*',0
00004E15= 58 00                   2327  enemy_mark:     dc.b    'X',0
00004E17= 40 00                   2328  win_point_mark: dc.b    '@',0
00004E19= 24 00                   2329  shop_mark:      dc.b    '$',0
00004E1B= 25 00                   2330  loot_mark:      dc.b    '%',0
00004E1D= 41 20 6D 6F 6E 73 ...   2331  encounter_msg:  dc.b    'A monster blocks your path, it looks ready to attack!',$0D,$0A,0
00004E55= 31 3E 20 42 6C 6F ...   2332  combat_msg:     dc.b    '1> Block and Counter.',$0D,$0A
00004E6C= 32 3E 20 43 61 73 ...   2333                  dc.b    '2> Cast Magic.',$0D,$0A
00004E7C= 33 3E 20 41 74 74 ...   2334                  dc.b    '3> Attack Swiftly.',$0D,$0A
00004E90= 34 3E 20 54 72 79 ...   2335                  dc.b    '4> Try Run.',$0D,$0A
00004E9D= 35 3E 20 44 72 69 ...   2336                  dc.b    '5> Drink Health Potion.',$0D,$0A,0
00004EB7= 59 6F 75 20 65 73 ...   2337  escape_msg:             dc.b    'You escaped the monster!',$0D,$0A,0
00004ED2= 59 6F 75 20 74 72 ...   2338  fail_escape_msg:        dc.b    'You try to run, but the monster catches and damages you!',$0D,$0A,0
00004F0D= 59 6F 75 20 62 6F ...   2339  both_block_msg:         dc.b    'You both block, No damage is done!',$0D,$0A,0
00004F32= 59 6F 75 20 62 6F ...   2340  both_cast_magic_msg:    dc.b    'You both cast magic at eachother, the spells clash in mid air! No damage',$0D,$0A
00004F7C= 69 73 20 64 6F 6E ...   2341                          dc.b    'is done!',$0D,$0A,0
00004F87= 59 6F 75 20 62 6F ...   2342  both_melee_msg:         dc.b    'You both lunge forward, metal clashes together, but no damage is done!',$0D,$0A,0
00004FD0= 54 68 65 20 65 6E ...   2343  hit_against_block_msg:  dc.b    'The enemy blocks, you cast a cast a spell and it damages the monster!',$0D,$0A,0
00005018= 54 68 65 20 65 6E ...   2344  hit_against_magic_msg:  dc.b    'The enemy begins to charge a spell but you lunge forward and hit it first,',$0D,$0A
00005064= 64 61 6D 61 67 69 ...   2345                          dc.b    'damaging the monster!',$0D,$0A,0
0000507C= 54 68 65 20 65 6E ...   2346  hit_against_melee_msg:  dc.b    'The enemy lunges forward but you block quicky, then counter, damaging the',$0D,$0A
000050C7= 6D 6F 6E 73 74 65 ...   2347                          dc.b    'monster!',$0D,$0A,0
000050D2= 59 6F 75 20 6C 75 ...   2348  hit_by_counter_msg:     dc.b    'You lunge at the enemy but they block before you hit, they swing around quickly',$0D,$0A
00005123= 61 6E 64 20 64 61 ...   2349                          dc.b    'and damage you!',$0D,$0A,0
00005135= 59 6F 75 20 74 72 ...   2350  hit_by_magic_msg:       dc.b    'You try to block the enemies attack, but they cast a spell that breaks through',$0D,$0A
00005185= 79 6F 75 72 20 64 ...   2351                          dc.b    'your defense and damages you!',$0D,$0A,0
000051A5= 59 6F 75 20 74 72 ...   2352  hit_by_melee_msg:       dc.b    'You try to charge up a spell, but the enemy lunges forward and damages you!',$0D,$0A,0
000051F3= 48 65 61 6C 74 68 ...   2353  health_msg:             dc.b    'Health: ',0
000051FC= 45 6E 65 6D 79 20 ...   2354  enemy_health_msg:       dc.b    'Enemy Health: ',0
0000520B= 54 6F 72 63 68 20 ...   2355  torch_msg:              dc.b    'Torch Life: ',0
00005218= 44 61 6D 61 67 65 ...   2356  damage_lvl_msg          dc.b    'Damage lvl: ',0
00005225= 49 6E 76 65 6E 74 ...   2357  inventory_msg:          dc.b    'Inventory:',0
00005230= 2D 20 47 6F 6C 64 ...   2358  gold_msg:               dc.b    '- Gold ',0
00005238= 2D 20 4B 65 79 20 00    2359  key_msg:                dc.b    '- Key ',0
0000523F= 2D 20 50 6F 74 69 ...   2360  potions_msg:            dc.b    '- Potion ',0
00005249= 2D 20 54 6F 72 63 ...   2361  torches_msg:            dc.b    '- Torch ',0
00005252= 2D 20 44 61 6D 61 ...   2362  damage_up_msg:          dc.b    '- Damage Upgrades ',0
00005265= 54 68 65 20 6D 6F ...   2363  battle_won_msg:         dc.b    'The monster collapses at your feet. It is dead!',$0D,$0A,0
00005297= 28 00                   2364  bracket_open_msg:       dc.b    '(',0
00005299= 29 00                   2365  bracket_close_msg:      dc.b    ')',0
0000529B= 59 6F 75 20 66 65 ...   2366  death_msg:          dc.b    'You feel your last breath of air leave your lungs...',$0D,$0A
000052D1= 59 6F 75 72 20 6B ...   2367                      dc.b    'Your knees hit the ground...',$0D,$0A
000052EF= 59 6F 75 20 68 61 ...   2368                      dc.b    'You have died.',$0D,$0A,0
00005300= 59 6F 75 20 66 65 ...   2369  win_msg:            dc.b    'You feel the outside breeze hit your face...',$0D,$0A
0000532E= 59 6F 75 20 68 61 ...   2370                      dc.b    'You have escaped the castle!',$0D,$0A,0
0000534D= 59 6F 75 20 64 72 ...   2371  take_potion_msg:    dc.b    'You drink a health potion...',$0D,$0A
0000536B= 33 20 68 65 61 6C ...   2372                      dc.b    '3 health points restored!',$0D,$0A,0
00005387= 59 6F 75 20 61 72 ...   2373  no_potions_msg:     dc.b    'You are out of potions.',$0D,$0A,0
000053A1= 22 4C 6F 6F 6B 69 ...   2374  shop_enter_msg:     dc.b    '"Looking to lighten that coin pouch of yours?!"',$0D,$0A,0
000053D3= 31 3E 20 42 75 79 ...   2375  shop_msg:       dc.b    '1> Buy Potion. (5g)',$0D,$0A
000053E8= 32 3E 20 42 75 79 ...   2376                  dc.b    '2> Buy Key. (15g)',$0D,$0A
000053FB= 33 3E 20 42 75 79 ...   2377                  dc.b    '3> Buy Torch. (10g)',$0D,$0A
00005410= 34 3E 20 42 75 79 ...   2378                  dc.b    '4> Buy Damage Upgrade. (20g)',$0D,$0A
0000542E= 35 3E 20 4C 65 61 ...   2379                  dc.b    '5> Leave Shop.',$0D,$0A,0
0000543F= 22 50 6C 65 61 73 ...   2380  leave_shop_msg: dc.b    '"Pleasure doing business with you."',$0D,$0A,0
00005465= 22 2E 2E 2E 41 6E ...   2381  buy_item_msg:   dc.b    '"...And its yours!"',$0D,$0A,0
0000547B= 53 68 6F 70 20 53 ...   2382  shop_stock_msg: dc.b    'Shop Stock:',0
00005487= 59 6F 75 72 20 49 ...   2383  player_msg:     dc.b    'Your Items:',0
00005493= 22 4E 6F 74 20 65 ...   2384  no_money_msg:   dc.b    '"Not enough gold, traveller."',$0D,$0A,0
000054B3= 22 53 6F 72 72 79 ...   2385  no_item_msg:    dc.b    '"Sorry, I dont have any of them left..."',$0D,$0A,0
000054DE= 54 68 65 20 64 61 ...   2386  no_torch_msg:   dc.b    'The darkness burns...',$0D,$0A,0
000054F6= 59 6F 75 20 70 69 ...   2387  pickup_loot_msg:    dc.b    'You picked up a loot pile',$0D,$0A,0
00005512= 2B 20 47 6F 6C 64 ...   2388  pickup_gold_msg:    dc.b    '+ Gold ',0
0000551A= 2B 20 50 6F 74 69 ...   2389  pickup_potion_msg:  dc.b    '+ Potion ',0
00005524= 2B 20 4B 65 79 20 00    2390  pickup_key_msg:     dc.b    '+ Key ',0
0000552B= 2B 20 54 6F 72 63 ...   2391  pickup_torch_msg:   dc.b    '+ Torch life ',0
00005539= 43 6C 61 73 73 20 ...   2392  double_damage_msg:  dc.b    'Class Bonus - Double Damage!',$0D,$0A,0
00005558= 20 20 20 20 20 20 ...   2393  graveyard_msg:  dc.b    '      ,-=-.       ______     _',$0D,$0A
00005578= 20 20 20 20 20 2F ...   2394                  dc.b    '     /  +  \     />----->  _|1|_',$0D,$0A
0000559A= 20 20 20 20 20 7C ...   2395                  dc.b    '     | ~~~ |    // -/- /  |_ H _|',$0D,$0A
000055BD= 20 20 20 20 20 7C ...   2396                  dc.b    '     |R.I.P|   //  /  /     |S|',$0D,$0A
000055DE= 5C 76 56 2C 2C 7C ...   2397                  dc.b    '\vV,,|_____|V,//_____/VvV,v,|_|/,,vhjwv/,',$0D,$0A,0
0000560A= 20 20 20 20 20 20 ...   2398  skeleton_msg:   dc.b    '           .-.',$0D,$0A
0000561A= 20 2F 5C 5F 5F 5F ...   2399                  dc.b    ' /\____/\ (o.o)',$0D,$0A
0000562B= 7C 20 20 5F 7C 7C ...   2400                  dc.b    '|  _||_  | |=|',$0D,$0A
0000563B= 20 5C 2F 20 7C 7C ...   2401                  dc.b    ' \/ || \/ __|__',$0D,$0A
0000564C= 20 20 20 20 7C 7C ...   2402                  dc.b    '    ||\_//.=|=.\\',$0D,$0A
0000565F= 20 20 20 20 7C 7C ...   2403                  dc.b    '    ||\_/ .=|=. \\',$0D,$0A
00005673= 20 20 20 20 7C 7C ...   2404                  dc.b    '    ||    .=|=. //',$0D,$0A
00005687= 20 20 20 20 7C 7C ...   2405                  dc.b    '    ||    (_=_)//',$0D,$0A
0000569A= 20 20 20 20 7C 7C ...   2406                  dc.b    '    ||   (:| |:)',$0D,$0A
000056AC= 20 20 20 20 7C 7C ...   2407                  dc.b    '    ||    || ||',$0D,$0A
000056BD= 20 20 20 20 7C 7C ...   2408                  dc.b    '    ||    () ()',$0D,$0A
000056CE= 20 20 20 20 2F 5C ...   2409                  dc.b    '    /\    || ||',$0D,$0A
000056DF= 20 20 20 20 7C 7C ...   2410                  dc.b    '    ||    || ||',$0D,$0A
000056F0= 20 20 20 20 5C 2F ...   2411                  dc.b    '    \/  ==   ==',$0D,$0A,0
00005702= 20 20 20 20 20 20 ...   2412  merchant_msg:   dc.b    '         ____',$0D,$0A
00005711= 20 20 20 20 20 20 ...   2413                  dc.b    '        |    |',$0D,$0A
00005721= 20 20 20 20 20 20 ...   2414                  dc.b    '      --:<<>>:--',$0D,$0A
00005733= 20 20 20 20 20 20 ...   2415                  dc.b    '        :~_~ :',$0D,$0A
00005743= 20 20 20 20 20 20 ...   2416                  dc.b    '        _:"":\___',$0D,$0A
00005756= 20 20 5F 5F 5F 5F ...   2417                  dc.b    '  ____./ :::     \._',$0D,$0A
0000576C= 3C 3C 3D 29 20 20 ...   2418                  dc.b    '<<=)           \    :',$0D,$0A
00005783= 20 5C 2F 2D 2D 2D ...   2419                  dc.b    ' \/---/\_      /\._. ',$0D,$0A
0000579A= 20 7C 7C 20 20 20 ...   2420                  dc.b    ' ||       \====:_ ""',$0D,$0A
000057B0= 20 7C 7C 20 20 20 ...   2421                  dc.b    ' ||      ./     \\',$0D,$0A
000057C4= 20 7C 7C 20 20 20 ...   2422                  dc.b    ' ||     :       :',$0D,$0A
000057D7= 20 7C 7C 20 20 20 ...   2423                  dc.b    ' ||    /   :    \',$0D,$0A
000057EA= 20 7C 7C 20 20 20 ...   2424                  dc.b    ' ||   :   .      \.',$0D,$0A
000057FF= 20 7C 7C 20 20 20 ...   2425                  dc.b    ' ||   :  : :      :',$0D,$0A
00005814= 20 7C 7C 20 20 20 ...   2426                  dc.b    ' ||   :__:-:__.;--',$0D,$0A,0
00005829= 20 20 20 20 20 20 ...   2427  castle_msg:     dc.b    '                T~~',$0D,$0A
0000583E= 20 20 20 20 20 20 ...   2428                  dc.b    '                |',$0D,$0A
00005851= 20 20 20 20 20 20 ...   2429                  dc.b    '               /"\',$0D,$0A
00005865= 20 20 20 20 20 20 ...   2430                  dc.b    '       T~~     |.| T~~',$0D,$0A
0000587D= 20 20 20 54 7E 7E ...   2431                  dc.b    '   T~~ |    T~ WWWW|',$0D,$0A
00005893= 20 20 20 7C 20 20 ...   2432                  dc.b    '   |  /"\   |  |  |/\T~~',$0D,$0A
000058AD= 20 20 2F 22 5C 20 ...   2433                  dc.b    '  /"\ WWW  /"\ |. |WW|',$0D,$0A
000058C5= 20 57 57 57 57 57 ...   2434                  dc.b    ' WWWWW/\| /   \|./\|/"\',$0D,$0A
000058DE= 20 7C 20 20 20 2F ...   2435                  dc.b    ' |   /__\/]WWW[\/__\WWWW',$0D,$0A
000058F8= 20 7C 22 20 20 57 ...   2436                  dc.b    ' |"  WWWW.|I_I|.WWWW.   |',$0D,$0A
00005913= 20 7C 20 20 20 7C ...   2437                  dc.b    ' |   |. |/  -  \|. |.  |',$0D,$0A
0000592D= 20 7C 2E 20 20 7C ...   2438                  dc.b    ' |.  |  |LI=H=LI|. |   |',$0D,$0A
00005947= 20 7C 20 20 20 7C ...   2439                  dc.b    ' |   |. | |[_]| |  |.  |',$0D,$0A
00005961= 20 7C 20 20 20 7C ...   2440                  dc.b    ' |   |  |_|###|_|  |   |',$0D,$0A
0000597B= 20 20 2D 2D 2D 20 ...   2441                  dc.b    '  --- -- -/___\- -- --- ',$0D,$0A,0
00005996                          2442                  
00005996                          2443  
00005996                          2444  
00005996                          2445  
00005996                          2446  
00005996                          2447  
00005996                          2448  
00005996                          2449  
00005996                          2450  
00005996                          2451  
00005996                          2452  
00005996                          2453  
00005996                          2454  
00005996                          2455  
00005996                          2456  
00005996                          2457  
00005996                          2458  
00005996                          2459      end start

No errors detected
No warnings generated


SYMBOL TABLE INFORMATION
Symbol-name         Value
-------------------------
ALIVE               3
BATTLE_WON_MSG      5265
BLANK_TILE          4DFF
BLOCKED_TILE        4E0F
BLOCK_COUNTER       3A1C
BLUE                FF0000
BOTH_BLOCK          3AB4
BOTH_BLOCK_MSG      4F0D
BOTH_CAST_MAGIC     3AC6
BOTH_CAST_MAGIC_MSG  4F32
BOTH_MELEE          3AD8
BOTH_MELEE_MSG      4F87
BOTH_TILE           4E03
BRACKET_CLOSE_MSG   5299
BRACKET_OPEN_MSG    5297
BUY_ITEM_MSG        5465
BUY_KEY             3C68
BUY_POTION          3C32
BUY_TORCH           3CA0
CASTLE_MSG          5829
CAST_MAGIC          3A36
CHANGE_FONT_COLOUR  3E1E
CHECK_FOR_ENEMIES   3FF2
CHECK_FOR_ENEMY     4014
CHECK_FOR_LOOT      3F50
CHECK_FOR_LOOT_PILES  3F2C
CHECK_FOR_PLAYER    3FAA
CHECK_FOR_SHOP      408A
CHECK_FOR_SHOPS     4068
CHECK_FOR_WIN_POINT  40D4
CLASS               2
CLEAR_SCREEN        382C
COLON_MSG           4B32
COMBAT              39DA
COMBAT_MSG          4E55
CONTINUE_MSG        4DE1
CRLF                4512
CSR_POS_BATTLE      2001
CSR_POS_MOVE        3201
CSR_POS_SHOP_P      3401
CSR_POS_SHOP_S      1801
DAMAGE              1
DAMAGE_ENEMY        3B7A
DAMAGE_LVL_MSG      5218
DAMAGE_PLAYER       3BB4
DAMAGE_UP_MSG       5252
DAMAGE_UP_PRICE     14
DEATH_MSG           529B
DECORATE            380E
DECREMENT_TORCH     3E10
DOUBLE_DAMAGE_ENEMY  3B8A
DOUBLE_DAMAGE_MSG   5539
DOUBLE_DAMAGE_PLAYER  3BCA
DRAW                3476
DRAW_BATTLE_INFO    35EA
DRAW_BLANK_TILE     3F1E
DRAW_BLOCKED_TILE   3EE6
DRAW_BOTH_TILE      3EF4
DRAW_CASTLE         34B2
DRAW_ENEMY          4028
DRAW_GRAVEYARD      34A4
DRAW_HUD            34CE
DRAW_ITEM_NUMBER    35C8
DRAW_LEFT_TILE      3F02
DRAW_LOOP           3E30
DRAW_LOOT           3F68
DRAW_MERCHANT       34C0
DRAW_PLAYER         3FB2
DRAW_PLAYER_INFO    34EE
DRAW_RIGHT_TILE     3F10
DRAW_SHOP           4094
DRAW_SHOP_INFO      3664
DRAW_SKELETON       3496
DRAW_TILE           3E82
DRAW_WIN_POINT      40E0
ENCOUNTER_MSG       4E1D
END                 3006
ENDL                385C
ENEMIES_CHECK       3336
ENEMIES_LOOP        3344
ENEMY_ALIVE_CHECK   343E
ENEMY_CHECK         3362
ENEMY_DIED          3448
ENEMY_HEALTH_MSG    51FC
ENEMY_MARK          4E15
ENEMY_MAX           2
ENTER_COMBAT        3396
ENTER_SHOP          3416
ESCAPE_ATTACK       3A7A
ESCAPE_MSG          4EB7
EXIT                0
FAIL_ESCAPE         3A98
FAIL_ESCAPE_MSG     4ED2
FAKE_GAMESTATE_MSG  4B5C
FIRST_ENEMY         6000
FIRST_LOOT          7000
FIRST_SHOP          6500
FONT                1090000
GAME                3000
GAMELOOP            3170
GAMEPLAY            37E0
GAME_STATE          5FF3
GOLD                FFFF
GOLD_MSG            5230
GRAVEYARD_MSG       5558
GREEN               FF00
HEALTH_MSG          51F3
HIT_AGAINST_BLOCK   3AEA
HIT_AGAINST_BLOCK_MSG  4FD0
HIT_AGAINST_MAGIC   3B00
HIT_AGAINST_MAGIC_MSG  5018
HIT_AGAINST_MELEE   3B16
HIT_AGAINST_MELEE_MSG  507C
HIT_BY_COUNTER      3B2C
HIT_BY_COUNTER_MSG  50D2
HIT_BY_MAGIC        3B46
HIT_BY_MAGIC_MSG    5135
HIT_BY_MELEE        3B60
HIT_BY_MELEE_MSG    51A5
INPUT               311E
INPUT_ERROR_MSG     4B35
INPUT_NUMS_MSG      4B19
INVALID_INPUT       3162
INVENTORY_MSG       5225
KEY_MSG             5238
KEY_PRICE           F
KNIGHT_ROLE_MSG     4B75
KNIGHT_SELECT       3062
KNIGHT_SPEC_MSG     4BC7
LEAVE_SHOP          3D12
LEAVE_SHOP_MSG      543F
LEFT_TILE           4E07
LIFE_PER_TORCH      F
LOOP_COLUMNS        3E5C
LOOP_ENEMIES        4000
LOOP_LOOT_PILES     3F3A
LOOP_MSG            4770
LOOP_ROWS           3E46
LOOP_SHOPS          4076
LOOT_MARK           4E1B
LOOT_PILES_CHECK    3224
LOOT_PILE_CHECK     3246
LOOT_PILE_LOOP      3232
L_ACTIVE            6
MAGE_ROLE_MSG       4C15
MAGE_SELECT         3092
MAGE_SPEC_MSG       4C5F
MANAGE_INPUT        3148
MANAGE_TORCH        3302
MAP_LENGTH          F
MAP_START_POINT     8080
MELEE_ATTACK        3A50
MERCHANT_MSG        5702
MOVEMENT            3872
MOVEMENT_BLOCKED    39C8
MOVEMENT_BLOCKED_MSG  4DC6
MOVEMENT_CHECKS     3208
MOVEMENT_MSG        4D34
MOVE_EAST           3984
MOVE_EAST_MSG       4D9B
MOVE_NORTH          38B4
MOVE_NORTH_MSG      4D8C
MOVE_SOUTH          38FA
MOVE_SOUTH_MSG      4DA9
MOVE_WEST           3940
MOVE_WEST_MSG       4DB8
NO_ITEM_MSG         54B3
NO_MONEY            3D34
NO_MONEY_MSG        5493
NO_POTIONS          3E00
NO_POTIONS_MSG      5387
NO_SHOP_DAMAGE_UP   3D92
NO_SHOP_KEYS        3D62
NO_SHOP_POTIONS     3D4A
NO_SHOP_TORCHES     3D7A
NO_TORCH_MSG        54DE
OUT                 3816
PICKUP_GOLD_MSG     5512
PICKUP_KEY_MSG      5524
PICKUP_LOOT         325C
PICKUP_LOOT_MSG     54F6
PICKUP_POTION_MSG   551A
PICKUP_TORCH_MSG    552B
PICK_ROLE           301C
PICK_ROLE_MSG       49A2
PLAYER              5FF0
PLAYER_DEAD         31B0
PLAYER_MARK         4E13
PLAYER_MSG          5487
PLA_CLASS           5FF2
PLA_DAMAGE          5FF1
PLA_GOLD            5FF8
PLA_KEYS            5FFA
PLA_POTIONS         5FF9
PLA_P_POS           5FF6
PLA_TORCH           5FFB
POSITION            4
POTIONS_MSG         523F
POTION_PRICE        5
PRESS_CONTINUE      3DAA
PURPLE              F000F0
RANDOM_NUMBER       3DC2
RED                 FF
REPLAY              3838
REPLAY_MSG          4860
RETURN              3DDC
RIGHT_TILE          4E0B
ROGUE_ROLE_MSG      4CA2
ROGUE_SELECT        30C2
ROGUE_SPEC_MSG      4CEA
ROLE_INPUT          3044
SETUP_ENEMIES       4412
SETUP_LOOT          4450
SETUP_PLAYER        4498
SETUP_SHOPS         44D4
SETUP_WORLD         4120
SHOP                3BF6
SHOPS_CHECK         33C0
SHOPS_LOOP          33CE
SHOP_CHECK          33EC
SHOP_ENTER_MSG      53A1
SHOP_MARK           4E19
SHOP_MAX            2
SHOP_MSG            53D3
SHOP_STOCK_MSG      547B
SKELETON_MSG        560A
START               1000
S_DAMAGE_IN         5
S_KEYS              3
S_POTIONS           2
S_TORCHES           4
TAKE_POTION         3DDE
TAKE_POTION_MSG     534D
TORCHES_MSG         5249
TORCH_MSG           520B
TORCH_PRICE         A
TRY_RUN             3A6A
TUTORIAL_INTRO      30F2
TUTORIAL_MSG        4772
UPDATE              3186
UPGRADE_DMG         3CDA
WAKE_UP_MSG         488A
WALL_COLLISIONS     3892
WELCOME             300A
WELCOME_MSG         4515
WHITE               FFFFFF
WIN_MSG             5300
WIN_POINT           8156
WIN_POINT_MARK      4E17
WON_GAME            31DA

00001000 Starting Address
Assembler used: EASy68K Editor/Assembler v5.16.01
Created On: 14/03/2019 10:44:32

00000000                             1  *-------------------------------------------------------
00000000                             2  * Author         : Michael Rainsford Ryan
00000000                             3  * Student Number : C00239510
00000000                             4  * Date Created   : 21/01/2019
00000000                             5  * Description    : A simplified, offline clone of the
00000000                             6  *                : online game "Avalon".
00000000                             7  * Issues/Bugs    : None currenty.
00000000                             8  *-------------------------------------------------------
00000000                             9  
00001000                            10      org $1000
00001000                            11  
00001000                            12  *-------------------------------------------------------
00001000                            13  *Choose to be a Worker or a God 
00001000                            14  *https://www.avalon-rpg.com/
00001000                            15  *-------------------------------------------------------
00001000                            16  
00001000                            17  *-------------------------------------------------------
00001000                            18  *-------------------Game Information-------------------
00001000                            19  *-------------------------------------------------------
00001000                            20  *A6 is used for player coordinates
00001000                            21  *A5 is used for enemy coordinates when in combat or looping through them
00001000                            22  *A4 occasionally used for displaying the inventory
00001000                            23  *D5 is used occasionally for input range
00001000                            24  *$5000 to $5FE0 holds maps
00001000                            25  *$5FF0 holds player information
00001000                            26  *$6000 to $7000 holds enemies
00001000                            27  
00001000                            28  *Enemies:
00001000                            29  *Byte:  Name
00001000                            30  *0      Health
00001000                            31  *1      Damage/level
00001000                            32  *2      enemy type (Knight, mage, rogue)
00001000                            33  *3      Alive state (1 == alive, 0 == dead)
00001000                            34  *4 & 5  Coordinates
00001000                            35  
00001000                            36  *Player:
00001000                            37  *Byte:  Name
00001000                            38  *0      Health
00001000                            39  *1      Damage/level
00001000                            40  *2      Class (Knight, mage, rogue)
00001000                            41  *3      Game state
00001000                            42  *4-5+A6 Coordinates
00001000                            43  *6-7    Last coordinates
00001000                            44  *8      Gold
00001000                            45  *9      Potions
00001000                            46  *A      Keys
00001000                            47      
00001000                            48  *Game state : 0 = Pick role/intro | 5 = Move around | 6 = Combat | 10 to 20 = Shop | 64 = End game
00001000                            49  *Class      : 1 corresponds to knight - 2 corresponds to mage - 3 corresponds to rogue
00001000                            50  
00001000                            51  
00001000                            52  *-------------------------------------------------------
00001000                            53  *Validation values to be used, modify as needed
00001000                            54  *Add additional validation values as required
00001000                            55  *-------------------------------------------------------
00001000  =00000000                 56  exit        EQU 0      used to exit assembly program
00001000  =00000064                 57  min_feed    EQU 100    min feed requirement
00001000  =00000001                 58  min_potions EQU 1      min number of potions
00001000  =00000009                 59  max_potions EQU 9      max number of potions
00001000  =00000006                 60  min_weapons EQU 6      min weapons
00001000  =00000005                 61  win_point   EQU 5      points accumilated on win
00001000  =00000008                 62  lose_point  EQU 8      points deducted on a loss
00001000                            63  
00001000  =00006000                 64  FIRST_ENEMY EQU $6000
00001000  =00000001                 65  ENEMY_MAX   EQU 1      Number of enemies in the game
00001000                            66  
00001000  =000000FF                 67  RED         EQU $000000FF   Red colour value
00001000  =0000FF00                 68  GREEN       EQU $0000FF00   Green colour value
00001000  =0000FF00                 69  BLUE        EQU $0000FF00   Blue colour value
00001000  =00FFFFFF                 70  WHITE       EQU $00FFFFFF   White colour value
00001000  =01090000                 71  FONT        EQU $01090000   Font value
00001000                            72  
00001000  =00005FF0                 73  PLAYER      EQU $5FF0       Memory address for player information
00001000  =00005FF3                 74  GAME_STATE  EQU $5FF3       The memory address of the game state
00001000  =00005FF2                 75  PLA_CLASS   EQU $5FF2       The memory address for the player class
00001000  =00005FF6                 76  PLA_P_POS   EQU $5FF6       Memory location of the player's previous position
00001000  =00005FF8                 77  PLA_GOLD    EQU $5FF8       Memory address for player gold
00001000  =00005FF9                 78  PLA_POTIONS EQU $5FF9       Memory address for player potions
00001000  =00005FFA                 79  PLA_KEYS    EQU $5FFA       Memory address for player keys
00001000                            80  
00001000  =00000001                 81  DAMAGE      EQU 1           The number of bytes to move from the charater before reaching the damage
00001000  =00000002                 82  CLASS       EQU 2           The number of bytes to move from the charater before reaching the class
00001000  =00000003                 83  ALIVE       EQU 3           The number of bytes to move from the charater before reaching the alive state
00001000  =00000004                 84  POSITION    EQU 4           The number of bytes to move from the charater before reaching the position
00001000                            85  
00001000  =00003201                 86  CSR_POS_MOVE    EQU $3201   The cursor position to draw the HUD to when in movement state
00001000  =00002001                 87  CSR_POS_BATTLE  EQU $2001   The cursor position to draw the HUD to when in battle state
00001000                            88  
00001000                            89  
00001000                            90  
00001000                            91  
00001000                            92  
00001000                            93  
00001000                            94  *Start of Game
00001000                            95  start:
00001000  6100 2B2E                 96      bsr     setup_player
00001004  6100 28D4                 97      bsr     setup_world
00001008  6100 2B06                 98      bsr     setup_enemies
0000100C                            99  
0000100C  6100 1FFC                100      bsr     welcome    branch to the welcome subroutine
00001010  6100 26E6                101      bsr     press_continue
00001014  6100 1FEA                102      bsr     game       branch to the game subroutine
00001018                           103  *Game loop
00003000                           104      org     $3000      the rest of the program is to be located from 3000 onwards
00003000                           105  
00003000                           106  *-------------------------------------------------------
00003000                           107  *-------------------Game Subroutine---------------------
00003000                           108  *-------------------------------------------------------
00003000                           109  game:
00003000  6100 0120                110      bsr     gameloop   branch to gameloop subroutine
00003004  4E75                     111      rts                return from game: subroutine
00003006                           112            
00003006                           113  end:
00003006  FFFF FFFF                114      simhalt
0000300A                           115  
0000300A                           116  *-------------------------------------------------------
0000300A                           117  *-------------------Welcome Subroutine------------------
0000300A                           118  *-------------------------------------------------------
0000300A                           119  welcome:
0000300A  6100 0408                120      bsr     endl            branch to endl subroutine
0000300E  43F9 00003B5D            121      lea     welcome_msg,A1  assign message to address register A1
00003014  103C 000E                122      move.b  #14,D0          move literal 14 to DO
00003018  4E4F                     123      trap    #15             trap and interpret value in D0
0000301A  6100 03F8                124      bsr     endl            branch to endl subroutine
0000301E                           125      
0000301E  4E75                     126      rts                     return from welcome: subroutine
00003020                           127  
00003020                           128  *-------------------------------------------------------
00003020                           129  *-------------------Role Picking Subroutine------------------
00003020                           130  *-------------------------------------------------------
00003020                           131  pick_role:
00003020                           132  
00003020  43F9 00003D2C            133      lea     wake_up_msg,A1  assign message to address register A1
00003026  103C 000E                134      move.b  #14,D0          move literal 14 to DO
0000302A  4E4F                     135      trap    #15             trap and interpret value in D0
0000302C  6100 03E6                136      bsr     endl            branch to endl subroutine
00003030                           137      
00003030  43F9 00003DB5            138      lea     pick_role_msg,A1 assign message to address register A1
00003036  103C 000E                139      move.b  #14,D0           move literal 14 to DO
0000303A  4E4F                     140      trap    #15              trap and interpret value in D0
0000303C                           141      
0000303C  7A03                     142      move.l  #3,D5           Move the number 3 to D5 to tell the program how many options there are
0000303E                           143      
0000303E  6100 006E                144      bsr     input           branch to the input subroutine
00003042                           145      
00003042  6100 06B4                146      bsr     press_continue          Pause the game until a key is pressed
00003046                           147      
00003046  4E75                     148      rts                     return from pick_role subroutine
00003048                           149      
00003048                           150  role_input:
00003048  11C1 5FF2                151      move.b  D1,PLA_CLASS    Move the role number to player class memory location to hold the class number
0000304C                           152      
0000304C                           153      *Give the player a message depending on the role chosen
0000304C  B23C 0001                154      CMP.B   #1,D1
00003050  6700 0014                155      BEQ     knight_select   Branch to knight message if role selected
00003054                           156      
00003054  B23C 0002                157      CMP.B   #2,D1
00003058  6700 0024                158      BEQ     mage_select     Branch to mage message if role selected
0000305C                           159      
0000305C  B23C 0003                160      CMP.B   #3,D1
00003060  6700 0034                161      BEQ     rogue_select    Branch to rogue message if role selected
00003064                           162      
00003064  4E75                     163      rts
00003066                           164      
00003066                           165  knight_select:
00003066  43F9 00003F88            166      lea     knight_role_msg,A1 assign message to address register A1
0000306C  103C 000E                167      move.b  #14,D0          move literal 14 to DO
00003070  4E4F                     168      trap    #15             Display the knight message
00003072                           169      
00003072  11FC 0005 5FF3           170      move.b  #5,GAME_STATE   Change the game state to the movement state
00003078  4DF8 514A                171      lea     $514A,A6        Set the player coordinate to the first corridor
0000307C                           172      
0000307C  4E75                     173      rts                     Return from the sub routine
0000307E                           174  
0000307E                           175  mage_select:
0000307E  43F9 00004029            176      lea     mage_role_msg,A1 assign message to address register A1
00003084  103C 000E                177      move.b  #14,D0          move literal 14 to DO
00003088  4E4F                     178      trap    #15             Display the mage message
0000308A                           179      
0000308A  11FC 0005 5FF3           180      move.b  #5,GAME_STATE   Change the game state to the movement state
00003090  4DF8 514A                181      lea     $514A,A6        Set the player coordinate to the first corridor
00003094                           182      
00003094  4E75                     183      rts                     Return from the sub routine
00003096                           184  
00003096                           185  rogue_select:
00003096  43F9 000040B7            186      lea     rogue_role_msg,A1 assign message to address register A1
0000309C  103C 000E                187      move.b  #14,D0          move literal 14 to DO
000030A0  4E4F                     188      trap    #15             Display the rogue message
000030A2                           189      
000030A2  11FC 0005 5FF3           190      move.b  #5,GAME_STATE   Change the game state to the movement state
000030A8  4DF8 514A                191      lea     $514A,A6        Set the player coordinate to the first corridor
000030AC                           192      
000030AC  4E75                     193      rts                     Return from the sub routin
000030AE                           194      
000030AE                           195  *-------------------------------------------------------
000030AE                           196  *---------Gameplay Input Values Subroutine--------------
000030AE                           197  *-------------------------------------------------------    
000030AE                           198  input:
000030AE  6100 0364                199      bsr     endl            Branch to end line subroutine
000030B2                           200      
000030B2  43F9 00003F2C            201      lea     input_nums_msg,A1 assign message to address register A1
000030B8  103C 000E                202      move.b  #14,D0          move literal 14 to DO
000030BC  4E4F                     203      trap    #15             Display the "enter number" message
000030BE                           204      
000030BE  2205                     205      move.l  D5,D1           Move the number of options to D1 to display it
000030C0  103C 0003                206      move.b  #3,D0           move literal 3 to DO
000030C4  4E4F                     207      trap    #15             Display the number in D1 to show the input range
000030C6                           208      
000030C6  43F9 00003F45            209      lea     colon_msg,A1    assign message to address register A1
000030CC  103C 000E                210      move.b  #14,D0          move literal 14 to DO
000030D0  4E4F                     211      trap    #15             Display a colon after the number range
000030D2                           212      
000030D2  103C 0004                213      move.b  #4,D0           Move the number 4 to D0
000030D6  4E4F                     214      trap    #15             Take input
000030D8                           215      
000030D8                           216  manage_input:
000030D8  B27C 0001                217      CMP     #1,D1           Check input against minimum value
000030DC  6D00 0028                218      BLT     invalid_input   Error if less than 1
000030E0                           219      
000030E0  B245                     220      CMP     D5,D1           Compare input against max value
000030E2  6E00 0022                221      BGT     invalid_input   Error if more than max value
000030E6                           222      
000030E6  0C38 0000 5FF3           223      CMP.B   #0,GAME_STATE   Check which state the game is in
000030EC  6700 FF5A                224      BEQ     role_input      Branch to the manage input for the role picking
000030F0  0C38 0005 5FF3           225      CMP.B   #5,GAME_STATE   Check which state the game is in
000030F6  6700 0346                226      BEQ     wall_collisions Branch to the manage input for the movement
000030FA  0C38 0006 5FF3           227      CMP.B   #6,GAME_STATE   Check which state the game is in
00003100  6600 0012                228      BNE     fake_gamestate  branch to display a message if the gamestate is undifined
00003104                           229      
00003104  4E75                     230      rts                     Return out of subroutine
00003106                           231  
00003106                           232  invalid_input:
00003106  43F9 00003F48            233      lea     input_error_msg,A1 assign message to address register A1
0000310C  103C 000E                234      move.b  #14,D0          move literal 14 to DO
00003110  4E4F                     235      trap    #15             Display the error message
00003112                           236      
00003112  609A                     237      bra     input           Go back to taking input
00003114                           238      
00003114                           239  fake_gamestate:
00003114  43F9 00003F6F            240      lea     fake_gamestate_msg,A1   Assign message to address register A1
0000311A  103C 000E                241      move.b  #14,D0                  move literal 14 to DO
0000311E  4E4F                     242      trap    #15                     Display the error message
00003120  4E75                     243      rts
00003122                           244  
00003122                           245  *-------------------------------------------------------
00003122                           246  *----------------Gameloop (main loop)-------------------
00003122                           247  *------------------------------------------------------- 
00003122                           248  gameloop:
00003122  6100 02C2                249      bsr     clear_screen    clears the screen  
00003126  6100 00CA                250      bsr     draw            branch to draw screen subroutine
0000312A  6100 00EA                251      bsr     draw_hud
0000312E  6100 0008                252      bsr     update          branch to update game subroutine 
00003132  6100 024E                253      bsr     gameplay        branch to gameplay subroutine
00003136  60EA                     254      bra     gameloop        Continue looping the game loop     
00003138                           255      
00003138                           256      *bsr     clear_screen    clears the screen
00003138                           257      *bsr     hud             branch to display HUD subroutine
00003138                           258      *bsr     clear_screen    clears the screen
00003138                           259      *bsr     replay          branch to replay game subroutine
00003138                           260      *bsr     clear_screen    clears the screen
00003138                           261      *rts                     return from gameloop: subroutine
00003138                           262  
00003138                           263  *-------------------------------------------------------
00003138                           264  *----------------Update Quest Progress------------------
00003138                           265  *  Complete Quest
00003138                           266  *------------------------------------------------------- 
00003138                           267  update:
00003138  0C38 0005 5FF3           268      CMP.B   #5,GAME_STATE       Check which state the game is in
0000313E  6700 000E                269      BEQ     enemy_check         Check for enemies if in movement state
00003142  0C38 0006 5FF3           270      CMP.B   #6,GAME_STATE       Check which state the game is in
00003148  6700 0068                271      BEQ     enemy_alive_check   Check if enemy is dead if in combat
0000314C                           272      
0000314C  4E75                     273      rts
0000314E                           274      
0000314E                           275  enemy_check:
0000314E  4BF8 6000                276      lea     FIRST_ENEMY,A5  Load the enemy information into A5
00003152  564D                     277      add.w   #ALIVE,A5       Move into enemy information to check if its alive
00003154  0C15 0000                278      CMP.B   #0,(A5)         Check if the enemy is alive
00003158  6700 05D0                279      BEQ     return          Return from the check if the enemy is dead
0000315C                           280      
0000315C  524D                     281      add.w   #1,A5           Move from the enemy alive state to its position
0000315E  340E                     282      move.w  A6,D2           Move the player position to D2
00003160                           283      
00003160                           284      *Check if the player is beside an enemy
00003160  0442 0010                285      sub.w   #16,D2          Check north
00003164  B455                     286      CMP.W   (A5),D2           
00003166  6700 0020                287      BEQ     enter_combat    Enter the player into combat
0000316A                           288      
0000316A  0642 0020                289      add.w   #32,D2          Check south
0000316E  B455                     290      CMP.W   (A5),D2           
00003170  6700 0016                291      BEQ     enter_combat    Enter the player into combat
00003174                           292      
00003174  0442 0011                293      sub.w   #17,D2          Check west
00003178  B455                     294      CMP.W   (A5),D2           
0000317A  6700 000C                295      BEQ     enter_combat    Enter the player into combat
0000317E                           296      
0000317E  5442                     297      add.w   #2,D2           Check east
00003180  B455                     298      CMP.W   (A5),D2           
00003182  6700 0004                299      BEQ     enter_combat    Enter the player into combat
00003186                           300      
00003186  4E75                     301      rts     Return if not touching an enemy
00003188                           302      
00003188                           303  enter_combat:
00003188  594D                     304      sub.w   #4,A5               Get the memory address of the enemy opposed to it's position
0000318A  11FC 0006 5FF3           305      move.b  #6,GAME_STATE       Move to combat state
00003190                           306      
00003190  6100 0282                307      bsr     endl                Line break
00003194                           308      
00003194  43F9 00004214            309      LEA     encounter_msg,A1    Load the encounter message int A1
0000319A  103C 000E                310      move.b  #14,D0              Move #14 to D0 to display message
0000319E  4E4F                     311      trap    #15                 Display the loaded message
000031A0                           312      
000031A0  6100 0556                313      bsr     press_continue      Branch to the press to continue subroutine
000031A4                           314      
000031A4  6100 0240                315      bsr     clear_screen        Clear the screen
000031A8                           316      
000031A8  6100 005E                317      bsr     draw_skeleton       Draw the enemy
000031AC  6100 017A                318      bsr     draw_battle_info    Draw the info
000031B0                           319      
000031B0  4E75                     320      rts
000031B2                           321      
000031B2                           322  enemy_alive_check:
000031B2  0C15 0000                323      CMP.B   #0,(A5)     Compare the enemy health with zero
000031B6  6700 000C                324      BEQ     enemy_died  If the enemy health is zero, they died
000031BA  0C15 0064                325      CMP.B   #100,(A5)   Compare the enemy health with 100
000031BE  6E00 0004                326      BGT     enemy_died  If the enemy health is greater than 100, their health has underflowed and they're dead
000031C2                           327      
000031C2  4E75                     328      rts
000031C4                           329      
000031C4                           330  enemy_died:
000031C4  6100 024E                331      bsr     endl            Break to a new line
000031C8                           332  
000031C8  43F9 00004741            333      lea     battle_won_msg,A1   Load the won battle message
000031CE  103C 000E                334      move.b  #14,D0              Move the literal #14 to D0 for trap task #14
000031D2  4E4F                     335      trap    #15                 Display the message
000031D4                           336      
000031D4  11FC 0005 5FF3           337      move.b  #5,GAME_STATE   Set the game state mack to movement state
000031DA  564D                     338      add.w   #ALIVE,A5       Move from the enemy health to its alive status
000031DC  1ABC 0000                339      move.b  #0,(A5)         Set the enemy as dead
000031E0                           340      
000031E0  6100 0516                341      bsr     press_continue
000031E4                           342      
000031E4  6100 0200                343      bsr     clear_screen    Clear the screen
000031E8  6100 0008                344      bsr     draw            Draw the map for first frame back in movement
000031EC  6100 0028                345      bsr     draw_hud        Draw the hud for first frame back in movement
000031F0                           346      
000031F0  4E75                     347      rts
000031F2                           348      
000031F2                           349  *-------------------------------------------------------
000031F2                           350  *-----------------Draw Quest Updates--------------------
000031F2                           351  * Draw the game progress information, status regarding
000031F2                           352  * quest
000031F2                           353  *------------------------------------------------------- 
000031F2                           354  draw:
000031F2  0C38 0005 5FF3           355      CMP.B   #5,GAME_STATE   Check which state the game is in
000031F8  6700 0532                356      BEQ     draw_loop       If in the movement state, draw the map
000031FC  0C38 0006 5FF3           357      CMP.B   #6,GAME_STATE   Check which state the game is in
00003202  6700 0004                358      BEQ     draw_skeleton   If in the combat state, draw the enemy
00003206  4E75                     359      rts
00003208                           360      
00003208                           361  draw_skeleton:
00003208  43F9 00004295            362      lea     skeleton_msg,A1 Load the skeleton message
0000320E  103C 000E                363      move.b  #14,D0          Move literal 14 for display message trap command
00003212  4E4F                     364      trap    #15             Display the loaded message
00003214                           365      
00003214  4E75                     366      rts
00003216                           367      
00003216                           368  draw_hud:
00003216  0C38 0005 5FF3           369      CMP.B   #5,GAME_STATE       Check which state the game is in
0000321C  6700 000E                370      BEQ     draw_player_info    If in the movement state, draw the player info
00003220  0C38 0006 5FF3           371      CMP.B   #6,GAME_STATE       Check which state the game is in
00003226  6700 0100                372      BEQ     draw_battle_info     If in the combat state, draw the combat info
0000322A                           373      
0000322A  4E75                     374      rts
0000322C                           375  
0000322C                           376  draw_player_info:
0000322C  323C 00FF                377      move.w  #255,D1         Move the word #255 to D1 to set the type of trap 11
00003230  103C 000B                378      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
00003234  4E4F                     379      trap    #15             Trap to get the cursor position in D1
00003236                           380      
00003236  3601                     381      move.w  D1,D3           Move the current cursor position to D3 for later
00003238                           382      
00003238                           383      * Display the player health
00003238  323C 3201                384      move.w  #CSR_POS_MOVE,D1           
0000323C  4E4F                     385      trap    #15             Set the cursor position with trap command 11
0000323E  4241                     386      clr     D1              Clear D1 of the cursor position
00003240                           387      
00003240  43F9 000046F8            388      lea     health_msg,A1   Load the hud message
00003246  103C 000E                389      move.b  #14,D0          Move literal 14 for display message trap command
0000324A  4E4F                     390      trap    #15             Display the loaded message
0000324C                           391      
0000324C  1238 5FF0                392      move.b  PLAYER,D1       Move the player health value to D1 to display
00003250  103C 0003                393      move.b  #3,D0           Move literal 3 for display number trap command
00003254  4E4F                     394      trap    #15             Display the number in D1
00003256                           395      
00003256                           396      * Display the torch life
00003256  103C 000B                397      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
0000325A  323C 3201                398      move.w  #CSR_POS_MOVE,D1         
0000325E  5241                     399      add.w   #1,D1  
00003260  4E4F                     400      trap    #15             Set the cursor position with trap command 11
00003262  4241                     401      clr     D1              Clear D1 of the cursor position
00003264                           402      
00003264  43F9 00004710            403      lea     torch_msg,A1   Load the hud message
0000326A  103C 000E                404      move.b  #14,D0          Move literal 14 for display message trap command
0000326E  4E4F                     405      trap    #15             Display the loaded message
00003270                           406      
00003270  1238 5FF0                407      move.b  PLAYER,D1       Move the player health value to D1 to display
00003274  103C 0003                408      move.b  #3,D0           Move literal 3 for display number trap command
00003278  4E4F                     409      trap    #15             Display the number in D1
0000327A                           410      
0000327A                           411      * Display the inventory
0000327A  103C 000B                412      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
0000327E  323C 3201                413      move.w  #CSR_POS_MOVE,D1
00003282  5441                     414      add.w   #2,D1          
00003284  4E4F                     415      trap    #15             Set the cursor position with trap command 11
00003286  4241                     416      clr     D1              Clear D1 of the cursor position
00003288                           417      
00003288  43F9 0000471D            418      lea     inventory_msg,A1   Load the hud message
0000328E  103C 000E                419      move.b  #14,D0          Move literal 14 for display message trap command
00003292  4E4F                     420      trap    #15             Display the loaded message
00003294                           421      
00003294                           422      * Display the player gold
00003294  103C 000B                423      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
00003298  323C 3201                424      move.w  #CSR_POS_MOVE,D1         
0000329C  5641                     425      add.w   #3,D1  
0000329E  4E4F                     426      trap    #15             Set the cursor position with trap command 11
000032A0  4241                     427      clr     D1              Clear D1 of the cursor position
000032A2                           428      
000032A2  43F9 00004728            429      lea     gold_msg,A1   Load the hud message
000032A8  103C 000E                430      move.b  #14,D0          Move literal 14 for display message trap command
000032AC  4E4F                     431      trap    #15             Display the loaded message
000032AE                           432      
000032AE  49F8 5FF8                433      lea     PLA_GOLD,A4
000032B2  6100 0052                434      bsr     draw_item_number
000032B6                           435      
000032B6                           436      * Display the player potions
000032B6  103C 000B                437      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
000032BA  323C 3201                438      move.w  #CSR_POS_MOVE,D1         
000032BE  5841                     439      add.w   #4,D1  
000032C0  4E4F                     440      trap    #15             Set the cursor position with trap command 11
000032C2  4241                     441      clr     D1              Clear D1 of the cursor position
000032C4                           442      
000032C4  43F9 00004737            443      lea     potions_msg,A1   Load the hud message
000032CA  103C 000E                444      move.b  #14,D0          Move literal 14 for display message trap command
000032CE  4E4F                     445      trap    #15             Display the loaded message
000032D0                           446      
000032D0  49F8 5FF9                447      lea     PLA_POTIONS,A4
000032D4  6100 0030                448      bsr     draw_item_number
000032D8                           449      
000032D8                           450      * Display the player keys
000032D8  103C 000B                451      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
000032DC  323C 3201                452      move.w  #CSR_POS_MOVE,D1         
000032E0  5A41                     453      add.w   #5,D1  
000032E2  4E4F                     454      trap    #15             Set the cursor position with trap command 11
000032E4  4241                     455      clr     D1              Clear D1 of the cursor position
000032E6                           456      
000032E6  43F9 00004730            457      lea     key_msg,A1   Load the hud message
000032EC  103C 000E                458      move.b  #14,D0          Move literal 14 for display message trap command
000032F0  4E4F                     459      trap    #15             Display the loaded message
000032F2                           460      
000032F2  49F8 5FFA                461      lea     PLA_KEYS,A4
000032F6  6100 000E                462      bsr     draw_item_number
000032FA                           463      
000032FA  3203                     464      move.w  D3,D1           Move the current cursor position to D3 for later
000032FC                           465      
000032FC  103C 000B                466      move.b  #11,D0          Move the byte #11 to D0 for trap command 11          
00003300  4E4F                     467      trap    #15             Set the cursor position with trap command 11
00003302                           468      
00003302  4241                     469      clr     D1              Clear D1 for later use
00003304                           470      
00003304  4E75                     471      rts
00003306                           472      
00003306                           473  draw_item_number:
00003306  103C 000E                474      move.b  #14,D0          Move literal 3 for display number trap command
0000330A  43F9 00004773            475      lea     bracket_open_msg,A1
00003310  4E4F                     476      trap    #15
00003312                           477  
00003312  103C 0003                478      move.b  #3,D0           Move literal 3 for display number trap command
00003316  1214                     479      move.b  (A4),D1         Move the player health value to D1 to display
00003318  4E4F                     480      trap    #15             Display the number in D1
0000331A                           481      
0000331A  103C 000E                482      move.b  #14,D0          Move literal 3 for display number trap command
0000331E  43F9 00004775            483      lea     bracket_close_msg,A1
00003324  4E4F                     484      trap    #15
00003326  4E75                     485      rts
00003328                           486      
00003328                           487  
00003328                           488  draw_battle_info:
00003328  323C 00FF                489      move.w  #255,D1         Move the word #255 to D1 to set the type of trap 11
0000332C  103C 000B                490      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
00003330  4E4F                     491      trap    #15             Trap to get the cursor position in D1
00003332                           492      
00003332  3601                     493      move.w  D1,D3           Move the current cursor position to D3 for later
00003334                           494      
00003334                           495      * Move cursor to draw player info
00003334  323C 2001                496      move.w  #CSR_POS_BATTLE,D1           
00003338  4E4F                     497      trap    #15             Set the cursor position with trap command 11
0000333A  4241                     498      clr     D1              Clear D1 of the cursor position
0000333C                           499      
0000333C  43F9 000046F8            500      lea     health_msg,A1   Load the hud message
00003342  103C 000E                501      move.b  #14,D0          Move literal 14 for display message trap command
00003346  4E4F                     502      trap    #15             Display the loaded message
00003348                           503      
00003348  1238 5FF0                504      move.b  PLAYER,D1       Move the player health value to D1 to display
0000334C  103C 0003                505      move.b  #3,D0           Move literal 3 for display number trap command
00003350  4E4F                     506      trap    #15             Display the number in D1
00003352                           507      
00003352                           508      * Move the cursor to draw enemy info
00003352  103C 000B                509      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
00003356  323C 2001                510      move.w  #CSR_POS_BATTLE,D1
0000335A  5241                     511      add.w   #1,D1
0000335C  4E4F                     512      trap    #15             Set the cursor position with trap command 11
0000335E  4241                     513      clr     D1              Clear D1 of the cursor position
00003360                           514      
00003360  43F9 00004701            515      lea     enemy_health_msg,A1 Load the hud message
00003366  103C 000E                516      move.b  #14,D0              Move literal 14 for display message trap command
0000336A  4E4F                     517      trap    #15                 Display the loaded message
0000336C                           518      
0000336C  1238 6000                519      move.b  FIRST_ENEMY,D1  Move the player health value to D1 to display
00003370  103C 0003                520      move.b  #3,D0           Move literal 3 for display number trap command
00003374  4E4F                     521      trap    #15             Display the number in D1
00003376                           522      
00003376                           523      * Move the cursor back to its previous position
00003376  3203                     524      move.w  D3,D1           Move the previous cursor position back to D1
00003378  103C 000B                525      move.b  #11,D0          Move the byte #11 to D0 for trap command 11          
0000337C  4E4F                     526      trap    #15             Set the cursor position with trap command 11
0000337E                           527      
0000337E  4241                     528      clr     D1              Clear D1 for later use
00003380                           529      
00003380  4E75                     530      rts
00003382                           531  
00003382                           532  *-------------------------------------------------------
00003382                           533  *---Game Play (Quest Progress)--------------------------
00003382                           534  *------------------------------------------------------- 
00003382                           535  gameplay:
00003382  6100 0090                536      bsr     endl        Break to a new line
00003386  0C38 0000 5FF3           537      CMP.B   #0,GAME_STATE     Check which stage the game is in
0000338C  6700 FC92                538      BEQ     pick_role   branch to the pick role subroutine
00003390  0C38 0005 5FF3           539      CMP.B   #5,GAME_STATE     Check which stage the game is in
00003396  6700 0092                540      BEQ     movement    branch to the movement subroutine
0000339A  0C38 0006 5FF3           541      CMP.B   #6,GAME_STATE     Check which stage the game is in
000033A0  6700 01D4                542      BEQ     combat      branch to the combat subroutine
000033A4  4E75                     543      rts                 Return from 'gameplay' subroutine
000033A6                           544  
000033A6                           545  *-------------------------------------------------------
000033A6                           546  *-----------------Heads Up Display (Score)--------------
000033A6                           547  * Retrieves the score from memory location
000033A6                           548  *-------------------------------------------------------   
000033A6                           549  hud:
000033A6                           550  
000033A6  6100 006C                551      bsr     endl
000033AA  6100 001C                552      bsr     decorate
000033AE  43F9 00003D1F            553      lea     hud_msg,A1
000033B4  103C 000E                554      move.b  #14,D0
000033B8  4E4F                     555      trap    #15
000033BA  1213                     556      move.b  (A3),D1     retrieve the value A3 point to and move to D1
000033BC  103C 0003                557      move.b  #3,D0       move literal 3 to D0
000033C0  4E4F                     558      trap    #15         intrepret value in D0, which 3 which displays D1
000033C2  6100 0004                559      bsr     decorate
000033C6  4E75                     560      rts
000033C8                           561  
000033C8                           562  *-------------------------------------------------------
000033C8                           563  *------------------Screen Decoration--------------------
000033C8                           564  *-------------------------------------------------------
000033C8                           565  decorate:
000033C8  163C 003C                566      move.b  #60, D3
000033CC  6100 0046                567      bsr     endl
000033D0                           568  out:
000033D0  43F9 00003CEF            569      lea     loop_msg,A1
000033D6  103C 000E                570      move.b  #14,D0
000033DA  4E4F                     571      trap    #15
000033DC  5343                     572      sub     #1,D3   decrement loop counter
000033DE  66F0                     573      bne     out     repeat until D0=0
000033E0  6100 0032                574      bsr     endl
000033E4  4E75                     575      rts
000033E6                           576      
000033E6                           577  clear_screen: 
000033E6  103C 000B                578      move.b  #11,D0      clear screen
000033EA  323C FF00                579      move.w  #$ff00,D1
000033EE  4E4F                     580      trap    #15
000033F0  4E75                     581      rts
000033F2                           582  *-------------------------------------------------------
000033F2                           583  *------------------------Replay-------------------------
000033F2                           584  *-------------------------------------------------------
000033F2                           585  replay:
000033F2  6100 0020                586      bsr     endl
000033F6  43F9 00003CF1            587      lea     replay_msg,A1
000033FC  103C 000E                588      move.b  #14,D0
00003400  4E4F                     589      trap    #15
00003402                           590      
00003402  103C 0004                591      move.b  #4,D0
00003406  4E4F                     592      trap    #15
00003408                           593      
00003408  B27C 0000                594      cmp     #exit,D1
0000340C  6700 FBF8                595      beq     end         if SR Z register contains 1 beq => Branch Equals
00003410  6100 FD10                596      bsr     gameloop
00003414                           597  
00003414                           598  endl:
00003414  48E7 8040                599      movem.l D0/A1,-(A7)
00003418  303C 000E                600      move    #14,D0
0000341C  43F9 00003B5A            601      lea     crlf,A1
00003422  4E4F                     602      trap    #15
00003424  4CDF 0201                603      movem.l (A7)+,D0/A1
00003428  4E75                     604      rts
0000342A                           605          
0000342A                           606  *-------------------------------------------------------
0000342A                           607  *----------------------Manage Movement------------------
0000342A                           608  *-------------------------------------------------------
0000342A                           609  movement:
0000342A  43F9 0000414A            610      lea     movement_msg,A1 Load the movement message
00003430  103C 000E                611      move.b  #14,D0          Move literal 14 for display message trap command
00003434  4E4F                     612      trap    #15             Display the loaded message
00003436                           613  
00003436  7A04                     614      move.l  #4,D5           Move the number 4 to D5 to tell the program how many options there are
00003438                           615      
00003438  6100 FC74                616      bsr     input           branch to the input subroutine
0000343C  4E75                     617      rts
0000343E                           618  
0000343E                           619  *-------------------------------------------------------
0000343E                           620  *-------------------Check Wall Collisions---------------
0000343E                           621  *-------------------------------------------------------
0000343E                           622  wall_collisions:
0000343E                           623      *Check collisions in the movement direction
0000343E  B23C 0001                624      CMP.B   #1,D1       Check the movement direction
00003442  6700 001C                625      BEQ     move_north  Branch to Display the corridor type
00003446                           626      
00003446  B23C 0002                627      CMP.B   #2,D1       Check the movement direction
0000344A  6700 0056                628      BEQ     move_south  Branch to Display the corridor type
0000344E                           629      
0000344E  B23C 0003                630      CMP.B   #3,D1       Check the movement direction
00003452  6700 0090                631      BEQ     move_west   Branch to Display the corridor type
00003456                           632      
00003456  B23C 0004                633      CMP.B   #4,D1       Check the movement direction
0000345A  6700 00C8                634      BEQ     move_east   Branch to Display the corridor type
0000345E                           635      
0000345E  4E75                     636      rts
00003460                           637      
00003460                           638  move_north:
00003460                           639      *Check if the tile is any of the corridor types with a wall at the top
00003460  0C16 0002                640      CMP.B   #2,(A6)
00003464  6700 00FE                641      BEQ     movement_blocked
00003468  0C16 0003                642      CMP.B   #3,(A6)
0000346C  6700 00F6                643      BEQ     movement_blocked
00003470  0C16 0006                644      CMP.B   #6,(A6)
00003474  6700 00EE                645      BEQ     movement_blocked
00003478  0C16 0007                646      CMP.B   #7,(A6)
0000347C  6700 00E6                647      BEQ     movement_blocked
00003480  0C16 000B                648      CMP.B   #11,(A6)
00003484  6700 00DE                649      BEQ     movement_blocked
00003488  0C16 000C                650      CMP.B   #12,(A6)
0000348C  6700 00D6                651      BEQ     movement_blocked
00003490  0C16 000D                652      CMP.B   #13,(A6)
00003494  6700 00CE                653      BEQ     movement_blocked
00003498                           654      
00003498  31CE 5FF6                655      move.w  A6,PLA_P_POS        Move the player's previous location to a memory address for storage
0000349C  9CFC 0010                656      sub     #16,A6              Move the player north
000034A0                           657      
000034A0  4E75                     658      rts
000034A2                           659      
000034A2                           660  move_south:
000034A2                           661      *Check if the tile is any of the corridor types with a wall at the bottom
000034A2  0C16 0002                662      CMP.B   #2,(A6)
000034A6  6700 00BC                663      BEQ     movement_blocked
000034AA  0C16 0004                664      CMP.B   #4,(A6)
000034AE  6700 00B4                665      BEQ     movement_blocked
000034B2  0C16 0005                666      CMP.B   #5,(A6)
000034B6  6700 00AC                667      BEQ     movement_blocked
000034BA  0C16 0009                668      CMP.B   #9,(A6)
000034BE  6700 00A4                669      BEQ     movement_blocked
000034C2  0C16 000B                670      CMP.B   #11,(A6)
000034C6  6700 009C                671      BEQ     movement_blocked
000034CA  0C16 000D                672      CMP.B   #13,(A6)
000034CE  6700 0094                673      BEQ     movement_blocked
000034D2  0C16 000E                674      CMP.B   #14,(A6)
000034D6  6700 008C                675      BEQ     movement_blocked
000034DA                           676      
000034DA  31CE 5FF6                677      move.w  A6,PLA_P_POS        Move the player's previous location to a memory address for storage
000034DE  DCFC 0010                678      add     #16,A6              Move the player south
000034E2                           679      
000034E2  4E75                     680      rts
000034E4                           681  
000034E4                           682  move_west:
000034E4                           683      *Check if the tile is any of the corridor types with a wall to the left
000034E4  0C16 0001                684      CMP.B   #1,(A6)
000034E8  6700 007A                685      BEQ     movement_blocked
000034EC  0C16 0003                686      CMP.B   #3,(A6)
000034F0  6700 0072                687      BEQ     movement_blocked
000034F4  0C16 0004                688      CMP.B   #4,(A6)
000034F8  6700 006A                689      BEQ     movement_blocked
000034FC  0C16 0008                690      CMP.B   #8,(A6)
00003500  6700 0062                691      BEQ     movement_blocked
00003504  0C16 000B                692      CMP.B   #11,(A6)
00003508  6700 005A                693      BEQ     movement_blocked
0000350C  0C16 000C                694      CMP.B   #12,(A6)
00003510  6700 0052                695      BEQ     movement_blocked
00003514  0C16 000E                696      CMP.B   #14,(A6)
00003518  6700 004A                697      BEQ     movement_blocked
0000351C                           698      
0000351C  31CE 5FF6                699      move.w  A6,PLA_P_POS        Move the player's previous location to a memory address for storage
00003520  534E                     700      sub     #1,A6               Move the player west
00003522                           701      
00003522  4E75                     702      rts
00003524                           703      
00003524                           704  move_east:
00003524                           705      *Check if the tile is any of the corridor types with a wall to the right
00003524  0C16 0001                706      CMP.B   #1,(A6)
00003528  6700 003A                707      BEQ     movement_blocked
0000352C  0C16 0005                708      CMP.B   #5,(A6)
00003530  6700 0032                709      BEQ     movement_blocked
00003534  0C16 0006                710      CMP.B   #6,(A6)
00003538  6700 002A                711      BEQ     movement_blocked
0000353C  0C16 000A                712      CMP.B   #10,(A6)
00003540  6700 0022                713      BEQ     movement_blocked
00003544  0C16 000C                714      CMP.B   #12,(A6)
00003548  6700 001A                715      BEQ     movement_blocked
0000354C  0C16 000D                716      CMP.B   #13,(A6)
00003550  6700 0012                717      BEQ     movement_blocked
00003554  0C16 000E                718      CMP.B   #14,(A6)
00003558  6700 000A                719      BEQ     movement_blocked
0000355C                           720      
0000355C  31CE 5FF6                721      move.w  A6,PLA_P_POS            Move the player's previous location to a memory address for storage
00003560  524E                     722      add     #1,A6                   Move the player east
00003562                           723      
00003562  4E75                     724      rts
00003564                           725  
00003564                           726  movement_blocked:
00003564  43F9 000041C3            727      lea     movement_blocked_msg,A1 Load the message
0000356A  103C 000E                728      move.b  #14,D0                  Move the trap command to display a message
0000356E  4E4F                     729      trap    #15                     Display the movement blocked message
00003570  6100 0186                730      bsr     press_continue          Pause the game until a key is pressed
00003574                           731      
00003574  4E75                     732      rts                             Return from the subroutine
00003576                           733      
00003576                           734  *-------------------------------------------------------
00003576                           735  *---------------------Manage Combat---------------------
00003576                           736  *-------------------------------------------------------
00003576                           737  combat:
00003576  6100 FE9C                738      bsr endl                Break to a new line
0000357A                           739  
0000357A  43F9 0000424C            740      lea     combat_msg,A1   Load the combat message
00003580  103C 000E                741      move.b  #14,D0          Move literal 14 for display message trap command
00003584  4E4F                     742      trap    #15             Display the loaded message
00003586                           743  
00003586  7A04                     744      move.l  #4,D5           Move the number 4 to D5 to tell the program how many options there are
00003588                           745      
00003588  6100 FB24                746      bsr     input           branch to the input subroutine
0000358C                           747      
0000358C  B23C 0001                748      CMP.B   #1,D1
00003590  6700 001C                749      BEQ     block_counter
00003594  B23C 0002                750      CMP.B   #2,D1
00003598  6700 002E                751      BEQ     cast_magic
0000359C  B23C 0003                752      CMP.B   #3,D1
000035A0  6700 0040                753      BEQ     melee_attack
000035A4  B23C 0004                754      CMP.B   #4,D1
000035A8  6700 0052                755      BEQ     try_run
000035AC                           756      
000035AC  4E75                     757      rts
000035AE                           758      
000035AE                           759  block_counter:
000035AE  6100 0160                760      bsr     random_number       Get a random number 1-100
000035B2                           761      
000035B2  B47C 0021                762      CMP.W   #33,D2              Compare random with #33
000035B6  6F00 008C                763      BLE     both_block          Enemy tries to block - attack failed
000035BA  B47C 0042                764      CMP.W   #66,D2              Compare random with #66
000035BE  6F00 010C                765      BLE     hit_by_magic        Enemy casts magic - player takes damage      
000035C2  6E00 00DE                766      BGT     hit_against_melee   Enemy tried to lunge - enemy takes damage
000035C6                           767      
000035C6  4E75                     768      rts                         Return from subroutine
000035C8                           769      
000035C8                           770  cast_magic:
000035C8  6100 0146                771      bsr     random_number       Get a random number 1-100
000035CC                           772  
000035CC  B47C 0021                773      CMP.W   #33,D2              Compare random with #33
000035D0  6F00 00A8                774      BLE     hit_against_block    Enemy blocks - enemy takes damage
000035D4  B47C 0042                775      CMP.W   #66,D2              Compare random with #66
000035D8  6F00 007C                776      BLE     both_cast_magic     Enemy casts magic - attack fails     
000035DC  6E00 0104                777      BGT     hit_by_melee        Enemy lunges forward - player takes damage
000035E0                           778      
000035E0  4E75                     779      rts                         Return from subroutine
000035E2                           780  
000035E2                           781  melee_attack:
000035E2  6100 012C                782      bsr     random_number       Get a random number 1-100
000035E6                           783  
000035E6  B47C 0021                784      CMP.W   #33,D2              Compare random with #33
000035EA  6F00 00CA                785      BLE     hit_by_counter      Enemy blocks and counters - player takes damage
000035EE  B47C 0042                786      CMP.W   #66,D2              Compare random with #66
000035F2  6F00 009A                787      BLE     hit_against_magic   Enemy casts magic - player takes damage     
000035F6  6E00 0070                788      BGT     both_melee          Enemy lunges forward - attack fails
000035FA                           789      
000035FA  4E75                     790      rts                         Return from subroutine
000035FC                           791  
000035FC                           792  try_run:
000035FC  6100 0112                793      bsr     random_number
00003600                           794      
00003600  B47C 0028                795      CMP.W   #40,D2
00003604  6D00 000C                796      BLT     escape_attack
00003608  6C00 0024                797      BGE     fail_escape
0000360C                           798      
0000360C  6100 00EA                799      bsr     press_continue
00003610                           800      
00003610  4E75                     801      rts
00003612                           802      
00003612                           803  escape_attack:
00003612  3C78 5FF6                804      move.w  PLA_P_POS,A6    Move the player to their position before the battle
00003616  11FC 0005 5FF3           805      move.b  #5,GAME_STATE   Switch game state
0000361C                           806      
0000361C  43F9 000043BC            807      lea     escape_msg,A1   Load escape message
00003622  103C 000E                808      move.b  #14,D0          Move literal for trap command
00003626  4E4F                     809      trap    #15             Trap 15 to display messgae
00003628                           810      
00003628  6100 00CE                811      bsr     press_continue  Pause until the player presses to continue
0000362C                           812      
0000362C  4E75                     813      rts                     Return from subroutine
0000362E                           814      
0000362E                           815  fail_escape:
0000362E  43F9 000043D7            816      lea     fail_escape_msg,A1  Load fail escape message
00003634  103C 000E                817      move.b  #14,D0              Move literal for trap command
00003638  4E4F                     818      trap    #15                 Trap 15 to display message
0000363A                           819      
0000363A  5338 5FF0                820      sub.b   #1,PLAYER           Remove one from the player's health
0000363E                           821      
0000363E  6100 00B8                822      bsr     press_continue      Pause until the player presses to continue
00003642  4E75                     823      rts
00003644                           824      
00003644                           825  both_block:
00003644  103C 000E                826      move.b  #14,D0
00003648  43F9 00004412            827      lea     both_block_msg,A1
0000364E  4E4F                     828      trap    #15
00003650                           829      
00003650  6100 00A6                830      bsr     press_continue
00003654  4E75                     831      rts
00003656                           832      
00003656                           833  both_cast_magic:
00003656  103C 000E                834      move.b  #14,D0
0000365A  43F9 00004437            835      lea     both_cast_magic_msg,A1
00003660  4E4F                     836      trap    #15
00003662                           837      
00003662  6100 0094                838      bsr     press_continue
00003666  4E75                     839      rts
00003668                           840  
00003668                           841  both_melee:
00003668  103C 000E                842      move.b  #14,D0
0000366C  43F9 0000448C            843      lea     both_melee_msg,A1
00003672  4E4F                     844      trap    #15  
00003674                           845      
00003674  6100 0082                846      bsr     press_continue
00003678  4E75                     847      rts
0000367A                           848  
0000367A                           849  hit_against_block:
0000367A  103C 000E                850      move.b  #14,D0
0000367E  43F9 000044D5            851      lea     hit_against_block_msg,A1
00003684  4E4F                     852      trap    #15  
00003686                           853      
00003686  5315                     854      sub.b   #1,(A5)         Remove one from the enemy's health
00003688                           855      
00003688  6100 006E                856      bsr     press_continue
0000368C  4E75                     857      rts
0000368E                           858  
0000368E                           859  hit_against_magic:
0000368E  103C 000E                860      move.b  #14,D0
00003692  43F9 0000451D            861      lea     hit_against_magic_msg,A1
00003698  4E4F                     862      trap    #15
0000369A                           863      
0000369A  5315                     864      sub.b   #1,(A5)         Remove one from the enemy's health
0000369C                           865      
0000369C  6100 005A                866      bsr     press_continue
000036A0  4E75                     867      rts
000036A2                           868  
000036A2                           869  hit_against_melee:
000036A2  103C 000E                870      move.b  #14,D0
000036A6  43F9 00004581            871      lea     hit_against_melee_msg,A1
000036AC  4E4F                     872      trap    #15
000036AE                           873      
000036AE  5315                     874      sub.b   #1,(A5)         Remove one from the enemy's health
000036B0                           875      
000036B0  6100 0046                876      bsr     press_continue
000036B4  4E75                     877      rts
000036B6                           878  
000036B6                           879  hit_by_counter:
000036B6  103C 000E                880      move.b  #14,D0
000036BA  43F9 000045D7            881      lea     hit_by_counter_msg,A1
000036C0  4E4F                     882      trap    #15  
000036C2                           883      
000036C2  5338 5FF0                884      sub.b   #1,PLAYER           Remove one from the player's health
000036C6                           885      
000036C6  6100 0030                886      bsr     press_continue
000036CA  4E75                     887      rts
000036CC                           888  
000036CC                           889  hit_by_magic:
000036CC  103C 000E                890      move.b  #14,D0
000036D0  43F9 0000463A            891      lea     hit_by_magic_msg,A1
000036D6  4E4F                     892      trap    #15  
000036D8                           893      
000036D8  5338 5FF0                894      sub.b   #1,PLAYER           Remove one from the player's health
000036DC                           895      
000036DC  6100 001A                896      bsr     press_continue
000036E0  4E75                     897      rts
000036E2                           898  
000036E2                           899  hit_by_melee:
000036E2  103C 000E                900      move.b  #14,D0
000036E6  43F9 000046AA            901      lea     hit_by_melee_msg,A1
000036EC  4E4F                     902      trap    #15
000036EE                           903      
000036EE  5338 5FF0                904      sub.b   #1,PLAYER           Remove one from the player's health
000036F2                           905      
000036F2  6100 0004                906      bsr     press_continue
000036F6  4E75                     907      rts
000036F8                           908  
000036F8                           909  *-------------------------------------------------------
000036F8                           910  *-------------------Misc Subroutines--------------------
000036F8                           911  *-------------------------------------------------------
000036F8                           912  press_continue:
000036F8  6100 FD1A                913      bsr     endl
000036FC                           914  
000036FC  43F9 000041DE            915      lea     continue_msg,A1 Load message into A1
00003702  103C 000E                916      move.b  #14,D0          Move the trap command to display a message
00003706  4E4F                     917      trap    #15             display the "press any ket to continue" text
00003708                           918      
00003708  103C 0004                919      move.b  #4,D0           Move the trap command to take input
0000370C  4E4F                     920      trap    #15             take input to freeze the game
0000370E  4E75                     921      rts                     Return from the 'press continue' subroutine
00003710                           922      
00003710                           923  random_number:              *Psuedo random number generator, courtesy of Pdraig
00003710  103C 0008                924      move.b  #8,D0
00003714  4E4F                     925      trap    #15
00003716  C2BC 005FFFFF            926      and.l   #$5FFFFF,d1     prevent overflow in divu
0000371C  82FC 0064                927      divu    #100,D1         time count / 100
00003720  4841                     928      swap    D1              swap upper and lower words of D1 to put remainder in low word
00003722  5241                     929      addq.w  #1,D1           d1.w contains number from 1 to 100
00003724  3401                     930      move    D1,D2           d2 = d1
00003726  4281                     931      clr.l   D1
00003728                           932      
00003728  4E75                     933      rts                     Returns from random generation subroutine
0000372A                           934      
0000372A                           935  return:   *Subroutine to branch to to break out of a subroutine when a condition is met
0000372A  4E75                     936      rts
0000372C                           937      
0000372C                           938  *-------------------------------------------------------
0000372C                           939  *----------------------Draw loop------------------------
0000372C                           940  *-------------------------------------------------------
0000372C                           941  draw_loop:
0000372C  45F8 5000                942      lea     $5000,A2        Load starting memory location into A7
00003730  1C3C 0000                943      move.b  #0,D6           Data register used for rows
00003734  1E3C 0000                944      move.b  #0,D7           Data register used for columns
00003738  7200                     945      move.l  #0,D1           Clear the D1 data register
0000373A                           946      
0000373A  6100 0004                947      bsr     loop_rows       Loop for every row
0000373E  4E75                     948      rts
00003740                           949      
00003740                           950  loop_rows:
00003740  BC7C 0016                951      CMP     #22,D6          Check the rows don't go out of bounds
00003744  6E00 002C                952      BGT     end_loop        If the rows are greater than 22 end the loop
00003748                           953      
00003748  1E3C 0000                954      move.b  #0,D7           Reset to column 0
0000374C  6100 000A                955      bsr     loop_columns    Loop for every column
00003750                           956      
00003750  5206                     957      add.b   #1,D6           Add to the rows
00003752                           958      
00003752  6100 FCC0                959      bsr     endl            Break to the next line
00003756  60E8                     960      bra     loop_rows       Loop through the rows again
00003758                           961      
00003758                           962  loop_columns:
00003758  BE3C 000F                963      CMP.B   #15,D7              Check the rows don't go out of bounds
0000375C  6E00 0014                964      BGT     end_loop            If the rows are greater than 22 end the loop
00003760                           965      
00003760  6100 0012                966      bsr     draw_tile           Draw the current tile
00003764  6100 00B8                967      bsr     check_for_player    Draw the player in the current tile if they're there
00003768  6100 0108                968      bsr     check_for_enemy
0000376C                           969      
0000376C  5207                     970      add.b   #1,D7               Add to the column count
0000376E  524A                     971      add     #1,A2               Move to the next memory location
00003770  60E6                     972      bra     loop_columns        Loop the columns again
00003772                           973  
00003772                           974  end_loop:
00003772  4E75                     975      rts                         Return once a loop is finished
00003774                           976      
00003774                           977  *-------------------------------------------------------
00003774                           978  *----------------------Draw tile------------------------
00003774                           979  *-------------------------------------------------------
00003774                           980  *Draws the tile at the address in the address register A2
00003774                           981  draw_tile:
00003774  0C12 00FF                982      CMP.B   #255,(A2)           Check if the value is undifined
00003778  6700 005E                983      BEQ     draw_blocked_tile   Draw the blank tile
0000377C                           984      
0000377C  0C12 0001                985      CMP.B   #1,(A2)
00003780  6700 0064                986      BEQ     draw_both_tile
00003784  0C12 0003                987      CMP.B   #3,(A2)
00003788  6700 006A                988      BEQ     draw_left_tile
0000378C  0C12 0004                989      CMP.B   #4,(A2)
00003790  6700 0062                990      BEQ     draw_left_tile
00003794  0C12 0005                991      CMP.B   #5,(A2)
00003798  6700 0068                992      BEQ     draw_right_tile
0000379C  0C12 0006                993      CMP.B   #6,(A2)
000037A0  6700 0060                994      BEQ     draw_right_tile
000037A4  0C12 0008                995      CMP.B   #8,(A2)
000037A8  6700 004A                996      BEQ     draw_left_tile
000037AC  0C12 000A                997      CMP.B   #10,(A2)
000037B0  6700 0050                998      BEQ     draw_right_tile
000037B4  0C12 000B                999      CMP.B   #11,(A2)
000037B8  6700 003A               1000      BEQ     draw_left_tile
000037BC  0C12 000C               1001      CMP.B   #12,(A2)
000037C0  6700 0024               1002      BEQ     draw_both_tile
000037C4  0C12 000D               1003      CMP.B   #13,(A2)
000037C8  6700 0038               1004      BEQ     draw_right_tile
000037CC  0C12 000E               1005      CMP.B   #14,(A2)
000037D0  6700 0014               1006      BEQ     draw_both_tile
000037D4                          1007      
000037D4  6000 003A               1008      BRA     draw_blank_tile     Draw the blank tile
000037D8                          1009      
000037D8                          1010  draw_blocked_tile:
000037D8  43F9 0000420C           1011      lea     blocked_tile,A1
000037DE  103C 000E               1012      move.b  #14,D0
000037E2  4E4F                    1013      trap    #15
000037E4  4E75                    1014      rts
000037E6                          1015      
000037E6                          1016  draw_both_tile:
000037E6  43F9 00004200           1017      lea     both_tile,A1
000037EC  103C 000E               1018      move.b  #14,D0
000037F0  4E4F                    1019      trap    #15
000037F2  4E75                    1020      rts
000037F4                          1021      
000037F4                          1022  draw_left_tile:
000037F4  43F9 00004204           1023      lea     left_tile,A1
000037FA  103C 000E               1024      move.b  #14,D0
000037FE  4E4F                    1025      trap    #15
00003800  4E75                    1026      rts
00003802                          1027      
00003802                          1028  draw_right_tile:
00003802  43F9 00004208           1029      lea     right_tile,A1
00003808  103C 000E               1030      move.b  #14,D0
0000380C  4E4F                    1031      trap    #15
0000380E  4E75                    1032      rts
00003810                          1033      
00003810                          1034  draw_blank_tile:
00003810  43F9 000041FC           1035      lea     blank_tile,A1
00003816  103C 000E               1036      move.b  #14,D0
0000381A  4E4F                    1037      trap    #15
0000381C  4E75                    1038      rts
0000381E                          1039      
0000381E                          1040  check_for_player:
0000381E  B4CE                    1041      CMP.W   A6,A2
00003820  6700 0004               1042      BEQ     draw_player
00003824  4E75                    1043      rts
00003826                          1044      
00003826                          1045  draw_player:
00003826  323C 00FF               1046      move.w  #255,D1         Move the word #255 to D1 to set the type of trap 11
0000382A  103C 000B               1047      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
0000382E  4E4F                    1048      trap    #15             Trap to get the cursor position in D1
00003830                          1049      
00003830  0441 0200               1050      sub.w   #512,D1         Move the cursor back by two columns
00003834  4E4F                    1051      trap    #15             Set the cursor position with trap command 11
00003836                          1052      
00003836  2601                    1053      move.l  D1,D3          Move the value in D1 to D3 for storage
00003838                          1054      
00003838  103C 0015               1055      move.b  #21,D0          Move #21 to D0 for trap command 21
0000383C  223C 0000FF00           1056      move.l  #GREEN,D1       Move the colour green to D1
00003842  243C 01090000           1057      move.l  #FONT,D2        Move the font to D2
00003848  4E4F                    1058      trap    #15             Set the colour
0000384A                          1059      
0000384A  43F9 00004210           1060      lea     player_mark,A1      load the player symbol
00003850  103C 000E               1061      move.b  #14,D0              Move #14 to D0 for trap command 14
00003854  4E4F                    1062      trap    #15                 Draw the player mark
00003856                          1063      
00003856  103C 0015               1064      move.b  #21,D0          Move #21 to D0 for trap command 21
0000385A  223C 00FFFFFF           1065      move.l  #WHITE,D1       Move the colour green to D1
00003860  4E4F                    1066      trap    #15             Set the colour
00003862  4281                    1067      clr.l   D1
00003864                          1068      
00003864  2203                    1069      move.l  D3,D1           Move the value in D3 to D1 for previous cursor position
00003866                          1070      
00003866  0641 0200               1071      add.w   #512,D1         Move the cursor position two columns forward
0000386A  103C 000B               1072      move.b  #11,D0          Move byte #11 for trap command 11 
0000386E  4E4F                    1073      trap    #15             Set the cursor position
00003870                          1074      
00003870  4E75                    1075      rts
00003872                          1076      
00003872                          1077  check_for_enemy:
00003872  4BF8 6000               1078      lea     FIRST_ENEMY,A5  Load the memory address of the first enemy
00003876  564D                    1079      add.w   #ALIVE,A5       Add to the enemy memory address to get to its alive state
00003878  0C15 0000               1080      CMP.B   #0,(A5)         Check if the enemy is alive
0000387C  6700 FEAC               1081      BEQ     return          Return from the subroutine if not
00003880                          1082      
00003880  3238 6004               1083      move.w  $6004,D1
00003884  3041                    1084      move.w  D1,A0
00003886  B4C8                    1085      CMP.W   A0,A2
00003888  6700 0004               1086      BEQ     draw_enemy
0000388C  4E75                    1087      rts
0000388E                          1088      
0000388E                          1089  draw_enemy:
0000388E  323C 00FF               1090      move.w  #255,D1         Move the word #255 to D1 to set the type of trap 11
00003892  103C 000B               1091      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
00003896  4E4F                    1092      trap    #15             Trap to get the cursor position in D1
00003898                          1093      
00003898  0441 0200               1094      sub.w   #512,D1         Move the cursor back by two columns
0000389C  4E4F                    1095      trap    #15             Set the cursor position with trap command 11
0000389E                          1096      
0000389E  2601                    1097      move.l  D1,D3          Move the value in D1 to D3 for storage
000038A0                          1098      
000038A0  103C 0015               1099      move.b  #21,D0          Move #21 to D0 for trap command 21
000038A4  223C 000000FF           1100      move.l  #RED,D1       Move the colour green to D1
000038AA  243C 01090000           1101      move.l  #FONT,D2        Move the font to D2
000038B0  4E4F                    1102      trap    #15             Set the colour
000038B2                          1103      
000038B2  43F9 00004212           1104      lea     enemy_mark,A1      load the player symbol
000038B8  103C 000E               1105      move.b  #14,D0              Move #14 to D0 for trap command 14
000038BC  4E4F                    1106      trap    #15                 Draw the player mark
000038BE                          1107      
000038BE  103C 0015               1108      move.b  #21,D0          Move #21 to D0 for trap command 21
000038C2  223C 00FFFFFF           1109      move.l  #WHITE,D1       Move the colour green to D1
000038C8  4E4F                    1110      trap    #15             Set the colour
000038CA  4281                    1111      clr.l   D1
000038CC                          1112      
000038CC  2203                    1113      move.l  D3,D1           Move the value in D3 to D1 for previous cursor position
000038CE                          1114      
000038CE  0641 0200               1115      add.w   #512,D1         Move the cursor position two columns forward
000038D2  103C 000B               1116      move.b  #11,D0          Move byte #11 for trap command 11 
000038D6  4E4F                    1117      trap    #15             Set the cursor position
000038D8                          1118      
000038D8  4E75                    1119      rts
000038DA                          1120      
000038DA                          1121  *-------------------------------------------------------
000038DA                          1122  *-------------------Setup the world---------------------
000038DA                          1123  *-------------------------------------------------------
000038DA                          1124  setup_world:
000038DA  11FC 000E 514A          1125      move.b  #14,$514A   Setup the starting corridor
000038E0  11FC 0007 513A          1126      move.b  #7,$513A    T junction upwards from starting corridor
000038E6  11FC 0004 5139          1127      move.b  #4,$5139    Left corridor
000038EC  11FC 0001 5129          1128      move.b  #1,$5129
000038F2  11FC 0001 5119          1129      move.b  #1,$5119
000038F8                          1130      
000038F8  11FC 0004 5108          1131      move.b  #4,$5108    First shop
000038FE  11FC 0000 5109          1132      move.b  #0,$5109    Entrance
00003904  11FC 0005 510A          1133      move.b  #5,$510A
0000390A  11FC 0008 50F8          1134      move.b  #8,$50F8
00003910  11FC 0000 50F9          1135      move.b  #0,$50F9
00003916  11FC 000A 50FA          1136      move.b  #10,$50FA
0000391C  11FC 0003 50E8          1137      move.b  #3,$50E8
00003922  11FC 0007 50E9          1138      move.b  #7,$50E9
00003928  11FC 0006 50EA          1139      move.b  #6,$50EA
0000392E                          1140      
0000392E  11FC 0005 513B          1141      move.b  #5,$513B    Right corridor
00003934  11FC 0001 512B          1142      move.b  #1,$512B
0000393A  11FC 0001 511B          1143      move.b  #1,$511B
00003940  11FC 0008 510B          1144      move.b  #8,$510B    Path continues up with a turn off to the right
00003946                          1145      
00003946  11FC 0002 510C          1146      move.b  #2,$510C    Right path
0000394C  11FC 0002 510D          1147      move.b  #2,$510D    Continue right
00003952  11FC 0005 510E          1148      move.b  #5,$510E    Path upwards and to the left
00003958  11FC 0001 50FE          1149      move.b  #1,$50FE    Leads upwards into a room
0000395E                          1150      
0000395E  11FC 0004 50ED          1151      move.b  #4,$50ED    First monster room
00003964  11FC 0000 50EE          1152      move.b  #0,$50EE    Entrance
0000396A  11FC 0005 50EF          1153      move.b  #5,$50EF
00003970  11FC 0008 50DD          1154      move.b  #8,$50DD
00003976  11FC 0000 50DE          1155      move.b  #0,$50DE
0000397C  11FC 000A 50DF          1156      move.b  #10,$50DF
00003982  11FC 0003 50CD          1157      move.b  #3,$50CD
00003988  11FC 0007 50CE          1158      move.b  #7,$50CE
0000398E  11FC 0006 50CF          1159      move.b  #6,$50CF
00003994                          1160      
00003994  11FC 0001 50FB          1161      move.b  #1,$50FB    Path that continues up
0000399A  11FC 0001 50EB          1162      move.b  #1,$50EB    Path continues upwards
000039A0  11FC 0001 50DB          1163      move.b  #1,$50DB
000039A6                          1164      
000039A6                          1165      *Bottom row of room
000039A6  11FC 0004 50C8          1166      move.b  #4,$50C8    Large monster room with locked door
000039AC  11FC 0009 50C9          1167      move.b  #9,$50C9
000039B2  11FC 0009 50CA          1168      move.b  #9,$50CA
000039B8  11FC 0000 50CB          1169      move.b  #0,$50CB    Entrance
000039BE  11FC 0005 50CC          1170      move.b  #5,$50CC
000039C4                          1171      *Middle row of room
000039C4  11FC 0000 50B8          1172      move.b  #0,$50B8    Exit to the left
000039CA  11FC 0000 50B9          1173      move.b  #0,$50B9
000039D0  11FC 0000 50BA          1174      move.b  #0,$50BA
000039D6  11FC 0000 50BB          1175      move.b  #0,$50BB
000039DC  11FC 000A 50BC          1176      move.b  #10,$50BC
000039E2                          1177      *Top row of room
000039E2  11FC 0003 50A8          1178      move.b  #3,$50A8
000039E8  11FC 0007 50A9          1179      move.b  #7,$50A9
000039EE  11FC 0007 50AA          1180      move.b  #7,$50AA
000039F4  11FC 0007 50AB          1181      move.b  #7,$50AB    Locked door
000039FA  11FC 0006 50AC          1182      move.b  #6,$50AC
00003A00                          1183      
00003A00  11FC 0002 50B7          1184      move.b  #2,$50B7    Exit large room leftwards
00003A06  11FC 0002 50B6          1185      move.b  #2,$50B6    Continue to the left
00003A0C  11FC 0007 50B5          1186      move.b  #7,$50B5    Continue to the left and a path downwards
00003A12  11FC 0002 50B4          1187      move.b  #2,$50B4    Continue to the left
00003A18                          1188      
00003A18  11FC 0003 50A1          1189      move.b  #3,$50A1    Room to the left
00003A1E  11FC 0007 50A2          1190      move.b  #7,$50A2
00003A24  11FC 0006 50A3          1191      move.b  #6,$50A3
00003A2A  11FC 0008 50B1          1192      move.b  #8,$50B1
00003A30  11FC 0000 50B2          1193      move.b  #0,$50B2
00003A36  11FC 0000 50B3          1194      move.b  #0,$50B3    Entrance to the right
00003A3C  11FC 0004 50C1          1195      move.b  #4,$50C1
00003A42  11FC 0009 50C2          1196      move.b  #9,$50C2
00003A48  11FC 0005 50C3          1197      move.b  #5,$50C3
00003A4E                          1198      
00003A4E  11FC 0001 50C5          1199      move.b  #1,$50C5    Path leading downwards
00003A54  11FC 0001 50D5          1200      move.b  #1,$50D5
00003A5A  11FC 000A 50E5          1201      move.b  #10,$50E5   Path leading downward and to the left
00003A60  11FC 0002 50E4          1202      move.b  #2,$50E4    Path on the left
00003A66  11FC 0002 50E3          1203      move.b  #2,$50E3
00003A6C  11FC 0003 50E2          1204      move.b  #3,$50E2    Path takes a turn downwards
00003A72  11FC 0001 50F2          1205      move.b  #1,$50F2    Path continues downwards
00003A78                          1206      
00003A78  11FC 0003 5101          1207      move.b  #3,$5101    Regular enemy room
00003A7E  11FC 0000 5102          1208      move.b  #0,$5102    Entrance
00003A84  11FC 0006 5103          1209      move.b  #6,$5103
00003A8A  11FC 0008 5111          1210      move.b  #8,$5111
00003A90  11FC 0000 5112          1211      move.b  #0,$5112
00003A96  11FC 000A 5113          1212      move.b  #10,$5113
00003A9C  11FC 0004 5121          1213      move.b  #4,$5121
00003AA2  11FC 0009 5122          1214      move.b  #9,$5122
00003AA8  11FC 000A 5123          1215      move.b  #10,$5123   Exit at the bottom
00003AAE                          1216      
00003AAE  11FC 0001 50F5          1217      move.b  #1,$50F5    Path leading downward
00003AB4  11FC 0001 5105          1218      move.b  #1,$5105
00003ABA  11FC 0001 5115          1219      move.b  #1,$5115
00003AC0  11FC 0001 5125          1220      move.b  #1,$5125
00003AC6                          1221      
00003AC6                          1222      *Top row of room
00003AC6  11FC 0008 5133          1223      move.b  #8,$5133    Large enemy room - Exit at top
00003ACC  11FC 0007 5134          1224      move.b  #7,$5134
00003AD2  11FC 0000 5135          1225      move.b  #0,$5135    Entrance
00003AD8  11FC 0006 5136          1226      move.b  #6,$5136
00003ADE                          1227      
00003ADE                          1228      *Middle row of room
00003ADE  11FC 0008 5143          1229      move.b  #8,$5143
00003AE4  11FC 0000 5144          1230      move.b  #0,$5144
00003AEA  11FC 0000 5145          1231      move.b  #0,$5145
00003AF0  11FC 000A 5146          1232      move.b  #10,$5146
00003AF6                          1233      
00003AF6                          1234      *Bottom row of room
00003AF6  11FC 0004 5153          1235      move.b  #4,$5153
00003AFC  11FC 0009 5154          1236      move.b  #9,$5154
00003B02  11FC 0009 5155          1237      move.b  #9,$5155
00003B08  11FC 0005 5156          1238      move.b  #5,$5156
00003B0E                          1239      
00003B0E  4E75                    1240      rts
00003B10                          1241  
00003B10                          1242  setup_enemies:
00003B10  11FC 0001 6000          1243      move.b  #1,$6000    Health - Setup the first enemy
00003B16  11FC 0001 6001          1244      move.b  #1,$6001    Damage/level
00003B1C  11FC 0001 6002          1245      move.b  #1,$6002    Class type (Knight)
00003B22  11FC 0001 6003          1246      move.b  #1,$6003    Alive state (Alive)
00003B28  31FC 513A 6004          1247      move.w  #$513A,$6004  Move enemy coordinates
00003B2E                          1248      
00003B2E  4E75                    1249      rts
00003B30                          1250      
00003B30                          1251  setup_player:
00003B30  11FC 000A 5FF0          1252      move.b  #10,$5FF0  put score/health in memory location $5FF0
00003B36  47F8 5FF0               1253      lea     $5FF0,A3   assign address A3 to that memory location
00003B3A                          1254      
00003B3A  11FC 0000 5FF3          1255      move.b  #0,$5FF3   put game state number in memory location $5FF3
00003B40                          1256      *0 = Pick role/intro | 5 = Move around | 6 = Combat | 10 to 20 = Shop | 64 = End game
00003B40                          1257  
00003B40  11FC 0000 5FF2          1258      move.b  #0,$5FF2   put class number in memory location $5FF2
00003B46                          1259      * 1 corresponds to knight - 2 corresponds to mage - 3 corresponds to rogue
00003B46                          1260      
00003B46  11FC 0000 5FF8          1261      move.b  #0,PLA_GOLD
00003B4C  11FC 0000 5FF9          1262      move.b  #0,PLA_POTIONS
00003B52  11FC 0000 5FFA          1263      move.b  #0,PLA_KEYS
00003B58                          1264      
00003B58  4E75                    1265      rts
00003B5A                          1266      
00003B5A                          1267  *-------------------------------------------------------
00003B5A                          1268  *-------------------Data Delarations--------------------
00003B5A                          1269  *-------------------------------------------------------
00003B5A                          1270  
00003B5A= 0D 0A 00                1271  crlf:           dc.b    $0D,$0A,0
00003B5D= 2A 2A 2A 2A 2A 2A ...   1272  welcome_msg:    dc.b    '************************************************************'
00003B99= 0D 0A                   1273                  dc.b    $0D,$0A
00003B9B= 41 76 61 6C 6F 6E ...   1274                  dc.b    'Avalon: The Legend Lives'
00003BB3= 0D 0A                   1275                  dc.b    $0D,$0A
00003BB5= 2A 2A 2A 2A 2A 2A ...   1276                  dc.b    '************************************************************'
00003BF1= 0D 0A 00                1277                  dc.b    $0D,$0A,0
00003BF4= 46 65 65 64 20 6C ...   1278  potion_msg:     dc.b    'Feed load (each horse needs at least 100 units of feed)'
00003C2B= 0D 0A                   1279                  dc.b    $0D,$0A
00003C2D= 45 6E 74 65 72 20 ...   1280                  dc.b    'Enter feed load : ',0
00003C40= 45 61 63 68 20 71 ...   1281  weapons_msg:    dc.b    'Each quest need at least 2 Weapons'
00003C62= 0D 0A                   1282                  dc.b    $0D,$0A
00003C64= 6D 69 6E 69 6D 75 ...   1283                  dc.b    'minimum requirement is 2 i.e. Sword x 1 and Speer x 1.'
00003C9A= 0D 0A                   1284                  dc.b    $0D,$0A
00003C9C= 45 6E 74 65 72 20 ...   1285                  dc.b    'Enter # of weapons : ',0
00003CB2= 41 64 64 20 47 61 ...   1286  gameplay_msg:   dc.b    'Add Gameplay !',0
00003CC1= 55 70 64 61 74 65 ...   1287  update_msg:     dc.b    'Update Gameplay !',0
00003CD3= 44 72 61 77 20 53 ...   1288  draw_msg:       dc.b    'Draw Screen !',0
00003CE1= 53 74 72 69 6B 65 ...   1289  hit_msg:        dc.b    'Strike!',0
00003CE9= 4D 69 73 73 21 00       1290  miss_msg:       dc.b    'Miss!',0
00003CEF= 2E 00                   1291  loop_msg:       dc.b    '.',0
00003CF1= 45 6E 74 65 72 20 ...   1292  replay_msg:     dc.b    'Enter 0 to Quit any other number to replay : ',0
00003D1F= 53 63 6F 72 65 20 ...   1293  hud_msg:        dc.b    'Score : ',0
00003D28                          1294  
00003D28                          1295  health:         ds.w    1
00003D2A                          1296  score:          ds.w    1 reserve space for score
00003D2C                          1297  
00003D2C= 59 6F 75 20 61 77 ...   1298  wake_up_msg:    dc.b    'You awake in a room, on a bed of red velvet, with no memory',$0D,$0A
00003D69= 6F 66 20 68 6F 77 ...   1299                  dc.b    'of how you got here. You climb from the frame and look in a nearby mirror',$0D,$0A,0
00003DB5= 31 3E 20 59 6F 75 ...   1300  pick_role_msg:  dc.b    '1> You wear armour of polished iron, a short sword and heavy shield laying',$0D,$0A
00003E01= 63 6C 6F 73 65 20 ...   1301                  dc.b    'close by. (Knight class)',$0D,$0A,$0D,$0A
00003E1D= 32 3E 20 59 6F 75 ...   1302                  dc.b    '2> You wear a cloak with mystic symbols sewn into the fabrics, an ancient',$0D,$0A
00003E68= 6C 6F 6F 6B 69 6E ...   1303                  dc.b    'looking staff lays near. (Mage class)',$0D,$0A,$0D,$0A
00003E91= 33 3E 20 59 6F 75 ...   1304                  dc.b    '3> You wear tight, well-fitting leather armour with reminents of black dye',$0D,$0A
00003EDD= 73 74 61 69 6E 65 ...   1305                  dc.b    'stained to the material. Two knives are fastened to your belt. (Rogue class)',$0D,$0A,0
00003F2C= 45 6E 74 65 72 20 ...   1306  input_nums_msg: dc.b    'Enter num between 1 and ',0
00003F45= 3A 20 00                1307  colon_msg:      dc.b    ': ',0
00003F48                          1308  
00003F48= 49 6E 70 75 74 74 ...   1309  input_error_msg:    dc.b    'Inputted number is outside of range.',$0D,$0A,0
00003F6F= 47 61 6D 65 73 74 ...   1310  fake_gamestate_msg: dc.b    'Gamestate doesnt exist',$0D,$0A,0
00003F88= 59 6F 75 20 67 72 ...   1311  knight_role_msg:    dc.b    'You grab your sword and shield, pull a torch from the wall, and leave the room.',$0D,$0A
00003FD9= 2D 20 59 6F 75 20 ...   1312                      dc.b    '- You have chosen the KNIGHT class. You specialise in blocking and countering',$0D,$0A,0
00004029= 59 6F 75 20 70 69 ...   1313  mage_role_msg:  dc.b    'You pick up your staff, grab a torch from the wall, and leave the room.',$0D,$0A
00004072= 2D 20 59 6F 75 20 ...   1314                  dc.b    '- You have chosen the MAGE class. You specialise in magic attacks.',$0D,$0A,0
000040B7= 59 6F 75 20 66 61 ...   1315  rogue_role_msg: dc.b    'You fasten your belt, grab a torch from the wall, and leave the room.',$0D,$0A
000040FE= 2D 20 59 6F 75 20 ...   1316                  dc.b    '- You have chosen the ROGUE class. You specialise in quick melee attacks.',$0D,$0A,0
0000414A= 31 3E 20 4D 6F 76 ...   1317  movement_msg:   dc.b    '1> Move north.',$0D,$0A
0000415A= 32 3E 20 4D 6F 76 ...   1318                  dc.b    '2> Move south.',$0D,$0A
0000416A= 33 3E 20 4D 6F 76 ...   1319                  dc.b    '3> Move west.',$0D,$0A
00004179= 34 3E 20 4D 6F 76 ...   1320                  dc.b    '4> Move east.',$0D,$0A,0
00004189= 4D 6F 76 65 64 20 ...   1321  move_north_msg: dc.b    'Moved north.',$0D,$0A,0
00004198= 4D 6F 76 65 64 20 ...   1322  move_east_msg:  dc.b    'Moved east.',$0D,$0A,0
000041A6= 4D 6F 76 65 64 20 ...   1323  move_south_msg: dc.b    'Moved south.',$0D,$0A,0
000041B5= 4D 6F 76 65 64 20 ...   1324  move_west_msg:  dc.b    'Moved west.',$0D,$0A,0
000041C3= 41 20 77 61 6C 6C ...   1325  movement_blocked_msg:  dc.b    'A wall blocks your path.',$0D,$0A,0
000041DE= 45 6E 74 65 72 20 ...   1326  continue_msg:   dc.b    'Enter any key to continue... ',0
000041FC                          1327  
000041FC= 20 20 20 00             1328  blank_tile      dc.b    '   ',0
00004200= 7C 20 7C 00             1329  both_tile       dc.b    '| |',0
00004204= 7C 20 20 00             1330  left_tile       dc.b    '|  ',0
00004208= 20 20 7C 00             1331  right_tile      dc.b    '  |',0
0000420C= 5C 2F 5C 00             1332  blocked_tile    dc.b    '\/\',0
00004210= 2A 00                   1333  player_mark     dc.b    '*',0
00004212= 58 00                   1334  enemy_mark      dc.b    'X',0
00004214= 41 20 6D 6F 6E 73 ...   1335  encounter_msg:  dc.b    'A monster blocks your path, it looks ready to attack!',$0D,$0A,0
0000424C= 31 3E 20 42 6C 6F ...   1336  combat_msg:     dc.b    '1> Block and Counter.',$0D,$0A
00004263= 32 3E 20 43 61 73 ...   1337                  dc.b    '2> Cast Magic.',$0D,$0A
00004273= 33 3E 20 41 74 74 ...   1338                  dc.b    '3> Attack Swiftly.',$0D,$0A
00004287= 34 3E 20 54 72 79 ...   1339                  dc.b    '4> Try Run.',$0D,$0A,0
00004295= 20 20 20 20 20 20 ...   1340  skeleton_msg:   dc.b    '           .-.     ',$0D,$0A
000042AA= 20 2F 5C 5F 5F 5F ...   1341                  dc.b    ' /\____/\ (o.o)    ',$0D,$0A
000042BF= 7C 20 20 5F 7C 7C ...   1342                  dc.b    '|  _||_  | |=|     ',$0D,$0A
000042D4= 20 5C 2F 20 7C 7C ...   1343                  dc.b    ' \/ || \/ __|__    ',$0D,$0A
000042E9= 20 20 20 20 7C 7C ...   1344                  dc.b    '    ||\_//.=|=.\\  ',$0D,$0A
000042FE= 20 20 20 20 7C 7C ...   1345                  dc.b    '    ||\_/ .=|=. \\ ',$0D,$0A
00004313= 20 20 20 20 7C 7C ...   1346                  dc.b    '    ||    .=|=. // ',$0D,$0A
00004328= 20 20 20 20 7C 7C ...   1347                  dc.b    '    ||    (_=_)//  ',$0D,$0A
0000433D= 20 20 20 20 7C 7C ...   1348                  dc.b    '    ||   (:| |:)   ',$0D,$0A
00004352= 20 20 20 20 7C 7C ...   1349                  dc.b    '    ||    || ||    ',$0D,$0A
00004367= 20 20 20 20 7C 7C ...   1350                  dc.b    '    ||    () ()    ',$0D,$0A
0000437C= 20 20 20 20 2F 5C ...   1351                  dc.b    '    /\    || ||    ',$0D,$0A
00004391= 20 20 20 20 7C 7C ...   1352                  dc.b    '    ||    || ||    ',$0D,$0A
000043A6= 20 20 20 20 5C 2F ...   1353                  dc.b    '    \/  ==   ==    ',$0D,$0A,0
000043BC= 59 6F 75 20 65 73 ...   1354  escape_msg:             dc.b    'You escaped the monster!',$0D,$0A,0
000043D7= 59 6F 75 20 74 72 ...   1355  fail_escape_msg:        dc.b    'You try to run, but the monster catches and damages you!',$0D,$0A,0
00004412= 59 6F 75 20 62 6F ...   1356  both_block_msg:         dc.b    'You both block, No damage is done!',$0D,$0A,0
00004437= 59 6F 75 20 62 6F ...   1357  both_cast_magic_msg:    dc.b    'You both cast magic at eachother, the spells clash in mid air! No damage',$0D,$0A
00004481= 69 73 20 64 6F 6E ...   1358                          dc.b    'is done!',$0D,$0A,0
0000448C= 59 6F 75 20 62 6F ...   1359  both_melee_msg:         dc.b    'You both lunge forward, metal clashes together, but no damage is done!',$0D,$0A,0
000044D5= 54 68 65 20 65 6E ...   1360  hit_against_block_msg:  dc.b    'The enemy blocks, you cast a cast a spell and it damages the monster!',$0D,$0A,0
0000451D= 54 68 65 20 65 6E ...   1361  hit_against_magic_msg:  dc.b    'The enemy begins to charge a spell but you lunge forward and hit it first,',$0D,$0A
00004569= 64 61 6D 61 67 69 ...   1362                          dc.b    'damaging the monster!',$0D,$0A,0
00004581= 54 68 65 20 65 6E ...   1363  hit_against_melee_msg:  dc.b    'The enemy lunges forward but you block quicky, then counter, damaging the',$0D,$0A
000045CC= 6D 6F 6E 73 74 65 ...   1364                          dc.b    'monster!',$0D,$0A,0
000045D7= 59 6F 75 20 6C 75 ...   1365  hit_by_counter_msg:     dc.b    'You lunge at the enemy but they block before you hit, they swing around quickly',$0D,$0A
00004628= 61 6E 64 20 64 61 ...   1366                          dc.b    'and damage you!',$0D,$0A,0
0000463A= 59 6F 75 20 74 72 ...   1367  hit_by_magic_msg:       dc.b    'You try to block the enemies attack, but they cast a spell that breaks through',$0D,$0A
0000468A= 79 6F 75 72 20 64 ...   1368                          dc.b    'your defense and damages you!',$0D,$0A,0
000046AA= 59 6F 75 20 74 72 ...   1369  hit_by_melee_msg:       dc.b    'You try to charge up a spell, but the enemy lunges forward and damages you!',$0D,$0A,0
000046F8= 48 65 61 6C 74 68 ...   1370  health_msg:             dc.b    'Health: ',0
00004701= 45 6E 65 6D 79 20 ...   1371  enemy_health_msg:       dc.b    'Enemy Health: ',0
00004710= 54 6F 72 63 68 20 ...   1372  torch_msg:              dc.b    'Torch Life: ',0
0000471D= 49 6E 76 65 6E 74 ...   1373  inventory_msg:          dc.b    'Inventory:',0
00004728= 2D 20 47 6F 6C 64 ...   1374  gold_msg:               dc.b    '- Gold ',0
00004730= 2D 20 4B 65 79 20 00    1375  key_msg:                dc.b    '- Key ',0
00004737= 2D 20 70 6F 74 69 ...   1376  potions_msg:            dc.b    '- potion ',0
00004741= 54 68 65 20 6D 6F ...   1377  battle_won_msg:         dc.b    'The monster collapses at your feet. It is dead!',$0D,$0A,0
00004773= 28 00                   1378  bracket_open_msg        dc.b    '(',0
00004775= 29 00                   1379  bracket_close_msg       dc.b    ')',0
00004777                          1380  
00004777                          1381      end start

No errors detected
No warnings generated


SYMBOL TABLE INFORMATION
Symbol-name         Value
-------------------------
ALIVE               3
BATTLE_WON_MSG      4741
BLANK_TILE          41FC
BLOCKED_TILE        420C
BLOCK_COUNTER       35AE
BLUE                FF00
BOTH_BLOCK          3644
BOTH_BLOCK_MSG      4412
BOTH_CAST_MAGIC     3656
BOTH_CAST_MAGIC_MSG  4437
BOTH_MELEE          3668
BOTH_MELEE_MSG      448C
BOTH_TILE           4200
BRACKET_CLOSE_MSG   4775
BRACKET_OPEN_MSG    4773
CAST_MAGIC          35C8
CHECK_FOR_ENEMY     3872
CHECK_FOR_PLAYER    381E
CLASS               2
CLEAR_SCREEN        33E6
COLON_MSG           3F45
COMBAT              3576
COMBAT_MSG          424C
CONTINUE_MSG        41DE
CRLF                3B5A
CSR_POS_BATTLE      2001
CSR_POS_MOVE        3201
DAMAGE              1
DECORATE            33C8
DRAW                31F2
DRAW_BATTLE_INFO    3328
DRAW_BLANK_TILE     3810
DRAW_BLOCKED_TILE   37D8
DRAW_BOTH_TILE      37E6
DRAW_ENEMY          388E
DRAW_HUD            3216
DRAW_ITEM_NUMBER    3306
DRAW_LEFT_TILE      37F4
DRAW_LOOP           372C
DRAW_MSG            3CD3
DRAW_PLAYER         3826
DRAW_PLAYER_INFO    322C
DRAW_RIGHT_TILE     3802
DRAW_SKELETON       3208
DRAW_TILE           3774
ENCOUNTER_MSG       4214
END                 3006
ENDL                3414
END_LOOP            3772
ENEMY_ALIVE_CHECK   31B2
ENEMY_CHECK         314E
ENEMY_DIED          31C4
ENEMY_HEALTH_MSG    4701
ENEMY_MARK          4212
ENEMY_MAX           1
ENTER_COMBAT        3188
ESCAPE_ATTACK       3612
ESCAPE_MSG          43BC
EXIT                0
FAIL_ESCAPE         362E
FAIL_ESCAPE_MSG     43D7
FAKE_GAMESTATE      3114
FAKE_GAMESTATE_MSG  3F6F
FIRST_ENEMY         6000
FONT                1090000
GAME                3000
GAMELOOP            3122
GAMEPLAY            3382
GAMEPLAY_MSG        3CB2
GAME_STATE          5FF3
GOLD_MSG            4728
GREEN               FF00
HEALTH              3D28
HEALTH_MSG          46F8
HIT_AGAINST_BLOCK   367A
HIT_AGAINST_BLOCK_MSG  44D5
HIT_AGAINST_MAGIC   368E
HIT_AGAINST_MAGIC_MSG  451D
HIT_AGAINST_MELEE   36A2
HIT_AGAINST_MELEE_MSG  4581
HIT_BY_COUNTER      36B6
HIT_BY_COUNTER_MSG  45D7
HIT_BY_MAGIC        36CC
HIT_BY_MAGIC_MSG    463A
HIT_BY_MELEE        36E2
HIT_BY_MELEE_MSG    46AA
HIT_MSG             3CE1
HUD                 33A6
HUD_MSG             3D1F
INPUT               30AE
INPUT_ERROR_MSG     3F48
INPUT_NUMS_MSG      3F2C
INVALID_INPUT       3106
INVENTORY_MSG       471D
KEY_MSG             4730
KNIGHT_ROLE_MSG     3F88
KNIGHT_SELECT       3066
LEFT_TILE           4204
LOOP_COLUMNS        3758
LOOP_MSG            3CEF
LOOP_ROWS           3740
LOSE_POINT          8
MAGE_ROLE_MSG       4029
MAGE_SELECT         307E
MANAGE_INPUT        30D8
MAX_POTIONS         9
MELEE_ATTACK        35E2
MIN_FEED            64
MIN_POTIONS         1
MIN_WEAPONS         6
MISS_MSG            3CE9
MOVEMENT            342A
MOVEMENT_BLOCKED    3564
MOVEMENT_BLOCKED_MSG  41C3
MOVEMENT_MSG        414A
MOVE_EAST           3524
MOVE_EAST_MSG       4198
MOVE_NORTH          3460
MOVE_NORTH_MSG      4189
MOVE_SOUTH          34A2
MOVE_SOUTH_MSG      41A6
MOVE_WEST           34E4
MOVE_WEST_MSG       41B5
OUT                 33D0
PICK_ROLE           3020
PICK_ROLE_MSG       3DB5
PLAYER              5FF0
PLAYER_MARK         4210
PLA_CLASS           5FF2
PLA_GOLD            5FF8
PLA_KEYS            5FFA
PLA_POTIONS         5FF9
PLA_P_POS           5FF6
POSITION            4
POTIONS_MSG         4737
POTION_MSG          3BF4
PRESS_CONTINUE      36F8
RANDOM_NUMBER       3710
RED                 FF
REPLAY              33F2
REPLAY_MSG          3CF1
RETURN              372A
RIGHT_TILE          4208
ROGUE_ROLE_MSG      40B7
ROGUE_SELECT        3096
ROLE_INPUT          3048
SCORE               3D2A
SETUP_ENEMIES       3B10
SETUP_PLAYER        3B30
SETUP_WORLD         38DA
SKELETON_MSG        4295
START               1000
TORCH_MSG           4710
TRY_RUN             35FC
UPDATE              3138
UPDATE_MSG          3CC1
WAKE_UP_MSG         3D2C
WALL_COLLISIONS     343E
WEAPONS_MSG         3C40
WELCOME             300A
WELCOME_MSG         3B5D
WHITE               FFFFFF
WIN_POINT           5

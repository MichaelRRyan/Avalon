00001000 Starting Address
Assembler used: EASy68K Editor/Assembler v5.16.01
Created On: 13/03/2019 21:45:16

00000000                             1  *-------------------------------------------------------
00000000                             2  * Author         : Michael Rainsford Ryan
00000000                             3  * Student Number : C00239510
00000000                             4  * Date Created   : 21/01/2019
00000000                             5  * Description    : A simplified, offline clone of the
00000000                             6  *                : online game "Avalon".
00000000                             7  * Issues/Bugs    : None currenty.
00000000                             8  *-------------------------------------------------------
00000000                             9  
00001000                            10      org $1000
00001000                            11  
00001000                            12  *-------------------------------------------------------
00001000                            13  *Choose to be a Worker or a God 
00001000                            14  *https://www.avalon-rpg.com/
00001000                            15  *-------------------------------------------------------
00001000                            16  
00001000                            17  *-------------------------------------------------------
00001000                            18  *-------------------Game Information-------------------
00001000                            19  *-------------------------------------------------------
00001000                            20  *A6 is used for player coordinates
00001000                            21  *A5 is used for enemy coordinates when in combat or looping through them
00001000                            22  *D5 is used occasionally for input range
00001000                            23  *$5000 to $5FE0 holds maps
00001000                            24  *$5FF0 holds player information
00001000                            25  *$6000 to $7000 holds enemies
00001000                            26  
00001000                            27  *Enemies:
00001000                            28  *Byte:  Name
00001000                            29  *0      Health
00001000                            30  *1      Damage/level
00001000                            31  *2      enemy type (Knight, mage, rogue)
00001000                            32  *3      Alive state (1 == alive, 0 == dead)
00001000                            33  *4 & 5  Coordinates
00001000                            34  
00001000                            35  *Player:
00001000                            36  *Byte:  Name
00001000                            37  *0      Health
00001000                            38  *1      Damage/level
00001000                            39  *2      Class (Knight, mage, rogue)
00001000                            40  *3      Game state
00001000                            41  *4-5+A6 Coordinates
00001000                            42  *6-7    Last coordinates
00001000                            43      
00001000                            44  *Game state : 0 = Pick role/intro | 5 = Move around | 6 = Combat | 10 to 20 = Shop | 64 = End game
00001000                            45  *Class      : 1 corresponds to knight - 2 corresponds to mage - 3 corresponds to rogue
00001000                            46  
00001000                            47  
00001000                            48  *-------------------------------------------------------
00001000                            49  *Validation values to be used, modify as needed
00001000                            50  *Add additional validation values as required
00001000                            51  *-------------------------------------------------------
00001000  =00000000                 52  exit        EQU 0      used to exit assembly program
00001000  =00000064                 53  min_feed    EQU 100    min feed requirement
00001000  =00000001                 54  min_potions EQU 1      min number of potions
00001000  =00000009                 55  max_potions EQU 9      max number of potions
00001000  =00000006                 56  min_weapons EQU 6      min weapons
00001000  =00000005                 57  win_point   EQU 5      points accumilated on win
00001000  =00000008                 58  lose_point  EQU 8      points deducted on a loss
00001000                            59  
00001000  =00006000                 60  FIRST_ENEMY EQU $6000
00001000  =00000001                 61  ENEMY_MAX   EQU 1      Number of enemies in the game
00001000                            62  
00001000  =000000FF                 63  RED         EQU $000000FF   Red colour value
00001000  =0000FF00                 64  GREEN       EQU $0000FF00   Green colour value
00001000  =0000FF00                 65  BLUE        EQU $0000FF00   Blue colour value
00001000  =00FFFFFF                 66  WHITE       EQU $00FFFFFF   White colour value
00001000  =01090000                 67  FONT        EQU $01090000   Font value
00001000                            68  
00001000  =00005FF0                 69  PLAYER      EQU $5FF0       Memory address for player information
00001000  =00005FF3                 70  GAME_STATE  EQU $5FF3       The memory address of the game state
00001000  =00005FF2                 71  PLA_CLASS   EQU $5FF2       The memory address for the player class
00001000  =00005FF6                 72  PLA_P_POS   EQU $5FF6       Memory location of the player's previous position
00001000                            73  
00001000  =00000001                 74  DAMAGE      EQU 1           The number of bytes to move from the charater before reaching the damage
00001000  =00000002                 75  CLASS       EQU 2           The number of bytes to move from the charater before reaching the class
00001000  =00000003                 76  ALIVE       EQU 3           The number of bytes to move from the charater before reaching the alive state
00001000  =00000004                 77  POSITION    EQU 4           The number of bytes to move from the charater before reaching the position
00001000                            78  
00001000                            79  
00001000                            80  
00001000                            81  
00001000                            82  *Start of Game
00001000                            83  start:
00001000  11FC 000A 5FF0            84      move.b  #10,$5FF0  put score/health in memory location $5FF0
00001006  47F8 5FF0                 85      lea     $5FF0,A3   assign address A3 to that memory location
0000100A                            86      
0000100A  11FC 0000 5FF3            87      move.b  #0,$5FF3   put game state number in memory location $5FF3
00001010                            88      *0 = Pick role/intro | 5 = Move around | 6 = Combat | 10 to 20 = Shop | 64 = End game
00001010                            89  
00001010  11FC 0000 5FF2            90      move.b  #0,$5FF2   put class number in memory location $5FF2
00001016                            91      * 1 corresponds to knight - 2 corresponds to mage - 3 corresponds to rogue
00001016                            92      
00001016  6100 27FA                 93      bsr     setup_world
0000101A  6100 2A2C                 94      bsr     setup_enemies
0000101E                            95  
0000101E  6100 1FEA                 96      bsr     welcome    branch to the welcome subroutine
00001022  6100 260C                 97      bsr     press_continue
00001026  6100 1FD8                 98      bsr     game       branch to the game subroutine
0000102A                            99  *Game loop
00003000                           100      org     $3000      the rest of the program is to be located from 3000 onwards
00003000                           101  
00003000                           102  *-------------------------------------------------------
00003000                           103  *-------------------Game Subroutine---------------------
00003000                           104  *-------------------------------------------------------
00003000                           105  game:
00003000  6100 0120                106      bsr     gameloop   branch to gameloop subroutine
00003004  4E75                     107      rts                return from game: subroutine
00003006                           108            
00003006                           109  end:
00003006  FFFF FFFF                110      simhalt
0000300A                           111  
0000300A                           112  *-------------------------------------------------------
0000300A                           113  *-------------------Welcome Subroutine------------------
0000300A                           114  *-------------------------------------------------------
0000300A                           115  welcome:
0000300A  6100 0340                116      bsr     endl            branch to endl subroutine
0000300E  43F9 00003A6B            117      lea     welcome_msg,A1  assign message to address register A1
00003014  103C 000E                118      move.b  #14,D0          move literal 14 to DO
00003018  4E4F                     119      trap    #15             trap and interpret value in D0
0000301A  6100 0330                120      bsr     endl            branch to endl subroutine
0000301E                           121      
0000301E  4E75                     122      rts                     return from welcome: subroutine
00003020                           123  
00003020                           124  *-------------------------------------------------------
00003020                           125  *-------------------Role Picking Subroutine------------------
00003020                           126  *-------------------------------------------------------
00003020                           127  pick_role:
00003020                           128  
00003020  43F9 00003C50            129      lea     wake_up_msg,A1  assign message to address register A1
00003026  103C 000E                130      move.b  #14,D0          move literal 14 to DO
0000302A  4E4F                     131      trap    #15             trap and interpret value in D0
0000302C  6100 031E                132      bsr     endl            branch to endl subroutine
00003030                           133      
00003030  43F9 00003CD9            134      lea     pick_role_msg,A1 assign message to address register A1
00003036  103C 000E                135      move.b  #14,D0           move literal 14 to DO
0000303A  4E4F                     136      trap    #15              trap and interpret value in D0
0000303C                           137      
0000303C  7A03                     138      move.l  #3,D5           Move the number 3 to D5 to tell the program how many options there are
0000303E                           139      
0000303E  6100 006E                140      bsr     input           branch to the input subroutine
00003042                           141      
00003042  6100 05EC                142      bsr     press_continue          Pause the game until a key is pressed
00003046                           143      
00003046  4E75                     144      rts                     return from pick_role subroutine
00003048                           145      
00003048                           146  role_input:
00003048  11C1 5FF2                147      move.b  D1,PLA_CLASS    Move the role number to player class memory location to hold the class number
0000304C                           148      
0000304C                           149      *Give the player a message depending on the role chosen
0000304C  B23C 0001                150      CMP.B   #1,D1
00003050  6700 0014                151      BEQ     knight_select   Branch to knight message if role selected
00003054                           152      
00003054  B23C 0002                153      CMP.B   #2,D1
00003058  6700 0024                154      BEQ     mage_select     Branch to mage message if role selected
0000305C                           155      
0000305C  B23C 0003                156      CMP.B   #3,D1
00003060  6700 0034                157      BEQ     rogue_select    Branch to rogue message if role selected
00003064                           158      
00003064  4E75                     159      rts
00003066                           160      
00003066                           161  knight_select:
00003066  43F9 00003EAC            162      lea     knight_role_msg,A1 assign message to address register A1
0000306C  103C 000E                163      move.b  #14,D0          move literal 14 to DO
00003070  4E4F                     164      trap    #15             Display the knight message
00003072                           165      
00003072  11FC 0005 5FF3           166      move.b  #5,GAME_STATE   Change the game state to the movement state
00003078  4DF8 514A                167      lea     $514A,A6        Set the player coordinate to the first corridor
0000307C                           168      
0000307C  4E75                     169      rts                     Return from the sub routine
0000307E                           170  
0000307E                           171  mage_select:
0000307E  43F9 00003F43            172      lea     mage_role_msg,A1 assign message to address register A1
00003084  103C 000E                173      move.b  #14,D0          move literal 14 to DO
00003088  4E4F                     174      trap    #15             Display the mage message
0000308A                           175      
0000308A  11FC 0005 5FF3           176      move.b  #5,GAME_STATE   Change the game state to the movement state
00003090  4DF8 514A                177      lea     $514A,A6        Set the player coordinate to the first corridor
00003094                           178      
00003094  4E75                     179      rts                     Return from the sub routine
00003096                           180  
00003096                           181  rogue_select:
00003096  43F9 00003FD8            182      lea     rogue_role_msg,A1 assign message to address register A1
0000309C  103C 000E                183      move.b  #14,D0          move literal 14 to DO
000030A0  4E4F                     184      trap    #15             Display the rogue message
000030A2                           185      
000030A2  11FC 0005 5FF3           186      move.b  #5,GAME_STATE   Change the game state to the movement state
000030A8  4DF8 514A                187      lea     $514A,A6        Set the player coordinate to the first corridor
000030AC                           188      
000030AC  4E75                     189      rts                     Return from the sub routin
000030AE                           190      
000030AE                           191  *-------------------------------------------------------
000030AE                           192  *---------Gameplay Input Values Subroutine--------------
000030AE                           193  *-------------------------------------------------------    
000030AE                           194  input:
000030AE  6100 029C                195      bsr     endl            Branch to end line subroutine
000030B2                           196      
000030B2  43F9 00003E50            197      lea     input_nums_msg,A1 assign message to address register A1
000030B8  103C 000E                198      move.b  #14,D0          move literal 14 to DO
000030BC  4E4F                     199      trap    #15             Display the "enter number" message
000030BE                           200      
000030BE  2205                     201      move.l  D5,D1           Move the number of options to D1 to display it
000030C0  103C 0003                202      move.b  #3,D0           move literal 3 to DO
000030C4  4E4F                     203      trap    #15             Display the number in D1 to show the input range
000030C6                           204      
000030C6  43F9 00003E69            205      lea     colon_msg,A1    assign message to address register A1
000030CC  103C 000E                206      move.b  #14,D0          move literal 14 to DO
000030D0  4E4F                     207      trap    #15             Display a colon after the number range
000030D2                           208      
000030D2  103C 0004                209      move.b  #4,D0           Move the number 4 to D0
000030D6  4E4F                     210      trap    #15             Take input
000030D8                           211      
000030D8                           212  manage_input:
000030D8  B27C 0001                213      CMP     #1,D1           Check input against minimum value
000030DC  6D00 0028                214      BLT     invalid_input   Error if less than 1
000030E0                           215      
000030E0  B245                     216      CMP     D5,D1           Compare input against max value
000030E2  6E00 0022                217      BGT     invalid_input   Error if more than max value
000030E6                           218      
000030E6  0C38 0000 5FF3           219      CMP.B   #0,GAME_STATE   Check which state the game is in
000030EC  6700 FF5A                220      BEQ     role_input      Branch to the manage input for the role picking
000030F0  0C38 0005 5FF3           221      CMP.B   #5,GAME_STATE   Check which state the game is in
000030F6  6700 027E                222      BEQ     wall_collisions Branch to the manage input for the movement
000030FA  0C38 0006 5FF3           223      CMP.B   #6,GAME_STATE   Check which state the game is in
00003100  6600 0012                224      BNE     fake_gamestate  branch to display a message if the gamestate is undifined
00003104                           225      
00003104  4E75                     226      rts                     Return out of subroutine
00003106                           227  
00003106                           228  invalid_input:
00003106  43F9 00003E6C            229      lea     input_error_msg,A1 assign message to address register A1
0000310C  103C 000E                230      move.b  #14,D0          move literal 14 to DO
00003110  4E4F                     231      trap    #15             Display the error message
00003112                           232      
00003112  609A                     233      bra     input           Go back to taking input
00003114                           234      
00003114                           235  fake_gamestate:
00003114  43F9 00003E93            236      lea     fake_gamestate_msg,A1   Assign message to address register A1
0000311A  103C 000E                237      move.b  #14,D0                  move literal 14 to DO
0000311E  4E4F                     238      trap    #15                     Display the error message
00003120  4E75                     239      rts
00003122                           240  
00003122                           241  *-------------------------------------------------------
00003122                           242  *----------------Gameloop (main loop)-------------------
00003122                           243  *------------------------------------------------------- 
00003122                           244  gameloop:
00003122  6100 01FA                245      bsr     clear_screen    clears the screen  
00003126  6100 00CA                246      bsr     draw            branch to draw screen subroutine
0000312A  6100 00EA                247      bsr     draw_hud
0000312E  6100 0008                248      bsr     update          branch to update game subroutine 
00003132  6100 0186                249      bsr     gameplay        branch to gameplay subroutine
00003136  60EA                     250      bra     gameloop        Continue looping the game loop     
00003138                           251      
00003138                           252      *bsr     clear_screen    clears the screen
00003138                           253      *bsr     hud             branch to display HUD subroutine
00003138                           254      *bsr     clear_screen    clears the screen
00003138                           255      *bsr     replay          branch to replay game subroutine
00003138                           256      *bsr     clear_screen    clears the screen
00003138                           257      *rts                     return from gameloop: subroutine
00003138                           258  
00003138                           259  *-------------------------------------------------------
00003138                           260  *----------------Update Quest Progress------------------
00003138                           261  *  Complete Quest
00003138                           262  *------------------------------------------------------- 
00003138                           263  update:
00003138  0C38 0005 5FF3           264      CMP.B   #5,GAME_STATE       Check which state the game is in
0000313E  6700 000E                265      BEQ     enemy_check         Check for enemies if in movement state
00003142  0C38 0006 5FF3           266      CMP.B   #6,GAME_STATE       Check which state the game is in
00003148  6700 0068                267      BEQ     enemy_alive_check   Check if enemy is dead if in combat
0000314C                           268      
0000314C  4E75                     269      rts
0000314E                           270      
0000314E                           271  enemy_check:
0000314E  4BF8 6000                272      lea     FIRST_ENEMY,A5  Load the enemy information into A5
00003152  564D                     273      add.w   #ALIVE,A5       Move into enemy information to check if its alive
00003154  0C15 0000                274      CMP.B   #0,(A5)         Check if the enemy is alive
00003158  6700 0508                275      BEQ     return          Return from the check if the enemy is dead
0000315C                           276      
0000315C  524D                     277      add.w   #1,A5           Move from the enemy alive state to its position
0000315E  340E                     278      move.w  A6,D2           Move the player position to D2
00003160                           279      
00003160                           280      *Check if the player is beside an enemy
00003160  0442 0010                281      sub.w   #16,D2          Check north
00003164  B455                     282      CMP.W   (A5),D2           
00003166  6700 0020                283      BEQ     enter_combat    Enter the player into combat
0000316A                           284      
0000316A  0642 0020                285      add.w   #32,D2          Check south
0000316E  B455                     286      CMP.W   (A5),D2           
00003170  6700 0016                287      BEQ     enter_combat    Enter the player into combat
00003174                           288      
00003174  0442 0011                289      sub.w   #17,D2          Check west
00003178  B455                     290      CMP.W   (A5),D2           
0000317A  6700 000C                291      BEQ     enter_combat    Enter the player into combat
0000317E                           292      
0000317E  5442                     293      add.w   #2,D2           Check east
00003180  B455                     294      CMP.W   (A5),D2           
00003182  6700 0004                295      BEQ     enter_combat    Enter the player into combat
00003186                           296      
00003186  4E75                     297      rts     Return if not touching an enemy
00003188                           298      
00003188                           299  enter_combat:
00003188  594D                     300      sub.w   #4,A5               Get the memory address of the enemy opposed to it's position
0000318A  11FC 0006 5FF3           301      move.b  #6,GAME_STATE       Move to combat state
00003190                           302      
00003190  6100 01BA                303      bsr     endl                Line break
00003194                           304      
00003194  43F9 00004134            305      LEA     encounter_msg,A1    Load the encounter message int A1
0000319A  103C 000E                306      move.b  #14,D0              Move #14 to D0 to display message
0000319E  4E4F                     307      trap    #15                 Display the loaded message
000031A0                           308      
000031A0  6100 048E                309      bsr     press_continue      Branch to the press to continue subroutine
000031A4                           310      
000031A4  6100 0178                311      bsr     clear_screen        Clear the screen
000031A8                           312      
000031A8  6100 005E                313      bsr     draw_skeleton       Draw the enemy
000031AC  6100 00B4                314      bsr     draw_battle_info    Draw the info
000031B0                           315      
000031B0  4E75                     316      rts
000031B2                           317      
000031B2                           318  enemy_alive_check:
000031B2  0C15 0000                319      CMP.B   #0,(A5)     Compare the enemy health with zero
000031B6  6700 000C                320      BEQ     enemy_died  If the enemy health is zero, they died
000031BA  0C15 0064                321      CMP.B   #100,(A5)   Compare the enemy health with 100
000031BE  6E00 0004                322      BGT     enemy_died  If the enemy health is greater than 100, their health has underflowed and they're dead
000031C2                           323      
000031C2  4E75                     324      rts
000031C4                           325      
000031C4                           326  enemy_died:
000031C4  6100 0186                327      bsr     endl            Break to a new line
000031C8                           328  
000031C8  43F9 0000464A            329      lea     battle_won_msg,A1   Load the won battle message
000031CE  103C 000E                330      move.b  #14,D0              Move the literal #14 to D0 for trap task #14
000031D2  4E4F                     331      trap    #15                 Display the message
000031D4                           332      
000031D4  11FC 0005 5FF3           333      move.b  #5,GAME_STATE   Set the game state mack to movement state
000031DA  564D                     334      add.w   #ALIVE,A5       Move from the enemy health to its alive status
000031DC  1ABC 0000                335      move.b  #0,(A5)         Set the enemy as dead
000031E0                           336      
000031E0  6100 044E                337      bsr     press_continue
000031E4                           338      
000031E4  6100 0138                339      bsr     clear_screen    Clear the screen
000031E8  6100 0008                340      bsr     draw            Draw the map for first frame back in movement
000031EC  6100 0028                341      bsr     draw_hud        Draw the hud for first frame back in movement
000031F0                           342      
000031F0  4E75                     343      rts
000031F2                           344      
000031F2                           345  *-------------------------------------------------------
000031F2                           346  *-----------------Draw Quest Updates--------------------
000031F2                           347  * Draw the game progress information, status regarding
000031F2                           348  * quest
000031F2                           349  *------------------------------------------------------- 
000031F2                           350  draw:
000031F2  0C38 0005 5FF3           351      CMP.B   #5,GAME_STATE   Check which state the game is in
000031F8  6700 046A                352      BEQ     draw_loop       If in the movement state, draw the map
000031FC  0C38 0006 5FF3           353      CMP.B   #6,GAME_STATE   Check which state the game is in
00003202  6700 0004                354      BEQ     draw_skeleton   If in the combat state, draw the enemy
00003206  4E75                     355      rts
00003208                           356      
00003208                           357  draw_skeleton:
00003208  43F9 000041B5            358      lea     skeleton_msg,A1 Load the skeleton message
0000320E  103C 000E                359      move.b  #14,D0          Move literal 14 for display message trap command
00003212  4E4F                     360      trap    #15             Display the loaded message
00003214                           361      
00003214  4E75                     362      rts
00003216                           363      
00003216                           364  draw_hud:
00003216  0C38 0005 5FF3           365      CMP.B   #5,GAME_STATE       Check which state the game is in
0000321C  6700 000E                366      BEQ     draw_player_info    If in the movement state, draw the player info
00003220  0C38 0006 5FF3           367      CMP.B   #6,GAME_STATE       Check which state the game is in
00003226  6700 003A                368      BEQ     draw_battle_info     If in the combat state, draw the combat info
0000322A                           369      
0000322A  4E75                     370      rts
0000322C                           371  
0000322C                           372  draw_player_info:
0000322C  323C 00FF                373      move.w  #255,D1         Move the word #255 to D1 to set the type of trap 11
00003230  103C 000B                374      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
00003234  4E4F                     375      trap    #15             Trap to get the cursor position in D1
00003236                           376      
00003236  3601                     377      move.w  D1,D3           Move the current cursor position to D3 for later
00003238                           378      
00003238  323C 3201                379      move.w  #$3201,D1           
0000323C  4E4F                     380      trap    #15             Set the cursor position with trap command 11
0000323E  4241                     381      clr     D1              Clear D1 of the cursor position
00003240                           382      
00003240  43F9 00004618            383      lea     health_msg,A1   Load the hud message
00003246  103C 000E                384      move.b  #14,D0          Move literal 14 for display message trap command
0000324A  4E4F                     385      trap    #15             Display the loaded message
0000324C                           386      
0000324C  1238 5FF0                387      move.b  PLAYER,D1       Move the player health value to D1 to display
00003250  103C 0003                388      move.b  #3,D0           Move literal 3 for display number trap command
00003254  4E4F                     389      trap    #15             Display the number in D1
00003256                           390      
00003256  3203                     391      move.w  D3,D1           Move the current cursor position to D3 for later
00003258                           392      
00003258  103C 000B                393      move.b  #11,D0          Move the byte #11 to D0 for trap command 11          
0000325C  4E4F                     394      trap    #15             Set the cursor position with trap command 11
0000325E                           395      
0000325E  4241                     396      clr     D1              Clear D1 for later use
00003260                           397      
00003260  4E75                     398      rts
00003262                           399  
00003262                           400  draw_battle_info:
00003262  323C 00FF                401      move.w  #255,D1         Move the word #255 to D1 to set the type of trap 11
00003266  103C 000B                402      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
0000326A  4E4F                     403      trap    #15             Trap to get the cursor position in D1
0000326C                           404      
0000326C  3601                     405      move.w  D1,D3           Move the current cursor position to D3 for later
0000326E                           406      
0000326E                           407      * Move cursor to draw player info
0000326E  323C 2001                408      move.w  #$2001,D1           
00003272  4E4F                     409      trap    #15             Set the cursor position with trap command 11
00003274  4241                     410      clr     D1              Clear D1 of the cursor position
00003276                           411      
00003276  43F9 00004618            412      lea     health_msg,A1   Load the hud message
0000327C  103C 000E                413      move.b  #14,D0          Move literal 14 for display message trap command
00003280  4E4F                     414      trap    #15             Display the loaded message
00003282                           415      
00003282  1238 5FF0                416      move.b  PLAYER,D1       Move the player health value to D1 to display
00003286  103C 0003                417      move.b  #3,D0           Move literal 3 for display number trap command
0000328A  4E4F                     418      trap    #15             Display the number in D1
0000328C                           419      
0000328C                           420      * Move the cursor to draw enemy info
0000328C  103C 000B                421      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
00003290  323C 2002                422      move.w  #$2002,D1       
00003294  4E4F                     423      trap    #15             Set the cursor position with trap command 11
00003296  4241                     424      clr     D1              Clear D1 of the cursor position
00003298                           425      
00003298  43F9 00004621            426      lea     enemy_health_msg,A1 Load the hud message
0000329E  103C 000E                427      move.b  #14,D0              Move literal 14 for display message trap command
000032A2  4E4F                     428      trap    #15                 Display the loaded message
000032A4                           429      
000032A4  1238 6000                430      move.b  FIRST_ENEMY,D1  Move the player health value to D1 to display
000032A8  103C 0003                431      move.b  #3,D0           Move literal 3 for display number trap command
000032AC  4E4F                     432      trap    #15             Display the number in D1
000032AE                           433      
000032AE                           434      * Move the cursor back to its previous position
000032AE  3203                     435      move.w  D3,D1           Move the previous cursor position back to D1
000032B0  103C 000B                436      move.b  #11,D0          Move the byte #11 to D0 for trap command 11          
000032B4  4E4F                     437      trap    #15             Set the cursor position with trap command 11
000032B6                           438      
000032B6  4241                     439      clr     D1              Clear D1 for later use
000032B8                           440      
000032B8  4E75                     441      rts
000032BA                           442  
000032BA                           443  *-------------------------------------------------------
000032BA                           444  *---Game Play (Quest Progress)--------------------------
000032BA                           445  *------------------------------------------------------- 
000032BA                           446  gameplay:
000032BA  6100 0090                447      bsr     endl        Break to a new line
000032BE  0C38 0000 5FF3           448      CMP.B   #0,GAME_STATE     Check which stage the game is in
000032C4  6700 FD5A                449      BEQ     pick_role   branch to the pick role subroutine
000032C8  0C38 0005 5FF3           450      CMP.B   #5,GAME_STATE     Check which stage the game is in
000032CE  6700 0092                451      BEQ     movement    branch to the movement subroutine
000032D2  0C38 0006 5FF3           452      CMP.B   #6,GAME_STATE     Check which stage the game is in
000032D8  6700 01D4                453      BEQ     combat      branch to the combat subroutine
000032DC  4E75                     454      rts                 Return from 'gameplay' subroutine
000032DE                           455  
000032DE                           456  *-------------------------------------------------------
000032DE                           457  *-----------------Heads Up Display (Score)--------------
000032DE                           458  * Retrieves the score from memory location
000032DE                           459  *-------------------------------------------------------   
000032DE                           460  hud:
000032DE                           461  
000032DE  6100 006C                462      bsr     endl
000032E2  6100 001C                463      bsr     decorate
000032E6  43F9 00003C42            464      lea     hud_msg,A1
000032EC  103C 000E                465      move.b  #14,D0
000032F0  4E4F                     466      trap    #15
000032F2  1213                     467      move.b  (A3),D1     retrieve the value A3 point to and move to D1
000032F4  103C 0003                468      move.b  #3,D0       move literal 3 to D0
000032F8  4E4F                     469      trap    #15         intrepret value in D0, which 3 which displays D1
000032FA  6100 0004                470      bsr     decorate
000032FE  4E75                     471      rts
00003300                           472  
00003300                           473  *-------------------------------------------------------
00003300                           474  *------------------Screen Decoration--------------------
00003300                           475  *-------------------------------------------------------
00003300                           476  decorate:
00003300  163C 003C                477      move.b  #60, D3
00003304  6100 0046                478      bsr     endl
00003308                           479  out:
00003308  43F9 00003C12            480      lea     loop_msg,A1
0000330E  103C 000E                481      move.b  #14,D0
00003312  4E4F                     482      trap    #15
00003314  5343                     483      sub     #1,D3   decrement loop counter
00003316  66F0                     484      bne     out     repeat until D0=0
00003318  6100 0032                485      bsr     endl
0000331C  4E75                     486      rts
0000331E                           487      
0000331E                           488  clear_screen: 
0000331E  103C 000B                489      move.b  #11,D0      clear screen
00003322  323C FF00                490      move.w  #$ff00,D1
00003326  4E4F                     491      trap    #15
00003328  4E75                     492      rts
0000332A                           493  *-------------------------------------------------------
0000332A                           494  *------------------------Replay-------------------------
0000332A                           495  *-------------------------------------------------------
0000332A                           496  replay:
0000332A  6100 0020                497      bsr     endl
0000332E  43F9 00003C14            498      lea     replay_msg,A1
00003334  103C 000E                499      move.b  #14,D0
00003338  4E4F                     500      trap    #15
0000333A                           501      
0000333A  103C 0004                502      move.b  #4,D0
0000333E  4E4F                     503      trap    #15
00003340                           504      
00003340  B27C 0000                505      cmp     #exit,D1
00003344  6700 FCC0                506      beq     end         if SR Z register contains 1 beq => Branch Equals
00003348  6100 FDD8                507      bsr     gameloop
0000334C                           508  
0000334C                           509  endl:
0000334C  48E7 8040                510      movem.l D0/A1,-(A7)
00003350  303C 000E                511      move    #14,D0
00003354  43F9 00003A68            512      lea     crlf,A1
0000335A  4E4F                     513      trap    #15
0000335C  4CDF 0201                514      movem.l (A7)+,D0/A1
00003360  4E75                     515      rts
00003362                           516          
00003362                           517  *-------------------------------------------------------
00003362                           518  *----------------------Manage Movement------------------
00003362                           519  *-------------------------------------------------------
00003362                           520  movement:
00003362  43F9 0000406A            521      lea     movement_msg,A1 Load the movement message
00003368  103C 000E                522      move.b  #14,D0          Move literal 14 for display message trap command
0000336C  4E4F                     523      trap    #15             Display the loaded message
0000336E                           524  
0000336E  7A04                     525      move.l  #4,D5           Move the number 4 to D5 to tell the program how many options there are
00003370                           526      
00003370  6100 FD3C                527      bsr     input           branch to the input subroutine
00003374  4E75                     528      rts
00003376                           529  
00003376                           530  *-------------------------------------------------------
00003376                           531  *-------------------Check Wall Collisions---------------
00003376                           532  *-------------------------------------------------------
00003376                           533  wall_collisions:
00003376                           534      *Check collisions in the movement direction
00003376  B23C 0001                535      CMP.B   #1,D1       Check the movement direction
0000337A  6700 001C                536      BEQ     move_north  Branch to Display the corridor type
0000337E                           537      
0000337E  B23C 0002                538      CMP.B   #2,D1       Check the movement direction
00003382  6700 0056                539      BEQ     move_south  Branch to Display the corridor type
00003386                           540      
00003386  B23C 0003                541      CMP.B   #3,D1       Check the movement direction
0000338A  6700 0090                542      BEQ     move_west   Branch to Display the corridor type
0000338E                           543      
0000338E  B23C 0004                544      CMP.B   #4,D1       Check the movement direction
00003392  6700 00C8                545      BEQ     move_east   Branch to Display the corridor type
00003396                           546      
00003396  4E75                     547      rts
00003398                           548      
00003398                           549  move_north:
00003398                           550      *Check if the tile is any of the corridor types with a wall at the top
00003398  0C16 0002                551      CMP.B   #2,(A6)
0000339C  6700 00FE                552      BEQ     movement_blocked
000033A0  0C16 0003                553      CMP.B   #3,(A6)
000033A4  6700 00F6                554      BEQ     movement_blocked
000033A8  0C16 0006                555      CMP.B   #6,(A6)
000033AC  6700 00EE                556      BEQ     movement_blocked
000033B0  0C16 0007                557      CMP.B   #7,(A6)
000033B4  6700 00E6                558      BEQ     movement_blocked
000033B8  0C16 000B                559      CMP.B   #11,(A6)
000033BC  6700 00DE                560      BEQ     movement_blocked
000033C0  0C16 000C                561      CMP.B   #12,(A6)
000033C4  6700 00D6                562      BEQ     movement_blocked
000033C8  0C16 000D                563      CMP.B   #13,(A6)
000033CC  6700 00CE                564      BEQ     movement_blocked
000033D0                           565      
000033D0  31CE 5FF6                566      move.w  A6,PLA_P_POS        Move the player's previous location to a memory address for storage
000033D4  9CFC 0010                567      sub     #16,A6              Move the player north
000033D8                           568      
000033D8  4E75                     569      rts
000033DA                           570      
000033DA                           571  move_south:
000033DA                           572      *Check if the tile is any of the corridor types with a wall at the bottom
000033DA  0C16 0002                573      CMP.B   #2,(A6)
000033DE  6700 00BC                574      BEQ     movement_blocked
000033E2  0C16 0004                575      CMP.B   #4,(A6)
000033E6  6700 00B4                576      BEQ     movement_blocked
000033EA  0C16 0005                577      CMP.B   #5,(A6)
000033EE  6700 00AC                578      BEQ     movement_blocked
000033F2  0C16 0009                579      CMP.B   #9,(A6)
000033F6  6700 00A4                580      BEQ     movement_blocked
000033FA  0C16 000B                581      CMP.B   #11,(A6)
000033FE  6700 009C                582      BEQ     movement_blocked
00003402  0C16 000D                583      CMP.B   #13,(A6)
00003406  6700 0094                584      BEQ     movement_blocked
0000340A  0C16 000E                585      CMP.B   #14,(A6)
0000340E  6700 008C                586      BEQ     movement_blocked
00003412                           587      
00003412  31CE 5FF6                588      move.w  A6,PLA_P_POS        Move the player's previous location to a memory address for storage
00003416  DCFC 0010                589      add     #16,A6              Move the player south
0000341A                           590      
0000341A  4E75                     591      rts
0000341C                           592  
0000341C                           593  move_west:
0000341C                           594      *Check if the tile is any of the corridor types with a wall to the left
0000341C  0C16 0001                595      CMP.B   #1,(A6)
00003420  6700 007A                596      BEQ     movement_blocked
00003424  0C16 0003                597      CMP.B   #3,(A6)
00003428  6700 0072                598      BEQ     movement_blocked
0000342C  0C16 0004                599      CMP.B   #4,(A6)
00003430  6700 006A                600      BEQ     movement_blocked
00003434  0C16 0008                601      CMP.B   #8,(A6)
00003438  6700 0062                602      BEQ     movement_blocked
0000343C  0C16 000B                603      CMP.B   #11,(A6)
00003440  6700 005A                604      BEQ     movement_blocked
00003444  0C16 000C                605      CMP.B   #12,(A6)
00003448  6700 0052                606      BEQ     movement_blocked
0000344C  0C16 000E                607      CMP.B   #14,(A6)
00003450  6700 004A                608      BEQ     movement_blocked
00003454                           609      
00003454  31CE 5FF6                610      move.w  A6,PLA_P_POS        Move the player's previous location to a memory address for storage
00003458  534E                     611      sub     #1,A6               Move the player west
0000345A                           612      
0000345A  4E75                     613      rts
0000345C                           614      
0000345C                           615  move_east:
0000345C                           616      *Check if the tile is any of the corridor types with a wall to the right
0000345C  0C16 0001                617      CMP.B   #1,(A6)
00003460  6700 003A                618      BEQ     movement_blocked
00003464  0C16 0005                619      CMP.B   #5,(A6)
00003468  6700 0032                620      BEQ     movement_blocked
0000346C  0C16 0006                621      CMP.B   #6,(A6)
00003470  6700 002A                622      BEQ     movement_blocked
00003474  0C16 000A                623      CMP.B   #10,(A6)
00003478  6700 0022                624      BEQ     movement_blocked
0000347C  0C16 000C                625      CMP.B   #12,(A6)
00003480  6700 001A                626      BEQ     movement_blocked
00003484  0C16 000D                627      CMP.B   #13,(A6)
00003488  6700 0012                628      BEQ     movement_blocked
0000348C  0C16 000E                629      CMP.B   #14,(A6)
00003490  6700 000A                630      BEQ     movement_blocked
00003494                           631      
00003494  31CE 5FF6                632      move.w  A6,PLA_P_POS            Move the player's previous location to a memory address for storage
00003498  524E                     633      add     #1,A6                   Move the player east
0000349A                           634      
0000349A  4E75                     635      rts
0000349C                           636  
0000349C                           637  movement_blocked:
0000349C  43F9 000040E3            638      lea     movement_blocked_msg,A1 Load the message
000034A2  103C 000E                639      move.b  #14,D0                  Move the trap command to display a message
000034A6  4E4F                     640      trap    #15                     Display the movement blocked message
000034A8  6100 0186                641      bsr     press_continue          Pause the game until a key is pressed
000034AC                           642      
000034AC  4E75                     643      rts                             Return from the subroutine
000034AE                           644      
000034AE                           645  *-------------------------------------------------------
000034AE                           646  *---------------------Manage Combat---------------------
000034AE                           647  *-------------------------------------------------------
000034AE                           648  combat:
000034AE  6100 FE9C                649      bsr endl                Break to a new line
000034B2                           650  
000034B2  43F9 0000416C            651      lea     combat_msg,A1   Load the combat message
000034B8  103C 000E                652      move.b  #14,D0          Move literal 14 for display message trap command
000034BC  4E4F                     653      trap    #15             Display the loaded message
000034BE                           654  
000034BE  7A04                     655      move.l  #4,D5           Move the number 4 to D5 to tell the program how many options there are
000034C0                           656      
000034C0  6100 FBEC                657      bsr     input           branch to the input subroutine
000034C4                           658      
000034C4  B23C 0001                659      CMP.B   #1,D1
000034C8  6700 001C                660      BEQ     block_counter
000034CC  B23C 0002                661      CMP.B   #2,D1
000034D0  6700 002E                662      BEQ     cast_magic
000034D4  B23C 0003                663      CMP.B   #3,D1
000034D8  6700 0040                664      BEQ     melee_attack
000034DC  B23C 0004                665      CMP.B   #4,D1
000034E0  6700 0052                666      BEQ     try_run
000034E4                           667      
000034E4  4E75                     668      rts
000034E6                           669      
000034E6                           670  block_counter:
000034E6  6100 0160                671      bsr     random_number       Get a random number 1-100
000034EA                           672      
000034EA  B47C 0021                673      CMP.W   #33,D2              Compare random with #33
000034EE  6F00 008C                674      BLE     both_block          Enemy tries to block - attack failed
000034F2  B47C 0042                675      CMP.W   #66,D2              Compare random with #66
000034F6  6F00 010C                676      BLE     hit_by_magic        Enemy casts magic - player takes damage      
000034FA  6E00 00DE                677      BGT     hit_against_melee   Enemy tried to lunge - enemy takes damage
000034FE                           678      
000034FE  4E75                     679      rts                         Return from subroutine
00003500                           680      
00003500                           681  cast_magic:
00003500  6100 0146                682      bsr     random_number       Get a random number 1-100
00003504                           683  
00003504  B47C 0021                684      CMP.W   #33,D2              Compare random with #33
00003508  6F00 00A8                685      BLE     hit_against_block    Enemy blocks - enemy takes damage
0000350C  B47C 0042                686      CMP.W   #66,D2              Compare random with #66
00003510  6F00 007C                687      BLE     both_cast_magic     Enemy casts magic - attack fails     
00003514  6E00 0104                688      BGT     hit_by_melee        Enemy lunges forward - player takes damage
00003518                           689      
00003518  4E75                     690      rts                         Return from subroutine
0000351A                           691  
0000351A                           692  melee_attack:
0000351A  6100 012C                693      bsr     random_number       Get a random number 1-100
0000351E                           694  
0000351E  B47C 0021                695      CMP.W   #33,D2              Compare random with #33
00003522  6F00 00CA                696      BLE     hit_by_counter      Enemy blocks and counters - player takes damage
00003526  B47C 0042                697      CMP.W   #66,D2              Compare random with #66
0000352A  6F00 009A                698      BLE     hit_against_magic   Enemy casts magic - player takes damage     
0000352E  6E00 0070                699      BGT     both_melee          Enemy lunges forward - attack fails
00003532                           700      
00003532  4E75                     701      rts                         Return from subroutine
00003534                           702  
00003534                           703  try_run:
00003534  6100 0112                704      bsr     random_number
00003538                           705      
00003538  B47C 0028                706      CMP.W   #40,D2
0000353C  6D00 000C                707      BLT     escape_attack
00003540  6C00 0024                708      BGE     fail_escape
00003544                           709      
00003544  6100 00EA                710      bsr     press_continue
00003548                           711      
00003548  4E75                     712      rts
0000354A                           713      
0000354A                           714  escape_attack:
0000354A  3C78 5FF6                715      move.w  PLA_P_POS,A6    Move the player to their position before the battle
0000354E  11FC 0005 5FF3           716      move.b  #5,GAME_STATE   Switch game state
00003554                           717      
00003554  43F9 000042DC            718      lea     escape_msg,A1   Load escape message
0000355A  103C 000E                719      move.b  #14,D0          Move literal for trap command
0000355E  4E4F                     720      trap    #15             Trap 15 to display messgae
00003560                           721      
00003560  6100 00CE                722      bsr     press_continue  Pause until the player presses to continue
00003564                           723      
00003564  4E75                     724      rts                     Return from subroutine
00003566                           725      
00003566                           726  fail_escape:
00003566  43F9 000042F7            727      lea     fail_escape_msg,A1  Load fail escape message
0000356C  103C 000E                728      move.b  #14,D0              Move literal for trap command
00003570  4E4F                     729      trap    #15                 Trap 15 to display message
00003572                           730      
00003572  5338 5FF0                731      sub.b   #1,PLAYER           Remove one from the player's health
00003576                           732      
00003576  6100 00B8                733      bsr     press_continue      Pause until the player presses to continue
0000357A  4E75                     734      rts
0000357C                           735      
0000357C                           736  both_block:
0000357C  103C 000E                737      move.b  #14,D0
00003580  43F9 00004332            738      lea     both_block_msg,A1
00003586  4E4F                     739      trap    #15
00003588                           740      
00003588  6100 00A6                741      bsr     press_continue
0000358C  4E75                     742      rts
0000358E                           743      
0000358E                           744  both_cast_magic:
0000358E  103C 000E                745      move.b  #14,D0
00003592  43F9 00004357            746      lea     both_cast_magic_msg,A1
00003598  4E4F                     747      trap    #15
0000359A                           748      
0000359A  6100 0094                749      bsr     press_continue
0000359E  4E75                     750      rts
000035A0                           751  
000035A0                           752  both_melee:
000035A0  103C 000E                753      move.b  #14,D0
000035A4  43F9 000043AC            754      lea     both_melee_msg,A1
000035AA  4E4F                     755      trap    #15  
000035AC                           756      
000035AC  6100 0082                757      bsr     press_continue
000035B0  4E75                     758      rts
000035B2                           759  
000035B2                           760  hit_against_block:
000035B2  103C 000E                761      move.b  #14,D0
000035B6  43F9 000043F5            762      lea     hit_against_block_msg,A1
000035BC  4E4F                     763      trap    #15  
000035BE                           764      
000035BE  5315                     765      sub.b   #1,(A5)         Remove one from the enemy's health
000035C0                           766      
000035C0  6100 006E                767      bsr     press_continue
000035C4  4E75                     768      rts
000035C6                           769  
000035C6                           770  hit_against_magic:
000035C6  103C 000E                771      move.b  #14,D0
000035CA  43F9 0000443D            772      lea     hit_against_magic_msg,A1
000035D0  4E4F                     773      trap    #15
000035D2                           774      
000035D2  5315                     775      sub.b   #1,(A5)         Remove one from the enemy's health
000035D4                           776      
000035D4  6100 005A                777      bsr     press_continue
000035D8  4E75                     778      rts
000035DA                           779  
000035DA                           780  hit_against_melee:
000035DA  103C 000E                781      move.b  #14,D0
000035DE  43F9 000044A1            782      lea     hit_against_melee_msg,A1
000035E4  4E4F                     783      trap    #15
000035E6                           784      
000035E6  5315                     785      sub.b   #1,(A5)         Remove one from the enemy's health
000035E8                           786      
000035E8  6100 0046                787      bsr     press_continue
000035EC  4E75                     788      rts
000035EE                           789  
000035EE                           790  hit_by_counter:
000035EE  103C 000E                791      move.b  #14,D0
000035F2  43F9 000044F7            792      lea     hit_by_counter_msg,A1
000035F8  4E4F                     793      trap    #15  
000035FA                           794      
000035FA  5338 5FF0                795      sub.b   #1,PLAYER           Remove one from the player's health
000035FE                           796      
000035FE  6100 0030                797      bsr     press_continue
00003602  4E75                     798      rts
00003604                           799  
00003604                           800  hit_by_magic:
00003604  103C 000E                801      move.b  #14,D0
00003608  43F9 0000455A            802      lea     hit_by_magic_msg,A1
0000360E  4E4F                     803      trap    #15  
00003610                           804      
00003610  5338 5FF0                805      sub.b   #1,PLAYER           Remove one from the player's health
00003614                           806      
00003614  6100 001A                807      bsr     press_continue
00003618  4E75                     808      rts
0000361A                           809  
0000361A                           810  hit_by_melee:
0000361A  103C 000E                811      move.b  #14,D0
0000361E  43F9 000045CA            812      lea     hit_by_melee_msg,A1
00003624  4E4F                     813      trap    #15
00003626                           814      
00003626  5338 5FF0                815      sub.b   #1,PLAYER           Remove one from the player's health
0000362A                           816      
0000362A  6100 0004                817      bsr     press_continue
0000362E  4E75                     818      rts
00003630                           819  
00003630                           820  *-------------------------------------------------------
00003630                           821  *-------------------Misc Subroutines--------------------
00003630                           822  *-------------------------------------------------------
00003630                           823  press_continue:
00003630  6100 FD1A                824      bsr     endl
00003634                           825  
00003634  43F9 000040FE            826      lea     continue_msg,A1 Load message into A1
0000363A  103C 000E                827      move.b  #14,D0          Move the trap command to display a message
0000363E  4E4F                     828      trap    #15             display the "press any ket to continue" text
00003640                           829      
00003640  103C 0004                830      move.b  #4,D0           Move the trap command to take input
00003644  4E4F                     831      trap    #15             take input to freeze the game
00003646  4E75                     832      rts                     Return from the 'press continue' subroutine
00003648                           833      
00003648                           834  random_number:              *Psuedo random number generator, courtesy of Pdraig
00003648  103C 0008                835      move.b  #8,D0
0000364C  4E4F                     836      trap    #15
0000364E  C2BC 005FFFFF            837      and.l   #$5FFFFF,d1     prevent overflow in divu
00003654  82FC 0064                838      divu    #100,D1         time count / 100
00003658  4841                     839      swap    D1              swap upper and lower words of D1 to put remainder in low word
0000365A  5241                     840      addq.w  #1,D1           d1.w contains number from 1 to 100
0000365C  3401                     841      move    D1,D2           d2 = d1
0000365E  4281                     842      clr.l   D1
00003660                           843      
00003660  4E75                     844      rts                     Returns from random generation subroutine
00003662                           845      
00003662                           846  return:   *Subroutine to branch to to break out of a subroutine when a condition is met
00003662  4E75                     847      rts
00003664                           848      
00003664                           849  *-------------------------------------------------------
00003664                           850  *----------------------Draw loop------------------------
00003664                           851  *-------------------------------------------------------
00003664                           852  draw_loop:
00003664  45F8 5000                853      lea     $5000,A2        Load starting memory location into A7
00003668  1C3C 0000                854      move.b  #0,D6           Data register used for rows
0000366C  1E3C 0000                855      move.b  #0,D7           Data register used for columns
00003670  7200                     856      move.l  #0,D1           Clear the D1 data register
00003672                           857      
00003672  6100 0004                858      bsr     loop_rows       Loop for every row
00003676  4E75                     859      rts
00003678                           860      
00003678                           861  loop_rows:
00003678  BC7C 0016                862      CMP     #22,D6          Check the rows don't go out of bounds
0000367C  6E00 002C                863      BGT     end_loop        If the rows are greater than 22 end the loop
00003680                           864      
00003680  1E3C 0000                865      move.b  #0,D7           Reset to column 0
00003684  6100 000A                866      bsr     loop_columns    Loop for every column
00003688                           867      
00003688  5206                     868      add.b   #1,D6           Add to the rows
0000368A                           869      
0000368A  6100 FCC0                870      bsr     endl            Break to the next line
0000368E  60E8                     871      bra     loop_rows       Loop through the rows again
00003690                           872      
00003690                           873  loop_columns:
00003690  BE3C 000F                874      CMP.B   #15,D7              Check the rows don't go out of bounds
00003694  6E00 0014                875      BGT     end_loop            If the rows are greater than 22 end the loop
00003698                           876      
00003698  6100 0012                877      bsr     draw_tile           Draw the current tile
0000369C  6100 00B8                878      bsr     check_for_player    Draw the player in the current tile if they're there
000036A0  6100 0108                879      bsr     check_for_enemy
000036A4                           880      
000036A4  5207                     881      add.b   #1,D7               Add to the column count
000036A6  524A                     882      add     #1,A2               Move to the next memory location
000036A8  60E6                     883      bra     loop_columns        Loop the columns again
000036AA                           884  
000036AA                           885  end_loop:
000036AA  4E75                     886      rts                         Return once a loop is finished
000036AC                           887      
000036AC                           888  *-------------------------------------------------------
000036AC                           889  *----------------------Draw tile------------------------
000036AC                           890  *-------------------------------------------------------
000036AC                           891  *Draws the tile at the address in the address register A2
000036AC                           892  draw_tile:
000036AC  0C12 00FF                893      CMP.B   #255,(A2)           Check if the value is undifined
000036B0  6700 005E                894      BEQ     draw_blocked_tile   Draw the blank tile
000036B4                           895      
000036B4  0C12 0001                896      CMP.B   #1,(A2)
000036B8  6700 0064                897      BEQ     draw_both_tile
000036BC  0C12 0003                898      CMP.B   #3,(A2)
000036C0  6700 006A                899      BEQ     draw_left_tile
000036C4  0C12 0004                900      CMP.B   #4,(A2)
000036C8  6700 0062                901      BEQ     draw_left_tile
000036CC  0C12 0005                902      CMP.B   #5,(A2)
000036D0  6700 0068                903      BEQ     draw_right_tile
000036D4  0C12 0006                904      CMP.B   #6,(A2)
000036D8  6700 0060                905      BEQ     draw_right_tile
000036DC  0C12 0008                906      CMP.B   #8,(A2)
000036E0  6700 004A                907      BEQ     draw_left_tile
000036E4  0C12 000A                908      CMP.B   #10,(A2)
000036E8  6700 0050                909      BEQ     draw_right_tile
000036EC  0C12 000B                910      CMP.B   #11,(A2)
000036F0  6700 003A                911      BEQ     draw_left_tile
000036F4  0C12 000C                912      CMP.B   #12,(A2)
000036F8  6700 0024                913      BEQ     draw_both_tile
000036FC  0C12 000D                914      CMP.B   #13,(A2)
00003700  6700 0038                915      BEQ     draw_right_tile
00003704  0C12 000E                916      CMP.B   #14,(A2)
00003708  6700 0014                917      BEQ     draw_both_tile
0000370C                           918      
0000370C  6000 003A                919      BRA     draw_blank_tile     Draw the blank tile
00003710                           920      
00003710                           921  draw_blocked_tile:
00003710  43F9 0000412C            922      lea     blocked_tile,A1
00003716  103C 000E                923      move.b  #14,D0
0000371A  4E4F                     924      trap    #15
0000371C  4E75                     925      rts
0000371E                           926      
0000371E                           927  draw_both_tile:
0000371E  43F9 00004120            928      lea     both_tile,A1
00003724  103C 000E                929      move.b  #14,D0
00003728  4E4F                     930      trap    #15
0000372A  4E75                     931      rts
0000372C                           932      
0000372C                           933  draw_left_tile:
0000372C  43F9 00004124            934      lea     left_tile,A1
00003732  103C 000E                935      move.b  #14,D0
00003736  4E4F                     936      trap    #15
00003738  4E75                     937      rts
0000373A                           938      
0000373A                           939  draw_right_tile:
0000373A  43F9 00004128            940      lea     right_tile,A1
00003740  103C 000E                941      move.b  #14,D0
00003744  4E4F                     942      trap    #15
00003746  4E75                     943      rts
00003748                           944      
00003748                           945  draw_blank_tile:
00003748  43F9 0000411C            946      lea     blank_tile,A1
0000374E  103C 000E                947      move.b  #14,D0
00003752  4E4F                     948      trap    #15
00003754  4E75                     949      rts
00003756                           950      
00003756                           951  check_for_player:
00003756  B4CE                     952      CMP.W   A6,A2
00003758  6700 0004                953      BEQ     draw_player
0000375C  4E75                     954      rts
0000375E                           955      
0000375E                           956  draw_player:
0000375E  323C 00FF                957      move.w  #255,D1         Move the word #255 to D1 to set the type of trap 11
00003762  103C 000B                958      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
00003766  4E4F                     959      trap    #15             Trap to get the cursor position in D1
00003768                           960      
00003768  0441 0200                961      sub.w   #512,D1         Move the cursor back by two columns
0000376C  4E4F                     962      trap    #15             Set the cursor position with trap command 11
0000376E                           963      
0000376E  2601                     964      move.l  D1,D3          Move the value in D1 to D3 for storage
00003770                           965      
00003770  103C 0015                966      move.b  #21,D0          Move #21 to D0 for trap command 21
00003774  223C 0000FF00            967      move.l  #GREEN,D1       Move the colour green to D1
0000377A  243C 01090000            968      move.l  #FONT,D2        Move the font to D2
00003780  4E4F                     969      trap    #15             Set the colour
00003782                           970      
00003782  43F9 00004130            971      lea     player_mark,A1      load the player symbol
00003788  103C 000E                972      move.b  #14,D0              Move #14 to D0 for trap command 14
0000378C  4E4F                     973      trap    #15                 Draw the player mark
0000378E                           974      
0000378E  103C 0015                975      move.b  #21,D0          Move #21 to D0 for trap command 21
00003792  223C 00FFFFFF            976      move.l  #WHITE,D1       Move the colour green to D1
00003798  4E4F                     977      trap    #15             Set the colour
0000379A  4281                     978      clr.l   D1
0000379C                           979      
0000379C  2203                     980      move.l  D3,D1           Move the value in D3 to D1 for previous cursor position
0000379E                           981      
0000379E  0641 0200                982      add.w   #512,D1         Move the cursor position two columns forward
000037A2  103C 000B                983      move.b  #11,D0          Move byte #11 for trap command 11 
000037A6  4E4F                     984      trap    #15             Set the cursor position
000037A8                           985      
000037A8  4E75                     986      rts
000037AA                           987      
000037AA                           988  check_for_enemy:
000037AA  4BF8 6000                989      lea     FIRST_ENEMY,A5  Load the memory address of the first enemy
000037AE  564D                     990      add.w   #ALIVE,A5       Add to the enemy memory address to get to its alive state
000037B0  0C15 0000                991      CMP.B   #0,(A5)         Check if the enemy is alive
000037B4  6700 FEAC                992      BEQ     return          Return from the subroutine if not
000037B8                           993      
000037B8  3238 6004                994      move.w  $6004,D1
000037BC  3041                     995      move.w  D1,A0
000037BE  B4C8                     996      CMP.W   A0,A2
000037C0  6700 0004                997      BEQ     draw_enemy
000037C4  4E75                     998      rts
000037C6                           999      
000037C6                          1000  draw_enemy:
000037C6  323C 00FF               1001      move.w  #255,D1         Move the word #255 to D1 to set the type of trap 11
000037CA  103C 000B               1002      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
000037CE  4E4F                    1003      trap    #15             Trap to get the cursor position in D1
000037D0                          1004      
000037D0  0441 0200               1005      sub.w   #512,D1         Move the cursor back by two columns
000037D4  4E4F                    1006      trap    #15             Set the cursor position with trap command 11
000037D6                          1007      
000037D6  2601                    1008      move.l  D1,D3          Move the value in D1 to D3 for storage
000037D8                          1009      
000037D8  103C 0015               1010      move.b  #21,D0          Move #21 to D0 for trap command 21
000037DC  223C 000000FF           1011      move.l  #RED,D1       Move the colour green to D1
000037E2  243C 01090000           1012      move.l  #FONT,D2        Move the font to D2
000037E8  4E4F                    1013      trap    #15             Set the colour
000037EA                          1014      
000037EA  43F9 00004132           1015      lea     enemy_mark,A1      load the player symbol
000037F0  103C 000E               1016      move.b  #14,D0              Move #14 to D0 for trap command 14
000037F4  4E4F                    1017      trap    #15                 Draw the player mark
000037F6                          1018      
000037F6  103C 0015               1019      move.b  #21,D0          Move #21 to D0 for trap command 21
000037FA  223C 00FFFFFF           1020      move.l  #WHITE,D1       Move the colour green to D1
00003800  4E4F                    1021      trap    #15             Set the colour
00003802  4281                    1022      clr.l   D1
00003804                          1023      
00003804  2203                    1024      move.l  D3,D1           Move the value in D3 to D1 for previous cursor position
00003806                          1025      
00003806  0641 0200               1026      add.w   #512,D1         Move the cursor position two columns forward
0000380A  103C 000B               1027      move.b  #11,D0          Move byte #11 for trap command 11 
0000380E  4E4F                    1028      trap    #15             Set the cursor position
00003810                          1029      
00003810  4E75                    1030      rts
00003812                          1031      
00003812                          1032  *-------------------------------------------------------
00003812                          1033  *-------------------Setup the world---------------------
00003812                          1034  *-------------------------------------------------------
00003812                          1035  setup_world:
00003812  11FC 000E 514A          1036      move.b  #14,$514A   Setup the starting corridor
00003818  11FC 0007 513A          1037      move.b  #7,$513A    T junction upwards from starting corridor
0000381E  11FC 0004 5139          1038      move.b  #4,$5139    Left corridor
00003824  11FC 0001 5129          1039      move.b  #1,$5129
0000382A  11FC 0001 5119          1040      move.b  #1,$5119
00003830                          1041      
00003830  11FC 0004 5108          1042      move.b  #4,$5108    First shop
00003836  11FC 0000 5109          1043      move.b  #0,$5109    Entrance
0000383C  11FC 0005 510A          1044      move.b  #5,$510A
00003842  11FC 0008 50F8          1045      move.b  #8,$50F8
00003848  11FC 0000 50F9          1046      move.b  #0,$50F9
0000384E  11FC 000A 50FA          1047      move.b  #10,$50FA
00003854  11FC 0003 50E8          1048      move.b  #3,$50E8
0000385A  11FC 0007 50E9          1049      move.b  #7,$50E9
00003860  11FC 0006 50EA          1050      move.b  #6,$50EA
00003866                          1051      
00003866  11FC 0005 513B          1052      move.b  #5,$513B    Right corridor
0000386C  11FC 0001 512B          1053      move.b  #1,$512B
00003872  11FC 0001 511B          1054      move.b  #1,$511B
00003878  11FC 0008 510B          1055      move.b  #8,$510B    Path continues up with a turn off to the right
0000387E                          1056      
0000387E  11FC 0002 510C          1057      move.b  #2,$510C    Right path
00003884  11FC 0002 510D          1058      move.b  #2,$510D    Continue right
0000388A  11FC 0005 510E          1059      move.b  #5,$510E    Path upwards and to the left
00003890  11FC 0001 50FE          1060      move.b  #1,$50FE    Leads upwards into a room
00003896                          1061      
00003896  11FC 0004 50ED          1062      move.b  #4,$50ED    First monster room
0000389C  11FC 0000 50EE          1063      move.b  #0,$50EE    Entrance
000038A2  11FC 0005 50EF          1064      move.b  #5,$50EF
000038A8  11FC 0008 50DD          1065      move.b  #8,$50DD
000038AE  11FC 0000 50DE          1066      move.b  #0,$50DE
000038B4  11FC 000A 50DF          1067      move.b  #10,$50DF
000038BA  11FC 0003 50CD          1068      move.b  #3,$50CD
000038C0  11FC 0007 50CE          1069      move.b  #7,$50CE
000038C6  11FC 0006 50CF          1070      move.b  #6,$50CF
000038CC                          1071      
000038CC  11FC 0001 50FB          1072      move.b  #1,$50FB    Path that continues up
000038D2  11FC 0001 50EB          1073      move.b  #1,$50EB    Path continues upwards
000038D8  11FC 0001 50DB          1074      move.b  #1,$50DB
000038DE                          1075      
000038DE                          1076      *Bottom row of room
000038DE  11FC 0004 50C8          1077      move.b  #4,$50C8    Large monster room with locked door
000038E4  11FC 0009 50C9          1078      move.b  #9,$50C9
000038EA  11FC 0009 50CA          1079      move.b  #9,$50CA
000038F0  11FC 0000 50CB          1080      move.b  #0,$50CB    Entrance
000038F6  11FC 0005 50CC          1081      move.b  #5,$50CC
000038FC                          1082      *Middle row of room
000038FC  11FC 0000 50B8          1083      move.b  #0,$50B8    Exit to the left
00003902  11FC 0000 50B9          1084      move.b  #0,$50B9
00003908  11FC 0000 50BA          1085      move.b  #0,$50BA
0000390E  11FC 0000 50BB          1086      move.b  #0,$50BB
00003914  11FC 000A 50BC          1087      move.b  #10,$50BC
0000391A                          1088      *Top row of room
0000391A  11FC 0003 50A8          1089      move.b  #3,$50A8
00003920  11FC 0007 50A9          1090      move.b  #7,$50A9
00003926  11FC 0007 50AA          1091      move.b  #7,$50AA
0000392C  11FC 0007 50AB          1092      move.b  #7,$50AB    Locked door
00003932  11FC 0006 50AC          1093      move.b  #6,$50AC
00003938                          1094      
00003938  11FC 0002 50B7          1095      move.b  #2,$50B7    Exit large room leftwards
0000393E  11FC 0002 50B6          1096      move.b  #2,$50B6    Continue to the left
00003944  11FC 0007 50B5          1097      move.b  #7,$50B5    Continue to the left and a path downwards
0000394A  11FC 0002 50B4          1098      move.b  #2,$50B4    Continue to the left
00003950                          1099      
00003950  11FC 0003 50A1          1100      move.b  #3,$50A1    Room to the left
00003956  11FC 0007 50A2          1101      move.b  #7,$50A2
0000395C  11FC 0006 50A3          1102      move.b  #6,$50A3
00003962  11FC 0008 50B1          1103      move.b  #8,$50B1
00003968  11FC 0000 50B2          1104      move.b  #0,$50B2
0000396E  11FC 0000 50B3          1105      move.b  #0,$50B3    Entrance to the right
00003974  11FC 0004 50C1          1106      move.b  #4,$50C1
0000397A  11FC 0009 50C2          1107      move.b  #9,$50C2
00003980  11FC 0005 50C3          1108      move.b  #5,$50C3
00003986                          1109      
00003986  11FC 0001 50C5          1110      move.b  #1,$50C5    Path leading downwards
0000398C  11FC 0001 50D5          1111      move.b  #1,$50D5
00003992  11FC 000A 50E5          1112      move.b  #10,$50E5   Path leading downward and to the left
00003998  11FC 0002 50E4          1113      move.b  #2,$50E4    Path on the left
0000399E  11FC 0002 50E3          1114      move.b  #2,$50E3
000039A4  11FC 0003 50E2          1115      move.b  #3,$50E2    Path takes a turn downwards
000039AA  11FC 0001 50F2          1116      move.b  #1,$50F2    Path continues downwards
000039B0                          1117      
000039B0  11FC 0003 5101          1118      move.b  #3,$5101    Regular enemy room
000039B6  11FC 0000 5102          1119      move.b  #0,$5102    Entrance
000039BC  11FC 0006 5103          1120      move.b  #6,$5103
000039C2  11FC 0008 5111          1121      move.b  #8,$5111
000039C8  11FC 0000 5112          1122      move.b  #0,$5112
000039CE  11FC 000A 5113          1123      move.b  #10,$5113
000039D4  11FC 0004 5121          1124      move.b  #4,$5121
000039DA  11FC 0009 5122          1125      move.b  #9,$5122
000039E0  11FC 000A 5123          1126      move.b  #10,$5123   Exit at the bottom
000039E6                          1127      
000039E6  11FC 0001 50F5          1128      move.b  #1,$50F5    Path leading downward
000039EC  11FC 0001 5105          1129      move.b  #1,$5105
000039F2  11FC 0001 5115          1130      move.b  #1,$5115
000039F8  11FC 0001 5125          1131      move.b  #1,$5125
000039FE                          1132      
000039FE                          1133      *Top row of room
000039FE  11FC 0008 5133          1134      move.b  #8,$5133    Large enemy room - Exit at top
00003A04  11FC 0007 5134          1135      move.b  #7,$5134
00003A0A  11FC 0000 5135          1136      move.b  #0,$5135    Entrance
00003A10  11FC 0006 5136          1137      move.b  #6,$5136
00003A16                          1138      
00003A16                          1139      *Middle row of room
00003A16  11FC 0008 5143          1140      move.b  #8,$5143
00003A1C  11FC 0000 5144          1141      move.b  #0,$5144
00003A22  11FC 0000 5145          1142      move.b  #0,$5145
00003A28  11FC 000A 5146          1143      move.b  #10,$5146
00003A2E                          1144      
00003A2E                          1145      *Bottom row of room
00003A2E  11FC 0004 5153          1146      move.b  #4,$5153
00003A34  11FC 0009 5154          1147      move.b  #9,$5154
00003A3A  11FC 0009 5155          1148      move.b  #9,$5155
00003A40  11FC 0005 5156          1149      move.b  #5,$5156
00003A46                          1150      
00003A46  4E75                    1151      rts
00003A48                          1152  
00003A48                          1153  setup_enemies:
00003A48  11FC 0001 6000          1154      move.b  #1,$6000    Health - Setup the first enemy
00003A4E  11FC 0001 6001          1155      move.b  #1,$6001    Damage/level
00003A54  11FC 0001 6002          1156      move.b  #1,$6002    Class type (Knight)
00003A5A  11FC 0001 6003          1157      move.b  #1,$6003    Alive state (Alive)
00003A60  31FC 513A 6004          1158      move.w  #$513A,$6004  Move enemy coordinates
00003A66                          1159      
00003A66  4E75                    1160      rts
00003A68                          1161      
00003A68                          1162      
00003A68                          1163  *-------------------------------------------------------
00003A68                          1164  *-------------------Data Delarations--------------------
00003A68                          1165  *-------------------------------------------------------
00003A68                          1166  
00003A68= 0D 0A 00                1167  crlf:           dc.b    $0D,$0A,0
00003A6B= 2A 2A 2A 2A 2A 2A ...   1168  welcome_msg:    dc.b    '************************************************************'
00003AA7= 0D 0A                   1169                  dc.b    $0D,$0A
00003AA9= 41 76 61 6C 6F 6E ...   1170                  dc.b    'Avalon: The Legend Lives'
00003AC1= 0D 0A                   1171                  dc.b    $0D,$0A
00003AC3= 2A 2A 2A 2A 2A 2A ...   1172                  dc.b    '************************************************************'
00003AFF= 0D 0A 00                1173                  dc.b    $0D,$0A,0
00003B02= 46 65 65 64 20 6C ...   1174  potion_msg:     dc.b    'Feed load (each horse needs at least 100 units of feed)'
00003B39= 0D 0A                   1175                  dc.b    $0D,$0A
00003B3B= 45 6E 74 65 72 20 ...   1176                  dc.b    'Enter feed load : ',0
00003B4E= 4E 75 6D 62 65 72 ...   1177  potions_msg:    dc.b    'Number of potions : ',0
00003B63= 45 61 63 68 20 71 ...   1178  weapons_msg:    dc.b    'Each quest need at least 2 Weapons'
00003B85= 0D 0A                   1179                  dc.b    $0D,$0A
00003B87= 6D 69 6E 69 6D 75 ...   1180                  dc.b    'minimum requirement is 2 i.e. Sword x 1 and Speer x 1.'
00003BBD= 0D 0A                   1181                  dc.b    $0D,$0A
00003BBF= 45 6E 74 65 72 20 ...   1182                  dc.b    'Enter # of weapons : ',0
00003BD5= 41 64 64 20 47 61 ...   1183  gameplay_msg:   dc.b    'Add Gameplay !',0
00003BE4= 55 70 64 61 74 65 ...   1184  update_msg:     dc.b    'Update Gameplay !',0
00003BF6= 44 72 61 77 20 53 ...   1185  draw_msg:       dc.b    'Draw Screen !',0
00003C04= 53 74 72 69 6B 65 ...   1186  hit_msg:        dc.b    'Strike!',0
00003C0C= 4D 69 73 73 21 00       1187  miss_msg:       dc.b    'Miss!',0
00003C12= 2E 00                   1188  loop_msg:       dc.b    '.',0
00003C14= 45 6E 74 65 72 20 ...   1189  replay_msg:     dc.b    'Enter 0 to Quit any other number to replay : ',0
00003C42= 53 63 6F 72 65 20 ...   1190  hud_msg:        dc.b    'Score : ',0
00003C4B                          1191  
00003C4C                          1192  health:     ds.w    1
00003C4E                          1193  score:      ds.w    1 reserve space for score
00003C50                          1194  
00003C50= 59 6F 75 20 61 77 ...   1195  wake_up_msg:    dc.b    'You awake in a room, on a bed of red velvet, with no memory',$0D,$0A
00003C8D= 6F 66 20 68 6F 77 ...   1196                  dc.b    'of how you got here. You climb from the frame and look in a nearby mirror',$0D,$0A,0
00003CD9= 31 3E 20 59 6F 75 ...   1197  pick_role_msg:  dc.b    '1> You wear armour of polished iron, a short sword and heavy shield laying',$0D,$0A
00003D25= 63 6C 6F 73 65 20 ...   1198                  dc.b    'close by. (Knight class)',$0D,$0A,$0D,$0A
00003D41= 32 3E 20 59 6F 75 ...   1199                  dc.b    '2> You wear a cloak with mystic symbols sewn into the fabrics, an ancient',$0D,$0A
00003D8C= 6C 6F 6F 6B 69 6E ...   1200                  dc.b    'looking staff lays near. (Mage class)',$0D,$0A,$0D,$0A
00003DB5= 33 3E 20 59 6F 75 ...   1201                  dc.b    '3> You wear tight, well-fitting leather armour with reminents of black dye',$0D,$0A
00003E01= 73 74 61 69 6E 65 ...   1202                  dc.b    'stained to the material. Two knives are fastened to your belt. (Rogue class)',$0D,$0A,0
00003E50= 45 6E 74 65 72 20 ...   1203  input_nums_msg:  dc.b    'Enter num between 1 and ',0
00003E69= 3A 20 00                1204  colon_msg:       dc.b    ': ',0
00003E6C                          1205  
00003E6C= 49 6E 70 75 74 74 ...   1206  input_error_msg: dc.b    'Inputted number is outside of range.',$0D,$0A,0
00003E93= 47 61 6D 65 73 74 ...   1207  fake_gamestate_msg: dc.b    'Gamestate doesnt exist',$0D,$0A,0
00003EAC= 59 6F 75 20 70 69 ...   1208  knight_role_msg: dc.b    'You pick up your sword, grab a torch from the wall, and leave the room.',$0D,$0A
00003EF5= 2D 20 59 6F 75 20 ...   1209                  dc.b    '- You have chosen the KNIGHT class. You specialise in slow, strong attacks.',$0D,$0A,0
00003F43= 59 6F 75 20 70 69 ...   1210  mage_role_msg:   dc.b    'You pick up your staff, grab a torch from the wall, and leave the room.',$0D,$0A
00003F8C= 2D 20 59 6F 75 20 ...   1211                  dc.b    '- You have chosen the MAGE class. You specialise in ranged magic attacks.',$0D,$0A,0
00003FD8= 59 6F 75 20 66 61 ...   1212  rogue_role_msg:  dc.b    'You fasten your belt, grab a torch from the wall, and leave the room.',$0D,$0A
0000401F= 2D 20 59 6F 75 20 ...   1213                  dc.b    '- You have chosen the ROGUE class. You specialise in fast, weak attacks.',$0D,$0A,0
0000406A= 31 3E 20 4D 6F 76 ...   1214  movement_msg:    dc.b    '1> Move north.',$0D,$0A
0000407A= 32 3E 20 4D 6F 76 ...   1215                  dc.b    '2> Move south.',$0D,$0A
0000408A= 33 3E 20 4D 6F 76 ...   1216                  dc.b    '3> Move west.',$0D,$0A
00004099= 34 3E 20 4D 6F 76 ...   1217                  dc.b    '4> Move east.',$0D,$0A,0
000040A9= 4D 6F 76 65 64 20 ...   1218  move_north_msg:  dc.b    'Moved north.',$0D,$0A,0
000040B8= 4D 6F 76 65 64 20 ...   1219  move_east_msg:   dc.b    'Moved east.',$0D,$0A,0
000040C6= 4D 6F 76 65 64 20 ...   1220  move_south_msg:  dc.b    'Moved south.',$0D,$0A,0
000040D5= 4D 6F 76 65 64 20 ...   1221  move_west_msg:   dc.b    'Moved west.',$0D,$0A,0
000040E3= 41 20 77 61 6C 6C ...   1222  movement_blocked_msg:  dc.b    'A wall blocks your path.',$0D,$0A,0
000040FE= 45 6E 74 65 72 20 ...   1223  continue_msg:    dc.b    'Enter any key to continue... ',0
0000411C                          1224  
0000411C= 20 20 20 00             1225  blank_tile      dc.b    '   ',0
00004120= 7C 20 7C 00             1226  both_tile       dc.b    '| |',0
00004124= 7C 20 20 00             1227  left_tile       dc.b    '|  ',0
00004128= 20 20 7C 00             1228  right_tile      dc.b    '  |',0
0000412C= 5C 2F 5C 00             1229  blocked_tile    dc.b    '\/\',0
00004130= 2A 00                   1230  player_mark     dc.b    '*',0
00004132= 58 00                   1231  enemy_mark     dc.b    'X',0
00004134= 41 20 6D 6F 6E 73 ...   1232  encounter_msg:  dc.b    'A monster blocks your path, it looks ready to attack!',$0D,$0A,0
0000416C= 31 3E 20 42 6C 6F ...   1233  combat_msg:     dc.b    '1> Block and Counter.',$0D,$0A
00004183= 32 3E 20 43 61 73 ...   1234                  dc.b    '2> Cast Magic.',$0D,$0A
00004193= 33 3E 20 41 74 74 ...   1235                  dc.b    '3> Attack Swiftly.',$0D,$0A
000041A7= 34 3E 20 54 72 79 ...   1236                  dc.b    '4> Try Run.',$0D,$0A,0
000041B5= 20 20 20 20 20 20 ...   1237  skeleton_msg:   dc.b    '           .-.     ',$0D,$0A
000041CA= 20 2F 5C 5F 5F 5F ...   1238                  dc.b    ' /\____/\ (o.o)    ',$0D,$0A
000041DF= 7C 20 20 5F 7C 7C ...   1239                  dc.b    '|  _||_  | |=|     ',$0D,$0A
000041F4= 20 5C 2F 20 7C 7C ...   1240                  dc.b    ' \/ || \/ __|__    ',$0D,$0A
00004209= 20 20 20 20 7C 7C ...   1241                  dc.b    '    ||\_//.=|=.\\  ',$0D,$0A
0000421E= 20 20 20 20 7C 7C ...   1242                  dc.b    '    ||\_/ .=|=. \\ ',$0D,$0A
00004233= 20 20 20 20 7C 7C ...   1243                  dc.b    '    ||    .=|=. // ',$0D,$0A
00004248= 20 20 20 20 7C 7C ...   1244                  dc.b    '    ||    (_=_)//  ',$0D,$0A
0000425D= 20 20 20 20 7C 7C ...   1245                  dc.b    '    ||   (:| |:)   ',$0D,$0A
00004272= 20 20 20 20 7C 7C ...   1246                  dc.b    '    ||    || ||    ',$0D,$0A
00004287= 20 20 20 20 7C 7C ...   1247                  dc.b    '    ||    () ()    ',$0D,$0A
0000429C= 20 20 20 20 2F 5C ...   1248                  dc.b    '    /\    || ||    ',$0D,$0A
000042B1= 20 20 20 20 7C 7C ...   1249                  dc.b    '    ||    || ||    ',$0D,$0A
000042C6= 20 20 20 20 5C 2F ...   1250                  dc.b    '    \/  ==   ==    ',$0D,$0A,0
000042DC= 59 6F 75 20 65 73 ...   1251  escape_msg:             dc.b    'You escaped the monster!',$0D,$0A,0
000042F7= 59 6F 75 20 74 72 ...   1252  fail_escape_msg:        dc.b    'You try to run, but the monster catches and damages you!',$0D,$0A,0
00004332= 59 6F 75 20 62 6F ...   1253  both_block_msg:         dc.b    'You both block, No damage is done!',$0D,$0A,0
00004357= 59 6F 75 20 62 6F ...   1254  both_cast_magic_msg:    dc.b    'You both cast magic at eachother, the spells clash in mid air! No damage',$0D,$0A
000043A1= 69 73 20 64 6F 6E ...   1255                          dc.b    'is done!',$0D,$0A,0
000043AC= 59 6F 75 20 62 6F ...   1256  both_melee_msg:         dc.b    'You both lunge forward, metal clashes together, but no damage is done!',$0D,$0A,0
000043F5= 54 68 65 20 65 6E ...   1257  hit_against_block_msg:  dc.b    'The enemy blocks, you cast a cast a spell and it damages the monster!',$0D,$0A,0
0000443D= 54 68 65 20 65 6E ...   1258  hit_against_magic_msg:  dc.b    'The enemy begins to charge a spell but you lunge forward and hit it first,',$0D,$0A
00004489= 64 61 6D 61 67 69 ...   1259                          dc.b    'damaging the monster!',$0D,$0A,0
000044A1= 54 68 65 20 65 6E ...   1260  hit_against_melee_msg:  dc.b    'The enemy lunges forward but you block quicky, then counter, damaging the',$0D,$0A
000044EC= 6D 6F 6E 73 74 65 ...   1261                          dc.b    'monster!',$0D,$0A,0
000044F7= 59 6F 75 20 6C 75 ...   1262  hit_by_counter_msg:     dc.b    'You lunge at the enemy but they block before you hit, they swing around quickly',$0D,$0A
00004548= 61 6E 64 20 64 61 ...   1263                          dc.b    'and damage you!',$0D,$0A,0
0000455A= 59 6F 75 20 74 72 ...   1264  hit_by_magic_msg:       dc.b    'You try to block the enemies attack, but they cast a spell that breaks through',$0D,$0A
000045AA= 79 6F 75 72 20 64 ...   1265                          dc.b    'your defense and damages you!',$0D,$0A,0
000045CA= 59 6F 75 20 74 72 ...   1266  hit_by_melee_msg:       dc.b    'You try to charge up a spell, but the enemy lunges forward and damages you!',$0D,$0A,0
00004618= 48 65 61 6C 74 68 ...   1267  health_msg:             dc.b    'Health: ',0
00004621= 45 6E 65 6D 79 20 ...   1268  enemy_health_msg:       dc.b    'Enemy Health: ',0
00004630= 54 6F 72 63 68 20 ...   1269  torch_msg:              dc.b    'Torch Life: ',0
0000463D= 49 6E 76 65 6E 74 ...   1270  inventory_msg:          dc.b    'Inventory:',$0D,$0A,0
0000464A= 54 68 65 20 6D 6F ...   1271  battle_won_msg:         dc.b    'The monster collapses at your feet. It is dead!',$0D,$0A,0
0000467C                          1272  
0000467C                          1273      end start

No errors detected
No warnings generated


SYMBOL TABLE INFORMATION
Symbol-name         Value
-------------------------
ALIVE               3
BATTLE_WON_MSG      464A
BLANK_TILE          411C
BLOCKED_TILE        412C
BLOCK_COUNTER       34E6
BLUE                FF00
BOTH_BLOCK          357C
BOTH_BLOCK_MSG      4332
BOTH_CAST_MAGIC     358E
BOTH_CAST_MAGIC_MSG  4357
BOTH_MELEE          35A0
BOTH_MELEE_MSG      43AC
BOTH_TILE           4120
CAST_MAGIC          3500
CHECK_FOR_ENEMY     37AA
CHECK_FOR_PLAYER    3756
CLASS               2
CLEAR_SCREEN        331E
COLON_MSG           3E69
COMBAT              34AE
COMBAT_MSG          416C
CONTINUE_MSG        40FE
CRLF                3A68
DAMAGE              1
DECORATE            3300
DRAW                31F2
DRAW_BATTLE_INFO    3262
DRAW_BLANK_TILE     3748
DRAW_BLOCKED_TILE   3710
DRAW_BOTH_TILE      371E
DRAW_ENEMY          37C6
DRAW_HUD            3216
DRAW_LEFT_TILE      372C
DRAW_LOOP           3664
DRAW_MSG            3BF6
DRAW_PLAYER         375E
DRAW_PLAYER_INFO    322C
DRAW_RIGHT_TILE     373A
DRAW_SKELETON       3208
DRAW_TILE           36AC
ENCOUNTER_MSG       4134
END                 3006
ENDL                334C
END_LOOP            36AA
ENEMY_ALIVE_CHECK   31B2
ENEMY_CHECK         314E
ENEMY_DIED          31C4
ENEMY_HEALTH_MSG    4621
ENEMY_MARK          4132
ENEMY_MAX           1
ENTER_COMBAT        3188
ESCAPE_ATTACK       354A
ESCAPE_MSG          42DC
EXIT                0
FAIL_ESCAPE         3566
FAIL_ESCAPE_MSG     42F7
FAKE_GAMESTATE      3114
FAKE_GAMESTATE_MSG  3E93
FIRST_ENEMY         6000
FONT                1090000
GAME                3000
GAMELOOP            3122
GAMEPLAY            32BA
GAMEPLAY_MSG        3BD5
GAME_STATE          5FF3
GREEN               FF00
HEALTH              3C4C
HEALTH_MSG          4618
HIT_AGAINST_BLOCK   35B2
HIT_AGAINST_BLOCK_MSG  43F5
HIT_AGAINST_MAGIC   35C6
HIT_AGAINST_MAGIC_MSG  443D
HIT_AGAINST_MELEE   35DA
HIT_AGAINST_MELEE_MSG  44A1
HIT_BY_COUNTER      35EE
HIT_BY_COUNTER_MSG  44F7
HIT_BY_MAGIC        3604
HIT_BY_MAGIC_MSG    455A
HIT_BY_MELEE        361A
HIT_BY_MELEE_MSG    45CA
HIT_MSG             3C04
HUD                 32DE
HUD_MSG             3C42
INPUT               30AE
INPUT_ERROR_MSG     3E6C
INPUT_NUMS_MSG      3E50
INVALID_INPUT       3106
INVENTORY_MSG       463D
KNIGHT_ROLE_MSG     3EAC
KNIGHT_SELECT       3066
LEFT_TILE           4124
LOOP_COLUMNS        3690
LOOP_MSG            3C12
LOOP_ROWS           3678
LOSE_POINT          8
MAGE_ROLE_MSG       3F43
MAGE_SELECT         307E
MANAGE_INPUT        30D8
MAX_POTIONS         9
MELEE_ATTACK        351A
MIN_FEED            64
MIN_POTIONS         1
MIN_WEAPONS         6
MISS_MSG            3C0C
MOVEMENT            3362
MOVEMENT_BLOCKED    349C
MOVEMENT_BLOCKED_MSG  40E3
MOVEMENT_MSG        406A
MOVE_EAST           345C
MOVE_EAST_MSG       40B8
MOVE_NORTH          3398
MOVE_NORTH_MSG      40A9
MOVE_SOUTH          33DA
MOVE_SOUTH_MSG      40C6
MOVE_WEST           341C
MOVE_WEST_MSG       40D5
OUT                 3308
PICK_ROLE           3020
PICK_ROLE_MSG       3CD9
PLAYER              5FF0
PLAYER_MARK         4130
PLA_CLASS           5FF2
PLA_P_POS           5FF6
POSITION            4
POTIONS_MSG         3B4E
POTION_MSG          3B02
PRESS_CONTINUE      3630
RANDOM_NUMBER       3648
RED                 FF
REPLAY              332A
REPLAY_MSG          3C14
RETURN              3662
RIGHT_TILE          4128
ROGUE_ROLE_MSG      3FD8
ROGUE_SELECT        3096
ROLE_INPUT          3048
SCORE               3C4E
SETUP_ENEMIES       3A48
SETUP_WORLD         3812
SKELETON_MSG        41B5
START               1000
TORCH_MSG           4630
TRY_RUN             3534
UPDATE              3138
UPDATE_MSG          3BE4
WAKE_UP_MSG         3C50
WALL_COLLISIONS     3376
WEAPONS_MSG         3B63
WELCOME             300A
WELCOME_MSG         3A6B
WHITE               FFFFFF
WIN_POINT           5

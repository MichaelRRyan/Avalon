00001000 Starting Address
Assembler used: EASy68K Editor/Assembler v5.16.01
Created On: 23/03/2019 01:24:42

00000000                             1  *-------------------------------------------------------
00000000                             2  * Author         : Michael Rainsford Ryan
00000000                             3  * Student Number : C00239510
00000000                             4  * Date Created   : 21/01/2019
00000000                             5  * Description    : A simplified, offline clone of the
00000000                             6  *                : online game "Avalon".
00000000                             7  * Issues/Bugs    : None currenty.
00000000                             8  *-------------------------------------------------------
00000000                             9  
00001000                            10      org $1000
00001000                            11  
00001000                            12  *-------------------------------------------------------
00001000                            13  *Choose to be a Worker or a God 
00001000                            14  *https://www.avalon-rpg.com/
00001000                            15  *-------------------------------------------------------
00001000                            16  
00001000                            17  *-------------------------------------------------------
00001000                            18  *-------------------Game Information-------------------
00001000                            19  *-------------------------------------------------------
00001000                            20  *A6 is used for player coordinates
00001000                            21  *A5 is used for enemy coordinates when in combat or looping through them
00001000                            22  *A5 is used for shops when in shop screen or when looping through them
00001000                            23  *A4 occasionally used for displaying the inventory
00001000                            24  *D5 is used occasionally for input range
00001000                            25  *$5FF0 holds player information
00001000                            26  *$6000 to $64F0 holds enemies
00001000                            27  *$6500 to $6FE0 holds shops
00001000                            28  *$6FE0 to $6FEF Holds locked doors
00001000                            29  *$6FF0 to $6FFF Holds big key locked doors
00001000                            30  *$7000 to $7500 holds loot
00001000                            31  *$8000 to $9000 holds maps
00001000                            32  
00001000                            33  *Enemies:
00001000                            34  *Byte:  Name:
00001000                            35  *0      Health
00001000                            36  *1      Damage/level
00001000                            37  *2      enemy type (Knight, mage, rogue)
00001000                            38  *3      Alive state (1 == alive, 0 == dead)
00001000                            39  *4 & 5  Coordinates
00001000                            40  
00001000                            41  *Player:
00001000                            42  *Byte:  Name:
00001000                            43  *0      Health
00001000                            44  *1      Damage/level
00001000                            45  *2      Class (Knight, mage, rogue)
00001000                            46  *3      Game state
00001000                            47  *4-5+A6 Coordinates
00001000                            48  *6-7    Last coordinates
00001000                            49  *8      Gold
00001000                            50  *9      Potions
00001000                            51  *A      Keys
00001000                            52  *B      Torch life
00001000                            53  
00001000                            54  *Shops:
00001000                            55  *Byte:  Name:
00001000                            56  *0-1    Position
00001000                            57  *2      Potions
00001000                            58  *3      Keys
00001000                            59  *4      Torches
00001000                            60  *5      Damage increase
00001000                            61  
00001000                            62  *Loot:
00001000                            63  *Byte:  Name:
00001000                            64  *0-1    Position
00001000                            65  *2      Potions
00001000                            66  *3      Keys
00001000                            67  *4      Torches
00001000                            68  *5      Gold
00001000                            69  *6      Active State
00001000                            70      
00001000                            71  *Game state : 0 = Pick role/intro | 5 = Move around | 6 = Combat | 7 = Shop | 64 = End game
00001000                            72  *Class      : 1 corresponds to knight - 2 corresponds to mage - 3 corresponds to rogue
00001000                            73  
00001000                            74  
00001000                            75  *-------------------------------------------------------
00001000                            76  *Validation values to be used, modify as needed
00001000                            77  *Add additional validation values as required
00001000                            78  *-------------------------------------------------------
00001000  =00000000                 79  exit        EQU 0      used to exit assembly program
00001000                            80  
00001000                            81  * Text display
00001000  =000000FF                 82  RED         EQU $000000FF   Red colour value
00001000  =0000FF00                 83  GREEN       EQU $0000FF00   Green colour value
00001000  =00FF0000                 84  BLUE        EQU $00FF0000   Blue colour value
00001000  =00FFFFFF                 85  WHITE       EQU $00FFFFFF   White colour value
00001000  =00F000F0                 86  PURPLE      EQU $00F000F0   Purple colour value
00001000  =0000FFFF                 87  GOLD        EQU $0000FFFF   gold colour value
00001000  =00507090                 88  BROWN       EQU $00507090   brown colour value
00001000  =01090000                 89  FONT        EQU $01090000   Font value
00001000                            90  
00001000                            91  * Player
00001000  =00005FF0                 92  PLAYER      EQU $5FF0       Memory address for player information and health
00001000  =00005FF1                 93  PLA_DAMAGE  EQU $5FF1       Memory address for player damage value
00001000  =00005FF2                 94  PLA_CLASS   EQU $5FF2       The memory address for the player class
00001000  =00005FF3                 95  GAME_STATE  EQU $5FF3       The memory address of the game state
00001000  =00005FF6                 96  PLA_P_POS   EQU $5FF6       Memory location of the player's previous position
00001000  =00005FF8                 97  PLA_GOLD    EQU $5FF8       Memory address for player gold
00001000  =00005FF9                 98  PLA_POTIONS EQU $5FF9       Memory address for player potions
00001000  =00005FFA                 99  PLA_KEYS    EQU $5FFA       Memory address for player keys
00001000  =00005FFB                100  PLA_TORCH   EQU $5FFB       Memory address for player torch life
00001000                           101  
00001000                           102  * Enemy
00001000  =00006000                103  FIRST_ENEMY EQU $6000       Memory location of the first enemy
00001000  =00000002                104  ENEMY_MAX   EQU 2           Number of enemies in the game
00001000                           105  
00001000  =00000001                106  DAMAGE      EQU 1           The number of bytes to move from the enemy before reaching the damage
00001000  =00000002                107  CLASS       EQU 2           The number of bytes to move from the enemy before reaching the class
00001000  =00000003                108  ALIVE       EQU 3           The number of bytes to move from the enemy before reaching the alive state
00001000  =00000004                109  POSITION    EQU 4           The number of bytes to move from the enemy before reaching the position
00001000                           110  
00001000                           111  * Shop & Loot
00001000  =00006500                112  FIRST_SHOP  EQU $6500       Memory location of the first shop
00001000  =00000002                113  SHOP_MAX    EQU 2           Number of shops in the game
00001000                           114  
00001000  =00000002                115  S_POTIONS   EQU 2           The number of bytes to move from the shop root before reaching the potions
00001000  =00000003                116  S_KEYS      EQU 3           The number of bytes to move from the shop root before reaching the keys
00001000  =00000004                117  S_TORCHES   EQU 4           The number of bytes to move from the shop root before reaching the torches
00001000  =00000005                118  S_DAMAGE_IN EQU 5           The number of bytes to move from the shop root before reaching the damage increase
00001000                           119  
00001000  =00007000                120  FIRST_LOOT  EQU $7000       Memory location of the first loot pile
00001000  =00000006                121  L_ACTIVE    EQU 6           The number of bytes to move from the loot pile root before reaching the active state
00001000                           122  
00001000                           123  * HUD
00001000  =00003201                124  CSR_POS_MOVE    EQU $3201   The cursor position to draw the HUD to when in movement state
00001000  =00002001                125  CSR_POS_BATTLE  EQU $2001   The cursor position to draw the HUD to when in battle state
00001000  =00001801                126  CSR_POS_SHOP_S  EQU $1801   The cursor position to draw the HUD to when in shop state for shop info
00001000  =00003401                127  CSR_POS_SHOP_P  EQU $3401   The cursor position to draw the HUD to when in shop state for player info
00001000                           128  
00001000                           129  * Game
00001000  =00008156                130  WIN_POINT       EQU $8156   The position the player has to get to to win
00001000  =00006FE0                131  FIRST_DOOR      EQU $6FE0   The memory location of the first locked door
00001000  =00000001                132  DOOR_MAX        EQU 1       The number of locked doors in the game
00001000  =00001000                133  OPEN_DOOR_POS   EQU $1000   The position doors are given when opened
00001000                           134  
00001000  =00000005                135  POTION_PRICE    EQU 5       The price in gold for a potion
00001000  =0000000F                136  KEY_PRICE       EQU 15      The price in gold for a key
00001000  =0000000A                137  TORCH_PRICE     EQU 10      The price in gold for a torch
00001000  =00000014                138  DAMAGE_UP_PRICE EQU 20      The price in gold for a damage upgrade
00001000                           139  
00001000  =0000000F                140  LIFE_PER_TORCH  EQU 15      The life value each torch has
00001000                           141  
00001000  =00008080                142  MAP_START_POINT EQU $8080   The starting coordinates the map draws at
00001000  =0000000F                143  MAP_LENGTH      EQU 15      The number of tiles downwords the map will draw
00001000                           144  
00001000                           145  
00001000                           146  *Start of Game
00001000                           147  start:
00001000  6100 3602                148      bsr     setup_player
00001004  6100 3280                149      bsr     setup_world
00001008  6100 3574                150      bsr     setup_enemies
0000100C  6100 3632                151      bsr     setup_shops
00001010  6100 35AA                152      bsr     setup_loot
00001014                           153  
00001014  6100 1FF4                154      bsr     welcome    branch to the welcome subroutine
00001018  6100 2E86                155      bsr     press_continue
0000101C  6100 1FE2                156      bsr     game       branch to the game subroutine
00001020                           157  *Game loop
00003000                           158      org     $3000      the rest of the program is to be located from 3000 onwards
00003000                           159  
00003000                           160  *-------------------------------------------------------
00003000                           161  *-------------------Game Subroutine---------------------
00003000                           162  *-------------------------------------------------------
00003000                           163  game:
00003000  6100 0192                164      bsr     gameloop   branch to gameloop subroutine
00003004  4E75                     165      rts                return from game: subroutine
00003006                           166            
00003006                           167  end:
00003006  FFFF FFFF                168      simhalt
0000300A                           169  
0000300A                           170  *-------------------------------------------------------
0000300A                           171  *-------------------Welcome Subroutine------------------
0000300A                           172  *-------------------------------------------------------
0000300A                           173  welcome:
0000300A  43F9 00004681            174      lea     welcome_msg,A1  assign message to address register A1
00003010  103C 000E                175      move.b  #14,D0          move literal 14 to DO
00003014  4E4F                     176      trap    #15             trap and interpret value in D0
00003016  6100 08CC                177      bsr     endl            branch to endl subroutine
0000301A                           178      
0000301A  4E75                     179      rts                     return from welcome: subroutine
0000301C                           180  
0000301C                           181  *-------------------------------------------------------
0000301C                           182  *-------------------Role Picking Subroutine------------------
0000301C                           183  *-------------------------------------------------------
0000301C                           184  pick_role:
0000301C                           185  
0000301C  43F9 00004A4A            186      lea     wake_up_msg,A1  assign message to address register A1
00003022  103C 000E                187      move.b  #14,D0          move literal 14 to DO
00003026  4E4F                     188      trap    #15             trap and interpret value in D0
00003028  6100 08BA                189      bsr     endl            branch to endl subroutine
0000302C                           190      
0000302C  43F9 00004B62            191      lea     pick_role_msg,A1 assign message to address register A1
00003032  103C 000E                192      move.b  #14,D0           move literal 14 to DO
00003036  4E4F                     193      trap    #15              trap and interpret value in D0
00003038                           194      
00003038  7A03                     195      move.l  #3,D5           Move the number 3 to D5 to tell the program how many options there are
0000303A                           196      
0000303A  6100 00E2                197      bsr     input           branch to the input subroutine
0000303E                           198      
0000303E  6100 0E60                199      bsr     press_continue          Pause the game until a key is pressed
00003042                           200      
00003042  4E75                     201      rts                     return from pick_role subroutine
00003044                           202      
00003044                           203  role_input:
00003044  11C1 5FF2                204      move.b  D1,PLA_CLASS    Move the role number to player class memory location to hold the class number
00003048                           205      
00003048                           206      *Give the player a message depending on the role chosen
00003048  B23C 0001                207      CMP.B   #1,D1
0000304C  6700 0014                208      BEQ     knight_select   Branch to knight message if role selected
00003050                           209      
00003050  B23C 0002                210      CMP.B   #2,D1
00003054  6700 003C                211      BEQ     mage_select     Branch to mage message if role selected
00003058                           212      
00003058  B23C 0003                213      CMP.B   #3,D1
0000305C  6700 0064                214      BEQ     rogue_select    Branch to rogue message if role selected
00003060                           215      
00003060  4E75                     216      rts
00003062                           217      
00003062                           218  knight_select:
00003062  43F9 00004D35            219      lea     knight_role_msg,A1  assign message to address register A1
00003068  103C 000E                220      move.b  #14,D0              move literal 14 to DO
0000306C  4E4F                     221      trap    #15                 Display the knight message
0000306E                           222      
0000306E  223C 00F000F0            223      move.l  #PURPLE,D1          Load the purple colour
00003074  6100 0E9E                224      bsr     change_font_colour  Change the font colour
00003078                           225      
00003078  43F9 00004D87            226      lea     knight_spec_msg,A1  assign message to address register A1
0000307E  103C 000E                227      move.b  #14,D0              move literal 14 to DO
00003082  4E4F                     228      trap    #15                 Display the knight message
00003084                           229      
00003084  223C 00FFFFFF            230      move.l  #WHITE,D1           Load the white colour
0000308A  6100 0E88                231      bsr     change_font_colour  Change the font colour
0000308E                           232      
0000308E  6000 0062                233      bra     tutorial_intro      Branch to tutorial subroutine
00003092                           234  
00003092                           235  mage_select:
00003092  43F9 00004DD5            236      lea     mage_role_msg,A1    Assign message to address register A1
00003098  103C 000E                237      move.b  #14,D0              move literal 14 to DO
0000309C  4E4F                     238      trap    #15                 Display the mage message
0000309E                           239      
0000309E  223C 00F000F0            240      move.l  #PURPLE,D1          Load the purple colour
000030A4  6100 0E6E                241      bsr     change_font_colour  Change the font colour
000030A8                           242      
000030A8  43F9 00004E1F            243      lea     mage_spec_msg,A1    assign message to address register A1
000030AE  103C 000E                244      move.b  #14,D0              move literal 14 to DO
000030B2  4E4F                     245      trap    #15                 Display the mage message
000030B4                           246      
000030B4  223C 00FFFFFF            247      move.l  #WHITE,D1           Load the white colour
000030BA  6100 0E58                248      bsr     change_font_colour  Change the font colour
000030BE                           249      
000030BE  6000 0032                250      bra     tutorial_intro      Branch to tutorial subroutine
000030C2                           251  
000030C2                           252  rogue_select:
000030C2  43F9 00004E62            253      lea     rogue_role_msg,A1   Assign message to address register A1
000030C8  103C 000E                254      move.b  #14,D0              move literal 14 to DO
000030CC  4E4F                     255      trap    #15                 Display the rogue message
000030CE                           256      
000030CE  223C 00F000F0            257      move.l  #PURPLE,D1          Load the purple colour
000030D4  6100 0E3E                258      bsr     change_font_colour  Change the font colour
000030D8                           259      
000030D8  43F9 00004EAA            260      lea     rogue_spec_msg,A1   Assign message to address register A1
000030DE  103C 000E                261      move.b  #14,D0              move literal 14 to DO
000030E2  4E4F                     262      trap    #15                 Display the rogue message
000030E4                           263      
000030E4  223C 00FFFFFF            264      move.l  #WHITE,D1           Load the white colour
000030EA  6100 0E28                265      bsr     change_font_colour  Change the font colour
000030EE                           266      
000030EE  6000 0002                267      bra     tutorial_intro      Branch to tutorial subroutine
000030F2                           268      
000030F2                           269  tutorial_intro:
000030F2  6100 07F0                270      bsr     endl                Break to a new line
000030F6                           271  
000030F6  223C 000000FF            272      move.l  #RED,D1             Load the purple colour
000030FC  6100 0E16                273      bsr     change_font_colour  Change the font colour
00003100                           274      
00003100  43F9 00004932            275      lea     tutorial_msg,A1     Load tutorial message to address register A1
00003106  103C 000E                276      move.b  #14,D0              move literal 14 to DO
0000310A  4E4F                     277      trap    #15                 Display the tutorial message
0000310C                           278      
0000310C  223C 00FFFFFF            279      move.l  #WHITE,D1           Load the white colour
00003112  6100 0E00                280      bsr     change_font_colour  Change the font colour
00003116                           281      
00003116  11FC 0005 5FF3           282      move.b  #5,GAME_STATE       Change the game state to the movement state
0000311C                           283      
0000311C  4E75                     284      rts
0000311E                           285      
0000311E                           286  *-------------------------------------------------------
0000311E                           287  *---------Gameplay Input Values Subroutine--------------
0000311E                           288  *-------------------------------------------------------    
0000311E                           289  input:
0000311E  6100 07C4                290      bsr     endl            Branch to end line subroutine
00003122  6100 0E02                291      bsr     get_cursor_pos  Get the position of the cursor in D3
00003126                           292      
00003126  43F9 00004CD9            293      lea     input_nums_msg,A1 assign message to address register A1
0000312C  103C 000E                294      move.b  #14,D0          move literal 14 to DO
00003130  4E4F                     295      trap    #15             Display the "enter number" message
00003132                           296      
00003132  2205                     297      move.l  D5,D1           Move the number of options to D1 to display it
00003134  103C 0003                298      move.b  #3,D0           move literal 3 to DO
00003138  4E4F                     299      trap    #15             Display the number in D1 to show the input range
0000313A                           300      
0000313A  43F9 00004CF2            301      lea     colon_msg,A1    assign message to address register A1
00003140  103C 000E                302      move.b  #14,D0          move literal 14 to DO
00003144  4E4F                     303      trap    #15             Display a colon after the number range
00003146                           304      
00003146  103C 0004                305      move.b  #4,D0           Move the number 4 to D0
0000314A  4E4F                     306      trap    #15             Take input
0000314C                           307      
0000314C  1A01                     308      move.b  D1,D5           Move the input to D5 for later
0000314E                           309      
0000314E  3203                     310      move.w  D3,D1           Move the cursor position of the start of the line
00003150  103C 000B                311      move.b  #11,D0          Move the number literal 11 to D0 for trap command
00003154  4E4F                     312      trap    #15             Move the cursor back to the start of the line
00003156                           313      
00003156  43F9 000048DE            314      lea     blank_msg,A1    Load the blank message into A1 to wipe the line blank
0000315C  103C 000E                315      move.b  #14,D0          Move number literal to D0 for trap command
00003160  4E4F                     316      trap    #15             Display the loaded message
00003162                           317      
00003162  103C 000B                318      move.b  #11,D0          Move the number literal 11 to D0 for trap command
00003166  4E4F                     319      trap    #15             Move the cursor back to the start of the line
00003168                           320      
00003168  4281                     321      clr.l   D1              Clear D1 of large values
0000316A  1205                     322      move.b  D5,D1           Move the input back to D1
0000316C                           323      
0000316C                           324  manage_input:
0000316C  B27C 0001                325      CMP     #1,D1           Check input against minimum value
00003170  6D00 0014                326      BLT     invalid_input   Error if less than 1
00003174                           327      
00003174  B245                     328      CMP     D5,D1           Compare input against max value
00003176  6E00 000E                329      BGT     invalid_input   Error if more than max value
0000317A                           330      
0000317A  0C38 0000 5FF3           331      CMP.B   #0,GAME_STATE   Check which state the game is in
00003180  6700 FEC2                332      BEQ     role_input      Branch to the manage input for the role picking
00003184                           333      
00003184  4E75                     334      rts                     Return out of subroutine
00003186                           335  
00003186                           336  invalid_input:
00003186  43F9 00004CF5            337      lea     input_error_msg,A1 assign message to address register A1
0000318C  103C 000E                338      move.b  #14,D0          move literal 14 to DO
00003190  4E4F                     339      trap    #15             Display the error message
00003192                           340      
00003192  608A                     341      bra     input           Go back to taking input
00003194                           342  
00003194                           343  *-------------------------------------------------------
00003194                           344  *----------------Gameloop (main loop)-------------------
00003194                           345  *------------------------------------------------------- 
00003194                           346  gameloop:
00003194  6100 071E                347      bsr     clear_screen    clears the screen  
00003198  6100 0308                348      bsr     draw            branch to draw screen subroutine
0000319C  6100 035C                349      bsr     draw_hud
000031A0  6100 0008                350      bsr     update          branch to update game subroutine 
000031A4  6100 06C2                351      bsr     gameplay        branch to gameplay subroutine
000031A8  60EA                     352      bra     gameloop        Continue looping the game loop     
000031AA                           353  
000031AA                           354  *-------------------------------------------------------
000031AA                           355  *----------------Update Quest Progress------------------
000031AA                           356  *  Complete Quest
000031AA                           357  *------------------------------------------------------- 
000031AA                           358  update:
000031AA  0C38 0000 5FF0           359      CMP.B   #0,PLAYER           Check if the player health is zero
000031B0  6F00 0022                360      BLE     player_dead         Player is dead if health is zero or below
000031B4                           361      
000031B4  BDFC 00008156            362      CMP.L   #WIN_POINT,A6       Check if the player is standing on the win point
000031BA  6700 0042                363      BEQ     won_game            Branch to the won game subroutine
000031BE                           364  
000031BE  0C38 0005 5FF3           365      CMP.B   #5,GAME_STATE       Check which state the game is in
000031C4  6700 0066                366      BEQ     movement_checks     Check for enemies and shops if in movement state
000031C8  0C38 0006 5FF3           367      CMP.B   #6,GAME_STATE       Check which state the game is in
000031CE  6700 029A                368      BEQ     enemy_alive_check   Check if enemy is dead if in combat
000031D2                           369      
000031D2  4E75                     370      rts
000031D4                           371      
000031D4                           372  *-------------------------------------------------------
000031D4                           373  *---------------------Win or Lose----------------------- 
000031D4                           374  player_dead:
000031D4  6100 070E                375      bsr     endl            Break to new line
000031D8                           376      
000031D8  43F9 000054AD            377      lea     death_msg,A1    Load the death message
000031DE  103C 000E                378      move.b  #14,D0          Move byte #14 to D0 for the trap command
000031E2  4E4F                     379      trap    #15             Display the loaded message
000031E4                           380  
000031E4  6100 0CBA                381      bsr     press_continue  Pause to get input
000031E8  6100 06CA                382      bsr     clear_screen    Clear the screen
000031EC  6100 02E2                383      bsr     draw_graveyard  Draw a graveyard
000031F0  6100 06F2                384      bsr     endl            Break to new line
000031F4  11FC 0040 5FF3           385      move.b  #64,GAME_STATE  Set the game state to end game
000031FA  6000 06C4                386      bra     replay          Give the player the option to restart or quit
000031FE                           387      
000031FE                           388  won_game:
000031FE  6100 06E4                389      bsr     endl            Break to new line
00003202                           390      
00003202  43F9 00005512            391      lea     win_msg,A1      Load the win message
00003208  103C 000E                392      move.b  #14,D0          Move byte #14 to D0 for the trap command
0000320C  4E4F                     393      trap    #15             Display the loaded message
0000320E                           394  
0000320E  6100 0C90                395      bsr     press_continue  Pause to get input
00003212  6100 06A0                396      bsr     clear_screen    Clear the screen
00003216  6100 06CC                397      bsr     endl            Break to new line
0000321A  6100 02C2                398      bsr     draw_castle     Draw a castle
0000321E  6100 06C4                399      bsr     endl            Break to new line
00003222  11FC 0040 5FF3           400      move.b  #64,GAME_STATE  Set the game state to end game
00003228  6000 0696                401      bra     replay          Give the player the option to restart or quit
0000322C                           402  
0000322C                           403  *-------------------------------------------------------
0000322C                           404  *--------------------Movement State--------------------- 
0000322C                           405  movement_checks:
0000322C  6100 0100                406      bsr     manage_torch    Check if the torch life is zero and if damage player if so
00003230  6100 0016                407      bsr     loot_piles_check Check for loot piles under the player 
00003234  6100 012C                408      bsr     enemies_check   Check for enemies beside the player
00003238  0C38 0005 5FF3           409      CMP.B   #5,GAME_STATE   Compare the movement gamestate number with the current gamestate
0000323E  6600 0C92                410      BNE     return          Return from the loop if the game is not in the movement state anymore
00003242  6100 01A8                411      bsr     shops_check     Check for shops beside the player
00003246                           412      
00003246  4E75                     413      rts
00003248                           414  
00003248                           415  *-------------------Loot pile checks--------------------
00003248                           416  loot_piles_check:
00003248  4BF8 7000                417      lea     FIRST_LOOT,A5   Load the memory address of the first loot pile
0000324C  1A3C 0000                418      move.b  #0,D5           Move the starting loot number to D5
00003250  6100 0004                419      bsr     loot_pile_loop  Loop through all loot piles
00003254  4E75                     420      rts                     Return from subroutine
00003256                           421      
00003256                           422  loot_pile_loop:
00003256  BA3C 0002                423      CMP.B   #ENEMY_MAX,D5   Compare the loot number with the maximum enemy number
0000325A  6C00 0C76                424      BGE     return          Return from the loop if the current loot number is greater than or equal to the max
0000325E                           425  
0000325E  6100 000A                426      bsr     loot_pile_check Check for a loot pile
00003262                           427      
00003262  5205                     428      add.b   #1,D5           Add to the current loot number
00003264  DAFC 0010                429      add.w   #16,A5          Add to the current loot pointer to move to the next loot pile
00003268  60EC                     430      bra     loot_pile_loop  Keep looping the loot piles
0000326A                           431      
0000326A                           432  loot_pile_check:
0000326A  5C4D                     433      add.w   #L_ACTIVE,A5    Move to the active state
0000326C  0C15 0000                434      CMP.B   #0,(A5)         Check if the loot is active
00003270  5D4D                     435      sub.w   #L_ACTIVE,A5    Move to the active state
00003272  6700 0C5E                436      BEQ     return          Return if not active
00003276                           437  
00003276  3415                     438      move.w  (A5),D2         Move the loot pile position to D2 for large value comparison
00003278  BDC2                     439      CMP.L   D2,A6           Check if the player is on a loot pile   
0000327A  6700 0004                440      BEQ     pickup_loot     Pickup the loot
0000327E                           441      
0000327E  4E75                     442      rts     Return if not touching a loot pile
00003280                           443      
00003280                           444  pickup_loot:
00003280  6100 0662                445      bsr     endl                Line break
00003284                           446      
00003284  223C 0000FFFF            447      move.l  #GOLD,D1            Load gold colour
0000328A  6100 0C88                448      bsr     change_font_colour  Change the font colour
0000328E                           449      
0000328E  43F9 00005708            450      LEA     pickup_loot_msg,A1  Load the encounter message int A1
00003294  103C 000E                451      move.b  #14,D0              Move #14 to D0 to display message
00003298  4E4F                     452      trap    #15                 Display the loaded message
0000329A                           453      
0000329A  544D                     454      add.w   #S_POTIONS,A5       Move to potions number
0000329C  1215                     455      move.b  (A5),D1            Move the loot potions number to D1 and increment
0000329E  D338 5FF9                456      add.b   D1,PLA_POTIONS      Give the player the number of potions in the loot
000032A2                           457      
000032A2  43F9 0000572C            458      LEA     pickup_potion_msg,A1  Load the pickup potions message into A1
000032A8  103C 000E                459      move.b  #14,D0              Move #14 to D0 to display message
000032AC  4E4F                     460      trap    #15                 Display the loaded message
000032AE                           461      
000032AE  384D                     462      move.w  A5,A4               Move the item number to A4 to draw it
000032B0  6100 0594                463      bsr     draw_item_number    Draw the item number
000032B4  6100 062E                464      bsr     endl                Break to new line
000032B8  524D                     465      add.w   #1,A5               Move to the next item in the loot pile
000032BA                           466      
000032BA  1215                     467      move.b  (A5),D1             Move the key number to D1 and increment
000032BC  D338 5FFA                468      add.b   D1,PLA_KEYS         Give the player the number of keys in the loot
000032C0                           469      
000032C0  43F9 00005736            470      LEA     pickup_key_msg,A1   Load the pickup key message into A1
000032C6  103C 000E                471      move.b  #14,D0              Move #14 to D0 to display message
000032CA  4E4F                     472      trap    #15                 Display the loaded message
000032CC                           473      
000032CC  384D                     474      move.w  A5,A4               Move the item number to A4 to draw it
000032CE  6100 0576                475      bsr     draw_item_number    Draw the item number
000032D2  6100 0610                476      bsr     endl                Break to new line
000032D6  524D                     477      add.w   #1,A5               Move to the next item in the loot pile
000032D8                           478      
000032D8  1215                     479      move.b  (A5),D1             Move the torch number to D1 and increment
000032DA  D338 5FFB                480      add.b   D1,PLA_TORCH        Give the player the number of torches in the loot
000032DE                           481      
000032DE  43F9 0000573D            482      LEA     pickup_torch_msg,A1 Load the pickup torch message into A1
000032E4  103C 000E                483      move.b  #14,D0              Move #14 to D0 to display message
000032E8  4E4F                     484      trap    #15                 Display the loaded message
000032EA                           485      
000032EA  384D                     486      move.w  A5,A4               Move the item number to A4 to draw it
000032EC  6100 0558                487      bsr     draw_item_number    Draw the item number
000032F0  6100 05F2                488      bsr     endl                Break to new line
000032F4  524D                     489      add.w   #1,A5               Move to the next item in the loot pile
000032F6                           490      
000032F6  1215                     491      move.b  (A5),D1             Move the torch number to D1 and increment
000032F8  D338 5FF8                492      add.b   D1,PLA_GOLD         Give the player the number of gold in the loot
000032FC                           493      
000032FC  43F9 00005724            494      LEA     pickup_gold_msg,A1  Load the pickup gold message int A1
00003302  103C 000E                495      move.b  #14,D0              Move #14 to D0 to display message
00003306  4E4F                     496      trap    #15                 Display the loaded message
00003308                           497      
00003308  384D                     498      move.w  A5,A4               Move the item number to A4 to draw it
0000330A  6100 053A                499      bsr     draw_item_number    Draw the item number
0000330E  6100 05D4                500      bsr     endl                Break to new line
00003312  524D                     501      add.w   #1,A5               Move to the next item in the loot pile
00003314                           502      
00003314  1ABC 0000                503      move.b  #0,(A5)             Set the loot to not active
00003318  5D4D                     504      sub.w   #L_ACTIVE,A5        Move to active state
0000331A                           505      
0000331A  223C 00FFFFFF            506      move.l  #WHITE,D1           Load the white colour
00003320  6100 0BF2                507      bsr     change_font_colour  Change the font colour
00003324                           508      
00003324  6100 0B7A                509      bsr     press_continue      Wait for user input
00003328  6100 01D0                510      bsr     draw_hud            Re-draw the hud
0000332C                           511      
0000332C  4E75                     512      rts
0000332E                           513  
0000332E                           514  *---------------------Manage Torch----------------------
0000332E                           515  manage_torch:
0000332E  0C38 0000 5FFB           516      CMP.B   #0,PLA_TORCH    Compare the torch life with zero
00003334  6E00 0B9C                517      BGT     return          Return if the torch life is greater than zero
00003338                           518      
00003338  5338 5FF0                519      sub.b   #1,PLAYER       Remove one health from the player
0000333C                           520      
0000333C  6100 05A6                521      bsr     endl            Break to new line
00003340                           522      
00003340  223C 000000FF            523      move.l  #RED,D1
00003346  6100 0BCC                524      bsr     change_font_colour  Change the font colour
0000334A                           525      
0000334A  43F9 000056F0            526      lea     no_torch_msg,A1 Load the no torch message into A1
00003350  103C 000E                527      move.b  #14,D0          Move the number literal 14 into D0 for trap command
00003354  4E4F                     528      trap    #15             Display the loaded message
00003356                           529      
00003356  223C 00FFFFFF            530      move.l  #WHITE,D1
0000335C  6100 0BB6                531      bsr     change_font_colour  Change the font colour
00003360                           532      
00003360  4E75                     533      rts                     Return from the subroutine
00003362                           534  
00003362                           535  *--------------------Enemy Checking--------------------- 
00003362                           536  enemies_check:
00003362  4BF8 6000                537      lea     FIRST_ENEMY,A5  Load the memory address of the first enemy
00003366  1A3C 0000                538      move.b  #0,D5           Move the starting enemy number to D5
0000336A  6100 0004                539      bsr     enemies_loop    Loop through all enemies
0000336E  4E75                     540      rts                     Return from subroutine
00003370                           541      
00003370                           542  enemies_loop:
00003370  BA3C 0002                543      CMP.B   #ENEMY_MAX,D5   Compare the enemy number with the maximum enemy number
00003374  6C00 0B5C                544      BGE     return          Return from the loop if the current enemy number is greater than or equal to the max
00003378                           545  
00003378  6100 0014                546      bsr     enemy_check     Check for an enemy
0000337C                           547      
0000337C  0C38 0005 5FF3           548      CMP.B   #5,GAME_STATE   Compare the movement gamestate number with the current gamestate
00003382  6600 0B4E                549      BNE     return          Return from the loop if the game is not in the movement state anymore
00003386                           550      
00003386  5205                     551      add.b   #1,D5           Add to the current enemy number
00003388  DAFC 000C                552      add.w   #12,A5          Add to the current enemy pointer to move to the next enemy (16 for next enemy - 4 to get back from position)
0000338C  60E2                     553      bra     enemies_loop    Keep looping the enemies
0000338E                           554      
0000338E                           555  
0000338E                           556  enemy_check:
0000338E  564D                     557      add.w   #ALIVE,A5       Move into enemy information to check if its alive
00003390  0C1D 0000                558      CMP.B   #0,(A5)+        Check if the enemy is alive
00003394  6700 0B3C                559      BEQ     return          Return from the check if the enemy is dead
00003398                           560      
00003398  340E                     561      move.w  A6,D2           Move the player position to D2
0000339A                           562      
0000339A                           563      *Check if the player is beside an enemy
0000339A  0442 0010                564      sub.w   #16,D2          Check north
0000339E  B455                     565      CMP.W   (A5),D2           
000033A0  6700 0020                566      BEQ     enter_combat    Enter the player into combat
000033A4                           567      
000033A4  0642 0020                568      add.w   #32,D2          Check south
000033A8  B455                     569      CMP.W   (A5),D2           
000033AA  6700 0016                570      BEQ     enter_combat    Enter the player into combat
000033AE                           571      
000033AE  0442 0011                572      sub.w   #17,D2          Check west
000033B2  B455                     573      CMP.W   (A5),D2           
000033B4  6700 000C                574      BEQ     enter_combat    Enter the player into combat
000033B8                           575      
000033B8  5442                     576      add.w   #2,D2           Check east
000033BA  B455                     577      CMP.W   (A5),D2           
000033BC  6700 0004                578      BEQ     enter_combat    Enter the player into combat
000033C0                           579      
000033C0  4E75                     580      rts     Return if not touching an enemy
000033C2                           581      
000033C2                           582  enter_combat:
000033C2  594D                     583      sub.w   #4,A5               Get the memory address of the enemy opposed to it's position
000033C4  11FC 0006 5FF3           584      move.b  #6,GAME_STATE       Move to combat state
000033CA                           585      
000033CA  6100 0518                586      bsr     endl                Line break
000033CE                           587      
000033CE  43F9 0000502F            588      LEA     encounter_msg,A1    Load the encounter message int A1
000033D4  103C 000E                589      move.b  #14,D0              Move #14 to D0 to display message
000033D8  4E4F                     590      trap    #15                 Display the loaded message
000033DA                           591      
000033DA  6100 0AC4                592      bsr     press_continue      Branch to the press to continue subroutine
000033DE                           593      
000033DE  6100 04D4                594      bsr     clear_screen        Clear the screen
000033E2                           595      
000033E2  6100 00DE                596      bsr     draw_skeleton       Draw the enemy
000033E6  6100 02C8                597      bsr     draw_battle_info    Draw the info
000033EA                           598      
000033EA  4E75                     599      rts
000033EC                           600        
000033EC                           601  *--------------------Shop Checking----------------------
000033EC                           602  shops_check:
000033EC  4BF8 6500                603      lea     FIRST_SHOP,A5   Load the memory address of the first shop
000033F0  1A3C 0000                604      move.b  #0,D5           Move the starting shop number to D5
000033F4  6100 0004                605      bsr     shops_loop      Loop through all shops
000033F8  4E75                     606      rts                     Return from subroutine
000033FA                           607      
000033FA                           608  shops_loop:
000033FA  BA3C 0002                609      CMP.B   #SHOP_MAX,D5    Compare the shop number with the maximum shop number
000033FE  6C00 0AD2                610      BGE     return          Return from the loop if the current shop number is greater than or equal to the max
00003402                           611      
00003402  6100 0014                612      bsr     shop_check      Check for a shop
00003406                           613      
00003406  0C38 0005 5FF3           614      CMP.B   #5,GAME_STATE   Compare the movement gamestate number with the current gamestate
0000340C  6600 0AC4                615      BNE     return          Return from the loop if the game is not in the movement state anymore
00003410                           616      
00003410  5205                     617      add.b   #1,D5           Add to the current shop number
00003412  DAFC 0010                618      add.w   #16,A5          Add to the current shop pointer to move to the next shop
00003416  60E2                     619      bra     shops_loop      Keep looping the shops
00003418                           620      
00003418                           621  shop_check:    
00003418  340E                     622      move.w  A6,D2           Move the player position to D2
0000341A                           623      
0000341A                           624      *Check if the player is beside a shop
0000341A  0442 0010                625      sub.w   #16,D2          Check north
0000341E  B455                     626      CMP.W   (A5),D2           
00003420  6700 0020                627      BEQ     enter_shop      The player enters a shop
00003424                           628      
00003424  0642 0020                629      add.w   #32,D2          Check south
00003428  B455                     630      CMP.W   (A5),D2           
0000342A  6700 0016                631      BEQ     enter_shop      The player enters a shop
0000342E                           632      
0000342E  0442 0011                633      sub.w   #17,D2          Check west
00003432  B455                     634      CMP.W   (A5),D2           
00003434  6700 000C                635      BEQ     enter_shop      The player enters a shop
00003438                           636      
00003438  5442                     637      add.w   #2,D2           Check east
0000343A  B455                     638      CMP.W   (A5),D2           
0000343C  6700 0004                639      BEQ     enter_shop      The player enters a shop
00003440                           640      
00003440  4E75                     641      rts     Return if not touching a shop
00003442                           642      
00003442                           643  enter_shop:
00003442  11FC 0007 5FF3           644      move.b  #7,GAME_STATE       Move to shop game state
00003448                           645      
00003448  6100 049A                646      bsr     endl                Line break
0000344C                           647      
0000344C  43F9 000055B3            648      LEA     shop_enter_msg,A1   Load the encounter message int A1
00003452  103C 000E                649      move.b  #14,D0              Move #14 to D0 to display message
00003456  4E4F                     650      trap    #15                 Display the loaded message
00003458                           651      
00003458  6100 0A46                652      bsr     press_continue      Branch to the press to continue subroutine
0000345C                           653      
0000345C  6100 0456                654      bsr     clear_screen        Clear the screen
00003460                           655      
00003460  6100 008A                656      bsr     draw_merchant       Draw the merchant
00003464  6100 02AC                657      bsr     draw_shop_info      Draw the info
00003468                           658      
00003468  4E75                     659      rts
0000346A                           660  
0000346A                           661  *-------------------------------------------------------
0000346A                           662  *---------------------Combat State---------------------- 
0000346A                           663  enemy_alive_check:
0000346A  0C15 0000                664      CMP.B   #0,(A5)     Compare the enemy health with zero
0000346E  6F00 0004                665      BLE     enemy_died  If the enemy health is zero or below, they died
00003472                           666      
00003472  4E75                     667      rts
00003474                           668      
00003474                           669  enemy_died:
00003474  6100 046E                670      bsr     endl            Break to a new line
00003478                           671  
00003478  43F9 00005477            672      lea     battle_won_msg,A1   Load the won battle message
0000347E  103C 000E                673      move.b  #14,D0              Move the literal #14 to D0 for trap task #14
00003482  4E4F                     674      trap    #15                 Display the message
00003484                           675      
00003484  11FC 0005 5FF3           676      move.b  #5,GAME_STATE   Set the game state mack to movement state
0000348A  564D                     677      add.w   #ALIVE,A5       Move from the enemy health to its alive status
0000348C  1ABC 0000                678      move.b  #0,(A5)         Set the enemy as dead
00003490                           679      
00003490  6100 0A0E                680      bsr     press_continue
00003494                           681      
00003494  6100 041E                682      bsr     clear_screen    Clear the screen
00003498  6100 0008                683      bsr     draw            Draw the map for first frame back in movement
0000349C  6100 005C                684      bsr     draw_hud        Draw the hud for first frame back in movement
000034A0                           685      
000034A0  4E75                     686      rts
000034A2                           687      
000034A2                           688  *-------------------------------------------------------
000034A2                           689  *-----------------Draw Quest Updates--------------------
000034A2                           690  * Draw the game progress information, status regarding
000034A2                           691  * quest
000034A2                           692  *------------------------------------------------------- 
000034A2                           693  draw:
000034A2  0C38 0005 5FF3           694      CMP.B   #5,GAME_STATE   Check which state the game is in
000034A8  6700 0A8A                695      BEQ     draw_loop       If in the movement state, draw the map
000034AC  0C38 0006 5FF3           696      CMP.B   #6,GAME_STATE   Check which state the game is in
000034B2  6700 000E                697      BEQ     draw_skeleton   If in the combat state, draw the enemy
000034B6  0C38 0007 5FF3           698      CMP.B   #7,GAME_STATE   Check which state the game is in
000034BC  6700 002E                699      BEQ     draw_merchant   If in the shop state, draw the enemy
000034C0  4E75                     700      rts
000034C2                           701      
000034C2                           702  draw_skeleton:
000034C2  43F9 000058F6            703      lea     skeleton_msg,A1 Load the skeleton message
000034C8  103C 000E                704      move.b  #14,D0          Move literal 14 for display message trap command
000034CC  4E4F                     705      trap    #15             Display the loaded message
000034CE                           706      
000034CE  4E75                     707      rts
000034D0                           708      
000034D0                           709  draw_graveyard:
000034D0  43F9 00005844            710      lea     graveyard_msg,A1 Load the graveyard message
000034D6  103C 000E                711      move.b  #14,D0           Move literal 14 for display message trap command
000034DA  4E4F                     712      trap    #15              Display the loaded message
000034DC  4E75                     713      rts                      Return from the subroutine
000034DE                           714  
000034DE                           715  draw_castle:
000034DE  43F9 00005B15            716      lea     castle_msg,A1   Load the castle message
000034E4  103C 000E                717      move.b  #14,D0          Move literal 14 for display message trap command
000034E8  4E4F                     718      trap    #15             Display the loaded message
000034EA  4E75                     719      rts                     Return from the subroutine
000034EC                           720      
000034EC                           721  draw_merchant:
000034EC  43F9 000059EE            722      lea     merchant_msg,A1  Load the merchant message
000034F2  103C 000E                723      move.b  #14,D0           Move literal 14 for display message trap command
000034F6  4E4F                     724      trap    #15              Display the loaded message
000034F8                           725      
000034F8  4E75                     726      rts
000034FA                           727      
000034FA                           728  draw_hud:
000034FA  0C38 0005 5FF3           729      CMP.B   #5,GAME_STATE       Check which state the game is in
00003500  6700 0018                730      BEQ     draw_player_info    If in the movement state, draw the player info
00003504  0C38 0006 5FF3           731      CMP.B   #6,GAME_STATE       Check which state the game is in
0000350A  6700 01A4                732      BEQ     draw_battle_info    If in the combat state, draw the combat info
0000350E  0C38 0007 5FF3           733      CMP.B   #7,GAME_STATE       Check which state the game is in
00003514  6700 01FC                734      BEQ     draw_shop_info      If in the shop state, draw the shop info
00003518                           735      
00003518  4E75                     736      rts
0000351A                           737  
0000351A                           738  *-------------------Draw Player Info--------------------
0000351A                           739  draw_player_info:
0000351A  6100 0A0A                740      bsr     get_cursor_pos   Get the cursor position and store it in D3
0000351E                           741      
0000351E                           742      * Display the player health
0000351E  3A3C 3201                743      move.w  #CSR_POS_MOVE,D5 Move a start cursor position to D5
00003522  323C 3201                744      move.w  #CSR_POS_MOVE,D1 Move a start cursor position to D1 to move the cursor
00003526  4E4F                     745      trap    #15              Move the cursor position
00003528  4281                     746      clr.l   D1               Clear the cursor position from D1
0000352A                           747      
0000352A  43F9 00005405            748      lea     health_msg,A1   Load the hud message
00003530  103C 000E                749      move.b  #14,D0          Move literal 14 for display message trap command
00003534  4E4F                     750      trap    #15             Display the loaded message
00003536                           751      
00003536  1238 5FF0                752      move.b  PLAYER,D1       Move the player health value to D1 to display
0000353A  103C 0003                753      move.b  #3,D0           Move literal 3 for display number trap command
0000353E  4E4F                     754      trap    #15             Display the number in D1
00003540                           755      
00003540                           756      * Display the torch life
00003540  6100 02F6                757      bsr     next_cursor_pos  Move to the next cursor position
00003544                           758      
00003544  43F9 0000541D            759      lea     torch_msg,A1    Load the hud message
0000354A  103C 000E                760      move.b  #14,D0          Move literal 14 for display message trap command
0000354E  4E4F                     761      trap    #15             Display the loaded message
00003550                           762      
00003550  1238 5FFB                763      move.b  PLA_TORCH,D1    Move the player torch life value to D1 to display
00003554  103C 0003                764      move.b  #3,D0           Move literal 3 for display number trap command
00003558  4E4F                     765      trap    #15             Display the number in D1
0000355A                           766      
0000355A                           767      * Display the inventory
0000355A  6100 02DC                768      bsr     next_cursor_pos  Move to the next cursor position
0000355E                           769      
0000355E  43F9 00005437            770      lea     inventory_msg,A1   Load the hud message
00003564  103C 000E                771      move.b  #14,D0          Move literal 14 for display message trap command
00003568  4E4F                     772      trap    #15             Display the loaded message
0000356A                           773      
0000356A                           774      * Display the player gold
0000356A  6100 02CC                775      bsr     next_cursor_pos  Move to the next cursor position
0000356E                           776      
0000356E  43F9 00005442            777      lea     gold_msg,A1   Load the hud message
00003574  103C 000E                778      move.b  #14,D0          Move literal 14 for display message trap command
00003578  4E4F                     779      trap    #15             Display the loaded message
0000357A                           780      
0000357A  49F8 5FF8                781      lea     PLA_GOLD,A4
0000357E  6100 02C6                782      bsr     draw_item_number
00003582                           783      
00003582                           784      * Display the player potions
00003582  6100 02B4                785      bsr     next_cursor_pos  Move to the next cursor position
00003586                           786      
00003586  43F9 00005451            787      lea     potions_msg,A1   Load the hud message
0000358C  103C 000E                788      move.b  #14,D0          Move literal 14 for display message trap command
00003590  4E4F                     789      trap    #15             Display the loaded message
00003592                           790      
00003592  49F8 5FF9                791      lea     PLA_POTIONS,A4
00003596  6100 02AE                792      bsr     draw_item_number
0000359A                           793      
0000359A                           794      * Display the player keys
0000359A  6100 029C                795      bsr     next_cursor_pos  Move to the next cursor position
0000359E                           796      
0000359E  43F9 0000544A            797      lea     key_msg,A1   Load the hud message
000035A4  103C 000E                798      move.b  #14,D0          Move literal 14 for display message trap command
000035A8  4E4F                     799      trap    #15             Display the loaded message
000035AA                           800      
000035AA  49F8 5FFA                801      lea     PLA_KEYS,A4
000035AE  6100 0296                802      bsr     draw_item_number
000035B2                           803      
000035B2  6100 000E                804      bsr     draw_map_legend Draw the map legend
000035B6                           805      
000035B6  3203                     806      move.w  D3,D1           Move the previos cursor position to D1 to put it back in place
000035B8                           807      
000035B8  103C 000B                808      move.b  #11,D0          Move the byte #11 to D0 for trap command 11          
000035BC  4E4F                     809      trap    #15             Set the cursor position with trap command 11
000035BE                           810      
000035BE  4241                     811      clr     D1              Clear D1 for later use
000035C0                           812      
000035C0  4E75                     813      rts
000035C2                           814      
000035C2                           815  *-------------------Draw Map Legend---------------------
000035C2                           816  draw_map_legend:
000035C2                           817      * Display the legend message
000035C2  3A3C 3201                818      move.w  #CSR_POS_MOVE,D5 Move a start cursor position to D5
000035C6  5E45                     819      add.w   #7,D5            increment the start position by 7
000035C8  6100 026E                820      bsr     next_cursor_pos  Move to the next cursor position
000035CC                           821      
000035CC  103C 000E                822      move.b  #14,D0          Move literal 14 for display message trap command
000035D0  43F9 00004FDF            823      lea     map_legend_msg,A1 Load the message into A1
000035D6  4E4F                     824      trap    #15             Display the loaded message
000035D8                           825      
000035D8                           826      * Display the player mark
000035D8  6100 025E                827      bsr     next_cursor_pos  Move to the next cursor position
000035DC  223C 0000FF00            828      move.l  #GREEN,D1       Load the colour green to D1
000035E2  6100 0930                829      bsr     change_font_colour  Change the font colour
000035E6                           830      
000035E6  103C 000E                831      move.b  #14,D0          Move literal 14 for display message trap command
000035EA  43F9 00004FD3            832      lea     player_mark,A1  Load the message into A1
000035F0  4E4F                     833      trap    #15             Display the loaded message
000035F2  43F9 00004FEB            834      lea     map_player_msg,A1 Load the message into A1
000035F8  4E4F                     835      trap    #15             Display the loaded message
000035FA                           836      
000035FA                           837      * Display the enemy mark
000035FA  6100 023C                838      bsr     next_cursor_pos  Move to the next cursor position
000035FE  223C 000000FF            839      move.l  #RED,D1         Load the colour red to D1
00003604  6100 090E                840      bsr     change_font_colour  Change the font colour
00003608                           841      
00003608  103C 000E                842      move.b  #14,D0          Move literal 14 for display message trap command
0000360C  43F9 00004FD5            843      lea     enemy_mark,A1   Load the message into A1
00003612  4E4F                     844      trap    #15             Display the loaded message
00003614  43F9 00004FF5            845      lea     map_enemy_msg,A1 Load the message into A1
0000361A  4E4F                     846      trap    #15             Display the loaded message
0000361C                           847      
0000361C                           848      * Display the win point mark
0000361C  6100 021A                849      bsr     next_cursor_pos  Move to the next cursor position
00003620  223C 00FF0000            850      move.l  #BLUE,D1       Load the colour blue to D1
00003626  6100 08EC                851      bsr     change_font_colour  Change the font colour
0000362A                           852      
0000362A  103C 000E                853      move.b  #14,D0          Move literal 14 for display message trap command
0000362E  43F9 00004FD7            854      lea     win_point_mark,A1   Load the message into A1
00003634  4E4F                     855      trap    #15             Display the loaded message
00003636  43F9 00004FFE            856      lea     map_win_point_msg,A1 Load the message into A1
0000363C  4E4F                     857      trap    #15             Display the loaded message
0000363E                           858     
0000363E                           859      * Display the shop mark
0000363E  6100 01F8                860      bsr     next_cursor_pos  Move to the next cursor position
00003642  223C 00F000F0            861      move.l  #PURPLE,D1      Load the colour purple to D1
00003648  6100 08CA                862      bsr     change_font_colour  Change the font colour
0000364C                           863      
0000364C  103C 000E                864      move.b  #14,D0          Move literal 14 for display message trap command
00003650  43F9 00004FD9            865      lea     shop_mark,A1   Load the message into A1
00003656  4E4F                     866      trap    #15             Display the loaded message
00003658  43F9 0000500B            867      lea     map_shop_msg,A1 Load the message into A1
0000365E  4E4F                     868      trap    #15             Display the loaded message
00003660                           869      
00003660                           870      * Display the loot mark
00003660  6100 01D6                871      bsr     next_cursor_pos  Move to the next cursor position
00003664  223C 0000FFFF            872      move.l  #GOLD,D1       Load the colour gold to D1
0000366A  6100 08A8                873      bsr     change_font_colour  Change the font colour
0000366E                           874      
0000366E  103C 000E                875      move.b  #14,D0          Move literal 14 for display message trap command
00003672  43F9 00004FDB            876      lea     loot_mark,A1    Load the message into A1
00003678  4E4F                     877      trap    #15             Display the loaded message
0000367A  43F9 00005013            878      lea     map_loot_msg,A1 Load the message into A1
00003680  4E4F                     879      trap    #15             Display the loaded message
00003682                           880      
00003682                           881      * Display the door mark
00003682  6100 01B4                882      bsr     next_cursor_pos Move to the next cursor position
00003686  223C 00507090            883      move.l  #BROWN,D1       Load the colour brown to D1
0000368C  6100 0886                884      bsr     change_font_colour  Change the font colour
00003690                           885      
00003690  103C 000E                886      move.b  #14,D0          Move literal 14 for display message trap command
00003694  43F9 00004FDD            887      lea     door_mark,A1    Load the message into A1
0000369A  4E4F                     888      trap    #15             Display the loaded message
0000369C  43F9 00005020            889      lea     map_door_msg,A1 Load the message into A1
000036A2  4E4F                     890      trap    #15             Display the loaded message
000036A4                           891      
000036A4  223C 00FFFFFF            892      move.l  #WHITE,D1       Load the colour brown to D1
000036AA  6100 0868                893      bsr     change_font_colour  Change the font colour
000036AE                           894      
000036AE  4E75                     895      rts                     Return from subroutine
000036B0                           896  
000036B0                           897  *-------------------Draw Battle Info--------------------
000036B0                           898  draw_battle_info:
000036B0  6100 0874                899      bsr     get_cursor_pos   Get the cursor position and store it in D3
000036B4                           900      
000036B4                           901      * Move cursor to draw player info
000036B4  3A3C 2001                902      move.w  #CSR_POS_BATTLE,D5
000036B8  323C 2001                903      move.w  #CSR_POS_BATTLE,D1           
000036BC  4E4F                     904      trap    #15             Set the cursor position with trap command 11
000036BE  4241                     905      clr     D1              Clear D1 of the cursor position
000036C0                           906      
000036C0  43F9 00005405            907      lea     health_msg,A1   Load the hud message
000036C6  103C 000E                908      move.b  #14,D0          Move literal 14 for display message trap command
000036CA  4E4F                     909      trap    #15             Display the loaded message
000036CC                           910      
000036CC  1238 5FF0                911      move.b  PLAYER,D1       Move the player health value to D1 to display
000036D0  103C 0003                912      move.b  #3,D0           Move literal 3 for display number trap command
000036D4  4E4F                     913      trap    #15             Display the number in D1
000036D6                           914      
000036D6                           915      * Move the cursor to draw enemy info
000036D6  6100 0160                916      bsr     next_cursor_pos Move to the next cursor position
000036DA                           917      
000036DA  43F9 0000540E            918      lea     enemy_health_msg,A1 Load the hud message
000036E0  103C 000E                919      move.b  #14,D0              Move literal 14 for display message trap command
000036E4  4E4F                     920      trap    #15                 Display the loaded message
000036E6                           921      
000036E6  1215                     922      move.b  (A5),D1         Move the enemy health value to D1 to display
000036E8  103C 0003                923      move.b  #3,D0           Move literal 3 for display number trap command
000036EC  4E4F                     924      trap    #15             Display the number in D1
000036EE                           925      
000036EE                           926      * Move the cursor to draw potion information
000036EE  6100 0148                927      bsr     next_cursor_pos Move to the next cursor position
000036F2                           928      
000036F2  43F9 00005451            929      lea     potions_msg,A1   Load the hud message
000036F8  103C 000E                930      move.b  #14,D0          Move literal 14 for display message trap command
000036FC  4E4F                     931      trap    #15             Display the loaded message
000036FE                           932      
000036FE  49F8 5FF9                933      lea     PLA_POTIONS,A4
00003702  6100 0142                934      bsr     draw_item_number
00003706                           935      
00003706                           936      * Move the cursor back to its previous position
00003706  3203                     937      move.w  D3,D1           Move the previous cursor position back to D1
00003708  103C 000B                938      move.b  #11,D0          Move the byte #11 to D0 for trap command 11          
0000370C  4E4F                     939      trap    #15             Set the cursor position with trap command 11
0000370E                           940      
0000370E  4241                     941      clr     D1              Clear D1 for later use
00003710                           942      
00003710  4E75                     943      rts
00003712                           944  
00003712                           945  *-------------------Draw Shop Info----------------------
00003712                           946  draw_shop_info:
00003712  6100 0812                947      bsr     get_cursor_pos   Get the cursor position and store it in D3
00003716                           948      
00003716                           949      * Move cursor to draw shop info
00003716  3A3C 1801                950      move.w  #CSR_POS_SHOP_S,D5
0000371A  323C 1801                951      move.w  #CSR_POS_SHOP_S,D1           
0000371E  4E4F                     952      trap    #15             Set the cursor position with trap command 11
00003720  4241                     953      clr     D1              Clear D1 of the cursor position
00003722                           954      
00003722  43F9 0000568D            955      lea     shop_stock_msg,A1   Load the hud message
00003728  103C 000E                956      move.b  #14,D0          Move literal 14 for display message trap command
0000372C  4E4F                     957      trap    #15             Display the loaded message
0000372E                           958      
0000372E                           959      
0000372E                           960      * Display the shop's potions
0000372E  6100 0108                961      bsr     next_cursor_pos Move to the next cursor position
00003732                           962      
00003732  43F9 00005451            963      lea     potions_msg,A1   Load the hud message
00003738  103C 000E                964      move.b  #14,D0          Move literal 14 for display message trap command
0000373C  4E4F                     965      trap    #15             Display the loaded message
0000373E                           966      
0000373E  544D                     967      add.w   #S_POTIONS,A5
00003740  49D5                     968      lea     (A5),A4
00003742  6100 0102                969      bsr     draw_item_number
00003746                           970      
00003746                           971      * Display the shop's keys
00003746  6100 00F0                972      bsr     next_cursor_pos Move to the next cursor position
0000374A                           973      
0000374A  43F9 0000544A            974      lea     key_msg,A1      Load the hud message
00003750  103C 000E                975      move.b  #14,D0          Move literal 14 for display message trap command
00003754  4E4F                     976      trap    #15             Display the loaded message
00003756                           977      
00003756  524D                     978      add.w   #1,A5
00003758  49D5                     979      lea     (A5),A4
0000375A  6100 00EA                980      bsr     draw_item_number
0000375E                           981      
0000375E                           982      * Display the shop's torches
0000375E  6100 00D8                983      bsr     next_cursor_pos Move to the next cursor position
00003762                           984      
00003762  43F9 0000545B            985      lea     torches_msg,A1  Load the torches message
00003768  103C 000E                986      move.b  #14,D0          Move literal 14 for display message trap command
0000376C  4E4F                     987      trap    #15             Display the loaded message
0000376E                           988      
0000376E  524D                     989      add.w   #1,A5
00003770  49D5                     990      lea     (A5),A4
00003772  6100 00D2                991      bsr     draw_item_number
00003776                           992      
00003776                           993      * Display the shop's damage upgrades
00003776  6100 00C0                994      bsr     next_cursor_pos Move to the next cursor position
0000377A                           995      
0000377A  43F9 00005464            996      lea     damage_up_msg,A1 Load the damage upgrades message
00003780  103C 000E                997      move.b  #14,D0           Move literal 14 for display message trap command
00003784  4E4F                     998      trap    #15              Display the loaded message
00003786                           999      
00003786  524D                    1000      add.w   #1,A5               Increment A5 to get to the damage upgrades
00003788  49D5                    1001      lea     (A5),A4             Load the memory address in A5 to A4
0000378A  6100 00BA               1002      bsr     draw_item_number    Draw the number of items
0000378E  5B4D                    1003      sub.w   #S_DAMAGE_IN,A5     Bring the pointer back to the root of the shop
00003790                          1004      
00003790                          1005      * Display the inventory
00003790  103C 000B               1006      move.b  #11,D0              Move the byte #11 to D0 for trap command 11
00003794  3A3C 3401               1007      move.w  #CSR_POS_SHOP_P,D5   
00003798  323C 3401               1008      move.w  #CSR_POS_SHOP_P,D1       
0000379C  4E4F                    1009      trap    #15                 Set the cursor position with trap command 11
0000379E  4241                    1010      clr     D1                  Clear D1 of the cursor position
000037A0                          1011      
000037A0  43F9 00005437           1012      lea     inventory_msg,A1    Load the hud message
000037A6  103C 000E               1013      move.b  #14,D0              Move literal 14 for display message trap command
000037AA  4E4F                    1014      trap    #15                 Display the loaded message
000037AC                          1015      
000037AC                          1016      * Display the player gold
000037AC  6100 008A               1017      bsr     next_cursor_pos Move to the next cursor position
000037B0                          1018      
000037B0  43F9 00005442           1019      lea     gold_msg,A1   Load the hud message
000037B6  103C 000E               1020      move.b  #14,D0          Move literal 14 for display message trap command
000037BA  4E4F                    1021      trap    #15             Display the loaded message
000037BC                          1022      
000037BC  49F8 5FF8               1023      lea     PLA_GOLD,A4
000037C0  6100 0084               1024      bsr     draw_item_number
000037C4                          1025      
000037C4                          1026      * Display the player potions
000037C4  6100 0072               1027      bsr     next_cursor_pos Move to the next cursor position
000037C8                          1028      
000037C8  43F9 00005451           1029      lea     potions_msg,A1   Load the hud message
000037CE  103C 000E               1030      move.b  #14,D0          Move literal 14 for display message trap command
000037D2  4E4F                    1031      trap    #15             Display the loaded message
000037D4                          1032      
000037D4  49F8 5FF9               1033      lea     PLA_POTIONS,A4
000037D8  6100 006C               1034      bsr     draw_item_number
000037DC                          1035      
000037DC                          1036      * Display the player keys
000037DC  6100 005A               1037      bsr     next_cursor_pos Move to the next cursor position
000037E0                          1038      
000037E0  43F9 0000544A           1039      lea     key_msg,A1   Load the hud message
000037E6  103C 000E               1040      move.b  #14,D0          Move literal 14 for display message trap command
000037EA  4E4F                    1041      trap    #15             Display the loaded message
000037EC                          1042      
000037EC  49F8 5FFA               1043      lea     PLA_KEYS,A4
000037F0  6100 0054               1044      bsr     draw_item_number
000037F4                          1045      
000037F4                          1046      * Display the torch life
000037F4  6100 0042               1047      bsr     next_cursor_pos Move to the next cursor position
000037F8  6100 003E               1048      bsr     next_cursor_pos Move to the next cursor position
000037FC                          1049      
000037FC  43F9 0000541D           1050      lea     torch_msg,A1   Load the hud message
00003802  103C 000E               1051      move.b  #14,D0          Move literal 14 for display message trap command
00003806  4E4F                    1052      trap    #15             Display the loaded message
00003808                          1053      
00003808  1238 5FFB               1054      move.b  PLA_TORCH,D1    Move the player torch life value to D1 to display
0000380C  103C 0003               1055      move.b  #3,D0           Move literal 3 for display number trap command
00003810  4E4F                    1056      trap    #15             Display the number in D1
00003812                          1057      
00003812                          1058      * Display the player's damage level
00003812  6100 0024               1059      bsr     next_cursor_pos Move to the next cursor position
00003816                          1060      
00003816  43F9 0000542A           1061      lea     damage_lvl_msg,A1   Load the damage level message
0000381C  103C 000E               1062      move.b  #14,D0              Move literal 14 for display message trap command
00003820  4E4F                    1063      trap    #15                 Display the loaded message
00003822                          1064      
00003822  1238 5FF1               1065      move.b  PLA_DAMAGE,D1   Move the player's damage level to D1 to display
00003826  103C 0003               1066      move.b  #3,D0           Move literal 3 for display number trap command
0000382A  4E4F                    1067      trap    #15             Display the number in D1
0000382C                          1068      
0000382C                          1069      * Move the cursor back to its previous position
0000382C  3203                    1070      move.w  D3,D1           Move the previous cursor position back to D1
0000382E  103C 000B               1071      move.b  #11,D0          Move the byte #11 to D0 for trap command 11          
00003832  4E4F                    1072      trap    #15             Set the cursor position with trap command 11
00003834                          1073      
00003834  4241                    1074      clr     D1              Clear D1 for later use
00003836                          1075      
00003836  4E75                    1076      rts
00003838                          1077  
00003838                          1078  *-------------------Helper Branches---------------------
00003838                          1079  next_cursor_pos:          * Moves the cursor one row down
00003838  103C 000B               1080      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
0000383C  5245                    1081      add.w   #1,D5           Move down rows
0000383E  3205                    1082      move.w  D5,D1           Move the current cursor pos to D1 to set it
00003840  4E4F                    1083      trap    #15             Set the cursor position with trap command 11
00003842  4241                    1084      clr     D1              Clear D1 of the cursor position
00003844  4E75                    1085      rts                     Return from the subroutine
00003846                          1086  
00003846                          1087  draw_item_number:
00003846  103C 000E               1088      move.b  #14,D0          Move literal 3 for display number trap command
0000384A  43F9 000054A9           1089      lea     bracket_open_msg,A1
00003850  4E4F                    1090      trap    #15
00003852                          1091  
00003852  103C 0003               1092      move.b  #3,D0           Move literal 3 for display number trap command
00003856  1214                    1093      move.b  (A4),D1         Move the value in the register A4 to D1 to display
00003858  4E4F                    1094      trap    #15             Display the number in D1
0000385A                          1095      
0000385A  103C 000E               1096      move.b  #14,D0          Move literal 3 for display number trap command
0000385E  43F9 000054AB           1097      lea     bracket_close_msg,A1
00003864  4E4F                    1098      trap    #15
00003866  4E75                    1099      rts
00003868                          1100  
00003868                          1101  *-------------------------------------------------------
00003868                          1102  *---Game Play (Quest Progress)--------------------------
00003868                          1103  *------------------------------------------------------- 
00003868                          1104  gameplay:
00003868  6100 007A               1105      bsr     endl            Break to a new line
0000386C  0C38 0000 5FF3          1106      CMP.B   #0,GAME_STATE   Check which stage the game is in
00003872  6700 F7A8               1107      BEQ     pick_role       Branch to the pick role subroutine
00003876  0C38 0005 5FF3          1108      CMP.B   #5,GAME_STATE   Check which stage the game is in
0000387C  6700 007C               1109      BEQ     movement        Branch to the movement subroutine
00003880  0C38 0006 5FF3          1110      CMP.B   #6,GAME_STATE   Check which stage the game is in
00003886  6700 0270               1111      BEQ     combat          branch to the combat subroutine
0000388A  0C38 0007 5FF3          1112      CMP.B   #7,GAME_STATE   Check which stage the game is in
00003890  6700 0482               1113      BEQ     shop            branch to the shop subroutine
00003894  4E75                    1114      rts                     Return from 'gameplay' subroutine
00003896                          1115  
00003896                          1116  *-------------------------------------------------------
00003896                          1117  *------------------Screen Decoration--------------------
00003896                          1118  *-------------------------------------------------------
00003896                          1119  decorate:
00003896  163C 003C               1120      move.b  #60, D3
0000389A  6100 0048               1121      bsr     endl
0000389E                          1122  out:
0000389E  43F9 000048DC           1123      lea     loop_msg,A1
000038A4  103C 000E               1124      move.b  #14,D0
000038A8  4E4F                    1125      trap    #15
000038AA  5343                    1126      sub     #1,D3   decrement loop counter
000038AC  66F0                    1127      bne     out     repeat until D0=0
000038AE  6100 0034               1128      bsr     endl
000038B2  4E75                    1129      rts
000038B4                          1130      
000038B4                          1131  clear_screen: 
000038B4  103C 000B               1132      move.b  #11,D0      clear screen
000038B8  323C FF00               1133      move.w  #$ff00,D1
000038BC  4E4F                    1134      trap    #15
000038BE  4E75                    1135      rts
000038C0                          1136  *-------------------------------------------------------
000038C0                          1137  *------------------------Replay-------------------------
000038C0                          1138  *-------------------------------------------------------
000038C0                          1139  replay:
000038C0  43F9 00004A20           1140      lea     replay_msg,A1   Load the Replay message
000038C6  103C 000E               1141      move.b  #14,D0          Move the number literal 14 to D0 for trap command
000038CA  4E4F                    1142      trap    #15             Display the loaded message
000038CC                          1143      
000038CC  1A3C 0002               1144      move.b  #2,D5           Move the number of input options to D5
000038D0  6100 F84C               1145      bsr     input           Take user input
000038D4  1401                    1146      move.b  D1,D2           Move the input to D2 so it's not trampled by the clear screen
000038D6                          1147      
000038D6  61DC                    1148      bsr     clear_screen    Clear the screen
000038D8                          1149      
000038D8  B43C 0001               1150      cmp.b   #1,D2           Compare the user input against the two options
000038DC  6700 D722               1151      beq     start           Restart if the user enters 1
000038E0  6100 F724               1152      bsr     end             Quit if the user enters 2
000038E4                          1153  
000038E4                          1154  endl:
000038E4  48E7 8040               1155      movem.l D0/A1,-(A7)
000038E8  303C 000E               1156      move    #14,D0
000038EC  43F9 0000467E           1157      lea     crlf,A1
000038F2  4E4F                    1158      trap    #15
000038F4  4CDF 0201               1159      movem.l (A7)+,D0/A1
000038F8  4E75                    1160      rts
000038FA                          1161          
000038FA                          1162  *-------------------------------------------------------
000038FA                          1163  *----------------------Manage Movement------------------
000038FA                          1164  *-------------------------------------------------------
000038FA                          1165  movement:
000038FA  43F9 00004EF4           1166      lea     movement_msg,A1 Load the movement message
00003900  103C 000E               1167      move.b  #14,D0          Move literal 14 for display message trap command
00003904  4E4F                    1168      trap    #15             Display the loaded message
00003906                          1169  
00003906  7A05                    1170      move.l  #5,D5           Move the number 4 to D5 to tell the program how many options there are
00003908                          1171      
00003908  6100 F814               1172      bsr     input           branch to the input subroutine
0000390C  6100 000C               1173      bsr     wall_collisions Branch to check wall collisions and movement
00003910                          1174      
00003910  B23C 0005               1175      CMP.B   #5,D1           Check the input against taking a potion
00003914  6700 05BE               1176      BEQ     take_potion     Branch to take a potion
00003918                          1177      
00003918  4E75                    1178      rts
0000391A                          1179  
0000391A                          1180  *-------------------------------------------------------
0000391A                          1181  *-------------------Check Wall Collisions---------------
0000391A                          1182  *-------------------------------------------------------
0000391A                          1183  wall_collisions:
0000391A                          1184      *Check collisions in the movement direction
0000391A  B23C 0001               1185      CMP.B   #1,D1       Check the movement direction
0000391E  6700 001C               1186      BEQ     move_north  Branch to Display the corridor type
00003922                          1187      
00003922  B23C 0002               1188      CMP.B   #2,D1       Check the movement direction
00003926  6700 005E               1189      BEQ     move_south  Branch to Display the corridor type
0000392A                          1190      
0000392A  B23C 0003               1191      CMP.B   #3,D1       Check the movement direction
0000392E  6700 00A0               1192      BEQ     move_west   Branch to Display the corridor type
00003932                          1193      
00003932  B23C 0004               1194      CMP.B   #4,D1       Check the movement direction
00003936  6700 00E0               1195      BEQ     move_east   Branch to Display the corridor type
0000393A                          1196      
0000393A  4E75                    1197      rts
0000393C                          1198      
0000393C                          1199  move_north:
0000393C                          1200      *Check if the tile is any of the corridor types with a wall at the top
0000393C  0C16 0002               1201      CMP.B   #2,(A6)
00003940  6700 011E               1202      BEQ     movement_blocked
00003944  0C16 0003               1203      CMP.B   #3,(A6)
00003948  6700 0116               1204      BEQ     movement_blocked
0000394C  0C16 0006               1205      CMP.B   #6,(A6)
00003950  6700 010E               1206      BEQ     movement_blocked
00003954  0C16 0007               1207      CMP.B   #7,(A6)
00003958  6700 0106               1208      BEQ     movement_blocked
0000395C  0C16 000B               1209      CMP.B   #11,(A6)
00003960  6700 00FE               1210      BEQ     movement_blocked
00003964  0C16 000C               1211      CMP.B   #12,(A6)
00003968  6700 00F6               1212      BEQ     movement_blocked
0000396C  0C16 000D               1213      CMP.B   #13,(A6)
00003970  6700 00EE               1214      BEQ     movement_blocked
00003974                          1215      
00003974  31CE 5FF6               1216      move.w  A6,PLA_P_POS        Move the player's previous location to a memory address for storage
00003978  9CFC 0010               1217      sub     #16,A6              Move the player north
0000397C                          1218      
0000397C  6100 00F4               1219      bsr     check_blocked       Check if the player is in a door
00003980  6100 0584               1220      bsr     decrement_torch     Remove one from the player's torch life
00003984                          1221  
00003984  4E75                    1222      rts
00003986                          1223      
00003986                          1224  move_south:
00003986                          1225      *Check if the tile is any of the corridor types with a wall at the bottom
00003986  0C16 0002               1226      CMP.B   #2,(A6)
0000398A  6700 00D4               1227      BEQ     movement_blocked
0000398E  0C16 0004               1228      CMP.B   #4,(A6)
00003992  6700 00CC               1229      BEQ     movement_blocked
00003996  0C16 0005               1230      CMP.B   #5,(A6)
0000399A  6700 00C4               1231      BEQ     movement_blocked
0000399E  0C16 0009               1232      CMP.B   #9,(A6)
000039A2  6700 00BC               1233      BEQ     movement_blocked
000039A6  0C16 000B               1234      CMP.B   #11,(A6)
000039AA  6700 00B4               1235      BEQ     movement_blocked
000039AE  0C16 000D               1236      CMP.B   #13,(A6)
000039B2  6700 00AC               1237      BEQ     movement_blocked
000039B6  0C16 000E               1238      CMP.B   #14,(A6)
000039BA  6700 00A4               1239      BEQ     movement_blocked
000039BE                          1240      
000039BE  31CE 5FF6               1241      move.w  A6,PLA_P_POS        Move the player's previous location to a memory address for storage
000039C2  DCFC 0010               1242      add     #16,A6              Move the player south
000039C6                          1243      
000039C6  6100 00AA               1244      bsr     check_blocked       Check if the player is in a door
000039CA  6100 053A               1245      bsr     decrement_torch     Remove one from the player's torch life
000039CE                          1246      
000039CE  4E75                    1247      rts
000039D0                          1248  
000039D0                          1249  move_west:
000039D0                          1250      *Check if the tile is any of the corridor types with a wall to the left
000039D0  0C16 0001               1251      CMP.B   #1,(A6)
000039D4  6700 008A               1252      BEQ     movement_blocked
000039D8  0C16 0003               1253      CMP.B   #3,(A6)
000039DC  6700 0082               1254      BEQ     movement_blocked
000039E0  0C16 0004               1255      CMP.B   #4,(A6)
000039E4  6700 007A               1256      BEQ     movement_blocked
000039E8  0C16 0008               1257      CMP.B   #8,(A6)
000039EC  6700 0072               1258      BEQ     movement_blocked
000039F0  0C16 000B               1259      CMP.B   #11,(A6)
000039F4  6700 006A               1260      BEQ     movement_blocked
000039F8  0C16 000C               1261      CMP.B   #12,(A6)
000039FC  6700 0062               1262      BEQ     movement_blocked
00003A00  0C16 000E               1263      CMP.B   #14,(A6)
00003A04  6700 005A               1264      BEQ     movement_blocked
00003A08                          1265      
00003A08  31CE 5FF6               1266      move.w  A6,PLA_P_POS        Move the player's previous location to a memory address for storage
00003A0C  534E                    1267      sub     #1,A6               Move the player west
00003A0E                          1268      
00003A0E  6100 0062               1269      bsr     check_blocked       Check if the player is in a door
00003A12  6100 04F2               1270      bsr     decrement_torch     Remove one from the player's torch life
00003A16                          1271      
00003A16  4E75                    1272      rts
00003A18                          1273      
00003A18                          1274  move_east:
00003A18                          1275      *Check if the tile is any of the corridor types with a wall to the right
00003A18  0C16 0001               1276      CMP.B   #1,(A6)
00003A1C  6700 0042               1277      BEQ     movement_blocked
00003A20  0C16 0005               1278      CMP.B   #5,(A6)
00003A24  6700 003A               1279      BEQ     movement_blocked
00003A28  0C16 0006               1280      CMP.B   #6,(A6)
00003A2C  6700 0032               1281      BEQ     movement_blocked
00003A30  0C16 000A               1282      CMP.B   #10,(A6)
00003A34  6700 002A               1283      BEQ     movement_blocked
00003A38  0C16 000C               1284      CMP.B   #12,(A6)
00003A3C  6700 0022               1285      BEQ     movement_blocked
00003A40  0C16 000D               1286      CMP.B   #13,(A6)
00003A44  6700 001A               1287      BEQ     movement_blocked
00003A48  0C16 000E               1288      CMP.B   #14,(A6)
00003A4C  6700 0012               1289      BEQ     movement_blocked
00003A50                          1290      
00003A50  31CE 5FF6               1291      move.w  A6,PLA_P_POS        Move the player's previous location to a memory address for storage
00003A54  524E                    1292      add     #1,A6               Move the player east
00003A56                          1293      
00003A56  6100 001A               1294      bsr     check_blocked       Check if the player is in a door
00003A5A  6100 04AA               1295      bsr     decrement_torch     Remove one from the player's torch life
00003A5E                          1296      
00003A5E  4E75                    1297      rts
00003A60                          1298  
00003A60                          1299  movement_blocked:
00003A60  43F9 00004F86           1300      lea     movement_blocked_msg,A1 Load the message
00003A66  103C 000E               1301      move.b  #14,D0                  Move the trap command to display a message
00003A6A  4E4F                    1302      trap    #15                     Display the movement blocked message
00003A6C  6100 0432               1303      bsr     press_continue          Pause the game until a key is pressed
00003A70                          1304      
00003A70  4E75                    1305      rts                             Return from the subroutine
00003A72                          1306      
00003A72                          1307  check_blocked:
00003A72  4BF8 6FE0               1308      lea     FIRST_DOOR,A5   Load the memory address of the first door
00003A76  1E3C 0000               1309      move.b  #0,D7           Move the starting door number to D5
00003A7A  6100 0004               1310      bsr     loop_thru_doors Loop through all doors
00003A7E  4E75                    1311      rts                     Return from subroutine
00003A80                          1312      
00003A80                          1313  loop_thru_doors:
00003A80  6100 0010               1314      bsr     check_for_a_door  Check for a door
00003A84                          1315      
00003A84  BA3C 0001               1316      CMP.B   #DOOR_MAX,D5    Compare the door number with the maximum door number
00003A88  6C00 0448               1317      BGE     return          Return from the loop if the current door number is greater than or equal to the max
00003A8C                          1318      
00003A8C  5207                    1319      add.b   #1,D7           Add to the current door number
00003A8E  544D                    1320      add.w   #2,A5           Add to the current door pointer to move to the next door
00003A90  60EE                    1321      bra     loop_thru_doors Keep looping the doors
00003A92                          1322  
00003A92                          1323  check_for_a_door:
00003A92  3615                    1324      move.w  (A5),D3         Move the door coordinates into data register D3 for large-value comparisons
00003A94  BDC3                    1325      CMP.L   D3,A6           Check if the door is in the current position
00003A96  6700 0004               1326      BEQ     in_a_door       Collide with the door if it is
00003A9A  4E75                    1327      rts                     Return if the door is not in the current position
00003A9C                          1328      
00003A9C                          1329  in_a_door:
00003A9C  0C38 0000 5FFA          1330      CMP.B   #0,PLA_KEYS     Check if the player has keys left
00003AA2  6F00 003C               1331      BLE     blocked_door    If the player has no keys they're blocked
00003AA6                          1332      
00003AA6  43F9 0000576A           1333      lea     locked_door_msg,A1  Load the locked door message
00003AAC  103C 000E               1334      move.b  #14,D0          Move the number literal for trap command
00003AB0  4E4F                    1335      trap    #15             Display the loaded message
00003AB2                          1336      
00003AB2  1A3C 0002               1337      move.b  #2,D5           Move the number of input options
00003AB6  6100 F666               1338      bsr     input           Take user input
00003ABA                          1339      
00003ABA  B23C 0001               1340      CMP.B   #1,D1           Compare the user input with num 1
00003ABE  6700 0006               1341      BEQ     unlock_door     Unlock the door if the user chooses to
00003AC2  6600 001C               1342      BNE     blocked_door    Branch to blocked door if the player doesn't unlock the door
00003AC6                          1343      
00003AC6                          1344  unlock_door:
00003AC6  43F9 000057E0           1345      lea     unlocked_door_msg,A1  Load the unlocked door message
00003ACC  103C 000E               1346      move.b  #14,D0          Move the number literal for trap command
00003AD0  4E4F                    1347      trap    #15             Display the loaded message
00003AD2                          1348      
00003AD2  3ABC 1000               1349      move.w  #OPEN_DOOR_POS,(A5) Move the door position out of the game for an open door
00003AD6  5338 5FFA               1350      sub.b   #1,PLA_KEYS     Remove a key from the player
00003ADA  6100 03C4               1351      bsr     press_continue  Wait for player input
00003ADE                          1352      
00003ADE  4E75                    1353      rts                     Return from subroutine
00003AE0                          1354  
00003AE0                          1355  blocked_door:
00003AE0  43F9 0000581D           1356      lea     blocked_door_msg,A1  Load the blocked door message
00003AE6  103C 000E               1357      move.b  #14,D0          Move the number literal for trap command
00003AEA  4E4F                    1358      trap    #15             Display the loaded message
00003AEC                          1359      
00003AEC  3638 5FF6               1360      move.w  PLA_P_POS,D3    Move the previous player position to D3
00003AF0  2C43                    1361      move.l  D3,A6           Move the player to their previous position
00003AF2                          1362      
00003AF2  6100 03AC               1363      bsr     press_continue  Wait for player input
00003AF6                          1364      
00003AF6  4E75                    1365      rts                     Return from subroutine
00003AF8                          1366      
00003AF8                          1367  *-------------------------------------------------------
00003AF8                          1368  *---------------------Manage Combat---------------------
00003AF8                          1369  *-------------------------------------------------------
00003AF8                          1370  combat:
00003AF8  6100 FDEA               1371      bsr endl                Break to a new line
00003AFC                          1372  
00003AFC  43F9 00005067           1373      lea     combat_msg,A1   Load the combat message
00003B02  103C 000E               1374      move.b  #14,D0          Move literal 14 for display message trap command
00003B06  4E4F                    1375      trap    #15             Display the loaded message
00003B08                          1376  
00003B08  7A05                    1377      move.l  #5,D5           Move the number 4 to D5 to tell the program how many options there are
00003B0A  6100 F612               1378      bsr     input           branch to the input subroutine
00003B0E  1801                    1379      move.b  D1,D4           Move the input to D4 for later use
00003B10                          1380      
00003B10  B23C 0001               1381      CMP.B   #1,D1           Compare input with number literal 1
00003B14  6700 0024               1382      BEQ     block_counter   Branch to block/counter subroutine
00003B18  B23C 0002               1383      CMP.B   #2,D1           Compare input with number literal 2
00003B1C  6700 0036               1384      BEQ     cast_magic      Branch to cast magic subroutine
00003B20  B23C 0003               1385      CMP.B   #3,D1           Compare input with number literal 3
00003B24  6700 0048               1386      BEQ     melee_attack    Branch to melee subroutine
00003B28  B23C 0004               1387      CMP.B   #4,D1           Compare input with number literal 4
00003B2C  6700 005A               1388      BEQ     try_run         Branch to try run subroutine
00003B30  B23C 0005               1389      CMP.B   #5,D1           Compare input with number literal 5
00003B34  6700 039E               1390      BEQ     take_potion     Branch to take potion subroutine
00003B38                          1391      
00003B38  4E75                    1392      rts
00003B3A                          1393      
00003B3A                          1394  block_counter:
00003B3A  6100 037C               1395      bsr     random_number       Get a random number 1-100
00003B3E                          1396      
00003B3E  B47C 0021               1397      CMP.W   #33,D2              Compare random with #33
00003B42  6F00 008E               1398      BLE     both_block          Enemy tries to block - attack failed
00003B46  B47C 0042               1399      CMP.W   #66,D2              Compare random with #66
00003B4A  6F00 0118               1400      BLE     hit_by_magic        Enemy casts magic - player takes damage      
00003B4E  6E00 00E4               1401      BGT     hit_against_melee   Enemy tried to lunge - enemy takes damage
00003B52                          1402      
00003B52  4E75                    1403      rts                         Return from subroutine
00003B54                          1404      
00003B54                          1405  cast_magic:
00003B54  6100 0362               1406      bsr     random_number       Get a random number 1-100
00003B58                          1407  
00003B58  B47C 0021               1408      CMP.W   #33,D2              Compare random with #33
00003B5C  6F00 00AA               1409      BLE     hit_against_block    Enemy blocks - enemy takes damage
00003B60  B47C 0042               1410      CMP.W   #66,D2              Compare random with #66
00003B64  6F00 007E               1411      BLE     both_cast_magic     Enemy casts magic - attack fails     
00003B68  6E00 0114               1412      BGT     hit_by_melee        Enemy lunges forward - player takes damage
00003B6C                          1413      
00003B6C  4E75                    1414      rts                         Return from subroutine
00003B6E                          1415  
00003B6E                          1416  melee_attack:
00003B6E  6100 0348               1417      bsr     random_number       Get a random number 1-100
00003B72                          1418  
00003B72  B47C 0021               1419      CMP.W   #33,D2              Compare random with #33
00003B76  6F00 00D2               1420      BLE     hit_by_counter      Enemy blocks and counters - player takes damage
00003B7A  B47C 0042               1421      CMP.W   #66,D2              Compare random with #66
00003B7E  6F00 009E               1422      BLE     hit_against_magic   Enemy casts magic - player takes damage     
00003B82  6E00 0072               1423      BGT     both_melee          Enemy lunges forward - attack fails
00003B86                          1424      
00003B86  4E75                    1425      rts                         Return from subroutine
00003B88                          1426  
00003B88                          1427  try_run:
00003B88  6100 032E               1428      bsr     random_number       Get a random number
00003B8C                          1429      
00003B8C  B47C 0028               1430      CMP.W   #40,D2              Compare the random number to 40
00003B90  6D00 0006               1431      BLT     escape_attack       If the random number is less than 40 the player escapes
00003B94  6C00 0020               1432      BGE     fail_escape         If the random number is more than 40 the player gets damaged
00003B98                          1433      
00003B98                          1434  escape_attack:
00003B98  3638 5FF6               1435      move.w  PLA_P_POS,D3    Move the player's previous position to D3 to avoid treating it as a negative number
00003B9C  2C43                    1436      move.l  D3,A6           Move the player to their position before entering the battle
00003B9E  11FC 0005 5FF3          1437      move.b  #5,GAME_STATE   Switch game state
00003BA4                          1438      
00003BA4  43F9 000050C9           1439      lea     escape_msg,A1   Load escape message
00003BAA  103C 000E               1440      move.b  #14,D0          Move literal for trap command
00003BAE  4E4F                    1441      trap    #15             Trap 15 to display messgae
00003BB0                          1442      
00003BB0  6100 02EE               1443      bsr     press_continue  Pause until the player presses to continue
00003BB4                          1444      
00003BB4  4E75                    1445      rts                     Return from subroutine
00003BB6                          1446      
00003BB6                          1447  fail_escape:
00003BB6  43F9 000050E4           1448      lea     fail_escape_msg,A1  Load fail escape message
00003BBC  103C 000E               1449      move.b  #14,D0              Move literal for trap command
00003BC0  4E4F                    1450      trap    #15                 Trap 15 to display message
00003BC2                          1451      
00003BC2  524D                    1452      add.w   #DAMAGE,A5           Move the enemy pointer to its damage value
00003BC4  1A15                    1453      move.b  (A5),D5             Store the damage value in D5
00003BC6  534D                    1454      sub.w   #DAMAGE,A5           Move the enemy pointer back to the enemy health/root
00003BC8  9B38 5FF0               1455      sub.b   D5,PLAYER           Remove the enemy's damage from the player's health
00003BCC                          1456      
00003BCC  6100 02D2               1457      bsr     press_continue      Pause until the player presses to continue
00003BD0  4E75                    1458      rts
00003BD2                          1459      
00003BD2                          1460  both_block:
00003BD2  103C 000E               1461      move.b  #14,D0
00003BD6  43F9 0000511F           1462      lea     both_block_msg,A1
00003BDC  4E4F                    1463      trap    #15
00003BDE                          1464      
00003BDE  6100 02C0               1465      bsr     press_continue
00003BE2  4E75                    1466      rts
00003BE4                          1467      
00003BE4                          1468  both_cast_magic:
00003BE4  103C 000E               1469      move.b  #14,D0
00003BE8  43F9 00005144           1470      lea     both_cast_magic_msg,A1
00003BEE  4E4F                    1471      trap    #15
00003BF0                          1472      
00003BF0  6100 02AE               1473      bsr     press_continue
00003BF4  4E75                    1474      rts
00003BF6                          1475  
00003BF6                          1476  both_melee:
00003BF6  103C 000E               1477      move.b  #14,D0
00003BFA  43F9 00005199           1478      lea     both_melee_msg,A1
00003C00  4E4F                    1479      trap    #15  
00003C02                          1480      
00003C02  6100 029C               1481      bsr     press_continue
00003C06  4E75                    1482      rts
00003C08                          1483  
00003C08                          1484  hit_against_block:
00003C08  103C 000E               1485      move.b  #14,D0
00003C0C  43F9 000051E2           1486      lea     hit_against_block_msg,A1
00003C12  4E4F                    1487      trap    #15  
00003C14                          1488      
00003C14  6100 0082               1489      bsr     damage_enemy    Deal damage to the enemy
00003C18                          1490      
00003C18  6100 0286               1491      bsr     press_continue
00003C1C  4E75                    1492      rts
00003C1E                          1493  
00003C1E                          1494  hit_against_magic:
00003C1E  103C 000E               1495      move.b  #14,D0
00003C22  43F9 0000522A           1496      lea     hit_against_magic_msg,A1
00003C28  4E4F                    1497      trap    #15
00003C2A                          1498      
00003C2A  6100 006C               1499      bsr     damage_enemy    Deal damage to the enemy
00003C2E                          1500      
00003C2E  6100 0270               1501      bsr     press_continue
00003C32  4E75                    1502      rts
00003C34                          1503  
00003C34                          1504  hit_against_melee:
00003C34  103C 000E               1505      move.b  #14,D0
00003C38  43F9 0000528E           1506      lea     hit_against_melee_msg,A1
00003C3E  4E4F                    1507      trap    #15
00003C40                          1508      
00003C40  6100 0056               1509      bsr     damage_enemy    Deal damage to the enemy
00003C44                          1510      
00003C44  6100 025A               1511      bsr     press_continue
00003C48  4E75                    1512      rts
00003C4A                          1513  
00003C4A                          1514  hit_by_counter:
00003C4A  103C 000E               1515      move.b  #14,D0
00003C4E  43F9 000052E4           1516      lea     hit_by_counter_msg,A1
00003C54  4E4F                    1517      trap    #15  
00003C56                          1518      
00003C56  143C 0001               1519      move.b  #1,D2               Move the enemy attack type to D2
00003C5A  6100 0076               1520      bsr     damage_player       Deal damage to the player
00003C5E                          1521      
00003C5E  6100 0240               1522      bsr     press_continue
00003C62  4E75                    1523      rts
00003C64                          1524  
00003C64                          1525  hit_by_magic:
00003C64  103C 000E               1526      move.b  #14,D0
00003C68  43F9 00005347           1527      lea     hit_by_magic_msg,A1
00003C6E  4E4F                    1528      trap    #15  
00003C70                          1529      
00003C70  143C 0002               1530      move.b  #2,D2               Move the enemy attack type to D2
00003C74  6100 005C               1531      bsr     damage_player       Deal damage to the player
00003C78                          1532      
00003C78  6100 0226               1533      bsr     press_continue
00003C7C  4E75                    1534      rts
00003C7E                          1535  
00003C7E                          1536  hit_by_melee:
00003C7E  103C 000E               1537      move.b  #14,D0
00003C82  43F9 000053B7           1538      lea     hit_by_melee_msg,A1
00003C88  4E4F                    1539      trap    #15
00003C8A                          1540      
00003C8A  143C 0003               1541      move.b  #3,D2               Move the enemy attack type to D2
00003C8E  6100 0042               1542      bsr     damage_player       Deal damage to the player
00003C92                          1543      
00003C92  6100 020C               1544      bsr     press_continue
00003C96  4E75                    1545      rts
00003C98                          1546      
00003C98                          1547  damage_enemy:
00003C98  1A38 5FF1               1548      move.b  PLA_DAMAGE,D5       Store the player damage value in D5
00003C9C  B838 5FF2               1549      CMP.B   PLA_CLASS,D4        Check if the player attack type matches the player class
00003CA0  6700 0006               1550      BEQ     double_damage_enemy Deal double damage to the enemy if attack type matches the class
00003CA4  9B15                    1551      sub.b   D5,(A5)             Remove the player's damage from the enemy's health
00003CA6  4E75                    1552      rts                         Return from subroutine
00003CA8                          1553      
00003CA8                          1554  double_damage_enemy:
00003CA8  E34D                    1555      LSL     #1,D5               Double the player damage
00003CAA  9B15                    1556      sub.b   D5,(A5)             Remove double the player's damage from the enemy's health
00003CAC                          1557      
00003CAC  6100 FC36               1558      bsr     endl                Break to new line
00003CB0  223C 00F000F0           1559      move.l  #PURPLE,D1          Load colour purple
00003CB6  6100 025C               1560      bsr     change_font_colour  Change the font colour
00003CBA                          1561      
00003CBA  43F9 0000574B           1562      lea     double_damage_msg,A1    Load the double damage message
00003CC0  103C 000E               1563      move.b  #14,D0              Move number literal 14 to D0 for trap command
00003CC4  4E4F                    1564      trap    #15
00003CC6                          1565      
00003CC6  223C 00FFFFFF           1566      move.l  #WHITE,D1           Load colour white
00003CCC  6100 0246               1567      bsr     change_font_colour  Change the font colour
00003CD0                          1568      
00003CD0  4E75                    1569      rts                         Return from subroutine
00003CD2                          1570  
00003CD2                          1571  damage_player:
00003CD2  524D                    1572      add.w   #DAMAGE,A5          Move the enemy pointer to its damage value
00003CD4  1A15                    1573      move.b  (A5),D5             Store the damage value in D5
00003CD6                          1574      
00003CD6  534D                    1575      sub.w   #DAMAGE,A5          Move the enemy pointer back to the enemy health/root
00003CD8  544D                    1576      add.w   #CLASS,A5           Move the enemy pointer to its class value
00003CDA                          1577      
00003CDA  B415                    1578      CMP.B   (A5),D2             Compare the enemy attack type to its class
00003CDC  554D                    1579      sub.w   #CLASS,A5           Move the enemy pointer back to the enemy health/root
00003CDE  6700 0008               1580      BEQ     double_damage_player    Deal double damage to the player
00003CE2                          1581      
00003CE2  9B38 5FF0               1582      sub.b   D5,PLAYER           Remove the enemy's damage from the player's health
00003CE6                          1583  
00003CE6  4E75                    1584      rts                         Return from subroutine
00003CE8                          1585      
00003CE8                          1586  double_damage_player:
00003CE8  E34D                    1587      LSL     #1,D5               Double the enemy damage
00003CEA  9B38 5FF0               1588      sub.b   D5,PLAYER           Remove double the enemy's damage from the player's health
00003CEE                          1589      
00003CEE  6100 FBF4               1590      bsr     endl                Break to new line
00003CF2  223C 000000FF           1591      move.l  #RED,D1          Load colour purple
00003CF8  6100 021A               1592      bsr     change_font_colour  Change the font colour
00003CFC                          1593      
00003CFC  43F9 0000574B           1594      lea     double_damage_msg,A1    Load the double damage message
00003D02  103C 000E               1595      move.b  #14,D0              Move number literal 14 to D0 for trap command
00003D06  4E4F                    1596      trap    #15
00003D08                          1597      
00003D08  223C 00FFFFFF           1598      move.l  #WHITE,D1           Load colour white
00003D0E  6100 0204               1599      bsr     change_font_colour  Change the font colour
00003D12                          1600      
00003D12  4E75                    1601      rts                         Return from subroutine
00003D14                          1602  
00003D14                          1603  *-------------------------------------------------------
00003D14                          1604  *----------------------Shop State-----------------------
00003D14                          1605  *-------------------------------------------------------
00003D14                          1606  shop:
00003D14  43F9 000055E5           1607      lea     shop_msg,A1     Load the shop message
00003D1A  103C 000E               1608      move.b  #14,D0          Move the number literal 14 to D0 for trap command
00003D1E  4E4F                    1609      trap    #15             Display the loaded message
00003D20                          1610  
00003D20  7A05                    1611      move.l  #5,D5           Move the number 4 to D5 to tell the program how many options there are
00003D22  6100 F3FA               1612      bsr     input           branch to the input subroutine
00003D26                          1613      
00003D26  B23C 0001               1614      CMP.B   #1,D1           Compare input with number literal 1
00003D2A  6700 0024               1615      BEQ     buy_potion      Branch to buy potion subroutine
00003D2E  B23C 0002               1616      CMP.B   #2,D1           Compare input with number literal 2
00003D32  6700 004E               1617      BEQ     buy_key         Branch to buy key subroutine
00003D36  B23C 0003               1618      CMP.B   #3,D1           Compare input with number literal 3
00003D3A  6700 007A               1619      BEQ     buy_torch       Branch to buy torch subroutine
00003D3E  B23C 0004               1620      CMP.B   #4,D1           Compare input with number literal 4
00003D42  6700 00A8               1621      BEQ     upgrade_dmg     Branch to buy damage upgrade subroutine
00003D46  B23C 0005               1622      CMP.B   #5,D1           Compare input with number literal 5
00003D4A  6700 00D4               1623      BEQ     leave_shop      Branch to leave shop subroutine
00003D4E                          1624  
00003D4E  4E75                    1625      rts                     Return from subroutine
00003D50                          1626      
00003D50                          1627  buy_potion:
00003D50  0C38 0005 5FF8          1628      CMP.B   #POTION_PRICE,PLA_GOLD  Check if the player has money for a potion
00003D56  6D00 00E6               1629      BLT     no_money                If not enough money branch to no money subroutine
00003D5A                          1630      
00003D5A  544D                    1631      add.w   #S_POTIONS,A5           Move the shop pointer to the potions
00003D5C  0C15 0000               1632      CMP.B   #0,(A5)                 Check that the shop still has potions left
00003D60  6F00 00EE               1633      BLE     no_shop_potions         If no potions left branch to no shop potions subroutine
00003D64                          1634      
00003D64  5B38 5FF8               1635      sub.b   #POTION_PRICE,PLA_GOLD  Remove the potion price from the player's gold
00003D68  5315                    1636      sub.b   #1,(A5)                 Remove one potion from the shop
00003D6A  5238 5FF9               1637      add.b   #1,PLA_POTIONS          Add one potion to the player's inventory
00003D6E                          1638      
00003D6E  554D                    1639      sub.w   #S_POTIONS,A5           Move the shop pointer back to root
00003D70                          1640      
00003D70  43F9 00005677           1641      lea     buy_item_msg,A1         Load the buy item message into A1
00003D76  103C 000E               1642      move.b  #14,D0                  Move the number literal 14 to D0 for trap command
00003D7A  4E4F                    1643      trap    #15                     Display the loaded message
00003D7C                          1644      
00003D7C  6100 0122               1645      bsr     press_continue          Pause for user input
00003D80                          1646      
00003D80  4E75                    1647      rts                             Return from subroutine
00003D82                          1648      
00003D82                          1649  buy_key:
00003D82  0C38 000F 5FF8          1650      CMP.B   #KEY_PRICE,PLA_GOLD     Check if the player has money for a key
00003D88  6D00 00B4               1651      BLT     no_money                If not enough money branch to no money subroutine
00003D8C                          1652      
00003D8C  564D                    1653      add.w   #S_KEYS,A5              Move the shop pointer to the keys
00003D8E  0C15 0000               1654      CMP.B   #0,(A5)                 Check that the shop still has keys left
00003D92  6F00 00D0               1655      BLE     no_shop_keys            If no keys left branch to no shop keys subroutine
00003D96                          1656      
00003D96  0438 000F 5FF8          1657      sub.b   #KEY_PRICE,PLA_GOLD     Remove the key price from the player's gold
00003D9C  5315                    1658      sub.b   #1,(A5)                 Remove one key from the shop
00003D9E  5238 5FFA               1659      add.b   #1,PLA_KEYS             Add one key to the player's inventory
00003DA2                          1660      
00003DA2  574D                    1661      sub.w   #S_KEYS,A5              Move the shop pointer back to root
00003DA4                          1662  
00003DA4  43F9 00005677           1663      lea     buy_item_msg,A1         Load the buy item message into A1
00003DAA  103C 000E               1664      move.b  #14,D0                  Move the number literal 14 to D0 for trap command
00003DAE  4E4F                    1665      trap    #15                     Display the loaded message
00003DB0                          1666      
00003DB0  6100 00EE               1667      bsr     press_continue          Pause for user input
00003DB4                          1668      
00003DB4  4E75                    1669      rts                             Return from subroutine
00003DB6                          1670      
00003DB6                          1671  buy_torch:
00003DB6  0C38 000A 5FF8          1672      CMP.B   #TORCH_PRICE,PLA_GOLD   Check if the player has money for a torch
00003DBC  6D00 0080               1673      BLT     no_money                If not enough money branch to no money subroutine
00003DC0                          1674      
00003DC0  584D                    1675      add.w   #S_TORCHES,A5           Move the shop pointer to the torches
00003DC2  0C15 0000               1676      CMP.B   #0,(A5)                 Check that the shop still has torches left
00003DC6  6F00 00B0               1677      BLE     no_shop_torches         If no torches left branch to no shop torches subroutine
00003DCA                          1678      
00003DCA  0438 000A 5FF8          1679      sub.b   #TORCH_PRICE,PLA_GOLD   Remove the torch price from the player's gold
00003DD0  5315                    1680      sub.b   #1,(A5)                 Remove one torch from the shop
00003DD2  0638 000F 5FFB          1681      add.b   #LIFE_PER_TORCH,PLA_TORCH           Add ten to the player's torches life
00003DD8                          1682      
00003DD8  594D                    1683      sub.w   #S_TORCHES,A5           Move the shop pointer back to root
00003DDA                          1684  
00003DDA  43F9 00005677           1685      lea     buy_item_msg,A1         Load the buy item message into A1
00003DE0  103C 000E               1686      move.b  #14,D0                  Move the number literal 14 to D0 for trap command
00003DE4  4E4F                    1687      trap    #15                     Display the loaded message
00003DE6                          1688      
00003DE6  6100 00B8               1689      bsr     press_continue          Pause for user input
00003DEA                          1690      
00003DEA  4E75                    1691      rts                             Return from subroutine
00003DEC                          1692      
00003DEC                          1693  upgrade_dmg:
00003DEC  0C38 0014 5FF8          1694      CMP.B   #DAMAGE_UP_PRICE,PLA_GOLD   Check if the player has money for a damage upgrade
00003DF2  6D00 004A               1695      BLT     no_money                    If not enough money branch to no money subroutine
00003DF6                          1696      
00003DF6  5A4D                    1697      add.w   #S_DAMAGE_IN,A5         Move the shop pointer to the damage upgrades
00003DF8  0C15 0000               1698      CMP.B   #0,(A5)                 Check that the shop still has damage upgrades left
00003DFC  6F00 008E               1699      BLE     no_shop_damage_up       If no damage upgrades left branch to no shop torches subroutine
00003E00                          1700      
00003E00  0438 0014 5FF8          1701      sub.b   #DAMAGE_UP_PRICE,PLA_GOLD   Remove the damage upgrade price from the player's gold
00003E06  5315                    1702      sub.b   #1,(A5)                     Remove one damage upgrade from the shop
00003E08  5238 5FF1               1703      add.b   #1,PLA_DAMAGE               Add one to the player's damage value
00003E0C                          1704      
00003E0C  5B4D                    1705      sub.w   #S_DAMAGE_IN,A5         Move the shop pointer back to root
00003E0E                          1706  
00003E0E  43F9 00005677           1707      lea     buy_item_msg,A1         Load the buy item message into A1
00003E14  103C 000E               1708      move.b  #14,D0                  Move the number literal 14 to D0 for trap command
00003E18  4E4F                    1709      trap    #15                     Display the loaded message
00003E1A                          1710      
00003E1A  6100 0084               1711      bsr     press_continue          Pause for user input
00003E1E                          1712      
00003E1E  4E75                    1713      rts                             Return from subroutine
00003E20                          1714      
00003E20                          1715  leave_shop:
00003E20  3638 5FF6               1716      move.w  PLA_P_POS,D3        Move the player's previous position to D3 to avoid treating it as a negative number
00003E24  2C43                    1717      move.l  D3,A6               Move the player to their position before entering the shop
00003E26  11FC 0005 5FF3          1718      move.b  #5,GAME_STATE       Switch game state to movement
00003E2C                          1719      
00003E2C  43F9 00005651           1720      lea     leave_shop_msg,A1   Load escape message
00003E32  103C 000E               1721      move.b  #14,D0              Move literal for trap command
00003E36  4E4F                    1722      trap    #15                 Trap 15 to display messgae
00003E38                          1723      
00003E38  6100 0066               1724      bsr     press_continue      Pause until the player presses to continue
00003E3C  4E75                    1725      rts                         Return from subroutine
00003E3E                          1726      
00003E3E                          1727  no_money:
00003E3E  43F9 000056A5           1728      lea     no_money_msg,A1 Load the no money message
00003E44  103C 000E               1729      move.b  #14,D0          Move the number literal 14 to D0 for trap command
00003E48  4E4F                    1730      trap    #15             Display the loaded message
00003E4A                          1731      
00003E4A  6100 0054               1732      bsr     press_continue  Wait for player input
00003E4E  4E75                    1733      rts                     Return from subroutine
00003E50                          1734      
00003E50                          1735  no_shop_potions:
00003E50  43F9 000056C5           1736      lea     no_item_msg,A1  Load the no money message
00003E56  103C 000E               1737      move.b  #14,D0          Move the number literal 14 to D0 for trap command
00003E5A  4E4F                    1738      trap    #15             Display the loaded message
00003E5C  554D                    1739      sub.w   #S_POTIONS,A5   Move the shop pointer back to root
00003E5E                          1740      
00003E5E  6100 0040               1741      bsr     press_continue  Wait for player input
00003E62  4E75                    1742      rts                     Return from subroutine
00003E64                          1743      
00003E64                          1744  no_shop_keys:
00003E64  43F9 000056C5           1745      lea     no_item_msg,A1  Load the no money message
00003E6A  103C 000E               1746      move.b  #14,D0          Move the number literal 14 to D0 for trap command
00003E6E  4E4F                    1747      trap    #15             Display the loaded message
00003E70  574D                    1748      sub.w   #S_KEYS,A5      Move the shop pointer back to root
00003E72                          1749      
00003E72  6100 002C               1750      bsr     press_continue  Wait for player input
00003E76  4E75                    1751      rts                     Return from subroutine
00003E78                          1752      
00003E78                          1753  no_shop_torches:
00003E78  43F9 000056C5           1754      lea     no_item_msg,A1  Load the no money message
00003E7E  103C 000E               1755      move.b  #14,D0          Move the number literal 14 to D0 for trap command
00003E82  4E4F                    1756      trap    #15             Display the loaded message
00003E84  594D                    1757      sub.w   #S_TORCHES,A5   Move the shop pointer back to root
00003E86                          1758      
00003E86  6100 0018               1759      bsr     press_continue  Wait for player input
00003E8A  4E75                    1760      rts                     Return from subroutine
00003E8C                          1761  
00003E8C                          1762  no_shop_damage_up:
00003E8C  43F9 000056C5           1763      lea     no_item_msg,A1  Load the no money message
00003E92  103C 000E               1764      move.b  #14,D0          Move the number literal 14 to D0 for trap command
00003E96  4E4F                    1765      trap    #15             Display the loaded message
00003E98  5B4D                    1766      sub.w   #S_DAMAGE_IN,A5 Move the shop pointer back to root
00003E9A                          1767      
00003E9A  6100 0004               1768      bsr     press_continue  Wait for player input
00003E9E  4E75                    1769      rts                     Return from subroutine
00003EA0                          1770  
00003EA0                          1771  *-------------------------------------------------------
00003EA0                          1772  *-------------------Misc Subroutines--------------------
00003EA0                          1773  *-------------------------------------------------------
00003EA0                          1774  press_continue:
00003EA0  6100 FA42               1775      bsr     endl
00003EA4                          1776  
00003EA4  43F9 00004FA1           1777      lea     continue_msg,A1 Load message into A1
00003EAA  103C 000E               1778      move.b  #14,D0          Move the trap command to display a message
00003EAE  4E4F                    1779      trap    #15             display the "press any ket to continue" text
00003EB0                          1780      
00003EB0  103C 0004               1781      move.b  #4,D0           Move the trap command to take input
00003EB4  4E4F                    1782      trap    #15             take input to freeze the game
00003EB6  4E75                    1783      rts                     Return from the 'press continue' subroutine
00003EB8                          1784      
00003EB8                          1785  random_number:              *Psuedo random number generator, courtesy of Pdraig
00003EB8  103C 0008               1786      move.b  #8,D0
00003EBC  4E4F                    1787      trap    #15
00003EBE  C2BC 005FFFFF           1788      and.l   #$5FFFFF,d1     prevent overflow in divu
00003EC4  82FC 0064               1789      divu    #100,D1         time count / 100
00003EC8  4841                    1790      swap    D1              swap upper and lower words of D1 to put remainder in low word
00003ECA  5241                    1791      addq.w  #1,D1           d1.w contains number from 1 to 100
00003ECC  3401                    1792      move    D1,D2           d2 = d1
00003ECE  4281                    1793      clr.l   D1
00003ED0                          1794      
00003ED0  4E75                    1795      rts                     Returns from random generation subroutine
00003ED2                          1796      
00003ED2                          1797  return:   *Subroutine to branch to to break out of a subroutine when a condition is met
00003ED2  4E75                    1798      rts
00003ED4                          1799      
00003ED4                          1800  take_potion:
00003ED4  0C38 0000 5FF9          1801      CMP.B   #0,PLA_POTIONS      Check if the player has potions to drink
00003EDA  6F00 001A               1802      BLE     no_potions          If the potions are zero or below branch to no_potions
00003EDE                          1803      
00003EDE  5638 5FF0               1804      add.b   #3,PLAYER           Add 3 to the player's health
00003EE2  5338 5FF9               1805      sub.b   #1,PLA_POTIONS      Remove one potion
00003EE6                          1806      
00003EE6  43F9 0000555F           1807      lea     take_potion_msg,A1  Load the take potion message
00003EEC  103C 000E               1808      move.b  #14,D0              Move the number literal 14 to D0 for trap command
00003EF0  4E4F                    1809      trap    #15                 Display the loaded message
00003EF2                          1810      
00003EF2  61AC                    1811      bsr     press_continue      Wait for player input
00003EF4                          1812      
00003EF4  4E75                    1813      rts                         Return from subroutine
00003EF6                          1814  
00003EF6                          1815  no_potions:
00003EF6  43F9 00005599           1816      lea     no_potions_msg,A1   Load the no potions message
00003EFC  103C 000E               1817      move.b  #14,D0              Move the number literal 14 to D0 for trap command
00003F00  4E4F                    1818      trap    #15                 Display the loaded message
00003F02                          1819      
00003F02  619C                    1820      bsr     press_continue      Wait for player input
00003F04                          1821      
00003F04  4E75                    1822      rts                         Return from subroutine
00003F06                          1823      
00003F06                          1824  decrement_torch:
00003F06  0C38 0000 5FFB          1825      CMP.B   #0,PLA_TORCH    Compare the torch life to 0
00003F0C  6FC4                    1826      BLE     return          If it's less than or equalt to zero, return
00003F0E  5338 5FFB               1827      sub.b   #1,PLA_TORCH    Decrement by one if it's above zero
00003F12  4E75                    1828      rts                     Return from subroutine
00003F14                          1829      
00003F14                          1830  change_font_colour:        * Changes the font colour to the colour loaded in D1
00003F14  103C 0015               1831      move.b  #21,D0      Move #21 to D0 for trap command 21
00003F18  243C 01090000           1832      move.l  #FONT,D2    Move the font to D2
00003F1E  4E4F                    1833      trap    #15         Set the colour
00003F20  4281                    1834      clr.l   D1          Clear D1 for later use
00003F22  4282                    1835      clr.l   D2          Clear D2 for later use
00003F24  4E75                    1836      rts                 Return from subroutine
00003F26                          1837      
00003F26                          1838  get_cursor_pos:
00003F26  323C 00FF               1839      move.w  #255,D1         Move the word #255 to D1 to set the type of trap 11
00003F2A  103C 000B               1840      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
00003F2E  4E4F                    1841      trap    #15             Trap to get the cursor position in D1
00003F30                          1842      
00003F30  2601                    1843      move.l  D1,D3           Move the value in D1 to D3 for storage
00003F32  4E75                    1844      rts
00003F34                          1845      
00003F34                          1846  *-------------------------------------------------------
00003F34                          1847  *----------------------Draw loop------------------------
00003F34                          1848  *-------------------------------------------------------
00003F34                          1849  draw_loop:
00003F34  45F9 00008080           1850      lea     MAP_START_POINT,A2     Load starting memory location into A7
00003F3A  1C3C 0000               1851      move.b  #0,D6           Data register used for rows
00003F3E  1E3C 0000               1852      move.b  #0,D7           Data register used for columns
00003F42  7200                    1853      move.l  #0,D1           Clear the D1 data register
00003F44                          1854      
00003F44  6100 0004               1855      bsr     loop_rows       Loop for every row
00003F48  4E75                    1856      rts
00003F4A                          1857      
00003F4A                          1858  loop_rows:
00003F4A  BC7C 000F               1859      CMP     #MAP_LENGTH,D6          Check the rows don't go out of bounds
00003F4E  6E82                    1860      BGT     return          If the rows are greater than 22 end the loop
00003F50                          1861      
00003F50  1E3C 0000               1862      move.b  #0,D7           Reset to column 0
00003F54  6100 000A               1863      bsr     loop_columns    Loop for every column
00003F58                          1864      
00003F58  5206                    1865      add.b   #1,D6           Add to the rows
00003F5A                          1866      
00003F5A  6100 F988               1867      bsr     endl            Break to the next line
00003F5E  60EA                    1868      bra     loop_rows       Loop through the rows again
00003F60                          1869      
00003F60                          1870  loop_columns:
00003F60  BE3C 000F               1871      CMP.B   #15,D7              Check the rows don't go out of bounds
00003F64  6E00 FF6C               1872      BGT     return              If the rows are greater than 22 end the loop
00003F68                          1873      
00003F68  6100 0020               1874      bsr     draw_tile           Draw the current tile
00003F6C  6100 00C6               1875      bsr     check_for_loot_piles Draw the loot piles if there is one on the current tile
00003F70  6100 0140               1876      bsr     check_for_player    Draw the player in the current tile if they're there
00003F74  6100 0184               1877      bsr     check_for_enemies   Draw an enemy in the current tile if they is one there
00003F78  6100 02C0               1878      bsr     check_for_win_point Draw the win point in the current tile if it's there
00003F7C  6100 01F2               1879      bsr     check_for_shops     Draw a shop in the current tile if there is one
00003F80  6100 025A               1880      bsr     check_for_doors     Draw a door in the current ile if there is one
00003F84                          1881      
00003F84  5207                    1882      add.b   #1,D7               Add to the column count
00003F86  524A                    1883      add     #1,A2               Move to the next memory location
00003F88  60D6                    1884      bra     loop_columns        Loop the columns again
00003F8A                          1885      
00003F8A                          1886  *-------------------------------------------------------
00003F8A                          1887  *----------------------Draw tile------------------------
00003F8A                          1888  *-------------------------------------------------------
00003F8A                          1889  *Draws the tile at the address in the address register A2
00003F8A                          1890  draw_tile:
00003F8A  0C12 00FF               1891      CMP.B   #255,(A2)           Check if the value is undifined
00003F8E  6700 005E               1892      BEQ     draw_blocked_tile   Draw the blank tile
00003F92                          1893      
00003F92  0C12 0001               1894      CMP.B   #1,(A2)
00003F96  6700 0064               1895      BEQ     draw_both_tile
00003F9A  0C12 0003               1896      CMP.B   #3,(A2)
00003F9E  6700 006A               1897      BEQ     draw_left_tile
00003FA2  0C12 0004               1898      CMP.B   #4,(A2)
00003FA6  6700 0062               1899      BEQ     draw_left_tile
00003FAA  0C12 0005               1900      CMP.B   #5,(A2)
00003FAE  6700 0068               1901      BEQ     draw_right_tile
00003FB2  0C12 0006               1902      CMP.B   #6,(A2)
00003FB6  6700 0060               1903      BEQ     draw_right_tile
00003FBA  0C12 0008               1904      CMP.B   #8,(A2)
00003FBE  6700 004A               1905      BEQ     draw_left_tile
00003FC2  0C12 000A               1906      CMP.B   #10,(A2)
00003FC6  6700 0050               1907      BEQ     draw_right_tile
00003FCA  0C12 000B               1908      CMP.B   #11,(A2)
00003FCE  6700 003A               1909      BEQ     draw_left_tile
00003FD2  0C12 000C               1910      CMP.B   #12,(A2)
00003FD6  6700 0024               1911      BEQ     draw_both_tile
00003FDA  0C12 000D               1912      CMP.B   #13,(A2)
00003FDE  6700 0038               1913      BEQ     draw_right_tile
00003FE2  0C12 000E               1914      CMP.B   #14,(A2)
00003FE6  6700 0014               1915      BEQ     draw_both_tile
00003FEA                          1916      
00003FEA  6000 003A               1917      BRA     draw_blank_tile     Draw the blank tile
00003FEE                          1918      
00003FEE                          1919  draw_blocked_tile:
00003FEE  43F9 00004FCF           1920      lea     blocked_tile,A1
00003FF4  103C 000E               1921      move.b  #14,D0
00003FF8  4E4F                    1922      trap    #15
00003FFA  4E75                    1923      rts
00003FFC                          1924      
00003FFC                          1925  draw_both_tile:
00003FFC  43F9 00004FC3           1926      lea     both_tile,A1
00004002  103C 000E               1927      move.b  #14,D0
00004006  4E4F                    1928      trap    #15
00004008  4E75                    1929      rts
0000400A                          1930      
0000400A                          1931  draw_left_tile:
0000400A  43F9 00004FC7           1932      lea     left_tile,A1
00004010  103C 000E               1933      move.b  #14,D0
00004014  4E4F                    1934      trap    #15
00004016  4E75                    1935      rts
00004018                          1936      
00004018                          1937  draw_right_tile:
00004018  43F9 00004FCB           1938      lea     right_tile,A1
0000401E  103C 000E               1939      move.b  #14,D0
00004022  4E4F                    1940      trap    #15
00004024  4E75                    1941      rts
00004026                          1942      
00004026                          1943  draw_blank_tile:
00004026  43F9 00004FBF           1944      lea     blank_tile,A1
0000402C  103C 000E               1945      move.b  #14,D0
00004030  4E4F                    1946      trap    #15
00004032  4E75                    1947      rts
00004034                          1948  
00004034                          1949  *----------------------Draw Loot------------------------
00004034                          1950  check_for_loot_piles:
00004034  4BF8 7000               1951      lea     FIRST_LOOT,A5   Load the memory address of the first loot pile
00004038  1A3C 0000               1952      move.b  #0,D5           Move the starting loot number to D5
0000403C  6100 0004               1953      bsr     loop_loot_piles Loop through all loot piles
00004040  4E75                    1954      rts                     Return from subroutine
00004042                          1955      
00004042                          1956  loop_loot_piles:
00004042  6100 0014               1957      bsr     check_for_loot  Check for a loot pile
00004046                          1958      
00004046  BA3C 0002               1959      CMP.B   #ENEMY_MAX,D5   Compare the enemy number with the maximum loot number
0000404A  6C00 FE86               1960      BGE     return          Return from the loop if the current loot number is greater than or equal to the max
0000404E                          1961      
0000404E  5205                    1962      add.b   #1,D5           Add to the current loot number
00004050  DAFC 0010               1963      add.w   #16,A5          Add to the current loot pointer to move to the next loot pile
00004054  5D4D                    1964      sub.w   #L_ACTIVE,A5    Move to the root
00004056  60EA                    1965      bra     loop_loot_piles Keep looping the loot piles
00004058                          1966      
00004058                          1967  check_for_loot:
00004058  5C4D                    1968      add.w   #L_ACTIVE,A5    Move to the active state
0000405A  0C15 0000               1969      CMP.B   #0,(A5)         Return if the loot is not active
0000405E  6700 FE72               1970      BEQ     return
00004062  5D4D                    1971      sub.w   #L_ACTIVE,A5    Move to the root
00004064                          1972  
00004064  3615                    1973      move.w  (A5),D3         Move the enemy coordinates into data register D3 for large-value comparisons
00004066  B5C3                    1974      CMP.L   D3,A2           Check if the enemy is in the current position
00004068  6700 0006               1975      BEQ     draw_loot       Draw the enemy if it is
0000406C  5C4D                    1976      add.w   #L_ACTIVE,A5    Move to the active state
0000406E  4E75                    1977      rts                     Return if the enemy is not in the current position
00004070                          1978      
00004070                          1979  draw_loot:
00004070  5C4D                    1980      add.w   #L_ACTIVE,A5    Move to the active state
00004072                          1981  
00004072  323C 00FF               1982      move.w  #255,D1         Move the word #255 to D1 to set the type of trap 11
00004076  103C 000B               1983      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
0000407A  4E4F                    1984      trap    #15             Trap to get the cursor position in D1
0000407C                          1985      
0000407C  0441 0200               1986      sub.w   #512,D1         Move the cursor back by two columns
00004080  4E4F                    1987      trap    #15             Set the cursor position with trap command 11
00004082                          1988      
00004082  2601                    1989      move.l  D1,D3           Move the value in D1 to D3 for storage
00004084                          1990      
00004084  223C 0000FFFF           1991      move.l  #GOLD,D1         Move the colour red to D1
0000408A  6100 FE88               1992      bsr     change_font_colour  Change the font colour
0000408E                          1993      
0000408E  43F9 00004FDB           1994      lea     loot_mark,A1   load the enemy symbol
00004094  103C 000E               1995      move.b  #14,D0          Move #14 to D0 for trap command 14
00004098  4E4F                    1996      trap    #15             Draw the player mark
0000409A                          1997      
0000409A  223C 00FFFFFF           1998      move.l  #WHITE,D1       Move the colour white to D1
000040A0  6100 FE72               1999      bsr     change_font_colour  Change the font colour
000040A4                          2000      
000040A4  2203                    2001      move.l  D3,D1           Move the value in D3 to D1 for previous cursor position
000040A6                          2002      
000040A6  0641 0200               2003      add.w   #512,D1         Move the cursor position two columns forward
000040AA  103C 000B               2004      move.b  #11,D0          Move byte #11 for trap command 11 
000040AE  4E4F                    2005      trap    #15             Set the cursor position
000040B0                          2006      
000040B0  4E75                    2007      rts 
000040B2                          2008  
000040B2                          2009  *---------------------Draw Player-----------------------
000040B2                          2010  check_for_player:
000040B2  B5CE                    2011      CMP.L   A6,A2
000040B4  6700 0004               2012      BEQ     draw_player
000040B8  4E75                    2013      rts
000040BA                          2014      
000040BA                          2015  draw_player:
000040BA  323C 00FF               2016      move.w  #255,D1         Move the word #255 to D1 to set the type of trap 11
000040BE  103C 000B               2017      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
000040C2  4E4F                    2018      trap    #15             Trap to get the cursor position in D1
000040C4                          2019      
000040C4  0441 0200               2020      sub.w   #512,D1         Move the cursor back by two columns
000040C8  4E4F                    2021      trap    #15             Set the cursor position with trap command 11
000040CA                          2022      
000040CA  2601                    2023      move.l  D1,D3          Move the value in D1 to D3 for storage
000040CC                          2024      
000040CC  223C 0000FF00           2025      move.l  #GREEN,D1       Move the colour green to D1
000040D2  6100 FE40               2026      bsr     change_font_colour  Change the font colour
000040D6                          2027      
000040D6  43F9 00004FD3           2028      lea     player_mark,A1  load the player symbol
000040DC  103C 000E               2029      move.b  #14,D0          Move #14 to D0 for trap command 14
000040E0  4E4F                    2030      trap    #15             Draw the player mark
000040E2                          2031      
000040E2  223C 00FFFFFF           2032      move.l  #WHITE,D1       Move the colour white to D1
000040E8  6100 FE2A               2033      bsr     change_font_colour  Change the font colour
000040EC                          2034      
000040EC  2203                    2035      move.l  D3,D1           Move the value in D3 to D1 for previous cursor position
000040EE                          2036      
000040EE  0641 0200               2037      add.w   #512,D1         Move the cursor position two columns forward
000040F2  103C 000B               2038      move.b  #11,D0          Move byte #11 for trap command 11 
000040F6  4E4F                    2039      trap    #15             Set the cursor position
000040F8                          2040      
000040F8  4E75                    2041      rts
000040FA                          2042      
000040FA                          2043  *---------------------Draw Enemies----------------------
000040FA                          2044  check_for_enemies:
000040FA  4BF8 6000               2045      lea     FIRST_ENEMY,A5  Load the memory address of the first enemy
000040FE  1A3C 0000               2046      move.b  #0,D5           Move the starting enemy number to D5
00004102  6100 0004               2047      bsr     loop_enemies    Loop through all enemies
00004106  4E75                    2048      rts                     Return from subroutine
00004108                          2049      
00004108                          2050  loop_enemies:
00004108  6100 0012               2051      bsr     check_for_enemy Check for an enemy
0000410C                          2052      
0000410C  BA3C 0002               2053      CMP.B   #ENEMY_MAX,D5   Compare the enemy number with the maximum enemy number
00004110  6C00 FDC0               2054      BGE     return          Return from the loop if the current enemy number is greater than or equal to the max
00004114                          2055      
00004114  5205                    2056      add.b   #1,D5           Add to the current enemy number
00004116  DAFC 000C               2057      add.w   #12,A5          Add to the current enemy pointer to move to the next enemy (16 for next enemy - 4 to get back from position)
0000411A  60EC                    2058      bra     loop_enemies    Keep looping the enemies
0000411C                          2059      
0000411C                          2060  check_for_enemy:
0000411C  564D                    2061      add.w   #ALIVE,A5       Add to the enemy memory address to get the enemy's alive state
0000411E  0C1D 0000               2062      CMP.B   #0,(A5)+        Check if the enemy is alive
00004122  6700 FDAE               2063      BEQ     return          Return from the subroutine if not
00004126                          2064      
00004126  3615                    2065      move.w  (A5),D3         Move the enemy coordinates into data register D3 for large-value comparisons
00004128  B5C3                    2066      CMP.L   D3,A2           Check if the enemy is in the current position
0000412A  6700 0004               2067      BEQ     draw_enemy      Draw the enemy if it is
0000412E  4E75                    2068      rts                     Return if the enemy is not in the current position
00004130                          2069      
00004130                          2070  draw_enemy:
00004130  323C 00FF               2071      move.w  #255,D1         Move the word #255 to D1 to set the type of trap 11
00004134  103C 000B               2072      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
00004138  4E4F                    2073      trap    #15             Trap to get the cursor position in D1
0000413A                          2074      
0000413A  0441 0200               2075      sub.w   #512,D1         Move the cursor back by two columns
0000413E  4E4F                    2076      trap    #15             Set the cursor position with trap command 11
00004140                          2077      
00004140  2601                    2078      move.l  D1,D3          Move the value in D1 to D3 for storage
00004142                          2079      
00004142  223C 000000FF           2080      move.l  #RED,D1         Move the colour red to D1
00004148  6100 FDCA               2081      bsr     change_font_colour  Change the font colour
0000414C                          2082      
0000414C  43F9 00004FD5           2083      lea     enemy_mark,A1   load the enemy symbol
00004152  103C 000E               2084      move.b  #14,D0          Move #14 to D0 for trap command 14
00004156  4E4F                    2085      trap    #15             Draw the player mark
00004158                          2086      
00004158  223C 00FFFFFF           2087      move.l  #WHITE,D1       Move the colour white to D1
0000415E  6100 FDB4               2088      bsr     change_font_colour  Change the font colour
00004162                          2089      
00004162  2203                    2090      move.l  D3,D1           Move the value in D3 to D1 for previous cursor position
00004164                          2091      
00004164  0641 0200               2092      add.w   #512,D1         Move the cursor position two columns forward
00004168  103C 000B               2093      move.b  #11,D0          Move byte #11 for trap command 11 
0000416C  4E4F                    2094      trap    #15             Set the cursor position
0000416E                          2095      
0000416E  4E75                    2096      rts 
00004170                          2097   
00004170                          2098  *----------------------Draw Shops-----------------------
00004170                          2099  check_for_shops:
00004170  4BF8 6500               2100      lea     FIRST_SHOP,A5   Load the memory address of the first shop
00004174  1A3C 0000               2101      move.b  #0,D5           Move the starting shop number to D5
00004178  6100 0004               2102      bsr     loop_shops      Loop through all shops
0000417C  4E75                    2103      rts                     Return from subroutine
0000417E                          2104      
0000417E                          2105  loop_shops:
0000417E  6100 0012               2106      bsr     check_for_shop  Check for a shop
00004182                          2107      
00004182  BA3C 0002               2108      CMP.B   #SHOP_MAX,D5    Compare the shop number with the maximum shop number
00004186  6C00 FD4A               2109      BGE     return          Return from the loop if the current shop number is greater than or equal to the max
0000418A                          2110      
0000418A  5205                    2111      add.b   #1,D5           Add to the current shop number
0000418C  DAFC 0010               2112      add.w   #16,A5          Add to the current shop pointer to move to the next shop
00004190  60EC                    2113      bra     loop_shops      Keep looping the shops
00004192                          2114      
00004192                          2115  check_for_shop:
00004192  3615                    2116      move.w  (A5),D3         Move the shop coordinates into data register D3 for large-value comparisons
00004194  B5C3                    2117      CMP.L   D3,A2           Check if the shop is in the current position
00004196  6700 0004               2118      BEQ     draw_shop       Draw the shop if it is
0000419A  4E75                    2119      rts                     Return if the shop is not in the current position
0000419C                          2120      
0000419C                          2121  draw_shop:
0000419C  323C 00FF               2122      move.w  #255,D1         Move the word #255 to D1 to set the type of trap 11
000041A0  103C 000B               2123      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
000041A4  4E4F                    2124      trap    #15             Trap to get the cursor position in D1
000041A6                          2125      
000041A6  0441 0200               2126      sub.w   #512,D1         Move the cursor back by two columns
000041AA  4E4F                    2127      trap    #15             Set the cursor position with trap command 11
000041AC                          2128      
000041AC  2601                    2129      move.l  D1,D3           Move the value in D1 to D3 for storage
000041AE                          2130      
000041AE  223C 00F000F0           2131      move.l  #PURPLE,D1      Move the colour red to D1
000041B4  6100 FD5E               2132      bsr     change_font_colour  Change the font colour
000041B8                          2133      
000041B8  43F9 00004FD9           2134      lea     shop_mark,A1    load the enemy symbol
000041BE  103C 000E               2135      move.b  #14,D0          Move #14 to D0 for trap command 14
000041C2  4E4F                    2136      trap    #15             Draw the player mark
000041C4                          2137      
000041C4  223C 00FFFFFF           2138      move.l  #WHITE,D1       Move the colour white to D1
000041CA  6100 FD48               2139      bsr     change_font_colour  Change the font colour
000041CE                          2140      
000041CE  2203                    2141      move.l  D3,D1           Move the value in D3 to D1 for previous cursor position
000041D0                          2142      
000041D0  0641 0200               2143      add.w   #512,D1         Move the cursor position two columns forward
000041D4  103C 000B               2144      move.b  #11,D0          Move byte #11 for trap command 11 
000041D8  4E4F                    2145      trap    #15             Set the cursor position
000041DA                          2146      
000041DA  4E75                    2147      rts
000041DC                          2148  
000041DC                          2149  *----------------------Draw Doors-----------------------
000041DC                          2150  check_for_doors:
000041DC  4BF8 6FE0               2151      lea     FIRST_DOOR,A5   Load the memory address of the first door
000041E0  1A3C 0000               2152      move.b  #0,D5           Move the starting door number to D5
000041E4  6100 0004               2153      bsr     loop_doors      Loop through all doors
000041E8  4E75                    2154      rts                     Return from subroutine
000041EA                          2155      
000041EA                          2156  loop_doors:
000041EA  6100 0010               2157      bsr     check_for_door  Check for a door
000041EE                          2158      
000041EE  BA3C 0001               2159      CMP.B   #DOOR_MAX,D5    Compare the door number with the maximum door number
000041F2  6C00 FCDE               2160      BGE     return          Return from the loop if the current door number is greater than or equal to the max
000041F6                          2161      
000041F6  5205                    2162      add.b   #1,D5           Add to the current door number
000041F8  544D                    2163      add.w   #2,A5          Add to the current door pointer to move to the next door
000041FA  60EE                    2164      bra     loop_doors      Keep looping the doors
000041FC                          2165      
000041FC                          2166  check_for_door:
000041FC  3615                    2167      move.w  (A5),D3         Move the door coordinates into data register D3 for large-value comparisons
000041FE  B5C3                    2168      CMP.L   D3,A2           Check if the door is in the current position
00004200  6700 0004               2169      BEQ     draw_door       Draw the door if it is
00004204  4E75                    2170      rts                     Return if the door is not in the current position
00004206                          2171      
00004206                          2172  draw_door:
00004206  6100 FD1E               2173      bsr     get_cursor_pos  Get the position of the cursor and save the value to D1 and D3
0000420A                          2174      
0000420A  0441 0200               2175      sub.w   #512,D1         Move the cursor back by two columns
0000420E  4E4F                    2176      trap    #15             Set the cursor position with trap command 11
00004210                          2177      
00004210  223C 00507090           2178      move.l  #BROWN,D1       Move the colour red to D1
00004216  6100 FCFC               2179      bsr     change_font_colour  Change the font colour
0000421A                          2180      
0000421A  43F9 00004FDD           2181      lea     door_mark,A1    load the door symbol
00004220  103C 000E               2182      move.b  #14,D0          Move #14 to D0 for trap command 14
00004224  4E4F                    2183      trap    #15             Draw the door mark
00004226                          2184      
00004226  223C 00FFFFFF           2185      move.l  #WHITE,D1       Move the colour white to D1
0000422C  6100 FCE6               2186      bsr     change_font_colour  Change the font colour
00004230                          2187      
00004230  2203                    2188      move.l  D3,D1           Move the value in D3 to D1 for previous cursor position
00004232  103C 000B               2189      move.b  #11,D0          Move byte #11 for trap command 11 
00004236  4E4F                    2190      trap    #15             Set the cursor position
00004238                          2191      
00004238  4E75                    2192      rts                     Return from subroutine
0000423A                          2193  
0000423A                          2194  *--------------------Draw Win Point---------------------
0000423A                          2195  check_for_win_point:
0000423A  B5FC 00008156           2196      CMP.L   #WIN_POINT,A2   Check if the win point is in the current tile
00004240  6700 0004               2197      BEQ     draw_win_point  Branch to draw the win point if so
00004244  4E75                    2198      rts                     Return from subroutine if not
00004246                          2199      
00004246                          2200  draw_win_point:
00004246  323C 00FF               2201      move.w  #255,D1         Move the word #255 to D1 to set the type of trap 11
0000424A  103C 000B               2202      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
0000424E  4E4F                    2203      trap    #15             Trap to get the cursor position in D1
00004250                          2204      
00004250  0441 0200               2205      sub.w   #512,D1         Move the cursor back by two columns
00004254  4E4F                    2206      trap    #15             Set the cursor position with trap command 11
00004256                          2207      
00004256  2601                    2208      move.l  D1,D3           Move the value in D1 to D3 for storage
00004258                          2209      
00004258  223C 00FF0000           2210      move.l  #BLUE,D1        Move the colour blue to D1
0000425E  6100 FCB4               2211      bsr     change_font_colour  Change the font colour
00004262                          2212      
00004262  43F9 00004FD7           2213      lea     win_point_mark,A1   load the win point symbol
00004268  103C 000E               2214      move.b  #14,D0              Move #14 to D0 for trap command 14
0000426C  4E4F                    2215      trap    #15                 Draw the win point mark
0000426E                          2216      
0000426E  223C 00FFFFFF           2217      move.l  #WHITE,D1       Move the colour white to D1
00004274  6100 FC9E               2218      bsr     change_font_colour  Change the font colour
00004278                          2219      
00004278  2203                    2220      move.l  D3,D1           Move the value in D3 to D1 for previous cursor position
0000427A                          2221      
0000427A  0641 0200               2222      add.w   #512,D1         Move the cursor position two columns forward
0000427E  103C 000B               2223      move.b  #11,D0          Move byte #11 for trap command 11 
00004282  4E4F                    2224      trap    #15             Set the cursor position
00004284                          2225      
00004284  4E75                    2226      rts
00004286                          2227      
00004286                          2228  *-------------------------------------------------------
00004286                          2229  *-------------------Setup the world---------------------
00004286                          2230  *-------------------------------------------------------
00004286                          2231  setup_world:
00004286  13FC 000E 0000814A      2232      move.b  #14,$814A   Setup the starting corridor
0000428E  13FC 0007 0000813A      2233      move.b  #7,$813A    T junction upwards from starting corridor
00004296  13FC 0004 00008139      2234      move.b  #4,$8139    Left corridor
0000429E  13FC 0001 00008129      2235      move.b  #1,$8129
000042A6  13FC 0001 00008119      2236      move.b  #1,$8119
000042AE                          2237      
000042AE  13FC 0004 00008108      2238      move.b  #4,$8108    First shop
000042B6  13FC 0000 00008109      2239      move.b  #0,$8109    Entrance
000042BE  13FC 0005 0000810A      2240      move.b  #5,$810A
000042C6  13FC 0008 000080F8      2241      move.b  #8,$80F8
000042CE  13FC 0000 000080F9      2242      move.b  #0,$80F9
000042D6  13FC 000A 000080FA      2243      move.b  #10,$80FA
000042DE  13FC 0003 000080E8      2244      move.b  #3,$80E8
000042E6  13FC 0007 000080E9      2245      move.b  #7,$80E9
000042EE  13FC 0006 000080EA      2246      move.b  #6,$80EA
000042F6                          2247      
000042F6  13FC 0005 0000813B      2248      move.b  #5,$813B    Right corridor
000042FE  13FC 0001 0000812B      2249      move.b  #1,$812B
00004306  13FC 0001 0000811B      2250      move.b  #1,$811B
0000430E  13FC 0008 0000810B      2251      move.b  #8,$810B    Path continues up with a turn off to the right
00004316                          2252      
00004316  13FC 0002 0000810C      2253      move.b  #2,$810C    Right path
0000431E  13FC 0002 0000810D      2254      move.b  #2,$810D    Continue right
00004326  13FC 0005 0000810E      2255      move.b  #5,$810E    Path upwards and to the left
0000432E  13FC 0001 000080FE      2256      move.b  #1,$80FE    Leads upwards into a room
00004336                          2257      
00004336  13FC 0004 000080ED      2258      move.b  #4,$80ED    First monster room
0000433E  13FC 0000 000080EE      2259      move.b  #0,$80EE    Entrance
00004346  13FC 0005 000080EF      2260      move.b  #5,$80EF
0000434E  13FC 0008 000080DD      2261      move.b  #8,$80DD
00004356  13FC 0000 000080DE      2262      move.b  #0,$80DE
0000435E  13FC 000A 000080DF      2263      move.b  #10,$80DF
00004366  13FC 0003 000080CD      2264      move.b  #3,$80CD
0000436E  13FC 0007 000080CE      2265      move.b  #7,$80CE
00004376  13FC 0006 000080CF      2266      move.b  #6,$80CF
0000437E                          2267      
0000437E  13FC 0001 000080FB      2268      move.b  #1,$80FB    Path that continues up
00004386  13FC 0001 000080EB      2269      move.b  #1,$80EB    Path continues upwards
0000438E  13FC 0001 000080DB      2270      move.b  #1,$80DB
00004396                          2271      
00004396                          2272      *Bottom row of room
00004396  13FC 0004 000080C8      2273      move.b  #4,$80C8    Large monster room with locked door
0000439E  13FC 0009 000080C9      2274      move.b  #9,$80C9
000043A6  13FC 0009 000080CA      2275      move.b  #9,$80CA
000043AE  13FC 0000 000080CB      2276      move.b  #0,$80CB    Entrance
000043B6  13FC 0005 000080CC      2277      move.b  #5,$80CC
000043BE                          2278      *Middle row of room
000043BE  13FC 0000 000080B8      2279      move.b  #0,$80B8    Exit to the left
000043C6  13FC 0000 000080B9      2280      move.b  #0,$80B9
000043CE  13FC 0000 000080BA      2281      move.b  #0,$80BA
000043D6  13FC 0000 000080BB      2282      move.b  #0,$80BB
000043DE  13FC 000A 000080BC      2283      move.b  #10,$80BC
000043E6                          2284      *Top row of room
000043E6  13FC 0003 000080A8      2285      move.b  #3,$80A8
000043EE  13FC 0007 000080A9      2286      move.b  #7,$80A9
000043F6  13FC 0007 000080AA      2287      move.b  #7,$80AA
000043FE  13FC 0007 000080AB      2288      move.b  #7,$80AB    Locked door
00004406  13FC 0006 000080AC      2289      move.b  #6,$80AC
0000440E                          2290      
0000440E  13FC 0002 000080B7      2291      move.b  #2,$80B7    Exit large room leftwards
00004416  13FC 0002 000080B6      2292      move.b  #2,$80B6    Continue to the left
0000441E  13FC 0007 000080B5      2293      move.b  #7,$80B5    Continue to the left and a path downwards
00004426  13FC 0002 000080B4      2294      move.b  #2,$80B4    Continue to the left
0000442E                          2295      
0000442E  13FC 0003 000080A1      2296      move.b  #3,$80A1    Room to the left
00004436  13FC 0007 000080A2      2297      move.b  #7,$80A2
0000443E  13FC 0006 000080A3      2298      move.b  #6,$80A3
00004446  13FC 0008 000080B1      2299      move.b  #8,$80B1
0000444E  13FC 0000 000080B2      2300      move.b  #0,$80B2
00004456  13FC 0000 000080B3      2301      move.b  #0,$80B3    Entrance to the right
0000445E  13FC 0004 000080C1      2302      move.b  #4,$80C1
00004466  13FC 0009 000080C2      2303      move.b  #9,$80C2
0000446E  13FC 0005 000080C3      2304      move.b  #5,$80C3
00004476                          2305      
00004476  13FC 0001 000080C5      2306      move.b  #1,$80C5    Path leading downwards
0000447E  13FC 0001 000080D5      2307      move.b  #1,$80D5
00004486  13FC 000A 000080E5      2308      move.b  #10,$80E5   Path leading downward and to the left
0000448E  13FC 0002 000080E4      2309      move.b  #2,$80E4    Path on the left
00004496  13FC 0002 000080E3      2310      move.b  #2,$80E3
0000449E  13FC 0003 000080E2      2311      move.b  #3,$80E2    Path takes a turn downwards
000044A6  13FC 0001 000080F2      2312      move.b  #1,$80F2    Path continues downwards
000044AE                          2313      
000044AE  13FC 0003 00008101      2314      move.b  #3,$8101    Regular enemy room
000044B6  13FC 0000 00008102      2315      move.b  #0,$8102    Entrance
000044BE  13FC 0006 00008103      2316      move.b  #6,$8103
000044C6  13FC 0008 00008111      2317      move.b  #8,$8111
000044CE  13FC 0000 00008112      2318      move.b  #0,$8112
000044D6  13FC 000A 00008113      2319      move.b  #10,$8113
000044DE  13FC 0004 00008121      2320      move.b  #4,$8121
000044E6  13FC 0009 00008122      2321      move.b  #9,$8122
000044EE  13FC 000A 00008123      2322      move.b  #10,$8123   Exit at the bottom
000044F6                          2323      
000044F6  13FC 0001 000080F5      2324      move.b  #1,$80F5    Path leading downward
000044FE  13FC 0001 00008105      2325      move.b  #1,$8105
00004506  13FC 0001 00008115      2326      move.b  #1,$8115
0000450E  13FC 0001 00008125      2327      move.b  #1,$8125
00004516                          2328      
00004516                          2329      *Top row of room
00004516  13FC 0008 00008133      2330      move.b  #8,$8133    Large enemy room - Exit at top
0000451E  13FC 0007 00008134      2331      move.b  #7,$8134
00004526  13FC 0000 00008135      2332      move.b  #0,$8135    Entrance
0000452E  13FC 0006 00008136      2333      move.b  #6,$8136
00004536                          2334      
00004536                          2335      *Middle row of room
00004536  13FC 0008 00008143      2336      move.b  #8,$8143
0000453E  13FC 0000 00008144      2337      move.b  #0,$8144
00004546  13FC 0000 00008145      2338      move.b  #0,$8145
0000454E  13FC 000A 00008146      2339      move.b  #10,$8146
00004556                          2340      
00004556                          2341      *Bottom row of room
00004556  13FC 0004 00008153      2342      move.b  #4,$8153
0000455E  13FC 0009 00008154      2343      move.b  #9,$8154
00004566  13FC 0009 00008155      2344      move.b  #9,$8155
0000456E  13FC 0005 00008156      2345      move.b  #5,$8156
00004576                          2346      
00004576                          2347      * Setup the doors
00004576  31FC 80EB 6FE0          2348      move.w  #$80EB,FIRST_DOOR    Set the location of the first door
0000457C                          2349      
0000457C  4E75                    2350      rts
0000457E                          2351  
0000457E                          2352  setup_enemies:
0000457E                          2353      * Setup first enemy
0000457E  11FC 0003 6000          2354      move.b  #3,$6000    Health - Setup the first enemy
00004584  11FC 0001 6001          2355      move.b  #1,$6001    Damage/level
0000458A  11FC 0001 6002          2356      move.b  #1,$6002    Class type (Knight)
00004590  11FC 0001 6003          2357      move.b  #1,$6003    Alive state (Alive)
00004596  31FC 80DE 6004          2358      move.w  #$80DE,$6004  Move enemy coordinates
0000459C                          2359      
0000459C                          2360      * Setup second enemy
0000459C  11FC 0003 6010          2361      move.b  #3,$6010    Health - Setup the first enemy
000045A2  11FC 0002 6011          2362      move.b  #2,$6011    Damage/level
000045A8  11FC 0001 6012          2363      move.b  #1,$6012    Class type (Knight)
000045AE  11FC 0001 6013          2364      move.b  #1,$6013    Alive state (Alive)
000045B4  31FC 8155 6014          2365      move.w  #$8155,$6014  Move enemy coordinates
000045BA                          2366      
000045BA  4E75                    2367      rts
000045BC                          2368      
000045BC                          2369  setup_loot:
000045BC                          2370      * Setup first loot pile
000045BC  31FC 80DE 7000          2371      move.w  #$80DE,$7000  Move loot coordinates
000045C2  11FC 0001 7002          2372      move.b  #1,$7002  Move loot potions
000045C8  11FC 0002 7003          2373      move.b  #2,$7003  Move loot keys
000045CE  11FC 000F 7004          2374      move.b  #LIFE_PER_TORCH,$7004  Move loot torches
000045D4  11FC 0005 7005          2375      move.b  #5,$7005  Move loot gold
000045DA  11FC 0001 7006          2376      move.b  #1,$7006  Move loot active state
000045E0                          2377      
000045E0                          2378      * Setup second loot pile
000045E0  31FC 8155 7010          2379      move.w  #$8155,$7010  Move loot coordinates
000045E6  11FC 0003 7012          2380      move.b  #3,$7012  Move loot potions
000045EC  11FC 0005 7013          2381      move.b  #5,$7013  Move loot keys
000045F2  11FC 0001 7014          2382      move.b  #1,$7014  Move loot torches
000045F8  11FC 0002 7015          2383      move.b  #2,$7015  Move loot gold
000045FE  11FC 0001 7016          2384      move.b  #1,$7016  Move loot active state
00004604                          2385  
00004604                          2386      
00004604                          2387  setup_player:
00004604  11FC 000A 5FF0          2388      move.b  #10,PLAYER      put score/health in memory location $5FF0
0000460A  11FC 0001 5FF1          2389      move.b  #1,PLA_DAMAGE   Assign the default damage for the player
00004610  11FC 0000 5FF3          2390      move.b  #0,GAME_STATE   Put game state number in memory location $5FF3
00004616                          2391      *0 = Pick role/intro | 5 = Move around | 6 = Combat | 7 = Shop | 64 = End game
00004616                          2392  
00004616  11FC 0000 5FF2          2393      move.b  #0,PLA_CLASS    put class number in memory location $5FF2
0000461C                          2394      * 1 corresponds to knight - 2 corresponds to mage - 3 corresponds to rogue
0000461C                          2395      
0000461C  11FC 0064 5FF8          2396      move.b  #100,PLA_GOLD    Assign the player's base gold value
00004622  11FC 0001 5FF9          2397      move.b  #1,PLA_POTIONS  Assign the player's base potions value
00004628  11FC 0000 5FFA          2398      move.b  #0,PLA_KEYS     Assign the player's base keys value
0000462E                          2399      *move.b  #LIFE_PER_TORCH,PLA_TORCH   Assign the player's base torch value
0000462E  11FC 0032 5FFB          2400      move.b  #50,PLA_TORCH   Assign the player's base torch value
00004634                          2401      
00004634  4DF9 0000814A           2402      lea     $814A,A6        Set the player coordinate to the first corridor
0000463A  31CE 5FF6               2403      move.w  A6,PLA_P_POS    Set the player's previous position to their current
0000463E                          2404      
0000463E  4E75                    2405      rts
00004640                          2406      
00004640                          2407  setup_shops:
00004640                          2408      * Setup the first shop
00004640  31FC 80F9 6500          2409      move.w  #$80F9,$6500    Set the position
00004646  11FC 0002 6502          2410      move.b  #2,$6502        Set the potions
0000464C  11FC 0003 6503          2411      move.b  #3,$6503        Set the keys
00004652  11FC 0004 6504          2412      move.b  #4,$6504        Set the torches
00004658  11FC 0005 6505          2413      move.b  #5,$6505        Set the damage
0000465E                          2414      
0000465E                          2415      * Setup the second shop
0000465E  31FC 80B2 6510          2416      move.w  #$80B2,$6510    Set the position
00004664  11FC 0004 6512          2417      move.b  #4,$6512        Set the potions
0000466A  11FC 0003 6513          2418      move.b  #3,$6513        Set the keys
00004670  11FC 0002 6514          2419      move.b  #2,$6514        Set the torches
00004676  11FC 0001 6515          2420      move.b  #1,$6515        Set the damage
0000467C                          2421  
0000467C  4E75                    2422      rts
0000467E                          2423      
0000467E                          2424  *-------------------------------------------------------
0000467E                          2425  *-------------------Data Delarations--------------------
0000467E                          2426  *-------------------------------------------------------
0000467E                          2427  
0000467E= 0D 0A 00                2428  crlf:           dc.b    $0D,$0A,0
00004681= 2A 2A 2A 2A 2A 2A ...   2429  welcome_msg:    dc.b    '*****************************************************************',$0D,$0A
000046C4= 20 20 20 20 20 20 ...   2430                  dc.b    '      __  ___      ___  __      ___        ______    _____  ___',$0D,$0A
00004705= 20 20 20 20 20 2F ...   2431                  dc.b    '     /""\|"  \    /"  |/""\    |"  |      /    " \  (\"   \|"  \',$0D,$0A
00004747= 20 20 20 20 2F 20 ...   2432                  dc.b    '    /    \\   \  //  //    \   ||  |     // ____  \ |.\\   \    |',$0D,$0A
0000478A= 20 20 20 2F 20 20 ...   2433                  dc.b    '   /  /\  \\\  \/. .//  /\  \  |:  |    /  /    ) :)|: \.   \\  |',$0D,$0A
000047CD= 20 20 2F 2F 20 20 ...   2434                  dc.b    '  //  __   \\.    ////  __   \  \  |___(: (____/ // |.  \    \. |',$0D,$0A
00004810= 20 2F 20 20 20 2F ...   2435                  dc.b    ' /   /  \\  \\\   //   /  \\  \( \_|:  \\        /  |    \    \ |',$0D,$0A
00004853= 28 5F 5F 5F 2F 20 ...   2436                  dc.b    '(___/    \___)\__/(___/    \___)\_______)\"_____/    \___|\____\)',$0D,$0A,$0D,$0A
00004898= 2A 2A 2A 2A 2A 2A ...   2437                  dc.b    '*****************************************************************',$0D,$0A,0
000048DC= 2E 00                   2438  loop_msg:       dc.b    '.',0
000048DE= 20 20 20 20 20 20 ...   2439  blank_msg:      dc.b    '                                                                                   ',0
00004932= 54 68 65 20 64 61 ...   2440  tutorial_msg    dc.b    'The darkness here is dangerious, keep your torch close and dont let it go out.',$0D,$0A
00004982= 45 76 65 72 79 20 ...   2441                  dc.b    'Every movement you make decreases your torch life, so think before you move.',$0D,$0A
000049D0= 59 6F 75 20 63 61 ...   2442                  dc.b    'You can buy more torches in the shop, thats probably a good place to start...',$0D,$0A,0
00004A20= 31 3E 20 52 65 73 ...   2443  replay_msg:     dc.b    '1> Restart the game.',$0D,$0A
00004A36= 32 3E 20 51 75 69 ...   2444                  dc.b    '2> Quit the game.',$0D,$0A,0
00004A4A= 59 6F 75 20 61 77 ...   2445  wake_up_msg:    dc.b    'You awake in a room, on a bed of red velvet, with no memory',$0D,$0A
00004A87= 6F 66 20 68 6F 77 ...   2446                  dc.b    'of how you got here. Stones crumble from the ceiling, the place looks like an',$0D,$0A
00004AD6= 6F 6C 64 20 63 61 ...   2447                  dc.b    'old castle. You get a dark feeling from this place, and you know you must',$0D,$0A
00004B21= 65 73 63 61 70 65 ...   2448                  dc.b    'escape...',$0D,$0A
00004B2C= 59 6F 75 20 63 6C ...   2449                  dc.b    'You climb from the bed and look in a nearby mirror:',$0D,$0A,0
00004B62= 31 3E 20 59 6F 75 ...   2450  pick_role_msg:  dc.b    '1> You wear armour of polished iron, a short sword and heavy shield laying',$0D,$0A
00004BAE= 63 6C 6F 73 65 20 ...   2451                  dc.b    'close by. (Knight class)',$0D,$0A,$0D,$0A
00004BCA= 32 3E 20 59 6F 75 ...   2452                  dc.b    '2> You wear a cloak with mystic symbols sewn into the fabrics, an ancient',$0D,$0A
00004C15= 6C 6F 6F 6B 69 6E ...   2453                  dc.b    'looking staff lays near. (Mage class)',$0D,$0A,$0D,$0A
00004C3E= 33 3E 20 59 6F 75 ...   2454                  dc.b    '3> You wear tight, well-fitting leather armour with reminents of black dye',$0D,$0A
00004C8A= 73 74 61 69 6E 65 ...   2455                  dc.b    'stained to the material. Two knives are fastened to your belt. (Rogue class)',$0D,$0A,0
00004CD9= 45 6E 74 65 72 20 ...   2456  input_nums_msg: dc.b    'Enter num between 1 and ',0
00004CF2= 3A 20 00                2457  colon_msg:      dc.b    ': ',0
00004CF5                          2458  
00004CF5= 49 6E 70 75 74 74 ...   2459  input_error_msg:    dc.b    'Inputted number is outside of range.',$0D,$0A,0
00004D1C= 47 61 6D 65 73 74 ...   2460  fake_gamestate_msg: dc.b    'Gamestate doesnt exist',$0D,$0A,0
00004D35= 59 6F 75 20 67 72 ...   2461  knight_role_msg:    dc.b    'You grab your sword and shield, pull a torch from the wall, and leave the room.',$0D,$0A,0
00004D87= 59 6F 75 20 68 61 ...   2462  knight_spec_msg:    dc.b    'You have chosen the KNIGHT class. You specialise in blocking and countering',$0D,$0A,0
00004DD5= 59 6F 75 20 70 69 ...   2463  mage_role_msg:  dc.b    'You pick up your staff, grab a torch from the wall, and leave the room.',$0D,$0A,0
00004E1F= 59 6F 75 20 68 61 ...   2464  mage_spec_msg:  dc.b    'You have chosen the MAGE class. You specialise in magic attacks.',$0D,$0A,0
00004E62= 59 6F 75 20 66 61 ...   2465  rogue_role_msg: dc.b    'You fasten your belt, grab a torch from the wall, and leave the room.',$0D,$0A,0
00004EAA= 59 6F 75 20 68 61 ...   2466  rogue_spec_msg: dc.b    'You have chosen the ROGUE class. You specialise in quick melee attacks.',$0D,$0A,0
00004EF4= 31 3E 20 4D 6F 76 ...   2467  movement_msg:   dc.b    '1> Move north.',$0D,$0A
00004F04= 32 3E 20 4D 6F 76 ...   2468                  dc.b    '2> Move south.',$0D,$0A
00004F14= 33 3E 20 4D 6F 76 ...   2469                  dc.b    '3> Move west.',$0D,$0A
00004F23= 34 3E 20 4D 6F 76 ...   2470                  dc.b    '4> Move east.',$0D,$0A
00004F32= 35 3E 20 44 72 69 ...   2471                  dc.b    '5> Drink health potion.',$0D,$0A,0
00004F4C= 4D 6F 76 65 64 20 ...   2472  move_north_msg: dc.b    'Moved north.',$0D,$0A,0
00004F5B= 4D 6F 76 65 64 20 ...   2473  move_east_msg:  dc.b    'Moved east.',$0D,$0A,0
00004F69= 4D 6F 76 65 64 20 ...   2474  move_south_msg: dc.b    'Moved south.',$0D,$0A,0
00004F78= 4D 6F 76 65 64 20 ...   2475  move_west_msg:  dc.b    'Moved west.',$0D,$0A,0
00004F86= 41 20 77 61 6C 6C ...   2476  movement_blocked_msg:  dc.b    'A wall blocks your path.',$0D,$0A,0
00004FA1= 45 6E 74 65 72 20 ...   2477  continue_msg:   dc.b    'Enter any key to continue... ',0
00004FBF= 20 20 20 00             2478  blank_tile      dc.b    '   ',0
00004FC3= 7C 20 7C 00             2479  both_tile       dc.b    '| |',0
00004FC7= 7C 20 20 00             2480  left_tile       dc.b    '|  ',0
00004FCB= 20 20 7C 00             2481  right_tile      dc.b    '  |',0
00004FCF= 5C 2F 5C 00             2482  blocked_tile:   dc.b    '\/\',0
00004FD3= 2A 00                   2483  player_mark:    dc.b    '*',0
00004FD5= 58 00                   2484  enemy_mark:     dc.b    'X',0
00004FD7= 40 00                   2485  win_point_mark: dc.b    '@',0
00004FD9= 24 00                   2486  shop_mark:      dc.b    '$',0
00004FDB= 25 00                   2487  loot_mark:      dc.b    '%',0
00004FDD= 23 00                   2488  door_mark:      dc.b    '#',0
00004FDF= 4D 61 70 20 4C 65 ...   2489  map_legend_msg:     dc.b    'Map Legend:',0
00004FEB= 20 3D 20 50 6C 61 ...   2490  map_player_msg:     dc.b    ' = Player',0
00004FF5= 20 3D 20 45 6E 65 ...   2491  map_enemy_msg:      dc.b    ' = Enemy',0
00004FFE= 20 3D 20 4F 62 6A ...   2492  map_win_point_msg:  dc.b    ' = Objective',0
0000500B= 20 3D 20 53 68 6F ...   2493  map_shop_msg:       dc.b    ' = Shop',0
00005013= 20 3D 20 4C 6F 6F ...   2494  map_loot_msg:       dc.b    ' = Loot Pile',0
00005020= 20 3D 20 4C 6F 63 ...   2495  map_door_msg:       dc.b    ' = Locked Door',0
0000502F= 41 20 6D 6F 6E 73 ...   2496  encounter_msg:  dc.b    'A monster blocks your path, it looks ready to attack!',$0D,$0A,0
00005067= 31 3E 20 42 6C 6F ...   2497  combat_msg:     dc.b    '1> Block and Counter.',$0D,$0A
0000507E= 32 3E 20 43 61 73 ...   2498                  dc.b    '2> Cast Magic.',$0D,$0A
0000508E= 33 3E 20 41 74 74 ...   2499                  dc.b    '3> Attack Swiftly.',$0D,$0A
000050A2= 34 3E 20 54 72 79 ...   2500                  dc.b    '4> Try Run.',$0D,$0A
000050AF= 35 3E 20 44 72 69 ...   2501                  dc.b    '5> Drink Health Potion.',$0D,$0A,0
000050C9= 59 6F 75 20 65 73 ...   2502  escape_msg:             dc.b    'You escaped the monster!',$0D,$0A,0
000050E4= 59 6F 75 20 74 72 ...   2503  fail_escape_msg:        dc.b    'You try to run, but the monster catches and damages you!',$0D,$0A,0
0000511F= 59 6F 75 20 62 6F ...   2504  both_block_msg:         dc.b    'You both block, No damage is done!',$0D,$0A,0
00005144= 59 6F 75 20 62 6F ...   2505  both_cast_magic_msg:    dc.b    'You both cast magic at eachother, the spells clash in mid air! No damage',$0D,$0A
0000518E= 69 73 20 64 6F 6E ...   2506                          dc.b    'is done!',$0D,$0A,0
00005199= 59 6F 75 20 62 6F ...   2507  both_melee_msg:         dc.b    'You both lunge forward, metal clashes together, but no damage is done!',$0D,$0A,0
000051E2= 54 68 65 20 65 6E ...   2508  hit_against_block_msg:  dc.b    'The enemy blocks, you cast a cast a spell and it damages the monster!',$0D,$0A,0
0000522A= 54 68 65 20 65 6E ...   2509  hit_against_magic_msg:  dc.b    'The enemy begins to charge a spell but you lunge forward and hit it first,',$0D,$0A
00005276= 64 61 6D 61 67 69 ...   2510                          dc.b    'damaging the monster!',$0D,$0A,0
0000528E= 54 68 65 20 65 6E ...   2511  hit_against_melee_msg:  dc.b    'The enemy lunges forward but you block quicky, then counter, damaging the',$0D,$0A
000052D9= 6D 6F 6E 73 74 65 ...   2512                          dc.b    'monster!',$0D,$0A,0
000052E4= 59 6F 75 20 6C 75 ...   2513  hit_by_counter_msg:     dc.b    'You lunge at the enemy but they block before you hit, they swing around quickly',$0D,$0A
00005335= 61 6E 64 20 64 61 ...   2514                          dc.b    'and damage you!',$0D,$0A,0
00005347= 59 6F 75 20 74 72 ...   2515  hit_by_magic_msg:       dc.b    'You try to block the enemies attack, but they cast a spell that breaks through',$0D,$0A
00005397= 79 6F 75 72 20 64 ...   2516                          dc.b    'your defense and damages you!',$0D,$0A,0
000053B7= 59 6F 75 20 74 72 ...   2517  hit_by_melee_msg:       dc.b    'You try to charge up a spell, but the enemy lunges forward and damages you!',$0D,$0A,0
00005405= 48 65 61 6C 74 68 ...   2518  health_msg:             dc.b    'Health: ',0
0000540E= 45 6E 65 6D 79 20 ...   2519  enemy_health_msg:       dc.b    'Enemy Health: ',0
0000541D= 54 6F 72 63 68 20 ...   2520  torch_msg:              dc.b    'Torch Life: ',0
0000542A= 44 61 6D 61 67 65 ...   2521  damage_lvl_msg          dc.b    'Damage lvl: ',0
00005437= 49 6E 76 65 6E 74 ...   2522  inventory_msg:          dc.b    'Inventory:',0
00005442= 2D 20 47 6F 6C 64 ...   2523  gold_msg:               dc.b    '- Gold ',0
0000544A= 2D 20 4B 65 79 20 00    2524  key_msg:                dc.b    '- Key ',0
00005451= 2D 20 50 6F 74 69 ...   2525  potions_msg:            dc.b    '- Potion ',0
0000545B= 2D 20 54 6F 72 63 ...   2526  torches_msg:            dc.b    '- Torch ',0
00005464= 2D 20 44 61 6D 61 ...   2527  damage_up_msg:          dc.b    '- Damage Upgrades ',0
00005477= 54 68 65 20 6D 6F ...   2528  battle_won_msg:         dc.b    'The monster collapses at your feet. It is dead!',$0D,$0A,0
000054A9= 28 00                   2529  bracket_open_msg:       dc.b    '(',0
000054AB= 29 00                   2530  bracket_close_msg:      dc.b    ')',0
000054AD= 59 6F 75 20 66 65 ...   2531  death_msg:          dc.b    'You feel your last breath of air leave your lungs...',$0D,$0A
000054E3= 59 6F 75 72 20 6B ...   2532                      dc.b    'Your knees hit the ground...',$0D,$0A
00005501= 59 6F 75 20 68 61 ...   2533                      dc.b    'You have died.',$0D,$0A,0
00005512= 59 6F 75 20 66 65 ...   2534  win_msg:            dc.b    'You feel the outside breeze hit your face...',$0D,$0A
00005540= 59 6F 75 20 68 61 ...   2535                      dc.b    'You have escaped the castle!',$0D,$0A,0
0000555F= 59 6F 75 20 64 72 ...   2536  take_potion_msg:    dc.b    'You drink a health potion...',$0D,$0A
0000557D= 33 20 68 65 61 6C ...   2537                      dc.b    '3 health points restored!',$0D,$0A,0
00005599= 59 6F 75 20 61 72 ...   2538  no_potions_msg:     dc.b    'You are out of potions.',$0D,$0A,0
000055B3= 22 4C 6F 6F 6B 69 ...   2539  shop_enter_msg:     dc.b    '"Looking to lighten that coin pouch of yours?!"',$0D,$0A,0
000055E5= 31 3E 20 42 75 79 ...   2540  shop_msg:       dc.b    '1> Buy Potion. (5g)',$0D,$0A
000055FA= 32 3E 20 42 75 79 ...   2541                  dc.b    '2> Buy Key. (15g)',$0D,$0A
0000560D= 33 3E 20 42 75 79 ...   2542                  dc.b    '3> Buy Torch. (10g)',$0D,$0A
00005622= 34 3E 20 42 75 79 ...   2543                  dc.b    '4> Buy Damage Upgrade. (20g)',$0D,$0A
00005640= 35 3E 20 4C 65 61 ...   2544                  dc.b    '5> Leave Shop.',$0D,$0A,0
00005651= 22 50 6C 65 61 73 ...   2545  leave_shop_msg: dc.b    '"Pleasure doing business with you."',$0D,$0A,0
00005677= 22 2E 2E 2E 41 6E ...   2546  buy_item_msg:   dc.b    '"...And its yours!"',$0D,$0A,0
0000568D= 53 68 6F 70 20 53 ...   2547  shop_stock_msg: dc.b    'Shop Stock:',0
00005699= 59 6F 75 72 20 49 ...   2548  player_msg:     dc.b    'Your Items:',0
000056A5= 22 4E 6F 74 20 65 ...   2549  no_money_msg:   dc.b    '"Not enough gold, traveller."',$0D,$0A,0
000056C5= 22 53 6F 72 72 79 ...   2550  no_item_msg:    dc.b    '"Sorry, I dont have any of them left..."',$0D,$0A,0
000056F0= 54 68 65 20 64 61 ...   2551  no_torch_msg:   dc.b    'The darkness burns...',$0D,$0A,0
00005708= 59 6F 75 20 70 69 ...   2552  pickup_loot_msg:    dc.b    'You picked up a loot pile',$0D,$0A,0
00005724= 2B 20 47 6F 6C 64 ...   2553  pickup_gold_msg:    dc.b    '+ Gold ',0
0000572C= 2B 20 50 6F 74 69 ...   2554  pickup_potion_msg:  dc.b    '+ Potion ',0
00005736= 2B 20 4B 65 79 20 00    2555  pickup_key_msg:     dc.b    '+ Key ',0
0000573D= 2B 20 54 6F 72 63 ...   2556  pickup_torch_msg:   dc.b    '+ Torch life ',0
0000574B= 43 6C 61 73 73 20 ...   2557  double_damage_msg:  dc.b    'Class Bonus - Double Damage!',$0D,$0A,0
0000576A= 54 68 65 20 64 6F ...   2558  locked_door_msg:    dc.b    'The door seems locked, you have a key that might fit it.',$0D,$0A
000057A4= 44 6F 20 79 6F 75 ...   2559                      dc.b    'Do you want to try unlock it?',$0D,$0A,$0D,$0A
000057C5= 31 3E 20 59 65 73 ...   2560                      dc.b    '1> Yes. (-1 key)',$0D,$0A
000057D7= 32 3E 20 4E 6F 2E ...   2561                      dc.b    '2> No.',$0D,$0A,0
000057E0= 54 68 65 20 64 6F ...   2562  unlocked_door_msg:  dc.b    'The door swings open, the key lodged stuck in the keyhole.',$0D,$0A,0
0000581D= 54 68 65 20 64 6F ...   2563  blocked_door_msg:   dc.b    'The door seems solid, it wont budge.',$0D,$0A,0
00005844= 20 20 20 20 20 20 ...   2564  graveyard_msg:  dc.b    '      ,-=-.       ______     _',$0D,$0A
00005864= 20 20 20 20 20 2F ...   2565                  dc.b    '     /  +  \     />----->  _|1|_',$0D,$0A
00005886= 20 20 20 20 20 7C ...   2566                  dc.b    '     | ~~~ |    // -/- /  |_ H _|',$0D,$0A
000058A9= 20 20 20 20 20 7C ...   2567                  dc.b    '     |R.I.P|   //  /  /     |S|',$0D,$0A
000058CA= 5C 76 56 2C 2C 7C ...   2568                  dc.b    '\vV,,|_____|V,//_____/VvV,v,|_|/,,vhjwv/,',$0D,$0A,0
000058F6= 20 20 20 20 20 20 ...   2569  skeleton_msg:   dc.b    '           .-.',$0D,$0A
00005906= 20 2F 5C 5F 5F 5F ...   2570                  dc.b    ' /\____/\ (o.o)',$0D,$0A
00005917= 7C 20 20 5F 7C 7C ...   2571                  dc.b    '|  _||_  | |=|',$0D,$0A
00005927= 20 5C 2F 20 7C 7C ...   2572                  dc.b    ' \/ || \/ __|__',$0D,$0A
00005938= 20 20 20 20 7C 7C ...   2573                  dc.b    '    ||\_//.=|=.\\',$0D,$0A
0000594B= 20 20 20 20 7C 7C ...   2574                  dc.b    '    ||\_/ .=|=. \\',$0D,$0A
0000595F= 20 20 20 20 7C 7C ...   2575                  dc.b    '    ||    .=|=. //',$0D,$0A
00005973= 20 20 20 20 7C 7C ...   2576                  dc.b    '    ||    (_=_)//',$0D,$0A
00005986= 20 20 20 20 7C 7C ...   2577                  dc.b    '    ||   (:| |:)',$0D,$0A
00005998= 20 20 20 20 7C 7C ...   2578                  dc.b    '    ||    || ||',$0D,$0A
000059A9= 20 20 20 20 7C 7C ...   2579                  dc.b    '    ||    () ()',$0D,$0A
000059BA= 20 20 20 20 2F 5C ...   2580                  dc.b    '    /\    || ||',$0D,$0A
000059CB= 20 20 20 20 7C 7C ...   2581                  dc.b    '    ||    || ||',$0D,$0A
000059DC= 20 20 20 20 5C 2F ...   2582                  dc.b    '    \/  ==   ==',$0D,$0A,0
000059EE= 20 20 20 20 20 20 ...   2583  merchant_msg:   dc.b    '         ____',$0D,$0A
000059FD= 20 20 20 20 20 20 ...   2584                  dc.b    '        |    |',$0D,$0A
00005A0D= 20 20 20 20 20 20 ...   2585                  dc.b    '      --:<<>>:--',$0D,$0A
00005A1F= 20 20 20 20 20 20 ...   2586                  dc.b    '        :~_~ :',$0D,$0A
00005A2F= 20 20 20 20 20 20 ...   2587                  dc.b    '        _:"":\___',$0D,$0A
00005A42= 20 20 5F 5F 5F 5F ...   2588                  dc.b    '  ____./ :::     \._',$0D,$0A
00005A58= 3C 3C 3D 29 20 20 ...   2589                  dc.b    '<<=)           \    :',$0D,$0A
00005A6F= 20 5C 2F 2D 2D 2D ...   2590                  dc.b    ' \/---/\_      /\._. ',$0D,$0A
00005A86= 20 7C 7C 20 20 20 ...   2591                  dc.b    ' ||       \====:_ ""',$0D,$0A
00005A9C= 20 7C 7C 20 20 20 ...   2592                  dc.b    ' ||      ./     \\',$0D,$0A
00005AB0= 20 7C 7C 20 20 20 ...   2593                  dc.b    ' ||     :       :',$0D,$0A
00005AC3= 20 7C 7C 20 20 20 ...   2594                  dc.b    ' ||    /   :    \',$0D,$0A
00005AD6= 20 7C 7C 20 20 20 ...   2595                  dc.b    ' ||   :   .      \.',$0D,$0A
00005AEB= 20 7C 7C 20 20 20 ...   2596                  dc.b    ' ||   :  : :      :',$0D,$0A
00005B00= 20 7C 7C 20 20 20 ...   2597                  dc.b    ' ||   :__:-:__.;--',$0D,$0A,0
00005B15= 20 20 20 20 20 20 ...   2598  castle_msg:     dc.b    '                T~~',$0D,$0A
00005B2A= 20 20 20 20 20 20 ...   2599                  dc.b    '                |',$0D,$0A
00005B3D= 20 20 20 20 20 20 ...   2600                  dc.b    '               /"\',$0D,$0A
00005B51= 20 20 20 20 20 20 ...   2601                  dc.b    '       T~~     |.| T~~',$0D,$0A
00005B69= 20 20 20 54 7E 7E ...   2602                  dc.b    '   T~~ |    T~ WWWW|',$0D,$0A
00005B7F= 20 20 20 7C 20 20 ...   2603                  dc.b    '   |  /"\   |  |  |/\T~~',$0D,$0A
00005B99= 20 20 2F 22 5C 20 ...   2604                  dc.b    '  /"\ WWW  /"\ |. |WW|',$0D,$0A
00005BB1= 20 57 57 57 57 57 ...   2605                  dc.b    ' WWWWW/\| /   \|./\|/"\',$0D,$0A
00005BCA= 20 7C 20 20 20 2F ...   2606                  dc.b    ' |   /__\/]WWW[\/__\WWWW',$0D,$0A
00005BE4= 20 7C 22 20 20 57 ...   2607                  dc.b    ' |"  WWWW.|I_I|.WWWW.   |',$0D,$0A
00005BFF= 20 7C 20 20 20 7C ...   2608                  dc.b    ' |   |. |/  -  \|. |.  |',$0D,$0A
00005C19= 20 7C 2E 20 20 7C ...   2609                  dc.b    ' |.  |  |LI=H=LI|. |   |',$0D,$0A
00005C33= 20 7C 20 20 20 7C ...   2610                  dc.b    ' |   |. | |[_]| |  |.  |',$0D,$0A
00005C4D= 20 7C 20 20 20 7C ...   2611                  dc.b    ' |   |  |_|###|_|  |   |',$0D,$0A
00005C67= 20 20 2D 2D 2D 20 ...   2612                  dc.b    '  --- -- -/___\- -- --- ',$0D,$0A,0
00005C82                          2613                  
00005C82                          2614      end start

No errors detected
No warnings generated


SYMBOL TABLE INFORMATION
Symbol-name         Value
-------------------------
ALIVE               3
BATTLE_WON_MSG      5477
BLANK_MSG           48DE
BLANK_TILE          4FBF
BLOCKED_DOOR        3AE0
BLOCKED_DOOR_MSG    581D
BLOCKED_TILE        4FCF
BLOCK_COUNTER       3B3A
BLUE                FF0000
BOTH_BLOCK          3BD2
BOTH_BLOCK_MSG      511F
BOTH_CAST_MAGIC     3BE4
BOTH_CAST_MAGIC_MSG  5144
BOTH_MELEE          3BF6
BOTH_MELEE_MSG      5199
BOTH_TILE           4FC3
BRACKET_CLOSE_MSG   54AB
BRACKET_OPEN_MSG    54A9
BROWN               507090
BUY_ITEM_MSG        5677
BUY_KEY             3D82
BUY_POTION          3D50
BUY_TORCH           3DB6
CASTLE_MSG          5B15
CAST_MAGIC          3B54
CHANGE_FONT_COLOUR  3F14
CHECK_BLOCKED       3A72
CHECK_FOR_A_DOOR    3A92
CHECK_FOR_DOOR      41FC
CHECK_FOR_DOORS     41DC
CHECK_FOR_ENEMIES   40FA
CHECK_FOR_ENEMY     411C
CHECK_FOR_LOOT      4058
CHECK_FOR_LOOT_PILES  4034
CHECK_FOR_PLAYER    40B2
CHECK_FOR_SHOP      4192
CHECK_FOR_SHOPS     4170
CHECK_FOR_WIN_POINT  423A
CLASS               2
CLEAR_SCREEN        38B4
COLON_MSG           4CF2
COMBAT              3AF8
COMBAT_MSG          5067
CONTINUE_MSG        4FA1
CRLF                467E
CSR_POS_BATTLE      2001
CSR_POS_MOVE        3201
CSR_POS_SHOP_P      3401
CSR_POS_SHOP_S      1801
DAMAGE              1
DAMAGE_ENEMY        3C98
DAMAGE_LVL_MSG      542A
DAMAGE_PLAYER       3CD2
DAMAGE_UP_MSG       5464
DAMAGE_UP_PRICE     14
DEATH_MSG           54AD
DECORATE            3896
DECREMENT_TORCH     3F06
DOOR_MARK           4FDD
DOOR_MAX            1
DOUBLE_DAMAGE_ENEMY  3CA8
DOUBLE_DAMAGE_MSG   574B
DOUBLE_DAMAGE_PLAYER  3CE8
DRAW                34A2
DRAW_BATTLE_INFO    36B0
DRAW_BLANK_TILE     4026
DRAW_BLOCKED_TILE   3FEE
DRAW_BOTH_TILE      3FFC
DRAW_CASTLE         34DE
DRAW_DOOR           4206
DRAW_ENEMY          4130
DRAW_GRAVEYARD      34D0
DRAW_HUD            34FA
DRAW_ITEM_NUMBER    3846
DRAW_LEFT_TILE      400A
DRAW_LOOP           3F34
DRAW_LOOT           4070
DRAW_MAP_LEGEND     35C2
DRAW_MERCHANT       34EC
DRAW_PLAYER         40BA
DRAW_PLAYER_INFO    351A
DRAW_RIGHT_TILE     4018
DRAW_SHOP           419C
DRAW_SHOP_INFO      3712
DRAW_SKELETON       34C2
DRAW_TILE           3F8A
DRAW_WIN_POINT      4246
ENCOUNTER_MSG       502F
END                 3006
ENDL                38E4
ENEMIES_CHECK       3362
ENEMIES_LOOP        3370
ENEMY_ALIVE_CHECK   346A
ENEMY_CHECK         338E
ENEMY_DIED          3474
ENEMY_HEALTH_MSG    540E
ENEMY_MARK          4FD5
ENEMY_MAX           2
ENTER_COMBAT        33C2
ENTER_SHOP          3442
ESCAPE_ATTACK       3B98
ESCAPE_MSG          50C9
EXIT                0
FAIL_ESCAPE         3BB6
FAIL_ESCAPE_MSG     50E4
FAKE_GAMESTATE_MSG  4D1C
FIRST_DOOR          6FE0
FIRST_ENEMY         6000
FIRST_LOOT          7000
FIRST_SHOP          6500
FONT                1090000
GAME                3000
GAMELOOP            3194
GAMEPLAY            3868
GAME_STATE          5FF3
GET_CURSOR_POS      3F26
GOLD                FFFF
GOLD_MSG            5442
GRAVEYARD_MSG       5844
GREEN               FF00
HEALTH_MSG          5405
HIT_AGAINST_BLOCK   3C08
HIT_AGAINST_BLOCK_MSG  51E2
HIT_AGAINST_MAGIC   3C1E
HIT_AGAINST_MAGIC_MSG  522A
HIT_AGAINST_MELEE   3C34
HIT_AGAINST_MELEE_MSG  528E
HIT_BY_COUNTER      3C4A
HIT_BY_COUNTER_MSG  52E4
HIT_BY_MAGIC        3C64
HIT_BY_MAGIC_MSG    5347
HIT_BY_MELEE        3C7E
HIT_BY_MELEE_MSG    53B7
INPUT               311E
INPUT_ERROR_MSG     4CF5
INPUT_NUMS_MSG      4CD9
INVALID_INPUT       3186
INVENTORY_MSG       5437
IN_A_DOOR           3A9C
KEY_MSG             544A
KEY_PRICE           F
KNIGHT_ROLE_MSG     4D35
KNIGHT_SELECT       3062
KNIGHT_SPEC_MSG     4D87
LEAVE_SHOP          3E20
LEAVE_SHOP_MSG      5651
LEFT_TILE           4FC7
LIFE_PER_TORCH      F
LOCKED_DOOR_MSG     576A
LOOP_COLUMNS        3F60
LOOP_DOORS          41EA
LOOP_ENEMIES        4108
LOOP_LOOT_PILES     4042
LOOP_MSG            48DC
LOOP_ROWS           3F4A
LOOP_SHOPS          417E
LOOP_THRU_DOORS     3A80
LOOT_MARK           4FDB
LOOT_PILES_CHECK    3248
LOOT_PILE_CHECK     326A
LOOT_PILE_LOOP      3256
L_ACTIVE            6
MAGE_ROLE_MSG       4DD5
MAGE_SELECT         3092
MAGE_SPEC_MSG       4E1F
MANAGE_INPUT        316C
MANAGE_TORCH        332E
MAP_DOOR_MSG        5020
MAP_ENEMY_MSG       4FF5
MAP_LEGEND_MSG      4FDF
MAP_LENGTH          F
MAP_LOOT_MSG        5013
MAP_PLAYER_MSG      4FEB
MAP_SHOP_MSG        500B
MAP_START_POINT     8080
MAP_WIN_POINT_MSG   4FFE
MELEE_ATTACK        3B6E
MERCHANT_MSG        59EE
MOVEMENT            38FA
MOVEMENT_BLOCKED    3A60
MOVEMENT_BLOCKED_MSG  4F86
MOVEMENT_CHECKS     322C
MOVEMENT_MSG        4EF4
MOVE_EAST           3A18
MOVE_EAST_MSG       4F5B
MOVE_NORTH          393C
MOVE_NORTH_MSG      4F4C
MOVE_SOUTH          3986
MOVE_SOUTH_MSG      4F69
MOVE_WEST           39D0
MOVE_WEST_MSG       4F78
NEXT_CURSOR_POS     3838
NO_ITEM_MSG         56C5
NO_MONEY            3E3E
NO_MONEY_MSG        56A5
NO_POTIONS          3EF6
NO_POTIONS_MSG      5599
NO_SHOP_DAMAGE_UP   3E8C
NO_SHOP_KEYS        3E64
NO_SHOP_POTIONS     3E50
NO_SHOP_TORCHES     3E78
NO_TORCH_MSG        56F0
OPEN_DOOR_POS       1000
OUT                 389E
PICKUP_GOLD_MSG     5724
PICKUP_KEY_MSG      5736
PICKUP_LOOT         3280
PICKUP_LOOT_MSG     5708
PICKUP_POTION_MSG   572C
PICKUP_TORCH_MSG    573D
PICK_ROLE           301C
PICK_ROLE_MSG       4B62
PLAYER              5FF0
PLAYER_DEAD         31D4
PLAYER_MARK         4FD3
PLAYER_MSG          5699
PLA_CLASS           5FF2
PLA_DAMAGE          5FF1
PLA_GOLD            5FF8
PLA_KEYS            5FFA
PLA_POTIONS         5FF9
PLA_P_POS           5FF6
PLA_TORCH           5FFB
POSITION            4
POTIONS_MSG         5451
POTION_PRICE        5
PRESS_CONTINUE      3EA0
PURPLE              F000F0
RANDOM_NUMBER       3EB8
RED                 FF
REPLAY              38C0
REPLAY_MSG          4A20
RETURN              3ED2
RIGHT_TILE          4FCB
ROGUE_ROLE_MSG      4E62
ROGUE_SELECT        30C2
ROGUE_SPEC_MSG      4EAA
ROLE_INPUT          3044
SETUP_ENEMIES       457E
SETUP_LOOT          45BC
SETUP_PLAYER        4604
SETUP_SHOPS         4640
SETUP_WORLD         4286
SHOP                3D14
SHOPS_CHECK         33EC
SHOPS_LOOP          33FA
SHOP_CHECK          3418
SHOP_ENTER_MSG      55B3
SHOP_MARK           4FD9
SHOP_MAX            2
SHOP_MSG            55E5
SHOP_STOCK_MSG      568D
SKELETON_MSG        58F6
START               1000
S_DAMAGE_IN         5
S_KEYS              3
S_POTIONS           2
S_TORCHES           4
TAKE_POTION         3ED4
TAKE_POTION_MSG     555F
TORCHES_MSG         545B
TORCH_MSG           541D
TORCH_PRICE         A
TRY_RUN             3B88
TUTORIAL_INTRO      30F2
TUTORIAL_MSG        4932
UNLOCKED_DOOR_MSG   57E0
UNLOCK_DOOR         3AC6
UPDATE              31AA
UPGRADE_DMG         3DEC
WAKE_UP_MSG         4A4A
WALL_COLLISIONS     391A
WELCOME             300A
WELCOME_MSG         4681
WHITE               FFFFFF
WIN_MSG             5512
WIN_POINT           8156
WIN_POINT_MARK      4FD7
WON_GAME            31FE

00001000 Starting Address
Assembler used: EASy68K Editor/Assembler v5.16.01
Created On: 21/03/2019 17:57:33

00000000                             1  *-------------------------------------------------------
00000000                             2  * Author         : Michael Rainsford Ryan
00000000                             3  * Student Number : C00239510
00000000                             4  * Date Created   : 21/01/2019
00000000                             5  * Description    : A simplified, offline clone of the
00000000                             6  *                : online game "Avalon".
00000000                             7  * Issues/Bugs    : None currenty.
00000000                             8  *-------------------------------------------------------
00000000                             9  
00001000                            10      org $1000
00001000                            11  
00001000                            12  *-------------------------------------------------------
00001000                            13  *Choose to be a Worker or a God 
00001000                            14  *https://www.avalon-rpg.com/
00001000                            15  *-------------------------------------------------------
00001000                            16  
00001000                            17  *-------------------------------------------------------
00001000                            18  *-------------------Game Information-------------------
00001000                            19  *-------------------------------------------------------
00001000                            20  *A6 is used for player coordinates
00001000                            21  *A5 is used for enemy coordinates when in combat or looping through them
00001000                            22  *A5 is used for shops when in shop screen or when looping through them
00001000                            23  *A4 occasionally used for displaying the inventory
00001000                            24  *D5 is used occasionally for input range
00001000                            25  *$5000 to $5FE0 holds maps
00001000                            26  *$5FF0 holds player information
00001000                            27  *$6000 to $64F0 holds enemies
00001000                            28  *$6500 to $6FF0 holds shops
00001000                            29  *$7000 to $7500 holds loot
00001000                            30  
00001000                            31  *Enemies:
00001000                            32  *Byte:  Name:
00001000                            33  *0      Health
00001000                            34  *1      Damage/level
00001000                            35  *2      enemy type (Knight, mage, rogue)
00001000                            36  *3      Alive state (1 == alive, 0 == dead)
00001000                            37  *4 & 5  Coordinates
00001000                            38  
00001000                            39  *Player:
00001000                            40  *Byte:  Name:
00001000                            41  *0      Health
00001000                            42  *1      Damage/level
00001000                            43  *2      Class (Knight, mage, rogue)
00001000                            44  *3      Game state
00001000                            45  *4-5+A6 Coordinates
00001000                            46  *6-7    Last coordinates
00001000                            47  *8      Gold
00001000                            48  *9      Potions
00001000                            49  *A      Keys
00001000                            50  *B      Torch life
00001000                            51  
00001000                            52  *Shops:
00001000                            53  *Byte:  Name:
00001000                            54  *0-1    Position
00001000                            55  *2      Potions
00001000                            56  *3      Keys
00001000                            57  *4      Torches
00001000                            58  *5      Damage increase
00001000                            59  
00001000                            60      
00001000                            61  *Game state : 0 = Pick role/intro | 5 = Move around | 6 = Combat | 7 = Shop | 64 = End game
00001000                            62  *Class      : 1 corresponds to knight - 2 corresponds to mage - 3 corresponds to rogue
00001000                            63  
00001000                            64  
00001000                            65  *-------------------------------------------------------
00001000                            66  *Validation values to be used, modify as needed
00001000                            67  *Add additional validation values as required
00001000                            68  *-------------------------------------------------------
00001000  =00000000                 69  exit        EQU 0      used to exit assembly program
00001000                            70  
00001000                            71  * Text display
00001000  =000000FF                 72  RED         EQU $000000FF   Red colour value
00001000  =0000FF00                 73  GREEN       EQU $0000FF00   Green colour value
00001000  =00FF0000                 74  BLUE        EQU $00FF0000   Blue colour value
00001000  =00FFFFFF                 75  WHITE       EQU $00FFFFFF   White colour value
00001000  =00F000F0                 76  PURPLE      EQU $00F000F0   Purple colour value
00001000  =01090000                 77  FONT        EQU $01090000   Font value
00001000                            78  
00001000                            79  * Player
00001000  =00005FF0                 80  PLAYER      EQU $5FF0       Memory address for player information and health
00001000  =00005FF1                 81  PLA_DAMAGE  EQU $5FF1       Memory address for player damage value
00001000  =00005FF2                 82  PLA_CLASS   EQU $5FF2       The memory address for the player class
00001000  =00005FF3                 83  GAME_STATE  EQU $5FF3       The memory address of the game state
00001000  =00005FF6                 84  PLA_P_POS   EQU $5FF6       Memory location of the player's previous position
00001000  =00005FF8                 85  PLA_GOLD    EQU $5FF8       Memory address for player gold
00001000  =00005FF9                 86  PLA_POTIONS EQU $5FF9       Memory address for player potions
00001000  =00005FFA                 87  PLA_KEYS    EQU $5FFA       Memory address for player keys
00001000  =00005FFB                 88  PLA_TORCH   EQU $5FFB       Memory address for player torch life
00001000                            89  
00001000                            90  * Enemy
00001000  =00006000                 91  FIRST_ENEMY EQU $6000       Memory location of the first enemy
00001000  =00000002                 92  ENEMY_MAX   EQU 2           Number of enemies in the game
00001000                            93  
00001000  =00000001                 94  DAMAGE      EQU 1           The number of bytes to move from the enemy before reaching the damage
00001000  =00000002                 95  CLASS       EQU 2           The number of bytes to move from the enemy before reaching the class
00001000  =00000003                 96  ALIVE       EQU 3           The number of bytes to move from the enemy before reaching the alive state
00001000  =00000004                 97  POSITION    EQU 4           The number of bytes to move from the enemy before reaching the position
00001000                            98  
00001000                            99  * Shop
00001000  =00006500                100  FIRST_SHOP  EQU $6500       Memory location of the first shop
00001000  =00000002                101  SHOP_MAX    EQU 2           Number of shops in the game
00001000                           102  
00001000  =00000002                103  S_POTIONS   EQU 2           The number of bytes to move from the shop root before reaching the potions
00001000  =00000003                104  S_KEYS      EQU 3           The number of bytes to move from the shop root before reaching the keys
00001000  =00000004                105  S_TORCHES   EQU 4           The number of bytes to move from the shop root before reaching the torches
00001000  =00000005                106  S_DAMAGE_IN EQU 5           The number of bytes to move from the shop root before reaching the damage increase
00001000                           107  
00001000                           108  * HUD
00001000  =00003201                109  CSR_POS_MOVE    EQU $3201   The cursor position to draw the HUD to when in movement state
00001000  =00002001                110  CSR_POS_BATTLE  EQU $2001   The cursor position to draw the HUD to when in battle state
00001000  =00001801                111  CSR_POS_SHOP_S  EQU $1801   The cursor position to draw the HUD to when in shop state for shop info
00001000  =00003401                112  CSR_POS_SHOP_P  EQU $3401   The cursor position to draw the HUD to when in shop state for player info
00001000                           113  
00001000                           114  * Game
00001000  =00005156                115  WIN_POINT   EQU $5156       The position the player has to get to to win
00001000                           116  
00001000                           117  
00001000                           118  *Start of Game
00001000                           119  start:
00001000  6100 2F56                120      bsr     setup_player
00001004  6100 2CDE                121      bsr     setup_world
00001008  6100 2F10                122      bsr     setup_enemies
0000100C  6100 2F84                123      bsr     setup_shops
00001010                           124  
00001010  6100 1FF8                125      bsr     welcome    branch to the welcome subroutine
00001014  6100 29CC                126      bsr     press_continue
00001018  6100 1FE6                127      bsr     game       branch to the game subroutine
0000101C                           128  *Game loop
00003000                           129      org     $3000      the rest of the program is to be located from 3000 onwards
00003000                           130  
00003000                           131  *-------------------------------------------------------
00003000                           132  *-------------------Game Subroutine---------------------
00003000                           133  *-------------------------------------------------------
00003000                           134  game:
00003000  6100 00EE                135      bsr     gameloop   branch to gameloop subroutine
00003004  4E75                     136      rts                return from game: subroutine
00003006                           137            
00003006                           138  end:
00003006  FFFF FFFF                139      simhalt
0000300A                           140  
0000300A                           141  *-------------------------------------------------------
0000300A                           142  *-------------------Welcome Subroutine------------------
0000300A                           143  *-------------------------------------------------------
0000300A                           144  welcome:
0000300A  43F9 00003FD3            145      lea     welcome_msg,A1  assign message to address register A1
00003010  103C 000E                146      move.b  #14,D0          move literal 14 to DO
00003014  4E4F                     147      trap    #15             trap and interpret value in D0
00003016  6100 065E                148      bsr     endl            branch to endl subroutine
0000301A                           149      
0000301A  4E75                     150      rts                     return from welcome: subroutine
0000301C                           151  
0000301C                           152  *-------------------------------------------------------
0000301C                           153  *-------------------Role Picking Subroutine------------------
0000301C                           154  *-------------------------------------------------------
0000301C                           155  pick_role:
0000301C                           156  
0000301C  43F9 00004096            157      lea     wake_up_msg,A1  assign message to address register A1
00003022  103C 000E                158      move.b  #14,D0          move literal 14 to DO
00003026  4E4F                     159      trap    #15             trap and interpret value in D0
00003028  6100 064C                160      bsr     endl            branch to endl subroutine
0000302C                           161      
0000302C  43F9 000041AE            162      lea     pick_role_msg,A1 assign message to address register A1
00003032  103C 000E                163      move.b  #14,D0           move literal 14 to DO
00003036  4E4F                     164      trap    #15              trap and interpret value in D0
00003038                           165      
00003038  7A03                     166      move.l  #3,D5           Move the number 3 to D5 to tell the program how many options there are
0000303A                           167      
0000303A  6100 0062                168      bsr     input           branch to the input subroutine
0000303E                           169      
0000303E  6100 09A2                170      bsr     press_continue          Pause the game until a key is pressed
00003042                           171      
00003042  4E75                     172      rts                     return from pick_role subroutine
00003044                           173      
00003044                           174  role_input:
00003044  11C1 5FF2                175      move.b  D1,PLA_CLASS    Move the role number to player class memory location to hold the class number
00003048                           176      
00003048                           177      *Give the player a message depending on the role chosen
00003048  B23C 0001                178      CMP.B   #1,D1
0000304C  6700 0014                179      BEQ     knight_select   Branch to knight message if role selected
00003050                           180      
00003050  B23C 0002                181      CMP.B   #2,D1
00003054  6700 0020                182      BEQ     mage_select     Branch to mage message if role selected
00003058                           183      
00003058  B23C 0003                184      CMP.B   #3,D1
0000305C  6700 002C                185      BEQ     rogue_select    Branch to rogue message if role selected
00003060                           186      
00003060  4E75                     187      rts
00003062                           188      
00003062                           189  knight_select:
00003062  43F9 00004381            190      lea     knight_role_msg,A1 assign message to address register A1
00003068  103C 000E                191      move.b  #14,D0          move literal 14 to DO
0000306C  4E4F                     192      trap    #15             Display the knight message
0000306E                           193      
0000306E  11FC 0005 5FF3           194      move.b  #5,GAME_STATE   Change the game state to the movement state
00003074                           195      
00003074  4E75                     196      rts                     Return from the sub routine
00003076                           197  
00003076                           198  mage_select:
00003076  43F9 00004422            199      lea     mage_role_msg,A1 assign message to address register A1
0000307C  103C 000E                200      move.b  #14,D0          move literal 14 to DO
00003080  4E4F                     201      trap    #15             Display the mage message
00003082                           202      
00003082  11FC 0005 5FF3           203      move.b  #5,GAME_STATE   Change the game state to the movement state
00003088                           204      
00003088  4E75                     205      rts                     Return from the sub routine
0000308A                           206  
0000308A                           207  rogue_select:
0000308A  43F9 000044B0            208      lea     rogue_role_msg,A1 assign message to address register A1
00003090  103C 000E                209      move.b  #14,D0          move literal 14 to DO
00003094  4E4F                     210      trap    #15             Display the rogue message
00003096                           211      
00003096  11FC 0005 5FF3           212      move.b  #5,GAME_STATE   Change the game state to the movement state
0000309C                           213      
0000309C  4E75                     214      rts                     Return from the sub routin
0000309E                           215      
0000309E                           216  *-------------------------------------------------------
0000309E                           217  *---------Gameplay Input Values Subroutine--------------
0000309E                           218  *-------------------------------------------------------    
0000309E                           219  input:
0000309E  6100 05D6                220      bsr     endl            Branch to end line subroutine
000030A2                           221      
000030A2  43F9 00004325            222      lea     input_nums_msg,A1 assign message to address register A1
000030A8  103C 000E                223      move.b  #14,D0          move literal 14 to DO
000030AC  4E4F                     224      trap    #15             Display the "enter number" message
000030AE                           225      
000030AE  2205                     226      move.l  D5,D1           Move the number of options to D1 to display it
000030B0  103C 0003                227      move.b  #3,D0           move literal 3 to DO
000030B4  4E4F                     228      trap    #15             Display the number in D1 to show the input range
000030B6                           229      
000030B6  43F9 0000433E            230      lea     colon_msg,A1    assign message to address register A1
000030BC  103C 000E                231      move.b  #14,D0          move literal 14 to DO
000030C0  4E4F                     232      trap    #15             Display a colon after the number range
000030C2                           233      
000030C2  103C 0004                234      move.b  #4,D0           Move the number 4 to D0
000030C6  4E4F                     235      trap    #15             Take input
000030C8                           236      
000030C8                           237  manage_input:
000030C8  B27C 0001                238      CMP     #1,D1           Check input against minimum value
000030CC  6D00 0014                239      BLT     invalid_input   Error if less than 1
000030D0                           240      
000030D0  B245                     241      CMP     D5,D1           Compare input against max value
000030D2  6E00 000E                242      BGT     invalid_input   Error if more than max value
000030D6                           243      
000030D6  0C38 0000 5FF3           244      CMP.B   #0,GAME_STATE   Check which state the game is in
000030DC  6700 FF66                245      BEQ     role_input      Branch to the manage input for the role picking
000030E0                           246      
000030E0  4E75                     247      rts                     Return out of subroutine
000030E2                           248  
000030E2                           249  invalid_input:
000030E2  43F9 00004341            250      lea     input_error_msg,A1 assign message to address register A1
000030E8  103C 000E                251      move.b  #14,D0          move literal 14 to DO
000030EC  4E4F                     252      trap    #15             Display the error message
000030EE                           253      
000030EE  60AE                     254      bra     input           Go back to taking input
000030F0                           255  
000030F0                           256  *-------------------------------------------------------
000030F0                           257  *----------------Gameloop (main loop)-------------------
000030F0                           258  *------------------------------------------------------- 
000030F0                           259  gameloop:
000030F0  6100 0554                260      bsr     clear_screen    clears the screen  
000030F4  6100 01CE                261      bsr     draw            branch to draw screen subroutine
000030F8  6100 0214                262      bsr     draw_hud
000030FC  6100 0008                263      bsr     update          branch to update game subroutine 
00003100  6100 04F8                264      bsr     gameplay        branch to gameplay subroutine
00003104  60EA                     265      bra     gameloop        Continue looping the game loop     
00003106                           266  
00003106                           267  *-------------------------------------------------------
00003106                           268  *----------------Update Quest Progress------------------
00003106                           269  *  Complete Quest
00003106                           270  *------------------------------------------------------- 
00003106                           271  update:
00003106  0C38 0000 5FF0           272      CMP.B   #0,PLAYER           Check if the player health is zero
0000310C  6F00 0020                273      BLE     player_dead         Player is dead if health is zero or below
00003110                           274      
00003110  BCFC 5156                275      CMP.W   #WIN_POINT,A6       Check if the player is standing on the win point
00003114  6700 0042                276      BEQ     won_game            Branch to the won game subroutine
00003118                           277  
00003118  0C38 0005 5FF3           278      CMP.B   #5,GAME_STATE       Check which state the game is in
0000311E  6700 005A                279      BEQ     movement_checks     Check for enemies and shops if in movement state
00003122  0C38 0006 5FF3           280      CMP.B   #6,GAME_STATE       Check which state the game is in
00003128  6700 0162                281      BEQ     enemy_alive_check   Check if enemy is dead if in combat
0000312C                           282      
0000312C  4E75                     283      rts
0000312E                           284      
0000312E                           285  *-------------------------------------------------------
0000312E                           286  *---------------------Win or Lose----------------------- 
0000312E                           287  player_dead:
0000312E  6100 0546                288      bsr     endl            Break to new line
00003132                           289      
00003132  43F9 00004A9B            290      lea     death_msg,A1    Load the death message
00003138  103C 000E                291      move.b  #14,D0          Move byte #14 to D0 for the trap command
0000313C  4E4F                     292      trap    #15             Display the loaded message
0000313E                           293  
0000313E  6100 08A2                294      bsr     press_continue  Pause to get input
00003142  6100 0502                295      bsr     clear_screen    Clear the screen
00003146  6100 01AA                296      bsr     draw_graveyard  Draw a graveyard
0000314A  6100 052A                297      bsr     endl            Break to new line
0000314E  11FC 0040 5FF3           298      move.b  #64,GAME_STATE  Set the game state to end game
00003154  6000 04FC                299      bra     replay          Give the player the option to restart or quit
00003158                           300      
00003158                           301  won_game:
00003158  6100 051C                302      bsr     endl            Break to new line
0000315C                           303      
0000315C  43F9 00004B00            304      lea     win_msg,A1      Load the win message
00003162  103C 000E                305      move.b  #14,D0          Move byte #14 to D0 for the trap command
00003166  4E4F                     306      trap    #15             Display the loaded message
00003168                           307  
00003168  6100 0878                308      bsr     press_continue  Pause to get input
0000316C  6100 04D8                309      bsr     clear_screen    Clear the screen
00003170  11FC 0040 5FF3           310      move.b  #64,GAME_STATE  Set the game state to end game
00003176  6000 04DA                311      bra     replay          Give the player the option to restart or quit
0000317A                           312  
0000317A                           313  *-------------------------------------------------------
0000317A                           314  *--------------------Movement State--------------------- 
0000317A                           315  movement_checks:
0000317A  6100 0008                316      bsr     enemies_check   Check for enemies beside the player
0000317E  6100 008E                317      bsr     shops_check     Check for shops beside the player
00003182                           318      
00003182  4E75                     319      rts
00003184                           320  
00003184                           321  *--------------------Enemy Checking--------------------- 
00003184                           322  enemies_check:
00003184  4BF8 6000                323      lea     FIRST_ENEMY,A5  Load the memory address of the first enemy
00003188  1A3C 0000                324      move.b  #0,D5           Move the starting enemy number to D5
0000318C  6100 0004                325      bsr     enemies_loop    Loop through all enemies
00003190  4E75                     326      rts                     Return from subroutine
00003192                           327      
00003192                           328  enemies_loop:
00003192  6100 001C                329      bsr     enemy_check     Check for an enemy
00003196                           330      
00003196  BA3C 0002                331      CMP.B   #ENEMY_MAX,D5   Compare the enemy number with the maximum enemy number
0000319A  6C00 0878                332      BGE     return          Return from the loop if the current enemy number is greater than or equal to the max
0000319E  0C38 0005 5FF3           333      CMP.B   #5,GAME_STATE   Compare the movement gamestate number with the current gamestate
000031A4  6600 086E                334      BNE     return          Return from the loop if the game is not in the movement state anymore
000031A8                           335      
000031A8  5205                     336      add.b   #1,D5           Add to the current enemy number
000031AA  DAFC 000C                337      add.w   #12,A5          Add to the current enemy pointer to move to the next enemy (16 for next enemy - 4 to get back from position)
000031AE  60E2                     338      bra     enemies_loop    Keep looping the enemies
000031B0                           339      
000031B0                           340  
000031B0                           341  enemy_check:
000031B0  564D                     342      add.w   #ALIVE,A5       Move into enemy information to check if its alive
000031B2  0C1D 0000                343      CMP.B   #0,(A5)+        Check if the enemy is alive
000031B6  6700 085C                344      BEQ     return          Return from the check if the enemy is dead
000031BA                           345      
000031BA  340E                     346      move.w  A6,D2           Move the player position to D2
000031BC                           347      
000031BC                           348      *Check if the player is beside an enemy
000031BC  0442 0010                349      sub.w   #16,D2          Check north
000031C0  B455                     350      CMP.W   (A5),D2           
000031C2  6700 0020                351      BEQ     enter_combat    Enter the player into combat
000031C6                           352      
000031C6  0642 0020                353      add.w   #32,D2          Check south
000031CA  B455                     354      CMP.W   (A5),D2           
000031CC  6700 0016                355      BEQ     enter_combat    Enter the player into combat
000031D0                           356      
000031D0  0442 0011                357      sub.w   #17,D2          Check west
000031D4  B455                     358      CMP.W   (A5),D2           
000031D6  6700 000C                359      BEQ     enter_combat    Enter the player into combat
000031DA                           360      
000031DA  5442                     361      add.w   #2,D2           Check east
000031DC  B455                     362      CMP.W   (A5),D2           
000031DE  6700 0004                363      BEQ     enter_combat    Enter the player into combat
000031E2                           364      
000031E2  4E75                     365      rts     Return if not touching an enemy
000031E4                           366      
000031E4                           367  enter_combat:
000031E4  594D                     368      sub.w   #4,A5               Get the memory address of the enemy opposed to it's position
000031E6  11FC 0006 5FF3           369      move.b  #6,GAME_STATE       Move to combat state
000031EC                           370      
000031EC  6100 0488                371      bsr     endl                Line break
000031F0                           372      
000031F0  43F9 0000462A            373      LEA     encounter_msg,A1    Load the encounter message int A1
000031F6  103C 000E                374      move.b  #14,D0              Move #14 to D0 to display message
000031FA  4E4F                     375      trap    #15                 Display the loaded message
000031FC                           376      
000031FC  6100 07E4                377      bsr     press_continue      Branch to the press to continue subroutine
00003200                           378      
00003200  6100 0444                379      bsr     clear_screen        Clear the screen
00003204                           380      
00003204  6100 00DE                381      bsr     draw_skeleton       Draw the enemy
00003208  6100 0220                382      bsr     draw_battle_info    Draw the info
0000320C                           383      
0000320C  4E75                     384      rts
0000320E                           385        
0000320E                           386  *--------------------Shop Checking----------------------
0000320E                           387  shops_check:
0000320E  4BF8 6500                388      lea     FIRST_SHOP,A5   Load the memory address of the first shop
00003212  1A3C 0000                389      move.b  #0,D5           Move the starting shop number to D5
00003216  6100 0004                390      bsr     shops_loop      Loop through all shops
0000321A  4E75                     391      rts                     Return from subroutine
0000321C                           392      
0000321C                           393  shops_loop:
0000321C  6100 001C                394      bsr     shop_check      Check for a shop
00003220                           395      
00003220  BA3C 0002                396      CMP.B   #SHOP_MAX,D5    Compare the shop number with the maximum shop number
00003224  6C00 07EE                397      BGE     return          Return from the loop if the current shop number is greater than or equal to the max
00003228  0C38 0005 5FF3           398      CMP.B   #5,GAME_STATE   Compare the movement gamestate number with the current gamestate
0000322E  6600 07E4                399      BNE     return          Return from the loop if the game is not in the movement state anymore
00003232                           400      
00003232  5205                     401      add.b   #1,D5           Add to the current shop number
00003234  DAFC 0010                402      add.w   #16,A5          Add to the current shop pointer to move to the next shop
00003238  60E2                     403      bra     shops_loop      Keep looping the shops
0000323A                           404      
0000323A                           405  shop_check:    
0000323A  340E                     406      move.w  A6,D2           Move the player position to D2
0000323C                           407      
0000323C                           408      *Check if the player is beside a shop
0000323C  0442 0010                409      sub.w   #16,D2          Check north
00003240  B455                     410      CMP.W   (A5),D2           
00003242  6700 0020                411      BEQ     enter_shop      The player enters a shop
00003246                           412      
00003246  0642 0020                413      add.w   #32,D2          Check south
0000324A  B455                     414      CMP.W   (A5),D2           
0000324C  6700 0016                415      BEQ     enter_shop      The player enters a shop
00003250                           416      
00003250  0442 0011                417      sub.w   #17,D2          Check west
00003254  B455                     418      CMP.W   (A5),D2           
00003256  6700 000C                419      BEQ     enter_shop      The player enters a shop
0000325A                           420      
0000325A  5442                     421      add.w   #2,D2           Check east
0000325C  B455                     422      CMP.W   (A5),D2           
0000325E  6700 0004                423      BEQ     enter_shop      The player enters a shop
00003262                           424      
00003262  4E75                     425      rts     Return if not touching a shop
00003264                           426      
00003264                           427  enter_shop:
00003264  11FC 0007 5FF3           428      move.b  #7,GAME_STATE       Move to shop game state
0000326A                           429      
0000326A  6100 040A                430      bsr     endl                Line break
0000326E                           431      
0000326E  43F9 00004BA1            432      LEA     shop_enter_msg,A1   Load the encounter message int A1
00003274  103C 000E                433      move.b  #14,D0              Move #14 to D0 to display message
00003278  4E4F                     434      trap    #15                 Display the loaded message
0000327A                           435      
0000327A  6100 0766                436      bsr     press_continue      Branch to the press to continue subroutine
0000327E                           437      
0000327E  6100 03C6                438      bsr     clear_screen        Clear the screen
00003282                           439      
00003282  6100 007C                440      bsr     draw_merchant       Draw the merchant
00003286  6100 021C                441      bsr     draw_shop_info      Draw the info
0000328A                           442      
0000328A  4E75                     443      rts
0000328C                           444  
0000328C                           445  *-------------------------------------------------------
0000328C                           446  *---------------------Combat State---------------------- 
0000328C                           447  enemy_alive_check:
0000328C  0C15 0000                448      CMP.B   #0,(A5)     Compare the enemy health with zero
00003290  6F00 0004                449      BLE     enemy_died  If the enemy health is zero or below, they died
00003294                           450      
00003294  4E75                     451      rts
00003296                           452      
00003296                           453  enemy_died:
00003296  6100 03DE                454      bsr     endl            Break to a new line
0000329A                           455  
0000329A  43F9 00004A65            456      lea     battle_won_msg,A1   Load the won battle message
000032A0  103C 000E                457      move.b  #14,D0              Move the literal #14 to D0 for trap task #14
000032A4  4E4F                     458      trap    #15                 Display the message
000032A6                           459      
000032A6  11FC 0005 5FF3           460      move.b  #5,GAME_STATE   Set the game state mack to movement state
000032AC  564D                     461      add.w   #ALIVE,A5       Move from the enemy health to its alive status
000032AE  1ABC 0000                462      move.b  #0,(A5)         Set the enemy as dead
000032B2                           463      
000032B2  6100 072E                464      bsr     press_continue
000032B6                           465      
000032B6  6100 038E                466      bsr     clear_screen    Clear the screen
000032BA  6100 0008                467      bsr     draw            Draw the map for first frame back in movement
000032BE  6100 004E                468      bsr     draw_hud        Draw the hud for first frame back in movement
000032C2                           469      
000032C2  4E75                     470      rts
000032C4                           471      
000032C4                           472  *-------------------------------------------------------
000032C4                           473  *-----------------Draw Quest Updates--------------------
000032C4                           474  * Draw the game progress information, status regarding
000032C4                           475  * quest
000032C4                           476  *------------------------------------------------------- 
000032C4                           477  draw:
000032C4  0C38 0005 5FF3           478      CMP.B   #5,GAME_STATE   Check which state the game is in
000032CA  6700 077C                479      BEQ     draw_loop       If in the movement state, draw the map
000032CE  0C38 0006 5FF3           480      CMP.B   #6,GAME_STATE   Check which state the game is in
000032D4  6700 000E                481      BEQ     draw_skeleton   If in the combat state, draw the enemy
000032D8  0C38 0007 5FF3           482      CMP.B   #7,GAME_STATE   Check which state the game is in
000032DE  6700 0020                483      BEQ     draw_merchant   If in the shop state, draw the enemy
000032E2  4E75                     484      rts
000032E4                           485      
000032E4                           486  draw_skeleton:
000032E4  43F9 00004CF2            487      lea     skeleton_msg,A1 Load the skeleton message
000032EA  103C 000E                488      move.b  #14,D0          Move literal 14 for display message trap command
000032EE  4E4F                     489      trap    #15             Display the loaded message
000032F0                           490      
000032F0  4E75                     491      rts
000032F2                           492      
000032F2                           493  draw_graveyard:
000032F2  43F9 00004C40            494      lea     graveyard_msg,A1 Load the graveyard message
000032F8  103C 000E                495      move.b  #14,D0           Move literal 14 for display message trap command
000032FC  4E4F                     496      trap    #15              Display the loaded message
000032FE                           497      
000032FE  4E75                     498      rts
00003300                           499      
00003300                           500  draw_merchant:
00003300  43F9 00004DEA            501      lea     merchant_msg,A1  Load the merchant message
00003306  103C 000E                502      move.b  #14,D0           Move literal 14 for display message trap command
0000330A  4E4F                     503      trap    #15              Display the loaded message
0000330C                           504      
0000330C  4E75                     505      rts
0000330E                           506      
0000330E                           507  draw_hud:
0000330E  0C38 0005 5FF3           508      CMP.B   #5,GAME_STATE       Check which state the game is in
00003314  6700 0018                509      BEQ     draw_player_info    If in the movement state, draw the player info
00003318  0C38 0006 5FF3           510      CMP.B   #6,GAME_STATE       Check which state the game is in
0000331E  6700 010A                511      BEQ     draw_battle_info    If in the combat state, draw the combat info
00003322  0C38 0007 5FF3           512      CMP.B   #7,GAME_STATE       Check which state the game is in
00003328  6700 017A                513      BEQ     draw_shop_info      If in the shop state, draw the shop info
0000332C                           514      
0000332C  4E75                     515      rts
0000332E                           516  
0000332E                           517  draw_player_info:
0000332E  323C 00FF                518      move.w  #255,D1         Move the word #255 to D1 to set the type of trap 11
00003332  103C 000B                519      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
00003336  4E4F                     520      trap    #15             Trap to get the cursor position in D1
00003338                           521      
00003338  3601                     522      move.w  D1,D3           Move the current cursor position to D3 for later
0000333A                           523      
0000333A                           524      * Display the player health
0000333A  323C 3201                525      move.w  #CSR_POS_MOVE,D1           
0000333E  4E4F                     526      trap    #15             Set the cursor position with trap command 11
00003340  4241                     527      clr     D1              Clear D1 of the cursor position
00003342                           528      
00003342  43F9 00004A00            529      lea     health_msg,A1   Load the hud message
00003348  103C 000E                530      move.b  #14,D0          Move literal 14 for display message trap command
0000334C  4E4F                     531      trap    #15             Display the loaded message
0000334E                           532      
0000334E  1238 5FF0                533      move.b  PLAYER,D1       Move the player health value to D1 to display
00003352  103C 0003                534      move.b  #3,D0           Move literal 3 for display number trap command
00003356  4E4F                     535      trap    #15             Display the number in D1
00003358                           536      
00003358                           537      * Display the torch life
00003358  103C 000B                538      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
0000335C  323C 3201                539      move.w  #CSR_POS_MOVE,D1         
00003360  5241                     540      add.w   #1,D1  
00003362  4E4F                     541      trap    #15             Set the cursor position with trap command 11
00003364  4241                     542      clr     D1              Clear D1 of the cursor position
00003366                           543      
00003366  43F9 00004A18            544      lea     torch_msg,A1   Load the hud message
0000336C  103C 000E                545      move.b  #14,D0          Move literal 14 for display message trap command
00003370  4E4F                     546      trap    #15             Display the loaded message
00003372                           547      
00003372  1238 5FFB                548      move.b  PLA_TORCH,D1    Move the player torch life value to D1 to display
00003376  103C 0003                549      move.b  #3,D0           Move literal 3 for display number trap command
0000337A  4E4F                     550      trap    #15             Display the number in D1
0000337C                           551      
0000337C                           552      * Display the inventory
0000337C  103C 000B                553      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
00003380  323C 3201                554      move.w  #CSR_POS_MOVE,D1
00003384  5441                     555      add.w   #2,D1          
00003386  4E4F                     556      trap    #15             Set the cursor position with trap command 11
00003388  4241                     557      clr     D1              Clear D1 of the cursor position
0000338A                           558      
0000338A  43F9 00004A25            559      lea     inventory_msg,A1   Load the hud message
00003390  103C 000E                560      move.b  #14,D0          Move literal 14 for display message trap command
00003394  4E4F                     561      trap    #15             Display the loaded message
00003396                           562      
00003396                           563      * Display the player gold
00003396  103C 000B                564      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
0000339A  323C 3201                565      move.w  #CSR_POS_MOVE,D1         
0000339E  5641                     566      add.w   #3,D1  
000033A0  4E4F                     567      trap    #15             Set the cursor position with trap command 11
000033A2  4241                     568      clr     D1              Clear D1 of the cursor position
000033A4                           569      
000033A4  43F9 00004A30            570      lea     gold_msg,A1   Load the hud message
000033AA  103C 000E                571      move.b  #14,D0          Move literal 14 for display message trap command
000033AE  4E4F                     572      trap    #15             Display the loaded message
000033B0                           573      
000033B0  49F8 5FF8                574      lea     PLA_GOLD,A4
000033B4  6100 0052                575      bsr     draw_item_number
000033B8                           576      
000033B8                           577      * Display the player potions
000033B8  103C 000B                578      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
000033BC  323C 3201                579      move.w  #CSR_POS_MOVE,D1         
000033C0  5841                     580      add.w   #4,D1  
000033C2  4E4F                     581      trap    #15             Set the cursor position with trap command 11
000033C4  4241                     582      clr     D1              Clear D1 of the cursor position
000033C6                           583      
000033C6  43F9 00004A3F            584      lea     potions_msg,A1   Load the hud message
000033CC  103C 000E                585      move.b  #14,D0          Move literal 14 for display message trap command
000033D0  4E4F                     586      trap    #15             Display the loaded message
000033D2                           587      
000033D2  49F8 5FF9                588      lea     PLA_POTIONS,A4
000033D6  6100 0030                589      bsr     draw_item_number
000033DA                           590      
000033DA                           591      * Display the player keys
000033DA  103C 000B                592      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
000033DE  323C 3201                593      move.w  #CSR_POS_MOVE,D1         
000033E2  5A41                     594      add.w   #5,D1  
000033E4  4E4F                     595      trap    #15             Set the cursor position with trap command 11
000033E6  4241                     596      clr     D1              Clear D1 of the cursor position
000033E8                           597      
000033E8  43F9 00004A38            598      lea     key_msg,A1   Load the hud message
000033EE  103C 000E                599      move.b  #14,D0          Move literal 14 for display message trap command
000033F2  4E4F                     600      trap    #15             Display the loaded message
000033F4                           601      
000033F4  49F8 5FFA                602      lea     PLA_KEYS,A4
000033F8  6100 000E                603      bsr     draw_item_number
000033FC                           604      
000033FC  3203                     605      move.w  D3,D1           Move the current cursor position to D3 for later
000033FE                           606      
000033FE  103C 000B                607      move.b  #11,D0          Move the byte #11 to D0 for trap command 11          
00003402  4E4F                     608      trap    #15             Set the cursor position with trap command 11
00003404                           609      
00003404  4241                     610      clr     D1              Clear D1 for later use
00003406                           611      
00003406  4E75                     612      rts
00003408                           613      
00003408                           614  draw_item_number:
00003408  103C 000E                615      move.b  #14,D0          Move literal 3 for display number trap command
0000340C  43F9 00004A97            616      lea     bracket_open_msg,A1
00003412  4E4F                     617      trap    #15
00003414                           618  
00003414  103C 0003                619      move.b  #3,D0           Move literal 3 for display number trap command
00003418  1214                     620      move.b  (A4),D1         Move the player health value to D1 to display
0000341A  4E4F                     621      trap    #15             Display the number in D1
0000341C                           622      
0000341C  103C 000E                623      move.b  #14,D0          Move literal 3 for display number trap command
00003420  43F9 00004A99            624      lea     bracket_close_msg,A1
00003426  4E4F                     625      trap    #15
00003428  4E75                     626      rts
0000342A                           627      
0000342A                           628  
0000342A                           629  draw_battle_info:
0000342A  323C 00FF                630      move.w  #255,D1         Move the word #255 to D1 to set the type of trap 11
0000342E  103C 000B                631      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
00003432  4E4F                     632      trap    #15             Trap to get the cursor position in D1
00003434                           633      
00003434  3601                     634      move.w  D1,D3           Move the current cursor position to D3 for later
00003436                           635      
00003436                           636      * Move cursor to draw player info
00003436  323C 2001                637      move.w  #CSR_POS_BATTLE,D1           
0000343A  4E4F                     638      trap    #15             Set the cursor position with trap command 11
0000343C  4241                     639      clr     D1              Clear D1 of the cursor position
0000343E                           640      
0000343E  43F9 00004A00            641      lea     health_msg,A1   Load the hud message
00003444  103C 000E                642      move.b  #14,D0          Move literal 14 for display message trap command
00003448  4E4F                     643      trap    #15             Display the loaded message
0000344A                           644      
0000344A  1238 5FF0                645      move.b  PLAYER,D1       Move the player health value to D1 to display
0000344E  103C 0003                646      move.b  #3,D0           Move literal 3 for display number trap command
00003452  4E4F                     647      trap    #15             Display the number in D1
00003454                           648      
00003454                           649      * Move the cursor to draw enemy info
00003454  103C 000B                650      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
00003458  323C 2001                651      move.w  #CSR_POS_BATTLE,D1
0000345C  5241                     652      add.w   #1,D1
0000345E  4E4F                     653      trap    #15             Set the cursor position with trap command 11
00003460  4241                     654      clr     D1              Clear D1 of the cursor position
00003462                           655      
00003462  43F9 00004A09            656      lea     enemy_health_msg,A1 Load the hud message
00003468  103C 000E                657      move.b  #14,D0              Move literal 14 for display message trap command
0000346C  4E4F                     658      trap    #15                 Display the loaded message
0000346E                           659      
0000346E  1215                     660      move.b  (A5),D1         Move the enemy health value to D1 to display
00003470  103C 0003                661      move.b  #3,D0           Move literal 3 for display number trap command
00003474  4E4F                     662      trap    #15             Display the number in D1
00003476                           663      
00003476                           664      * Move the cursor to draw potion information
00003476  103C 000B                665      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
0000347A  323C 2001                666      move.w  #CSR_POS_BATTLE,D1
0000347E  5641                     667      add.w   #3,D1
00003480  4E4F                     668      trap    #15             Set the cursor position with trap command 11
00003482  4241                     669      clr     D1              Clear D1 of the cursor position
00003484                           670      
00003484  43F9 00004A3F            671      lea     potions_msg,A1   Load the hud message
0000348A  103C 000E                672      move.b  #14,D0          Move literal 14 for display message trap command
0000348E  4E4F                     673      trap    #15             Display the loaded message
00003490                           674      
00003490  49F8 5FF9                675      lea     PLA_POTIONS,A4
00003494  6100 FF72                676      bsr     draw_item_number
00003498                           677      
00003498                           678      * Move the cursor back to its previous position
00003498  3203                     679      move.w  D3,D1           Move the previous cursor position back to D1
0000349A  103C 000B                680      move.b  #11,D0          Move the byte #11 to D0 for trap command 11          
0000349E  4E4F                     681      trap    #15             Set the cursor position with trap command 11
000034A0                           682      
000034A0  4241                     683      clr     D1              Clear D1 for later use
000034A2                           684      
000034A2  4E75                     685      rts
000034A4                           686      
000034A4                           687  draw_shop_info:
000034A4  323C 00FF                688      move.w  #255,D1         Move the word #255 to D1 to set the type of trap 11
000034A8  103C 000B                689      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
000034AC  4E4F                     690      trap    #15             Trap to get the cursor position in D1
000034AE                           691      
000034AE  3601                     692      move.w  D1,D3           Move the current cursor position to D3 for later
000034B0                           693      
000034B0                           694      * Move cursor to draw shop info
000034B0  323C 1801                695      move.w  #CSR_POS_SHOP_S,D1           
000034B4  4E4F                     696      trap    #15             Set the cursor position with trap command 11
000034B6  4241                     697      clr     D1              Clear D1 of the cursor position
000034B8                           698      
000034B8  43F9 00004C28            699      lea     shop_stock_msg,A1   Load the hud message
000034BE  103C 000E                700      move.b  #14,D0          Move literal 14 for display message trap command
000034C2  4E4F                     701      trap    #15             Display the loaded message
000034C4                           702      
000034C4                           703      
000034C4                           704      * Display the shop's potions
000034C4  103C 000B                705      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
000034C8  323C 1801                706      move.w  #CSR_POS_SHOP_S,D1         
000034CC  5241                     707      add.w   #1,D1  
000034CE  4E4F                     708      trap    #15             Set the cursor position with trap command 11
000034D0  4241                     709      clr     D1              Clear D1 of the cursor position
000034D2                           710      
000034D2  43F9 00004A3F            711      lea     potions_msg,A1   Load the hud message
000034D8  103C 000E                712      move.b  #14,D0          Move literal 14 for display message trap command
000034DC  4E4F                     713      trap    #15             Display the loaded message
000034DE                           714      
000034DE  544D                     715      add.w   #S_POTIONS,A5
000034E0  49D5                     716      lea     (A5),A4
000034E2  6100 FF24                717      bsr     draw_item_number
000034E6                           718      
000034E6                           719      * Display the shop's keys
000034E6  103C 000B                720      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
000034EA  323C 1801                721      move.w  #CSR_POS_SHOP_S,D1         
000034EE  5441                     722      add.w   #2,D1  
000034F0  4E4F                     723      trap    #15             Set the cursor position with trap command 11
000034F2  4241                     724      clr     D1              Clear D1 of the cursor position
000034F4                           725      
000034F4  43F9 00004A38            726      lea     key_msg,A1      Load the hud message
000034FA  103C 000E                727      move.b  #14,D0          Move literal 14 for display message trap command
000034FE  4E4F                     728      trap    #15             Display the loaded message
00003500                           729      
00003500  524D                     730      add.w   #1,A5
00003502  49D5                     731      lea     (A5),A4
00003504  6100 FF02                732      bsr     draw_item_number
00003508                           733      
00003508                           734      * Display the shop's torches
00003508  103C 000B                735      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
0000350C  323C 1801                736      move.w  #CSR_POS_SHOP_S,D1         
00003510  5641                     737      add.w   #3,D1  
00003512  4E4F                     738      trap    #15             Set the cursor position with trap command 11
00003514  4241                     739      clr     D1              Clear D1 of the cursor position
00003516                           740      
00003516  43F9 00004A49            741      lea     torches_msg,A1  Load the torches message
0000351C  103C 000E                742      move.b  #14,D0          Move literal 14 for display message trap command
00003520  4E4F                     743      trap    #15             Display the loaded message
00003522                           744      
00003522  524D                     745      add.w   #1,A5
00003524  49D5                     746      lea     (A5),A4
00003526  6100 FEE0                747      bsr     draw_item_number
0000352A                           748      
0000352A                           749      * Display the shop's damage upgrades
0000352A  103C 000B                750      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
0000352E  323C 1801                751      move.w  #CSR_POS_SHOP_S,D1         
00003532  5841                     752      add.w   #4,D1  
00003534  4E4F                     753      trap    #15             Set the cursor position with trap command 11
00003536  4241                     754      clr     D1              Clear D1 of the cursor position
00003538                           755      
00003538  43F9 00004A52            756      lea     damage_up_msg,A1 Load the damage upgrades message
0000353E  103C 000E                757      move.b  #14,D0           Move literal 14 for display message trap command
00003542  4E4F                     758      trap    #15              Display the loaded message
00003544                           759      
00003544  524D                     760      add.w   #1,A5
00003546  49D5                     761      lea     (A5),A4
00003548  6100 FEBE                762      bsr     draw_item_number
0000354C                           763      
0000354C                           764      * Display the inventory
0000354C  103C 000B                765      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
00003550  323C 3401                766      move.w  #CSR_POS_SHOP_P,D1       
00003554  4E4F                     767      trap    #15             Set the cursor position with trap command 11
00003556  4241                     768      clr     D1              Clear D1 of the cursor position
00003558                           769      
00003558  43F9 00004A25            770      lea     inventory_msg,A1   Load the hud message
0000355E  103C 000E                771      move.b  #14,D0          Move literal 14 for display message trap command
00003562  4E4F                     772      trap    #15             Display the loaded message
00003564                           773      
00003564                           774      * Display the player gold
00003564  103C 000B                775      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
00003568  323C 3401                776      move.w  #CSR_POS_SHOP_P,D1         
0000356C  5241                     777      add.w   #1,D1  
0000356E  4E4F                     778      trap    #15             Set the cursor position with trap command 11
00003570  4241                     779      clr     D1              Clear D1 of the cursor position
00003572                           780      
00003572  43F9 00004A30            781      lea     gold_msg,A1   Load the hud message
00003578  103C 000E                782      move.b  #14,D0          Move literal 14 for display message trap command
0000357C  4E4F                     783      trap    #15             Display the loaded message
0000357E                           784      
0000357E  49F8 5FF8                785      lea     PLA_GOLD,A4
00003582  6100 FE84                786      bsr     draw_item_number
00003586                           787      
00003586                           788      * Display the player potions
00003586  103C 000B                789      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
0000358A  323C 3401                790      move.w  #CSR_POS_SHOP_P,D1         
0000358E  5441                     791      add.w   #2,D1  
00003590  4E4F                     792      trap    #15             Set the cursor position with trap command 11
00003592  4241                     793      clr     D1              Clear D1 of the cursor position
00003594                           794      
00003594  43F9 00004A3F            795      lea     potions_msg,A1   Load the hud message
0000359A  103C 000E                796      move.b  #14,D0          Move literal 14 for display message trap command
0000359E  4E4F                     797      trap    #15             Display the loaded message
000035A0                           798      
000035A0  49F8 5FF9                799      lea     PLA_POTIONS,A4
000035A4  6100 FE62                800      bsr     draw_item_number
000035A8                           801      
000035A8                           802      * Display the player keys
000035A8  103C 000B                803      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
000035AC  323C 3401                804      move.w  #CSR_POS_SHOP_P,D1         
000035B0  5641                     805      add.w   #3,D1  
000035B2  4E4F                     806      trap    #15             Set the cursor position with trap command 11
000035B4  4241                     807      clr     D1              Clear D1 of the cursor position
000035B6                           808      
000035B6  43F9 00004A38            809      lea     key_msg,A1   Load the hud message
000035BC  103C 000E                810      move.b  #14,D0          Move literal 14 for display message trap command
000035C0  4E4F                     811      trap    #15             Display the loaded message
000035C2                           812      
000035C2  49F8 5FFA                813      lea     PLA_KEYS,A4
000035C6  6100 FE40                814      bsr     draw_item_number
000035CA                           815      
000035CA                           816      * Display the torch life
000035CA  103C 000B                817      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
000035CE  323C 3401                818      move.w  #CSR_POS_SHOP_P,D1
000035D2  5A41                     819      add.w   #5,D1       
000035D4  4E4F                     820      trap    #15             Set the cursor position with trap command 11
000035D6  4241                     821      clr     D1              Clear D1 of the cursor position
000035D8                           822      
000035D8  43F9 00004A18            823      lea     torch_msg,A1   Load the hud message
000035DE  103C 000E                824      move.b  #14,D0          Move literal 14 for display message trap command
000035E2  4E4F                     825      trap    #15             Display the loaded message
000035E4                           826      
000035E4  1238 5FFB                827      move.b  PLA_TORCH,D1    Move the player torch life value to D1 to display
000035E8  103C 0003                828      move.b  #3,D0           Move literal 3 for display number trap command
000035EC  4E4F                     829      trap    #15             Display the number in D1
000035EE                           830      
000035EE                           831      * Move the cursor back to its previous position
000035EE  3203                     832      move.w  D3,D1           Move the previous cursor position back to D1
000035F0  103C 000B                833      move.b  #11,D0          Move the byte #11 to D0 for trap command 11          
000035F4  4E4F                     834      trap    #15             Set the cursor position with trap command 11
000035F6                           835      
000035F6  4241                     836      clr     D1              Clear D1 for later use
000035F8                           837      
000035F8  4E75                     838      rts
000035FA                           839  
000035FA                           840  *-------------------------------------------------------
000035FA                           841  *---Game Play (Quest Progress)--------------------------
000035FA                           842  *------------------------------------------------------- 
000035FA                           843  gameplay:
000035FA  6100 007A                844      bsr     endl            Break to a new line
000035FE  0C38 0000 5FF3           845      CMP.B   #0,GAME_STATE   Check which stage the game is in
00003604  6700 FA16                846      BEQ     pick_role       Branch to the pick role subroutine
00003608  0C38 0005 5FF3           847      CMP.B   #5,GAME_STATE   Check which stage the game is in
0000360E  6700 007C                848      BEQ     movement        Branch to the movement subroutine
00003612  0C38 0006 5FF3           849      CMP.B   #6,GAME_STATE   Check which stage the game is in
00003618  6700 01DA                850      BEQ     combat          branch to the combat subroutine
0000361C  0C38 0007 5FF3           851      CMP.B   #7,GAME_STATE   Check which stage the game is in
00003622  6700 0378                852      BEQ     shop            branch to the shop subroutine
00003626  4E75                     853      rts                     Return from 'gameplay' subroutine
00003628                           854  
00003628                           855  *-------------------------------------------------------
00003628                           856  *------------------Screen Decoration--------------------
00003628                           857  *-------------------------------------------------------
00003628                           858  decorate:
00003628  163C 003C                859      move.b  #60, D3
0000362C  6100 0048                860      bsr     endl
00003630                           861  out:
00003630  43F9 0000406A            862      lea     loop_msg,A1
00003636  103C 000E                863      move.b  #14,D0
0000363A  4E4F                     864      trap    #15
0000363C  5343                     865      sub     #1,D3   decrement loop counter
0000363E  66F0                     866      bne     out     repeat until D0=0
00003640  6100 0034                867      bsr     endl
00003644  4E75                     868      rts
00003646                           869      
00003646                           870  clear_screen: 
00003646  103C 000B                871      move.b  #11,D0      clear screen
0000364A  323C FF00                872      move.w  #$ff00,D1
0000364E  4E4F                     873      trap    #15
00003650  4E75                     874      rts
00003652                           875  *-------------------------------------------------------
00003652                           876  *------------------------Replay-------------------------
00003652                           877  *-------------------------------------------------------
00003652                           878  replay:
00003652  43F9 0000406C            879      lea     replay_msg,A1   Load the Replay message
00003658  103C 000E                880      move.b  #14,D0          Move the number literal 14 to D0 for trap command
0000365C  4E4F                     881      trap    #15             Display the loaded message
0000365E                           882      
0000365E  1A3C 0002                883      move.b  #2,D5           Move the number of input options to D5
00003662  6100 FA3A                884      bsr     input           Take user input
00003666  1401                     885      move.b  D1,D2           Move the input to D2 so it's not trampled by the clear screen
00003668                           886      
00003668  61DC                     887      bsr     clear_screen    Clear the screen
0000366A                           888      
0000366A  B43C 0001                889      cmp.b   #1,D2           Compare the user input against the two options
0000366E  6700 D990                890      beq     start           Restart if the user enters 1
00003672  6100 F992                891      bsr     end             Quit if the user enters 2
00003676                           892  
00003676                           893  endl:
00003676  48E7 8040                894      movem.l D0/A1,-(A7)
0000367A  303C 000E                895      move    #14,D0
0000367E  43F9 00003FD0            896      lea     crlf,A1
00003684  4E4F                     897      trap    #15
00003686  4CDF 0201                898      movem.l (A7)+,D0/A1
0000368A  4E75                     899      rts
0000368C                           900          
0000368C                           901  *-------------------------------------------------------
0000368C                           902  *----------------------Manage Movement------------------
0000368C                           903  *-------------------------------------------------------
0000368C                           904  movement:
0000368C  43F9 00004543            905      lea     movement_msg,A1 Load the movement message
00003692  103C 000E                906      move.b  #14,D0          Move literal 14 for display message trap command
00003696  4E4F                     907      trap    #15             Display the loaded message
00003698                           908  
00003698  7A05                     909      move.l  #5,D5           Move the number 4 to D5 to tell the program how many options there are
0000369A                           910      
0000369A  6100 FA02                911      bsr     input           branch to the input subroutine
0000369E  6100 000C                912      bsr     wall_collisions Branch to check wall collisions and movement
000036A2                           913      
000036A2  B23C 0005                914      CMP.B   #5,D1           Check the input against taking a potion
000036A6  6700 036E                915      BEQ     take_potion     Branch to take a potion
000036AA                           916      
000036AA  4E75                     917      rts
000036AC                           918  
000036AC                           919  *-------------------------------------------------------
000036AC                           920  *-------------------Check Wall Collisions---------------
000036AC                           921  *-------------------------------------------------------
000036AC                           922  wall_collisions:
000036AC                           923      *Check collisions in the movement direction
000036AC  B23C 0001                924      CMP.B   #1,D1       Check the movement direction
000036B0  6700 001C                925      BEQ     move_north  Branch to Display the corridor type
000036B4                           926      
000036B4  B23C 0002                927      CMP.B   #2,D1       Check the movement direction
000036B8  6700 005A                928      BEQ     move_south  Branch to Display the corridor type
000036BC                           929      
000036BC  B23C 0003                930      CMP.B   #3,D1       Check the movement direction
000036C0  6700 0098                931      BEQ     move_west   Branch to Display the corridor type
000036C4                           932      
000036C4  B23C 0004                933      CMP.B   #4,D1       Check the movement direction
000036C8  6700 00D4                934      BEQ     move_east   Branch to Display the corridor type
000036CC                           935      
000036CC  4E75                     936      rts
000036CE                           937      
000036CE                           938  move_north:
000036CE                           939      *Check if the tile is any of the corridor types with a wall at the top
000036CE  0C16 0002                940      CMP.B   #2,(A6)
000036D2  6700 010E                941      BEQ     movement_blocked
000036D6  0C16 0003                942      CMP.B   #3,(A6)
000036DA  6700 0106                943      BEQ     movement_blocked
000036DE  0C16 0006                944      CMP.B   #6,(A6)
000036E2  6700 00FE                945      BEQ     movement_blocked
000036E6  0C16 0007                946      CMP.B   #7,(A6)
000036EA  6700 00F6                947      BEQ     movement_blocked
000036EE  0C16 000B                948      CMP.B   #11,(A6)
000036F2  6700 00EE                949      BEQ     movement_blocked
000036F6  0C16 000C                950      CMP.B   #12,(A6)
000036FA  6700 00E6                951      BEQ     movement_blocked
000036FE  0C16 000D                952      CMP.B   #13,(A6)
00003702  6700 00DE                953      BEQ     movement_blocked
00003706                           954      
00003706  31CE 5FF6                955      move.w  A6,PLA_P_POS        Move the player's previous location to a memory address for storage
0000370A  9CFC 0010                956      sub     #16,A6              Move the player north
0000370E  5338 5FFB                957      sub.b   #1,PLA_TORCH        Remove one from the player's torch life
00003712                           958      
00003712  4E75                     959      rts
00003714                           960      
00003714                           961  move_south:
00003714                           962      *Check if the tile is any of the corridor types with a wall at the bottom
00003714  0C16 0002                963      CMP.B   #2,(A6)
00003718  6700 00C8                964      BEQ     movement_blocked
0000371C  0C16 0004                965      CMP.B   #4,(A6)
00003720  6700 00C0                966      BEQ     movement_blocked
00003724  0C16 0005                967      CMP.B   #5,(A6)
00003728  6700 00B8                968      BEQ     movement_blocked
0000372C  0C16 0009                969      CMP.B   #9,(A6)
00003730  6700 00B0                970      BEQ     movement_blocked
00003734  0C16 000B                971      CMP.B   #11,(A6)
00003738  6700 00A8                972      BEQ     movement_blocked
0000373C  0C16 000D                973      CMP.B   #13,(A6)
00003740  6700 00A0                974      BEQ     movement_blocked
00003744  0C16 000E                975      CMP.B   #14,(A6)
00003748  6700 0098                976      BEQ     movement_blocked
0000374C                           977      
0000374C  31CE 5FF6                978      move.w  A6,PLA_P_POS        Move the player's previous location to a memory address for storage
00003750  DCFC 0010                979      add     #16,A6              Move the player south
00003754  5338 5FFB                980      sub.b   #1,PLA_TORCH        Remove one from the player's torch life
00003758                           981      
00003758  4E75                     982      rts
0000375A                           983  
0000375A                           984  move_west:
0000375A                           985      *Check if the tile is any of the corridor types with a wall to the left
0000375A  0C16 0001                986      CMP.B   #1,(A6)
0000375E  6700 0082                987      BEQ     movement_blocked
00003762  0C16 0003                988      CMP.B   #3,(A6)
00003766  6700 007A                989      BEQ     movement_blocked
0000376A  0C16 0004                990      CMP.B   #4,(A6)
0000376E  6700 0072                991      BEQ     movement_blocked
00003772  0C16 0008                992      CMP.B   #8,(A6)
00003776  6700 006A                993      BEQ     movement_blocked
0000377A  0C16 000B                994      CMP.B   #11,(A6)
0000377E  6700 0062                995      BEQ     movement_blocked
00003782  0C16 000C                996      CMP.B   #12,(A6)
00003786  6700 005A                997      BEQ     movement_blocked
0000378A  0C16 000E                998      CMP.B   #14,(A6)
0000378E  6700 0052                999      BEQ     movement_blocked
00003792                          1000      
00003792  31CE 5FF6               1001      move.w  A6,PLA_P_POS        Move the player's previous location to a memory address for storage
00003796  534E                    1002      sub     #1,A6               Move the player west
00003798  5338 5FFB               1003      sub.b   #1,PLA_TORCH        Remove one from the player's torch life
0000379C                          1004      
0000379C  4E75                    1005      rts
0000379E                          1006      
0000379E                          1007  move_east:
0000379E                          1008      *Check if the tile is any of the corridor types with a wall to the right
0000379E  0C16 0001               1009      CMP.B   #1,(A6)
000037A2  6700 003E               1010      BEQ     movement_blocked
000037A6  0C16 0005               1011      CMP.B   #5,(A6)
000037AA  6700 0036               1012      BEQ     movement_blocked
000037AE  0C16 0006               1013      CMP.B   #6,(A6)
000037B2  6700 002E               1014      BEQ     movement_blocked
000037B6  0C16 000A               1015      CMP.B   #10,(A6)
000037BA  6700 0026               1016      BEQ     movement_blocked
000037BE  0C16 000C               1017      CMP.B   #12,(A6)
000037C2  6700 001E               1018      BEQ     movement_blocked
000037C6  0C16 000D               1019      CMP.B   #13,(A6)
000037CA  6700 0016               1020      BEQ     movement_blocked
000037CE  0C16 000E               1021      CMP.B   #14,(A6)
000037D2  6700 000E               1022      BEQ     movement_blocked
000037D6                          1023      
000037D6  31CE 5FF6               1024      move.w  A6,PLA_P_POS        Move the player's previous location to a memory address for storage
000037DA  524E                    1025      add     #1,A6               Move the player east
000037DC  5338 5FFB               1026      sub.b   #1,PLA_TORCH        Remove one from the player's torch life
000037E0                          1027      
000037E0  4E75                    1028      rts
000037E2                          1029  
000037E2                          1030  movement_blocked:
000037E2  43F9 000045D5           1031      lea     movement_blocked_msg,A1 Load the message
000037E8  103C 000E               1032      move.b  #14,D0                  Move the trap command to display a message
000037EC  4E4F                    1033      trap    #15                     Display the movement blocked message
000037EE  6100 01F2               1034      bsr     press_continue          Pause the game until a key is pressed
000037F2                          1035      
000037F2  4E75                    1036      rts                             Return from the subroutine
000037F4                          1037      
000037F4                          1038  *-------------------------------------------------------
000037F4                          1039  *---------------------Manage Combat---------------------
000037F4                          1040  *-------------------------------------------------------
000037F4                          1041  combat:
000037F4  6100 FE80               1042      bsr endl                Break to a new line
000037F8                          1043  
000037F8  43F9 00004662           1044      lea     combat_msg,A1   Load the combat message
000037FE  103C 000E               1045      move.b  #14,D0          Move literal 14 for display message trap command
00003802  4E4F                    1046      trap    #15             Display the loaded message
00003804                          1047  
00003804  7A05                    1048      move.l  #5,D5           Move the number 4 to D5 to tell the program how many options there are
00003806  6100 F896               1049      bsr     input           branch to the input subroutine
0000380A                          1050      
0000380A  B23C 0001               1051      CMP.B   #1,D1           Compare input with number literal 1
0000380E  6700 0024               1052      BEQ     block_counter   Branch to block/counter subroutine
00003812  B23C 0002               1053      CMP.B   #2,D1           Compare input with number literal 2
00003816  6700 0036               1054      BEQ     cast_magic      Branch to cast magic subroutine
0000381A  B23C 0003               1055      CMP.B   #3,D1           Compare input with number literal 3
0000381E  6700 0048               1056      BEQ     melee_attack    Branch to melee subroutine
00003822  B23C 0004               1057      CMP.B   #4,D1           Compare input with number literal 4
00003826  6700 005A               1058      BEQ     try_run         Branch to try run subroutine
0000382A  B23C 0005               1059      CMP.B   #5,D1           Compare input with number literal 5
0000382E  6700 01E6               1060      BEQ     take_potion     Branch to take potion subroutine
00003832                          1061      
00003832  4E75                    1062      rts
00003834                          1063      
00003834                          1064  block_counter:
00003834  6100 01C4               1065      bsr     random_number       Get a random number 1-100
00003838                          1066      
00003838  B47C 0021               1067      CMP.W   #33,D2              Compare random with #33
0000383C  6F00 008C               1068      BLE     both_block          Enemy tries to block - attack failed
00003840  B47C 0042               1069      CMP.W   #66,D2              Compare random with #66
00003844  6F00 011E               1070      BLE     hit_by_magic        Enemy casts magic - player takes damage      
00003848  6E00 00E6               1071      BGT     hit_against_melee   Enemy tried to lunge - enemy takes damage
0000384C                          1072      
0000384C  4E75                    1073      rts                         Return from subroutine
0000384E                          1074      
0000384E                          1075  cast_magic:
0000384E  6100 01AA               1076      bsr     random_number       Get a random number 1-100
00003852                          1077  
00003852  B47C 0021               1078      CMP.W   #33,D2              Compare random with #33
00003856  6F00 00A8               1079      BLE     hit_against_block    Enemy blocks - enemy takes damage
0000385A  B47C 0042               1080      CMP.W   #66,D2              Compare random with #66
0000385E  6F00 007C               1081      BLE     both_cast_magic     Enemy casts magic - attack fails     
00003862  6E00 011C               1082      BGT     hit_by_melee        Enemy lunges forward - player takes damage
00003866                          1083      
00003866  4E75                    1084      rts                         Return from subroutine
00003868                          1085  
00003868                          1086  melee_attack:
00003868  6100 0190               1087      bsr     random_number       Get a random number 1-100
0000386C                          1088  
0000386C  B47C 0021               1089      CMP.W   #33,D2              Compare random with #33
00003870  6F00 00D6               1090      BLE     hit_by_counter      Enemy blocks and counters - player takes damage
00003874  B47C 0042               1091      CMP.W   #66,D2              Compare random with #66
00003878  6F00 009E               1092      BLE     hit_against_magic   Enemy casts magic - player takes damage     
0000387C  6E00 0070               1093      BGT     both_melee          Enemy lunges forward - attack fails
00003880                          1094      
00003880  4E75                    1095      rts                         Return from subroutine
00003882                          1096  
00003882                          1097  try_run:
00003882  6100 0176               1098      bsr     random_number       Get a random number
00003886                          1099      
00003886  B47C 0028               1100      CMP.W   #40,D2              Compare the random number to 40
0000388A  6D00 0006               1101      BLT     escape_attack       If the random number is less than 40 the player escapes
0000388E  6C00 001E               1102      BGE     fail_escape         If the random number is more than 40 the player gets damaged
00003892                          1103      
00003892                          1104  escape_attack:
00003892  3C78 5FF6               1105      move.w  PLA_P_POS,A6    Move the player to their position before the battle
00003896  11FC 0005 5FF3          1106      move.b  #5,GAME_STATE   Switch game state
0000389C                          1107      
0000389C  43F9 000046C4           1108      lea     escape_msg,A1   Load escape message
000038A2  103C 000E               1109      move.b  #14,D0          Move literal for trap command
000038A6  4E4F                    1110      trap    #15             Trap 15 to display messgae
000038A8                          1111      
000038A8  6100 0138               1112      bsr     press_continue  Pause until the player presses to continue
000038AC                          1113      
000038AC  4E75                    1114      rts                     Return from subroutine
000038AE                          1115      
000038AE                          1116  fail_escape:
000038AE  43F9 000046DF           1117      lea     fail_escape_msg,A1  Load fail escape message
000038B4  103C 000E               1118      move.b  #14,D0              Move literal for trap command
000038B8  4E4F                    1119      trap    #15                 Trap 15 to display message
000038BA                          1120      
000038BA  524D                    1121      add.w   #DAMAGE,A5           Move the enemy pointer to its damage value
000038BC  1A15                    1122      move.b  (A5),D5             Store the damage value in D5
000038BE  534D                    1123      sub.w   #DAMAGE,A5           Move the enemy pointer back to the enemy health/root
000038C0  9B38 5FF0               1124      sub.b   D5,PLAYER           Remove the enemy's damage from the player's health
000038C4                          1125      
000038C4  6100 011C               1126      bsr     press_continue      Pause until the player presses to continue
000038C8  4E75                    1127      rts
000038CA                          1128      
000038CA                          1129  both_block:
000038CA  103C 000E               1130      move.b  #14,D0
000038CE  43F9 0000471A           1131      lea     both_block_msg,A1
000038D4  4E4F                    1132      trap    #15
000038D6                          1133      
000038D6  6100 010A               1134      bsr     press_continue
000038DA  4E75                    1135      rts
000038DC                          1136      
000038DC                          1137  both_cast_magic:
000038DC  103C 000E               1138      move.b  #14,D0
000038E0  43F9 0000473F           1139      lea     both_cast_magic_msg,A1
000038E6  4E4F                    1140      trap    #15
000038E8                          1141      
000038E8  6100 00F8               1142      bsr     press_continue
000038EC  4E75                    1143      rts
000038EE                          1144  
000038EE                          1145  both_melee:
000038EE  103C 000E               1146      move.b  #14,D0
000038F2  43F9 00004794           1147      lea     both_melee_msg,A1
000038F8  4E4F                    1148      trap    #15  
000038FA                          1149      
000038FA  6100 00E6               1150      bsr     press_continue
000038FE  4E75                    1151      rts
00003900                          1152  
00003900                          1153  hit_against_block:
00003900  103C 000E               1154      move.b  #14,D0
00003904  43F9 000047DD           1155      lea     hit_against_block_msg,A1
0000390A  4E4F                    1156      trap    #15  
0000390C                          1157      
0000390C  1A38 5FF1               1158      move.b  PLA_DAMAGE,D5       Store the player damage value in D5
00003910  9B15                    1159      sub.b   D5,(A5)           Remove the player's damage from the enemy's health
00003912                          1160      
00003912  6100 00CE               1161      bsr     press_continue
00003916  4E75                    1162      rts
00003918                          1163  
00003918                          1164  hit_against_magic:
00003918  103C 000E               1165      move.b  #14,D0
0000391C  43F9 00004825           1166      lea     hit_against_magic_msg,A1
00003922  4E4F                    1167      trap    #15
00003924                          1168      
00003924  1A38 5FF1               1169      move.b  PLA_DAMAGE,D5       Store the player damage value in D5
00003928  9B15                    1170      sub.b   D5,(A5)           Remove the player's damage from the enemy's health
0000392A                          1171      
0000392A  6100 00B6               1172      bsr     press_continue
0000392E  4E75                    1173      rts
00003930                          1174  
00003930                          1175  hit_against_melee:
00003930  103C 000E               1176      move.b  #14,D0
00003934  43F9 00004889           1177      lea     hit_against_melee_msg,A1
0000393A  4E4F                    1178      trap    #15
0000393C                          1179      
0000393C  1A38 5FF1               1180      move.b  PLA_DAMAGE,D5       Store the player damage value in D5
00003940  9B15                    1181      sub.b   D5,(A5)           Remove the player's damage from the enemy's health
00003942                          1182      
00003942  6100 009E               1183      bsr     press_continue
00003946  4E75                    1184      rts
00003948                          1185  
00003948                          1186  hit_by_counter:
00003948  103C 000E               1187      move.b  #14,D0
0000394C  43F9 000048DF           1188      lea     hit_by_counter_msg,A1
00003952  4E4F                    1189      trap    #15  
00003954                          1190      
00003954  524D                    1191      add.w   #DAMAGE,A5           Move the enemy pointer to its damage value
00003956  1A15                    1192      move.b  (A5),D5             Store the damage value in D5
00003958  534D                    1193      sub.w   #DAMAGE,A5           Move the enemy pointer back to the enemy health/root
0000395A  9B38 5FF0               1194      sub.b   D5,PLAYER           Remove the enemy's damage from the player's health
0000395E                          1195      
0000395E  6100 0082               1196      bsr     press_continue
00003962  4E75                    1197      rts
00003964                          1198  
00003964                          1199  hit_by_magic:
00003964  103C 000E               1200      move.b  #14,D0
00003968  43F9 00004942           1201      lea     hit_by_magic_msg,A1
0000396E  4E4F                    1202      trap    #15  
00003970                          1203      
00003970  524D                    1204      add.w   #DAMAGE,A5           Move the enemy pointer to its damage value
00003972  1A15                    1205      move.b  (A5),D5             Store the damage value in D5
00003974  534D                    1206      sub.w   #DAMAGE,A5           Move the enemy pointer back to the enemy health/root
00003976  9B38 5FF0               1207      sub.b   D5,PLAYER           Remove the enemy's damage from the player's health
0000397A                          1208      
0000397A  6100 0066               1209      bsr     press_continue
0000397E  4E75                    1210      rts
00003980                          1211  
00003980                          1212  hit_by_melee:
00003980  103C 000E               1213      move.b  #14,D0
00003984  43F9 000049B2           1214      lea     hit_by_melee_msg,A1
0000398A  4E4F                    1215      trap    #15
0000398C                          1216      
0000398C  524D                    1217      add.w   #DAMAGE,A5           Move the enemy pointer to its damage value
0000398E  1A15                    1218      move.b  (A5),D5             Store the damage value in D5
00003990  534D                    1219      sub.w   #DAMAGE,A5           Move the enemy pointer back to the enemy health/root
00003992  9B38 5FF0               1220      sub.b   D5,PLAYER           Remove the enemy's damage from the player's health
00003996                          1221      
00003996  6100 004A               1222      bsr     press_continue
0000399A  4E75                    1223      rts
0000399C                          1224  
0000399C                          1225  *-------------------------------------------------------
0000399C                          1226  *----------------------Shop State-----------------------
0000399C                          1227  *-------------------------------------------------------
0000399C                          1228  shop:
0000399C  43F9 00004BD3           1229      lea     shop_msg,A1     Load the shop message
000039A2  103C 000E               1230      move.b  #14,D0          Move the number literal 14 to D0 for trap command
000039A6  4E4F                    1231      trap    #15             Display the loaded message
000039A8                          1232  
000039A8  7A05                    1233      move.l  #5,D5           Move the number 4 to D5 to tell the program how many options there are
000039AA  6100 F6F2               1234      bsr     input           branch to the input subroutine
000039AE                          1235      
000039AE  B23C 0001               1236      CMP.B   #1,D1           Compare input with number literal 1
000039B2  6700 0024               1237      BEQ     buy_potion      Branch to buy potion subroutine
000039B6  B23C 0002               1238      CMP.B   #2,D1           Compare input with number literal 2
000039BA  6700 001E               1239      BEQ     buy_key         Branch to buy key subroutine
000039BE  B23C 0003               1240      CMP.B   #3,D1           Compare input with number literal 3
000039C2  6700 0018               1241      BEQ     buy_torch       Branch to buy torch subroutine
000039C6  B23C 0004               1242      CMP.B   #4,D1           Compare input with number literal 4
000039CA  6700 0012               1243      BEQ     upgrade_dmg     Branch to buy damage upgrade subroutine
000039CE  B23C 0005               1244      CMP.B   #5,D1           Compare input with number literal 5
000039D2  6700 000C               1245      BEQ     leave_shop      Branch to leave shop subroutine
000039D6                          1246  
000039D6  4E75                    1247      rts
000039D8                          1248      
000039D8                          1249  buy_potion:
000039D8  4E75                    1250      rts
000039DA                          1251      
000039DA                          1252  buy_key:
000039DA  4E75                    1253      rts
000039DC                          1254      
000039DC                          1255  buy_torch:
000039DC  4E75                    1256      rts
000039DE                          1257      
000039DE                          1258  upgrade_dmg:
000039DE  4E75                    1259      rts
000039E0                          1260      
000039E0                          1261  leave_shop:
000039E0  4E75                    1262      rts
000039E2                          1263  
000039E2                          1264  *-------------------------------------------------------
000039E2                          1265  *-------------------Misc Subroutines--------------------
000039E2                          1266  *-------------------------------------------------------
000039E2                          1267  press_continue:
000039E2  6100 FC92               1268      bsr     endl
000039E6                          1269  
000039E6  43F9 000045F0           1270      lea     continue_msg,A1 Load message into A1
000039EC  103C 000E               1271      move.b  #14,D0          Move the trap command to display a message
000039F0  4E4F                    1272      trap    #15             display the "press any ket to continue" text
000039F2                          1273      
000039F2  103C 0004               1274      move.b  #4,D0           Move the trap command to take input
000039F6  4E4F                    1275      trap    #15             take input to freeze the game
000039F8  4E75                    1276      rts                     Return from the 'press continue' subroutine
000039FA                          1277      
000039FA                          1278  random_number:              *Psuedo random number generator, courtesy of Pdraig
000039FA  103C 0008               1279      move.b  #8,D0
000039FE  4E4F                    1280      trap    #15
00003A00  C2BC 005FFFFF           1281      and.l   #$5FFFFF,d1     prevent overflow in divu
00003A06  82FC 0064               1282      divu    #100,D1         time count / 100
00003A0A  4841                    1283      swap    D1              swap upper and lower words of D1 to put remainder in low word
00003A0C  5241                    1284      addq.w  #1,D1           d1.w contains number from 1 to 100
00003A0E  3401                    1285      move    D1,D2           d2 = d1
00003A10  4281                    1286      clr.l   D1
00003A12                          1287      
00003A12  4E75                    1288      rts                     Returns from random generation subroutine
00003A14                          1289      
00003A14                          1290  return:   *Subroutine to branch to to break out of a subroutine when a condition is met
00003A14  4E75                    1291      rts
00003A16                          1292      
00003A16                          1293  take_potion:
00003A16  0C38 0000 5FF9          1294      CMP.B   #0,PLA_POTIONS      Check if the player has potions to drink
00003A1C  6F00 001A               1295      BLE     no_potions          If the potions are zero or below branch to no_potions
00003A20                          1296      
00003A20  5638 5FF0               1297      add.b   #3,PLAYER           Add 3 to the player's health
00003A24  5338 5FF9               1298      sub.b   #1,PLA_POTIONS      Remove one potion
00003A28                          1299      
00003A28  43F9 00004B4D           1300      lea     take_potion_msg,A1  Load the take potion message
00003A2E  103C 000E               1301      move.b  #14,D0              Move the number literal 14 to D0 for trap command
00003A32  4E4F                    1302      trap    #15                 Display the loaded message
00003A34                          1303      
00003A34  61AC                    1304      bsr     press_continue      Wait for player input
00003A36                          1305      
00003A36  4E75                    1306      rts                         Return from subroutine
00003A38                          1307  
00003A38                          1308  no_potions:
00003A38  43F9 00004B87           1309      lea     no_potions_msg,A1   Load the no potions message
00003A3E  103C 000E               1310      move.b  #14,D0              Move the number literal 14 to D0 for trap command
00003A42  4E4F                    1311      trap    #15                 Display the loaded message
00003A44                          1312      
00003A44  619C                    1313      bsr     press_continue      Wait for player input
00003A46                          1314      
00003A46  4E75                    1315      rts                         Return from subroutine
00003A48                          1316      
00003A48                          1317  *-------------------------------------------------------
00003A48                          1318  *----------------------Draw loop------------------------
00003A48                          1319  *-------------------------------------------------------
00003A48                          1320  draw_loop:
00003A48  45F8 5000               1321      lea     $5000,A2        Load starting memory location into A7
00003A4C  1C3C 0000               1322      move.b  #0,D6           Data register used for rows
00003A50  1E3C 0000               1323      move.b  #0,D7           Data register used for columns
00003A54  7200                    1324      move.l  #0,D1           Clear the D1 data register
00003A56                          1325      
00003A56  6100 0004               1326      bsr     loop_rows       Loop for every row
00003A5A  4E75                    1327      rts
00003A5C                          1328      
00003A5C                          1329  loop_rows:
00003A5C  BC7C 0016               1330      CMP     #22,D6          Check the rows don't go out of bounds
00003A60  6EB2                    1331      BGT     return          If the rows are greater than 22 end the loop
00003A62                          1332      
00003A62  1E3C 0000               1333      move.b  #0,D7           Reset to column 0
00003A66  6100 000A               1334      bsr     loop_columns    Loop for every column
00003A6A                          1335      
00003A6A  5206                    1336      add.b   #1,D6           Add to the rows
00003A6C                          1337      
00003A6C  6100 FC08               1338      bsr     endl            Break to the next line
00003A70  60EA                    1339      bra     loop_rows       Loop through the rows again
00003A72                          1340      
00003A72                          1341  loop_columns:
00003A72  BE3C 000F               1342      CMP.B   #15,D7              Check the rows don't go out of bounds
00003A76  6E9C                    1343      BGT     return              If the rows are greater than 22 end the loop
00003A78                          1344      
00003A78  6100 0018               1345      bsr     draw_tile           Draw the current tile
00003A7C  6100 00BE               1346      bsr     check_for_player    Draw the player in the current tile if they're there
00003A80  6100 0110               1347      bsr     check_for_enemies   Draw an enemy in the current tile if they is one there
00003A84  6100 0206               1348      bsr     check_for_win_point Draw the win point in the current tile if it's there
00003A88  6100 018A               1349      bsr     check_for_shops     Draw a shop in the current tile if there is one
00003A8C                          1350      
00003A8C  5207                    1351      add.b   #1,D7               Add to the column count
00003A8E  524A                    1352      add     #1,A2               Move to the next memory location
00003A90  60E0                    1353      bra     loop_columns        Loop the columns again
00003A92                          1354      
00003A92                          1355  *-------------------------------------------------------
00003A92                          1356  *----------------------Draw tile------------------------
00003A92                          1357  *-------------------------------------------------------
00003A92                          1358  *Draws the tile at the address in the address register A2
00003A92                          1359  draw_tile:
00003A92  0C12 00FF               1360      CMP.B   #255,(A2)           Check if the value is undifined
00003A96  6700 005E               1361      BEQ     draw_blocked_tile   Draw the blank tile
00003A9A                          1362      
00003A9A  0C12 0001               1363      CMP.B   #1,(A2)
00003A9E  6700 0064               1364      BEQ     draw_both_tile
00003AA2  0C12 0003               1365      CMP.B   #3,(A2)
00003AA6  6700 006A               1366      BEQ     draw_left_tile
00003AAA  0C12 0004               1367      CMP.B   #4,(A2)
00003AAE  6700 0062               1368      BEQ     draw_left_tile
00003AB2  0C12 0005               1369      CMP.B   #5,(A2)
00003AB6  6700 0068               1370      BEQ     draw_right_tile
00003ABA  0C12 0006               1371      CMP.B   #6,(A2)
00003ABE  6700 0060               1372      BEQ     draw_right_tile
00003AC2  0C12 0008               1373      CMP.B   #8,(A2)
00003AC6  6700 004A               1374      BEQ     draw_left_tile
00003ACA  0C12 000A               1375      CMP.B   #10,(A2)
00003ACE  6700 0050               1376      BEQ     draw_right_tile
00003AD2  0C12 000B               1377      CMP.B   #11,(A2)
00003AD6  6700 003A               1378      BEQ     draw_left_tile
00003ADA  0C12 000C               1379      CMP.B   #12,(A2)
00003ADE  6700 0024               1380      BEQ     draw_both_tile
00003AE2  0C12 000D               1381      CMP.B   #13,(A2)
00003AE6  6700 0038               1382      BEQ     draw_right_tile
00003AEA  0C12 000E               1383      CMP.B   #14,(A2)
00003AEE  6700 0014               1384      BEQ     draw_both_tile
00003AF2                          1385      
00003AF2  6000 003A               1386      BRA     draw_blank_tile     Draw the blank tile
00003AF6                          1387      
00003AF6                          1388  draw_blocked_tile:
00003AF6  43F9 0000461E           1389      lea     blocked_tile,A1
00003AFC  103C 000E               1390      move.b  #14,D0
00003B00  4E4F                    1391      trap    #15
00003B02  4E75                    1392      rts
00003B04                          1393      
00003B04                          1394  draw_both_tile:
00003B04  43F9 00004612           1395      lea     both_tile,A1
00003B0A  103C 000E               1396      move.b  #14,D0
00003B0E  4E4F                    1397      trap    #15
00003B10  4E75                    1398      rts
00003B12                          1399      
00003B12                          1400  draw_left_tile:
00003B12  43F9 00004616           1401      lea     left_tile,A1
00003B18  103C 000E               1402      move.b  #14,D0
00003B1C  4E4F                    1403      trap    #15
00003B1E  4E75                    1404      rts
00003B20                          1405      
00003B20                          1406  draw_right_tile:
00003B20  43F9 0000461A           1407      lea     right_tile,A1
00003B26  103C 000E               1408      move.b  #14,D0
00003B2A  4E4F                    1409      trap    #15
00003B2C  4E75                    1410      rts
00003B2E                          1411      
00003B2E                          1412  draw_blank_tile:
00003B2E  43F9 0000460E           1413      lea     blank_tile,A1
00003B34  103C 000E               1414      move.b  #14,D0
00003B38  4E4F                    1415      trap    #15
00003B3A  4E75                    1416      rts
00003B3C                          1417      
00003B3C                          1418  check_for_player:
00003B3C  B4CE                    1419      CMP.W   A6,A2
00003B3E  6700 0004               1420      BEQ     draw_player
00003B42  4E75                    1421      rts
00003B44                          1422      
00003B44                          1423  draw_player:
00003B44  323C 00FF               1424      move.w  #255,D1         Move the word #255 to D1 to set the type of trap 11
00003B48  103C 000B               1425      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
00003B4C  4E4F                    1426      trap    #15             Trap to get the cursor position in D1
00003B4E                          1427      
00003B4E  0441 0200               1428      sub.w   #512,D1         Move the cursor back by two columns
00003B52  4E4F                    1429      trap    #15             Set the cursor position with trap command 11
00003B54                          1430      
00003B54  2601                    1431      move.l  D1,D3          Move the value in D1 to D3 for storage
00003B56                          1432      
00003B56  103C 0015               1433      move.b  #21,D0          Move #21 to D0 for trap command 21
00003B5A  223C 0000FF00           1434      move.l  #GREEN,D1       Move the colour green to D1
00003B60  243C 01090000           1435      move.l  #FONT,D2        Move the font to D2
00003B66  4E4F                    1436      trap    #15             Set the colour
00003B68                          1437      
00003B68  43F9 00004622           1438      lea     player_mark,A1  load the player symbol
00003B6E  103C 000E               1439      move.b  #14,D0          Move #14 to D0 for trap command 14
00003B72  4E4F                    1440      trap    #15             Draw the player mark
00003B74                          1441      
00003B74  103C 0015               1442      move.b  #21,D0          Move #21 to D0 for trap command 21
00003B78  223C 00FFFFFF           1443      move.l  #WHITE,D1       Move the colour white to D1
00003B7E  4E4F                    1444      trap    #15             Set the colour
00003B80  4281                    1445      clr.l   D1              Clear D1 for later use
00003B82  4282                    1446      clr.l   D2              Clear D2 for later use
00003B84                          1447      
00003B84  2203                    1448      move.l  D3,D1           Move the value in D3 to D1 for previous cursor position
00003B86                          1449      
00003B86  0641 0200               1450      add.w   #512,D1         Move the cursor position two columns forward
00003B8A  103C 000B               1451      move.b  #11,D0          Move byte #11 for trap command 11 
00003B8E  4E4F                    1452      trap    #15             Set the cursor position
00003B90                          1453      
00003B90  4E75                    1454      rts
00003B92                          1455      
00003B92                          1456  check_for_enemies:
00003B92  4BF8 6000               1457      lea     FIRST_ENEMY,A5  Load the memory address of the first enemy
00003B96  1A3C 0000               1458      move.b  #0,D5           Move the starting enemy number to D5
00003B9A  6100 0004               1459      bsr     loop_enemies    Loop through all enemies
00003B9E  4E75                    1460      rts                     Return from subroutine
00003BA0                          1461      
00003BA0                          1462  loop_enemies:
00003BA0  6100 0012               1463      bsr     check_for_enemy Check for an enemy
00003BA4                          1464      
00003BA4  BA3C 0002               1465      CMP.B   #ENEMY_MAX,D5   Compare the enemy number with the maximum enemy number
00003BA8  6C00 FE6A               1466      BGE     return          Return from the loop if the current enemy number is greater than or equal to the max
00003BAC                          1467      
00003BAC  5205                    1468      add.b   #1,D5           Add to the current enemy number
00003BAE  DAFC 000C               1469      add.w   #12,A5          Add to the current enemy pointer to move to the next enemy (16 for next enemy - 4 to get back from position)
00003BB2  60EC                    1470      bra     loop_enemies    Keep looping the enemies
00003BB4                          1471      
00003BB4                          1472  check_for_enemy:
00003BB4  564D                    1473      add.w   #ALIVE,A5       Add to the enemy memory address to get the enemy's alive state
00003BB6  0C1D 0000               1474      CMP.B   #0,(A5)+        Check if the enemy is alive
00003BBA  6700 FE58               1475      BEQ     return          Return from the subroutine if not
00003BBE                          1476      
00003BBE                          1477      
00003BBE  B4D5                    1478      CMP.W   (A5),A2         Check if the enemy is in the current position
00003BC0  6700 0004               1479      BEQ     draw_enemy      Draw the enemy if it is
00003BC4  4E75                    1480      rts                     Return if the enemy is not in the current position
00003BC6                          1481      
00003BC6                          1482  draw_enemy:
00003BC6  323C 00FF               1483      move.w  #255,D1         Move the word #255 to D1 to set the type of trap 11
00003BCA  103C 000B               1484      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
00003BCE  4E4F                    1485      trap    #15             Trap to get the cursor position in D1
00003BD0                          1486      
00003BD0  0441 0200               1487      sub.w   #512,D1         Move the cursor back by two columns
00003BD4  4E4F                    1488      trap    #15             Set the cursor position with trap command 11
00003BD6                          1489      
00003BD6  2601                    1490      move.l  D1,D3          Move the value in D1 to D3 for storage
00003BD8                          1491      
00003BD8  103C 0015               1492      move.b  #21,D0          Move #21 to D0 for trap command 21
00003BDC  223C 000000FF           1493      move.l  #RED,D1         Move the colour red to D1
00003BE2  243C 01090000           1494      move.l  #FONT,D2        Move the font to D2
00003BE8  4E4F                    1495      trap    #15             Set the colour
00003BEA                          1496      
00003BEA  43F9 00004624           1497      lea     enemy_mark,A1   load the enemy symbol
00003BF0  103C 000E               1498      move.b  #14,D0          Move #14 to D0 for trap command 14
00003BF4  4E4F                    1499      trap    #15             Draw the player mark
00003BF6                          1500      
00003BF6  103C 0015               1501      move.b  #21,D0          Move #21 to D0 for trap command 21
00003BFA  223C 00FFFFFF           1502      move.l  #WHITE,D1       Move the colour white to D1
00003C00  4E4F                    1503      trap    #15             Set the colour
00003C02  4281                    1504      clr.l   D1              Clear D1 for later use
00003C04  4282                    1505      clr.l   D2              Clear D2 for later use
00003C06                          1506      
00003C06  2203                    1507      move.l  D3,D1           Move the value in D3 to D1 for previous cursor position
00003C08                          1508      
00003C08  0641 0200               1509      add.w   #512,D1         Move the cursor position two columns forward
00003C0C  103C 000B               1510      move.b  #11,D0          Move byte #11 for trap command 11 
00003C10  4E4F                    1511      trap    #15             Set the cursor position
00003C12                          1512      
00003C12  4E75                    1513      rts 
00003C14                          1514      
00003C14                          1515  check_for_shops:
00003C14  4BF8 6500               1516      lea     FIRST_SHOP,A5   Load the memory address of the first shop
00003C18  1A3C 0000               1517      move.b  #0,D5           Move the starting shop number to D5
00003C1C  6100 0004               1518      bsr     loop_shops      Loop through all shops
00003C20  4E75                    1519      rts                     Return from subroutine
00003C22                          1520      
00003C22                          1521  loop_shops:
00003C22  6100 0012               1522      bsr     check_for_shop  Check for a shop
00003C26                          1523      
00003C26  BA3C 0002               1524      CMP.B   #SHOP_MAX,D5    Compare the shop number with the maximum shop number
00003C2A  6C00 FDE8               1525      BGE     return          Return from the loop if the current shop number is greater than or equal to the max
00003C2E                          1526      
00003C2E  5205                    1527      add.b   #1,D5           Add to the current shop number
00003C30  DAFC 0010               1528      add.w   #16,A5          Add to the current shop pointer to move to the next shop
00003C34  60EC                    1529      bra     loop_shops      Keep looping the shops
00003C36                          1530      
00003C36                          1531  check_for_shop:
00003C36  B4D5                    1532      CMP.W   (A5),A2         Check if the shop is in the current position
00003C38  6700 0004               1533      BEQ     draw_shop       Draw the shop if it is
00003C3C  4E75                    1534      rts                     Return if the shop is not in the current position
00003C3E                          1535      
00003C3E                          1536  draw_shop:
00003C3E  323C 00FF               1537      move.w  #255,D1         Move the word #255 to D1 to set the type of trap 11
00003C42  103C 000B               1538      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
00003C46  4E4F                    1539      trap    #15             Trap to get the cursor position in D1
00003C48                          1540      
00003C48  0441 0200               1541      sub.w   #512,D1         Move the cursor back by two columns
00003C4C  4E4F                    1542      trap    #15             Set the cursor position with trap command 11
00003C4E                          1543      
00003C4E  2601                    1544      move.l  D1,D3           Move the value in D1 to D3 for storage
00003C50                          1545      
00003C50  103C 0015               1546      move.b  #21,D0          Move #21 to D0 for trap command 21
00003C54  223C 00F000F0           1547      move.l  #PURPLE,D1      Move the colour red to D1
00003C5A  243C 01090000           1548      move.l  #FONT,D2        Move the font to D2
00003C60  4E4F                    1549      trap    #15             Set the colour
00003C62                          1550      
00003C62  43F9 00004628           1551      lea     shop_mark,A1    load the enemy symbol
00003C68  103C 000E               1552      move.b  #14,D0          Move #14 to D0 for trap command 14
00003C6C  4E4F                    1553      trap    #15             Draw the player mark
00003C6E                          1554      
00003C6E  103C 0015               1555      move.b  #21,D0          Move #21 to D0 for trap command 21
00003C72  223C 00FFFFFF           1556      move.l  #WHITE,D1       Move the colour white to D1
00003C78  4E4F                    1557      trap    #15             Set the colour
00003C7A                          1558      
00003C7A  4281                    1559      clr.l   D1              Clear D1 for later use
00003C7C  4282                    1560      clr.l   D2              Clear D2 for later use
00003C7E                          1561      
00003C7E  2203                    1562      move.l  D3,D1           Move the value in D3 to D1 for previous cursor position
00003C80                          1563      
00003C80  0641 0200               1564      add.w   #512,D1         Move the cursor position two columns forward
00003C84  103C 000B               1565      move.b  #11,D0          Move byte #11 for trap command 11 
00003C88  4E4F                    1566      trap    #15             Set the cursor position
00003C8A                          1567      
00003C8A  4E75                    1568      rts
00003C8C                          1569  
00003C8C                          1570  check_for_win_point:
00003C8C  B4FC 5156               1571      CMP.W   #WIN_POINT,A2   Check if the win point is in the current tile
00003C90  6700 0004               1572      BEQ     draw_win_point  Branch to draw the win point if so
00003C94  4E75                    1573      rts                     Return from subroutine if not
00003C96                          1574      
00003C96                          1575  draw_win_point:
00003C96  323C 00FF               1576      move.w  #255,D1         Move the word #255 to D1 to set the type of trap 11
00003C9A  103C 000B               1577      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
00003C9E  4E4F                    1578      trap    #15             Trap to get the cursor position in D1
00003CA0                          1579      
00003CA0  0441 0200               1580      sub.w   #512,D1         Move the cursor back by two columns
00003CA4  4E4F                    1581      trap    #15             Set the cursor position with trap command 11
00003CA6                          1582      
00003CA6  2601                    1583      move.l  D1,D3           Move the value in D1 to D3 for storage
00003CA8                          1584      
00003CA8  103C 0015               1585      move.b  #21,D0          Move #21 to D0 for trap command 21
00003CAC  223C 00FF0000           1586      move.l  #BLUE,D1        Move the colour blue to D1
00003CB2  243C 01090000           1587      move.l  #FONT,D2        Move the font to D2
00003CB8  4E4F                    1588      trap    #15             Set the colour
00003CBA                          1589      
00003CBA  43F9 00004626           1590      lea     win_point_mark,A1   load the win point symbol
00003CC0  103C 000E               1591      move.b  #14,D0              Move #14 to D0 for trap command 14
00003CC4  4E4F                    1592      trap    #15                 Draw the win point mark
00003CC6                          1593      
00003CC6  103C 0015               1594      move.b  #21,D0          Move #21 to D0 for trap command 21
00003CCA  223C 00FFFFFF           1595      move.l  #WHITE,D1       Move the colour white to D1
00003CD0  4E4F                    1596      trap    #15             Set the colour
00003CD2  4281                    1597      clr.l   D1              Clear D1 for later use
00003CD4  4282                    1598      clr.l   D2              Clear D2 for later use
00003CD6                          1599      
00003CD6  2203                    1600      move.l  D3,D1           Move the value in D3 to D1 for previous cursor position
00003CD8                          1601      
00003CD8  0641 0200               1602      add.w   #512,D1         Move the cursor position two columns forward
00003CDC  103C 000B               1603      move.b  #11,D0          Move byte #11 for trap command 11 
00003CE0  4E4F                    1604      trap    #15             Set the cursor position
00003CE2                          1605      
00003CE2  4E75                    1606      rts
00003CE4                          1607      
00003CE4                          1608  *-------------------------------------------------------
00003CE4                          1609  *-------------------Setup the world---------------------
00003CE4                          1610  *-------------------------------------------------------
00003CE4                          1611  setup_world:
00003CE4  11FC 000E 514A          1612      move.b  #14,$514A   Setup the starting corridor
00003CEA  11FC 0007 513A          1613      move.b  #7,$513A    T junction upwards from starting corridor
00003CF0  11FC 0004 5139          1614      move.b  #4,$5139    Left corridor
00003CF6  11FC 0001 5129          1615      move.b  #1,$5129
00003CFC  11FC 0001 5119          1616      move.b  #1,$5119
00003D02                          1617      
00003D02  11FC 0004 5108          1618      move.b  #4,$5108    First shop
00003D08  11FC 0000 5109          1619      move.b  #0,$5109    Entrance
00003D0E  11FC 0005 510A          1620      move.b  #5,$510A
00003D14  11FC 0008 50F8          1621      move.b  #8,$50F8
00003D1A  11FC 0000 50F9          1622      move.b  #0,$50F9
00003D20  11FC 000A 50FA          1623      move.b  #10,$50FA
00003D26  11FC 0003 50E8          1624      move.b  #3,$50E8
00003D2C  11FC 0007 50E9          1625      move.b  #7,$50E9
00003D32  11FC 0006 50EA          1626      move.b  #6,$50EA
00003D38                          1627      
00003D38  11FC 0005 513B          1628      move.b  #5,$513B    Right corridor
00003D3E  11FC 0001 512B          1629      move.b  #1,$512B
00003D44  11FC 0001 511B          1630      move.b  #1,$511B
00003D4A  11FC 0008 510B          1631      move.b  #8,$510B    Path continues up with a turn off to the right
00003D50                          1632      
00003D50  11FC 0002 510C          1633      move.b  #2,$510C    Right path
00003D56  11FC 0002 510D          1634      move.b  #2,$510D    Continue right
00003D5C  11FC 0005 510E          1635      move.b  #5,$510E    Path upwards and to the left
00003D62  11FC 0001 50FE          1636      move.b  #1,$50FE    Leads upwards into a room
00003D68                          1637      
00003D68  11FC 0004 50ED          1638      move.b  #4,$50ED    First monster room
00003D6E  11FC 0000 50EE          1639      move.b  #0,$50EE    Entrance
00003D74  11FC 0005 50EF          1640      move.b  #5,$50EF
00003D7A  11FC 0008 50DD          1641      move.b  #8,$50DD
00003D80  11FC 0000 50DE          1642      move.b  #0,$50DE
00003D86  11FC 000A 50DF          1643      move.b  #10,$50DF
00003D8C  11FC 0003 50CD          1644      move.b  #3,$50CD
00003D92  11FC 0007 50CE          1645      move.b  #7,$50CE
00003D98  11FC 0006 50CF          1646      move.b  #6,$50CF
00003D9E                          1647      
00003D9E  11FC 0001 50FB          1648      move.b  #1,$50FB    Path that continues up
00003DA4  11FC 0001 50EB          1649      move.b  #1,$50EB    Path continues upwards
00003DAA  11FC 0001 50DB          1650      move.b  #1,$50DB
00003DB0                          1651      
00003DB0                          1652      *Bottom row of room
00003DB0  11FC 0004 50C8          1653      move.b  #4,$50C8    Large monster room with locked door
00003DB6  11FC 0009 50C9          1654      move.b  #9,$50C9
00003DBC  11FC 0009 50CA          1655      move.b  #9,$50CA
00003DC2  11FC 0000 50CB          1656      move.b  #0,$50CB    Entrance
00003DC8  11FC 0005 50CC          1657      move.b  #5,$50CC
00003DCE                          1658      *Middle row of room
00003DCE  11FC 0000 50B8          1659      move.b  #0,$50B8    Exit to the left
00003DD4  11FC 0000 50B9          1660      move.b  #0,$50B9
00003DDA  11FC 0000 50BA          1661      move.b  #0,$50BA
00003DE0  11FC 0000 50BB          1662      move.b  #0,$50BB
00003DE6  11FC 000A 50BC          1663      move.b  #10,$50BC
00003DEC                          1664      *Top row of room
00003DEC  11FC 0003 50A8          1665      move.b  #3,$50A8
00003DF2  11FC 0007 50A9          1666      move.b  #7,$50A9
00003DF8  11FC 0007 50AA          1667      move.b  #7,$50AA
00003DFE  11FC 0007 50AB          1668      move.b  #7,$50AB    Locked door
00003E04  11FC 0006 50AC          1669      move.b  #6,$50AC
00003E0A                          1670      
00003E0A  11FC 0002 50B7          1671      move.b  #2,$50B7    Exit large room leftwards
00003E10  11FC 0002 50B6          1672      move.b  #2,$50B6    Continue to the left
00003E16  11FC 0007 50B5          1673      move.b  #7,$50B5    Continue to the left and a path downwards
00003E1C  11FC 0002 50B4          1674      move.b  #2,$50B4    Continue to the left
00003E22                          1675      
00003E22  11FC 0003 50A1          1676      move.b  #3,$50A1    Room to the left
00003E28  11FC 0007 50A2          1677      move.b  #7,$50A2
00003E2E  11FC 0006 50A3          1678      move.b  #6,$50A3
00003E34  11FC 0008 50B1          1679      move.b  #8,$50B1
00003E3A  11FC 0000 50B2          1680      move.b  #0,$50B2
00003E40  11FC 0000 50B3          1681      move.b  #0,$50B3    Entrance to the right
00003E46  11FC 0004 50C1          1682      move.b  #4,$50C1
00003E4C  11FC 0009 50C2          1683      move.b  #9,$50C2
00003E52  11FC 0005 50C3          1684      move.b  #5,$50C3
00003E58                          1685      
00003E58  11FC 0001 50C5          1686      move.b  #1,$50C5    Path leading downwards
00003E5E  11FC 0001 50D5          1687      move.b  #1,$50D5
00003E64  11FC 000A 50E5          1688      move.b  #10,$50E5   Path leading downward and to the left
00003E6A  11FC 0002 50E4          1689      move.b  #2,$50E4    Path on the left
00003E70  11FC 0002 50E3          1690      move.b  #2,$50E3
00003E76  11FC 0003 50E2          1691      move.b  #3,$50E2    Path takes a turn downwards
00003E7C  11FC 0001 50F2          1692      move.b  #1,$50F2    Path continues downwards
00003E82                          1693      
00003E82  11FC 0003 5101          1694      move.b  #3,$5101    Regular enemy room
00003E88  11FC 0000 5102          1695      move.b  #0,$5102    Entrance
00003E8E  11FC 0006 5103          1696      move.b  #6,$5103
00003E94  11FC 0008 5111          1697      move.b  #8,$5111
00003E9A  11FC 0000 5112          1698      move.b  #0,$5112
00003EA0  11FC 000A 5113          1699      move.b  #10,$5113
00003EA6  11FC 0004 5121          1700      move.b  #4,$5121
00003EAC  11FC 0009 5122          1701      move.b  #9,$5122
00003EB2  11FC 000A 5123          1702      move.b  #10,$5123   Exit at the bottom
00003EB8                          1703      
00003EB8  11FC 0001 50F5          1704      move.b  #1,$50F5    Path leading downward
00003EBE  11FC 0001 5105          1705      move.b  #1,$5105
00003EC4  11FC 0001 5115          1706      move.b  #1,$5115
00003ECA  11FC 0001 5125          1707      move.b  #1,$5125
00003ED0                          1708      
00003ED0                          1709      *Top row of room
00003ED0  11FC 0008 5133          1710      move.b  #8,$5133    Large enemy room - Exit at top
00003ED6  11FC 0007 5134          1711      move.b  #7,$5134
00003EDC  11FC 0000 5135          1712      move.b  #0,$5135    Entrance
00003EE2  11FC 0006 5136          1713      move.b  #6,$5136
00003EE8                          1714      
00003EE8                          1715      *Middle row of room
00003EE8  11FC 0008 5143          1716      move.b  #8,$5143
00003EEE  11FC 0000 5144          1717      move.b  #0,$5144
00003EF4  11FC 0000 5145          1718      move.b  #0,$5145
00003EFA  11FC 000A 5146          1719      move.b  #10,$5146
00003F00                          1720      
00003F00                          1721      *Bottom row of room
00003F00  11FC 0004 5153          1722      move.b  #4,$5153
00003F06  11FC 0009 5154          1723      move.b  #9,$5154
00003F0C  11FC 0009 5155          1724      move.b  #9,$5155
00003F12  11FC 0005 5156          1725      move.b  #5,$5156
00003F18                          1726      
00003F18  4E75                    1727      rts
00003F1A                          1728  
00003F1A                          1729  setup_enemies:
00003F1A                          1730      * Setup first enemy
00003F1A  11FC 0003 6000          1731      move.b  #3,$6000    Health - Setup the first enemy
00003F20  11FC 0001 6001          1732      move.b  #1,$6001    Damage/level
00003F26  11FC 0001 6002          1733      move.b  #1,$6002    Class type (Knight)
00003F2C  11FC 0001 6003          1734      move.b  #1,$6003    Alive state (Alive)
00003F32  31FC 511B 6004          1735      move.w  #$511B,$6004  Move enemy coordinates
00003F38                          1736      
00003F38                          1737      * Setup second enemy
00003F38  11FC 0003 6010          1738      move.b  #3,$6010    Health - Setup the first enemy
00003F3E  11FC 0002 6011          1739      move.b  #2,$6011    Damage/level
00003F44  11FC 0001 6012          1740      move.b  #1,$6012    Class type (Knight)
00003F4A  11FC 0001 6013          1741      move.b  #1,$6013    Alive state (Alive)
00003F50  31FC 5155 6014          1742      move.w  #$5155,$6014  Move enemy coordinates
00003F56                          1743      
00003F56  4E75                    1744      rts
00003F58                          1745      
00003F58                          1746  setup_player:
00003F58  11FC 000A 5FF0          1747      move.b  #10,PLAYER      put score/health in memory location $5FF0
00003F5E  11FC 0001 5FF1          1748      move.b  #1,PLA_DAMAGE   Assign the default damage for the player
00003F64  11FC 0000 5FF3          1749      move.b  #0,GAME_STATE   Put game state number in memory location $5FF3
00003F6A                          1750      *0 = Pick role/intro | 5 = Move around | 6 = Combat | 7 = Shop | 64 = End game
00003F6A                          1751  
00003F6A  11FC 0000 5FF2          1752      move.b  #0,PLA_CLASS    put class number in memory location $5FF2
00003F70                          1753      * 1 corresponds to knight - 2 corresponds to mage - 3 corresponds to rogue
00003F70                          1754      
00003F70  11FC 000F 5FF8          1755      move.b  #15,PLA_GOLD    Assign the player's base gold value
00003F76  11FC 0001 5FF9          1756      move.b  #1,PLA_POTIONS  Assign the player's base potions value
00003F7C  11FC 0000 5FFA          1757      move.b  #0,PLA_KEYS     Assign the player's base keys value
00003F82  11FC 000F 5FFB          1758      move.b  #15,PLA_TORCH   Assign the player's base torch value
00003F88                          1759      
00003F88  4DF8 514A               1760      lea     $514A,A6        Set the player coordinate to the first corridor
00003F8C  31CE 5FF6               1761      move.w  A6,PLA_P_POS    Set the player's previous position to their current
00003F90                          1762      
00003F90  4E75                    1763      rts
00003F92                          1764      
00003F92                          1765  setup_shops:
00003F92                          1766      * Setup the first shop
00003F92  31FC 50F9 6500          1767      move.w  #$50F9,$6500    Set the position
00003F98  11FC 0002 6502          1768      move.b  #2,$6502        Set the potions
00003F9E  11FC 0003 6503          1769      move.b  #3,$6503        Set the keys
00003FA4  11FC 0004 6504          1770      move.b  #4,$6504        Set the torches
00003FAA  11FC 0005 6505          1771      move.b  #5,$6505        Set the damage
00003FB0                          1772      
00003FB0                          1773      * Setup the second shop
00003FB0  31FC 50B2 6510          1774      move.w  #$50B2,$6510    Set the position
00003FB6  11FC 0004 6512          1775      move.b  #4,$6512        Set the potions
00003FBC  11FC 0003 6513          1776      move.b  #3,$6513        Set the keys
00003FC2  11FC 0002 6514          1777      move.b  #2,$6514        Set the torches
00003FC8  11FC 0001 6515          1778      move.b  #1,$6515        Set the damage
00003FCE                          1779  
00003FCE  4E75                    1780      rts
00003FD0                          1781      
00003FD0                          1782  *-------------------------------------------------------
00003FD0                          1783  *-------------------Data Delarations--------------------
00003FD0                          1784  *-------------------------------------------------------
00003FD0                          1785  
00003FD0= 0D 0A 00                1786  crlf:           dc.b    $0D,$0A,0
00003FD3= 2A 2A 2A 2A 2A 2A ...   1787  welcome_msg:    dc.b    '************************************************************'
0000400F= 0D 0A                   1788                  dc.b    $0D,$0A
00004011= 41 76 61 6C 6F 6E ...   1789                  dc.b    'Avalon: The Legend Lives'
00004029= 0D 0A                   1790                  dc.b    $0D,$0A
0000402B= 2A 2A 2A 2A 2A 2A ...   1791                  dc.b    '************************************************************'
00004067= 0D 0A 00                1792                  dc.b    $0D,$0A,0
0000406A= 2E 00                   1793  loop_msg:       dc.b    '.',0
0000406C= 31 3E 20 52 65 73 ...   1794  replay_msg:     dc.b    '1> Restart the game.',$0D,$0A
00004082= 32 3E 20 51 75 69 ...   1795                  dc.b    '2> Quit the game.',$0D,$0A,0
00004096= 59 6F 75 20 61 77 ...   1796  wake_up_msg:    dc.b    'You awake in a room, on a bed of red velvet, with no memory',$0D,$0A
000040D3= 6F 66 20 68 6F 77 ...   1797                  dc.b    'of how you got here. Stones crumble from the ceiling, the place looks like an',$0D,$0A
00004122= 6F 6C 64 20 63 61 ...   1798                  dc.b    'old castle. You get a dark feeling from this place, and you know you must',$0D,$0A
0000416D= 65 73 63 61 70 65 ...   1799                  dc.b    'escape...',$0D,$0A
00004178= 59 6F 75 20 63 6C ...   1800                  dc.b    'You climb from the bed and look in a nearby mirror:',$0D,$0A,0
000041AE= 31 3E 20 59 6F 75 ...   1801  pick_role_msg:  dc.b    '1> You wear armour of polished iron, a short sword and heavy shield laying',$0D,$0A
000041FA= 63 6C 6F 73 65 20 ...   1802                  dc.b    'close by. (Knight class)',$0D,$0A,$0D,$0A
00004216= 32 3E 20 59 6F 75 ...   1803                  dc.b    '2> You wear a cloak with mystic symbols sewn into the fabrics, an ancient',$0D,$0A
00004261= 6C 6F 6F 6B 69 6E ...   1804                  dc.b    'looking staff lays near. (Mage class)',$0D,$0A,$0D,$0A
0000428A= 33 3E 20 59 6F 75 ...   1805                  dc.b    '3> You wear tight, well-fitting leather armour with reminents of black dye',$0D,$0A
000042D6= 73 74 61 69 6E 65 ...   1806                  dc.b    'stained to the material. Two knives are fastened to your belt. (Rogue class)',$0D,$0A,0
00004325= 45 6E 74 65 72 20 ...   1807  input_nums_msg: dc.b    'Enter num between 1 and ',0
0000433E= 3A 20 00                1808  colon_msg:      dc.b    ': ',0
00004341                          1809  
00004341= 49 6E 70 75 74 74 ...   1810  input_error_msg:    dc.b    'Inputted number is outside of range.',$0D,$0A,0
00004368= 47 61 6D 65 73 74 ...   1811  fake_gamestate_msg: dc.b    'Gamestate doesnt exist',$0D,$0A,0
00004381= 59 6F 75 20 67 72 ...   1812  knight_role_msg:    dc.b    'You grab your sword and shield, pull a torch from the wall, and leave the room.',$0D,$0A
000043D2= 2D 20 59 6F 75 20 ...   1813                      dc.b    '- You have chosen the KNIGHT class. You specialise in blocking and countering',$0D,$0A,0
00004422= 59 6F 75 20 70 69 ...   1814  mage_role_msg:  dc.b    'You pick up your staff, grab a torch from the wall, and leave the room.',$0D,$0A
0000446B= 2D 20 59 6F 75 20 ...   1815                  dc.b    '- You have chosen the MAGE class. You specialise in magic attacks.',$0D,$0A,0
000044B0= 59 6F 75 20 66 61 ...   1816  rogue_role_msg: dc.b    'You fasten your belt, grab a torch from the wall, and leave the room.',$0D,$0A
000044F7= 2D 20 59 6F 75 20 ...   1817                  dc.b    '- You have chosen the ROGUE class. You specialise in quick melee attacks.',$0D,$0A,0
00004543= 31 3E 20 4D 6F 76 ...   1818  movement_msg:   dc.b    '1> Move north.',$0D,$0A
00004553= 32 3E 20 4D 6F 76 ...   1819                  dc.b    '2> Move south.',$0D,$0A
00004563= 33 3E 20 4D 6F 76 ...   1820                  dc.b    '3> Move west.',$0D,$0A
00004572= 34 3E 20 4D 6F 76 ...   1821                  dc.b    '4> Move east.',$0D,$0A
00004581= 35 3E 20 44 72 69 ...   1822                  dc.b    '5> Drink health potion.',$0D,$0A,0
0000459B= 4D 6F 76 65 64 20 ...   1823  move_north_msg: dc.b    'Moved north.',$0D,$0A,0
000045AA= 4D 6F 76 65 64 20 ...   1824  move_east_msg:  dc.b    'Moved east.',$0D,$0A,0
000045B8= 4D 6F 76 65 64 20 ...   1825  move_south_msg: dc.b    'Moved south.',$0D,$0A,0
000045C7= 4D 6F 76 65 64 20 ...   1826  move_west_msg:  dc.b    'Moved west.',$0D,$0A,0
000045D5= 41 20 77 61 6C 6C ...   1827  movement_blocked_msg:  dc.b    'A wall blocks your path.',$0D,$0A,0
000045F0= 45 6E 74 65 72 20 ...   1828  continue_msg:   dc.b    'Enter any key to continue... ',0
0000460E                          1829  
0000460E= 20 20 20 00             1830  blank_tile      dc.b    '   ',0
00004612= 7C 20 7C 00             1831  both_tile       dc.b    '| |',0
00004616= 7C 20 20 00             1832  left_tile       dc.b    '|  ',0
0000461A= 20 20 7C 00             1833  right_tile      dc.b    '  |',0
0000461E= 5C 2F 5C 00             1834  blocked_tile:   dc.b    '\/\',0
00004622= 2A 00                   1835  player_mark:    dc.b    '*',0
00004624= 58 00                   1836  enemy_mark:     dc.b    'X',0
00004626= 40 00                   1837  win_point_mark: dc.b    '@',0
00004628= 24 00                   1838  shop_mark:      dc.b    '$',0
0000462A= 41 20 6D 6F 6E 73 ...   1839  encounter_msg:  dc.b    'A monster blocks your path, it looks ready to attack!',$0D,$0A,0
00004662= 31 3E 20 42 6C 6F ...   1840  combat_msg:     dc.b    '1> Block and Counter.',$0D,$0A
00004679= 32 3E 20 43 61 73 ...   1841                  dc.b    '2> Cast Magic.',$0D,$0A
00004689= 33 3E 20 41 74 74 ...   1842                  dc.b    '3> Attack Swiftly.',$0D,$0A
0000469D= 34 3E 20 54 72 79 ...   1843                  dc.b    '4> Try Run.',$0D,$0A
000046AA= 35 3E 20 44 72 69 ...   1844                  dc.b    '5> Drink Health Potion.',$0D,$0A,0
000046C4= 59 6F 75 20 65 73 ...   1845  escape_msg:             dc.b    'You escaped the monster!',$0D,$0A,0
000046DF= 59 6F 75 20 74 72 ...   1846  fail_escape_msg:        dc.b    'You try to run, but the monster catches and damages you!',$0D,$0A,0
0000471A= 59 6F 75 20 62 6F ...   1847  both_block_msg:         dc.b    'You both block, No damage is done!',$0D,$0A,0
0000473F= 59 6F 75 20 62 6F ...   1848  both_cast_magic_msg:    dc.b    'You both cast magic at eachother, the spells clash in mid air! No damage',$0D,$0A
00004789= 69 73 20 64 6F 6E ...   1849                          dc.b    'is done!',$0D,$0A,0
00004794= 59 6F 75 20 62 6F ...   1850  both_melee_msg:         dc.b    'You both lunge forward, metal clashes together, but no damage is done!',$0D,$0A,0
000047DD= 54 68 65 20 65 6E ...   1851  hit_against_block_msg:  dc.b    'The enemy blocks, you cast a cast a spell and it damages the monster!',$0D,$0A,0
00004825= 54 68 65 20 65 6E ...   1852  hit_against_magic_msg:  dc.b    'The enemy begins to charge a spell but you lunge forward and hit it first,',$0D,$0A
00004871= 64 61 6D 61 67 69 ...   1853                          dc.b    'damaging the monster!',$0D,$0A,0
00004889= 54 68 65 20 65 6E ...   1854  hit_against_melee_msg:  dc.b    'The enemy lunges forward but you block quicky, then counter, damaging the',$0D,$0A
000048D4= 6D 6F 6E 73 74 65 ...   1855                          dc.b    'monster!',$0D,$0A,0
000048DF= 59 6F 75 20 6C 75 ...   1856  hit_by_counter_msg:     dc.b    'You lunge at the enemy but they block before you hit, they swing around quickly',$0D,$0A
00004930= 61 6E 64 20 64 61 ...   1857                          dc.b    'and damage you!',$0D,$0A,0
00004942= 59 6F 75 20 74 72 ...   1858  hit_by_magic_msg:       dc.b    'You try to block the enemies attack, but they cast a spell that breaks through',$0D,$0A
00004992= 79 6F 75 72 20 64 ...   1859                          dc.b    'your defense and damages you!',$0D,$0A,0
000049B2= 59 6F 75 20 74 72 ...   1860  hit_by_melee_msg:       dc.b    'You try to charge up a spell, but the enemy lunges forward and damages you!',$0D,$0A,0
00004A00= 48 65 61 6C 74 68 ...   1861  health_msg:             dc.b    'Health: ',0
00004A09= 45 6E 65 6D 79 20 ...   1862  enemy_health_msg:       dc.b    'Enemy Health: ',0
00004A18= 54 6F 72 63 68 20 ...   1863  torch_msg:              dc.b    'Torch Life: ',0
00004A25= 49 6E 76 65 6E 74 ...   1864  inventory_msg:          dc.b    'Inventory:',0
00004A30= 2D 20 47 6F 6C 64 ...   1865  gold_msg:               dc.b    '- Gold ',0
00004A38= 2D 20 4B 65 79 20 00    1866  key_msg:                dc.b    '- Key ',0
00004A3F= 2D 20 50 6F 74 69 ...   1867  potions_msg:            dc.b    '- Potion ',0
00004A49= 2D 20 54 6F 72 63 ...   1868  torches_msg:            dc.b    '- Torch ',0
00004A52= 2D 20 44 61 6D 61 ...   1869  damage_up_msg:          dc.b    '- Damage Upgrades ',0
00004A65= 54 68 65 20 6D 6F ...   1870  battle_won_msg:         dc.b    'The monster collapses at your feet. It is dead!',$0D,$0A,0
00004A97= 28 00                   1871  bracket_open_msg:       dc.b    '(',0
00004A99= 29 00                   1872  bracket_close_msg:      dc.b    ')',0
00004A9B= 59 6F 75 20 66 65 ...   1873  death_msg:          dc.b    'You feel your last breath of air leave your lungs...',$0D,$0A
00004AD1= 59 6F 75 72 20 6B ...   1874                      dc.b    'Your knees hit the ground...',$0D,$0A
00004AEF= 59 6F 75 20 68 61 ...   1875                      dc.b    'You have died.',$0D,$0A,0
00004B00= 59 6F 75 20 66 65 ...   1876  win_msg:            dc.b    'You feel the outside breeze hit your face...',$0D,$0A
00004B2E= 59 6F 75 20 68 61 ...   1877                      dc.b    'You have escaped the castle!',$0D,$0A,0
00004B4D= 59 6F 75 20 64 72 ...   1878  take_potion_msg:    dc.b    'You drink a health potion...',$0D,$0A
00004B6B= 33 20 68 65 61 6C ...   1879                      dc.b    '3 health points restored!',$0D,$0A,0
00004B87= 59 6F 75 20 61 72 ...   1880  no_potions_msg:     dc.b    'You are out of potions.',$0D,$0A,0
00004BA1= 22 4C 6F 6F 6B 69 ...   1881  shop_enter_msg:     dc.b    '"Looking to lighten that coin pouch of yours?!"',$0D,$0A,0
00004BD3= 31 3E 20 42 75 79 ...   1882  shop_msg:       dc.b    '1> Buy Potion.',$0D,$0A
00004BE3= 32 3E 20 42 75 79 ...   1883                  dc.b    '2> Buy Key.',$0D,$0A
00004BF0= 33 3E 20 42 75 79 ...   1884                  dc.b    '3> Buy Torch.',$0D,$0A
00004BFF= 34 3E 20 42 75 79 ...   1885                  dc.b    '4> Buy Damage Upgrade.',$0D,$0A
00004C17= 35 3E 20 4C 65 61 ...   1886                  dc.b    '5> Leave Shop.',$0D,$0A,0
00004C28= 53 68 6F 70 20 53 ...   1887  shop_stock_msg: dc.b    'Shop Stock:',0
00004C34= 59 6F 75 72 20 49 ...   1888  player_msg:     dc.b    'Your Items:',0
00004C40= 20 20 20 20 20 20 ...   1889  graveyard_msg   dc.b    '      ,-=-.       ______     _',$0D,$0A
00004C60= 20 20 20 20 20 2F ...   1890                  dc.b    '     /  +  \     />----->  _|1|_',$0D,$0A
00004C82= 20 20 20 20 20 7C ...   1891                  dc.b    '     | ~~~ |    // -/- /  |_ H _|',$0D,$0A
00004CA5= 20 20 20 20 20 7C ...   1892                  dc.b    '     |R.I.P|   //  /  /     |S|',$0D,$0A
00004CC6= 5C 76 56 2C 2C 7C ...   1893                  dc.b    '\vV,,|_____|V,//_____/VvV,v,|_|/,,vhjwv/,',$0D,$0A,0
00004CF2= 20 20 20 20 20 20 ...   1894  skeleton_msg:   dc.b    '           .-.',$0D,$0A
00004D02= 20 2F 5C 5F 5F 5F ...   1895                  dc.b    ' /\____/\ (o.o)',$0D,$0A
00004D13= 7C 20 20 5F 7C 7C ...   1896                  dc.b    '|  _||_  | |=|',$0D,$0A
00004D23= 20 5C 2F 20 7C 7C ...   1897                  dc.b    ' \/ || \/ __|__',$0D,$0A
00004D34= 20 20 20 20 7C 7C ...   1898                  dc.b    '    ||\_//.=|=.\\',$0D,$0A
00004D47= 20 20 20 20 7C 7C ...   1899                  dc.b    '    ||\_/ .=|=. \\',$0D,$0A
00004D5B= 20 20 20 20 7C 7C ...   1900                  dc.b    '    ||    .=|=. //',$0D,$0A
00004D6F= 20 20 20 20 7C 7C ...   1901                  dc.b    '    ||    (_=_)//',$0D,$0A
00004D82= 20 20 20 20 7C 7C ...   1902                  dc.b    '    ||   (:| |:)',$0D,$0A
00004D94= 20 20 20 20 7C 7C ...   1903                  dc.b    '    ||    || ||',$0D,$0A
00004DA5= 20 20 20 20 7C 7C ...   1904                  dc.b    '    ||    () ()',$0D,$0A
00004DB6= 20 20 20 20 2F 5C ...   1905                  dc.b    '    /\    || ||',$0D,$0A
00004DC7= 20 20 20 20 7C 7C ...   1906                  dc.b    '    ||    || ||',$0D,$0A
00004DD8= 20 20 20 20 5C 2F ...   1907                  dc.b    '    \/  ==   ==',$0D,$0A,0
00004DEA= 20 20 20 20 20 20 ...   1908  merchant_msg:   dc.b    '         ____',$0D,$0A
00004DF9= 20 20 20 20 20 20 ...   1909                  dc.b    '        |    |',$0D,$0A
00004E09= 20 20 20 20 20 20 ...   1910                  dc.b    '      --:<<>>:--',$0D,$0A
00004E1B= 20 20 20 20 20 20 ...   1911                  dc.b    '        :~_~ :',$0D,$0A
00004E2B= 20 20 20 20 20 20 ...   1912                  dc.b    '        _:"":\___',$0D,$0A
00004E3E= 20 20 5F 5F 5F 5F ...   1913                  dc.b    '  ____./ :::     \._',$0D,$0A
00004E54= 3C 3C 3D 29 20 20 ...   1914                  dc.b    '<<=)           \    :',$0D,$0A
00004E6B= 20 5C 2F 2D 2D 2D ...   1915                  dc.b    ' \/---/\_      /\._. ',$0D,$0A
00004E82= 20 7C 7C 20 20 20 ...   1916                  dc.b    ' ||       \====:_ ""',$0D,$0A
00004E98= 20 7C 7C 20 20 20 ...   1917                  dc.b    ' ||      ./     \\',$0D,$0A
00004EAC= 20 7C 7C 20 20 20 ...   1918                  dc.b    ' ||     :       :',$0D,$0A
00004EBF= 20 7C 7C 20 20 20 ...   1919                  dc.b    ' ||    /   :    \',$0D,$0A
00004ED2= 20 7C 7C 20 20 20 ...   1920                  dc.b    ' ||   :   .      \.',$0D,$0A
00004EE7= 20 7C 7C 20 20 20 ...   1921                  dc.b    ' ||   :  : :      :',$0D,$0A
00004EFC= 20 7C 7C 20 20 20 ...   1922                  dc.b    ' ||   :__:-:__.;--',$0D,$0A,0
00004F11                          1923  
00004F11                          1924      end start

No errors detected
No warnings generated


SYMBOL TABLE INFORMATION
Symbol-name         Value
-------------------------
ALIVE               3
BATTLE_WON_MSG      4A65
BLANK_TILE          460E
BLOCKED_TILE        461E
BLOCK_COUNTER       3834
BLUE                FF0000
BOTH_BLOCK          38CA
BOTH_BLOCK_MSG      471A
BOTH_CAST_MAGIC     38DC
BOTH_CAST_MAGIC_MSG  473F
BOTH_MELEE          38EE
BOTH_MELEE_MSG      4794
BOTH_TILE           4612
BRACKET_CLOSE_MSG   4A99
BRACKET_OPEN_MSG    4A97
BUY_KEY             39DA
BUY_POTION          39D8
BUY_TORCH           39DC
CAST_MAGIC          384E
CHECK_FOR_ENEMIES   3B92
CHECK_FOR_ENEMY     3BB4
CHECK_FOR_PLAYER    3B3C
CHECK_FOR_SHOP      3C36
CHECK_FOR_SHOPS     3C14
CHECK_FOR_WIN_POINT  3C8C
CLASS               2
CLEAR_SCREEN        3646
COLON_MSG           433E
COMBAT              37F4
COMBAT_MSG          4662
CONTINUE_MSG        45F0
CRLF                3FD0
CSR_POS_BATTLE      2001
CSR_POS_MOVE        3201
CSR_POS_SHOP_P      3401
CSR_POS_SHOP_S      1801
DAMAGE              1
DAMAGE_UP_MSG       4A52
DEATH_MSG           4A9B
DECORATE            3628
DRAW                32C4
DRAW_BATTLE_INFO    342A
DRAW_BLANK_TILE     3B2E
DRAW_BLOCKED_TILE   3AF6
DRAW_BOTH_TILE      3B04
DRAW_ENEMY          3BC6
DRAW_GRAVEYARD      32F2
DRAW_HUD            330E
DRAW_ITEM_NUMBER    3408
DRAW_LEFT_TILE      3B12
DRAW_LOOP           3A48
DRAW_MERCHANT       3300
DRAW_PLAYER         3B44
DRAW_PLAYER_INFO    332E
DRAW_RIGHT_TILE     3B20
DRAW_SHOP           3C3E
DRAW_SHOP_INFO      34A4
DRAW_SKELETON       32E4
DRAW_TILE           3A92
DRAW_WIN_POINT      3C96
ENCOUNTER_MSG       462A
END                 3006
ENDL                3676
ENEMIES_CHECK       3184
ENEMIES_LOOP        3192
ENEMY_ALIVE_CHECK   328C
ENEMY_CHECK         31B0
ENEMY_DIED          3296
ENEMY_HEALTH_MSG    4A09
ENEMY_MARK          4624
ENEMY_MAX           2
ENTER_COMBAT        31E4
ENTER_SHOP          3264
ESCAPE_ATTACK       3892
ESCAPE_MSG          46C4
EXIT                0
FAIL_ESCAPE         38AE
FAIL_ESCAPE_MSG     46DF
FAKE_GAMESTATE_MSG  4368
FIRST_ENEMY         6000
FIRST_SHOP          6500
FONT                1090000
GAME                3000
GAMELOOP            30F0
GAMEPLAY            35FA
GAME_STATE          5FF3
GOLD_MSG            4A30
GRAVEYARD_MSG       4C40
GREEN               FF00
HEALTH_MSG          4A00
HIT_AGAINST_BLOCK   3900
HIT_AGAINST_BLOCK_MSG  47DD
HIT_AGAINST_MAGIC   3918
HIT_AGAINST_MAGIC_MSG  4825
HIT_AGAINST_MELEE   3930
HIT_AGAINST_MELEE_MSG  4889
HIT_BY_COUNTER      3948
HIT_BY_COUNTER_MSG  48DF
HIT_BY_MAGIC        3964
HIT_BY_MAGIC_MSG    4942
HIT_BY_MELEE        3980
HIT_BY_MELEE_MSG    49B2
INPUT               309E
INPUT_ERROR_MSG     4341
INPUT_NUMS_MSG      4325
INVALID_INPUT       30E2
INVENTORY_MSG       4A25
KEY_MSG             4A38
KNIGHT_ROLE_MSG     4381
KNIGHT_SELECT       3062
LEAVE_SHOP          39E0
LEFT_TILE           4616
LOOP_COLUMNS        3A72
LOOP_ENEMIES        3BA0
LOOP_MSG            406A
LOOP_ROWS           3A5C
LOOP_SHOPS          3C22
MAGE_ROLE_MSG       4422
MAGE_SELECT         3076
MANAGE_INPUT        30C8
MELEE_ATTACK        3868
MERCHANT_MSG        4DEA
MOVEMENT            368C
MOVEMENT_BLOCKED    37E2
MOVEMENT_BLOCKED_MSG  45D5
MOVEMENT_CHECKS     317A
MOVEMENT_MSG        4543
MOVE_EAST           379E
MOVE_EAST_MSG       45AA
MOVE_NORTH          36CE
MOVE_NORTH_MSG      459B
MOVE_SOUTH          3714
MOVE_SOUTH_MSG      45B8
MOVE_WEST           375A
MOVE_WEST_MSG       45C7
NO_POTIONS          3A38
NO_POTIONS_MSG      4B87
OUT                 3630
PICK_ROLE           301C
PICK_ROLE_MSG       41AE
PLAYER              5FF0
PLAYER_DEAD         312E
PLAYER_MARK         4622
PLAYER_MSG          4C34
PLA_CLASS           5FF2
PLA_DAMAGE          5FF1
PLA_GOLD            5FF8
PLA_KEYS            5FFA
PLA_POTIONS         5FF9
PLA_P_POS           5FF6
PLA_TORCH           5FFB
POSITION            4
POTIONS_MSG         4A3F
PRESS_CONTINUE      39E2
PURPLE              F000F0
RANDOM_NUMBER       39FA
RED                 FF
REPLAY              3652
REPLAY_MSG          406C
RETURN              3A14
RIGHT_TILE          461A
ROGUE_ROLE_MSG      44B0
ROGUE_SELECT        308A
ROLE_INPUT          3044
SETUP_ENEMIES       3F1A
SETUP_PLAYER        3F58
SETUP_SHOPS         3F92
SETUP_WORLD         3CE4
SHOP                399C
SHOPS_CHECK         320E
SHOPS_LOOP          321C
SHOP_CHECK          323A
SHOP_ENTER_MSG      4BA1
SHOP_MARK           4628
SHOP_MAX            2
SHOP_MSG            4BD3
SHOP_STOCK_MSG      4C28
SKELETON_MSG        4CF2
START               1000
S_DAMAGE_IN         5
S_KEYS              3
S_POTIONS           2
S_TORCHES           4
TAKE_POTION         3A16
TAKE_POTION_MSG     4B4D
TORCHES_MSG         4A49
TORCH_MSG           4A18
TRY_RUN             3882
UPDATE              3106
UPGRADE_DMG         39DE
WAKE_UP_MSG         4096
WALL_COLLISIONS     36AC
WELCOME             300A
WELCOME_MSG         3FD3
WHITE               FFFFFF
WIN_MSG             4B00
WIN_POINT           5156
WIN_POINT_MARK      4626
WON_GAME            3158

00001000 Starting Address
Assembler used: EASy68K Editor/Assembler v5.16.01
Created On: 23/03/2019 00:50:39

00000000                             1  *-------------------------------------------------------
00000000                             2  * Author         : Michael Rainsford Ryan
00000000                             3  * Student Number : C00239510
00000000                             4  * Date Created   : 21/01/2019
00000000                             5  * Description    : A simplified, offline clone of the
00000000                             6  *                : online game "Avalon".
00000000                             7  * Issues/Bugs    : None currenty.
00000000                             8  *-------------------------------------------------------
00000000                             9  
00001000                            10      org $1000
00001000                            11  
00001000                            12  *-------------------------------------------------------
00001000                            13  *Choose to be a Worker or a God 
00001000                            14  *https://www.avalon-rpg.com/
00001000                            15  *-------------------------------------------------------
00001000                            16  
00001000                            17  *-------------------------------------------------------
00001000                            18  *-------------------Game Information-------------------
00001000                            19  *-------------------------------------------------------
00001000                            20  *A6 is used for player coordinates
00001000                            21  *A5 is used for enemy coordinates when in combat or looping through them
00001000                            22  *A5 is used for shops when in shop screen or when looping through them
00001000                            23  *A4 occasionally used for displaying the inventory
00001000                            24  *D5 is used occasionally for input range
00001000                            25  *$5FF0 holds player information
00001000                            26  *$6000 to $64F0 holds enemies
00001000                            27  *$6500 to $6FE0 holds shops
00001000                            28  *$6FE0 to $6FEF Holds locked doors
00001000                            29  *$6FF0 to $6FFF Holds big key locked doors
00001000                            30  *$7000 to $7500 holds loot
00001000                            31  *$8000 to $9000 holds maps
00001000                            32  
00001000                            33  *Enemies:
00001000                            34  *Byte:  Name:
00001000                            35  *0      Health
00001000                            36  *1      Damage/level
00001000                            37  *2      enemy type (Knight, mage, rogue)
00001000                            38  *3      Alive state (1 == alive, 0 == dead)
00001000                            39  *4 & 5  Coordinates
00001000                            40  
00001000                            41  *Player:
00001000                            42  *Byte:  Name:
00001000                            43  *0      Health
00001000                            44  *1      Damage/level
00001000                            45  *2      Class (Knight, mage, rogue)
00001000                            46  *3      Game state
00001000                            47  *4-5+A6 Coordinates
00001000                            48  *6-7    Last coordinates
00001000                            49  *8      Gold
00001000                            50  *9      Potions
00001000                            51  *A      Keys
00001000                            52  *B      Torch life
00001000                            53  
00001000                            54  *Shops:
00001000                            55  *Byte:  Name:
00001000                            56  *0-1    Position
00001000                            57  *2      Potions
00001000                            58  *3      Keys
00001000                            59  *4      Torches
00001000                            60  *5      Damage increase
00001000                            61  
00001000                            62  *Loot:
00001000                            63  *Byte:  Name:
00001000                            64  *0-1    Position
00001000                            65  *2      Potions
00001000                            66  *3      Keys
00001000                            67  *4      Torches
00001000                            68  *5      Gold
00001000                            69  *6      Active State
00001000                            70      
00001000                            71  *Game state : 0 = Pick role/intro | 5 = Move around | 6 = Combat | 7 = Shop | 64 = End game
00001000                            72  *Class      : 1 corresponds to knight - 2 corresponds to mage - 3 corresponds to rogue
00001000                            73  
00001000                            74  
00001000                            75  *-------------------------------------------------------
00001000                            76  *Validation values to be used, modify as needed
00001000                            77  *Add additional validation values as required
00001000                            78  *-------------------------------------------------------
00001000  =00000000                 79  exit        EQU 0      used to exit assembly program
00001000                            80  
00001000                            81  * Text display
00001000  =000000FF                 82  RED         EQU $000000FF   Red colour value
00001000  =0000FF00                 83  GREEN       EQU $0000FF00   Green colour value
00001000  =00FF0000                 84  BLUE        EQU $00FF0000   Blue colour value
00001000  =00FFFFFF                 85  WHITE       EQU $00FFFFFF   White colour value
00001000  =00F000F0                 86  PURPLE      EQU $00F000F0   Purple colour value
00001000  =0000FFFF                 87  GOLD        EQU $0000FFFF   gold colour value
00001000  =00507090                 88  BROWN       EQU $00507090   brown colour value
00001000  =01090000                 89  FONT        EQU $01090000   Font value
00001000                            90  
00001000                            91  * Player
00001000  =00005FF0                 92  PLAYER      EQU $5FF0       Memory address for player information and health
00001000  =00005FF1                 93  PLA_DAMAGE  EQU $5FF1       Memory address for player damage value
00001000  =00005FF2                 94  PLA_CLASS   EQU $5FF2       The memory address for the player class
00001000  =00005FF3                 95  GAME_STATE  EQU $5FF3       The memory address of the game state
00001000  =00005FF6                 96  PLA_P_POS   EQU $5FF6       Memory location of the player's previous position
00001000  =00005FF8                 97  PLA_GOLD    EQU $5FF8       Memory address for player gold
00001000  =00005FF9                 98  PLA_POTIONS EQU $5FF9       Memory address for player potions
00001000  =00005FFA                 99  PLA_KEYS    EQU $5FFA       Memory address for player keys
00001000  =00005FFB                100  PLA_TORCH   EQU $5FFB       Memory address for player torch life
00001000                           101  
00001000                           102  * Enemy
00001000  =00006000                103  FIRST_ENEMY EQU $6000       Memory location of the first enemy
00001000  =00000002                104  ENEMY_MAX   EQU 2           Number of enemies in the game
00001000                           105  
00001000  =00000001                106  DAMAGE      EQU 1           The number of bytes to move from the enemy before reaching the damage
00001000  =00000002                107  CLASS       EQU 2           The number of bytes to move from the enemy before reaching the class
00001000  =00000003                108  ALIVE       EQU 3           The number of bytes to move from the enemy before reaching the alive state
00001000  =00000004                109  POSITION    EQU 4           The number of bytes to move from the enemy before reaching the position
00001000                           110  
00001000                           111  * Shop & Loot
00001000  =00006500                112  FIRST_SHOP  EQU $6500       Memory location of the first shop
00001000  =00000002                113  SHOP_MAX    EQU 2           Number of shops in the game
00001000                           114  
00001000  =00000002                115  S_POTIONS   EQU 2           The number of bytes to move from the shop root before reaching the potions
00001000  =00000003                116  S_KEYS      EQU 3           The number of bytes to move from the shop root before reaching the keys
00001000  =00000004                117  S_TORCHES   EQU 4           The number of bytes to move from the shop root before reaching the torches
00001000  =00000005                118  S_DAMAGE_IN EQU 5           The number of bytes to move from the shop root before reaching the damage increase
00001000                           119  
00001000  =00007000                120  FIRST_LOOT  EQU $7000       Memory location of the first loot pile
00001000  =00000006                121  L_ACTIVE    EQU 6           The number of bytes to move from the loot pile root before reaching the active state
00001000                           122  
00001000                           123  * HUD
00001000  =00003201                124  CSR_POS_MOVE    EQU $3201   The cursor position to draw the HUD to when in movement state
00001000  =00002001                125  CSR_POS_BATTLE  EQU $2001   The cursor position to draw the HUD to when in battle state
00001000  =00001801                126  CSR_POS_SHOP_S  EQU $1801   The cursor position to draw the HUD to when in shop state for shop info
00001000  =00003401                127  CSR_POS_SHOP_P  EQU $3401   The cursor position to draw the HUD to when in shop state for player info
00001000                           128  
00001000                           129  * Game
00001000  =00008156                130  WIN_POINT       EQU $8156   The position the player has to get to to win
00001000  =00006FE0                131  FIRST_DOOR      EQU $6FE0   The memory location of the first locked door
00001000  =00000001                132  DOOR_MAX        EQU 1       The number of locked doors in the game
00001000  =00001000                133  OPEN_DOOR_POS   EQU $1000   The position doors are given when opened
00001000                           134  
00001000  =00000005                135  POTION_PRICE    EQU 5       The price in gold for a potion
00001000  =0000000F                136  KEY_PRICE       EQU 15      The price in gold for a key
00001000  =0000000A                137  TORCH_PRICE     EQU 10      The price in gold for a torch
00001000  =00000014                138  DAMAGE_UP_PRICE EQU 20      The price in gold for a damage upgrade
00001000                           139  
00001000  =0000000F                140  LIFE_PER_TORCH  EQU 15      The life value each torch has
00001000                           141  
00001000  =00008080                142  MAP_START_POINT EQU $8080   The starting coordinates the map draws at
00001000  =0000000F                143  MAP_LENGTH      EQU 15      The number of tiles downwords the map will draw
00001000                           144  
00001000                           145  
00001000                           146  *Start of Game
00001000                           147  start:
00001000  6100 36D6                148      bsr     setup_player
00001004  6100 3354                149      bsr     setup_world
00001008  6100 3648                150      bsr     setup_enemies
0000100C  6100 3706                151      bsr     setup_shops
00001010  6100 367E                152      bsr     setup_loot
00001014                           153  
00001014  6100 1FF4                154      bsr     welcome    branch to the welcome subroutine
00001018  6100 2F5A                155      bsr     press_continue
0000101C  6100 1FE2                156      bsr     game       branch to the game subroutine
00001020                           157  *Game loop
00003000                           158      org     $3000      the rest of the program is to be located from 3000 onwards
00003000                           159  
00003000                           160  *-------------------------------------------------------
00003000                           161  *-------------------Game Subroutine---------------------
00003000                           162  *-------------------------------------------------------
00003000                           163  game:
00003000  6100 0192                164      bsr     gameloop   branch to gameloop subroutine
00003004  4E75                     165      rts                return from game: subroutine
00003006                           166            
00003006                           167  end:
00003006  FFFF FFFF                168      simhalt
0000300A                           169  
0000300A                           170  *-------------------------------------------------------
0000300A                           171  *-------------------Welcome Subroutine------------------
0000300A                           172  *-------------------------------------------------------
0000300A                           173  welcome:
0000300A  43F9 00004755            174      lea     welcome_msg,A1  assign message to address register A1
00003010  103C 000E                175      move.b  #14,D0          move literal 14 to DO
00003014  4E4F                     176      trap    #15             trap and interpret value in D0
00003016  6100 09A0                177      bsr     endl            branch to endl subroutine
0000301A                           178      
0000301A  4E75                     179      rts                     return from welcome: subroutine
0000301C                           180  
0000301C                           181  *-------------------------------------------------------
0000301C                           182  *-------------------Role Picking Subroutine------------------
0000301C                           183  *-------------------------------------------------------
0000301C                           184  pick_role:
0000301C                           185  
0000301C  43F9 00004B1E            186      lea     wake_up_msg,A1  assign message to address register A1
00003022  103C 000E                187      move.b  #14,D0          move literal 14 to DO
00003026  4E4F                     188      trap    #15             trap and interpret value in D0
00003028  6100 098E                189      bsr     endl            branch to endl subroutine
0000302C                           190      
0000302C  43F9 00004C36            191      lea     pick_role_msg,A1 assign message to address register A1
00003032  103C 000E                192      move.b  #14,D0           move literal 14 to DO
00003036  4E4F                     193      trap    #15              trap and interpret value in D0
00003038                           194      
00003038  7A03                     195      move.l  #3,D5           Move the number 3 to D5 to tell the program how many options there are
0000303A                           196      
0000303A  6100 00E2                197      bsr     input           branch to the input subroutine
0000303E                           198      
0000303E  6100 0F34                199      bsr     press_continue          Pause the game until a key is pressed
00003042                           200      
00003042  4E75                     201      rts                     return from pick_role subroutine
00003044                           202      
00003044                           203  role_input:
00003044  11C1 5FF2                204      move.b  D1,PLA_CLASS    Move the role number to player class memory location to hold the class number
00003048                           205      
00003048                           206      *Give the player a message depending on the role chosen
00003048  B23C 0001                207      CMP.B   #1,D1
0000304C  6700 0014                208      BEQ     knight_select   Branch to knight message if role selected
00003050                           209      
00003050  B23C 0002                210      CMP.B   #2,D1
00003054  6700 003C                211      BEQ     mage_select     Branch to mage message if role selected
00003058                           212      
00003058  B23C 0003                213      CMP.B   #3,D1
0000305C  6700 0064                214      BEQ     rogue_select    Branch to rogue message if role selected
00003060                           215      
00003060  4E75                     216      rts
00003062                           217      
00003062                           218  knight_select:
00003062  43F9 00004E09            219      lea     knight_role_msg,A1  assign message to address register A1
00003068  103C 000E                220      move.b  #14,D0              move literal 14 to DO
0000306C  4E4F                     221      trap    #15                 Display the knight message
0000306E                           222      
0000306E  223C 00F000F0            223      move.l  #PURPLE,D1          Load the purple colour
00003074  6100 0F72                224      bsr     change_font_colour  Change the font colour
00003078                           225      
00003078  43F9 00004E5B            226      lea     knight_spec_msg,A1  assign message to address register A1
0000307E  103C 000E                227      move.b  #14,D0              move literal 14 to DO
00003082  4E4F                     228      trap    #15                 Display the knight message
00003084                           229      
00003084  223C 00FFFFFF            230      move.l  #WHITE,D1           Load the white colour
0000308A  6100 0F5C                231      bsr     change_font_colour  Change the font colour
0000308E                           232      
0000308E  6000 0062                233      bra     tutorial_intro      Branch to tutorial subroutine
00003092                           234  
00003092                           235  mage_select:
00003092  43F9 00004EA9            236      lea     mage_role_msg,A1    Assign message to address register A1
00003098  103C 000E                237      move.b  #14,D0              move literal 14 to DO
0000309C  4E4F                     238      trap    #15                 Display the mage message
0000309E                           239      
0000309E  223C 00F000F0            240      move.l  #PURPLE,D1          Load the purple colour
000030A4  6100 0F42                241      bsr     change_font_colour  Change the font colour
000030A8                           242      
000030A8  43F9 00004EF3            243      lea     mage_spec_msg,A1    assign message to address register A1
000030AE  103C 000E                244      move.b  #14,D0              move literal 14 to DO
000030B2  4E4F                     245      trap    #15                 Display the mage message
000030B4                           246      
000030B4  223C 00FFFFFF            247      move.l  #WHITE,D1           Load the white colour
000030BA  6100 0F2C                248      bsr     change_font_colour  Change the font colour
000030BE                           249      
000030BE  6000 0032                250      bra     tutorial_intro      Branch to tutorial subroutine
000030C2                           251  
000030C2                           252  rogue_select:
000030C2  43F9 00004F36            253      lea     rogue_role_msg,A1   Assign message to address register A1
000030C8  103C 000E                254      move.b  #14,D0              move literal 14 to DO
000030CC  4E4F                     255      trap    #15                 Display the rogue message
000030CE                           256      
000030CE  223C 00F000F0            257      move.l  #PURPLE,D1          Load the purple colour
000030D4  6100 0F12                258      bsr     change_font_colour  Change the font colour
000030D8                           259      
000030D8  43F9 00004F7E            260      lea     rogue_spec_msg,A1   Assign message to address register A1
000030DE  103C 000E                261      move.b  #14,D0              move literal 14 to DO
000030E2  4E4F                     262      trap    #15                 Display the rogue message
000030E4                           263      
000030E4  223C 00FFFFFF            264      move.l  #WHITE,D1           Load the white colour
000030EA  6100 0EFC                265      bsr     change_font_colour  Change the font colour
000030EE                           266      
000030EE  6000 0002                267      bra     tutorial_intro      Branch to tutorial subroutine
000030F2                           268      
000030F2                           269  tutorial_intro:
000030F2  6100 08C4                270      bsr     endl                Break to a new line
000030F6                           271  
000030F6  223C 000000FF            272      move.l  #RED,D1             Load the purple colour
000030FC  6100 0EEA                273      bsr     change_font_colour  Change the font colour
00003100                           274      
00003100  43F9 00004A06            275      lea     tutorial_msg,A1     Load tutorial message to address register A1
00003106  103C 000E                276      move.b  #14,D0              move literal 14 to DO
0000310A  4E4F                     277      trap    #15                 Display the tutorial message
0000310C                           278      
0000310C  223C 00FFFFFF            279      move.l  #WHITE,D1           Load the white colour
00003112  6100 0ED4                280      bsr     change_font_colour  Change the font colour
00003116                           281      
00003116  11FC 0005 5FF3           282      move.b  #5,GAME_STATE       Change the game state to the movement state
0000311C                           283      
0000311C  4E75                     284      rts
0000311E                           285      
0000311E                           286  *-------------------------------------------------------
0000311E                           287  *---------Gameplay Input Values Subroutine--------------
0000311E                           288  *-------------------------------------------------------    
0000311E                           289  input:
0000311E  6100 0898                290      bsr     endl            Branch to end line subroutine
00003122  6100 0ED6                291      bsr     get_cursor_pos  Get the position of the cursor in D3
00003126                           292      
00003126  43F9 00004DAD            293      lea     input_nums_msg,A1 assign message to address register A1
0000312C  103C 000E                294      move.b  #14,D0          move literal 14 to DO
00003130  4E4F                     295      trap    #15             Display the "enter number" message
00003132                           296      
00003132  2205                     297      move.l  D5,D1           Move the number of options to D1 to display it
00003134  103C 0003                298      move.b  #3,D0           move literal 3 to DO
00003138  4E4F                     299      trap    #15             Display the number in D1 to show the input range
0000313A                           300      
0000313A  43F9 00004DC6            301      lea     colon_msg,A1    assign message to address register A1
00003140  103C 000E                302      move.b  #14,D0          move literal 14 to DO
00003144  4E4F                     303      trap    #15             Display a colon after the number range
00003146                           304      
00003146  103C 0004                305      move.b  #4,D0           Move the number 4 to D0
0000314A  4E4F                     306      trap    #15             Take input
0000314C                           307      
0000314C  1A01                     308      move.b  D1,D5           Move the input to D5 for later
0000314E                           309      
0000314E  3203                     310      move.w  D3,D1           Move the cursor position of the start of the line
00003150  103C 000B                311      move.b  #11,D0          Move the number literal 11 to D0 for trap command
00003154  4E4F                     312      trap    #15             Move the cursor back to the start of the line
00003156                           313      
00003156  43F9 000049B2            314      lea     blank_msg,A1    Load the blank message into A1 to wipe the line blank
0000315C  103C 000E                315      move.b  #14,D0          Move number literal to D0 for trap command
00003160  4E4F                     316      trap    #15             Display the loaded message
00003162                           317      
00003162  103C 000B                318      move.b  #11,D0          Move the number literal 11 to D0 for trap command
00003166  4E4F                     319      trap    #15             Move the cursor back to the start of the line
00003168                           320      
00003168  4281                     321      clr.l   D1              Clear D1 of large values
0000316A  1205                     322      move.b  D5,D1           Move the input back to D1
0000316C                           323      
0000316C                           324  manage_input:
0000316C  B27C 0001                325      CMP     #1,D1           Check input against minimum value
00003170  6D00 0014                326      BLT     invalid_input   Error if less than 1
00003174                           327      
00003174  B245                     328      CMP     D5,D1           Compare input against max value
00003176  6E00 000E                329      BGT     invalid_input   Error if more than max value
0000317A                           330      
0000317A  0C38 0000 5FF3           331      CMP.B   #0,GAME_STATE   Check which state the game is in
00003180  6700 FEC2                332      BEQ     role_input      Branch to the manage input for the role picking
00003184                           333      
00003184  4E75                     334      rts                     Return out of subroutine
00003186                           335  
00003186                           336  invalid_input:
00003186  43F9 00004DC9            337      lea     input_error_msg,A1 assign message to address register A1
0000318C  103C 000E                338      move.b  #14,D0          move literal 14 to DO
00003190  4E4F                     339      trap    #15             Display the error message
00003192                           340      
00003192  608A                     341      bra     input           Go back to taking input
00003194                           342  
00003194                           343  *-------------------------------------------------------
00003194                           344  *----------------Gameloop (main loop)-------------------
00003194                           345  *------------------------------------------------------- 
00003194                           346  gameloop:
00003194  6100 07F2                347      bsr     clear_screen    clears the screen  
00003198  6100 0308                348      bsr     draw            branch to draw screen subroutine
0000319C  6100 035C                349      bsr     draw_hud
000031A0  6100 0008                350      bsr     update          branch to update game subroutine 
000031A4  6100 0796                351      bsr     gameplay        branch to gameplay subroutine
000031A8  60EA                     352      bra     gameloop        Continue looping the game loop     
000031AA                           353  
000031AA                           354  *-------------------------------------------------------
000031AA                           355  *----------------Update Quest Progress------------------
000031AA                           356  *  Complete Quest
000031AA                           357  *------------------------------------------------------- 
000031AA                           358  update:
000031AA  0C38 0000 5FF0           359      CMP.B   #0,PLAYER           Check if the player health is zero
000031B0  6F00 0022                360      BLE     player_dead         Player is dead if health is zero or below
000031B4                           361      
000031B4  BDFC 00008156            362      CMP.L   #WIN_POINT,A6       Check if the player is standing on the win point
000031BA  6700 0042                363      BEQ     won_game            Branch to the won game subroutine
000031BE                           364  
000031BE  0C38 0005 5FF3           365      CMP.B   #5,GAME_STATE       Check which state the game is in
000031C4  6700 0066                366      BEQ     movement_checks     Check for enemies and shops if in movement state
000031C8  0C38 0006 5FF3           367      CMP.B   #6,GAME_STATE       Check which state the game is in
000031CE  6700 029A                368      BEQ     enemy_alive_check   Check if enemy is dead if in combat
000031D2                           369      
000031D2  4E75                     370      rts
000031D4                           371      
000031D4                           372  *-------------------------------------------------------
000031D4                           373  *---------------------Win or Lose----------------------- 
000031D4                           374  player_dead:
000031D4  6100 07E2                375      bsr     endl            Break to new line
000031D8                           376      
000031D8  43F9 00005581            377      lea     death_msg,A1    Load the death message
000031DE  103C 000E                378      move.b  #14,D0          Move byte #14 to D0 for the trap command
000031E2  4E4F                     379      trap    #15             Display the loaded message
000031E4                           380  
000031E4  6100 0D8E                381      bsr     press_continue  Pause to get input
000031E8  6100 079E                382      bsr     clear_screen    Clear the screen
000031EC  6100 02E2                383      bsr     draw_graveyard  Draw a graveyard
000031F0  6100 07C6                384      bsr     endl            Break to new line
000031F4  11FC 0040 5FF3           385      move.b  #64,GAME_STATE  Set the game state to end game
000031FA  6000 0798                386      bra     replay          Give the player the option to restart or quit
000031FE                           387      
000031FE                           388  won_game:
000031FE  6100 07B8                389      bsr     endl            Break to new line
00003202                           390      
00003202  43F9 000055E6            391      lea     win_msg,A1      Load the win message
00003208  103C 000E                392      move.b  #14,D0          Move byte #14 to D0 for the trap command
0000320C  4E4F                     393      trap    #15             Display the loaded message
0000320E                           394  
0000320E  6100 0D64                395      bsr     press_continue  Pause to get input
00003212  6100 0774                396      bsr     clear_screen    Clear the screen
00003216  6100 07A0                397      bsr     endl            Break to new line
0000321A  6100 02C2                398      bsr     draw_castle     Draw a castle
0000321E  6100 0798                399      bsr     endl            Break to new line
00003222  11FC 0040 5FF3           400      move.b  #64,GAME_STATE  Set the game state to end game
00003228  6000 076A                401      bra     replay          Give the player the option to restart or quit
0000322C                           402  
0000322C                           403  *-------------------------------------------------------
0000322C                           404  *--------------------Movement State--------------------- 
0000322C                           405  movement_checks:
0000322C  6100 0100                406      bsr     manage_torch    Check if the torch life is zero and if damage player if so
00003230  6100 0016                407      bsr     loot_piles_check Check for loot piles under the player 
00003234  6100 012C                408      bsr     enemies_check   Check for enemies beside the player
00003238  0C38 0005 5FF3           409      CMP.B   #5,GAME_STATE   Compare the movement gamestate number with the current gamestate
0000323E  6600 0D66                410      BNE     return          Return from the loop if the game is not in the movement state anymore
00003242  6100 01A8                411      bsr     shops_check     Check for shops beside the player
00003246                           412      
00003246  4E75                     413      rts
00003248                           414  
00003248                           415  *-------------------Loot pile checks--------------------
00003248                           416  loot_piles_check:
00003248  4BF8 7000                417      lea     FIRST_LOOT,A5   Load the memory address of the first loot pile
0000324C  1A3C 0000                418      move.b  #0,D5           Move the starting loot number to D5
00003250  6100 0004                419      bsr     loot_pile_loop  Loop through all loot piles
00003254  4E75                     420      rts                     Return from subroutine
00003256                           421      
00003256                           422  loot_pile_loop:
00003256  BA3C 0002                423      CMP.B   #ENEMY_MAX,D5   Compare the loot number with the maximum enemy number
0000325A  6C00 0D4A                424      BGE     return          Return from the loop if the current loot number is greater than or equal to the max
0000325E                           425  
0000325E  6100 000A                426      bsr     loot_pile_check Check for a loot pile
00003262                           427      
00003262  5205                     428      add.b   #1,D5           Add to the current loot number
00003264  DAFC 0010                429      add.w   #16,A5          Add to the current loot pointer to move to the next loot pile
00003268  60EC                     430      bra     loot_pile_loop  Keep looping the loot piles
0000326A                           431      
0000326A                           432  loot_pile_check:
0000326A  5C4D                     433      add.w   #L_ACTIVE,A5    Move to the active state
0000326C  0C15 0000                434      CMP.B   #0,(A5)         Check if the loot is active
00003270  5D4D                     435      sub.w   #L_ACTIVE,A5    Move to the active state
00003272  6700 0D32                436      BEQ     return          Return if not active
00003276                           437  
00003276  3415                     438      move.w  (A5),D2         Move the loot pile position to D2 for large value comparison
00003278  BDC2                     439      CMP.L   D2,A6           Check if the player is on a loot pile   
0000327A  6700 0004                440      BEQ     pickup_loot     Pickup the loot
0000327E                           441      
0000327E  4E75                     442      rts     Return if not touching a loot pile
00003280                           443      
00003280                           444  pickup_loot:
00003280  6100 0736                445      bsr     endl                Line break
00003284                           446      
00003284  223C 0000FFFF            447      move.l  #GOLD,D1            Load gold colour
0000328A  6100 0D5C                448      bsr     change_font_colour  Change the font colour
0000328E                           449      
0000328E  43F9 000057DC            450      LEA     pickup_loot_msg,A1  Load the encounter message int A1
00003294  103C 000E                451      move.b  #14,D0              Move #14 to D0 to display message
00003298  4E4F                     452      trap    #15                 Display the loaded message
0000329A                           453      
0000329A  544D                     454      add.w   #S_POTIONS,A5       Move to potions number
0000329C  1215                     455      move.b  (A5),D1            Move the loot potions number to D1 and increment
0000329E  D338 5FF9                456      add.b   D1,PLA_POTIONS      Give the player the number of potions in the loot
000032A2                           457      
000032A2  43F9 00005800            458      LEA     pickup_potion_msg,A1  Load the pickup potions message into A1
000032A8  103C 000E                459      move.b  #14,D0              Move #14 to D0 to display message
000032AC  4E4F                     460      trap    #15                 Display the loaded message
000032AE                           461      
000032AE  384D                     462      move.w  A5,A4               Move the item number to A4 to draw it
000032B0  6100 0472                463      bsr     draw_item_number    Draw the item number
000032B4  6100 0702                464      bsr     endl                Break to new line
000032B8  524D                     465      add.w   #1,A5               Move to the next item in the loot pile
000032BA                           466      
000032BA  1215                     467      move.b  (A5),D1             Move the key number to D1 and increment
000032BC  D338 5FFA                468      add.b   D1,PLA_KEYS         Give the player the number of keys in the loot
000032C0                           469      
000032C0  43F9 0000580A            470      LEA     pickup_key_msg,A1   Load the pickup key message into A1
000032C6  103C 000E                471      move.b  #14,D0              Move #14 to D0 to display message
000032CA  4E4F                     472      trap    #15                 Display the loaded message
000032CC                           473      
000032CC  384D                     474      move.w  A5,A4               Move the item number to A4 to draw it
000032CE  6100 0454                475      bsr     draw_item_number    Draw the item number
000032D2  6100 06E4                476      bsr     endl                Break to new line
000032D6  524D                     477      add.w   #1,A5               Move to the next item in the loot pile
000032D8                           478      
000032D8  1215                     479      move.b  (A5),D1             Move the torch number to D1 and increment
000032DA  D338 5FFB                480      add.b   D1,PLA_TORCH        Give the player the number of torches in the loot
000032DE                           481      
000032DE  43F9 00005811            482      LEA     pickup_torch_msg,A1 Load the pickup torch message into A1
000032E4  103C 000E                483      move.b  #14,D0              Move #14 to D0 to display message
000032E8  4E4F                     484      trap    #15                 Display the loaded message
000032EA                           485      
000032EA  384D                     486      move.w  A5,A4               Move the item number to A4 to draw it
000032EC  6100 0436                487      bsr     draw_item_number    Draw the item number
000032F0  6100 06C6                488      bsr     endl                Break to new line
000032F4  524D                     489      add.w   #1,A5               Move to the next item in the loot pile
000032F6                           490      
000032F6  1215                     491      move.b  (A5),D1             Move the torch number to D1 and increment
000032F8  D338 5FF8                492      add.b   D1,PLA_GOLD         Give the player the number of gold in the loot
000032FC                           493      
000032FC  43F9 000057F8            494      LEA     pickup_gold_msg,A1  Load the pickup gold message int A1
00003302  103C 000E                495      move.b  #14,D0              Move #14 to D0 to display message
00003306  4E4F                     496      trap    #15                 Display the loaded message
00003308                           497      
00003308  384D                     498      move.w  A5,A4               Move the item number to A4 to draw it
0000330A  6100 0418                499      bsr     draw_item_number    Draw the item number
0000330E  6100 06A8                500      bsr     endl                Break to new line
00003312  524D                     501      add.w   #1,A5               Move to the next item in the loot pile
00003314                           502      
00003314  1ABC 0000                503      move.b  #0,(A5)             Set the loot to not active
00003318  5D4D                     504      sub.w   #L_ACTIVE,A5        Move to active state
0000331A                           505      
0000331A  223C 00FFFFFF            506      move.l  #WHITE,D1           Load the white colour
00003320  6100 0CC6                507      bsr     change_font_colour  Change the font colour
00003324                           508      
00003324  6100 0C4E                509      bsr     press_continue      Wait for user input
00003328  6100 01D0                510      bsr     draw_hud            Re-draw the hud
0000332C                           511      
0000332C  4E75                     512      rts
0000332E                           513  
0000332E                           514  *---------------------Manage Torch----------------------
0000332E                           515  manage_torch:
0000332E  0C38 0000 5FFB           516      CMP.B   #0,PLA_TORCH    Compare the torch life with zero
00003334  6E00 0C70                517      BGT     return          Return if the torch life is greater than zero
00003338                           518      
00003338  5338 5FF0                519      sub.b   #1,PLAYER       Remove one health from the player
0000333C                           520      
0000333C  6100 067A                521      bsr     endl            Break to new line
00003340                           522      
00003340  223C 000000FF            523      move.l  #RED,D1
00003346  6100 0CA0                524      bsr     change_font_colour  Change the font colour
0000334A                           525      
0000334A  43F9 000057C4            526      lea     no_torch_msg,A1 Load the no torch message into A1
00003350  103C 000E                527      move.b  #14,D0          Move the number literal 14 into D0 for trap command
00003354  4E4F                     528      trap    #15             Display the loaded message
00003356                           529      
00003356  223C 00FFFFFF            530      move.l  #WHITE,D1
0000335C  6100 0C8A                531      bsr     change_font_colour  Change the font colour
00003360                           532      
00003360  4E75                     533      rts                     Return from the subroutine
00003362                           534  
00003362                           535  *--------------------Enemy Checking--------------------- 
00003362                           536  enemies_check:
00003362  4BF8 6000                537      lea     FIRST_ENEMY,A5  Load the memory address of the first enemy
00003366  1A3C 0000                538      move.b  #0,D5           Move the starting enemy number to D5
0000336A  6100 0004                539      bsr     enemies_loop    Loop through all enemies
0000336E  4E75                     540      rts                     Return from subroutine
00003370                           541      
00003370                           542  enemies_loop:
00003370  BA3C 0002                543      CMP.B   #ENEMY_MAX,D5   Compare the enemy number with the maximum enemy number
00003374  6C00 0C30                544      BGE     return          Return from the loop if the current enemy number is greater than or equal to the max
00003378                           545  
00003378  6100 0014                546      bsr     enemy_check     Check for an enemy
0000337C                           547      
0000337C  0C38 0005 5FF3           548      CMP.B   #5,GAME_STATE   Compare the movement gamestate number with the current gamestate
00003382  6600 0C22                549      BNE     return          Return from the loop if the game is not in the movement state anymore
00003386                           550      
00003386  5205                     551      add.b   #1,D5           Add to the current enemy number
00003388  DAFC 000C                552      add.w   #12,A5          Add to the current enemy pointer to move to the next enemy (16 for next enemy - 4 to get back from position)
0000338C  60E2                     553      bra     enemies_loop    Keep looping the enemies
0000338E                           554      
0000338E                           555  
0000338E                           556  enemy_check:
0000338E  564D                     557      add.w   #ALIVE,A5       Move into enemy information to check if its alive
00003390  0C1D 0000                558      CMP.B   #0,(A5)+        Check if the enemy is alive
00003394  6700 0C10                559      BEQ     return          Return from the check if the enemy is dead
00003398                           560      
00003398  340E                     561      move.w  A6,D2           Move the player position to D2
0000339A                           562      
0000339A                           563      *Check if the player is beside an enemy
0000339A  0442 0010                564      sub.w   #16,D2          Check north
0000339E  B455                     565      CMP.W   (A5),D2           
000033A0  6700 0020                566      BEQ     enter_combat    Enter the player into combat
000033A4                           567      
000033A4  0642 0020                568      add.w   #32,D2          Check south
000033A8  B455                     569      CMP.W   (A5),D2           
000033AA  6700 0016                570      BEQ     enter_combat    Enter the player into combat
000033AE                           571      
000033AE  0442 0011                572      sub.w   #17,D2          Check west
000033B2  B455                     573      CMP.W   (A5),D2           
000033B4  6700 000C                574      BEQ     enter_combat    Enter the player into combat
000033B8                           575      
000033B8  5442                     576      add.w   #2,D2           Check east
000033BA  B455                     577      CMP.W   (A5),D2           
000033BC  6700 0004                578      BEQ     enter_combat    Enter the player into combat
000033C0                           579      
000033C0  4E75                     580      rts     Return if not touching an enemy
000033C2                           581      
000033C2                           582  enter_combat:
000033C2  594D                     583      sub.w   #4,A5               Get the memory address of the enemy opposed to it's position
000033C4  11FC 0006 5FF3           584      move.b  #6,GAME_STATE       Move to combat state
000033CA                           585      
000033CA  6100 05EC                586      bsr     endl                Line break
000033CE                           587      
000033CE  43F9 00005103            588      LEA     encounter_msg,A1    Load the encounter message int A1
000033D4  103C 000E                589      move.b  #14,D0              Move #14 to D0 to display message
000033D8  4E4F                     590      trap    #15                 Display the loaded message
000033DA                           591      
000033DA  6100 0B98                592      bsr     press_continue      Branch to the press to continue subroutine
000033DE                           593      
000033DE  6100 05A8                594      bsr     clear_screen        Clear the screen
000033E2                           595      
000033E2  6100 00DE                596      bsr     draw_skeleton       Draw the enemy
000033E6  6100 035E                597      bsr     draw_battle_info    Draw the info
000033EA                           598      
000033EA  4E75                     599      rts
000033EC                           600        
000033EC                           601  *--------------------Shop Checking----------------------
000033EC                           602  shops_check:
000033EC  4BF8 6500                603      lea     FIRST_SHOP,A5   Load the memory address of the first shop
000033F0  1A3C 0000                604      move.b  #0,D5           Move the starting shop number to D5
000033F4  6100 0004                605      bsr     shops_loop      Loop through all shops
000033F8  4E75                     606      rts                     Return from subroutine
000033FA                           607      
000033FA                           608  shops_loop:
000033FA  BA3C 0002                609      CMP.B   #SHOP_MAX,D5    Compare the shop number with the maximum shop number
000033FE  6C00 0BA6                610      BGE     return          Return from the loop if the current shop number is greater than or equal to the max
00003402                           611      
00003402  6100 0014                612      bsr     shop_check      Check for a shop
00003406                           613      
00003406  0C38 0005 5FF3           614      CMP.B   #5,GAME_STATE   Compare the movement gamestate number with the current gamestate
0000340C  6600 0B98                615      BNE     return          Return from the loop if the game is not in the movement state anymore
00003410                           616      
00003410  5205                     617      add.b   #1,D5           Add to the current shop number
00003412  DAFC 0010                618      add.w   #16,A5          Add to the current shop pointer to move to the next shop
00003416  60E2                     619      bra     shops_loop      Keep looping the shops
00003418                           620      
00003418                           621  shop_check:    
00003418  340E                     622      move.w  A6,D2           Move the player position to D2
0000341A                           623      
0000341A                           624      *Check if the player is beside a shop
0000341A  0442 0010                625      sub.w   #16,D2          Check north
0000341E  B455                     626      CMP.W   (A5),D2           
00003420  6700 0020                627      BEQ     enter_shop      The player enters a shop
00003424                           628      
00003424  0642 0020                629      add.w   #32,D2          Check south
00003428  B455                     630      CMP.W   (A5),D2           
0000342A  6700 0016                631      BEQ     enter_shop      The player enters a shop
0000342E                           632      
0000342E  0442 0011                633      sub.w   #17,D2          Check west
00003432  B455                     634      CMP.W   (A5),D2           
00003434  6700 000C                635      BEQ     enter_shop      The player enters a shop
00003438                           636      
00003438  5442                     637      add.w   #2,D2           Check east
0000343A  B455                     638      CMP.W   (A5),D2           
0000343C  6700 0004                639      BEQ     enter_shop      The player enters a shop
00003440                           640      
00003440  4E75                     641      rts     Return if not touching a shop
00003442                           642      
00003442                           643  enter_shop:
00003442  11FC 0007 5FF3           644      move.b  #7,GAME_STATE       Move to shop game state
00003448                           645      
00003448  6100 056E                646      bsr     endl                Line break
0000344C                           647      
0000344C  43F9 00005687            648      LEA     shop_enter_msg,A1   Load the encounter message int A1
00003452  103C 000E                649      move.b  #14,D0              Move #14 to D0 to display message
00003456  4E4F                     650      trap    #15                 Display the loaded message
00003458                           651      
00003458  6100 0B1A                652      bsr     press_continue      Branch to the press to continue subroutine
0000345C                           653      
0000345C  6100 052A                654      bsr     clear_screen        Clear the screen
00003460                           655      
00003460  6100 008A                656      bsr     draw_merchant       Draw the merchant
00003464  6100 035A                657      bsr     draw_shop_info      Draw the info
00003468                           658      
00003468  4E75                     659      rts
0000346A                           660  
0000346A                           661  *-------------------------------------------------------
0000346A                           662  *---------------------Combat State---------------------- 
0000346A                           663  enemy_alive_check:
0000346A  0C15 0000                664      CMP.B   #0,(A5)     Compare the enemy health with zero
0000346E  6F00 0004                665      BLE     enemy_died  If the enemy health is zero or below, they died
00003472                           666      
00003472  4E75                     667      rts
00003474                           668      
00003474                           669  enemy_died:
00003474  6100 0542                670      bsr     endl            Break to a new line
00003478                           671  
00003478  43F9 0000554B            672      lea     battle_won_msg,A1   Load the won battle message
0000347E  103C 000E                673      move.b  #14,D0              Move the literal #14 to D0 for trap task #14
00003482  4E4F                     674      trap    #15                 Display the message
00003484                           675      
00003484  11FC 0005 5FF3           676      move.b  #5,GAME_STATE   Set the game state mack to movement state
0000348A  564D                     677      add.w   #ALIVE,A5       Move from the enemy health to its alive status
0000348C  1ABC 0000                678      move.b  #0,(A5)         Set the enemy as dead
00003490                           679      
00003490  6100 0AE2                680      bsr     press_continue
00003494                           681      
00003494  6100 04F2                682      bsr     clear_screen    Clear the screen
00003498  6100 0008                683      bsr     draw            Draw the map for first frame back in movement
0000349C  6100 005C                684      bsr     draw_hud        Draw the hud for first frame back in movement
000034A0                           685      
000034A0  4E75                     686      rts
000034A2                           687      
000034A2                           688  *-------------------------------------------------------
000034A2                           689  *-----------------Draw Quest Updates--------------------
000034A2                           690  * Draw the game progress information, status regarding
000034A2                           691  * quest
000034A2                           692  *------------------------------------------------------- 
000034A2                           693  draw:
000034A2  0C38 0005 5FF3           694      CMP.B   #5,GAME_STATE   Check which state the game is in
000034A8  6700 0B5E                695      BEQ     draw_loop       If in the movement state, draw the map
000034AC  0C38 0006 5FF3           696      CMP.B   #6,GAME_STATE   Check which state the game is in
000034B2  6700 000E                697      BEQ     draw_skeleton   If in the combat state, draw the enemy
000034B6  0C38 0007 5FF3           698      CMP.B   #7,GAME_STATE   Check which state the game is in
000034BC  6700 002E                699      BEQ     draw_merchant   If in the shop state, draw the enemy
000034C0  4E75                     700      rts
000034C2                           701      
000034C2                           702  draw_skeleton:
000034C2  43F9 000059CA            703      lea     skeleton_msg,A1 Load the skeleton message
000034C8  103C 000E                704      move.b  #14,D0          Move literal 14 for display message trap command
000034CC  4E4F                     705      trap    #15             Display the loaded message
000034CE                           706      
000034CE  4E75                     707      rts
000034D0                           708      
000034D0                           709  draw_graveyard:
000034D0  43F9 00005918            710      lea     graveyard_msg,A1 Load the graveyard message
000034D6  103C 000E                711      move.b  #14,D0           Move literal 14 for display message trap command
000034DA  4E4F                     712      trap    #15              Display the loaded message
000034DC  4E75                     713      rts                      Return from the subroutine
000034DE                           714  
000034DE                           715  draw_castle:
000034DE  43F9 00005BE9            716      lea     castle_msg,A1   Load the castle message
000034E4  103C 000E                717      move.b  #14,D0          Move literal 14 for display message trap command
000034E8  4E4F                     718      trap    #15             Display the loaded message
000034EA  4E75                     719      rts                     Return from the subroutine
000034EC                           720      
000034EC                           721  draw_merchant:
000034EC  43F9 00005AC2            722      lea     merchant_msg,A1  Load the merchant message
000034F2  103C 000E                723      move.b  #14,D0           Move literal 14 for display message trap command
000034F6  4E4F                     724      trap    #15              Display the loaded message
000034F8                           725      
000034F8  4E75                     726      rts
000034FA                           727      
000034FA                           728  draw_hud:
000034FA  0C38 0005 5FF3           729      CMP.B   #5,GAME_STATE       Check which state the game is in
00003500  6700 0018                730      BEQ     draw_player_info    If in the movement state, draw the player info
00003504  0C38 0006 5FF3           731      CMP.B   #6,GAME_STATE       Check which state the game is in
0000350A  6700 023A                732      BEQ     draw_battle_info    If in the combat state, draw the combat info
0000350E  0C38 0007 5FF3           733      CMP.B   #7,GAME_STATE       Check which state the game is in
00003514  6700 02AA                734      BEQ     draw_shop_info      If in the shop state, draw the shop info
00003518                           735      
00003518  4E75                     736      rts
0000351A                           737  
0000351A                           738  draw_player_info:
0000351A  323C 00FF                739      move.w  #255,D1         Move the word #255 to D1 to set the type of trap 11
0000351E  103C 000B                740      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
00003522  4E4F                     741      trap    #15             Trap to get the cursor position in D1
00003524                           742      
00003524  3601                     743      move.w  D1,D3           Move the current cursor position to D3 for later
00003526                           744      
00003526                           745      * Display the player health
00003526  323C 3201                746      move.w  #CSR_POS_MOVE,D1           
0000352A  4E4F                     747      trap    #15             Set the cursor position with trap command 11
0000352C  4241                     748      clr     D1              Clear D1 of the cursor position
0000352E                           749      
0000352E  43F9 000054D9            750      lea     health_msg,A1   Load the hud message
00003534  103C 000E                751      move.b  #14,D0          Move literal 14 for display message trap command
00003538  4E4F                     752      trap    #15             Display the loaded message
0000353A                           753      
0000353A  1238 5FF0                754      move.b  PLAYER,D1       Move the player health value to D1 to display
0000353E  103C 0003                755      move.b  #3,D0           Move literal 3 for display number trap command
00003542  4E4F                     756      trap    #15             Display the number in D1
00003544                           757      
00003544                           758      * Display the torch life
00003544  103C 000B                759      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
00003548  323C 3201                760      move.w  #CSR_POS_MOVE,D1         
0000354C  5241                     761      add.w   #1,D1  
0000354E  4E4F                     762      trap    #15             Set the cursor position with trap command 11
00003550  4241                     763      clr     D1              Clear D1 of the cursor position
00003552                           764      
00003552  43F9 000054F1            765      lea     torch_msg,A1   Load the hud message
00003558  103C 000E                766      move.b  #14,D0          Move literal 14 for display message trap command
0000355C  4E4F                     767      trap    #15             Display the loaded message
0000355E                           768      
0000355E  1238 5FFB                769      move.b  PLA_TORCH,D1    Move the player torch life value to D1 to display
00003562  103C 0003                770      move.b  #3,D0           Move literal 3 for display number trap command
00003566  4E4F                     771      trap    #15             Display the number in D1
00003568                           772      
00003568                           773      * Display the inventory
00003568  103C 000B                774      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
0000356C  323C 3201                775      move.w  #CSR_POS_MOVE,D1
00003570  5441                     776      add.w   #2,D1          
00003572  4E4F                     777      trap    #15             Set the cursor position with trap command 11
00003574  4241                     778      clr     D1              Clear D1 of the cursor position
00003576                           779      
00003576  43F9 0000550B            780      lea     inventory_msg,A1   Load the hud message
0000357C  103C 000E                781      move.b  #14,D0          Move literal 14 for display message trap command
00003580  4E4F                     782      trap    #15             Display the loaded message
00003582                           783      
00003582                           784      * Display the player gold
00003582  103C 000B                785      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
00003586  323C 3201                786      move.w  #CSR_POS_MOVE,D1         
0000358A  5641                     787      add.w   #3,D1  
0000358C  4E4F                     788      trap    #15             Set the cursor position with trap command 11
0000358E  4241                     789      clr     D1              Clear D1 of the cursor position
00003590                           790      
00003590  43F9 00005516            791      lea     gold_msg,A1   Load the hud message
00003596  103C 000E                792      move.b  #14,D0          Move literal 14 for display message trap command
0000359A  4E4F                     793      trap    #15             Display the loaded message
0000359C                           794      
0000359C  49F8 5FF8                795      lea     PLA_GOLD,A4
000035A0  6100 0182                796      bsr     draw_item_number
000035A4                           797      
000035A4                           798      * Display the player potions
000035A4  103C 000B                799      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
000035A8  323C 3201                800      move.w  #CSR_POS_MOVE,D1         
000035AC  5841                     801      add.w   #4,D1  
000035AE  4E4F                     802      trap    #15             Set the cursor position with trap command 11
000035B0  4241                     803      clr     D1              Clear D1 of the cursor position
000035B2                           804      
000035B2  43F9 00005525            805      lea     potions_msg,A1   Load the hud message
000035B8  103C 000E                806      move.b  #14,D0          Move literal 14 for display message trap command
000035BC  4E4F                     807      trap    #15             Display the loaded message
000035BE                           808      
000035BE  49F8 5FF9                809      lea     PLA_POTIONS,A4
000035C2  6100 0160                810      bsr     draw_item_number
000035C6                           811      
000035C6                           812      * Display the player keys
000035C6  103C 000B                813      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
000035CA  323C 3201                814      move.w  #CSR_POS_MOVE,D1         
000035CE  5A41                     815      add.w   #5,D1  
000035D0  4E4F                     816      trap    #15             Set the cursor position with trap command 11
000035D2  4241                     817      clr     D1              Clear D1 of the cursor position
000035D4                           818      
000035D4  43F9 0000551E            819      lea     key_msg,A1   Load the hud message
000035DA  103C 000E                820      move.b  #14,D0          Move literal 14 for display message trap command
000035DE  4E4F                     821      trap    #15             Display the loaded message
000035E0                           822      
000035E0  49F8 5FFA                823      lea     PLA_KEYS,A4
000035E4  6100 013E                824      bsr     draw_item_number
000035E8                           825      
000035E8  6100 000E                826      bsr     draw_map_legend Draw the map legend
000035EC                           827      
000035EC  3203                     828      move.w  D3,D1           Move the previos cursor position to D1 to put it back in place
000035EE                           829      
000035EE  103C 000B                830      move.b  #11,D0          Move the byte #11 to D0 for trap command 11          
000035F2  4E4F                     831      trap    #15             Set the cursor position with trap command 11
000035F4                           832      
000035F4  4241                     833      clr     D1              Clear D1 for later use
000035F6                           834      
000035F6  4E75                     835      rts
000035F8                           836      
000035F8                           837  draw_map_legend:
000035F8                           838      * Display the legend message
000035F8  103C 000B                839      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
000035FC  323C 3201                840      move.w  #CSR_POS_MOVE,D1    Get the base cursor position    
00003600  5041                     841      add.w   #8,D1           Move down rows
00003602  4E4F                     842      trap    #15             Set the cursor position with trap command 11
00003604                           843      
00003604  103C 000E                844      move.b  #14,D0          Move literal 14 for display message trap command
00003608  43F9 000050B3            845      lea     map_legend_msg,A1 Load the message into A1
0000360E  4E4F                     846      trap    #15             Display the loaded message
00003610                           847      
00003610                           848      * Display the player mark
00003610  103C 000B                849      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
00003614  323C 3201                850      move.w  #CSR_POS_MOVE,D1    Get the base cursor position    
00003618  0641 0009                851      add.w   #9,D1           Move down rows
0000361C  4E4F                     852      trap    #15             Set the cursor position with trap command 11
0000361E                           853      
0000361E  223C 0000FF00            854      move.l  #GREEN,D1       Load the colour green to D1
00003624  6100 09C2                855      bsr     change_font_colour  Change the font colour
00003628                           856      
00003628  103C 000E                857      move.b  #14,D0          Move literal 14 for display message trap command
0000362C  43F9 000050A7            858      lea     player_mark,A1  Load the message into A1
00003632  4E4F                     859      trap    #15             Display the loaded message
00003634  43F9 000050BF            860      lea     map_player_msg,A1 Load the message into A1
0000363A  4E4F                     861      trap    #15             Display the loaded message
0000363C                           862      
0000363C                           863      * Display the enemy mark
0000363C  103C 000B                864      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
00003640  323C 3201                865      move.w  #CSR_POS_MOVE,D1    Get the base cursor position    
00003644  0641 000A                866      add.w   #10,D1           Move down rows
00003648  4E4F                     867      trap    #15             Set the cursor position with trap command 11
0000364A                           868      
0000364A  223C 000000FF            869      move.l  #RED,D1         Load the colour red to D1
00003650  6100 0996                870      bsr     change_font_colour  Change the font colour
00003654                           871      
00003654  103C 000E                872      move.b  #14,D0          Move literal 14 for display message trap command
00003658  43F9 000050A9            873      lea     enemy_mark,A1   Load the message into A1
0000365E  4E4F                     874      trap    #15             Display the loaded message
00003660  43F9 000050C9            875      lea     map_enemy_msg,A1 Load the message into A1
00003666  4E4F                     876      trap    #15             Display the loaded message
00003668                           877      
00003668                           878      * Display the win point mark
00003668  103C 000B                879      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
0000366C  323C 3201                880      move.w  #CSR_POS_MOVE,D1    Get the base cursor position    
00003670  0641 000B                881      add.w   #11,D1          Move down rows
00003674  4E4F                     882      trap    #15             Set the cursor position with trap command 11
00003676                           883      
00003676  223C 00FF0000            884      move.l  #BLUE,D1       Load the colour blue to D1
0000367C  6100 096A                885      bsr     change_font_colour  Change the font colour
00003680                           886      
00003680  103C 000E                887      move.b  #14,D0          Move literal 14 for display message trap command
00003684  43F9 000050AB            888      lea     win_point_mark,A1   Load the message into A1
0000368A  4E4F                     889      trap    #15             Display the loaded message
0000368C  43F9 000050D2            890      lea     map_win_point_msg,A1 Load the message into A1
00003692  4E4F                     891      trap    #15             Display the loaded message
00003694                           892     
00003694                           893      * Display the shop mark
00003694  103C 000B                894      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
00003698  323C 3201                895      move.w  #CSR_POS_MOVE,D1    Get the base cursor position    
0000369C  0641 000C                896      add.w   #12,D1          Move down rows
000036A0  4E4F                     897      trap    #15             Set the cursor position with trap command 11
000036A2                           898      
000036A2  223C 00F000F0            899      move.l  #PURPLE,D1      Load the colour purple to D1
000036A8  6100 093E                900      bsr     change_font_colour  Change the font colour
000036AC                           901      
000036AC  103C 000E                902      move.b  #14,D0          Move literal 14 for display message trap command
000036B0  43F9 000050AD            903      lea     shop_mark,A1   Load the message into A1
000036B6  4E4F                     904      trap    #15             Display the loaded message
000036B8  43F9 000050DF            905      lea     map_shop_msg,A1 Load the message into A1
000036BE  4E4F                     906      trap    #15             Display the loaded message
000036C0                           907      
000036C0                           908      * Display the loot mark
000036C0  103C 000B                909      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
000036C4  323C 3201                910      move.w  #CSR_POS_MOVE,D1    Get the base cursor position    
000036C8  0641 000D                911      add.w   #13,D1          Move down rows
000036CC  4E4F                     912      trap    #15             Set the cursor position with trap command 11
000036CE                           913      
000036CE  223C 0000FFFF            914      move.l  #GOLD,D1       Load the colour gold to D1
000036D4  6100 0912                915      bsr     change_font_colour  Change the font colour
000036D8                           916      
000036D8  103C 000E                917      move.b  #14,D0          Move literal 14 for display message trap command
000036DC  43F9 000050AF            918      lea     loot_mark,A1    Load the message into A1
000036E2  4E4F                     919      trap    #15             Display the loaded message
000036E4  43F9 000050E7            920      lea     map_loot_msg,A1 Load the message into A1
000036EA  4E4F                     921      trap    #15             Display the loaded message
000036EC                           922      
000036EC                           923      * Display the door mark
000036EC  103C 000B                924      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
000036F0  323C 3201                925      move.w  #CSR_POS_MOVE,D1    Get the base cursor position    
000036F4  0641 000E                926      add.w   #14,D1          Move down rows
000036F8  4E4F                     927      trap    #15             Set the cursor position with trap command 11
000036FA                           928      
000036FA  223C 00507090            929      move.l  #BROWN,D1       Load the colour brown to D1
00003700  6100 08E6                930      bsr     change_font_colour  Change the font colour
00003704                           931      
00003704  103C 000E                932      move.b  #14,D0          Move literal 14 for display message trap command
00003708  43F9 000050B1            933      lea     door_mark,A1    Load the message into A1
0000370E  4E4F                     934      trap    #15             Display the loaded message
00003710  43F9 000050F4            935      lea     map_door_msg,A1 Load the message into A1
00003716  4E4F                     936      trap    #15             Display the loaded message
00003718                           937      
00003718  223C 00FFFFFF            938      move.l  #WHITE,D1       Load the colour brown to D1
0000371E  6100 08C8                939      bsr     change_font_colour  Change the font colour
00003722                           940      
00003722  4E75                     941      rts                     Return from subroutine
00003724                           942      
00003724                           943  draw_item_number:
00003724  103C 000E                944      move.b  #14,D0          Move literal 3 for display number trap command
00003728  43F9 0000557D            945      lea     bracket_open_msg,A1
0000372E  4E4F                     946      trap    #15
00003730                           947  
00003730  103C 0003                948      move.b  #3,D0           Move literal 3 for display number trap command
00003734  1214                     949      move.b  (A4),D1         Move the value in the register A4 to D1 to display
00003736  4E4F                     950      trap    #15             Display the number in D1
00003738                           951      
00003738  103C 000E                952      move.b  #14,D0          Move literal 3 for display number trap command
0000373C  43F9 0000557F            953      lea     bracket_close_msg,A1
00003742  4E4F                     954      trap    #15
00003744  4E75                     955      rts
00003746                           956      
00003746                           957  
00003746                           958  draw_battle_info:
00003746  323C 00FF                959      move.w  #255,D1         Move the word #255 to D1 to set the type of trap 11
0000374A  103C 000B                960      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
0000374E  4E4F                     961      trap    #15             Trap to get the cursor position in D1
00003750                           962      
00003750  3601                     963      move.w  D1,D3           Move the current cursor position to D3 for later
00003752                           964      
00003752                           965      * Move cursor to draw player info
00003752  323C 2001                966      move.w  #CSR_POS_BATTLE,D1           
00003756  4E4F                     967      trap    #15             Set the cursor position with trap command 11
00003758  4241                     968      clr     D1              Clear D1 of the cursor position
0000375A                           969      
0000375A  43F9 000054D9            970      lea     health_msg,A1   Load the hud message
00003760  103C 000E                971      move.b  #14,D0          Move literal 14 for display message trap command
00003764  4E4F                     972      trap    #15             Display the loaded message
00003766                           973      
00003766  1238 5FF0                974      move.b  PLAYER,D1       Move the player health value to D1 to display
0000376A  103C 0003                975      move.b  #3,D0           Move literal 3 for display number trap command
0000376E  4E4F                     976      trap    #15             Display the number in D1
00003770                           977      
00003770                           978      * Move the cursor to draw enemy info
00003770  103C 000B                979      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
00003774  323C 2001                980      move.w  #CSR_POS_BATTLE,D1
00003778  5241                     981      add.w   #1,D1
0000377A  4E4F                     982      trap    #15             Set the cursor position with trap command 11
0000377C  4241                     983      clr     D1              Clear D1 of the cursor position
0000377E                           984      
0000377E  43F9 000054E2            985      lea     enemy_health_msg,A1 Load the hud message
00003784  103C 000E                986      move.b  #14,D0              Move literal 14 for display message trap command
00003788  4E4F                     987      trap    #15                 Display the loaded message
0000378A                           988      
0000378A  1215                     989      move.b  (A5),D1         Move the enemy health value to D1 to display
0000378C  103C 0003                990      move.b  #3,D0           Move literal 3 for display number trap command
00003790  4E4F                     991      trap    #15             Display the number in D1
00003792                           992      
00003792                           993      * Move the cursor to draw potion information
00003792  103C 000B                994      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
00003796  323C 2001                995      move.w  #CSR_POS_BATTLE,D1
0000379A  5641                     996      add.w   #3,D1
0000379C  4E4F                     997      trap    #15             Set the cursor position with trap command 11
0000379E  4241                     998      clr     D1              Clear D1 of the cursor position
000037A0                           999      
000037A0  43F9 00005525           1000      lea     potions_msg,A1   Load the hud message
000037A6  103C 000E               1001      move.b  #14,D0          Move literal 14 for display message trap command
000037AA  4E4F                    1002      trap    #15             Display the loaded message
000037AC                          1003      
000037AC  49F8 5FF9               1004      lea     PLA_POTIONS,A4
000037B0  6100 FF72               1005      bsr     draw_item_number
000037B4                          1006      
000037B4                          1007      * Move the cursor back to its previous position
000037B4  3203                    1008      move.w  D3,D1           Move the previous cursor position back to D1
000037B6  103C 000B               1009      move.b  #11,D0          Move the byte #11 to D0 for trap command 11          
000037BA  4E4F                    1010      trap    #15             Set the cursor position with trap command 11
000037BC                          1011      
000037BC  4241                    1012      clr     D1              Clear D1 for later use
000037BE                          1013      
000037BE  4E75                    1014      rts
000037C0                          1015      
000037C0                          1016  draw_shop_info:
000037C0  323C 00FF               1017      move.w  #255,D1         Move the word #255 to D1 to set the type of trap 11
000037C4  103C 000B               1018      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
000037C8  4E4F                    1019      trap    #15             Trap to get the cursor position in D1
000037CA                          1020      
000037CA  3601                    1021      move.w  D1,D3           Move the current cursor position to D3 for later
000037CC                          1022      
000037CC                          1023      * Move cursor to draw shop info
000037CC  323C 1801               1024      move.w  #CSR_POS_SHOP_S,D1           
000037D0  4E4F                    1025      trap    #15             Set the cursor position with trap command 11
000037D2  4241                    1026      clr     D1              Clear D1 of the cursor position
000037D4                          1027      
000037D4  43F9 00005761           1028      lea     shop_stock_msg,A1   Load the hud message
000037DA  103C 000E               1029      move.b  #14,D0          Move literal 14 for display message trap command
000037DE  4E4F                    1030      trap    #15             Display the loaded message
000037E0                          1031      
000037E0                          1032      
000037E0                          1033      * Display the shop's potions
000037E0  103C 000B               1034      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
000037E4  323C 1801               1035      move.w  #CSR_POS_SHOP_S,D1         
000037E8  5241                    1036      add.w   #1,D1  
000037EA  4E4F                    1037      trap    #15             Set the cursor position with trap command 11
000037EC  4241                    1038      clr     D1              Clear D1 of the cursor position
000037EE                          1039      
000037EE  43F9 00005525           1040      lea     potions_msg,A1   Load the hud message
000037F4  103C 000E               1041      move.b  #14,D0          Move literal 14 for display message trap command
000037F8  4E4F                    1042      trap    #15             Display the loaded message
000037FA                          1043      
000037FA  544D                    1044      add.w   #S_POTIONS,A5
000037FC  49D5                    1045      lea     (A5),A4
000037FE  6100 FF24               1046      bsr     draw_item_number
00003802                          1047      
00003802                          1048      * Display the shop's keys
00003802  103C 000B               1049      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
00003806  323C 1801               1050      move.w  #CSR_POS_SHOP_S,D1         
0000380A  5441                    1051      add.w   #2,D1  
0000380C  4E4F                    1052      trap    #15             Set the cursor position with trap command 11
0000380E  4241                    1053      clr     D1              Clear D1 of the cursor position
00003810                          1054      
00003810  43F9 0000551E           1055      lea     key_msg,A1      Load the hud message
00003816  103C 000E               1056      move.b  #14,D0          Move literal 14 for display message trap command
0000381A  4E4F                    1057      trap    #15             Display the loaded message
0000381C                          1058      
0000381C  524D                    1059      add.w   #1,A5
0000381E  49D5                    1060      lea     (A5),A4
00003820  6100 FF02               1061      bsr     draw_item_number
00003824                          1062      
00003824                          1063      * Display the shop's torches
00003824  103C 000B               1064      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
00003828  323C 1801               1065      move.w  #CSR_POS_SHOP_S,D1         
0000382C  5641                    1066      add.w   #3,D1  
0000382E  4E4F                    1067      trap    #15             Set the cursor position with trap command 11
00003830  4241                    1068      clr     D1              Clear D1 of the cursor position
00003832                          1069      
00003832  43F9 0000552F           1070      lea     torches_msg,A1  Load the torches message
00003838  103C 000E               1071      move.b  #14,D0          Move literal 14 for display message trap command
0000383C  4E4F                    1072      trap    #15             Display the loaded message
0000383E                          1073      
0000383E  524D                    1074      add.w   #1,A5
00003840  49D5                    1075      lea     (A5),A4
00003842  6100 FEE0               1076      bsr     draw_item_number
00003846                          1077      
00003846                          1078      * Display the shop's damage upgrades
00003846  103C 000B               1079      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
0000384A  323C 1801               1080      move.w  #CSR_POS_SHOP_S,D1         
0000384E  5841                    1081      add.w   #4,D1  
00003850  4E4F                    1082      trap    #15             Set the cursor position with trap command 11
00003852  4241                    1083      clr     D1              Clear D1 of the cursor position
00003854                          1084      
00003854  43F9 00005538           1085      lea     damage_up_msg,A1 Load the damage upgrades message
0000385A  103C 000E               1086      move.b  #14,D0           Move literal 14 for display message trap command
0000385E  4E4F                    1087      trap    #15              Display the loaded message
00003860                          1088      
00003860  524D                    1089      add.w   #1,A5               Increment A5 to get to the damage upgrades
00003862  49D5                    1090      lea     (A5),A4             Load the memory address in A5 to A4
00003864  6100 FEBE               1091      bsr     draw_item_number    Draw the number of items
00003868  5B4D                    1092      sub.w   #S_DAMAGE_IN,A5     Bring the pointer back to the root of the shop
0000386A                          1093      
0000386A                          1094      * Display the inventory
0000386A  103C 000B               1095      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
0000386E  323C 3401               1096      move.w  #CSR_POS_SHOP_P,D1       
00003872  4E4F                    1097      trap    #15             Set the cursor position with trap command 11
00003874  4241                    1098      clr     D1              Clear D1 of the cursor position
00003876                          1099      
00003876  43F9 0000550B           1100      lea     inventory_msg,A1   Load the hud message
0000387C  103C 000E               1101      move.b  #14,D0          Move literal 14 for display message trap command
00003880  4E4F                    1102      trap    #15             Display the loaded message
00003882                          1103      
00003882                          1104      * Display the player gold
00003882  103C 000B               1105      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
00003886  323C 3401               1106      move.w  #CSR_POS_SHOP_P,D1         
0000388A  5241                    1107      add.w   #1,D1  
0000388C  4E4F                    1108      trap    #15             Set the cursor position with trap command 11
0000388E  4241                    1109      clr     D1              Clear D1 of the cursor position
00003890                          1110      
00003890  43F9 00005516           1111      lea     gold_msg,A1   Load the hud message
00003896  103C 000E               1112      move.b  #14,D0          Move literal 14 for display message trap command
0000389A  4E4F                    1113      trap    #15             Display the loaded message
0000389C                          1114      
0000389C  49F8 5FF8               1115      lea     PLA_GOLD,A4
000038A0  6100 FE82               1116      bsr     draw_item_number
000038A4                          1117      
000038A4                          1118      * Display the player potions
000038A4  103C 000B               1119      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
000038A8  323C 3401               1120      move.w  #CSR_POS_SHOP_P,D1         
000038AC  5441                    1121      add.w   #2,D1  
000038AE  4E4F                    1122      trap    #15             Set the cursor position with trap command 11
000038B0  4241                    1123      clr     D1              Clear D1 of the cursor position
000038B2                          1124      
000038B2  43F9 00005525           1125      lea     potions_msg,A1   Load the hud message
000038B8  103C 000E               1126      move.b  #14,D0          Move literal 14 for display message trap command
000038BC  4E4F                    1127      trap    #15             Display the loaded message
000038BE                          1128      
000038BE  49F8 5FF9               1129      lea     PLA_POTIONS,A4
000038C2  6100 FE60               1130      bsr     draw_item_number
000038C6                          1131      
000038C6                          1132      * Display the player keys
000038C6  103C 000B               1133      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
000038CA  323C 3401               1134      move.w  #CSR_POS_SHOP_P,D1         
000038CE  5641                    1135      add.w   #3,D1  
000038D0  4E4F                    1136      trap    #15             Set the cursor position with trap command 11
000038D2  4241                    1137      clr     D1              Clear D1 of the cursor position
000038D4                          1138      
000038D4  43F9 0000551E           1139      lea     key_msg,A1   Load the hud message
000038DA  103C 000E               1140      move.b  #14,D0          Move literal 14 for display message trap command
000038DE  4E4F                    1141      trap    #15             Display the loaded message
000038E0                          1142      
000038E0  49F8 5FFA               1143      lea     PLA_KEYS,A4
000038E4  6100 FE3E               1144      bsr     draw_item_number
000038E8                          1145      
000038E8                          1146      * Display the torch life
000038E8  103C 000B               1147      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
000038EC  323C 3401               1148      move.w  #CSR_POS_SHOP_P,D1
000038F0  5A41                    1149      add.w   #5,D1       
000038F2  4E4F                    1150      trap    #15             Set the cursor position with trap command 11
000038F4  4241                    1151      clr     D1              Clear D1 of the cursor position
000038F6                          1152      
000038F6  43F9 000054F1           1153      lea     torch_msg,A1   Load the hud message
000038FC  103C 000E               1154      move.b  #14,D0          Move literal 14 for display message trap command
00003900  4E4F                    1155      trap    #15             Display the loaded message
00003902                          1156      
00003902  1238 5FFB               1157      move.b  PLA_TORCH,D1    Move the player torch life value to D1 to display
00003906  103C 0003               1158      move.b  #3,D0           Move literal 3 for display number trap command
0000390A  4E4F                    1159      trap    #15             Display the number in D1
0000390C                          1160      
0000390C                          1161      * Display the player's damage level
0000390C  103C 000B               1162      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
00003910  323C 3401               1163      move.w  #CSR_POS_SHOP_P,D1
00003914  5C41                    1164      add.w   #6,D1       
00003916  4E4F                    1165      trap    #15             Set the cursor position with trap command 11
00003918  4241                    1166      clr     D1              Clear D1 of the cursor position
0000391A                          1167      
0000391A  43F9 000054FE           1168      lea     damage_lvl_msg,A1   Load the damage level message
00003920  103C 000E               1169      move.b  #14,D0              Move literal 14 for display message trap command
00003924  4E4F                    1170      trap    #15                 Display the loaded message
00003926                          1171      
00003926  1238 5FF1               1172      move.b  PLA_DAMAGE,D1   Move the player's damage level to D1 to display
0000392A  103C 0003               1173      move.b  #3,D0           Move literal 3 for display number trap command
0000392E  4E4F                    1174      trap    #15             Display the number in D1
00003930                          1175      
00003930                          1176      * Move the cursor back to its previous position
00003930  3203                    1177      move.w  D3,D1           Move the previous cursor position back to D1
00003932  103C 000B               1178      move.b  #11,D0          Move the byte #11 to D0 for trap command 11          
00003936  4E4F                    1179      trap    #15             Set the cursor position with trap command 11
00003938                          1180      
00003938  4241                    1181      clr     D1              Clear D1 for later use
0000393A                          1182      
0000393A  4E75                    1183      rts
0000393C                          1184  
0000393C                          1185  *-------------------------------------------------------
0000393C                          1186  *---Game Play (Quest Progress)--------------------------
0000393C                          1187  *------------------------------------------------------- 
0000393C                          1188  gameplay:
0000393C  6100 007A               1189      bsr     endl            Break to a new line
00003940  0C38 0000 5FF3          1190      CMP.B   #0,GAME_STATE   Check which stage the game is in
00003946  6700 F6D4               1191      BEQ     pick_role       Branch to the pick role subroutine
0000394A  0C38 0005 5FF3          1192      CMP.B   #5,GAME_STATE   Check which stage the game is in
00003950  6700 007C               1193      BEQ     movement        Branch to the movement subroutine
00003954  0C38 0006 5FF3          1194      CMP.B   #6,GAME_STATE   Check which stage the game is in
0000395A  6700 0270               1195      BEQ     combat          branch to the combat subroutine
0000395E  0C38 0007 5FF3          1196      CMP.B   #7,GAME_STATE   Check which stage the game is in
00003964  6700 0482               1197      BEQ     shop            branch to the shop subroutine
00003968  4E75                    1198      rts                     Return from 'gameplay' subroutine
0000396A                          1199  
0000396A                          1200  *-------------------------------------------------------
0000396A                          1201  *------------------Screen Decoration--------------------
0000396A                          1202  *-------------------------------------------------------
0000396A                          1203  decorate:
0000396A  163C 003C               1204      move.b  #60, D3
0000396E  6100 0048               1205      bsr     endl
00003972                          1206  out:
00003972  43F9 000049B0           1207      lea     loop_msg,A1
00003978  103C 000E               1208      move.b  #14,D0
0000397C  4E4F                    1209      trap    #15
0000397E  5343                    1210      sub     #1,D3   decrement loop counter
00003980  66F0                    1211      bne     out     repeat until D0=0
00003982  6100 0034               1212      bsr     endl
00003986  4E75                    1213      rts
00003988                          1214      
00003988                          1215  clear_screen: 
00003988  103C 000B               1216      move.b  #11,D0      clear screen
0000398C  323C FF00               1217      move.w  #$ff00,D1
00003990  4E4F                    1218      trap    #15
00003992  4E75                    1219      rts
00003994                          1220  *-------------------------------------------------------
00003994                          1221  *------------------------Replay-------------------------
00003994                          1222  *-------------------------------------------------------
00003994                          1223  replay:
00003994  43F9 00004AF4           1224      lea     replay_msg,A1   Load the Replay message
0000399A  103C 000E               1225      move.b  #14,D0          Move the number literal 14 to D0 for trap command
0000399E  4E4F                    1226      trap    #15             Display the loaded message
000039A0                          1227      
000039A0  1A3C 0002               1228      move.b  #2,D5           Move the number of input options to D5
000039A4  6100 F778               1229      bsr     input           Take user input
000039A8  1401                    1230      move.b  D1,D2           Move the input to D2 so it's not trampled by the clear screen
000039AA                          1231      
000039AA  61DC                    1232      bsr     clear_screen    Clear the screen
000039AC                          1233      
000039AC  B43C 0001               1234      cmp.b   #1,D2           Compare the user input against the two options
000039B0  6700 D64E               1235      beq     start           Restart if the user enters 1
000039B4  6100 F650               1236      bsr     end             Quit if the user enters 2
000039B8                          1237  
000039B8                          1238  endl:
000039B8  48E7 8040               1239      movem.l D0/A1,-(A7)
000039BC  303C 000E               1240      move    #14,D0
000039C0  43F9 00004752           1241      lea     crlf,A1
000039C6  4E4F                    1242      trap    #15
000039C8  4CDF 0201               1243      movem.l (A7)+,D0/A1
000039CC  4E75                    1244      rts
000039CE                          1245          
000039CE                          1246  *-------------------------------------------------------
000039CE                          1247  *----------------------Manage Movement------------------
000039CE                          1248  *-------------------------------------------------------
000039CE                          1249  movement:
000039CE  43F9 00004FC8           1250      lea     movement_msg,A1 Load the movement message
000039D4  103C 000E               1251      move.b  #14,D0          Move literal 14 for display message trap command
000039D8  4E4F                    1252      trap    #15             Display the loaded message
000039DA                          1253  
000039DA  7A05                    1254      move.l  #5,D5           Move the number 4 to D5 to tell the program how many options there are
000039DC                          1255      
000039DC  6100 F740               1256      bsr     input           branch to the input subroutine
000039E0  6100 000C               1257      bsr     wall_collisions Branch to check wall collisions and movement
000039E4                          1258      
000039E4  B23C 0005               1259      CMP.B   #5,D1           Check the input against taking a potion
000039E8  6700 05BE               1260      BEQ     take_potion     Branch to take a potion
000039EC                          1261      
000039EC  4E75                    1262      rts
000039EE                          1263  
000039EE                          1264  *-------------------------------------------------------
000039EE                          1265  *-------------------Check Wall Collisions---------------
000039EE                          1266  *-------------------------------------------------------
000039EE                          1267  wall_collisions:
000039EE                          1268      *Check collisions in the movement direction
000039EE  B23C 0001               1269      CMP.B   #1,D1       Check the movement direction
000039F2  6700 001C               1270      BEQ     move_north  Branch to Display the corridor type
000039F6                          1271      
000039F6  B23C 0002               1272      CMP.B   #2,D1       Check the movement direction
000039FA  6700 005E               1273      BEQ     move_south  Branch to Display the corridor type
000039FE                          1274      
000039FE  B23C 0003               1275      CMP.B   #3,D1       Check the movement direction
00003A02  6700 00A0               1276      BEQ     move_west   Branch to Display the corridor type
00003A06                          1277      
00003A06  B23C 0004               1278      CMP.B   #4,D1       Check the movement direction
00003A0A  6700 00E0               1279      BEQ     move_east   Branch to Display the corridor type
00003A0E                          1280      
00003A0E  4E75                    1281      rts
00003A10                          1282      
00003A10                          1283  move_north:
00003A10                          1284      *Check if the tile is any of the corridor types with a wall at the top
00003A10  0C16 0002               1285      CMP.B   #2,(A6)
00003A14  6700 011E               1286      BEQ     movement_blocked
00003A18  0C16 0003               1287      CMP.B   #3,(A6)
00003A1C  6700 0116               1288      BEQ     movement_blocked
00003A20  0C16 0006               1289      CMP.B   #6,(A6)
00003A24  6700 010E               1290      BEQ     movement_blocked
00003A28  0C16 0007               1291      CMP.B   #7,(A6)
00003A2C  6700 0106               1292      BEQ     movement_blocked
00003A30  0C16 000B               1293      CMP.B   #11,(A6)
00003A34  6700 00FE               1294      BEQ     movement_blocked
00003A38  0C16 000C               1295      CMP.B   #12,(A6)
00003A3C  6700 00F6               1296      BEQ     movement_blocked
00003A40  0C16 000D               1297      CMP.B   #13,(A6)
00003A44  6700 00EE               1298      BEQ     movement_blocked
00003A48                          1299      
00003A48  31CE 5FF6               1300      move.w  A6,PLA_P_POS        Move the player's previous location to a memory address for storage
00003A4C  9CFC 0010               1301      sub     #16,A6              Move the player north
00003A50                          1302      
00003A50  6100 00F4               1303      bsr     check_blocked       Check if the player is in a door
00003A54  6100 0584               1304      bsr     decrement_torch     Remove one from the player's torch life
00003A58                          1305  
00003A58  4E75                    1306      rts
00003A5A                          1307      
00003A5A                          1308  move_south:
00003A5A                          1309      *Check if the tile is any of the corridor types with a wall at the bottom
00003A5A  0C16 0002               1310      CMP.B   #2,(A6)
00003A5E  6700 00D4               1311      BEQ     movement_blocked
00003A62  0C16 0004               1312      CMP.B   #4,(A6)
00003A66  6700 00CC               1313      BEQ     movement_blocked
00003A6A  0C16 0005               1314      CMP.B   #5,(A6)
00003A6E  6700 00C4               1315      BEQ     movement_blocked
00003A72  0C16 0009               1316      CMP.B   #9,(A6)
00003A76  6700 00BC               1317      BEQ     movement_blocked
00003A7A  0C16 000B               1318      CMP.B   #11,(A6)
00003A7E  6700 00B4               1319      BEQ     movement_blocked
00003A82  0C16 000D               1320      CMP.B   #13,(A6)
00003A86  6700 00AC               1321      BEQ     movement_blocked
00003A8A  0C16 000E               1322      CMP.B   #14,(A6)
00003A8E  6700 00A4               1323      BEQ     movement_blocked
00003A92                          1324      
00003A92  31CE 5FF6               1325      move.w  A6,PLA_P_POS        Move the player's previous location to a memory address for storage
00003A96  DCFC 0010               1326      add     #16,A6              Move the player south
00003A9A                          1327      
00003A9A  6100 00AA               1328      bsr     check_blocked       Check if the player is in a door
00003A9E  6100 053A               1329      bsr     decrement_torch     Remove one from the player's torch life
00003AA2                          1330      
00003AA2  4E75                    1331      rts
00003AA4                          1332  
00003AA4                          1333  move_west:
00003AA4                          1334      *Check if the tile is any of the corridor types with a wall to the left
00003AA4  0C16 0001               1335      CMP.B   #1,(A6)
00003AA8  6700 008A               1336      BEQ     movement_blocked
00003AAC  0C16 0003               1337      CMP.B   #3,(A6)
00003AB0  6700 0082               1338      BEQ     movement_blocked
00003AB4  0C16 0004               1339      CMP.B   #4,(A6)
00003AB8  6700 007A               1340      BEQ     movement_blocked
00003ABC  0C16 0008               1341      CMP.B   #8,(A6)
00003AC0  6700 0072               1342      BEQ     movement_blocked
00003AC4  0C16 000B               1343      CMP.B   #11,(A6)
00003AC8  6700 006A               1344      BEQ     movement_blocked
00003ACC  0C16 000C               1345      CMP.B   #12,(A6)
00003AD0  6700 0062               1346      BEQ     movement_blocked
00003AD4  0C16 000E               1347      CMP.B   #14,(A6)
00003AD8  6700 005A               1348      BEQ     movement_blocked
00003ADC                          1349      
00003ADC  31CE 5FF6               1350      move.w  A6,PLA_P_POS        Move the player's previous location to a memory address for storage
00003AE0  534E                    1351      sub     #1,A6               Move the player west
00003AE2                          1352      
00003AE2  6100 0062               1353      bsr     check_blocked       Check if the player is in a door
00003AE6  6100 04F2               1354      bsr     decrement_torch     Remove one from the player's torch life
00003AEA                          1355      
00003AEA  4E75                    1356      rts
00003AEC                          1357      
00003AEC                          1358  move_east:
00003AEC                          1359      *Check if the tile is any of the corridor types with a wall to the right
00003AEC  0C16 0001               1360      CMP.B   #1,(A6)
00003AF0  6700 0042               1361      BEQ     movement_blocked
00003AF4  0C16 0005               1362      CMP.B   #5,(A6)
00003AF8  6700 003A               1363      BEQ     movement_blocked
00003AFC  0C16 0006               1364      CMP.B   #6,(A6)
00003B00  6700 0032               1365      BEQ     movement_blocked
00003B04  0C16 000A               1366      CMP.B   #10,(A6)
00003B08  6700 002A               1367      BEQ     movement_blocked
00003B0C  0C16 000C               1368      CMP.B   #12,(A6)
00003B10  6700 0022               1369      BEQ     movement_blocked
00003B14  0C16 000D               1370      CMP.B   #13,(A6)
00003B18  6700 001A               1371      BEQ     movement_blocked
00003B1C  0C16 000E               1372      CMP.B   #14,(A6)
00003B20  6700 0012               1373      BEQ     movement_blocked
00003B24                          1374      
00003B24  31CE 5FF6               1375      move.w  A6,PLA_P_POS        Move the player's previous location to a memory address for storage
00003B28  524E                    1376      add     #1,A6               Move the player east
00003B2A                          1377      
00003B2A  6100 001A               1378      bsr     check_blocked       Check if the player is in a door
00003B2E  6100 04AA               1379      bsr     decrement_torch     Remove one from the player's torch life
00003B32                          1380      
00003B32  4E75                    1381      rts
00003B34                          1382  
00003B34                          1383  movement_blocked:
00003B34  43F9 0000505A           1384      lea     movement_blocked_msg,A1 Load the message
00003B3A  103C 000E               1385      move.b  #14,D0                  Move the trap command to display a message
00003B3E  4E4F                    1386      trap    #15                     Display the movement blocked message
00003B40  6100 0432               1387      bsr     press_continue          Pause the game until a key is pressed
00003B44                          1388      
00003B44  4E75                    1389      rts                             Return from the subroutine
00003B46                          1390      
00003B46                          1391  check_blocked:
00003B46  4BF8 6FE0               1392      lea     FIRST_DOOR,A5   Load the memory address of the first door
00003B4A  1E3C 0000               1393      move.b  #0,D7           Move the starting door number to D5
00003B4E  6100 0004               1394      bsr     loop_thru_doors Loop through all doors
00003B52  4E75                    1395      rts                     Return from subroutine
00003B54                          1396      
00003B54                          1397  loop_thru_doors:
00003B54  6100 0010               1398      bsr     check_for_a_door  Check for a door
00003B58                          1399      
00003B58  BA3C 0001               1400      CMP.B   #DOOR_MAX,D5    Compare the door number with the maximum door number
00003B5C  6C00 0448               1401      BGE     return          Return from the loop if the current door number is greater than or equal to the max
00003B60                          1402      
00003B60  5207                    1403      add.b   #1,D7           Add to the current door number
00003B62  544D                    1404      add.w   #2,A5           Add to the current door pointer to move to the next door
00003B64  60EE                    1405      bra     loop_thru_doors Keep looping the doors
00003B66                          1406  
00003B66                          1407  check_for_a_door:
00003B66  3615                    1408      move.w  (A5),D3         Move the door coordinates into data register D3 for large-value comparisons
00003B68  BDC3                    1409      CMP.L   D3,A6           Check if the door is in the current position
00003B6A  6700 0004               1410      BEQ     in_a_door       Collide with the door if it is
00003B6E  4E75                    1411      rts                     Return if the door is not in the current position
00003B70                          1412      
00003B70                          1413  in_a_door:
00003B70  0C38 0000 5FFA          1414      CMP.B   #0,PLA_KEYS     Check if the player has keys left
00003B76  6F00 003C               1415      BLE     blocked_door    If the player has no keys they're blocked
00003B7A                          1416      
00003B7A  43F9 0000583E           1417      lea     locked_door_msg,A1  Load the locked door message
00003B80  103C 000E               1418      move.b  #14,D0          Move the number literal for trap command
00003B84  4E4F                    1419      trap    #15             Display the loaded message
00003B86                          1420      
00003B86  1A3C 0002               1421      move.b  #2,D5           Move the number of input options
00003B8A  6100 F592               1422      bsr     input           Take user input
00003B8E                          1423      
00003B8E  B23C 0001               1424      CMP.B   #1,D1           Compare the user input with num 1
00003B92  6700 0006               1425      BEQ     unlock_door     Unlock the door if the user chooses to
00003B96  6600 001C               1426      BNE     blocked_door    Branch to blocked door if the player doesn't unlock the door
00003B9A                          1427      
00003B9A                          1428  unlock_door:
00003B9A  43F9 000058B4           1429      lea     unlocked_door_msg,A1  Load the unlocked door message
00003BA0  103C 000E               1430      move.b  #14,D0          Move the number literal for trap command
00003BA4  4E4F                    1431      trap    #15             Display the loaded message
00003BA6                          1432      
00003BA6  3ABC 1000               1433      move.w  #OPEN_DOOR_POS,(A5) Move the door position out of the game for an open door
00003BAA  5338 5FFA               1434      sub.b   #1,PLA_KEYS     Remove a key from the player
00003BAE  6100 03C4               1435      bsr     press_continue  Wait for player input
00003BB2                          1436      
00003BB2  4E75                    1437      rts                     Return from subroutine
00003BB4                          1438  
00003BB4                          1439  blocked_door:
00003BB4  43F9 000058F1           1440      lea     blocked_door_msg,A1  Load the blocked door message
00003BBA  103C 000E               1441      move.b  #14,D0          Move the number literal for trap command
00003BBE  4E4F                    1442      trap    #15             Display the loaded message
00003BC0                          1443      
00003BC0  3638 5FF6               1444      move.w  PLA_P_POS,D3    Move the previous player position to D3
00003BC4  2C43                    1445      move.l  D3,A6           Move the player to their previous position
00003BC6                          1446      
00003BC6  6100 03AC               1447      bsr     press_continue  Wait for player input
00003BCA                          1448      
00003BCA  4E75                    1449      rts                     Return from subroutine
00003BCC                          1450      
00003BCC                          1451  *-------------------------------------------------------
00003BCC                          1452  *---------------------Manage Combat---------------------
00003BCC                          1453  *-------------------------------------------------------
00003BCC                          1454  combat:
00003BCC  6100 FDEA               1455      bsr endl                Break to a new line
00003BD0                          1456  
00003BD0  43F9 0000513B           1457      lea     combat_msg,A1   Load the combat message
00003BD6  103C 000E               1458      move.b  #14,D0          Move literal 14 for display message trap command
00003BDA  4E4F                    1459      trap    #15             Display the loaded message
00003BDC                          1460  
00003BDC  7A05                    1461      move.l  #5,D5           Move the number 4 to D5 to tell the program how many options there are
00003BDE  6100 F53E               1462      bsr     input           branch to the input subroutine
00003BE2  1801                    1463      move.b  D1,D4           Move the input to D4 for later use
00003BE4                          1464      
00003BE4  B23C 0001               1465      CMP.B   #1,D1           Compare input with number literal 1
00003BE8  6700 0024               1466      BEQ     block_counter   Branch to block/counter subroutine
00003BEC  B23C 0002               1467      CMP.B   #2,D1           Compare input with number literal 2
00003BF0  6700 0036               1468      BEQ     cast_magic      Branch to cast magic subroutine
00003BF4  B23C 0003               1469      CMP.B   #3,D1           Compare input with number literal 3
00003BF8  6700 0048               1470      BEQ     melee_attack    Branch to melee subroutine
00003BFC  B23C 0004               1471      CMP.B   #4,D1           Compare input with number literal 4
00003C00  6700 005A               1472      BEQ     try_run         Branch to try run subroutine
00003C04  B23C 0005               1473      CMP.B   #5,D1           Compare input with number literal 5
00003C08  6700 039E               1474      BEQ     take_potion     Branch to take potion subroutine
00003C0C                          1475      
00003C0C  4E75                    1476      rts
00003C0E                          1477      
00003C0E                          1478  block_counter:
00003C0E  6100 037C               1479      bsr     random_number       Get a random number 1-100
00003C12                          1480      
00003C12  B47C 0021               1481      CMP.W   #33,D2              Compare random with #33
00003C16  6F00 008E               1482      BLE     both_block          Enemy tries to block - attack failed
00003C1A  B47C 0042               1483      CMP.W   #66,D2              Compare random with #66
00003C1E  6F00 0118               1484      BLE     hit_by_magic        Enemy casts magic - player takes damage      
00003C22  6E00 00E4               1485      BGT     hit_against_melee   Enemy tried to lunge - enemy takes damage
00003C26                          1486      
00003C26  4E75                    1487      rts                         Return from subroutine
00003C28                          1488      
00003C28                          1489  cast_magic:
00003C28  6100 0362               1490      bsr     random_number       Get a random number 1-100
00003C2C                          1491  
00003C2C  B47C 0021               1492      CMP.W   #33,D2              Compare random with #33
00003C30  6F00 00AA               1493      BLE     hit_against_block    Enemy blocks - enemy takes damage
00003C34  B47C 0042               1494      CMP.W   #66,D2              Compare random with #66
00003C38  6F00 007E               1495      BLE     both_cast_magic     Enemy casts magic - attack fails     
00003C3C  6E00 0114               1496      BGT     hit_by_melee        Enemy lunges forward - player takes damage
00003C40                          1497      
00003C40  4E75                    1498      rts                         Return from subroutine
00003C42                          1499  
00003C42                          1500  melee_attack:
00003C42  6100 0348               1501      bsr     random_number       Get a random number 1-100
00003C46                          1502  
00003C46  B47C 0021               1503      CMP.W   #33,D2              Compare random with #33
00003C4A  6F00 00D2               1504      BLE     hit_by_counter      Enemy blocks and counters - player takes damage
00003C4E  B47C 0042               1505      CMP.W   #66,D2              Compare random with #66
00003C52  6F00 009E               1506      BLE     hit_against_magic   Enemy casts magic - player takes damage     
00003C56  6E00 0072               1507      BGT     both_melee          Enemy lunges forward - attack fails
00003C5A                          1508      
00003C5A  4E75                    1509      rts                         Return from subroutine
00003C5C                          1510  
00003C5C                          1511  try_run:
00003C5C  6100 032E               1512      bsr     random_number       Get a random number
00003C60                          1513      
00003C60  B47C 0028               1514      CMP.W   #40,D2              Compare the random number to 40
00003C64  6D00 0006               1515      BLT     escape_attack       If the random number is less than 40 the player escapes
00003C68  6C00 0020               1516      BGE     fail_escape         If the random number is more than 40 the player gets damaged
00003C6C                          1517      
00003C6C                          1518  escape_attack:
00003C6C  3638 5FF6               1519      move.w  PLA_P_POS,D3    Move the player's previous position to D3 to avoid treating it as a negative number
00003C70  2C43                    1520      move.l  D3,A6           Move the player to their position before entering the battle
00003C72  11FC 0005 5FF3          1521      move.b  #5,GAME_STATE   Switch game state
00003C78                          1522      
00003C78  43F9 0000519D           1523      lea     escape_msg,A1   Load escape message
00003C7E  103C 000E               1524      move.b  #14,D0          Move literal for trap command
00003C82  4E4F                    1525      trap    #15             Trap 15 to display messgae
00003C84                          1526      
00003C84  6100 02EE               1527      bsr     press_continue  Pause until the player presses to continue
00003C88                          1528      
00003C88  4E75                    1529      rts                     Return from subroutine
00003C8A                          1530      
00003C8A                          1531  fail_escape:
00003C8A  43F9 000051B8           1532      lea     fail_escape_msg,A1  Load fail escape message
00003C90  103C 000E               1533      move.b  #14,D0              Move literal for trap command
00003C94  4E4F                    1534      trap    #15                 Trap 15 to display message
00003C96                          1535      
00003C96  524D                    1536      add.w   #DAMAGE,A5           Move the enemy pointer to its damage value
00003C98  1A15                    1537      move.b  (A5),D5             Store the damage value in D5
00003C9A  534D                    1538      sub.w   #DAMAGE,A5           Move the enemy pointer back to the enemy health/root
00003C9C  9B38 5FF0               1539      sub.b   D5,PLAYER           Remove the enemy's damage from the player's health
00003CA0                          1540      
00003CA0  6100 02D2               1541      bsr     press_continue      Pause until the player presses to continue
00003CA4  4E75                    1542      rts
00003CA6                          1543      
00003CA6                          1544  both_block:
00003CA6  103C 000E               1545      move.b  #14,D0
00003CAA  43F9 000051F3           1546      lea     both_block_msg,A1
00003CB0  4E4F                    1547      trap    #15
00003CB2                          1548      
00003CB2  6100 02C0               1549      bsr     press_continue
00003CB6  4E75                    1550      rts
00003CB8                          1551      
00003CB8                          1552  both_cast_magic:
00003CB8  103C 000E               1553      move.b  #14,D0
00003CBC  43F9 00005218           1554      lea     both_cast_magic_msg,A1
00003CC2  4E4F                    1555      trap    #15
00003CC4                          1556      
00003CC4  6100 02AE               1557      bsr     press_continue
00003CC8  4E75                    1558      rts
00003CCA                          1559  
00003CCA                          1560  both_melee:
00003CCA  103C 000E               1561      move.b  #14,D0
00003CCE  43F9 0000526D           1562      lea     both_melee_msg,A1
00003CD4  4E4F                    1563      trap    #15  
00003CD6                          1564      
00003CD6  6100 029C               1565      bsr     press_continue
00003CDA  4E75                    1566      rts
00003CDC                          1567  
00003CDC                          1568  hit_against_block:
00003CDC  103C 000E               1569      move.b  #14,D0
00003CE0  43F9 000052B6           1570      lea     hit_against_block_msg,A1
00003CE6  4E4F                    1571      trap    #15  
00003CE8                          1572      
00003CE8  6100 0082               1573      bsr     damage_enemy    Deal damage to the enemy
00003CEC                          1574      
00003CEC  6100 0286               1575      bsr     press_continue
00003CF0  4E75                    1576      rts
00003CF2                          1577  
00003CF2                          1578  hit_against_magic:
00003CF2  103C 000E               1579      move.b  #14,D0
00003CF6  43F9 000052FE           1580      lea     hit_against_magic_msg,A1
00003CFC  4E4F                    1581      trap    #15
00003CFE                          1582      
00003CFE  6100 006C               1583      bsr     damage_enemy    Deal damage to the enemy
00003D02                          1584      
00003D02  6100 0270               1585      bsr     press_continue
00003D06  4E75                    1586      rts
00003D08                          1587  
00003D08                          1588  hit_against_melee:
00003D08  103C 000E               1589      move.b  #14,D0
00003D0C  43F9 00005362           1590      lea     hit_against_melee_msg,A1
00003D12  4E4F                    1591      trap    #15
00003D14                          1592      
00003D14  6100 0056               1593      bsr     damage_enemy    Deal damage to the enemy
00003D18                          1594      
00003D18  6100 025A               1595      bsr     press_continue
00003D1C  4E75                    1596      rts
00003D1E                          1597  
00003D1E                          1598  hit_by_counter:
00003D1E  103C 000E               1599      move.b  #14,D0
00003D22  43F9 000053B8           1600      lea     hit_by_counter_msg,A1
00003D28  4E4F                    1601      trap    #15  
00003D2A                          1602      
00003D2A  143C 0001               1603      move.b  #1,D2               Move the enemy attack type to D2
00003D2E  6100 0076               1604      bsr     damage_player       Deal damage to the player
00003D32                          1605      
00003D32  6100 0240               1606      bsr     press_continue
00003D36  4E75                    1607      rts
00003D38                          1608  
00003D38                          1609  hit_by_magic:
00003D38  103C 000E               1610      move.b  #14,D0
00003D3C  43F9 0000541B           1611      lea     hit_by_magic_msg,A1
00003D42  4E4F                    1612      trap    #15  
00003D44                          1613      
00003D44  143C 0002               1614      move.b  #2,D2               Move the enemy attack type to D2
00003D48  6100 005C               1615      bsr     damage_player       Deal damage to the player
00003D4C                          1616      
00003D4C  6100 0226               1617      bsr     press_continue
00003D50  4E75                    1618      rts
00003D52                          1619  
00003D52                          1620  hit_by_melee:
00003D52  103C 000E               1621      move.b  #14,D0
00003D56  43F9 0000548B           1622      lea     hit_by_melee_msg,A1
00003D5C  4E4F                    1623      trap    #15
00003D5E                          1624      
00003D5E  143C 0003               1625      move.b  #3,D2               Move the enemy attack type to D2
00003D62  6100 0042               1626      bsr     damage_player       Deal damage to the player
00003D66                          1627      
00003D66  6100 020C               1628      bsr     press_continue
00003D6A  4E75                    1629      rts
00003D6C                          1630      
00003D6C                          1631  damage_enemy:
00003D6C  1A38 5FF1               1632      move.b  PLA_DAMAGE,D5       Store the player damage value in D5
00003D70  B838 5FF2               1633      CMP.B   PLA_CLASS,D4        Check if the player attack type matches the player class
00003D74  6700 0006               1634      BEQ     double_damage_enemy Deal double damage to the enemy if attack type matches the class
00003D78  9B15                    1635      sub.b   D5,(A5)             Remove the player's damage from the enemy's health
00003D7A  4E75                    1636      rts                         Return from subroutine
00003D7C                          1637      
00003D7C                          1638  double_damage_enemy:
00003D7C  E34D                    1639      LSL     #1,D5               Double the player damage
00003D7E  9B15                    1640      sub.b   D5,(A5)             Remove double the player's damage from the enemy's health
00003D80                          1641      
00003D80  6100 FC36               1642      bsr     endl                Break to new line
00003D84  223C 00F000F0           1643      move.l  #PURPLE,D1          Load colour purple
00003D8A  6100 025C               1644      bsr     change_font_colour  Change the font colour
00003D8E                          1645      
00003D8E  43F9 0000581F           1646      lea     double_damage_msg,A1    Load the double damage message
00003D94  103C 000E               1647      move.b  #14,D0              Move number literal 14 to D0 for trap command
00003D98  4E4F                    1648      trap    #15
00003D9A                          1649      
00003D9A  223C 00FFFFFF           1650      move.l  #WHITE,D1           Load colour white
00003DA0  6100 0246               1651      bsr     change_font_colour  Change the font colour
00003DA4                          1652      
00003DA4  4E75                    1653      rts                         Return from subroutine
00003DA6                          1654  
00003DA6                          1655  damage_player:
00003DA6  524D                    1656      add.w   #DAMAGE,A5          Move the enemy pointer to its damage value
00003DA8  1A15                    1657      move.b  (A5),D5             Store the damage value in D5
00003DAA                          1658      
00003DAA  534D                    1659      sub.w   #DAMAGE,A5          Move the enemy pointer back to the enemy health/root
00003DAC  544D                    1660      add.w   #CLASS,A5           Move the enemy pointer to its class value
00003DAE                          1661      
00003DAE  B415                    1662      CMP.B   (A5),D2             Compare the enemy attack type to its class
00003DB0  554D                    1663      sub.w   #CLASS,A5           Move the enemy pointer back to the enemy health/root
00003DB2  6700 0008               1664      BEQ     double_damage_player    Deal double damage to the player
00003DB6                          1665      
00003DB6  9B38 5FF0               1666      sub.b   D5,PLAYER           Remove the enemy's damage from the player's health
00003DBA                          1667  
00003DBA  4E75                    1668      rts                         Return from subroutine
00003DBC                          1669      
00003DBC                          1670  double_damage_player:
00003DBC  E34D                    1671      LSL     #1,D5               Double the enemy damage
00003DBE  9B38 5FF0               1672      sub.b   D5,PLAYER           Remove double the enemy's damage from the player's health
00003DC2                          1673      
00003DC2  6100 FBF4               1674      bsr     endl                Break to new line
00003DC6  223C 000000FF           1675      move.l  #RED,D1          Load colour purple
00003DCC  6100 021A               1676      bsr     change_font_colour  Change the font colour
00003DD0                          1677      
00003DD0  43F9 0000581F           1678      lea     double_damage_msg,A1    Load the double damage message
00003DD6  103C 000E               1679      move.b  #14,D0              Move number literal 14 to D0 for trap command
00003DDA  4E4F                    1680      trap    #15
00003DDC                          1681      
00003DDC  223C 00FFFFFF           1682      move.l  #WHITE,D1           Load colour white
00003DE2  6100 0204               1683      bsr     change_font_colour  Change the font colour
00003DE6                          1684      
00003DE6  4E75                    1685      rts                         Return from subroutine
00003DE8                          1686  
00003DE8                          1687  *-------------------------------------------------------
00003DE8                          1688  *----------------------Shop State-----------------------
00003DE8                          1689  *-------------------------------------------------------
00003DE8                          1690  shop:
00003DE8  43F9 000056B9           1691      lea     shop_msg,A1     Load the shop message
00003DEE  103C 000E               1692      move.b  #14,D0          Move the number literal 14 to D0 for trap command
00003DF2  4E4F                    1693      trap    #15             Display the loaded message
00003DF4                          1694  
00003DF4  7A05                    1695      move.l  #5,D5           Move the number 4 to D5 to tell the program how many options there are
00003DF6  6100 F326               1696      bsr     input           branch to the input subroutine
00003DFA                          1697      
00003DFA  B23C 0001               1698      CMP.B   #1,D1           Compare input with number literal 1
00003DFE  6700 0024               1699      BEQ     buy_potion      Branch to buy potion subroutine
00003E02  B23C 0002               1700      CMP.B   #2,D1           Compare input with number literal 2
00003E06  6700 004E               1701      BEQ     buy_key         Branch to buy key subroutine
00003E0A  B23C 0003               1702      CMP.B   #3,D1           Compare input with number literal 3
00003E0E  6700 007A               1703      BEQ     buy_torch       Branch to buy torch subroutine
00003E12  B23C 0004               1704      CMP.B   #4,D1           Compare input with number literal 4
00003E16  6700 00A8               1705      BEQ     upgrade_dmg     Branch to buy damage upgrade subroutine
00003E1A  B23C 0005               1706      CMP.B   #5,D1           Compare input with number literal 5
00003E1E  6700 00D4               1707      BEQ     leave_shop      Branch to leave shop subroutine
00003E22                          1708  
00003E22  4E75                    1709      rts                     Return from subroutine
00003E24                          1710      
00003E24                          1711  buy_potion:
00003E24  0C38 0005 5FF8          1712      CMP.B   #POTION_PRICE,PLA_GOLD  Check if the player has money for a potion
00003E2A  6D00 00E6               1713      BLT     no_money                If not enough money branch to no money subroutine
00003E2E                          1714      
00003E2E  544D                    1715      add.w   #S_POTIONS,A5           Move the shop pointer to the potions
00003E30  0C15 0000               1716      CMP.B   #0,(A5)                 Check that the shop still has potions left
00003E34  6F00 00EE               1717      BLE     no_shop_potions         If no potions left branch to no shop potions subroutine
00003E38                          1718      
00003E38  5B38 5FF8               1719      sub.b   #POTION_PRICE,PLA_GOLD  Remove the potion price from the player's gold
00003E3C  5315                    1720      sub.b   #1,(A5)                 Remove one potion from the shop
00003E3E  5238 5FF9               1721      add.b   #1,PLA_POTIONS          Add one potion to the player's inventory
00003E42                          1722      
00003E42  554D                    1723      sub.w   #S_POTIONS,A5           Move the shop pointer back to root
00003E44                          1724      
00003E44  43F9 0000574B           1725      lea     buy_item_msg,A1         Load the buy item message into A1
00003E4A  103C 000E               1726      move.b  #14,D0                  Move the number literal 14 to D0 for trap command
00003E4E  4E4F                    1727      trap    #15                     Display the loaded message
00003E50                          1728      
00003E50  6100 0122               1729      bsr     press_continue          Pause for user input
00003E54                          1730      
00003E54  4E75                    1731      rts                             Return from subroutine
00003E56                          1732      
00003E56                          1733  buy_key:
00003E56  0C38 000F 5FF8          1734      CMP.B   #KEY_PRICE,PLA_GOLD     Check if the player has money for a key
00003E5C  6D00 00B4               1735      BLT     no_money                If not enough money branch to no money subroutine
00003E60                          1736      
00003E60  564D                    1737      add.w   #S_KEYS,A5              Move the shop pointer to the keys
00003E62  0C15 0000               1738      CMP.B   #0,(A5)                 Check that the shop still has keys left
00003E66  6F00 00D0               1739      BLE     no_shop_keys            If no keys left branch to no shop keys subroutine
00003E6A                          1740      
00003E6A  0438 000F 5FF8          1741      sub.b   #KEY_PRICE,PLA_GOLD     Remove the key price from the player's gold
00003E70  5315                    1742      sub.b   #1,(A5)                 Remove one key from the shop
00003E72  5238 5FFA               1743      add.b   #1,PLA_KEYS             Add one key to the player's inventory
00003E76                          1744      
00003E76  574D                    1745      sub.w   #S_KEYS,A5              Move the shop pointer back to root
00003E78                          1746  
00003E78  43F9 0000574B           1747      lea     buy_item_msg,A1         Load the buy item message into A1
00003E7E  103C 000E               1748      move.b  #14,D0                  Move the number literal 14 to D0 for trap command
00003E82  4E4F                    1749      trap    #15                     Display the loaded message
00003E84                          1750      
00003E84  6100 00EE               1751      bsr     press_continue          Pause for user input
00003E88                          1752      
00003E88  4E75                    1753      rts                             Return from subroutine
00003E8A                          1754      
00003E8A                          1755  buy_torch:
00003E8A  0C38 000A 5FF8          1756      CMP.B   #TORCH_PRICE,PLA_GOLD   Check if the player has money for a torch
00003E90  6D00 0080               1757      BLT     no_money                If not enough money branch to no money subroutine
00003E94                          1758      
00003E94  584D                    1759      add.w   #S_TORCHES,A5           Move the shop pointer to the torches
00003E96  0C15 0000               1760      CMP.B   #0,(A5)                 Check that the shop still has torches left
00003E9A  6F00 00B0               1761      BLE     no_shop_torches         If no torches left branch to no shop torches subroutine
00003E9E                          1762      
00003E9E  0438 000A 5FF8          1763      sub.b   #TORCH_PRICE,PLA_GOLD   Remove the torch price from the player's gold
00003EA4  5315                    1764      sub.b   #1,(A5)                 Remove one torch from the shop
00003EA6  0638 000F 5FFB          1765      add.b   #LIFE_PER_TORCH,PLA_TORCH           Add ten to the player's torches life
00003EAC                          1766      
00003EAC  594D                    1767      sub.w   #S_TORCHES,A5           Move the shop pointer back to root
00003EAE                          1768  
00003EAE  43F9 0000574B           1769      lea     buy_item_msg,A1         Load the buy item message into A1
00003EB4  103C 000E               1770      move.b  #14,D0                  Move the number literal 14 to D0 for trap command
00003EB8  4E4F                    1771      trap    #15                     Display the loaded message
00003EBA                          1772      
00003EBA  6100 00B8               1773      bsr     press_continue          Pause for user input
00003EBE                          1774      
00003EBE  4E75                    1775      rts                             Return from subroutine
00003EC0                          1776      
00003EC0                          1777  upgrade_dmg:
00003EC0  0C38 0014 5FF8          1778      CMP.B   #DAMAGE_UP_PRICE,PLA_GOLD   Check if the player has money for a damage upgrade
00003EC6  6D00 004A               1779      BLT     no_money                    If not enough money branch to no money subroutine
00003ECA                          1780      
00003ECA  5A4D                    1781      add.w   #S_DAMAGE_IN,A5         Move the shop pointer to the damage upgrades
00003ECC  0C15 0000               1782      CMP.B   #0,(A5)                 Check that the shop still has damage upgrades left
00003ED0  6F00 008E               1783      BLE     no_shop_damage_up       If no damage upgrades left branch to no shop torches subroutine
00003ED4                          1784      
00003ED4  0438 0014 5FF8          1785      sub.b   #DAMAGE_UP_PRICE,PLA_GOLD   Remove the damage upgrade price from the player's gold
00003EDA  5315                    1786      sub.b   #1,(A5)                     Remove one damage upgrade from the shop
00003EDC  5238 5FF1               1787      add.b   #1,PLA_DAMAGE               Add one to the player's damage value
00003EE0                          1788      
00003EE0  5B4D                    1789      sub.w   #S_DAMAGE_IN,A5         Move the shop pointer back to root
00003EE2                          1790  
00003EE2  43F9 0000574B           1791      lea     buy_item_msg,A1         Load the buy item message into A1
00003EE8  103C 000E               1792      move.b  #14,D0                  Move the number literal 14 to D0 for trap command
00003EEC  4E4F                    1793      trap    #15                     Display the loaded message
00003EEE                          1794      
00003EEE  6100 0084               1795      bsr     press_continue          Pause for user input
00003EF2                          1796      
00003EF2  4E75                    1797      rts                             Return from subroutine
00003EF4                          1798      
00003EF4                          1799  leave_shop:
00003EF4  3638 5FF6               1800      move.w  PLA_P_POS,D3        Move the player's previous position to D3 to avoid treating it as a negative number
00003EF8  2C43                    1801      move.l  D3,A6               Move the player to their position before entering the shop
00003EFA  11FC 0005 5FF3          1802      move.b  #5,GAME_STATE       Switch game state to movement
00003F00                          1803      
00003F00  43F9 00005725           1804      lea     leave_shop_msg,A1   Load escape message
00003F06  103C 000E               1805      move.b  #14,D0              Move literal for trap command
00003F0A  4E4F                    1806      trap    #15                 Trap 15 to display messgae
00003F0C                          1807      
00003F0C  6100 0066               1808      bsr     press_continue      Pause until the player presses to continue
00003F10  4E75                    1809      rts                         Return from subroutine
00003F12                          1810      
00003F12                          1811  no_money:
00003F12  43F9 00005779           1812      lea     no_money_msg,A1 Load the no money message
00003F18  103C 000E               1813      move.b  #14,D0          Move the number literal 14 to D0 for trap command
00003F1C  4E4F                    1814      trap    #15             Display the loaded message
00003F1E                          1815      
00003F1E  6100 0054               1816      bsr     press_continue  Wait for player input
00003F22  4E75                    1817      rts                     Return from subroutine
00003F24                          1818      
00003F24                          1819  no_shop_potions:
00003F24  43F9 00005799           1820      lea     no_item_msg,A1  Load the no money message
00003F2A  103C 000E               1821      move.b  #14,D0          Move the number literal 14 to D0 for trap command
00003F2E  4E4F                    1822      trap    #15             Display the loaded message
00003F30  554D                    1823      sub.w   #S_POTIONS,A5   Move the shop pointer back to root
00003F32                          1824      
00003F32  6100 0040               1825      bsr     press_continue  Wait for player input
00003F36  4E75                    1826      rts                     Return from subroutine
00003F38                          1827      
00003F38                          1828  no_shop_keys:
00003F38  43F9 00005799           1829      lea     no_item_msg,A1  Load the no money message
00003F3E  103C 000E               1830      move.b  #14,D0          Move the number literal 14 to D0 for trap command
00003F42  4E4F                    1831      trap    #15             Display the loaded message
00003F44  574D                    1832      sub.w   #S_KEYS,A5      Move the shop pointer back to root
00003F46                          1833      
00003F46  6100 002C               1834      bsr     press_continue  Wait for player input
00003F4A  4E75                    1835      rts                     Return from subroutine
00003F4C                          1836      
00003F4C                          1837  no_shop_torches:
00003F4C  43F9 00005799           1838      lea     no_item_msg,A1  Load the no money message
00003F52  103C 000E               1839      move.b  #14,D0          Move the number literal 14 to D0 for trap command
00003F56  4E4F                    1840      trap    #15             Display the loaded message
00003F58  594D                    1841      sub.w   #S_TORCHES,A5   Move the shop pointer back to root
00003F5A                          1842      
00003F5A  6100 0018               1843      bsr     press_continue  Wait for player input
00003F5E  4E75                    1844      rts                     Return from subroutine
00003F60                          1845  
00003F60                          1846  no_shop_damage_up:
00003F60  43F9 00005799           1847      lea     no_item_msg,A1  Load the no money message
00003F66  103C 000E               1848      move.b  #14,D0          Move the number literal 14 to D0 for trap command
00003F6A  4E4F                    1849      trap    #15             Display the loaded message
00003F6C  5B4D                    1850      sub.w   #S_DAMAGE_IN,A5 Move the shop pointer back to root
00003F6E                          1851      
00003F6E  6100 0004               1852      bsr     press_continue  Wait for player input
00003F72  4E75                    1853      rts                     Return from subroutine
00003F74                          1854  
00003F74                          1855  *-------------------------------------------------------
00003F74                          1856  *-------------------Misc Subroutines--------------------
00003F74                          1857  *-------------------------------------------------------
00003F74                          1858  press_continue:
00003F74  6100 FA42               1859      bsr     endl
00003F78                          1860  
00003F78  43F9 00005075           1861      lea     continue_msg,A1 Load message into A1
00003F7E  103C 000E               1862      move.b  #14,D0          Move the trap command to display a message
00003F82  4E4F                    1863      trap    #15             display the "press any ket to continue" text
00003F84                          1864      
00003F84  103C 0004               1865      move.b  #4,D0           Move the trap command to take input
00003F88  4E4F                    1866      trap    #15             take input to freeze the game
00003F8A  4E75                    1867      rts                     Return from the 'press continue' subroutine
00003F8C                          1868      
00003F8C                          1869  random_number:              *Psuedo random number generator, courtesy of Pdraig
00003F8C  103C 0008               1870      move.b  #8,D0
00003F90  4E4F                    1871      trap    #15
00003F92  C2BC 005FFFFF           1872      and.l   #$5FFFFF,d1     prevent overflow in divu
00003F98  82FC 0064               1873      divu    #100,D1         time count / 100
00003F9C  4841                    1874      swap    D1              swap upper and lower words of D1 to put remainder in low word
00003F9E  5241                    1875      addq.w  #1,D1           d1.w contains number from 1 to 100
00003FA0  3401                    1876      move    D1,D2           d2 = d1
00003FA2  4281                    1877      clr.l   D1
00003FA4                          1878      
00003FA4  4E75                    1879      rts                     Returns from random generation subroutine
00003FA6                          1880      
00003FA6                          1881  return:   *Subroutine to branch to to break out of a subroutine when a condition is met
00003FA6  4E75                    1882      rts
00003FA8                          1883      
00003FA8                          1884  take_potion:
00003FA8  0C38 0000 5FF9          1885      CMP.B   #0,PLA_POTIONS      Check if the player has potions to drink
00003FAE  6F00 001A               1886      BLE     no_potions          If the potions are zero or below branch to no_potions
00003FB2                          1887      
00003FB2  5638 5FF0               1888      add.b   #3,PLAYER           Add 3 to the player's health
00003FB6  5338 5FF9               1889      sub.b   #1,PLA_POTIONS      Remove one potion
00003FBA                          1890      
00003FBA  43F9 00005633           1891      lea     take_potion_msg,A1  Load the take potion message
00003FC0  103C 000E               1892      move.b  #14,D0              Move the number literal 14 to D0 for trap command
00003FC4  4E4F                    1893      trap    #15                 Display the loaded message
00003FC6                          1894      
00003FC6  61AC                    1895      bsr     press_continue      Wait for player input
00003FC8                          1896      
00003FC8  4E75                    1897      rts                         Return from subroutine
00003FCA                          1898  
00003FCA                          1899  no_potions:
00003FCA  43F9 0000566D           1900      lea     no_potions_msg,A1   Load the no potions message
00003FD0  103C 000E               1901      move.b  #14,D0              Move the number literal 14 to D0 for trap command
00003FD4  4E4F                    1902      trap    #15                 Display the loaded message
00003FD6                          1903      
00003FD6  619C                    1904      bsr     press_continue      Wait for player input
00003FD8                          1905      
00003FD8  4E75                    1906      rts                         Return from subroutine
00003FDA                          1907      
00003FDA                          1908  decrement_torch:
00003FDA  0C38 0000 5FFB          1909      CMP.B   #0,PLA_TORCH    Compare the torch life to 0
00003FE0  6FC4                    1910      BLE     return          If it's less than or equalt to zero, return
00003FE2  5338 5FFB               1911      sub.b   #1,PLA_TORCH    Decrement by one if it's above zero
00003FE6  4E75                    1912      rts                     Return from subroutine
00003FE8                          1913      
00003FE8                          1914  change_font_colour:        * Changes the font colour to the colour loaded in D1
00003FE8  103C 0015               1915      move.b  #21,D0      Move #21 to D0 for trap command 21
00003FEC  243C 01090000           1916      move.l  #FONT,D2    Move the font to D2
00003FF2  4E4F                    1917      trap    #15         Set the colour
00003FF4  4281                    1918      clr.l   D1          Clear D1 for later use
00003FF6  4282                    1919      clr.l   D2          Clear D2 for later use
00003FF8  4E75                    1920      rts                 Return from subroutine
00003FFA                          1921      
00003FFA                          1922  get_cursor_pos:
00003FFA  323C 00FF               1923      move.w  #255,D1         Move the word #255 to D1 to set the type of trap 11
00003FFE  103C 000B               1924      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
00004002  4E4F                    1925      trap    #15             Trap to get the cursor position in D1
00004004                          1926      
00004004  2601                    1927      move.l  D1,D3           Move the value in D1 to D3 for storage
00004006  4E75                    1928      rts
00004008                          1929      
00004008                          1930  *-------------------------------------------------------
00004008                          1931  *----------------------Draw loop------------------------
00004008                          1932  *-------------------------------------------------------
00004008                          1933  draw_loop:
00004008  45F9 00008080           1934      lea     MAP_START_POINT,A2     Load starting memory location into A7
0000400E  1C3C 0000               1935      move.b  #0,D6           Data register used for rows
00004012  1E3C 0000               1936      move.b  #0,D7           Data register used for columns
00004016  7200                    1937      move.l  #0,D1           Clear the D1 data register
00004018                          1938      
00004018  6100 0004               1939      bsr     loop_rows       Loop for every row
0000401C  4E75                    1940      rts
0000401E                          1941      
0000401E                          1942  loop_rows:
0000401E  BC7C 000F               1943      CMP     #MAP_LENGTH,D6          Check the rows don't go out of bounds
00004022  6E82                    1944      BGT     return          If the rows are greater than 22 end the loop
00004024                          1945      
00004024  1E3C 0000               1946      move.b  #0,D7           Reset to column 0
00004028  6100 000A               1947      bsr     loop_columns    Loop for every column
0000402C                          1948      
0000402C  5206                    1949      add.b   #1,D6           Add to the rows
0000402E                          1950      
0000402E  6100 F988               1951      bsr     endl            Break to the next line
00004032  60EA                    1952      bra     loop_rows       Loop through the rows again
00004034                          1953      
00004034                          1954  loop_columns:
00004034  BE3C 000F               1955      CMP.B   #15,D7              Check the rows don't go out of bounds
00004038  6E00 FF6C               1956      BGT     return              If the rows are greater than 22 end the loop
0000403C                          1957      
0000403C  6100 0020               1958      bsr     draw_tile           Draw the current tile
00004040  6100 00C6               1959      bsr     check_for_loot_piles Draw the loot piles if there is one on the current tile
00004044  6100 0140               1960      bsr     check_for_player    Draw the player in the current tile if they're there
00004048  6100 0184               1961      bsr     check_for_enemies   Draw an enemy in the current tile if they is one there
0000404C  6100 02C0               1962      bsr     check_for_win_point Draw the win point in the current tile if it's there
00004050  6100 01F2               1963      bsr     check_for_shops     Draw a shop in the current tile if there is one
00004054  6100 025A               1964      bsr     check_for_doors     Draw a door in the current ile if there is one
00004058                          1965      
00004058  5207                    1966      add.b   #1,D7               Add to the column count
0000405A  524A                    1967      add     #1,A2               Move to the next memory location
0000405C  60D6                    1968      bra     loop_columns        Loop the columns again
0000405E                          1969      
0000405E                          1970  *-------------------------------------------------------
0000405E                          1971  *----------------------Draw tile------------------------
0000405E                          1972  *-------------------------------------------------------
0000405E                          1973  *Draws the tile at the address in the address register A2
0000405E                          1974  draw_tile:
0000405E  0C12 00FF               1975      CMP.B   #255,(A2)           Check if the value is undifined
00004062  6700 005E               1976      BEQ     draw_blocked_tile   Draw the blank tile
00004066                          1977      
00004066  0C12 0001               1978      CMP.B   #1,(A2)
0000406A  6700 0064               1979      BEQ     draw_both_tile
0000406E  0C12 0003               1980      CMP.B   #3,(A2)
00004072  6700 006A               1981      BEQ     draw_left_tile
00004076  0C12 0004               1982      CMP.B   #4,(A2)
0000407A  6700 0062               1983      BEQ     draw_left_tile
0000407E  0C12 0005               1984      CMP.B   #5,(A2)
00004082  6700 0068               1985      BEQ     draw_right_tile
00004086  0C12 0006               1986      CMP.B   #6,(A2)
0000408A  6700 0060               1987      BEQ     draw_right_tile
0000408E  0C12 0008               1988      CMP.B   #8,(A2)
00004092  6700 004A               1989      BEQ     draw_left_tile
00004096  0C12 000A               1990      CMP.B   #10,(A2)
0000409A  6700 0050               1991      BEQ     draw_right_tile
0000409E  0C12 000B               1992      CMP.B   #11,(A2)
000040A2  6700 003A               1993      BEQ     draw_left_tile
000040A6  0C12 000C               1994      CMP.B   #12,(A2)
000040AA  6700 0024               1995      BEQ     draw_both_tile
000040AE  0C12 000D               1996      CMP.B   #13,(A2)
000040B2  6700 0038               1997      BEQ     draw_right_tile
000040B6  0C12 000E               1998      CMP.B   #14,(A2)
000040BA  6700 0014               1999      BEQ     draw_both_tile
000040BE                          2000      
000040BE  6000 003A               2001      BRA     draw_blank_tile     Draw the blank tile
000040C2                          2002      
000040C2                          2003  draw_blocked_tile:
000040C2  43F9 000050A3           2004      lea     blocked_tile,A1
000040C8  103C 000E               2005      move.b  #14,D0
000040CC  4E4F                    2006      trap    #15
000040CE  4E75                    2007      rts
000040D0                          2008      
000040D0                          2009  draw_both_tile:
000040D0  43F9 00005097           2010      lea     both_tile,A1
000040D6  103C 000E               2011      move.b  #14,D0
000040DA  4E4F                    2012      trap    #15
000040DC  4E75                    2013      rts
000040DE                          2014      
000040DE                          2015  draw_left_tile:
000040DE  43F9 0000509B           2016      lea     left_tile,A1
000040E4  103C 000E               2017      move.b  #14,D0
000040E8  4E4F                    2018      trap    #15
000040EA  4E75                    2019      rts
000040EC                          2020      
000040EC                          2021  draw_right_tile:
000040EC  43F9 0000509F           2022      lea     right_tile,A1
000040F2  103C 000E               2023      move.b  #14,D0
000040F6  4E4F                    2024      trap    #15
000040F8  4E75                    2025      rts
000040FA                          2026      
000040FA                          2027  draw_blank_tile:
000040FA  43F9 00005093           2028      lea     blank_tile,A1
00004100  103C 000E               2029      move.b  #14,D0
00004104  4E4F                    2030      trap    #15
00004106  4E75                    2031      rts
00004108                          2032  
00004108                          2033  *----------------------Draw Loot------------------------
00004108                          2034  check_for_loot_piles:
00004108  4BF8 7000               2035      lea     FIRST_LOOT,A5   Load the memory address of the first loot pile
0000410C  1A3C 0000               2036      move.b  #0,D5           Move the starting loot number to D5
00004110  6100 0004               2037      bsr     loop_loot_piles Loop through all loot piles
00004114  4E75                    2038      rts                     Return from subroutine
00004116                          2039      
00004116                          2040  loop_loot_piles:
00004116  6100 0014               2041      bsr     check_for_loot  Check for a loot pile
0000411A                          2042      
0000411A  BA3C 0002               2043      CMP.B   #ENEMY_MAX,D5   Compare the enemy number with the maximum loot number
0000411E  6C00 FE86               2044      BGE     return          Return from the loop if the current loot number is greater than or equal to the max
00004122                          2045      
00004122  5205                    2046      add.b   #1,D5           Add to the current loot number
00004124  DAFC 0010               2047      add.w   #16,A5          Add to the current loot pointer to move to the next loot pile
00004128  5D4D                    2048      sub.w   #L_ACTIVE,A5    Move to the root
0000412A  60EA                    2049      bra     loop_loot_piles Keep looping the loot piles
0000412C                          2050      
0000412C                          2051  check_for_loot:
0000412C  5C4D                    2052      add.w   #L_ACTIVE,A5    Move to the active state
0000412E  0C15 0000               2053      CMP.B   #0,(A5)         Return if the loot is not active
00004132  6700 FE72               2054      BEQ     return
00004136  5D4D                    2055      sub.w   #L_ACTIVE,A5    Move to the root
00004138                          2056  
00004138  3615                    2057      move.w  (A5),D3         Move the enemy coordinates into data register D3 for large-value comparisons
0000413A  B5C3                    2058      CMP.L   D3,A2           Check if the enemy is in the current position
0000413C  6700 0006               2059      BEQ     draw_loot       Draw the enemy if it is
00004140  5C4D                    2060      add.w   #L_ACTIVE,A5    Move to the active state
00004142  4E75                    2061      rts                     Return if the enemy is not in the current position
00004144                          2062      
00004144                          2063  draw_loot:
00004144  5C4D                    2064      add.w   #L_ACTIVE,A5    Move to the active state
00004146                          2065  
00004146  323C 00FF               2066      move.w  #255,D1         Move the word #255 to D1 to set the type of trap 11
0000414A  103C 000B               2067      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
0000414E  4E4F                    2068      trap    #15             Trap to get the cursor position in D1
00004150                          2069      
00004150  0441 0200               2070      sub.w   #512,D1         Move the cursor back by two columns
00004154  4E4F                    2071      trap    #15             Set the cursor position with trap command 11
00004156                          2072      
00004156  2601                    2073      move.l  D1,D3           Move the value in D1 to D3 for storage
00004158                          2074      
00004158  223C 0000FFFF           2075      move.l  #GOLD,D1         Move the colour red to D1
0000415E  6100 FE88               2076      bsr     change_font_colour  Change the font colour
00004162                          2077      
00004162  43F9 000050AF           2078      lea     loot_mark,A1   load the enemy symbol
00004168  103C 000E               2079      move.b  #14,D0          Move #14 to D0 for trap command 14
0000416C  4E4F                    2080      trap    #15             Draw the player mark
0000416E                          2081      
0000416E  223C 00FFFFFF           2082      move.l  #WHITE,D1       Move the colour white to D1
00004174  6100 FE72               2083      bsr     change_font_colour  Change the font colour
00004178                          2084      
00004178  2203                    2085      move.l  D3,D1           Move the value in D3 to D1 for previous cursor position
0000417A                          2086      
0000417A  0641 0200               2087      add.w   #512,D1         Move the cursor position two columns forward
0000417E  103C 000B               2088      move.b  #11,D0          Move byte #11 for trap command 11 
00004182  4E4F                    2089      trap    #15             Set the cursor position
00004184                          2090      
00004184  4E75                    2091      rts 
00004186                          2092  
00004186                          2093  *---------------------Draw Player-----------------------
00004186                          2094  check_for_player:
00004186  B5CE                    2095      CMP.L   A6,A2
00004188  6700 0004               2096      BEQ     draw_player
0000418C  4E75                    2097      rts
0000418E                          2098      
0000418E                          2099  draw_player:
0000418E  323C 00FF               2100      move.w  #255,D1         Move the word #255 to D1 to set the type of trap 11
00004192  103C 000B               2101      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
00004196  4E4F                    2102      trap    #15             Trap to get the cursor position in D1
00004198                          2103      
00004198  0441 0200               2104      sub.w   #512,D1         Move the cursor back by two columns
0000419C  4E4F                    2105      trap    #15             Set the cursor position with trap command 11
0000419E                          2106      
0000419E  2601                    2107      move.l  D1,D3          Move the value in D1 to D3 for storage
000041A0                          2108      
000041A0  223C 0000FF00           2109      move.l  #GREEN,D1       Move the colour green to D1
000041A6  6100 FE40               2110      bsr     change_font_colour  Change the font colour
000041AA                          2111      
000041AA  43F9 000050A7           2112      lea     player_mark,A1  load the player symbol
000041B0  103C 000E               2113      move.b  #14,D0          Move #14 to D0 for trap command 14
000041B4  4E4F                    2114      trap    #15             Draw the player mark
000041B6                          2115      
000041B6  223C 00FFFFFF           2116      move.l  #WHITE,D1       Move the colour white to D1
000041BC  6100 FE2A               2117      bsr     change_font_colour  Change the font colour
000041C0                          2118      
000041C0  2203                    2119      move.l  D3,D1           Move the value in D3 to D1 for previous cursor position
000041C2                          2120      
000041C2  0641 0200               2121      add.w   #512,D1         Move the cursor position two columns forward
000041C6  103C 000B               2122      move.b  #11,D0          Move byte #11 for trap command 11 
000041CA  4E4F                    2123      trap    #15             Set the cursor position
000041CC                          2124      
000041CC  4E75                    2125      rts
000041CE                          2126      
000041CE                          2127  *---------------------Draw Enemies----------------------
000041CE                          2128  check_for_enemies:
000041CE  4BF8 6000               2129      lea     FIRST_ENEMY,A5  Load the memory address of the first enemy
000041D2  1A3C 0000               2130      move.b  #0,D5           Move the starting enemy number to D5
000041D6  6100 0004               2131      bsr     loop_enemies    Loop through all enemies
000041DA  4E75                    2132      rts                     Return from subroutine
000041DC                          2133      
000041DC                          2134  loop_enemies:
000041DC  6100 0012               2135      bsr     check_for_enemy Check for an enemy
000041E0                          2136      
000041E0  BA3C 0002               2137      CMP.B   #ENEMY_MAX,D5   Compare the enemy number with the maximum enemy number
000041E4  6C00 FDC0               2138      BGE     return          Return from the loop if the current enemy number is greater than or equal to the max
000041E8                          2139      
000041E8  5205                    2140      add.b   #1,D5           Add to the current enemy number
000041EA  DAFC 000C               2141      add.w   #12,A5          Add to the current enemy pointer to move to the next enemy (16 for next enemy - 4 to get back from position)
000041EE  60EC                    2142      bra     loop_enemies    Keep looping the enemies
000041F0                          2143      
000041F0                          2144  check_for_enemy:
000041F0  564D                    2145      add.w   #ALIVE,A5       Add to the enemy memory address to get the enemy's alive state
000041F2  0C1D 0000               2146      CMP.B   #0,(A5)+        Check if the enemy is alive
000041F6  6700 FDAE               2147      BEQ     return          Return from the subroutine if not
000041FA                          2148      
000041FA  3615                    2149      move.w  (A5),D3         Move the enemy coordinates into data register D3 for large-value comparisons
000041FC  B5C3                    2150      CMP.L   D3,A2           Check if the enemy is in the current position
000041FE  6700 0004               2151      BEQ     draw_enemy      Draw the enemy if it is
00004202  4E75                    2152      rts                     Return if the enemy is not in the current position
00004204                          2153      
00004204                          2154  draw_enemy:
00004204  323C 00FF               2155      move.w  #255,D1         Move the word #255 to D1 to set the type of trap 11
00004208  103C 000B               2156      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
0000420C  4E4F                    2157      trap    #15             Trap to get the cursor position in D1
0000420E                          2158      
0000420E  0441 0200               2159      sub.w   #512,D1         Move the cursor back by two columns
00004212  4E4F                    2160      trap    #15             Set the cursor position with trap command 11
00004214                          2161      
00004214  2601                    2162      move.l  D1,D3          Move the value in D1 to D3 for storage
00004216                          2163      
00004216  223C 000000FF           2164      move.l  #RED,D1         Move the colour red to D1
0000421C  6100 FDCA               2165      bsr     change_font_colour  Change the font colour
00004220                          2166      
00004220  43F9 000050A9           2167      lea     enemy_mark,A1   load the enemy symbol
00004226  103C 000E               2168      move.b  #14,D0          Move #14 to D0 for trap command 14
0000422A  4E4F                    2169      trap    #15             Draw the player mark
0000422C                          2170      
0000422C  223C 00FFFFFF           2171      move.l  #WHITE,D1       Move the colour white to D1
00004232  6100 FDB4               2172      bsr     change_font_colour  Change the font colour
00004236                          2173      
00004236  2203                    2174      move.l  D3,D1           Move the value in D3 to D1 for previous cursor position
00004238                          2175      
00004238  0641 0200               2176      add.w   #512,D1         Move the cursor position two columns forward
0000423C  103C 000B               2177      move.b  #11,D0          Move byte #11 for trap command 11 
00004240  4E4F                    2178      trap    #15             Set the cursor position
00004242                          2179      
00004242  4E75                    2180      rts 
00004244                          2181   
00004244                          2182  *----------------------Draw Shops-----------------------
00004244                          2183  check_for_shops:
00004244  4BF8 6500               2184      lea     FIRST_SHOP,A5   Load the memory address of the first shop
00004248  1A3C 0000               2185      move.b  #0,D5           Move the starting shop number to D5
0000424C  6100 0004               2186      bsr     loop_shops      Loop through all shops
00004250  4E75                    2187      rts                     Return from subroutine
00004252                          2188      
00004252                          2189  loop_shops:
00004252  6100 0012               2190      bsr     check_for_shop  Check for a shop
00004256                          2191      
00004256  BA3C 0002               2192      CMP.B   #SHOP_MAX,D5    Compare the shop number with the maximum shop number
0000425A  6C00 FD4A               2193      BGE     return          Return from the loop if the current shop number is greater than or equal to the max
0000425E                          2194      
0000425E  5205                    2195      add.b   #1,D5           Add to the current shop number
00004260  DAFC 0010               2196      add.w   #16,A5          Add to the current shop pointer to move to the next shop
00004264  60EC                    2197      bra     loop_shops      Keep looping the shops
00004266                          2198      
00004266                          2199  check_for_shop:
00004266  3615                    2200      move.w  (A5),D3         Move the shop coordinates into data register D3 for large-value comparisons
00004268  B5C3                    2201      CMP.L   D3,A2           Check if the shop is in the current position
0000426A  6700 0004               2202      BEQ     draw_shop       Draw the shop if it is
0000426E  4E75                    2203      rts                     Return if the shop is not in the current position
00004270                          2204      
00004270                          2205  draw_shop:
00004270  323C 00FF               2206      move.w  #255,D1         Move the word #255 to D1 to set the type of trap 11
00004274  103C 000B               2207      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
00004278  4E4F                    2208      trap    #15             Trap to get the cursor position in D1
0000427A                          2209      
0000427A  0441 0200               2210      sub.w   #512,D1         Move the cursor back by two columns
0000427E  4E4F                    2211      trap    #15             Set the cursor position with trap command 11
00004280                          2212      
00004280  2601                    2213      move.l  D1,D3           Move the value in D1 to D3 for storage
00004282                          2214      
00004282  223C 00F000F0           2215      move.l  #PURPLE,D1      Move the colour red to D1
00004288  6100 FD5E               2216      bsr     change_font_colour  Change the font colour
0000428C                          2217      
0000428C  43F9 000050AD           2218      lea     shop_mark,A1    load the enemy symbol
00004292  103C 000E               2219      move.b  #14,D0          Move #14 to D0 for trap command 14
00004296  4E4F                    2220      trap    #15             Draw the player mark
00004298                          2221      
00004298  223C 00FFFFFF           2222      move.l  #WHITE,D1       Move the colour white to D1
0000429E  6100 FD48               2223      bsr     change_font_colour  Change the font colour
000042A2                          2224      
000042A2  2203                    2225      move.l  D3,D1           Move the value in D3 to D1 for previous cursor position
000042A4                          2226      
000042A4  0641 0200               2227      add.w   #512,D1         Move the cursor position two columns forward
000042A8  103C 000B               2228      move.b  #11,D0          Move byte #11 for trap command 11 
000042AC  4E4F                    2229      trap    #15             Set the cursor position
000042AE                          2230      
000042AE  4E75                    2231      rts
000042B0                          2232  
000042B0                          2233  *----------------------Draw Doors-----------------------
000042B0                          2234  check_for_doors:
000042B0  4BF8 6FE0               2235      lea     FIRST_DOOR,A5   Load the memory address of the first door
000042B4  1A3C 0000               2236      move.b  #0,D5           Move the starting door number to D5
000042B8  6100 0004               2237      bsr     loop_doors      Loop through all doors
000042BC  4E75                    2238      rts                     Return from subroutine
000042BE                          2239      
000042BE                          2240  loop_doors:
000042BE  6100 0010               2241      bsr     check_for_door  Check for a door
000042C2                          2242      
000042C2  BA3C 0001               2243      CMP.B   #DOOR_MAX,D5    Compare the door number with the maximum door number
000042C6  6C00 FCDE               2244      BGE     return          Return from the loop if the current door number is greater than or equal to the max
000042CA                          2245      
000042CA  5205                    2246      add.b   #1,D5           Add to the current door number
000042CC  544D                    2247      add.w   #2,A5          Add to the current door pointer to move to the next door
000042CE  60EE                    2248      bra     loop_doors      Keep looping the doors
000042D0                          2249      
000042D0                          2250  check_for_door:
000042D0  3615                    2251      move.w  (A5),D3         Move the door coordinates into data register D3 for large-value comparisons
000042D2  B5C3                    2252      CMP.L   D3,A2           Check if the door is in the current position
000042D4  6700 0004               2253      BEQ     draw_door       Draw the door if it is
000042D8  4E75                    2254      rts                     Return if the door is not in the current position
000042DA                          2255      
000042DA                          2256  draw_door:
000042DA  6100 FD1E               2257      bsr     get_cursor_pos  Get the position of the cursor and save the value to D1 and D3
000042DE                          2258      
000042DE  0441 0200               2259      sub.w   #512,D1         Move the cursor back by two columns
000042E2  4E4F                    2260      trap    #15             Set the cursor position with trap command 11
000042E4                          2261      
000042E4  223C 00507090           2262      move.l  #BROWN,D1       Move the colour red to D1
000042EA  6100 FCFC               2263      bsr     change_font_colour  Change the font colour
000042EE                          2264      
000042EE  43F9 000050B1           2265      lea     door_mark,A1    load the door symbol
000042F4  103C 000E               2266      move.b  #14,D0          Move #14 to D0 for trap command 14
000042F8  4E4F                    2267      trap    #15             Draw the door mark
000042FA                          2268      
000042FA  223C 00FFFFFF           2269      move.l  #WHITE,D1       Move the colour white to D1
00004300  6100 FCE6               2270      bsr     change_font_colour  Change the font colour
00004304                          2271      
00004304  2203                    2272      move.l  D3,D1           Move the value in D3 to D1 for previous cursor position
00004306  103C 000B               2273      move.b  #11,D0          Move byte #11 for trap command 11 
0000430A  4E4F                    2274      trap    #15             Set the cursor position
0000430C                          2275      
0000430C  4E75                    2276      rts                     Return from subroutine
0000430E                          2277  
0000430E                          2278  *--------------------Draw Win Point---------------------
0000430E                          2279  check_for_win_point:
0000430E  B5FC 00008156           2280      CMP.L   #WIN_POINT,A2   Check if the win point is in the current tile
00004314  6700 0004               2281      BEQ     draw_win_point  Branch to draw the win point if so
00004318  4E75                    2282      rts                     Return from subroutine if not
0000431A                          2283      
0000431A                          2284  draw_win_point:
0000431A  323C 00FF               2285      move.w  #255,D1         Move the word #255 to D1 to set the type of trap 11
0000431E  103C 000B               2286      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
00004322  4E4F                    2287      trap    #15             Trap to get the cursor position in D1
00004324                          2288      
00004324  0441 0200               2289      sub.w   #512,D1         Move the cursor back by two columns
00004328  4E4F                    2290      trap    #15             Set the cursor position with trap command 11
0000432A                          2291      
0000432A  2601                    2292      move.l  D1,D3           Move the value in D1 to D3 for storage
0000432C                          2293      
0000432C  223C 00FF0000           2294      move.l  #BLUE,D1        Move the colour blue to D1
00004332  6100 FCB4               2295      bsr     change_font_colour  Change the font colour
00004336                          2296      
00004336  43F9 000050AB           2297      lea     win_point_mark,A1   load the win point symbol
0000433C  103C 000E               2298      move.b  #14,D0              Move #14 to D0 for trap command 14
00004340  4E4F                    2299      trap    #15                 Draw the win point mark
00004342                          2300      
00004342  223C 00FFFFFF           2301      move.l  #WHITE,D1       Move the colour white to D1
00004348  6100 FC9E               2302      bsr     change_font_colour  Change the font colour
0000434C                          2303      
0000434C  2203                    2304      move.l  D3,D1           Move the value in D3 to D1 for previous cursor position
0000434E                          2305      
0000434E  0641 0200               2306      add.w   #512,D1         Move the cursor position two columns forward
00004352  103C 000B               2307      move.b  #11,D0          Move byte #11 for trap command 11 
00004356  4E4F                    2308      trap    #15             Set the cursor position
00004358                          2309      
00004358  4E75                    2310      rts
0000435A                          2311      
0000435A                          2312  *-------------------------------------------------------
0000435A                          2313  *-------------------Setup the world---------------------
0000435A                          2314  *-------------------------------------------------------
0000435A                          2315  setup_world:
0000435A  13FC 000E 0000814A      2316      move.b  #14,$814A   Setup the starting corridor
00004362  13FC 0007 0000813A      2317      move.b  #7,$813A    T junction upwards from starting corridor
0000436A  13FC 0004 00008139      2318      move.b  #4,$8139    Left corridor
00004372  13FC 0001 00008129      2319      move.b  #1,$8129
0000437A  13FC 0001 00008119      2320      move.b  #1,$8119
00004382                          2321      
00004382  13FC 0004 00008108      2322      move.b  #4,$8108    First shop
0000438A  13FC 0000 00008109      2323      move.b  #0,$8109    Entrance
00004392  13FC 0005 0000810A      2324      move.b  #5,$810A
0000439A  13FC 0008 000080F8      2325      move.b  #8,$80F8
000043A2  13FC 0000 000080F9      2326      move.b  #0,$80F9
000043AA  13FC 000A 000080FA      2327      move.b  #10,$80FA
000043B2  13FC 0003 000080E8      2328      move.b  #3,$80E8
000043BA  13FC 0007 000080E9      2329      move.b  #7,$80E9
000043C2  13FC 0006 000080EA      2330      move.b  #6,$80EA
000043CA                          2331      
000043CA  13FC 0005 0000813B      2332      move.b  #5,$813B    Right corridor
000043D2  13FC 0001 0000812B      2333      move.b  #1,$812B
000043DA  13FC 0001 0000811B      2334      move.b  #1,$811B
000043E2  13FC 0008 0000810B      2335      move.b  #8,$810B    Path continues up with a turn off to the right
000043EA                          2336      
000043EA  13FC 0002 0000810C      2337      move.b  #2,$810C    Right path
000043F2  13FC 0002 0000810D      2338      move.b  #2,$810D    Continue right
000043FA  13FC 0005 0000810E      2339      move.b  #5,$810E    Path upwards and to the left
00004402  13FC 0001 000080FE      2340      move.b  #1,$80FE    Leads upwards into a room
0000440A                          2341      
0000440A  13FC 0004 000080ED      2342      move.b  #4,$80ED    First monster room
00004412  13FC 0000 000080EE      2343      move.b  #0,$80EE    Entrance
0000441A  13FC 0005 000080EF      2344      move.b  #5,$80EF
00004422  13FC 0008 000080DD      2345      move.b  #8,$80DD
0000442A  13FC 0000 000080DE      2346      move.b  #0,$80DE
00004432  13FC 000A 000080DF      2347      move.b  #10,$80DF
0000443A  13FC 0003 000080CD      2348      move.b  #3,$80CD
00004442  13FC 0007 000080CE      2349      move.b  #7,$80CE
0000444A  13FC 0006 000080CF      2350      move.b  #6,$80CF
00004452                          2351      
00004452  13FC 0001 000080FB      2352      move.b  #1,$80FB    Path that continues up
0000445A  13FC 0001 000080EB      2353      move.b  #1,$80EB    Path continues upwards
00004462  13FC 0001 000080DB      2354      move.b  #1,$80DB
0000446A                          2355      
0000446A                          2356      *Bottom row of room
0000446A  13FC 0004 000080C8      2357      move.b  #4,$80C8    Large monster room with locked door
00004472  13FC 0009 000080C9      2358      move.b  #9,$80C9
0000447A  13FC 0009 000080CA      2359      move.b  #9,$80CA
00004482  13FC 0000 000080CB      2360      move.b  #0,$80CB    Entrance
0000448A  13FC 0005 000080CC      2361      move.b  #5,$80CC
00004492                          2362      *Middle row of room
00004492  13FC 0000 000080B8      2363      move.b  #0,$80B8    Exit to the left
0000449A  13FC 0000 000080B9      2364      move.b  #0,$80B9
000044A2  13FC 0000 000080BA      2365      move.b  #0,$80BA
000044AA  13FC 0000 000080BB      2366      move.b  #0,$80BB
000044B2  13FC 000A 000080BC      2367      move.b  #10,$80BC
000044BA                          2368      *Top row of room
000044BA  13FC 0003 000080A8      2369      move.b  #3,$80A8
000044C2  13FC 0007 000080A9      2370      move.b  #7,$80A9
000044CA  13FC 0007 000080AA      2371      move.b  #7,$80AA
000044D2  13FC 0007 000080AB      2372      move.b  #7,$80AB    Locked door
000044DA  13FC 0006 000080AC      2373      move.b  #6,$80AC
000044E2                          2374      
000044E2  13FC 0002 000080B7      2375      move.b  #2,$80B7    Exit large room leftwards
000044EA  13FC 0002 000080B6      2376      move.b  #2,$80B6    Continue to the left
000044F2  13FC 0007 000080B5      2377      move.b  #7,$80B5    Continue to the left and a path downwards
000044FA  13FC 0002 000080B4      2378      move.b  #2,$80B4    Continue to the left
00004502                          2379      
00004502  13FC 0003 000080A1      2380      move.b  #3,$80A1    Room to the left
0000450A  13FC 0007 000080A2      2381      move.b  #7,$80A2
00004512  13FC 0006 000080A3      2382      move.b  #6,$80A3
0000451A  13FC 0008 000080B1      2383      move.b  #8,$80B1
00004522  13FC 0000 000080B2      2384      move.b  #0,$80B2
0000452A  13FC 0000 000080B3      2385      move.b  #0,$80B3    Entrance to the right
00004532  13FC 0004 000080C1      2386      move.b  #4,$80C1
0000453A  13FC 0009 000080C2      2387      move.b  #9,$80C2
00004542  13FC 0005 000080C3      2388      move.b  #5,$80C3
0000454A                          2389      
0000454A  13FC 0001 000080C5      2390      move.b  #1,$80C5    Path leading downwards
00004552  13FC 0001 000080D5      2391      move.b  #1,$80D5
0000455A  13FC 000A 000080E5      2392      move.b  #10,$80E5   Path leading downward and to the left
00004562  13FC 0002 000080E4      2393      move.b  #2,$80E4    Path on the left
0000456A  13FC 0002 000080E3      2394      move.b  #2,$80E3
00004572  13FC 0003 000080E2      2395      move.b  #3,$80E2    Path takes a turn downwards
0000457A  13FC 0001 000080F2      2396      move.b  #1,$80F2    Path continues downwards
00004582                          2397      
00004582  13FC 0003 00008101      2398      move.b  #3,$8101    Regular enemy room
0000458A  13FC 0000 00008102      2399      move.b  #0,$8102    Entrance
00004592  13FC 0006 00008103      2400      move.b  #6,$8103
0000459A  13FC 0008 00008111      2401      move.b  #8,$8111
000045A2  13FC 0000 00008112      2402      move.b  #0,$8112
000045AA  13FC 000A 00008113      2403      move.b  #10,$8113
000045B2  13FC 0004 00008121      2404      move.b  #4,$8121
000045BA  13FC 0009 00008122      2405      move.b  #9,$8122
000045C2  13FC 000A 00008123      2406      move.b  #10,$8123   Exit at the bottom
000045CA                          2407      
000045CA  13FC 0001 000080F5      2408      move.b  #1,$80F5    Path leading downward
000045D2  13FC 0001 00008105      2409      move.b  #1,$8105
000045DA  13FC 0001 00008115      2410      move.b  #1,$8115
000045E2  13FC 0001 00008125      2411      move.b  #1,$8125
000045EA                          2412      
000045EA                          2413      *Top row of room
000045EA  13FC 0008 00008133      2414      move.b  #8,$8133    Large enemy room - Exit at top
000045F2  13FC 0007 00008134      2415      move.b  #7,$8134
000045FA  13FC 0000 00008135      2416      move.b  #0,$8135    Entrance
00004602  13FC 0006 00008136      2417      move.b  #6,$8136
0000460A                          2418      
0000460A                          2419      *Middle row of room
0000460A  13FC 0008 00008143      2420      move.b  #8,$8143
00004612  13FC 0000 00008144      2421      move.b  #0,$8144
0000461A  13FC 0000 00008145      2422      move.b  #0,$8145
00004622  13FC 000A 00008146      2423      move.b  #10,$8146
0000462A                          2424      
0000462A                          2425      *Bottom row of room
0000462A  13FC 0004 00008153      2426      move.b  #4,$8153
00004632  13FC 0009 00008154      2427      move.b  #9,$8154
0000463A  13FC 0009 00008155      2428      move.b  #9,$8155
00004642  13FC 0005 00008156      2429      move.b  #5,$8156
0000464A                          2430      
0000464A                          2431      * Setup the doors
0000464A  31FC 80EB 6FE0          2432      move.w  #$80EB,FIRST_DOOR    Set the location of the first door
00004650                          2433      
00004650  4E75                    2434      rts
00004652                          2435  
00004652                          2436  setup_enemies:
00004652                          2437      * Setup first enemy
00004652  11FC 0003 6000          2438      move.b  #3,$6000    Health - Setup the first enemy
00004658  11FC 0001 6001          2439      move.b  #1,$6001    Damage/level
0000465E  11FC 0001 6002          2440      move.b  #1,$6002    Class type (Knight)
00004664  11FC 0001 6003          2441      move.b  #1,$6003    Alive state (Alive)
0000466A  31FC 80DE 6004          2442      move.w  #$80DE,$6004  Move enemy coordinates
00004670                          2443      
00004670                          2444      * Setup second enemy
00004670  11FC 0003 6010          2445      move.b  #3,$6010    Health - Setup the first enemy
00004676  11FC 0002 6011          2446      move.b  #2,$6011    Damage/level
0000467C  11FC 0001 6012          2447      move.b  #1,$6012    Class type (Knight)
00004682  11FC 0001 6013          2448      move.b  #1,$6013    Alive state (Alive)
00004688  31FC 8155 6014          2449      move.w  #$8155,$6014  Move enemy coordinates
0000468E                          2450      
0000468E  4E75                    2451      rts
00004690                          2452      
00004690                          2453  setup_loot:
00004690                          2454      * Setup first loot pile
00004690  31FC 80DE 7000          2455      move.w  #$80DE,$7000  Move loot coordinates
00004696  11FC 0001 7002          2456      move.b  #1,$7002  Move loot potions
0000469C  11FC 0002 7003          2457      move.b  #2,$7003  Move loot keys
000046A2  11FC 000F 7004          2458      move.b  #LIFE_PER_TORCH,$7004  Move loot torches
000046A8  11FC 0005 7005          2459      move.b  #5,$7005  Move loot gold
000046AE  11FC 0001 7006          2460      move.b  #1,$7006  Move loot active state
000046B4                          2461      
000046B4                          2462      * Setup second loot pile
000046B4  31FC 8155 7010          2463      move.w  #$8155,$7010  Move loot coordinates
000046BA  11FC 0003 7012          2464      move.b  #3,$7012  Move loot potions
000046C0  11FC 0005 7013          2465      move.b  #5,$7013  Move loot keys
000046C6  11FC 0001 7014          2466      move.b  #1,$7014  Move loot torches
000046CC  11FC 0002 7015          2467      move.b  #2,$7015  Move loot gold
000046D2  11FC 0001 7016          2468      move.b  #1,$7016  Move loot active state
000046D8                          2469  
000046D8                          2470      
000046D8                          2471  setup_player:
000046D8  11FC 000A 5FF0          2472      move.b  #10,PLAYER      put score/health in memory location $5FF0
000046DE  11FC 0001 5FF1          2473      move.b  #1,PLA_DAMAGE   Assign the default damage for the player
000046E4  11FC 0000 5FF3          2474      move.b  #0,GAME_STATE   Put game state number in memory location $5FF3
000046EA                          2475      *0 = Pick role/intro | 5 = Move around | 6 = Combat | 7 = Shop | 64 = End game
000046EA                          2476  
000046EA  11FC 0000 5FF2          2477      move.b  #0,PLA_CLASS    put class number in memory location $5FF2
000046F0                          2478      * 1 corresponds to knight - 2 corresponds to mage - 3 corresponds to rogue
000046F0                          2479      
000046F0  11FC 0064 5FF8          2480      move.b  #100,PLA_GOLD    Assign the player's base gold value
000046F6  11FC 0001 5FF9          2481      move.b  #1,PLA_POTIONS  Assign the player's base potions value
000046FC  11FC 0000 5FFA          2482      move.b  #0,PLA_KEYS     Assign the player's base keys value
00004702                          2483      *move.b  #LIFE_PER_TORCH,PLA_TORCH   Assign the player's base torch value
00004702  11FC 0032 5FFB          2484      move.b  #50,PLA_TORCH   Assign the player's base torch value
00004708                          2485      
00004708  4DF9 0000814A           2486      lea     $814A,A6        Set the player coordinate to the first corridor
0000470E  31CE 5FF6               2487      move.w  A6,PLA_P_POS    Set the player's previous position to their current
00004712                          2488      
00004712  4E75                    2489      rts
00004714                          2490      
00004714                          2491  setup_shops:
00004714                          2492      * Setup the first shop
00004714  31FC 80F9 6500          2493      move.w  #$80F9,$6500    Set the position
0000471A  11FC 0002 6502          2494      move.b  #2,$6502        Set the potions
00004720  11FC 0003 6503          2495      move.b  #3,$6503        Set the keys
00004726  11FC 0004 6504          2496      move.b  #4,$6504        Set the torches
0000472C  11FC 0005 6505          2497      move.b  #5,$6505        Set the damage
00004732                          2498      
00004732                          2499      * Setup the second shop
00004732  31FC 80B2 6510          2500      move.w  #$80B2,$6510    Set the position
00004738  11FC 0004 6512          2501      move.b  #4,$6512        Set the potions
0000473E  11FC 0003 6513          2502      move.b  #3,$6513        Set the keys
00004744  11FC 0002 6514          2503      move.b  #2,$6514        Set the torches
0000474A  11FC 0001 6515          2504      move.b  #1,$6515        Set the damage
00004750                          2505  
00004750  4E75                    2506      rts
00004752                          2507      
00004752                          2508  *-------------------------------------------------------
00004752                          2509  *-------------------Data Delarations--------------------
00004752                          2510  *-------------------------------------------------------
00004752                          2511  
00004752= 0D 0A 00                2512  crlf:           dc.b    $0D,$0A,0
00004755= 2A 2A 2A 2A 2A 2A ...   2513  welcome_msg:    dc.b    '*****************************************************************',$0D,$0A
00004798= 20 20 20 20 20 20 ...   2514                  dc.b    '      __  ___      ___  __      ___        ______    _____  ___',$0D,$0A
000047D9= 20 20 20 20 20 2F ...   2515                  dc.b    '     /""\|"  \    /"  |/""\    |"  |      /    " \  (\"   \|"  \',$0D,$0A
0000481B= 20 20 20 20 2F 20 ...   2516                  dc.b    '    /    \\   \  //  //    \   ||  |     // ____  \ |.\\   \    |',$0D,$0A
0000485E= 20 20 20 2F 20 20 ...   2517                  dc.b    '   /  /\  \\\  \/. .//  /\  \  |:  |    /  /    ) :)|: \.   \\  |',$0D,$0A
000048A1= 20 20 2F 2F 20 20 ...   2518                  dc.b    '  //  __   \\.    ////  __   \  \  |___(: (____/ // |.  \    \. |',$0D,$0A
000048E4= 20 2F 20 20 20 2F ...   2519                  dc.b    ' /   /  \\  \\\   //   /  \\  \( \_|:  \\        /  |    \    \ |',$0D,$0A
00004927= 28 5F 5F 5F 2F 20 ...   2520                  dc.b    '(___/    \___)\__/(___/    \___)\_______)\"_____/    \___|\____\)',$0D,$0A,$0D,$0A
0000496C= 2A 2A 2A 2A 2A 2A ...   2521                  dc.b    '*****************************************************************',$0D,$0A,0
000049B0= 2E 00                   2522  loop_msg:       dc.b    '.',0
000049B2= 20 20 20 20 20 20 ...   2523  blank_msg:      dc.b    '                                                                                   ',0
00004A06= 54 68 65 20 64 61 ...   2524  tutorial_msg    dc.b    'The darkness here is dangerious, keep your torch close and dont let it go out.',$0D,$0A
00004A56= 45 76 65 72 79 20 ...   2525                  dc.b    'Every movement you make decreases your torch life, so think before you move.',$0D,$0A
00004AA4= 59 6F 75 20 63 61 ...   2526                  dc.b    'You can buy more torches in the shop, thats probably a good place to start...',$0D,$0A,0
00004AF4= 31 3E 20 52 65 73 ...   2527  replay_msg:     dc.b    '1> Restart the game.',$0D,$0A
00004B0A= 32 3E 20 51 75 69 ...   2528                  dc.b    '2> Quit the game.',$0D,$0A,0
00004B1E= 59 6F 75 20 61 77 ...   2529  wake_up_msg:    dc.b    'You awake in a room, on a bed of red velvet, with no memory',$0D,$0A
00004B5B= 6F 66 20 68 6F 77 ...   2530                  dc.b    'of how you got here. Stones crumble from the ceiling, the place looks like an',$0D,$0A
00004BAA= 6F 6C 64 20 63 61 ...   2531                  dc.b    'old castle. You get a dark feeling from this place, and you know you must',$0D,$0A
00004BF5= 65 73 63 61 70 65 ...   2532                  dc.b    'escape...',$0D,$0A
00004C00= 59 6F 75 20 63 6C ...   2533                  dc.b    'You climb from the bed and look in a nearby mirror:',$0D,$0A,0
00004C36= 31 3E 20 59 6F 75 ...   2534  pick_role_msg:  dc.b    '1> You wear armour of polished iron, a short sword and heavy shield laying',$0D,$0A
00004C82= 63 6C 6F 73 65 20 ...   2535                  dc.b    'close by. (Knight class)',$0D,$0A,$0D,$0A
00004C9E= 32 3E 20 59 6F 75 ...   2536                  dc.b    '2> You wear a cloak with mystic symbols sewn into the fabrics, an ancient',$0D,$0A
00004CE9= 6C 6F 6F 6B 69 6E ...   2537                  dc.b    'looking staff lays near. (Mage class)',$0D,$0A,$0D,$0A
00004D12= 33 3E 20 59 6F 75 ...   2538                  dc.b    '3> You wear tight, well-fitting leather armour with reminents of black dye',$0D,$0A
00004D5E= 73 74 61 69 6E 65 ...   2539                  dc.b    'stained to the material. Two knives are fastened to your belt. (Rogue class)',$0D,$0A,0
00004DAD= 45 6E 74 65 72 20 ...   2540  input_nums_msg: dc.b    'Enter num between 1 and ',0
00004DC6= 3A 20 00                2541  colon_msg:      dc.b    ': ',0
00004DC9                          2542  
00004DC9= 49 6E 70 75 74 74 ...   2543  input_error_msg:    dc.b    'Inputted number is outside of range.',$0D,$0A,0
00004DF0= 47 61 6D 65 73 74 ...   2544  fake_gamestate_msg: dc.b    'Gamestate doesnt exist',$0D,$0A,0
00004E09= 59 6F 75 20 67 72 ...   2545  knight_role_msg:    dc.b    'You grab your sword and shield, pull a torch from the wall, and leave the room.',$0D,$0A,0
00004E5B= 59 6F 75 20 68 61 ...   2546  knight_spec_msg:    dc.b    'You have chosen the KNIGHT class. You specialise in blocking and countering',$0D,$0A,0
00004EA9= 59 6F 75 20 70 69 ...   2547  mage_role_msg:  dc.b    'You pick up your staff, grab a torch from the wall, and leave the room.',$0D,$0A,0
00004EF3= 59 6F 75 20 68 61 ...   2548  mage_spec_msg:  dc.b    'You have chosen the MAGE class. You specialise in magic attacks.',$0D,$0A,0
00004F36= 59 6F 75 20 66 61 ...   2549  rogue_role_msg: dc.b    'You fasten your belt, grab a torch from the wall, and leave the room.',$0D,$0A,0
00004F7E= 59 6F 75 20 68 61 ...   2550  rogue_spec_msg: dc.b    'You have chosen the ROGUE class. You specialise in quick melee attacks.',$0D,$0A,0
00004FC8= 31 3E 20 4D 6F 76 ...   2551  movement_msg:   dc.b    '1> Move north.',$0D,$0A
00004FD8= 32 3E 20 4D 6F 76 ...   2552                  dc.b    '2> Move south.',$0D,$0A
00004FE8= 33 3E 20 4D 6F 76 ...   2553                  dc.b    '3> Move west.',$0D,$0A
00004FF7= 34 3E 20 4D 6F 76 ...   2554                  dc.b    '4> Move east.',$0D,$0A
00005006= 35 3E 20 44 72 69 ...   2555                  dc.b    '5> Drink health potion.',$0D,$0A,0
00005020= 4D 6F 76 65 64 20 ...   2556  move_north_msg: dc.b    'Moved north.',$0D,$0A,0
0000502F= 4D 6F 76 65 64 20 ...   2557  move_east_msg:  dc.b    'Moved east.',$0D,$0A,0
0000503D= 4D 6F 76 65 64 20 ...   2558  move_south_msg: dc.b    'Moved south.',$0D,$0A,0
0000504C= 4D 6F 76 65 64 20 ...   2559  move_west_msg:  dc.b    'Moved west.',$0D,$0A,0
0000505A= 41 20 77 61 6C 6C ...   2560  movement_blocked_msg:  dc.b    'A wall blocks your path.',$0D,$0A,0
00005075= 45 6E 74 65 72 20 ...   2561  continue_msg:   dc.b    'Enter any key to continue... ',0
00005093= 20 20 20 00             2562  blank_tile      dc.b    '   ',0
00005097= 7C 20 7C 00             2563  both_tile       dc.b    '| |',0
0000509B= 7C 20 20 00             2564  left_tile       dc.b    '|  ',0
0000509F= 20 20 7C 00             2565  right_tile      dc.b    '  |',0
000050A3= 5C 2F 5C 00             2566  blocked_tile:   dc.b    '\/\',0
000050A7= 2A 00                   2567  player_mark:    dc.b    '*',0
000050A9= 58 00                   2568  enemy_mark:     dc.b    'X',0
000050AB= 40 00                   2569  win_point_mark: dc.b    '@',0
000050AD= 24 00                   2570  shop_mark:      dc.b    '$',0
000050AF= 25 00                   2571  loot_mark:      dc.b    '%',0
000050B1= 23 00                   2572  door_mark:      dc.b    '#',0
000050B3= 4D 61 70 20 4C 65 ...   2573  map_legend_msg:     dc.b    'Map Legend:',0
000050BF= 20 3D 20 50 6C 61 ...   2574  map_player_msg:     dc.b    ' = Player',0
000050C9= 20 3D 20 45 6E 65 ...   2575  map_enemy_msg:      dc.b    ' = Enemy',0
000050D2= 20 3D 20 4F 62 6A ...   2576  map_win_point_msg:  dc.b    ' = Objective',0
000050DF= 20 3D 20 53 68 6F ...   2577  map_shop_msg:       dc.b    ' = Shop',0
000050E7= 20 3D 20 4C 6F 6F ...   2578  map_loot_msg:       dc.b    ' = Loot Pile',0
000050F4= 20 3D 20 4C 6F 63 ...   2579  map_door_msg:       dc.b    ' = Locked Door',0
00005103= 41 20 6D 6F 6E 73 ...   2580  encounter_msg:  dc.b    'A monster blocks your path, it looks ready to attack!',$0D,$0A,0
0000513B= 31 3E 20 42 6C 6F ...   2581  combat_msg:     dc.b    '1> Block and Counter.',$0D,$0A
00005152= 32 3E 20 43 61 73 ...   2582                  dc.b    '2> Cast Magic.',$0D,$0A
00005162= 33 3E 20 41 74 74 ...   2583                  dc.b    '3> Attack Swiftly.',$0D,$0A
00005176= 34 3E 20 54 72 79 ...   2584                  dc.b    '4> Try Run.',$0D,$0A
00005183= 35 3E 20 44 72 69 ...   2585                  dc.b    '5> Drink Health Potion.',$0D,$0A,0
0000519D= 59 6F 75 20 65 73 ...   2586  escape_msg:             dc.b    'You escaped the monster!',$0D,$0A,0
000051B8= 59 6F 75 20 74 72 ...   2587  fail_escape_msg:        dc.b    'You try to run, but the monster catches and damages you!',$0D,$0A,0
000051F3= 59 6F 75 20 62 6F ...   2588  both_block_msg:         dc.b    'You both block, No damage is done!',$0D,$0A,0
00005218= 59 6F 75 20 62 6F ...   2589  both_cast_magic_msg:    dc.b    'You both cast magic at eachother, the spells clash in mid air! No damage',$0D,$0A
00005262= 69 73 20 64 6F 6E ...   2590                          dc.b    'is done!',$0D,$0A,0
0000526D= 59 6F 75 20 62 6F ...   2591  both_melee_msg:         dc.b    'You both lunge forward, metal clashes together, but no damage is done!',$0D,$0A,0
000052B6= 54 68 65 20 65 6E ...   2592  hit_against_block_msg:  dc.b    'The enemy blocks, you cast a cast a spell and it damages the monster!',$0D,$0A,0
000052FE= 54 68 65 20 65 6E ...   2593  hit_against_magic_msg:  dc.b    'The enemy begins to charge a spell but you lunge forward and hit it first,',$0D,$0A
0000534A= 64 61 6D 61 67 69 ...   2594                          dc.b    'damaging the monster!',$0D,$0A,0
00005362= 54 68 65 20 65 6E ...   2595  hit_against_melee_msg:  dc.b    'The enemy lunges forward but you block quicky, then counter, damaging the',$0D,$0A
000053AD= 6D 6F 6E 73 74 65 ...   2596                          dc.b    'monster!',$0D,$0A,0
000053B8= 59 6F 75 20 6C 75 ...   2597  hit_by_counter_msg:     dc.b    'You lunge at the enemy but they block before you hit, they swing around quickly',$0D,$0A
00005409= 61 6E 64 20 64 61 ...   2598                          dc.b    'and damage you!',$0D,$0A,0
0000541B= 59 6F 75 20 74 72 ...   2599  hit_by_magic_msg:       dc.b    'You try to block the enemies attack, but they cast a spell that breaks through',$0D,$0A
0000546B= 79 6F 75 72 20 64 ...   2600                          dc.b    'your defense and damages you!',$0D,$0A,0
0000548B= 59 6F 75 20 74 72 ...   2601  hit_by_melee_msg:       dc.b    'You try to charge up a spell, but the enemy lunges forward and damages you!',$0D,$0A,0
000054D9= 48 65 61 6C 74 68 ...   2602  health_msg:             dc.b    'Health: ',0
000054E2= 45 6E 65 6D 79 20 ...   2603  enemy_health_msg:       dc.b    'Enemy Health: ',0
000054F1= 54 6F 72 63 68 20 ...   2604  torch_msg:              dc.b    'Torch Life: ',0
000054FE= 44 61 6D 61 67 65 ...   2605  damage_lvl_msg          dc.b    'Damage lvl: ',0
0000550B= 49 6E 76 65 6E 74 ...   2606  inventory_msg:          dc.b    'Inventory:',0
00005516= 2D 20 47 6F 6C 64 ...   2607  gold_msg:               dc.b    '- Gold ',0
0000551E= 2D 20 4B 65 79 20 00    2608  key_msg:                dc.b    '- Key ',0
00005525= 2D 20 50 6F 74 69 ...   2609  potions_msg:            dc.b    '- Potion ',0
0000552F= 2D 20 54 6F 72 63 ...   2610  torches_msg:            dc.b    '- Torch ',0
00005538= 2D 20 44 61 6D 61 ...   2611  damage_up_msg:          dc.b    '- Damage Upgrades ',0
0000554B= 54 68 65 20 6D 6F ...   2612  battle_won_msg:         dc.b    'The monster collapses at your feet. It is dead!',$0D,$0A,0
0000557D= 28 00                   2613  bracket_open_msg:       dc.b    '(',0
0000557F= 29 00                   2614  bracket_close_msg:      dc.b    ')',0
00005581= 59 6F 75 20 66 65 ...   2615  death_msg:          dc.b    'You feel your last breath of air leave your lungs...',$0D,$0A
000055B7= 59 6F 75 72 20 6B ...   2616                      dc.b    'Your knees hit the ground...',$0D,$0A
000055D5= 59 6F 75 20 68 61 ...   2617                      dc.b    'You have died.',$0D,$0A,0
000055E6= 59 6F 75 20 66 65 ...   2618  win_msg:            dc.b    'You feel the outside breeze hit your face...',$0D,$0A
00005614= 59 6F 75 20 68 61 ...   2619                      dc.b    'You have escaped the castle!',$0D,$0A,0
00005633= 59 6F 75 20 64 72 ...   2620  take_potion_msg:    dc.b    'You drink a health potion...',$0D,$0A
00005651= 33 20 68 65 61 6C ...   2621                      dc.b    '3 health points restored!',$0D,$0A,0
0000566D= 59 6F 75 20 61 72 ...   2622  no_potions_msg:     dc.b    'You are out of potions.',$0D,$0A,0
00005687= 22 4C 6F 6F 6B 69 ...   2623  shop_enter_msg:     dc.b    '"Looking to lighten that coin pouch of yours?!"',$0D,$0A,0
000056B9= 31 3E 20 42 75 79 ...   2624  shop_msg:       dc.b    '1> Buy Potion. (5g)',$0D,$0A
000056CE= 32 3E 20 42 75 79 ...   2625                  dc.b    '2> Buy Key. (15g)',$0D,$0A
000056E1= 33 3E 20 42 75 79 ...   2626                  dc.b    '3> Buy Torch. (10g)',$0D,$0A
000056F6= 34 3E 20 42 75 79 ...   2627                  dc.b    '4> Buy Damage Upgrade. (20g)',$0D,$0A
00005714= 35 3E 20 4C 65 61 ...   2628                  dc.b    '5> Leave Shop.',$0D,$0A,0
00005725= 22 50 6C 65 61 73 ...   2629  leave_shop_msg: dc.b    '"Pleasure doing business with you."',$0D,$0A,0
0000574B= 22 2E 2E 2E 41 6E ...   2630  buy_item_msg:   dc.b    '"...And its yours!"',$0D,$0A,0
00005761= 53 68 6F 70 20 53 ...   2631  shop_stock_msg: dc.b    'Shop Stock:',0
0000576D= 59 6F 75 72 20 49 ...   2632  player_msg:     dc.b    'Your Items:',0
00005779= 22 4E 6F 74 20 65 ...   2633  no_money_msg:   dc.b    '"Not enough gold, traveller."',$0D,$0A,0
00005799= 22 53 6F 72 72 79 ...   2634  no_item_msg:    dc.b    '"Sorry, I dont have any of them left..."',$0D,$0A,0
000057C4= 54 68 65 20 64 61 ...   2635  no_torch_msg:   dc.b    'The darkness burns...',$0D,$0A,0
000057DC= 59 6F 75 20 70 69 ...   2636  pickup_loot_msg:    dc.b    'You picked up a loot pile',$0D,$0A,0
000057F8= 2B 20 47 6F 6C 64 ...   2637  pickup_gold_msg:    dc.b    '+ Gold ',0
00005800= 2B 20 50 6F 74 69 ...   2638  pickup_potion_msg:  dc.b    '+ Potion ',0
0000580A= 2B 20 4B 65 79 20 00    2639  pickup_key_msg:     dc.b    '+ Key ',0
00005811= 2B 20 54 6F 72 63 ...   2640  pickup_torch_msg:   dc.b    '+ Torch life ',0
0000581F= 43 6C 61 73 73 20 ...   2641  double_damage_msg:  dc.b    'Class Bonus - Double Damage!',$0D,$0A,0
0000583E= 54 68 65 20 64 6F ...   2642  locked_door_msg:    dc.b    'The door seems locked, you have a key that might fit it.',$0D,$0A
00005878= 44 6F 20 79 6F 75 ...   2643                      dc.b    'Do you want to try unlock it?',$0D,$0A,$0D,$0A
00005899= 31 3E 20 59 65 73 ...   2644                      dc.b    '1> Yes. (-1 key)',$0D,$0A
000058AB= 32 3E 20 4E 6F 2E ...   2645                      dc.b    '2> No.',$0D,$0A,0
000058B4= 54 68 65 20 64 6F ...   2646  unlocked_door_msg:  dc.b    'The door swings open, the key lodged stuck in the keyhole.',$0D,$0A,0
000058F1= 54 68 65 20 64 6F ...   2647  blocked_door_msg:   dc.b    'The door seems solid, it wont budge.',$0D,$0A,0
00005918= 20 20 20 20 20 20 ...   2648  graveyard_msg:  dc.b    '      ,-=-.       ______     _',$0D,$0A
00005938= 20 20 20 20 20 2F ...   2649                  dc.b    '     /  +  \     />----->  _|1|_',$0D,$0A
0000595A= 20 20 20 20 20 7C ...   2650                  dc.b    '     | ~~~ |    // -/- /  |_ H _|',$0D,$0A
0000597D= 20 20 20 20 20 7C ...   2651                  dc.b    '     |R.I.P|   //  /  /     |S|',$0D,$0A
0000599E= 5C 76 56 2C 2C 7C ...   2652                  dc.b    '\vV,,|_____|V,//_____/VvV,v,|_|/,,vhjwv/,',$0D,$0A,0
000059CA= 20 20 20 20 20 20 ...   2653  skeleton_msg:   dc.b    '           .-.',$0D,$0A
000059DA= 20 2F 5C 5F 5F 5F ...   2654                  dc.b    ' /\____/\ (o.o)',$0D,$0A
000059EB= 7C 20 20 5F 7C 7C ...   2655                  dc.b    '|  _||_  | |=|',$0D,$0A
000059FB= 20 5C 2F 20 7C 7C ...   2656                  dc.b    ' \/ || \/ __|__',$0D,$0A
00005A0C= 20 20 20 20 7C 7C ...   2657                  dc.b    '    ||\_//.=|=.\\',$0D,$0A
00005A1F= 20 20 20 20 7C 7C ...   2658                  dc.b    '    ||\_/ .=|=. \\',$0D,$0A
00005A33= 20 20 20 20 7C 7C ...   2659                  dc.b    '    ||    .=|=. //',$0D,$0A
00005A47= 20 20 20 20 7C 7C ...   2660                  dc.b    '    ||    (_=_)//',$0D,$0A
00005A5A= 20 20 20 20 7C 7C ...   2661                  dc.b    '    ||   (:| |:)',$0D,$0A
00005A6C= 20 20 20 20 7C 7C ...   2662                  dc.b    '    ||    || ||',$0D,$0A
00005A7D= 20 20 20 20 7C 7C ...   2663                  dc.b    '    ||    () ()',$0D,$0A
00005A8E= 20 20 20 20 2F 5C ...   2664                  dc.b    '    /\    || ||',$0D,$0A
00005A9F= 20 20 20 20 7C 7C ...   2665                  dc.b    '    ||    || ||',$0D,$0A
00005AB0= 20 20 20 20 5C 2F ...   2666                  dc.b    '    \/  ==   ==',$0D,$0A,0
00005AC2= 20 20 20 20 20 20 ...   2667  merchant_msg:   dc.b    '         ____',$0D,$0A
00005AD1= 20 20 20 20 20 20 ...   2668                  dc.b    '        |    |',$0D,$0A
00005AE1= 20 20 20 20 20 20 ...   2669                  dc.b    '      --:<<>>:--',$0D,$0A
00005AF3= 20 20 20 20 20 20 ...   2670                  dc.b    '        :~_~ :',$0D,$0A
00005B03= 20 20 20 20 20 20 ...   2671                  dc.b    '        _:"":\___',$0D,$0A
00005B16= 20 20 5F 5F 5F 5F ...   2672                  dc.b    '  ____./ :::     \._',$0D,$0A
00005B2C= 3C 3C 3D 29 20 20 ...   2673                  dc.b    '<<=)           \    :',$0D,$0A
00005B43= 20 5C 2F 2D 2D 2D ...   2674                  dc.b    ' \/---/\_      /\._. ',$0D,$0A
00005B5A= 20 7C 7C 20 20 20 ...   2675                  dc.b    ' ||       \====:_ ""',$0D,$0A
00005B70= 20 7C 7C 20 20 20 ...   2676                  dc.b    ' ||      ./     \\',$0D,$0A
00005B84= 20 7C 7C 20 20 20 ...   2677                  dc.b    ' ||     :       :',$0D,$0A
00005B97= 20 7C 7C 20 20 20 ...   2678                  dc.b    ' ||    /   :    \',$0D,$0A
00005BAA= 20 7C 7C 20 20 20 ...   2679                  dc.b    ' ||   :   .      \.',$0D,$0A
00005BBF= 20 7C 7C 20 20 20 ...   2680                  dc.b    ' ||   :  : :      :',$0D,$0A
00005BD4= 20 7C 7C 20 20 20 ...   2681                  dc.b    ' ||   :__:-:__.;--',$0D,$0A,0
00005BE9= 20 20 20 20 20 20 ...   2682  castle_msg:     dc.b    '                T~~',$0D,$0A
00005BFE= 20 20 20 20 20 20 ...   2683                  dc.b    '                |',$0D,$0A
00005C11= 20 20 20 20 20 20 ...   2684                  dc.b    '               /"\',$0D,$0A
00005C25= 20 20 20 20 20 20 ...   2685                  dc.b    '       T~~     |.| T~~',$0D,$0A
00005C3D= 20 20 20 54 7E 7E ...   2686                  dc.b    '   T~~ |    T~ WWWW|',$0D,$0A
00005C53= 20 20 20 7C 20 20 ...   2687                  dc.b    '   |  /"\   |  |  |/\T~~',$0D,$0A
00005C6D= 20 20 2F 22 5C 20 ...   2688                  dc.b    '  /"\ WWW  /"\ |. |WW|',$0D,$0A
00005C85= 20 57 57 57 57 57 ...   2689                  dc.b    ' WWWWW/\| /   \|./\|/"\',$0D,$0A
00005C9E= 20 7C 20 20 20 2F ...   2690                  dc.b    ' |   /__\/]WWW[\/__\WWWW',$0D,$0A
00005CB8= 20 7C 22 20 20 57 ...   2691                  dc.b    ' |"  WWWW.|I_I|.WWWW.   |',$0D,$0A
00005CD3= 20 7C 20 20 20 7C ...   2692                  dc.b    ' |   |. |/  -  \|. |.  |',$0D,$0A
00005CED= 20 7C 2E 20 20 7C ...   2693                  dc.b    ' |.  |  |LI=H=LI|. |   |',$0D,$0A
00005D07= 20 7C 20 20 20 7C ...   2694                  dc.b    ' |   |. | |[_]| |  |.  |',$0D,$0A
00005D21= 20 7C 20 20 20 7C ...   2695                  dc.b    ' |   |  |_|###|_|  |   |',$0D,$0A
00005D3B= 20 20 2D 2D 2D 20 ...   2696                  dc.b    '  --- -- -/___\- -- --- ',$0D,$0A,0
00005D56                          2697                  
00005D56                          2698  
00005D56                          2699  
00005D56                          2700  
00005D56                          2701  
00005D56                          2702  
00005D56                          2703  
00005D56                          2704  
00005D56                          2705  
00005D56                          2706  
00005D56                          2707  
00005D56                          2708  
00005D56                          2709  
00005D56                          2710  
00005D56                          2711  
00005D56                          2712  
00005D56                          2713  
00005D56                          2714      end start

No errors detected
No warnings generated


SYMBOL TABLE INFORMATION
Symbol-name         Value
-------------------------
ALIVE               3
BATTLE_WON_MSG      554B
BLANK_MSG           49B2
BLANK_TILE          5093
BLOCKED_DOOR        3BB4
BLOCKED_DOOR_MSG    58F1
BLOCKED_TILE        50A3
BLOCK_COUNTER       3C0E
BLUE                FF0000
BOTH_BLOCK          3CA6
BOTH_BLOCK_MSG      51F3
BOTH_CAST_MAGIC     3CB8
BOTH_CAST_MAGIC_MSG  5218
BOTH_MELEE          3CCA
BOTH_MELEE_MSG      526D
BOTH_TILE           5097
BRACKET_CLOSE_MSG   557F
BRACKET_OPEN_MSG    557D
BROWN               507090
BUY_ITEM_MSG        574B
BUY_KEY             3E56
BUY_POTION          3E24
BUY_TORCH           3E8A
CASTLE_MSG          5BE9
CAST_MAGIC          3C28
CHANGE_FONT_COLOUR  3FE8
CHECK_BLOCKED       3B46
CHECK_FOR_A_DOOR    3B66
CHECK_FOR_DOOR      42D0
CHECK_FOR_DOORS     42B0
CHECK_FOR_ENEMIES   41CE
CHECK_FOR_ENEMY     41F0
CHECK_FOR_LOOT      412C
CHECK_FOR_LOOT_PILES  4108
CHECK_FOR_PLAYER    4186
CHECK_FOR_SHOP      4266
CHECK_FOR_SHOPS     4244
CHECK_FOR_WIN_POINT  430E
CLASS               2
CLEAR_SCREEN        3988
COLON_MSG           4DC6
COMBAT              3BCC
COMBAT_MSG          513B
CONTINUE_MSG        5075
CRLF                4752
CSR_POS_BATTLE      2001
CSR_POS_MOVE        3201
CSR_POS_SHOP_P      3401
CSR_POS_SHOP_S      1801
DAMAGE              1
DAMAGE_ENEMY        3D6C
DAMAGE_LVL_MSG      54FE
DAMAGE_PLAYER       3DA6
DAMAGE_UP_MSG       5538
DAMAGE_UP_PRICE     14
DEATH_MSG           5581
DECORATE            396A
DECREMENT_TORCH     3FDA
DOOR_MARK           50B1
DOOR_MAX            1
DOUBLE_DAMAGE_ENEMY  3D7C
DOUBLE_DAMAGE_MSG   581F
DOUBLE_DAMAGE_PLAYER  3DBC
DRAW                34A2
DRAW_BATTLE_INFO    3746
DRAW_BLANK_TILE     40FA
DRAW_BLOCKED_TILE   40C2
DRAW_BOTH_TILE      40D0
DRAW_CASTLE         34DE
DRAW_DOOR           42DA
DRAW_ENEMY          4204
DRAW_GRAVEYARD      34D0
DRAW_HUD            34FA
DRAW_ITEM_NUMBER    3724
DRAW_LEFT_TILE      40DE
DRAW_LOOP           4008
DRAW_LOOT           4144
DRAW_MAP_LEGEND     35F8
DRAW_MERCHANT       34EC
DRAW_PLAYER         418E
DRAW_PLAYER_INFO    351A
DRAW_RIGHT_TILE     40EC
DRAW_SHOP           4270
DRAW_SHOP_INFO      37C0
DRAW_SKELETON       34C2
DRAW_TILE           405E
DRAW_WIN_POINT      431A
ENCOUNTER_MSG       5103
END                 3006
ENDL                39B8
ENEMIES_CHECK       3362
ENEMIES_LOOP        3370
ENEMY_ALIVE_CHECK   346A
ENEMY_CHECK         338E
ENEMY_DIED          3474
ENEMY_HEALTH_MSG    54E2
ENEMY_MARK          50A9
ENEMY_MAX           2
ENTER_COMBAT        33C2
ENTER_SHOP          3442
ESCAPE_ATTACK       3C6C
ESCAPE_MSG          519D
EXIT                0
FAIL_ESCAPE         3C8A
FAIL_ESCAPE_MSG     51B8
FAKE_GAMESTATE_MSG  4DF0
FIRST_DOOR          6FE0
FIRST_ENEMY         6000
FIRST_LOOT          7000
FIRST_SHOP          6500
FONT                1090000
GAME                3000
GAMELOOP            3194
GAMEPLAY            393C
GAME_STATE          5FF3
GET_CURSOR_POS      3FFA
GOLD                FFFF
GOLD_MSG            5516
GRAVEYARD_MSG       5918
GREEN               FF00
HEALTH_MSG          54D9
HIT_AGAINST_BLOCK   3CDC
HIT_AGAINST_BLOCK_MSG  52B6
HIT_AGAINST_MAGIC   3CF2
HIT_AGAINST_MAGIC_MSG  52FE
HIT_AGAINST_MELEE   3D08
HIT_AGAINST_MELEE_MSG  5362
HIT_BY_COUNTER      3D1E
HIT_BY_COUNTER_MSG  53B8
HIT_BY_MAGIC        3D38
HIT_BY_MAGIC_MSG    541B
HIT_BY_MELEE        3D52
HIT_BY_MELEE_MSG    548B
INPUT               311E
INPUT_ERROR_MSG     4DC9
INPUT_NUMS_MSG      4DAD
INVALID_INPUT       3186
INVENTORY_MSG       550B
IN_A_DOOR           3B70
KEY_MSG             551E
KEY_PRICE           F
KNIGHT_ROLE_MSG     4E09
KNIGHT_SELECT       3062
KNIGHT_SPEC_MSG     4E5B
LEAVE_SHOP          3EF4
LEAVE_SHOP_MSG      5725
LEFT_TILE           509B
LIFE_PER_TORCH      F
LOCKED_DOOR_MSG     583E
LOOP_COLUMNS        4034
LOOP_DOORS          42BE
LOOP_ENEMIES        41DC
LOOP_LOOT_PILES     4116
LOOP_MSG            49B0
LOOP_ROWS           401E
LOOP_SHOPS          4252
LOOP_THRU_DOORS     3B54
LOOT_MARK           50AF
LOOT_PILES_CHECK    3248
LOOT_PILE_CHECK     326A
LOOT_PILE_LOOP      3256
L_ACTIVE            6
MAGE_ROLE_MSG       4EA9
MAGE_SELECT         3092
MAGE_SPEC_MSG       4EF3
MANAGE_INPUT        316C
MANAGE_TORCH        332E
MAP_DOOR_MSG        50F4
MAP_ENEMY_MSG       50C9
MAP_LEGEND_MSG      50B3
MAP_LENGTH          F
MAP_LOOT_MSG        50E7
MAP_PLAYER_MSG      50BF
MAP_SHOP_MSG        50DF
MAP_START_POINT     8080
MAP_WIN_POINT_MSG   50D2
MELEE_ATTACK        3C42
MERCHANT_MSG        5AC2
MOVEMENT            39CE
MOVEMENT_BLOCKED    3B34
MOVEMENT_BLOCKED_MSG  505A
MOVEMENT_CHECKS     322C
MOVEMENT_MSG        4FC8
MOVE_EAST           3AEC
MOVE_EAST_MSG       502F
MOVE_NORTH          3A10
MOVE_NORTH_MSG      5020
MOVE_SOUTH          3A5A
MOVE_SOUTH_MSG      503D
MOVE_WEST           3AA4
MOVE_WEST_MSG       504C
NO_ITEM_MSG         5799
NO_MONEY            3F12
NO_MONEY_MSG        5779
NO_POTIONS          3FCA
NO_POTIONS_MSG      566D
NO_SHOP_DAMAGE_UP   3F60
NO_SHOP_KEYS        3F38
NO_SHOP_POTIONS     3F24
NO_SHOP_TORCHES     3F4C
NO_TORCH_MSG        57C4
OPEN_DOOR_POS       1000
OUT                 3972
PICKUP_GOLD_MSG     57F8
PICKUP_KEY_MSG      580A
PICKUP_LOOT         3280
PICKUP_LOOT_MSG     57DC
PICKUP_POTION_MSG   5800
PICKUP_TORCH_MSG    5811
PICK_ROLE           301C
PICK_ROLE_MSG       4C36
PLAYER              5FF0
PLAYER_DEAD         31D4
PLAYER_MARK         50A7
PLAYER_MSG          576D
PLA_CLASS           5FF2
PLA_DAMAGE          5FF1
PLA_GOLD            5FF8
PLA_KEYS            5FFA
PLA_POTIONS         5FF9
PLA_P_POS           5FF6
PLA_TORCH           5FFB
POSITION            4
POTIONS_MSG         5525
POTION_PRICE        5
PRESS_CONTINUE      3F74
PURPLE              F000F0
RANDOM_NUMBER       3F8C
RED                 FF
REPLAY              3994
REPLAY_MSG          4AF4
RETURN              3FA6
RIGHT_TILE          509F
ROGUE_ROLE_MSG      4F36
ROGUE_SELECT        30C2
ROGUE_SPEC_MSG      4F7E
ROLE_INPUT          3044
SETUP_ENEMIES       4652
SETUP_LOOT          4690
SETUP_PLAYER        46D8
SETUP_SHOPS         4714
SETUP_WORLD         435A
SHOP                3DE8
SHOPS_CHECK         33EC
SHOPS_LOOP          33FA
SHOP_CHECK          3418
SHOP_ENTER_MSG      5687
SHOP_MARK           50AD
SHOP_MAX            2
SHOP_MSG            56B9
SHOP_STOCK_MSG      5761
SKELETON_MSG        59CA
START               1000
S_DAMAGE_IN         5
S_KEYS              3
S_POTIONS           2
S_TORCHES           4
TAKE_POTION         3FA8
TAKE_POTION_MSG     5633
TORCHES_MSG         552F
TORCH_MSG           54F1
TORCH_PRICE         A
TRY_RUN             3C5C
TUTORIAL_INTRO      30F2
TUTORIAL_MSG        4A06
UNLOCKED_DOOR_MSG   58B4
UNLOCK_DOOR         3B9A
UPDATE              31AA
UPGRADE_DMG         3EC0
WAKE_UP_MSG         4B1E
WALL_COLLISIONS     39EE
WELCOME             300A
WELCOME_MSG         4755
WHITE               FFFFFF
WIN_MSG             55E6
WIN_POINT           8156
WIN_POINT_MARK      50AB
WON_GAME            31FE

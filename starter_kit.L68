00001000 Starting Address
Assembler used: EASy68K Editor/Assembler v5.16.01
Created On: 23/03/2019 00:03:39

00000000                             1  *-------------------------------------------------------
00000000                             2  * Author         : Michael Rainsford Ryan
00000000                             3  * Student Number : C00239510
00000000                             4  * Date Created   : 21/01/2019
00000000                             5  * Description    : A simplified, offline clone of the
00000000                             6  *                : online game "Avalon".
00000000                             7  * Issues/Bugs    : None currenty.
00000000                             8  *-------------------------------------------------------
00000000                             9  
00001000                            10      org $1000
00001000                            11  
00001000                            12  *-------------------------------------------------------
00001000                            13  *Choose to be a Worker or a God 
00001000                            14  *https://www.avalon-rpg.com/
00001000                            15  *-------------------------------------------------------
00001000                            16  
00001000                            17  *-------------------------------------------------------
00001000                            18  *-------------------Game Information-------------------
00001000                            19  *-------------------------------------------------------
00001000                            20  *A6 is used for player coordinates
00001000                            21  *A5 is used for enemy coordinates when in combat or looping through them
00001000                            22  *A5 is used for shops when in shop screen or when looping through them
00001000                            23  *A4 occasionally used for displaying the inventory
00001000                            24  *D5 is used occasionally for input range
00001000                            25  *$5FF0 holds player information
00001000                            26  *$6000 to $64F0 holds enemies
00001000                            27  *$6500 to $6FE0 holds shops
00001000                            28  *$6FE0 to $6FEF Holds locked doors
00001000                            29  *$6FF0 to $6FFF Holds big key locked doors
00001000                            30  *$7000 to $7500 holds loot
00001000                            31  *$8000 to $9000 holds maps
00001000                            32  
00001000                            33  *Enemies:
00001000                            34  *Byte:  Name:
00001000                            35  *0      Health
00001000                            36  *1      Damage/level
00001000                            37  *2      enemy type (Knight, mage, rogue)
00001000                            38  *3      Alive state (1 == alive, 0 == dead)
00001000                            39  *4 & 5  Coordinates
00001000                            40  
00001000                            41  *Player:
00001000                            42  *Byte:  Name:
00001000                            43  *0      Health
00001000                            44  *1      Damage/level
00001000                            45  *2      Class (Knight, mage, rogue)
00001000                            46  *3      Game state
00001000                            47  *4-5+A6 Coordinates
00001000                            48  *6-7    Last coordinates
00001000                            49  *8      Gold
00001000                            50  *9      Potions
00001000                            51  *A      Keys
00001000                            52  *B      Torch life
00001000                            53  
00001000                            54  *Shops:
00001000                            55  *Byte:  Name:
00001000                            56  *0-1    Position
00001000                            57  *2      Potions
00001000                            58  *3      Keys
00001000                            59  *4      Torches
00001000                            60  *5      Damage increase
00001000                            61  
00001000                            62  *Loot:
00001000                            63  *Byte:  Name:
00001000                            64  *0-1    Position
00001000                            65  *2      Potions
00001000                            66  *3      Keys
00001000                            67  *4      Torches
00001000                            68  *5      Gold
00001000                            69  *6      Active State
00001000                            70      
00001000                            71  *Game state : 0 = Pick role/intro | 5 = Move around | 6 = Combat | 7 = Shop | 64 = End game
00001000                            72  *Class      : 1 corresponds to knight - 2 corresponds to mage - 3 corresponds to rogue
00001000                            73  
00001000                            74  
00001000                            75  *-------------------------------------------------------
00001000                            76  *Validation values to be used, modify as needed
00001000                            77  *Add additional validation values as required
00001000                            78  *-------------------------------------------------------
00001000  =00000000                 79  exit        EQU 0      used to exit assembly program
00001000                            80  
00001000                            81  * Text display
00001000  =000000FF                 82  RED         EQU $000000FF   Red colour value
00001000  =0000FF00                 83  GREEN       EQU $0000FF00   Green colour value
00001000  =00FF0000                 84  BLUE        EQU $00FF0000   Blue colour value
00001000  =00FFFFFF                 85  WHITE       EQU $00FFFFFF   White colour value
00001000  =00F000F0                 86  PURPLE      EQU $00F000F0   Purple colour value
00001000  =0000FFFF                 87  GOLD        EQU $0000FFFF   gold colour value
00001000  =00507090                 88  BROWN       EQU $00507090   brown colour value
00001000  =01090000                 89  FONT        EQU $01090000   Font value
00001000                            90  
00001000                            91  * Player
00001000  =00005FF0                 92  PLAYER      EQU $5FF0       Memory address for player information and health
00001000  =00005FF1                 93  PLA_DAMAGE  EQU $5FF1       Memory address for player damage value
00001000  =00005FF2                 94  PLA_CLASS   EQU $5FF2       The memory address for the player class
00001000  =00005FF3                 95  GAME_STATE  EQU $5FF3       The memory address of the game state
00001000  =00005FF6                 96  PLA_P_POS   EQU $5FF6       Memory location of the player's previous position
00001000  =00005FF8                 97  PLA_GOLD    EQU $5FF8       Memory address for player gold
00001000  =00005FF9                 98  PLA_POTIONS EQU $5FF9       Memory address for player potions
00001000  =00005FFA                 99  PLA_KEYS    EQU $5FFA       Memory address for player keys
00001000  =00005FFB                100  PLA_TORCH   EQU $5FFB       Memory address for player torch life
00001000                           101  
00001000                           102  * Enemy
00001000  =00006000                103  FIRST_ENEMY EQU $6000       Memory location of the first enemy
00001000  =00000002                104  ENEMY_MAX   EQU 2           Number of enemies in the game
00001000                           105  
00001000  =00000001                106  DAMAGE      EQU 1           The number of bytes to move from the enemy before reaching the damage
00001000  =00000002                107  CLASS       EQU 2           The number of bytes to move from the enemy before reaching the class
00001000  =00000003                108  ALIVE       EQU 3           The number of bytes to move from the enemy before reaching the alive state
00001000  =00000004                109  POSITION    EQU 4           The number of bytes to move from the enemy before reaching the position
00001000                           110  
00001000                           111  * Shop & Loot
00001000  =00006500                112  FIRST_SHOP  EQU $6500       Memory location of the first shop
00001000  =00000002                113  SHOP_MAX    EQU 2           Number of shops in the game
00001000                           114  
00001000  =00000002                115  S_POTIONS   EQU 2           The number of bytes to move from the shop root before reaching the potions
00001000  =00000003                116  S_KEYS      EQU 3           The number of bytes to move from the shop root before reaching the keys
00001000  =00000004                117  S_TORCHES   EQU 4           The number of bytes to move from the shop root before reaching the torches
00001000  =00000005                118  S_DAMAGE_IN EQU 5           The number of bytes to move from the shop root before reaching the damage increase
00001000                           119  
00001000  =00007000                120  FIRST_LOOT  EQU $7000       Memory location of the first loot pile
00001000  =00000006                121  L_ACTIVE    EQU 6           The number of bytes to move from the loot pile root before reaching the active state
00001000                           122  
00001000                           123  * HUD
00001000  =00003201                124  CSR_POS_MOVE    EQU $3201   The cursor position to draw the HUD to when in movement state
00001000  =00002001                125  CSR_POS_BATTLE  EQU $2001   The cursor position to draw the HUD to when in battle state
00001000  =00001801                126  CSR_POS_SHOP_S  EQU $1801   The cursor position to draw the HUD to when in shop state for shop info
00001000  =00003401                127  CSR_POS_SHOP_P  EQU $3401   The cursor position to draw the HUD to when in shop state for player info
00001000                           128  
00001000                           129  * Game
00001000  =00008156                130  WIN_POINT       EQU $8156   The position the player has to get to to win
00001000  =00006FE0                131  FIRST_DOOR      EQU $6FE0   The memory location of the first locked door
00001000  =00000001                132  DOOR_MAX        EQU 1       The number of locked doors in the game
00001000  =00001000                133  OPEN_DOOR_POS   EQU $1000   The position doors are given when opened
00001000                           134  
00001000  =00000005                135  POTION_PRICE    EQU 5       The price in gold for a potion
00001000  =0000000F                136  KEY_PRICE       EQU 15      The price in gold for a key
00001000  =0000000A                137  TORCH_PRICE     EQU 10      The price in gold for a torch
00001000  =00000014                138  DAMAGE_UP_PRICE EQU 20      The price in gold for a damage upgrade
00001000                           139  
00001000  =0000000F                140  LIFE_PER_TORCH  EQU 15      The life value each torch has
00001000                           141  
00001000  =00008080                142  MAP_START_POINT EQU $8080   The starting coordinates the map draws at
00001000  =0000000F                143  MAP_LENGTH      EQU 15      The number of tiles downwords the map will draw
00001000                           144  
00001000                           145  
00001000                           146  *Start of Game
00001000                           147  start:
00001000  6100 35A6                148      bsr     setup_player
00001004  6100 3224                149      bsr     setup_world
00001008  6100 3518                150      bsr     setup_enemies
0000100C  6100 35D6                151      bsr     setup_shops
00001010  6100 354E                152      bsr     setup_loot
00001014                           153  
00001014  6100 1FF4                154      bsr     welcome    branch to the welcome subroutine
00001018  6100 2E2A                155      bsr     press_continue
0000101C  6100 1FE2                156      bsr     game       branch to the game subroutine
00001020                           157  *Game loop
00003000                           158      org     $3000      the rest of the program is to be located from 3000 onwards
00003000                           159  
00003000                           160  *-------------------------------------------------------
00003000                           161  *-------------------Game Subroutine---------------------
00003000                           162  *-------------------------------------------------------
00003000                           163  game:
00003000  6100 0192                164      bsr     gameloop   branch to gameloop subroutine
00003004  4E75                     165      rts                return from game: subroutine
00003006                           166            
00003006                           167  end:
00003006  FFFF FFFF                168      simhalt
0000300A                           169  
0000300A                           170  *-------------------------------------------------------
0000300A                           171  *-------------------Welcome Subroutine------------------
0000300A                           172  *-------------------------------------------------------
0000300A                           173  welcome:
0000300A  43F9 00004625            174      lea     welcome_msg,A1  assign message to address register A1
00003010  103C 000E                175      move.b  #14,D0          move literal 14 to DO
00003014  4E4F                     176      trap    #15             trap and interpret value in D0
00003016  6100 0870                177      bsr     endl            branch to endl subroutine
0000301A                           178      
0000301A  4E75                     179      rts                     return from welcome: subroutine
0000301C                           180  
0000301C                           181  *-------------------------------------------------------
0000301C                           182  *-------------------Role Picking Subroutine------------------
0000301C                           183  *-------------------------------------------------------
0000301C                           184  pick_role:
0000301C                           185  
0000301C  43F9 000049EE            186      lea     wake_up_msg,A1  assign message to address register A1
00003022  103C 000E                187      move.b  #14,D0          move literal 14 to DO
00003026  4E4F                     188      trap    #15             trap and interpret value in D0
00003028  6100 085E                189      bsr     endl            branch to endl subroutine
0000302C                           190      
0000302C  43F9 00004B06            191      lea     pick_role_msg,A1 assign message to address register A1
00003032  103C 000E                192      move.b  #14,D0           move literal 14 to DO
00003036  4E4F                     193      trap    #15              trap and interpret value in D0
00003038                           194      
00003038  7A03                     195      move.l  #3,D5           Move the number 3 to D5 to tell the program how many options there are
0000303A                           196      
0000303A  6100 00E2                197      bsr     input           branch to the input subroutine
0000303E                           198      
0000303E  6100 0E04                199      bsr     press_continue          Pause the game until a key is pressed
00003042                           200      
00003042  4E75                     201      rts                     return from pick_role subroutine
00003044                           202      
00003044                           203  role_input:
00003044  11C1 5FF2                204      move.b  D1,PLA_CLASS    Move the role number to player class memory location to hold the class number
00003048                           205      
00003048                           206      *Give the player a message depending on the role chosen
00003048  B23C 0001                207      CMP.B   #1,D1
0000304C  6700 0014                208      BEQ     knight_select   Branch to knight message if role selected
00003050                           209      
00003050  B23C 0002                210      CMP.B   #2,D1
00003054  6700 003C                211      BEQ     mage_select     Branch to mage message if role selected
00003058                           212      
00003058  B23C 0003                213      CMP.B   #3,D1
0000305C  6700 0064                214      BEQ     rogue_select    Branch to rogue message if role selected
00003060                           215      
00003060  4E75                     216      rts
00003062                           217      
00003062                           218  knight_select:
00003062  43F9 00004CD9            219      lea     knight_role_msg,A1  assign message to address register A1
00003068  103C 000E                220      move.b  #14,D0              move literal 14 to DO
0000306C  4E4F                     221      trap    #15                 Display the knight message
0000306E                           222      
0000306E  223C 00F000F0            223      move.l  #PURPLE,D1          Load the purple colour
00003074  6100 0E42                224      bsr     change_font_colour  Change the font colour
00003078                           225      
00003078  43F9 00004D2B            226      lea     knight_spec_msg,A1  assign message to address register A1
0000307E  103C 000E                227      move.b  #14,D0              move literal 14 to DO
00003082  4E4F                     228      trap    #15                 Display the knight message
00003084                           229      
00003084  223C 00FFFFFF            230      move.l  #WHITE,D1           Load the white colour
0000308A  6100 0E2C                231      bsr     change_font_colour  Change the font colour
0000308E                           232      
0000308E  6000 0062                233      bra     tutorial_intro      Branch to tutorial subroutine
00003092                           234  
00003092                           235  mage_select:
00003092  43F9 00004D79            236      lea     mage_role_msg,A1    Assign message to address register A1
00003098  103C 000E                237      move.b  #14,D0              move literal 14 to DO
0000309C  4E4F                     238      trap    #15                 Display the mage message
0000309E                           239      
0000309E  223C 00F000F0            240      move.l  #PURPLE,D1          Load the purple colour
000030A4  6100 0E12                241      bsr     change_font_colour  Change the font colour
000030A8                           242      
000030A8  43F9 00004DC3            243      lea     mage_spec_msg,A1    assign message to address register A1
000030AE  103C 000E                244      move.b  #14,D0              move literal 14 to DO
000030B2  4E4F                     245      trap    #15                 Display the mage message
000030B4                           246      
000030B4  223C 00FFFFFF            247      move.l  #WHITE,D1           Load the white colour
000030BA  6100 0DFC                248      bsr     change_font_colour  Change the font colour
000030BE                           249      
000030BE  6000 0032                250      bra     tutorial_intro      Branch to tutorial subroutine
000030C2                           251  
000030C2                           252  rogue_select:
000030C2  43F9 00004E06            253      lea     rogue_role_msg,A1   Assign message to address register A1
000030C8  103C 000E                254      move.b  #14,D0              move literal 14 to DO
000030CC  4E4F                     255      trap    #15                 Display the rogue message
000030CE                           256      
000030CE  223C 00F000F0            257      move.l  #PURPLE,D1          Load the purple colour
000030D4  6100 0DE2                258      bsr     change_font_colour  Change the font colour
000030D8                           259      
000030D8  43F9 00004E4E            260      lea     rogue_spec_msg,A1   Assign message to address register A1
000030DE  103C 000E                261      move.b  #14,D0              move literal 14 to DO
000030E2  4E4F                     262      trap    #15                 Display the rogue message
000030E4                           263      
000030E4  223C 00FFFFFF            264      move.l  #WHITE,D1           Load the white colour
000030EA  6100 0DCC                265      bsr     change_font_colour  Change the font colour
000030EE                           266      
000030EE  6000 0002                267      bra     tutorial_intro      Branch to tutorial subroutine
000030F2                           268      
000030F2                           269  tutorial_intro:
000030F2  6100 0794                270      bsr     endl                Break to a new line
000030F6                           271  
000030F6  223C 000000FF            272      move.l  #RED,D1             Load the purple colour
000030FC  6100 0DBA                273      bsr     change_font_colour  Change the font colour
00003100                           274      
00003100  43F9 000048D6            275      lea     tutorial_msg,A1     Load tutorial message to address register A1
00003106  103C 000E                276      move.b  #14,D0              move literal 14 to DO
0000310A  4E4F                     277      trap    #15                 Display the tutorial message
0000310C                           278      
0000310C  223C 00FFFFFF            279      move.l  #WHITE,D1           Load the white colour
00003112  6100 0DA4                280      bsr     change_font_colour  Change the font colour
00003116                           281      
00003116  11FC 0005 5FF3           282      move.b  #5,GAME_STATE       Change the game state to the movement state
0000311C                           283      
0000311C  4E75                     284      rts
0000311E                           285      
0000311E                           286  *-------------------------------------------------------
0000311E                           287  *---------Gameplay Input Values Subroutine--------------
0000311E                           288  *-------------------------------------------------------    
0000311E                           289  input:
0000311E  6100 0768                290      bsr     endl            Branch to end line subroutine
00003122  6100 0DA6                291      bsr     get_cursor_pos  Get the position of the cursor in D3
00003126                           292      
00003126  43F9 00004C7D            293      lea     input_nums_msg,A1 assign message to address register A1
0000312C  103C 000E                294      move.b  #14,D0          move literal 14 to DO
00003130  4E4F                     295      trap    #15             Display the "enter number" message
00003132                           296      
00003132  2205                     297      move.l  D5,D1           Move the number of options to D1 to display it
00003134  103C 0003                298      move.b  #3,D0           move literal 3 to DO
00003138  4E4F                     299      trap    #15             Display the number in D1 to show the input range
0000313A                           300      
0000313A  43F9 00004C96            301      lea     colon_msg,A1    assign message to address register A1
00003140  103C 000E                302      move.b  #14,D0          move literal 14 to DO
00003144  4E4F                     303      trap    #15             Display a colon after the number range
00003146                           304      
00003146  103C 0004                305      move.b  #4,D0           Move the number 4 to D0
0000314A  4E4F                     306      trap    #15             Take input
0000314C                           307      
0000314C  1A01                     308      move.b  D1,D5           Move the input to D5 for later
0000314E                           309      
0000314E  3203                     310      move.w  D3,D1           Move the cursor position of the start of the line
00003150  103C 000B                311      move.b  #11,D0          Move the number literal 11 to D0 for trap command
00003154  4E4F                     312      trap    #15             Move the cursor back to the start of the line
00003156                           313      
00003156  43F9 00004882            314      lea     blank_msg,A1    Load the blank message into A1 to wipe the line blank
0000315C  103C 000E                315      move.b  #14,D0          Move number literal to D0 for trap command
00003160  4E4F                     316      trap    #15             Display the loaded message
00003162                           317      
00003162  103C 000B                318      move.b  #11,D0          Move the number literal 11 to D0 for trap command
00003166  4E4F                     319      trap    #15             Move the cursor back to the start of the line
00003168                           320      
00003168  4281                     321      clr.l   D1              Clear D1 of large values
0000316A  1205                     322      move.b  D5,D1           Move the input back to D1
0000316C                           323      
0000316C                           324  manage_input:
0000316C  B27C 0001                325      CMP     #1,D1           Check input against minimum value
00003170  6D00 0014                326      BLT     invalid_input   Error if less than 1
00003174                           327      
00003174  B245                     328      CMP     D5,D1           Compare input against max value
00003176  6E00 000E                329      BGT     invalid_input   Error if more than max value
0000317A                           330      
0000317A  0C38 0000 5FF3           331      CMP.B   #0,GAME_STATE   Check which state the game is in
00003180  6700 FEC2                332      BEQ     role_input      Branch to the manage input for the role picking
00003184                           333      
00003184  4E75                     334      rts                     Return out of subroutine
00003186                           335  
00003186                           336  invalid_input:
00003186  43F9 00004C99            337      lea     input_error_msg,A1 assign message to address register A1
0000318C  103C 000E                338      move.b  #14,D0          move literal 14 to DO
00003190  4E4F                     339      trap    #15             Display the error message
00003192                           340      
00003192  608A                     341      bra     input           Go back to taking input
00003194                           342  
00003194                           343  *-------------------------------------------------------
00003194                           344  *----------------Gameloop (main loop)-------------------
00003194                           345  *------------------------------------------------------- 
00003194                           346  gameloop:
00003194  6100 06C2                347      bsr     clear_screen    clears the screen  
00003198  6100 0308                348      bsr     draw            branch to draw screen subroutine
0000319C  6100 035C                349      bsr     draw_hud
000031A0  6100 0008                350      bsr     update          branch to update game subroutine 
000031A4  6100 0666                351      bsr     gameplay        branch to gameplay subroutine
000031A8  60EA                     352      bra     gameloop        Continue looping the game loop     
000031AA                           353  
000031AA                           354  *-------------------------------------------------------
000031AA                           355  *----------------Update Quest Progress------------------
000031AA                           356  *  Complete Quest
000031AA                           357  *------------------------------------------------------- 
000031AA                           358  update:
000031AA  0C38 0000 5FF0           359      CMP.B   #0,PLAYER           Check if the player health is zero
000031B0  6F00 0022                360      BLE     player_dead         Player is dead if health is zero or below
000031B4                           361      
000031B4  BDFC 00008156            362      CMP.L   #WIN_POINT,A6       Check if the player is standing on the win point
000031BA  6700 0042                363      BEQ     won_game            Branch to the won game subroutine
000031BE                           364  
000031BE  0C38 0005 5FF3           365      CMP.B   #5,GAME_STATE       Check which state the game is in
000031C4  6700 0066                366      BEQ     movement_checks     Check for enemies and shops if in movement state
000031C8  0C38 0006 5FF3           367      CMP.B   #6,GAME_STATE       Check which state the game is in
000031CE  6700 029A                368      BEQ     enemy_alive_check   Check if enemy is dead if in combat
000031D2                           369      
000031D2  4E75                     370      rts
000031D4                           371      
000031D4                           372  *-------------------------------------------------------
000031D4                           373  *---------------------Win or Lose----------------------- 
000031D4                           374  player_dead:
000031D4  6100 06B2                375      bsr     endl            Break to new line
000031D8                           376      
000031D8  43F9 00005401            377      lea     death_msg,A1    Load the death message
000031DE  103C 000E                378      move.b  #14,D0          Move byte #14 to D0 for the trap command
000031E2  4E4F                     379      trap    #15             Display the loaded message
000031E4                           380  
000031E4  6100 0C5E                381      bsr     press_continue  Pause to get input
000031E8  6100 066E                382      bsr     clear_screen    Clear the screen
000031EC  6100 02E2                383      bsr     draw_graveyard  Draw a graveyard
000031F0  6100 0696                384      bsr     endl            Break to new line
000031F4  11FC 0040 5FF3           385      move.b  #64,GAME_STATE  Set the game state to end game
000031FA  6000 0668                386      bra     replay          Give the player the option to restart or quit
000031FE                           387      
000031FE                           388  won_game:
000031FE  6100 0688                389      bsr     endl            Break to new line
00003202                           390      
00003202  43F9 00005466            391      lea     win_msg,A1      Load the win message
00003208  103C 000E                392      move.b  #14,D0          Move byte #14 to D0 for the trap command
0000320C  4E4F                     393      trap    #15             Display the loaded message
0000320E                           394  
0000320E  6100 0C34                395      bsr     press_continue  Pause to get input
00003212  6100 0644                396      bsr     clear_screen    Clear the screen
00003216  6100 0670                397      bsr     endl            Break to new line
0000321A  6100 02C2                398      bsr     draw_castle     Draw a castle
0000321E  6100 0668                399      bsr     endl            Break to new line
00003222  11FC 0040 5FF3           400      move.b  #64,GAME_STATE  Set the game state to end game
00003228  6000 063A                401      bra     replay          Give the player the option to restart or quit
0000322C                           402  
0000322C                           403  *-------------------------------------------------------
0000322C                           404  *--------------------Movement State--------------------- 
0000322C                           405  movement_checks:
0000322C  6100 0100                406      bsr     manage_torch    Check if the torch life is zero and if damage player if so
00003230  6100 0016                407      bsr     loot_piles_check Check for loot piles under the player 
00003234  6100 012C                408      bsr     enemies_check   Check for enemies beside the player
00003238  0C38 0005 5FF3           409      CMP.B   #5,GAME_STATE   Compare the movement gamestate number with the current gamestate
0000323E  6600 0C36                410      BNE     return          Return from the loop if the game is not in the movement state anymore
00003242  6100 01A8                411      bsr     shops_check     Check for shops beside the player
00003246                           412      
00003246  4E75                     413      rts
00003248                           414  
00003248                           415  *-------------------Loot pile checks--------------------
00003248                           416  loot_piles_check:
00003248  4BF8 7000                417      lea     FIRST_LOOT,A5   Load the memory address of the first loot pile
0000324C  1A3C 0000                418      move.b  #0,D5           Move the starting loot number to D5
00003250  6100 0004                419      bsr     loot_pile_loop  Loop through all loot piles
00003254  4E75                     420      rts                     Return from subroutine
00003256                           421      
00003256                           422  loot_pile_loop:
00003256  BA3C 0002                423      CMP.B   #ENEMY_MAX,D5   Compare the loot number with the maximum enemy number
0000325A  6C00 0C1A                424      BGE     return          Return from the loop if the current loot number is greater than or equal to the max
0000325E                           425  
0000325E  6100 000A                426      bsr     loot_pile_check Check for a loot pile
00003262                           427      
00003262  5205                     428      add.b   #1,D5           Add to the current loot number
00003264  DAFC 0010                429      add.w   #16,A5          Add to the current loot pointer to move to the next loot pile
00003268  60EC                     430      bra     loot_pile_loop  Keep looping the loot piles
0000326A                           431      
0000326A                           432  loot_pile_check:
0000326A  5C4D                     433      add.w   #L_ACTIVE,A5    Move to the active state
0000326C  0C15 0000                434      CMP.B   #0,(A5)         Check if the loot is active
00003270  5D4D                     435      sub.w   #L_ACTIVE,A5    Move to the active state
00003272  6700 0C02                436      BEQ     return          Return if not active
00003276                           437  
00003276  3415                     438      move.w  (A5),D2         Move the loot pile position to D2 for large value comparison
00003278  BDC2                     439      CMP.L   D2,A6           Check if the player is on a loot pile   
0000327A  6700 0004                440      BEQ     pickup_loot     Pickup the loot
0000327E                           441      
0000327E  4E75                     442      rts     Return if not touching a loot pile
00003280                           443      
00003280                           444  pickup_loot:
00003280  6100 0606                445      bsr     endl                Line break
00003284                           446      
00003284  223C 0000FFFF            447      move.l  #GOLD,D1            Load gold colour
0000328A  6100 0C2C                448      bsr     change_font_colour  Change the font colour
0000328E                           449      
0000328E  43F9 0000565C            450      LEA     pickup_loot_msg,A1  Load the encounter message int A1
00003294  103C 000E                451      move.b  #14,D0              Move #14 to D0 to display message
00003298  4E4F                     452      trap    #15                 Display the loaded message
0000329A                           453      
0000329A  544D                     454      add.w   #S_POTIONS,A5       Move to potions number
0000329C  1215                     455      move.b  (A5),D1            Move the loot potions number to D1 and increment
0000329E  D338 5FF9                456      add.b   D1,PLA_POTIONS      Give the player the number of potions in the loot
000032A2                           457      
000032A2  43F9 00005680            458      LEA     pickup_potion_msg,A1  Load the pickup potions message into A1
000032A8  103C 000E                459      move.b  #14,D0              Move #14 to D0 to display message
000032AC  4E4F                     460      trap    #15                 Display the loaded message
000032AE                           461      
000032AE  384D                     462      move.w  A5,A4               Move the item number to A4 to draw it
000032B0  6100 0342                463      bsr     draw_item_number    Draw the item number
000032B4  6100 05D2                464      bsr     endl                Break to new line
000032B8  524D                     465      add.w   #1,A5               Move to the next item in the loot pile
000032BA                           466      
000032BA  1215                     467      move.b  (A5),D1             Move the key number to D1 and increment
000032BC  D338 5FFA                468      add.b   D1,PLA_KEYS         Give the player the number of keys in the loot
000032C0                           469      
000032C0  43F9 0000568A            470      LEA     pickup_key_msg,A1   Load the pickup key message into A1
000032C6  103C 000E                471      move.b  #14,D0              Move #14 to D0 to display message
000032CA  4E4F                     472      trap    #15                 Display the loaded message
000032CC                           473      
000032CC  384D                     474      move.w  A5,A4               Move the item number to A4 to draw it
000032CE  6100 0324                475      bsr     draw_item_number    Draw the item number
000032D2  6100 05B4                476      bsr     endl                Break to new line
000032D6  524D                     477      add.w   #1,A5               Move to the next item in the loot pile
000032D8                           478      
000032D8  1215                     479      move.b  (A5),D1             Move the torch number to D1 and increment
000032DA  D338 5FFB                480      add.b   D1,PLA_TORCH        Give the player the number of torches in the loot
000032DE                           481      
000032DE  43F9 00005691            482      LEA     pickup_torch_msg,A1 Load the pickup torch message into A1
000032E4  103C 000E                483      move.b  #14,D0              Move #14 to D0 to display message
000032E8  4E4F                     484      trap    #15                 Display the loaded message
000032EA                           485      
000032EA  384D                     486      move.w  A5,A4               Move the item number to A4 to draw it
000032EC  6100 0306                487      bsr     draw_item_number    Draw the item number
000032F0  6100 0596                488      bsr     endl                Break to new line
000032F4  524D                     489      add.w   #1,A5               Move to the next item in the loot pile
000032F6                           490      
000032F6  1215                     491      move.b  (A5),D1             Move the torch number to D1 and increment
000032F8  D338 5FF8                492      add.b   D1,PLA_GOLD         Give the player the number of gold in the loot
000032FC                           493      
000032FC  43F9 00005678            494      LEA     pickup_gold_msg,A1  Load the pickup gold message int A1
00003302  103C 000E                495      move.b  #14,D0              Move #14 to D0 to display message
00003306  4E4F                     496      trap    #15                 Display the loaded message
00003308                           497      
00003308  384D                     498      move.w  A5,A4               Move the item number to A4 to draw it
0000330A  6100 02E8                499      bsr     draw_item_number    Draw the item number
0000330E  6100 0578                500      bsr     endl                Break to new line
00003312  524D                     501      add.w   #1,A5               Move to the next item in the loot pile
00003314                           502      
00003314  1ABC 0000                503      move.b  #0,(A5)             Set the loot to not active
00003318  5D4D                     504      sub.w   #L_ACTIVE,A5        Move to active state
0000331A                           505      
0000331A  223C 00FFFFFF            506      move.l  #WHITE,D1           Load the white colour
00003320  6100 0B96                507      bsr     change_font_colour  Change the font colour
00003324                           508      
00003324  6100 0B1E                509      bsr     press_continue      Wait for user input
00003328  6100 01D0                510      bsr     draw_hud            Re-draw the hud
0000332C                           511      
0000332C  4E75                     512      rts
0000332E                           513  
0000332E                           514  *---------------------Manage Torch----------------------
0000332E                           515  manage_torch:
0000332E  0C38 0000 5FFB           516      CMP.B   #0,PLA_TORCH    Compare the torch life with zero
00003334  6E00 0B40                517      BGT     return          Return if the torch life is greater than zero
00003338                           518      
00003338  5338 5FF0                519      sub.b   #1,PLAYER       Remove one health from the player
0000333C                           520      
0000333C  6100 054A                521      bsr     endl            Break to new line
00003340                           522      
00003340  223C 000000FF            523      move.l  #RED,D1
00003346  6100 0B70                524      bsr     change_font_colour  Change the font colour
0000334A                           525      
0000334A  43F9 00005644            526      lea     no_torch_msg,A1 Load the no torch message into A1
00003350  103C 000E                527      move.b  #14,D0          Move the number literal 14 into D0 for trap command
00003354  4E4F                     528      trap    #15             Display the loaded message
00003356                           529      
00003356  223C 00FFFFFF            530      move.l  #WHITE,D1
0000335C  6100 0B5A                531      bsr     change_font_colour  Change the font colour
00003360                           532      
00003360  4E75                     533      rts                     Return from the subroutine
00003362                           534  
00003362                           535  *--------------------Enemy Checking--------------------- 
00003362                           536  enemies_check:
00003362  4BF8 6000                537      lea     FIRST_ENEMY,A5  Load the memory address of the first enemy
00003366  1A3C 0000                538      move.b  #0,D5           Move the starting enemy number to D5
0000336A  6100 0004                539      bsr     enemies_loop    Loop through all enemies
0000336E  4E75                     540      rts                     Return from subroutine
00003370                           541      
00003370                           542  enemies_loop:
00003370  BA3C 0002                543      CMP.B   #ENEMY_MAX,D5   Compare the enemy number with the maximum enemy number
00003374  6C00 0B00                544      BGE     return          Return from the loop if the current enemy number is greater than or equal to the max
00003378                           545  
00003378  6100 0014                546      bsr     enemy_check     Check for an enemy
0000337C                           547      
0000337C  0C38 0005 5FF3           548      CMP.B   #5,GAME_STATE   Compare the movement gamestate number with the current gamestate
00003382  6600 0AF2                549      BNE     return          Return from the loop if the game is not in the movement state anymore
00003386                           550      
00003386  5205                     551      add.b   #1,D5           Add to the current enemy number
00003388  DAFC 000C                552      add.w   #12,A5          Add to the current enemy pointer to move to the next enemy (16 for next enemy - 4 to get back from position)
0000338C  60E2                     553      bra     enemies_loop    Keep looping the enemies
0000338E                           554      
0000338E                           555  
0000338E                           556  enemy_check:
0000338E  564D                     557      add.w   #ALIVE,A5       Move into enemy information to check if its alive
00003390  0C1D 0000                558      CMP.B   #0,(A5)+        Check if the enemy is alive
00003394  6700 0AE0                559      BEQ     return          Return from the check if the enemy is dead
00003398                           560      
00003398  340E                     561      move.w  A6,D2           Move the player position to D2
0000339A                           562      
0000339A                           563      *Check if the player is beside an enemy
0000339A  0442 0010                564      sub.w   #16,D2          Check north
0000339E  B455                     565      CMP.W   (A5),D2           
000033A0  6700 0020                566      BEQ     enter_combat    Enter the player into combat
000033A4                           567      
000033A4  0642 0020                568      add.w   #32,D2          Check south
000033A8  B455                     569      CMP.W   (A5),D2           
000033AA  6700 0016                570      BEQ     enter_combat    Enter the player into combat
000033AE                           571      
000033AE  0442 0011                572      sub.w   #17,D2          Check west
000033B2  B455                     573      CMP.W   (A5),D2           
000033B4  6700 000C                574      BEQ     enter_combat    Enter the player into combat
000033B8                           575      
000033B8  5442                     576      add.w   #2,D2           Check east
000033BA  B455                     577      CMP.W   (A5),D2           
000033BC  6700 0004                578      BEQ     enter_combat    Enter the player into combat
000033C0                           579      
000033C0  4E75                     580      rts     Return if not touching an enemy
000033C2                           581      
000033C2                           582  enter_combat:
000033C2  594D                     583      sub.w   #4,A5               Get the memory address of the enemy opposed to it's position
000033C4  11FC 0006 5FF3           584      move.b  #6,GAME_STATE       Move to combat state
000033CA                           585      
000033CA  6100 04BC                586      bsr     endl                Line break
000033CE                           587      
000033CE  43F9 00004F83            588      LEA     encounter_msg,A1    Load the encounter message int A1
000033D4  103C 000E                589      move.b  #14,D0              Move #14 to D0 to display message
000033D8  4E4F                     590      trap    #15                 Display the loaded message
000033DA                           591      
000033DA  6100 0A68                592      bsr     press_continue      Branch to the press to continue subroutine
000033DE                           593      
000033DE  6100 0478                594      bsr     clear_screen        Clear the screen
000033E2                           595      
000033E2  6100 00DE                596      bsr     draw_skeleton       Draw the enemy
000033E6  6100 022E                597      bsr     draw_battle_info    Draw the info
000033EA                           598      
000033EA  4E75                     599      rts
000033EC                           600        
000033EC                           601  *--------------------Shop Checking----------------------
000033EC                           602  shops_check:
000033EC  4BF8 6500                603      lea     FIRST_SHOP,A5   Load the memory address of the first shop
000033F0  1A3C 0000                604      move.b  #0,D5           Move the starting shop number to D5
000033F4  6100 0004                605      bsr     shops_loop      Loop through all shops
000033F8  4E75                     606      rts                     Return from subroutine
000033FA                           607      
000033FA                           608  shops_loop:
000033FA  BA3C 0002                609      CMP.B   #SHOP_MAX,D5    Compare the shop number with the maximum shop number
000033FE  6C00 0A76                610      BGE     return          Return from the loop if the current shop number is greater than or equal to the max
00003402                           611      
00003402  6100 0014                612      bsr     shop_check      Check for a shop
00003406                           613      
00003406  0C38 0005 5FF3           614      CMP.B   #5,GAME_STATE   Compare the movement gamestate number with the current gamestate
0000340C  6600 0A68                615      BNE     return          Return from the loop if the game is not in the movement state anymore
00003410                           616      
00003410  5205                     617      add.b   #1,D5           Add to the current shop number
00003412  DAFC 0010                618      add.w   #16,A5          Add to the current shop pointer to move to the next shop
00003416  60E2                     619      bra     shops_loop      Keep looping the shops
00003418                           620      
00003418                           621  shop_check:    
00003418  340E                     622      move.w  A6,D2           Move the player position to D2
0000341A                           623      
0000341A                           624      *Check if the player is beside a shop
0000341A  0442 0010                625      sub.w   #16,D2          Check north
0000341E  B455                     626      CMP.W   (A5),D2           
00003420  6700 0020                627      BEQ     enter_shop      The player enters a shop
00003424                           628      
00003424  0642 0020                629      add.w   #32,D2          Check south
00003428  B455                     630      CMP.W   (A5),D2           
0000342A  6700 0016                631      BEQ     enter_shop      The player enters a shop
0000342E                           632      
0000342E  0442 0011                633      sub.w   #17,D2          Check west
00003432  B455                     634      CMP.W   (A5),D2           
00003434  6700 000C                635      BEQ     enter_shop      The player enters a shop
00003438                           636      
00003438  5442                     637      add.w   #2,D2           Check east
0000343A  B455                     638      CMP.W   (A5),D2           
0000343C  6700 0004                639      BEQ     enter_shop      The player enters a shop
00003440                           640      
00003440  4E75                     641      rts     Return if not touching a shop
00003442                           642      
00003442                           643  enter_shop:
00003442  11FC 0007 5FF3           644      move.b  #7,GAME_STATE       Move to shop game state
00003448                           645      
00003448  6100 043E                646      bsr     endl                Line break
0000344C                           647      
0000344C  43F9 00005507            648      LEA     shop_enter_msg,A1   Load the encounter message int A1
00003452  103C 000E                649      move.b  #14,D0              Move #14 to D0 to display message
00003456  4E4F                     650      trap    #15                 Display the loaded message
00003458                           651      
00003458  6100 09EA                652      bsr     press_continue      Branch to the press to continue subroutine
0000345C                           653      
0000345C  6100 03FA                654      bsr     clear_screen        Clear the screen
00003460                           655      
00003460  6100 008A                656      bsr     draw_merchant       Draw the merchant
00003464  6100 022A                657      bsr     draw_shop_info      Draw the info
00003468                           658      
00003468  4E75                     659      rts
0000346A                           660  
0000346A                           661  *-------------------------------------------------------
0000346A                           662  *---------------------Combat State---------------------- 
0000346A                           663  enemy_alive_check:
0000346A  0C15 0000                664      CMP.B   #0,(A5)     Compare the enemy health with zero
0000346E  6F00 0004                665      BLE     enemy_died  If the enemy health is zero or below, they died
00003472                           666      
00003472  4E75                     667      rts
00003474                           668      
00003474                           669  enemy_died:
00003474  6100 0412                670      bsr     endl            Break to a new line
00003478                           671  
00003478  43F9 000053CB            672      lea     battle_won_msg,A1   Load the won battle message
0000347E  103C 000E                673      move.b  #14,D0              Move the literal #14 to D0 for trap task #14
00003482  4E4F                     674      trap    #15                 Display the message
00003484                           675      
00003484  11FC 0005 5FF3           676      move.b  #5,GAME_STATE   Set the game state mack to movement state
0000348A  564D                     677      add.w   #ALIVE,A5       Move from the enemy health to its alive status
0000348C  1ABC 0000                678      move.b  #0,(A5)         Set the enemy as dead
00003490                           679      
00003490  6100 09B2                680      bsr     press_continue
00003494                           681      
00003494  6100 03C2                682      bsr     clear_screen    Clear the screen
00003498  6100 0008                683      bsr     draw            Draw the map for first frame back in movement
0000349C  6100 005C                684      bsr     draw_hud        Draw the hud for first frame back in movement
000034A0                           685      
000034A0  4E75                     686      rts
000034A2                           687      
000034A2                           688  *-------------------------------------------------------
000034A2                           689  *-----------------Draw Quest Updates--------------------
000034A2                           690  * Draw the game progress information, status regarding
000034A2                           691  * quest
000034A2                           692  *------------------------------------------------------- 
000034A2                           693  draw:
000034A2  0C38 0005 5FF3           694      CMP.B   #5,GAME_STATE   Check which state the game is in
000034A8  6700 0A2E                695      BEQ     draw_loop       If in the movement state, draw the map
000034AC  0C38 0006 5FF3           696      CMP.B   #6,GAME_STATE   Check which state the game is in
000034B2  6700 000E                697      BEQ     draw_skeleton   If in the combat state, draw the enemy
000034B6  0C38 0007 5FF3           698      CMP.B   #7,GAME_STATE   Check which state the game is in
000034BC  6700 002E                699      BEQ     draw_merchant   If in the shop state, draw the enemy
000034C0  4E75                     700      rts
000034C2                           701      
000034C2                           702  draw_skeleton:
000034C2  43F9 0000584A            703      lea     skeleton_msg,A1 Load the skeleton message
000034C8  103C 000E                704      move.b  #14,D0          Move literal 14 for display message trap command
000034CC  4E4F                     705      trap    #15             Display the loaded message
000034CE                           706      
000034CE  4E75                     707      rts
000034D0                           708      
000034D0                           709  draw_graveyard:
000034D0  43F9 00005798            710      lea     graveyard_msg,A1 Load the graveyard message
000034D6  103C 000E                711      move.b  #14,D0           Move literal 14 for display message trap command
000034DA  4E4F                     712      trap    #15              Display the loaded message
000034DC  4E75                     713      rts                      Return from the subroutine
000034DE                           714  
000034DE                           715  draw_castle:
000034DE  43F9 00005A69            716      lea     castle_msg,A1   Load the castle message
000034E4  103C 000E                717      move.b  #14,D0          Move literal 14 for display message trap command
000034E8  4E4F                     718      trap    #15             Display the loaded message
000034EA  4E75                     719      rts                     Return from the subroutine
000034EC                           720      
000034EC                           721  draw_merchant:
000034EC  43F9 00005942            722      lea     merchant_msg,A1  Load the merchant message
000034F2  103C 000E                723      move.b  #14,D0           Move literal 14 for display message trap command
000034F6  4E4F                     724      trap    #15              Display the loaded message
000034F8                           725      
000034F8  4E75                     726      rts
000034FA                           727      
000034FA                           728  draw_hud:
000034FA  0C38 0005 5FF3           729      CMP.B   #5,GAME_STATE       Check which state the game is in
00003500  6700 0018                730      BEQ     draw_player_info    If in the movement state, draw the player info
00003504  0C38 0006 5FF3           731      CMP.B   #6,GAME_STATE       Check which state the game is in
0000350A  6700 010A                732      BEQ     draw_battle_info    If in the combat state, draw the combat info
0000350E  0C38 0007 5FF3           733      CMP.B   #7,GAME_STATE       Check which state the game is in
00003514  6700 017A                734      BEQ     draw_shop_info      If in the shop state, draw the shop info
00003518                           735      
00003518  4E75                     736      rts
0000351A                           737  
0000351A                           738  draw_player_info:
0000351A  323C 00FF                739      move.w  #255,D1         Move the word #255 to D1 to set the type of trap 11
0000351E  103C 000B                740      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
00003522  4E4F                     741      trap    #15             Trap to get the cursor position in D1
00003524                           742      
00003524  3601                     743      move.w  D1,D3           Move the current cursor position to D3 for later
00003526                           744      
00003526                           745      * Display the player health
00003526  323C 3201                746      move.w  #CSR_POS_MOVE,D1           
0000352A  4E4F                     747      trap    #15             Set the cursor position with trap command 11
0000352C  4241                     748      clr     D1              Clear D1 of the cursor position
0000352E                           749      
0000352E  43F9 00005359            750      lea     health_msg,A1   Load the hud message
00003534  103C 000E                751      move.b  #14,D0          Move literal 14 for display message trap command
00003538  4E4F                     752      trap    #15             Display the loaded message
0000353A                           753      
0000353A  1238 5FF0                754      move.b  PLAYER,D1       Move the player health value to D1 to display
0000353E  103C 0003                755      move.b  #3,D0           Move literal 3 for display number trap command
00003542  4E4F                     756      trap    #15             Display the number in D1
00003544                           757      
00003544                           758      * Display the torch life
00003544  103C 000B                759      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
00003548  323C 3201                760      move.w  #CSR_POS_MOVE,D1         
0000354C  5241                     761      add.w   #1,D1  
0000354E  4E4F                     762      trap    #15             Set the cursor position with trap command 11
00003550  4241                     763      clr     D1              Clear D1 of the cursor position
00003552                           764      
00003552  43F9 00005371            765      lea     torch_msg,A1   Load the hud message
00003558  103C 000E                766      move.b  #14,D0          Move literal 14 for display message trap command
0000355C  4E4F                     767      trap    #15             Display the loaded message
0000355E                           768      
0000355E  1238 5FFB                769      move.b  PLA_TORCH,D1    Move the player torch life value to D1 to display
00003562  103C 0003                770      move.b  #3,D0           Move literal 3 for display number trap command
00003566  4E4F                     771      trap    #15             Display the number in D1
00003568                           772      
00003568                           773      * Display the inventory
00003568  103C 000B                774      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
0000356C  323C 3201                775      move.w  #CSR_POS_MOVE,D1
00003570  5441                     776      add.w   #2,D1          
00003572  4E4F                     777      trap    #15             Set the cursor position with trap command 11
00003574  4241                     778      clr     D1              Clear D1 of the cursor position
00003576                           779      
00003576  43F9 0000538B            780      lea     inventory_msg,A1   Load the hud message
0000357C  103C 000E                781      move.b  #14,D0          Move literal 14 for display message trap command
00003580  4E4F                     782      trap    #15             Display the loaded message
00003582                           783      
00003582                           784      * Display the player gold
00003582  103C 000B                785      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
00003586  323C 3201                786      move.w  #CSR_POS_MOVE,D1         
0000358A  5641                     787      add.w   #3,D1  
0000358C  4E4F                     788      trap    #15             Set the cursor position with trap command 11
0000358E  4241                     789      clr     D1              Clear D1 of the cursor position
00003590                           790      
00003590  43F9 00005396            791      lea     gold_msg,A1   Load the hud message
00003596  103C 000E                792      move.b  #14,D0          Move literal 14 for display message trap command
0000359A  4E4F                     793      trap    #15             Display the loaded message
0000359C                           794      
0000359C  49F8 5FF8                795      lea     PLA_GOLD,A4
000035A0  6100 0052                796      bsr     draw_item_number
000035A4                           797      
000035A4                           798      * Display the player potions
000035A4  103C 000B                799      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
000035A8  323C 3201                800      move.w  #CSR_POS_MOVE,D1         
000035AC  5841                     801      add.w   #4,D1  
000035AE  4E4F                     802      trap    #15             Set the cursor position with trap command 11
000035B0  4241                     803      clr     D1              Clear D1 of the cursor position
000035B2                           804      
000035B2  43F9 000053A5            805      lea     potions_msg,A1   Load the hud message
000035B8  103C 000E                806      move.b  #14,D0          Move literal 14 for display message trap command
000035BC  4E4F                     807      trap    #15             Display the loaded message
000035BE                           808      
000035BE  49F8 5FF9                809      lea     PLA_POTIONS,A4
000035C2  6100 0030                810      bsr     draw_item_number
000035C6                           811      
000035C6                           812      * Display the player keys
000035C6  103C 000B                813      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
000035CA  323C 3201                814      move.w  #CSR_POS_MOVE,D1         
000035CE  5A41                     815      add.w   #5,D1  
000035D0  4E4F                     816      trap    #15             Set the cursor position with trap command 11
000035D2  4241                     817      clr     D1              Clear D1 of the cursor position
000035D4                           818      
000035D4  43F9 0000539E            819      lea     key_msg,A1   Load the hud message
000035DA  103C 000E                820      move.b  #14,D0          Move literal 14 for display message trap command
000035DE  4E4F                     821      trap    #15             Display the loaded message
000035E0                           822      
000035E0  49F8 5FFA                823      lea     PLA_KEYS,A4
000035E4  6100 000E                824      bsr     draw_item_number
000035E8                           825      
000035E8  3203                     826      move.w  D3,D1           Move the current cursor position to D3 for later
000035EA                           827      
000035EA  103C 000B                828      move.b  #11,D0          Move the byte #11 to D0 for trap command 11          
000035EE  4E4F                     829      trap    #15             Set the cursor position with trap command 11
000035F0                           830      
000035F0  4241                     831      clr     D1              Clear D1 for later use
000035F2                           832      
000035F2  4E75                     833      rts
000035F4                           834      
000035F4                           835  draw_item_number:
000035F4  103C 000E                836      move.b  #14,D0          Move literal 3 for display number trap command
000035F8  43F9 000053FD            837      lea     bracket_open_msg,A1
000035FE  4E4F                     838      trap    #15
00003600                           839  
00003600  103C 0003                840      move.b  #3,D0           Move literal 3 for display number trap command
00003604  1214                     841      move.b  (A4),D1         Move the value in the register A4 to D1 to display
00003606  4E4F                     842      trap    #15             Display the number in D1
00003608                           843      
00003608  103C 000E                844      move.b  #14,D0          Move literal 3 for display number trap command
0000360C  43F9 000053FF            845      lea     bracket_close_msg,A1
00003612  4E4F                     846      trap    #15
00003614  4E75                     847      rts
00003616                           848      
00003616                           849  
00003616                           850  draw_battle_info:
00003616  323C 00FF                851      move.w  #255,D1         Move the word #255 to D1 to set the type of trap 11
0000361A  103C 000B                852      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
0000361E  4E4F                     853      trap    #15             Trap to get the cursor position in D1
00003620                           854      
00003620  3601                     855      move.w  D1,D3           Move the current cursor position to D3 for later
00003622                           856      
00003622                           857      * Move cursor to draw player info
00003622  323C 2001                858      move.w  #CSR_POS_BATTLE,D1           
00003626  4E4F                     859      trap    #15             Set the cursor position with trap command 11
00003628  4241                     860      clr     D1              Clear D1 of the cursor position
0000362A                           861      
0000362A  43F9 00005359            862      lea     health_msg,A1   Load the hud message
00003630  103C 000E                863      move.b  #14,D0          Move literal 14 for display message trap command
00003634  4E4F                     864      trap    #15             Display the loaded message
00003636                           865      
00003636  1238 5FF0                866      move.b  PLAYER,D1       Move the player health value to D1 to display
0000363A  103C 0003                867      move.b  #3,D0           Move literal 3 for display number trap command
0000363E  4E4F                     868      trap    #15             Display the number in D1
00003640                           869      
00003640                           870      * Move the cursor to draw enemy info
00003640  103C 000B                871      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
00003644  323C 2001                872      move.w  #CSR_POS_BATTLE,D1
00003648  5241                     873      add.w   #1,D1
0000364A  4E4F                     874      trap    #15             Set the cursor position with trap command 11
0000364C  4241                     875      clr     D1              Clear D1 of the cursor position
0000364E                           876      
0000364E  43F9 00005362            877      lea     enemy_health_msg,A1 Load the hud message
00003654  103C 000E                878      move.b  #14,D0              Move literal 14 for display message trap command
00003658  4E4F                     879      trap    #15                 Display the loaded message
0000365A                           880      
0000365A  1215                     881      move.b  (A5),D1         Move the enemy health value to D1 to display
0000365C  103C 0003                882      move.b  #3,D0           Move literal 3 for display number trap command
00003660  4E4F                     883      trap    #15             Display the number in D1
00003662                           884      
00003662                           885      * Move the cursor to draw potion information
00003662  103C 000B                886      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
00003666  323C 2001                887      move.w  #CSR_POS_BATTLE,D1
0000366A  5641                     888      add.w   #3,D1
0000366C  4E4F                     889      trap    #15             Set the cursor position with trap command 11
0000366E  4241                     890      clr     D1              Clear D1 of the cursor position
00003670                           891      
00003670  43F9 000053A5            892      lea     potions_msg,A1   Load the hud message
00003676  103C 000E                893      move.b  #14,D0          Move literal 14 for display message trap command
0000367A  4E4F                     894      trap    #15             Display the loaded message
0000367C                           895      
0000367C  49F8 5FF9                896      lea     PLA_POTIONS,A4
00003680  6100 FF72                897      bsr     draw_item_number
00003684                           898      
00003684                           899      * Move the cursor back to its previous position
00003684  3203                     900      move.w  D3,D1           Move the previous cursor position back to D1
00003686  103C 000B                901      move.b  #11,D0          Move the byte #11 to D0 for trap command 11          
0000368A  4E4F                     902      trap    #15             Set the cursor position with trap command 11
0000368C                           903      
0000368C  4241                     904      clr     D1              Clear D1 for later use
0000368E                           905      
0000368E  4E75                     906      rts
00003690                           907      
00003690                           908  draw_shop_info:
00003690  323C 00FF                909      move.w  #255,D1         Move the word #255 to D1 to set the type of trap 11
00003694  103C 000B                910      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
00003698  4E4F                     911      trap    #15             Trap to get the cursor position in D1
0000369A                           912      
0000369A  3601                     913      move.w  D1,D3           Move the current cursor position to D3 for later
0000369C                           914      
0000369C                           915      * Move cursor to draw shop info
0000369C  323C 1801                916      move.w  #CSR_POS_SHOP_S,D1           
000036A0  4E4F                     917      trap    #15             Set the cursor position with trap command 11
000036A2  4241                     918      clr     D1              Clear D1 of the cursor position
000036A4                           919      
000036A4  43F9 000055E1            920      lea     shop_stock_msg,A1   Load the hud message
000036AA  103C 000E                921      move.b  #14,D0          Move literal 14 for display message trap command
000036AE  4E4F                     922      trap    #15             Display the loaded message
000036B0                           923      
000036B0                           924      
000036B0                           925      * Display the shop's potions
000036B0  103C 000B                926      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
000036B4  323C 1801                927      move.w  #CSR_POS_SHOP_S,D1         
000036B8  5241                     928      add.w   #1,D1  
000036BA  4E4F                     929      trap    #15             Set the cursor position with trap command 11
000036BC  4241                     930      clr     D1              Clear D1 of the cursor position
000036BE                           931      
000036BE  43F9 000053A5            932      lea     potions_msg,A1   Load the hud message
000036C4  103C 000E                933      move.b  #14,D0          Move literal 14 for display message trap command
000036C8  4E4F                     934      trap    #15             Display the loaded message
000036CA                           935      
000036CA  544D                     936      add.w   #S_POTIONS,A5
000036CC  49D5                     937      lea     (A5),A4
000036CE  6100 FF24                938      bsr     draw_item_number
000036D2                           939      
000036D2                           940      * Display the shop's keys
000036D2  103C 000B                941      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
000036D6  323C 1801                942      move.w  #CSR_POS_SHOP_S,D1         
000036DA  5441                     943      add.w   #2,D1  
000036DC  4E4F                     944      trap    #15             Set the cursor position with trap command 11
000036DE  4241                     945      clr     D1              Clear D1 of the cursor position
000036E0                           946      
000036E0  43F9 0000539E            947      lea     key_msg,A1      Load the hud message
000036E6  103C 000E                948      move.b  #14,D0          Move literal 14 for display message trap command
000036EA  4E4F                     949      trap    #15             Display the loaded message
000036EC                           950      
000036EC  524D                     951      add.w   #1,A5
000036EE  49D5                     952      lea     (A5),A4
000036F0  6100 FF02                953      bsr     draw_item_number
000036F4                           954      
000036F4                           955      * Display the shop's torches
000036F4  103C 000B                956      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
000036F8  323C 1801                957      move.w  #CSR_POS_SHOP_S,D1         
000036FC  5641                     958      add.w   #3,D1  
000036FE  4E4F                     959      trap    #15             Set the cursor position with trap command 11
00003700  4241                     960      clr     D1              Clear D1 of the cursor position
00003702                           961      
00003702  43F9 000053AF            962      lea     torches_msg,A1  Load the torches message
00003708  103C 000E                963      move.b  #14,D0          Move literal 14 for display message trap command
0000370C  4E4F                     964      trap    #15             Display the loaded message
0000370E                           965      
0000370E  524D                     966      add.w   #1,A5
00003710  49D5                     967      lea     (A5),A4
00003712  6100 FEE0                968      bsr     draw_item_number
00003716                           969      
00003716                           970      * Display the shop's damage upgrades
00003716  103C 000B                971      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
0000371A  323C 1801                972      move.w  #CSR_POS_SHOP_S,D1         
0000371E  5841                     973      add.w   #4,D1  
00003720  4E4F                     974      trap    #15             Set the cursor position with trap command 11
00003722  4241                     975      clr     D1              Clear D1 of the cursor position
00003724                           976      
00003724  43F9 000053B8            977      lea     damage_up_msg,A1 Load the damage upgrades message
0000372A  103C 000E                978      move.b  #14,D0           Move literal 14 for display message trap command
0000372E  4E4F                     979      trap    #15              Display the loaded message
00003730                           980      
00003730  524D                     981      add.w   #1,A5               Increment A5 to get to the damage upgrades
00003732  49D5                     982      lea     (A5),A4             Load the memory address in A5 to A4
00003734  6100 FEBE                983      bsr     draw_item_number    Draw the number of items
00003738  5B4D                     984      sub.w   #S_DAMAGE_IN,A5     Bring the pointer back to the root of the shop
0000373A                           985      
0000373A                           986      * Display the inventory
0000373A  103C 000B                987      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
0000373E  323C 3401                988      move.w  #CSR_POS_SHOP_P,D1       
00003742  4E4F                     989      trap    #15             Set the cursor position with trap command 11
00003744  4241                     990      clr     D1              Clear D1 of the cursor position
00003746                           991      
00003746  43F9 0000538B            992      lea     inventory_msg,A1   Load the hud message
0000374C  103C 000E                993      move.b  #14,D0          Move literal 14 for display message trap command
00003750  4E4F                     994      trap    #15             Display the loaded message
00003752                           995      
00003752                           996      * Display the player gold
00003752  103C 000B                997      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
00003756  323C 3401                998      move.w  #CSR_POS_SHOP_P,D1         
0000375A  5241                     999      add.w   #1,D1  
0000375C  4E4F                    1000      trap    #15             Set the cursor position with trap command 11
0000375E  4241                    1001      clr     D1              Clear D1 of the cursor position
00003760                          1002      
00003760  43F9 00005396           1003      lea     gold_msg,A1   Load the hud message
00003766  103C 000E               1004      move.b  #14,D0          Move literal 14 for display message trap command
0000376A  4E4F                    1005      trap    #15             Display the loaded message
0000376C                          1006      
0000376C  49F8 5FF8               1007      lea     PLA_GOLD,A4
00003770  6100 FE82               1008      bsr     draw_item_number
00003774                          1009      
00003774                          1010      * Display the player potions
00003774  103C 000B               1011      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
00003778  323C 3401               1012      move.w  #CSR_POS_SHOP_P,D1         
0000377C  5441                    1013      add.w   #2,D1  
0000377E  4E4F                    1014      trap    #15             Set the cursor position with trap command 11
00003780  4241                    1015      clr     D1              Clear D1 of the cursor position
00003782                          1016      
00003782  43F9 000053A5           1017      lea     potions_msg,A1   Load the hud message
00003788  103C 000E               1018      move.b  #14,D0          Move literal 14 for display message trap command
0000378C  4E4F                    1019      trap    #15             Display the loaded message
0000378E                          1020      
0000378E  49F8 5FF9               1021      lea     PLA_POTIONS,A4
00003792  6100 FE60               1022      bsr     draw_item_number
00003796                          1023      
00003796                          1024      * Display the player keys
00003796  103C 000B               1025      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
0000379A  323C 3401               1026      move.w  #CSR_POS_SHOP_P,D1         
0000379E  5641                    1027      add.w   #3,D1  
000037A0  4E4F                    1028      trap    #15             Set the cursor position with trap command 11
000037A2  4241                    1029      clr     D1              Clear D1 of the cursor position
000037A4                          1030      
000037A4  43F9 0000539E           1031      lea     key_msg,A1   Load the hud message
000037AA  103C 000E               1032      move.b  #14,D0          Move literal 14 for display message trap command
000037AE  4E4F                    1033      trap    #15             Display the loaded message
000037B0                          1034      
000037B0  49F8 5FFA               1035      lea     PLA_KEYS,A4
000037B4  6100 FE3E               1036      bsr     draw_item_number
000037B8                          1037      
000037B8                          1038      * Display the torch life
000037B8  103C 000B               1039      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
000037BC  323C 3401               1040      move.w  #CSR_POS_SHOP_P,D1
000037C0  5A41                    1041      add.w   #5,D1       
000037C2  4E4F                    1042      trap    #15             Set the cursor position with trap command 11
000037C4  4241                    1043      clr     D1              Clear D1 of the cursor position
000037C6                          1044      
000037C6  43F9 00005371           1045      lea     torch_msg,A1   Load the hud message
000037CC  103C 000E               1046      move.b  #14,D0          Move literal 14 for display message trap command
000037D0  4E4F                    1047      trap    #15             Display the loaded message
000037D2                          1048      
000037D2  1238 5FFB               1049      move.b  PLA_TORCH,D1    Move the player torch life value to D1 to display
000037D6  103C 0003               1050      move.b  #3,D0           Move literal 3 for display number trap command
000037DA  4E4F                    1051      trap    #15             Display the number in D1
000037DC                          1052      
000037DC                          1053      * Display the player's damage level
000037DC  103C 000B               1054      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
000037E0  323C 3401               1055      move.w  #CSR_POS_SHOP_P,D1
000037E4  5C41                    1056      add.w   #6,D1       
000037E6  4E4F                    1057      trap    #15             Set the cursor position with trap command 11
000037E8  4241                    1058      clr     D1              Clear D1 of the cursor position
000037EA                          1059      
000037EA  43F9 0000537E           1060      lea     damage_lvl_msg,A1   Load the damage level message
000037F0  103C 000E               1061      move.b  #14,D0              Move literal 14 for display message trap command
000037F4  4E4F                    1062      trap    #15                 Display the loaded message
000037F6                          1063      
000037F6  1238 5FF1               1064      move.b  PLA_DAMAGE,D1   Move the player's damage level to D1 to display
000037FA  103C 0003               1065      move.b  #3,D0           Move literal 3 for display number trap command
000037FE  4E4F                    1066      trap    #15             Display the number in D1
00003800                          1067      
00003800                          1068      * Move the cursor back to its previous position
00003800  3203                    1069      move.w  D3,D1           Move the previous cursor position back to D1
00003802  103C 000B               1070      move.b  #11,D0          Move the byte #11 to D0 for trap command 11          
00003806  4E4F                    1071      trap    #15             Set the cursor position with trap command 11
00003808                          1072      
00003808  4241                    1073      clr     D1              Clear D1 for later use
0000380A                          1074      
0000380A  4E75                    1075      rts
0000380C                          1076  
0000380C                          1077  *-------------------------------------------------------
0000380C                          1078  *---Game Play (Quest Progress)--------------------------
0000380C                          1079  *------------------------------------------------------- 
0000380C                          1080  gameplay:
0000380C  6100 007A               1081      bsr     endl            Break to a new line
00003810  0C38 0000 5FF3          1082      CMP.B   #0,GAME_STATE   Check which stage the game is in
00003816  6700 F804               1083      BEQ     pick_role       Branch to the pick role subroutine
0000381A  0C38 0005 5FF3          1084      CMP.B   #5,GAME_STATE   Check which stage the game is in
00003820  6700 007C               1085      BEQ     movement        Branch to the movement subroutine
00003824  0C38 0006 5FF3          1086      CMP.B   #6,GAME_STATE   Check which stage the game is in
0000382A  6700 0270               1087      BEQ     combat          branch to the combat subroutine
0000382E  0C38 0007 5FF3          1088      CMP.B   #7,GAME_STATE   Check which stage the game is in
00003834  6700 0482               1089      BEQ     shop            branch to the shop subroutine
00003838  4E75                    1090      rts                     Return from 'gameplay' subroutine
0000383A                          1091  
0000383A                          1092  *-------------------------------------------------------
0000383A                          1093  *------------------Screen Decoration--------------------
0000383A                          1094  *-------------------------------------------------------
0000383A                          1095  decorate:
0000383A  163C 003C               1096      move.b  #60, D3
0000383E  6100 0048               1097      bsr     endl
00003842                          1098  out:
00003842  43F9 00004880           1099      lea     loop_msg,A1
00003848  103C 000E               1100      move.b  #14,D0
0000384C  4E4F                    1101      trap    #15
0000384E  5343                    1102      sub     #1,D3   decrement loop counter
00003850  66F0                    1103      bne     out     repeat until D0=0
00003852  6100 0034               1104      bsr     endl
00003856  4E75                    1105      rts
00003858                          1106      
00003858                          1107  clear_screen: 
00003858  103C 000B               1108      move.b  #11,D0      clear screen
0000385C  323C FF00               1109      move.w  #$ff00,D1
00003860  4E4F                    1110      trap    #15
00003862  4E75                    1111      rts
00003864                          1112  *-------------------------------------------------------
00003864                          1113  *------------------------Replay-------------------------
00003864                          1114  *-------------------------------------------------------
00003864                          1115  replay:
00003864  43F9 000049C4           1116      lea     replay_msg,A1   Load the Replay message
0000386A  103C 000E               1117      move.b  #14,D0          Move the number literal 14 to D0 for trap command
0000386E  4E4F                    1118      trap    #15             Display the loaded message
00003870                          1119      
00003870  1A3C 0002               1120      move.b  #2,D5           Move the number of input options to D5
00003874  6100 F8A8               1121      bsr     input           Take user input
00003878  1401                    1122      move.b  D1,D2           Move the input to D2 so it's not trampled by the clear screen
0000387A                          1123      
0000387A  61DC                    1124      bsr     clear_screen    Clear the screen
0000387C                          1125      
0000387C  B43C 0001               1126      cmp.b   #1,D2           Compare the user input against the two options
00003880  6700 D77E               1127      beq     start           Restart if the user enters 1
00003884  6100 F780               1128      bsr     end             Quit if the user enters 2
00003888                          1129  
00003888                          1130  endl:
00003888  48E7 8040               1131      movem.l D0/A1,-(A7)
0000388C  303C 000E               1132      move    #14,D0
00003890  43F9 00004622           1133      lea     crlf,A1
00003896  4E4F                    1134      trap    #15
00003898  4CDF 0201               1135      movem.l (A7)+,D0/A1
0000389C  4E75                    1136      rts
0000389E                          1137          
0000389E                          1138  *-------------------------------------------------------
0000389E                          1139  *----------------------Manage Movement------------------
0000389E                          1140  *-------------------------------------------------------
0000389E                          1141  movement:
0000389E  43F9 00004E98           1142      lea     movement_msg,A1 Load the movement message
000038A4  103C 000E               1143      move.b  #14,D0          Move literal 14 for display message trap command
000038A8  4E4F                    1144      trap    #15             Display the loaded message
000038AA                          1145  
000038AA  7A05                    1146      move.l  #5,D5           Move the number 4 to D5 to tell the program how many options there are
000038AC                          1147      
000038AC  6100 F870               1148      bsr     input           branch to the input subroutine
000038B0  6100 000C               1149      bsr     wall_collisions Branch to check wall collisions and movement
000038B4                          1150      
000038B4  B23C 0005               1151      CMP.B   #5,D1           Check the input against taking a potion
000038B8  6700 05BE               1152      BEQ     take_potion     Branch to take a potion
000038BC                          1153      
000038BC  4E75                    1154      rts
000038BE                          1155  
000038BE                          1156  *-------------------------------------------------------
000038BE                          1157  *-------------------Check Wall Collisions---------------
000038BE                          1158  *-------------------------------------------------------
000038BE                          1159  wall_collisions:
000038BE                          1160      *Check collisions in the movement direction
000038BE  B23C 0001               1161      CMP.B   #1,D1       Check the movement direction
000038C2  6700 001C               1162      BEQ     move_north  Branch to Display the corridor type
000038C6                          1163      
000038C6  B23C 0002               1164      CMP.B   #2,D1       Check the movement direction
000038CA  6700 005E               1165      BEQ     move_south  Branch to Display the corridor type
000038CE                          1166      
000038CE  B23C 0003               1167      CMP.B   #3,D1       Check the movement direction
000038D2  6700 00A0               1168      BEQ     move_west   Branch to Display the corridor type
000038D6                          1169      
000038D6  B23C 0004               1170      CMP.B   #4,D1       Check the movement direction
000038DA  6700 00E0               1171      BEQ     move_east   Branch to Display the corridor type
000038DE                          1172      
000038DE  4E75                    1173      rts
000038E0                          1174      
000038E0                          1175  move_north:
000038E0                          1176      *Check if the tile is any of the corridor types with a wall at the top
000038E0  0C16 0002               1177      CMP.B   #2,(A6)
000038E4  6700 011E               1178      BEQ     movement_blocked
000038E8  0C16 0003               1179      CMP.B   #3,(A6)
000038EC  6700 0116               1180      BEQ     movement_blocked
000038F0  0C16 0006               1181      CMP.B   #6,(A6)
000038F4  6700 010E               1182      BEQ     movement_blocked
000038F8  0C16 0007               1183      CMP.B   #7,(A6)
000038FC  6700 0106               1184      BEQ     movement_blocked
00003900  0C16 000B               1185      CMP.B   #11,(A6)
00003904  6700 00FE               1186      BEQ     movement_blocked
00003908  0C16 000C               1187      CMP.B   #12,(A6)
0000390C  6700 00F6               1188      BEQ     movement_blocked
00003910  0C16 000D               1189      CMP.B   #13,(A6)
00003914  6700 00EE               1190      BEQ     movement_blocked
00003918                          1191      
00003918  31CE 5FF6               1192      move.w  A6,PLA_P_POS        Move the player's previous location to a memory address for storage
0000391C  9CFC 0010               1193      sub     #16,A6              Move the player north
00003920                          1194      
00003920  6100 00F4               1195      bsr     check_blocked       Check if the player is in a door
00003924  6100 0584               1196      bsr     decrement_torch     Remove one from the player's torch life
00003928                          1197  
00003928  4E75                    1198      rts
0000392A                          1199      
0000392A                          1200  move_south:
0000392A                          1201      *Check if the tile is any of the corridor types with a wall at the bottom
0000392A  0C16 0002               1202      CMP.B   #2,(A6)
0000392E  6700 00D4               1203      BEQ     movement_blocked
00003932  0C16 0004               1204      CMP.B   #4,(A6)
00003936  6700 00CC               1205      BEQ     movement_blocked
0000393A  0C16 0005               1206      CMP.B   #5,(A6)
0000393E  6700 00C4               1207      BEQ     movement_blocked
00003942  0C16 0009               1208      CMP.B   #9,(A6)
00003946  6700 00BC               1209      BEQ     movement_blocked
0000394A  0C16 000B               1210      CMP.B   #11,(A6)
0000394E  6700 00B4               1211      BEQ     movement_blocked
00003952  0C16 000D               1212      CMP.B   #13,(A6)
00003956  6700 00AC               1213      BEQ     movement_blocked
0000395A  0C16 000E               1214      CMP.B   #14,(A6)
0000395E  6700 00A4               1215      BEQ     movement_blocked
00003962                          1216      
00003962  31CE 5FF6               1217      move.w  A6,PLA_P_POS        Move the player's previous location to a memory address for storage
00003966  DCFC 0010               1218      add     #16,A6              Move the player south
0000396A                          1219      
0000396A  6100 00AA               1220      bsr     check_blocked       Check if the player is in a door
0000396E  6100 053A               1221      bsr     decrement_torch     Remove one from the player's torch life
00003972                          1222      
00003972  4E75                    1223      rts
00003974                          1224  
00003974                          1225  move_west:
00003974                          1226      *Check if the tile is any of the corridor types with a wall to the left
00003974  0C16 0001               1227      CMP.B   #1,(A6)
00003978  6700 008A               1228      BEQ     movement_blocked
0000397C  0C16 0003               1229      CMP.B   #3,(A6)
00003980  6700 0082               1230      BEQ     movement_blocked
00003984  0C16 0004               1231      CMP.B   #4,(A6)
00003988  6700 007A               1232      BEQ     movement_blocked
0000398C  0C16 0008               1233      CMP.B   #8,(A6)
00003990  6700 0072               1234      BEQ     movement_blocked
00003994  0C16 000B               1235      CMP.B   #11,(A6)
00003998  6700 006A               1236      BEQ     movement_blocked
0000399C  0C16 000C               1237      CMP.B   #12,(A6)
000039A0  6700 0062               1238      BEQ     movement_blocked
000039A4  0C16 000E               1239      CMP.B   #14,(A6)
000039A8  6700 005A               1240      BEQ     movement_blocked
000039AC                          1241      
000039AC  31CE 5FF6               1242      move.w  A6,PLA_P_POS        Move the player's previous location to a memory address for storage
000039B0  534E                    1243      sub     #1,A6               Move the player west
000039B2                          1244      
000039B2  6100 0062               1245      bsr     check_blocked       Check if the player is in a door
000039B6  6100 04F2               1246      bsr     decrement_torch     Remove one from the player's torch life
000039BA                          1247      
000039BA  4E75                    1248      rts
000039BC                          1249      
000039BC                          1250  move_east:
000039BC                          1251      *Check if the tile is any of the corridor types with a wall to the right
000039BC  0C16 0001               1252      CMP.B   #1,(A6)
000039C0  6700 0042               1253      BEQ     movement_blocked
000039C4  0C16 0005               1254      CMP.B   #5,(A6)
000039C8  6700 003A               1255      BEQ     movement_blocked
000039CC  0C16 0006               1256      CMP.B   #6,(A6)
000039D0  6700 0032               1257      BEQ     movement_blocked
000039D4  0C16 000A               1258      CMP.B   #10,(A6)
000039D8  6700 002A               1259      BEQ     movement_blocked
000039DC  0C16 000C               1260      CMP.B   #12,(A6)
000039E0  6700 0022               1261      BEQ     movement_blocked
000039E4  0C16 000D               1262      CMP.B   #13,(A6)
000039E8  6700 001A               1263      BEQ     movement_blocked
000039EC  0C16 000E               1264      CMP.B   #14,(A6)
000039F0  6700 0012               1265      BEQ     movement_blocked
000039F4                          1266      
000039F4  31CE 5FF6               1267      move.w  A6,PLA_P_POS        Move the player's previous location to a memory address for storage
000039F8  524E                    1268      add     #1,A6               Move the player east
000039FA                          1269      
000039FA  6100 001A               1270      bsr     check_blocked       Check if the player is in a door
000039FE  6100 04AA               1271      bsr     decrement_torch     Remove one from the player's torch life
00003A02                          1272      
00003A02  4E75                    1273      rts
00003A04                          1274  
00003A04                          1275  movement_blocked:
00003A04  43F9 00004F2A           1276      lea     movement_blocked_msg,A1 Load the message
00003A0A  103C 000E               1277      move.b  #14,D0                  Move the trap command to display a message
00003A0E  4E4F                    1278      trap    #15                     Display the movement blocked message
00003A10  6100 0432               1279      bsr     press_continue          Pause the game until a key is pressed
00003A14                          1280      
00003A14  4E75                    1281      rts                             Return from the subroutine
00003A16                          1282      
00003A16                          1283  check_blocked:
00003A16  4BF8 6FE0               1284      lea     FIRST_DOOR,A5   Load the memory address of the first door
00003A1A  1E3C 0000               1285      move.b  #0,D7           Move the starting door number to D5
00003A1E  6100 0004               1286      bsr     loop_thru_doors Loop through all doors
00003A22  4E75                    1287      rts                     Return from subroutine
00003A24                          1288      
00003A24                          1289  loop_thru_doors:
00003A24  6100 0010               1290      bsr     check_for_a_door  Check for a door
00003A28                          1291      
00003A28  BA3C 0001               1292      CMP.B   #DOOR_MAX,D5    Compare the door number with the maximum door number
00003A2C  6C00 0448               1293      BGE     return          Return from the loop if the current door number is greater than or equal to the max
00003A30                          1294      
00003A30  5207                    1295      add.b   #1,D7           Add to the current door number
00003A32  544D                    1296      add.w   #2,A5           Add to the current door pointer to move to the next door
00003A34  60EE                    1297      bra     loop_thru_doors Keep looping the doors
00003A36                          1298  
00003A36                          1299  check_for_a_door:
00003A36  3615                    1300      move.w  (A5),D3         Move the door coordinates into data register D3 for large-value comparisons
00003A38  BDC3                    1301      CMP.L   D3,A6           Check if the door is in the current position
00003A3A  6700 0004               1302      BEQ     in_a_door       Collide with the door if it is
00003A3E  4E75                    1303      rts                     Return if the door is not in the current position
00003A40                          1304      
00003A40                          1305  in_a_door:
00003A40  0C38 0000 5FFA          1306      CMP.B   #0,PLA_KEYS     Check if the player has keys left
00003A46  6F00 003C               1307      BLE     blocked_door    If the player has no keys they're blocked
00003A4A                          1308      
00003A4A  43F9 000056BE           1309      lea     locked_door_msg,A1  Load the locked door message
00003A50  103C 000E               1310      move.b  #14,D0          Move the number literal for trap command
00003A54  4E4F                    1311      trap    #15             Display the loaded message
00003A56                          1312      
00003A56  1A3C 0002               1313      move.b  #2,D5           Move the number of input options
00003A5A  6100 F6C2               1314      bsr     input           Take user input
00003A5E                          1315      
00003A5E  B23C 0001               1316      CMP.B   #1,D1           Compare the user input with num 1
00003A62  6700 0006               1317      BEQ     unlock_door     Unlock the door if the user chooses to
00003A66  6600 001C               1318      BNE     blocked_door    Branch to blocked door if the player doesn't unlock the door
00003A6A                          1319      
00003A6A                          1320  unlock_door:
00003A6A  43F9 00005734           1321      lea     unlocked_door_msg,A1  Load the unlocked door message
00003A70  103C 000E               1322      move.b  #14,D0          Move the number literal for trap command
00003A74  4E4F                    1323      trap    #15             Display the loaded message
00003A76                          1324      
00003A76  3ABC 1000               1325      move.w  #OPEN_DOOR_POS,(A5) Move the door position out of the game for an open door
00003A7A  5338 5FFA               1326      sub.b   #1,PLA_KEYS     Remove a key from the player
00003A7E  6100 03C4               1327      bsr     press_continue  Wait for player input
00003A82                          1328      
00003A82  4E75                    1329      rts                     Return from subroutine
00003A84                          1330  
00003A84                          1331  blocked_door:
00003A84  43F9 00005771           1332      lea     blocked_door_msg,A1  Load the blocked door message
00003A8A  103C 000E               1333      move.b  #14,D0          Move the number literal for trap command
00003A8E  4E4F                    1334      trap    #15             Display the loaded message
00003A90                          1335      
00003A90  3638 5FF6               1336      move.w  PLA_P_POS,D3    Move the previous player position to D3
00003A94  2C43                    1337      move.l  D3,A6           Move the player to their previous position
00003A96                          1338      
00003A96  6100 03AC               1339      bsr     press_continue  Wait for player input
00003A9A                          1340      
00003A9A  4E75                    1341      rts                     Return from subroutine
00003A9C                          1342      
00003A9C                          1343  *-------------------------------------------------------
00003A9C                          1344  *---------------------Manage Combat---------------------
00003A9C                          1345  *-------------------------------------------------------
00003A9C                          1346  combat:
00003A9C  6100 FDEA               1347      bsr endl                Break to a new line
00003AA0                          1348  
00003AA0  43F9 00004FBB           1349      lea     combat_msg,A1   Load the combat message
00003AA6  103C 000E               1350      move.b  #14,D0          Move literal 14 for display message trap command
00003AAA  4E4F                    1351      trap    #15             Display the loaded message
00003AAC                          1352  
00003AAC  7A05                    1353      move.l  #5,D5           Move the number 4 to D5 to tell the program how many options there are
00003AAE  6100 F66E               1354      bsr     input           branch to the input subroutine
00003AB2  1801                    1355      move.b  D1,D4           Move the input to D4 for later use
00003AB4                          1356      
00003AB4  B23C 0001               1357      CMP.B   #1,D1           Compare input with number literal 1
00003AB8  6700 0024               1358      BEQ     block_counter   Branch to block/counter subroutine
00003ABC  B23C 0002               1359      CMP.B   #2,D1           Compare input with number literal 2
00003AC0  6700 0036               1360      BEQ     cast_magic      Branch to cast magic subroutine
00003AC4  B23C 0003               1361      CMP.B   #3,D1           Compare input with number literal 3
00003AC8  6700 0048               1362      BEQ     melee_attack    Branch to melee subroutine
00003ACC  B23C 0004               1363      CMP.B   #4,D1           Compare input with number literal 4
00003AD0  6700 005A               1364      BEQ     try_run         Branch to try run subroutine
00003AD4  B23C 0005               1365      CMP.B   #5,D1           Compare input with number literal 5
00003AD8  6700 039E               1366      BEQ     take_potion     Branch to take potion subroutine
00003ADC                          1367      
00003ADC  4E75                    1368      rts
00003ADE                          1369      
00003ADE                          1370  block_counter:
00003ADE  6100 037C               1371      bsr     random_number       Get a random number 1-100
00003AE2                          1372      
00003AE2  B47C 0021               1373      CMP.W   #33,D2              Compare random with #33
00003AE6  6F00 008E               1374      BLE     both_block          Enemy tries to block - attack failed
00003AEA  B47C 0042               1375      CMP.W   #66,D2              Compare random with #66
00003AEE  6F00 0118               1376      BLE     hit_by_magic        Enemy casts magic - player takes damage      
00003AF2  6E00 00E4               1377      BGT     hit_against_melee   Enemy tried to lunge - enemy takes damage
00003AF6                          1378      
00003AF6  4E75                    1379      rts                         Return from subroutine
00003AF8                          1380      
00003AF8                          1381  cast_magic:
00003AF8  6100 0362               1382      bsr     random_number       Get a random number 1-100
00003AFC                          1383  
00003AFC  B47C 0021               1384      CMP.W   #33,D2              Compare random with #33
00003B00  6F00 00AA               1385      BLE     hit_against_block    Enemy blocks - enemy takes damage
00003B04  B47C 0042               1386      CMP.W   #66,D2              Compare random with #66
00003B08  6F00 007E               1387      BLE     both_cast_magic     Enemy casts magic - attack fails     
00003B0C  6E00 0114               1388      BGT     hit_by_melee        Enemy lunges forward - player takes damage
00003B10                          1389      
00003B10  4E75                    1390      rts                         Return from subroutine
00003B12                          1391  
00003B12                          1392  melee_attack:
00003B12  6100 0348               1393      bsr     random_number       Get a random number 1-100
00003B16                          1394  
00003B16  B47C 0021               1395      CMP.W   #33,D2              Compare random with #33
00003B1A  6F00 00D2               1396      BLE     hit_by_counter      Enemy blocks and counters - player takes damage
00003B1E  B47C 0042               1397      CMP.W   #66,D2              Compare random with #66
00003B22  6F00 009E               1398      BLE     hit_against_magic   Enemy casts magic - player takes damage     
00003B26  6E00 0072               1399      BGT     both_melee          Enemy lunges forward - attack fails
00003B2A                          1400      
00003B2A  4E75                    1401      rts                         Return from subroutine
00003B2C                          1402  
00003B2C                          1403  try_run:
00003B2C  6100 032E               1404      bsr     random_number       Get a random number
00003B30                          1405      
00003B30  B47C 0028               1406      CMP.W   #40,D2              Compare the random number to 40
00003B34  6D00 0006               1407      BLT     escape_attack       If the random number is less than 40 the player escapes
00003B38  6C00 0020               1408      BGE     fail_escape         If the random number is more than 40 the player gets damaged
00003B3C                          1409      
00003B3C                          1410  escape_attack:
00003B3C  3638 5FF6               1411      move.w  PLA_P_POS,D3    Move the player's previous position to D3 to avoid treating it as a negative number
00003B40  2C43                    1412      move.l  D3,A6           Move the player to their position before entering the battle
00003B42  11FC 0005 5FF3          1413      move.b  #5,GAME_STATE   Switch game state
00003B48                          1414      
00003B48  43F9 0000501D           1415      lea     escape_msg,A1   Load escape message
00003B4E  103C 000E               1416      move.b  #14,D0          Move literal for trap command
00003B52  4E4F                    1417      trap    #15             Trap 15 to display messgae
00003B54                          1418      
00003B54  6100 02EE               1419      bsr     press_continue  Pause until the player presses to continue
00003B58                          1420      
00003B58  4E75                    1421      rts                     Return from subroutine
00003B5A                          1422      
00003B5A                          1423  fail_escape:
00003B5A  43F9 00005038           1424      lea     fail_escape_msg,A1  Load fail escape message
00003B60  103C 000E               1425      move.b  #14,D0              Move literal for trap command
00003B64  4E4F                    1426      trap    #15                 Trap 15 to display message
00003B66                          1427      
00003B66  524D                    1428      add.w   #DAMAGE,A5           Move the enemy pointer to its damage value
00003B68  1A15                    1429      move.b  (A5),D5             Store the damage value in D5
00003B6A  534D                    1430      sub.w   #DAMAGE,A5           Move the enemy pointer back to the enemy health/root
00003B6C  9B38 5FF0               1431      sub.b   D5,PLAYER           Remove the enemy's damage from the player's health
00003B70                          1432      
00003B70  6100 02D2               1433      bsr     press_continue      Pause until the player presses to continue
00003B74  4E75                    1434      rts
00003B76                          1435      
00003B76                          1436  both_block:
00003B76  103C 000E               1437      move.b  #14,D0
00003B7A  43F9 00005073           1438      lea     both_block_msg,A1
00003B80  4E4F                    1439      trap    #15
00003B82                          1440      
00003B82  6100 02C0               1441      bsr     press_continue
00003B86  4E75                    1442      rts
00003B88                          1443      
00003B88                          1444  both_cast_magic:
00003B88  103C 000E               1445      move.b  #14,D0
00003B8C  43F9 00005098           1446      lea     both_cast_magic_msg,A1
00003B92  4E4F                    1447      trap    #15
00003B94                          1448      
00003B94  6100 02AE               1449      bsr     press_continue
00003B98  4E75                    1450      rts
00003B9A                          1451  
00003B9A                          1452  both_melee:
00003B9A  103C 000E               1453      move.b  #14,D0
00003B9E  43F9 000050ED           1454      lea     both_melee_msg,A1
00003BA4  4E4F                    1455      trap    #15  
00003BA6                          1456      
00003BA6  6100 029C               1457      bsr     press_continue
00003BAA  4E75                    1458      rts
00003BAC                          1459  
00003BAC                          1460  hit_against_block:
00003BAC  103C 000E               1461      move.b  #14,D0
00003BB0  43F9 00005136           1462      lea     hit_against_block_msg,A1
00003BB6  4E4F                    1463      trap    #15  
00003BB8                          1464      
00003BB8  6100 0082               1465      bsr     damage_enemy    Deal damage to the enemy
00003BBC                          1466      
00003BBC  6100 0286               1467      bsr     press_continue
00003BC0  4E75                    1468      rts
00003BC2                          1469  
00003BC2                          1470  hit_against_magic:
00003BC2  103C 000E               1471      move.b  #14,D0
00003BC6  43F9 0000517E           1472      lea     hit_against_magic_msg,A1
00003BCC  4E4F                    1473      trap    #15
00003BCE                          1474      
00003BCE  6100 006C               1475      bsr     damage_enemy    Deal damage to the enemy
00003BD2                          1476      
00003BD2  6100 0270               1477      bsr     press_continue
00003BD6  4E75                    1478      rts
00003BD8                          1479  
00003BD8                          1480  hit_against_melee:
00003BD8  103C 000E               1481      move.b  #14,D0
00003BDC  43F9 000051E2           1482      lea     hit_against_melee_msg,A1
00003BE2  4E4F                    1483      trap    #15
00003BE4                          1484      
00003BE4  6100 0056               1485      bsr     damage_enemy    Deal damage to the enemy
00003BE8                          1486      
00003BE8  6100 025A               1487      bsr     press_continue
00003BEC  4E75                    1488      rts
00003BEE                          1489  
00003BEE                          1490  hit_by_counter:
00003BEE  103C 000E               1491      move.b  #14,D0
00003BF2  43F9 00005238           1492      lea     hit_by_counter_msg,A1
00003BF8  4E4F                    1493      trap    #15  
00003BFA                          1494      
00003BFA  143C 0001               1495      move.b  #1,D2               Move the enemy attack type to D2
00003BFE  6100 0076               1496      bsr     damage_player       Deal damage to the player
00003C02                          1497      
00003C02  6100 0240               1498      bsr     press_continue
00003C06  4E75                    1499      rts
00003C08                          1500  
00003C08                          1501  hit_by_magic:
00003C08  103C 000E               1502      move.b  #14,D0
00003C0C  43F9 0000529B           1503      lea     hit_by_magic_msg,A1
00003C12  4E4F                    1504      trap    #15  
00003C14                          1505      
00003C14  143C 0002               1506      move.b  #2,D2               Move the enemy attack type to D2
00003C18  6100 005C               1507      bsr     damage_player       Deal damage to the player
00003C1C                          1508      
00003C1C  6100 0226               1509      bsr     press_continue
00003C20  4E75                    1510      rts
00003C22                          1511  
00003C22                          1512  hit_by_melee:
00003C22  103C 000E               1513      move.b  #14,D0
00003C26  43F9 0000530B           1514      lea     hit_by_melee_msg,A1
00003C2C  4E4F                    1515      trap    #15
00003C2E                          1516      
00003C2E  143C 0003               1517      move.b  #3,D2               Move the enemy attack type to D2
00003C32  6100 0042               1518      bsr     damage_player       Deal damage to the player
00003C36                          1519      
00003C36  6100 020C               1520      bsr     press_continue
00003C3A  4E75                    1521      rts
00003C3C                          1522      
00003C3C                          1523  damage_enemy:
00003C3C  1A38 5FF1               1524      move.b  PLA_DAMAGE,D5       Store the player damage value in D5
00003C40  B838 5FF2               1525      CMP.B   PLA_CLASS,D4        Check if the player attack type matches the player class
00003C44  6700 0006               1526      BEQ     double_damage_enemy Deal double damage to the enemy if attack type matches the class
00003C48  9B15                    1527      sub.b   D5,(A5)             Remove the player's damage from the enemy's health
00003C4A  4E75                    1528      rts                         Return from subroutine
00003C4C                          1529      
00003C4C                          1530  double_damage_enemy:
00003C4C  E34D                    1531      LSL     #1,D5               Double the player damage
00003C4E  9B15                    1532      sub.b   D5,(A5)             Remove double the player's damage from the enemy's health
00003C50                          1533      
00003C50  6100 FC36               1534      bsr     endl                Break to new line
00003C54  223C 00F000F0           1535      move.l  #PURPLE,D1          Load colour purple
00003C5A  6100 025C               1536      bsr     change_font_colour  Change the font colour
00003C5E                          1537      
00003C5E  43F9 0000569F           1538      lea     double_damage_msg,A1    Load the double damage message
00003C64  103C 000E               1539      move.b  #14,D0              Move number literal 14 to D0 for trap command
00003C68  4E4F                    1540      trap    #15
00003C6A                          1541      
00003C6A  223C 00FFFFFF           1542      move.l  #WHITE,D1           Load colour white
00003C70  6100 0246               1543      bsr     change_font_colour  Change the font colour
00003C74                          1544      
00003C74  4E75                    1545      rts                         Return from subroutine
00003C76                          1546  
00003C76                          1547  damage_player:
00003C76  524D                    1548      add.w   #DAMAGE,A5          Move the enemy pointer to its damage value
00003C78  1A15                    1549      move.b  (A5),D5             Store the damage value in D5
00003C7A                          1550      
00003C7A  534D                    1551      sub.w   #DAMAGE,A5          Move the enemy pointer back to the enemy health/root
00003C7C  544D                    1552      add.w   #CLASS,A5           Move the enemy pointer to its class value
00003C7E                          1553      
00003C7E  B415                    1554      CMP.B   (A5),D2             Compare the enemy attack type to its class
00003C80  554D                    1555      sub.w   #CLASS,A5           Move the enemy pointer back to the enemy health/root
00003C82  6700 0008               1556      BEQ     double_damage_player    Deal double damage to the player
00003C86                          1557      
00003C86  9B38 5FF0               1558      sub.b   D5,PLAYER           Remove the enemy's damage from the player's health
00003C8A                          1559  
00003C8A  4E75                    1560      rts                         Return from subroutine
00003C8C                          1561      
00003C8C                          1562  double_damage_player:
00003C8C  E34D                    1563      LSL     #1,D5               Double the enemy damage
00003C8E  9B38 5FF0               1564      sub.b   D5,PLAYER           Remove double the enemy's damage from the player's health
00003C92                          1565      
00003C92  6100 FBF4               1566      bsr     endl                Break to new line
00003C96  223C 000000FF           1567      move.l  #RED,D1          Load colour purple
00003C9C  6100 021A               1568      bsr     change_font_colour  Change the font colour
00003CA0                          1569      
00003CA0  43F9 0000569F           1570      lea     double_damage_msg,A1    Load the double damage message
00003CA6  103C 000E               1571      move.b  #14,D0              Move number literal 14 to D0 for trap command
00003CAA  4E4F                    1572      trap    #15
00003CAC                          1573      
00003CAC  223C 00FFFFFF           1574      move.l  #WHITE,D1           Load colour white
00003CB2  6100 0204               1575      bsr     change_font_colour  Change the font colour
00003CB6                          1576      
00003CB6  4E75                    1577      rts                         Return from subroutine
00003CB8                          1578  
00003CB8                          1579  *-------------------------------------------------------
00003CB8                          1580  *----------------------Shop State-----------------------
00003CB8                          1581  *-------------------------------------------------------
00003CB8                          1582  shop:
00003CB8  43F9 00005539           1583      lea     shop_msg,A1     Load the shop message
00003CBE  103C 000E               1584      move.b  #14,D0          Move the number literal 14 to D0 for trap command
00003CC2  4E4F                    1585      trap    #15             Display the loaded message
00003CC4                          1586  
00003CC4  7A05                    1587      move.l  #5,D5           Move the number 4 to D5 to tell the program how many options there are
00003CC6  6100 F456               1588      bsr     input           branch to the input subroutine
00003CCA                          1589      
00003CCA  B23C 0001               1590      CMP.B   #1,D1           Compare input with number literal 1
00003CCE  6700 0024               1591      BEQ     buy_potion      Branch to buy potion subroutine
00003CD2  B23C 0002               1592      CMP.B   #2,D1           Compare input with number literal 2
00003CD6  6700 004E               1593      BEQ     buy_key         Branch to buy key subroutine
00003CDA  B23C 0003               1594      CMP.B   #3,D1           Compare input with number literal 3
00003CDE  6700 007A               1595      BEQ     buy_torch       Branch to buy torch subroutine
00003CE2  B23C 0004               1596      CMP.B   #4,D1           Compare input with number literal 4
00003CE6  6700 00A8               1597      BEQ     upgrade_dmg     Branch to buy damage upgrade subroutine
00003CEA  B23C 0005               1598      CMP.B   #5,D1           Compare input with number literal 5
00003CEE  6700 00D4               1599      BEQ     leave_shop      Branch to leave shop subroutine
00003CF2                          1600  
00003CF2  4E75                    1601      rts                     Return from subroutine
00003CF4                          1602      
00003CF4                          1603  buy_potion:
00003CF4  0C38 0005 5FF8          1604      CMP.B   #POTION_PRICE,PLA_GOLD  Check if the player has money for a potion
00003CFA  6D00 00E6               1605      BLT     no_money                If not enough money branch to no money subroutine
00003CFE                          1606      
00003CFE  544D                    1607      add.w   #S_POTIONS,A5           Move the shop pointer to the potions
00003D00  0C15 0000               1608      CMP.B   #0,(A5)                 Check that the shop still has potions left
00003D04  6F00 00EE               1609      BLE     no_shop_potions         If no potions left branch to no shop potions subroutine
00003D08                          1610      
00003D08  5B38 5FF8               1611      sub.b   #POTION_PRICE,PLA_GOLD  Remove the potion price from the player's gold
00003D0C  5315                    1612      sub.b   #1,(A5)                 Remove one potion from the shop
00003D0E  5238 5FF9               1613      add.b   #1,PLA_POTIONS          Add one potion to the player's inventory
00003D12                          1614      
00003D12  554D                    1615      sub.w   #S_POTIONS,A5           Move the shop pointer back to root
00003D14                          1616      
00003D14  43F9 000055CB           1617      lea     buy_item_msg,A1         Load the buy item message into A1
00003D1A  103C 000E               1618      move.b  #14,D0                  Move the number literal 14 to D0 for trap command
00003D1E  4E4F                    1619      trap    #15                     Display the loaded message
00003D20                          1620      
00003D20  6100 0122               1621      bsr     press_continue          Pause for user input
00003D24                          1622      
00003D24  4E75                    1623      rts                             Return from subroutine
00003D26                          1624      
00003D26                          1625  buy_key:
00003D26  0C38 000F 5FF8          1626      CMP.B   #KEY_PRICE,PLA_GOLD     Check if the player has money for a key
00003D2C  6D00 00B4               1627      BLT     no_money                If not enough money branch to no money subroutine
00003D30                          1628      
00003D30  564D                    1629      add.w   #S_KEYS,A5              Move the shop pointer to the keys
00003D32  0C15 0000               1630      CMP.B   #0,(A5)                 Check that the shop still has keys left
00003D36  6F00 00D0               1631      BLE     no_shop_keys            If no keys left branch to no shop keys subroutine
00003D3A                          1632      
00003D3A  0438 000F 5FF8          1633      sub.b   #KEY_PRICE,PLA_GOLD     Remove the key price from the player's gold
00003D40  5315                    1634      sub.b   #1,(A5)                 Remove one key from the shop
00003D42  5238 5FFA               1635      add.b   #1,PLA_KEYS             Add one key to the player's inventory
00003D46                          1636      
00003D46  574D                    1637      sub.w   #S_KEYS,A5              Move the shop pointer back to root
00003D48                          1638  
00003D48  43F9 000055CB           1639      lea     buy_item_msg,A1         Load the buy item message into A1
00003D4E  103C 000E               1640      move.b  #14,D0                  Move the number literal 14 to D0 for trap command
00003D52  4E4F                    1641      trap    #15                     Display the loaded message
00003D54                          1642      
00003D54  6100 00EE               1643      bsr     press_continue          Pause for user input
00003D58                          1644      
00003D58  4E75                    1645      rts                             Return from subroutine
00003D5A                          1646      
00003D5A                          1647  buy_torch:
00003D5A  0C38 000A 5FF8          1648      CMP.B   #TORCH_PRICE,PLA_GOLD   Check if the player has money for a torch
00003D60  6D00 0080               1649      BLT     no_money                If not enough money branch to no money subroutine
00003D64                          1650      
00003D64  584D                    1651      add.w   #S_TORCHES,A5           Move the shop pointer to the torches
00003D66  0C15 0000               1652      CMP.B   #0,(A5)                 Check that the shop still has torches left
00003D6A  6F00 00B0               1653      BLE     no_shop_torches         If no torches left branch to no shop torches subroutine
00003D6E                          1654      
00003D6E  0438 000A 5FF8          1655      sub.b   #TORCH_PRICE,PLA_GOLD   Remove the torch price from the player's gold
00003D74  5315                    1656      sub.b   #1,(A5)                 Remove one torch from the shop
00003D76  0638 000F 5FFB          1657      add.b   #LIFE_PER_TORCH,PLA_TORCH           Add ten to the player's torches life
00003D7C                          1658      
00003D7C  594D                    1659      sub.w   #S_TORCHES,A5           Move the shop pointer back to root
00003D7E                          1660  
00003D7E  43F9 000055CB           1661      lea     buy_item_msg,A1         Load the buy item message into A1
00003D84  103C 000E               1662      move.b  #14,D0                  Move the number literal 14 to D0 for trap command
00003D88  4E4F                    1663      trap    #15                     Display the loaded message
00003D8A                          1664      
00003D8A  6100 00B8               1665      bsr     press_continue          Pause for user input
00003D8E                          1666      
00003D8E  4E75                    1667      rts                             Return from subroutine
00003D90                          1668      
00003D90                          1669  upgrade_dmg:
00003D90  0C38 0014 5FF8          1670      CMP.B   #DAMAGE_UP_PRICE,PLA_GOLD   Check if the player has money for a damage upgrade
00003D96  6D00 004A               1671      BLT     no_money                    If not enough money branch to no money subroutine
00003D9A                          1672      
00003D9A  5A4D                    1673      add.w   #S_DAMAGE_IN,A5         Move the shop pointer to the damage upgrades
00003D9C  0C15 0000               1674      CMP.B   #0,(A5)                 Check that the shop still has damage upgrades left
00003DA0  6F00 008E               1675      BLE     no_shop_damage_up       If no damage upgrades left branch to no shop torches subroutine
00003DA4                          1676      
00003DA4  0438 0014 5FF8          1677      sub.b   #DAMAGE_UP_PRICE,PLA_GOLD   Remove the damage upgrade price from the player's gold
00003DAA  5315                    1678      sub.b   #1,(A5)                     Remove one damage upgrade from the shop
00003DAC  5238 5FF1               1679      add.b   #1,PLA_DAMAGE               Add one to the player's damage value
00003DB0                          1680      
00003DB0  5B4D                    1681      sub.w   #S_DAMAGE_IN,A5         Move the shop pointer back to root
00003DB2                          1682  
00003DB2  43F9 000055CB           1683      lea     buy_item_msg,A1         Load the buy item message into A1
00003DB8  103C 000E               1684      move.b  #14,D0                  Move the number literal 14 to D0 for trap command
00003DBC  4E4F                    1685      trap    #15                     Display the loaded message
00003DBE                          1686      
00003DBE  6100 0084               1687      bsr     press_continue          Pause for user input
00003DC2                          1688      
00003DC2  4E75                    1689      rts                             Return from subroutine
00003DC4                          1690      
00003DC4                          1691  leave_shop:
00003DC4  3638 5FF6               1692      move.w  PLA_P_POS,D3        Move the player's previous position to D3 to avoid treating it as a negative number
00003DC8  2C43                    1693      move.l  D3,A6               Move the player to their position before entering the shop
00003DCA  11FC 0005 5FF3          1694      move.b  #5,GAME_STATE       Switch game state to movement
00003DD0                          1695      
00003DD0  43F9 000055A5           1696      lea     leave_shop_msg,A1   Load escape message
00003DD6  103C 000E               1697      move.b  #14,D0              Move literal for trap command
00003DDA  4E4F                    1698      trap    #15                 Trap 15 to display messgae
00003DDC                          1699      
00003DDC  6100 0066               1700      bsr     press_continue      Pause until the player presses to continue
00003DE0  4E75                    1701      rts                         Return from subroutine
00003DE2                          1702      
00003DE2                          1703  no_money:
00003DE2  43F9 000055F9           1704      lea     no_money_msg,A1 Load the no money message
00003DE8  103C 000E               1705      move.b  #14,D0          Move the number literal 14 to D0 for trap command
00003DEC  4E4F                    1706      trap    #15             Display the loaded message
00003DEE                          1707      
00003DEE  6100 0054               1708      bsr     press_continue  Wait for player input
00003DF2  4E75                    1709      rts                     Return from subroutine
00003DF4                          1710      
00003DF4                          1711  no_shop_potions:
00003DF4  43F9 00005619           1712      lea     no_item_msg,A1  Load the no money message
00003DFA  103C 000E               1713      move.b  #14,D0          Move the number literal 14 to D0 for trap command
00003DFE  4E4F                    1714      trap    #15             Display the loaded message
00003E00  554D                    1715      sub.w   #S_POTIONS,A5   Move the shop pointer back to root
00003E02                          1716      
00003E02  6100 0040               1717      bsr     press_continue  Wait for player input
00003E06  4E75                    1718      rts                     Return from subroutine
00003E08                          1719      
00003E08                          1720  no_shop_keys:
00003E08  43F9 00005619           1721      lea     no_item_msg,A1  Load the no money message
00003E0E  103C 000E               1722      move.b  #14,D0          Move the number literal 14 to D0 for trap command
00003E12  4E4F                    1723      trap    #15             Display the loaded message
00003E14  574D                    1724      sub.w   #S_KEYS,A5      Move the shop pointer back to root
00003E16                          1725      
00003E16  6100 002C               1726      bsr     press_continue  Wait for player input
00003E1A  4E75                    1727      rts                     Return from subroutine
00003E1C                          1728      
00003E1C                          1729  no_shop_torches:
00003E1C  43F9 00005619           1730      lea     no_item_msg,A1  Load the no money message
00003E22  103C 000E               1731      move.b  #14,D0          Move the number literal 14 to D0 for trap command
00003E26  4E4F                    1732      trap    #15             Display the loaded message
00003E28  594D                    1733      sub.w   #S_TORCHES,A5   Move the shop pointer back to root
00003E2A                          1734      
00003E2A  6100 0018               1735      bsr     press_continue  Wait for player input
00003E2E  4E75                    1736      rts                     Return from subroutine
00003E30                          1737  
00003E30                          1738  no_shop_damage_up:
00003E30  43F9 00005619           1739      lea     no_item_msg,A1  Load the no money message
00003E36  103C 000E               1740      move.b  #14,D0          Move the number literal 14 to D0 for trap command
00003E3A  4E4F                    1741      trap    #15             Display the loaded message
00003E3C  5B4D                    1742      sub.w   #S_DAMAGE_IN,A5 Move the shop pointer back to root
00003E3E                          1743      
00003E3E  6100 0004               1744      bsr     press_continue  Wait for player input
00003E42  4E75                    1745      rts                     Return from subroutine
00003E44                          1746  
00003E44                          1747  *-------------------------------------------------------
00003E44                          1748  *-------------------Misc Subroutines--------------------
00003E44                          1749  *-------------------------------------------------------
00003E44                          1750  press_continue:
00003E44  6100 FA42               1751      bsr     endl
00003E48                          1752  
00003E48  43F9 00004F45           1753      lea     continue_msg,A1 Load message into A1
00003E4E  103C 000E               1754      move.b  #14,D0          Move the trap command to display a message
00003E52  4E4F                    1755      trap    #15             display the "press any ket to continue" text
00003E54                          1756      
00003E54  103C 0004               1757      move.b  #4,D0           Move the trap command to take input
00003E58  4E4F                    1758      trap    #15             take input to freeze the game
00003E5A  4E75                    1759      rts                     Return from the 'press continue' subroutine
00003E5C                          1760      
00003E5C                          1761  random_number:              *Psuedo random number generator, courtesy of Pdraig
00003E5C  103C 0008               1762      move.b  #8,D0
00003E60  4E4F                    1763      trap    #15
00003E62  C2BC 005FFFFF           1764      and.l   #$5FFFFF,d1     prevent overflow in divu
00003E68  82FC 0064               1765      divu    #100,D1         time count / 100
00003E6C  4841                    1766      swap    D1              swap upper and lower words of D1 to put remainder in low word
00003E6E  5241                    1767      addq.w  #1,D1           d1.w contains number from 1 to 100
00003E70  3401                    1768      move    D1,D2           d2 = d1
00003E72  4281                    1769      clr.l   D1
00003E74                          1770      
00003E74  4E75                    1771      rts                     Returns from random generation subroutine
00003E76                          1772      
00003E76                          1773  return:   *Subroutine to branch to to break out of a subroutine when a condition is met
00003E76  4E75                    1774      rts
00003E78                          1775      
00003E78                          1776  take_potion:
00003E78  0C38 0000 5FF9          1777      CMP.B   #0,PLA_POTIONS      Check if the player has potions to drink
00003E7E  6F00 001A               1778      BLE     no_potions          If the potions are zero or below branch to no_potions
00003E82                          1779      
00003E82  5638 5FF0               1780      add.b   #3,PLAYER           Add 3 to the player's health
00003E86  5338 5FF9               1781      sub.b   #1,PLA_POTIONS      Remove one potion
00003E8A                          1782      
00003E8A  43F9 000054B3           1783      lea     take_potion_msg,A1  Load the take potion message
00003E90  103C 000E               1784      move.b  #14,D0              Move the number literal 14 to D0 for trap command
00003E94  4E4F                    1785      trap    #15                 Display the loaded message
00003E96                          1786      
00003E96  61AC                    1787      bsr     press_continue      Wait for player input
00003E98                          1788      
00003E98  4E75                    1789      rts                         Return from subroutine
00003E9A                          1790  
00003E9A                          1791  no_potions:
00003E9A  43F9 000054ED           1792      lea     no_potions_msg,A1   Load the no potions message
00003EA0  103C 000E               1793      move.b  #14,D0              Move the number literal 14 to D0 for trap command
00003EA4  4E4F                    1794      trap    #15                 Display the loaded message
00003EA6                          1795      
00003EA6  619C                    1796      bsr     press_continue      Wait for player input
00003EA8                          1797      
00003EA8  4E75                    1798      rts                         Return from subroutine
00003EAA                          1799      
00003EAA                          1800  decrement_torch:
00003EAA  0C38 0000 5FFB          1801      CMP.B   #0,PLA_TORCH    Compare the torch life to 0
00003EB0  6FC4                    1802      BLE     return          If it's less than or equalt to zero, return
00003EB2  5338 5FFB               1803      sub.b   #1,PLA_TORCH    Decrement by one if it's above zero
00003EB6  4E75                    1804      rts                     Return from subroutine
00003EB8                          1805      
00003EB8                          1806  change_font_colour:        * Changes the font colour to the colour loaded in D1
00003EB8  103C 0015               1807      move.b  #21,D0      Move #21 to D0 for trap command 21
00003EBC  243C 01090000           1808      move.l  #FONT,D2    Move the font to D2
00003EC2  4E4F                    1809      trap    #15         Set the colour
00003EC4  4281                    1810      clr.l   D1          Clear D1 for later use
00003EC6  4282                    1811      clr.l   D2          Clear D2 for later use
00003EC8  4E75                    1812      rts                 Return from subroutine
00003ECA                          1813      
00003ECA                          1814  get_cursor_pos:
00003ECA  323C 00FF               1815      move.w  #255,D1         Move the word #255 to D1 to set the type of trap 11
00003ECE  103C 000B               1816      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
00003ED2  4E4F                    1817      trap    #15             Trap to get the cursor position in D1
00003ED4                          1818      
00003ED4  2601                    1819      move.l  D1,D3           Move the value in D1 to D3 for storage
00003ED6  4E75                    1820      rts
00003ED8                          1821      
00003ED8                          1822  *-------------------------------------------------------
00003ED8                          1823  *----------------------Draw loop------------------------
00003ED8                          1824  *-------------------------------------------------------
00003ED8                          1825  draw_loop:
00003ED8  45F9 00008080           1826      lea     MAP_START_POINT,A2     Load starting memory location into A7
00003EDE  1C3C 0000               1827      move.b  #0,D6           Data register used for rows
00003EE2  1E3C 0000               1828      move.b  #0,D7           Data register used for columns
00003EE6  7200                    1829      move.l  #0,D1           Clear the D1 data register
00003EE8                          1830      
00003EE8  6100 0004               1831      bsr     loop_rows       Loop for every row
00003EEC  4E75                    1832      rts
00003EEE                          1833      
00003EEE                          1834  loop_rows:
00003EEE  BC7C 000F               1835      CMP     #MAP_LENGTH,D6          Check the rows don't go out of bounds
00003EF2  6E82                    1836      BGT     return          If the rows are greater than 22 end the loop
00003EF4                          1837      
00003EF4  1E3C 0000               1838      move.b  #0,D7           Reset to column 0
00003EF8  6100 000A               1839      bsr     loop_columns    Loop for every column
00003EFC                          1840      
00003EFC  5206                    1841      add.b   #1,D6           Add to the rows
00003EFE                          1842      
00003EFE  6100 F988               1843      bsr     endl            Break to the next line
00003F02  60EA                    1844      bra     loop_rows       Loop through the rows again
00003F04                          1845      
00003F04                          1846  loop_columns:
00003F04  BE3C 000F               1847      CMP.B   #15,D7              Check the rows don't go out of bounds
00003F08  6E00 FF6C               1848      BGT     return              If the rows are greater than 22 end the loop
00003F0C                          1849      
00003F0C  6100 0020               1850      bsr     draw_tile           Draw the current tile
00003F10  6100 00C6               1851      bsr     check_for_loot_piles Draw the loot piles if there is one on the current tile
00003F14  6100 0140               1852      bsr     check_for_player    Draw the player in the current tile if they're there
00003F18  6100 0184               1853      bsr     check_for_enemies   Draw an enemy in the current tile if they is one there
00003F1C  6100 02C0               1854      bsr     check_for_win_point Draw the win point in the current tile if it's there
00003F20  6100 01F2               1855      bsr     check_for_shops     Draw a shop in the current tile if there is one
00003F24  6100 025A               1856      bsr     check_for_doors     Draw a door in the current ile if there is one
00003F28                          1857      
00003F28  5207                    1858      add.b   #1,D7               Add to the column count
00003F2A  524A                    1859      add     #1,A2               Move to the next memory location
00003F2C  60D6                    1860      bra     loop_columns        Loop the columns again
00003F2E                          1861      
00003F2E                          1862  *-------------------------------------------------------
00003F2E                          1863  *----------------------Draw tile------------------------
00003F2E                          1864  *-------------------------------------------------------
00003F2E                          1865  *Draws the tile at the address in the address register A2
00003F2E                          1866  draw_tile:
00003F2E  0C12 00FF               1867      CMP.B   #255,(A2)           Check if the value is undifined
00003F32  6700 005E               1868      BEQ     draw_blocked_tile   Draw the blank tile
00003F36                          1869      
00003F36  0C12 0001               1870      CMP.B   #1,(A2)
00003F3A  6700 0064               1871      BEQ     draw_both_tile
00003F3E  0C12 0003               1872      CMP.B   #3,(A2)
00003F42  6700 006A               1873      BEQ     draw_left_tile
00003F46  0C12 0004               1874      CMP.B   #4,(A2)
00003F4A  6700 0062               1875      BEQ     draw_left_tile
00003F4E  0C12 0005               1876      CMP.B   #5,(A2)
00003F52  6700 0068               1877      BEQ     draw_right_tile
00003F56  0C12 0006               1878      CMP.B   #6,(A2)
00003F5A  6700 0060               1879      BEQ     draw_right_tile
00003F5E  0C12 0008               1880      CMP.B   #8,(A2)
00003F62  6700 004A               1881      BEQ     draw_left_tile
00003F66  0C12 000A               1882      CMP.B   #10,(A2)
00003F6A  6700 0050               1883      BEQ     draw_right_tile
00003F6E  0C12 000B               1884      CMP.B   #11,(A2)
00003F72  6700 003A               1885      BEQ     draw_left_tile
00003F76  0C12 000C               1886      CMP.B   #12,(A2)
00003F7A  6700 0024               1887      BEQ     draw_both_tile
00003F7E  0C12 000D               1888      CMP.B   #13,(A2)
00003F82  6700 0038               1889      BEQ     draw_right_tile
00003F86  0C12 000E               1890      CMP.B   #14,(A2)
00003F8A  6700 0014               1891      BEQ     draw_both_tile
00003F8E                          1892      
00003F8E  6000 003A               1893      BRA     draw_blank_tile     Draw the blank tile
00003F92                          1894      
00003F92                          1895  draw_blocked_tile:
00003F92  43F9 00004F73           1896      lea     blocked_tile,A1
00003F98  103C 000E               1897      move.b  #14,D0
00003F9C  4E4F                    1898      trap    #15
00003F9E  4E75                    1899      rts
00003FA0                          1900      
00003FA0                          1901  draw_both_tile:
00003FA0  43F9 00004F67           1902      lea     both_tile,A1
00003FA6  103C 000E               1903      move.b  #14,D0
00003FAA  4E4F                    1904      trap    #15
00003FAC  4E75                    1905      rts
00003FAE                          1906      
00003FAE                          1907  draw_left_tile:
00003FAE  43F9 00004F6B           1908      lea     left_tile,A1
00003FB4  103C 000E               1909      move.b  #14,D0
00003FB8  4E4F                    1910      trap    #15
00003FBA  4E75                    1911      rts
00003FBC                          1912      
00003FBC                          1913  draw_right_tile:
00003FBC  43F9 00004F6F           1914      lea     right_tile,A1
00003FC2  103C 000E               1915      move.b  #14,D0
00003FC6  4E4F                    1916      trap    #15
00003FC8  4E75                    1917      rts
00003FCA                          1918      
00003FCA                          1919  draw_blank_tile:
00003FCA  43F9 00004F63           1920      lea     blank_tile,A1
00003FD0  103C 000E               1921      move.b  #14,D0
00003FD4  4E4F                    1922      trap    #15
00003FD6  4E75                    1923      rts
00003FD8                          1924  
00003FD8                          1925  *----------------------Draw Loot------------------------
00003FD8                          1926  check_for_loot_piles:
00003FD8  4BF8 7000               1927      lea     FIRST_LOOT,A5   Load the memory address of the first loot pile
00003FDC  1A3C 0000               1928      move.b  #0,D5           Move the starting loot number to D5
00003FE0  6100 0004               1929      bsr     loop_loot_piles Loop through all loot piles
00003FE4  4E75                    1930      rts                     Return from subroutine
00003FE6                          1931      
00003FE6                          1932  loop_loot_piles:
00003FE6  6100 0014               1933      bsr     check_for_loot  Check for a loot pile
00003FEA                          1934      
00003FEA  BA3C 0002               1935      CMP.B   #ENEMY_MAX,D5   Compare the enemy number with the maximum loot number
00003FEE  6C00 FE86               1936      BGE     return          Return from the loop if the current loot number is greater than or equal to the max
00003FF2                          1937      
00003FF2  5205                    1938      add.b   #1,D5           Add to the current loot number
00003FF4  DAFC 0010               1939      add.w   #16,A5          Add to the current loot pointer to move to the next loot pile
00003FF8  5D4D                    1940      sub.w   #L_ACTIVE,A5    Move to the root
00003FFA  60EA                    1941      bra     loop_loot_piles Keep looping the loot piles
00003FFC                          1942      
00003FFC                          1943  check_for_loot:
00003FFC  5C4D                    1944      add.w   #L_ACTIVE,A5    Move to the active state
00003FFE  0C15 0000               1945      CMP.B   #0,(A5)         Return if the loot is not active
00004002  6700 FE72               1946      BEQ     return
00004006  5D4D                    1947      sub.w   #L_ACTIVE,A5    Move to the root
00004008                          1948  
00004008  3615                    1949      move.w  (A5),D3         Move the enemy coordinates into data register D3 for large-value comparisons
0000400A  B5C3                    1950      CMP.L   D3,A2           Check if the enemy is in the current position
0000400C  6700 0006               1951      BEQ     draw_loot       Draw the enemy if it is
00004010  5C4D                    1952      add.w   #L_ACTIVE,A5    Move to the active state
00004012  4E75                    1953      rts                     Return if the enemy is not in the current position
00004014                          1954      
00004014                          1955  draw_loot:
00004014  5C4D                    1956      add.w   #L_ACTIVE,A5    Move to the active state
00004016                          1957  
00004016  323C 00FF               1958      move.w  #255,D1         Move the word #255 to D1 to set the type of trap 11
0000401A  103C 000B               1959      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
0000401E  4E4F                    1960      trap    #15             Trap to get the cursor position in D1
00004020                          1961      
00004020  0441 0200               1962      sub.w   #512,D1         Move the cursor back by two columns
00004024  4E4F                    1963      trap    #15             Set the cursor position with trap command 11
00004026                          1964      
00004026  2601                    1965      move.l  D1,D3           Move the value in D1 to D3 for storage
00004028                          1966      
00004028  223C 0000FFFF           1967      move.l  #GOLD,D1         Move the colour red to D1
0000402E  6100 FE88               1968      bsr     change_font_colour  Change the font colour
00004032                          1969      
00004032  43F9 00004F7F           1970      lea     loot_mark,A1   load the enemy symbol
00004038  103C 000E               1971      move.b  #14,D0          Move #14 to D0 for trap command 14
0000403C  4E4F                    1972      trap    #15             Draw the player mark
0000403E                          1973      
0000403E  223C 00FFFFFF           1974      move.l  #WHITE,D1       Move the colour white to D1
00004044  6100 FE72               1975      bsr     change_font_colour  Change the font colour
00004048                          1976      
00004048  2203                    1977      move.l  D3,D1           Move the value in D3 to D1 for previous cursor position
0000404A                          1978      
0000404A  0641 0200               1979      add.w   #512,D1         Move the cursor position two columns forward
0000404E  103C 000B               1980      move.b  #11,D0          Move byte #11 for trap command 11 
00004052  4E4F                    1981      trap    #15             Set the cursor position
00004054                          1982      
00004054  4E75                    1983      rts 
00004056                          1984  
00004056                          1985  *---------------------Draw Player-----------------------
00004056                          1986  check_for_player:
00004056  B5CE                    1987      CMP.L   A6,A2
00004058  6700 0004               1988      BEQ     draw_player
0000405C  4E75                    1989      rts
0000405E                          1990      
0000405E                          1991  draw_player:
0000405E  323C 00FF               1992      move.w  #255,D1         Move the word #255 to D1 to set the type of trap 11
00004062  103C 000B               1993      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
00004066  4E4F                    1994      trap    #15             Trap to get the cursor position in D1
00004068                          1995      
00004068  0441 0200               1996      sub.w   #512,D1         Move the cursor back by two columns
0000406C  4E4F                    1997      trap    #15             Set the cursor position with trap command 11
0000406E                          1998      
0000406E  2601                    1999      move.l  D1,D3          Move the value in D1 to D3 for storage
00004070                          2000      
00004070  223C 0000FF00           2001      move.l  #GREEN,D1       Move the colour green to D1
00004076  6100 FE40               2002      bsr     change_font_colour  Change the font colour
0000407A                          2003      
0000407A  43F9 00004F77           2004      lea     player_mark,A1  load the player symbol
00004080  103C 000E               2005      move.b  #14,D0          Move #14 to D0 for trap command 14
00004084  4E4F                    2006      trap    #15             Draw the player mark
00004086                          2007      
00004086  223C 00FFFFFF           2008      move.l  #WHITE,D1       Move the colour white to D1
0000408C  6100 FE2A               2009      bsr     change_font_colour  Change the font colour
00004090                          2010      
00004090  2203                    2011      move.l  D3,D1           Move the value in D3 to D1 for previous cursor position
00004092                          2012      
00004092  0641 0200               2013      add.w   #512,D1         Move the cursor position two columns forward
00004096  103C 000B               2014      move.b  #11,D0          Move byte #11 for trap command 11 
0000409A  4E4F                    2015      trap    #15             Set the cursor position
0000409C                          2016      
0000409C  4E75                    2017      rts
0000409E                          2018      
0000409E                          2019  *---------------------Draw Enemies----------------------
0000409E                          2020  check_for_enemies:
0000409E  4BF8 6000               2021      lea     FIRST_ENEMY,A5  Load the memory address of the first enemy
000040A2  1A3C 0000               2022      move.b  #0,D5           Move the starting enemy number to D5
000040A6  6100 0004               2023      bsr     loop_enemies    Loop through all enemies
000040AA  4E75                    2024      rts                     Return from subroutine
000040AC                          2025      
000040AC                          2026  loop_enemies:
000040AC  6100 0012               2027      bsr     check_for_enemy Check for an enemy
000040B0                          2028      
000040B0  BA3C 0002               2029      CMP.B   #ENEMY_MAX,D5   Compare the enemy number with the maximum enemy number
000040B4  6C00 FDC0               2030      BGE     return          Return from the loop if the current enemy number is greater than or equal to the max
000040B8                          2031      
000040B8  5205                    2032      add.b   #1,D5           Add to the current enemy number
000040BA  DAFC 000C               2033      add.w   #12,A5          Add to the current enemy pointer to move to the next enemy (16 for next enemy - 4 to get back from position)
000040BE  60EC                    2034      bra     loop_enemies    Keep looping the enemies
000040C0                          2035      
000040C0                          2036  check_for_enemy:
000040C0  564D                    2037      add.w   #ALIVE,A5       Add to the enemy memory address to get the enemy's alive state
000040C2  0C1D 0000               2038      CMP.B   #0,(A5)+        Check if the enemy is alive
000040C6  6700 FDAE               2039      BEQ     return          Return from the subroutine if not
000040CA                          2040      
000040CA  3615                    2041      move.w  (A5),D3         Move the enemy coordinates into data register D3 for large-value comparisons
000040CC  B5C3                    2042      CMP.L   D3,A2           Check if the enemy is in the current position
000040CE  6700 0004               2043      BEQ     draw_enemy      Draw the enemy if it is
000040D2  4E75                    2044      rts                     Return if the enemy is not in the current position
000040D4                          2045      
000040D4                          2046  draw_enemy:
000040D4  323C 00FF               2047      move.w  #255,D1         Move the word #255 to D1 to set the type of trap 11
000040D8  103C 000B               2048      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
000040DC  4E4F                    2049      trap    #15             Trap to get the cursor position in D1
000040DE                          2050      
000040DE  0441 0200               2051      sub.w   #512,D1         Move the cursor back by two columns
000040E2  4E4F                    2052      trap    #15             Set the cursor position with trap command 11
000040E4                          2053      
000040E4  2601                    2054      move.l  D1,D3          Move the value in D1 to D3 for storage
000040E6                          2055      
000040E6  223C 000000FF           2056      move.l  #RED,D1         Move the colour red to D1
000040EC  6100 FDCA               2057      bsr     change_font_colour  Change the font colour
000040F0                          2058      
000040F0  43F9 00004F79           2059      lea     enemy_mark,A1   load the enemy symbol
000040F6  103C 000E               2060      move.b  #14,D0          Move #14 to D0 for trap command 14
000040FA  4E4F                    2061      trap    #15             Draw the player mark
000040FC                          2062      
000040FC  223C 00FFFFFF           2063      move.l  #WHITE,D1       Move the colour white to D1
00004102  6100 FDB4               2064      bsr     change_font_colour  Change the font colour
00004106                          2065      
00004106  2203                    2066      move.l  D3,D1           Move the value in D3 to D1 for previous cursor position
00004108                          2067      
00004108  0641 0200               2068      add.w   #512,D1         Move the cursor position two columns forward
0000410C  103C 000B               2069      move.b  #11,D0          Move byte #11 for trap command 11 
00004110  4E4F                    2070      trap    #15             Set the cursor position
00004112                          2071      
00004112  4E75                    2072      rts 
00004114                          2073   
00004114                          2074  *----------------------Draw Shops-----------------------
00004114                          2075  check_for_shops:
00004114  4BF8 6500               2076      lea     FIRST_SHOP,A5   Load the memory address of the first shop
00004118  1A3C 0000               2077      move.b  #0,D5           Move the starting shop number to D5
0000411C  6100 0004               2078      bsr     loop_shops      Loop through all shops
00004120  4E75                    2079      rts                     Return from subroutine
00004122                          2080      
00004122                          2081  loop_shops:
00004122  6100 0012               2082      bsr     check_for_shop  Check for a shop
00004126                          2083      
00004126  BA3C 0002               2084      CMP.B   #SHOP_MAX,D5    Compare the shop number with the maximum shop number
0000412A  6C00 FD4A               2085      BGE     return          Return from the loop if the current shop number is greater than or equal to the max
0000412E                          2086      
0000412E  5205                    2087      add.b   #1,D5           Add to the current shop number
00004130  DAFC 0010               2088      add.w   #16,A5          Add to the current shop pointer to move to the next shop
00004134  60EC                    2089      bra     loop_shops      Keep looping the shops
00004136                          2090      
00004136                          2091  check_for_shop:
00004136  3615                    2092      move.w  (A5),D3         Move the shop coordinates into data register D3 for large-value comparisons
00004138  B5C3                    2093      CMP.L   D3,A2           Check if the shop is in the current position
0000413A  6700 0004               2094      BEQ     draw_shop       Draw the shop if it is
0000413E  4E75                    2095      rts                     Return if the shop is not in the current position
00004140                          2096      
00004140                          2097  draw_shop:
00004140  323C 00FF               2098      move.w  #255,D1         Move the word #255 to D1 to set the type of trap 11
00004144  103C 000B               2099      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
00004148  4E4F                    2100      trap    #15             Trap to get the cursor position in D1
0000414A                          2101      
0000414A  0441 0200               2102      sub.w   #512,D1         Move the cursor back by two columns
0000414E  4E4F                    2103      trap    #15             Set the cursor position with trap command 11
00004150                          2104      
00004150  2601                    2105      move.l  D1,D3           Move the value in D1 to D3 for storage
00004152                          2106      
00004152  223C 00F000F0           2107      move.l  #PURPLE,D1      Move the colour red to D1
00004158  6100 FD5E               2108      bsr     change_font_colour  Change the font colour
0000415C                          2109      
0000415C  43F9 00004F7D           2110      lea     shop_mark,A1    load the enemy symbol
00004162  103C 000E               2111      move.b  #14,D0          Move #14 to D0 for trap command 14
00004166  4E4F                    2112      trap    #15             Draw the player mark
00004168                          2113      
00004168  223C 00FFFFFF           2114      move.l  #WHITE,D1       Move the colour white to D1
0000416E  6100 FD48               2115      bsr     change_font_colour  Change the font colour
00004172                          2116      
00004172  2203                    2117      move.l  D3,D1           Move the value in D3 to D1 for previous cursor position
00004174                          2118      
00004174  0641 0200               2119      add.w   #512,D1         Move the cursor position two columns forward
00004178  103C 000B               2120      move.b  #11,D0          Move byte #11 for trap command 11 
0000417C  4E4F                    2121      trap    #15             Set the cursor position
0000417E                          2122      
0000417E  4E75                    2123      rts
00004180                          2124  
00004180                          2125  *----------------------Draw Doors-----------------------
00004180                          2126  check_for_doors:
00004180  4BF8 6FE0               2127      lea     FIRST_DOOR,A5   Load the memory address of the first door
00004184  1A3C 0000               2128      move.b  #0,D5           Move the starting door number to D5
00004188  6100 0004               2129      bsr     loop_doors      Loop through all doors
0000418C  4E75                    2130      rts                     Return from subroutine
0000418E                          2131      
0000418E                          2132  loop_doors:
0000418E  6100 0010               2133      bsr     check_for_door  Check for a door
00004192                          2134      
00004192  BA3C 0001               2135      CMP.B   #DOOR_MAX,D5    Compare the door number with the maximum door number
00004196  6C00 FCDE               2136      BGE     return          Return from the loop if the current door number is greater than or equal to the max
0000419A                          2137      
0000419A  5205                    2138      add.b   #1,D5           Add to the current door number
0000419C  544D                    2139      add.w   #2,A5          Add to the current door pointer to move to the next door
0000419E  60EE                    2140      bra     loop_doors      Keep looping the doors
000041A0                          2141      
000041A0                          2142  check_for_door:
000041A0  3615                    2143      move.w  (A5),D3         Move the door coordinates into data register D3 for large-value comparisons
000041A2  B5C3                    2144      CMP.L   D3,A2           Check if the door is in the current position
000041A4  6700 0004               2145      BEQ     draw_door       Draw the door if it is
000041A8  4E75                    2146      rts                     Return if the door is not in the current position
000041AA                          2147      
000041AA                          2148  draw_door:
000041AA  6100 FD1E               2149      bsr     get_cursor_pos  Get the position of the cursor and save the value to D1 and D3
000041AE                          2150      
000041AE  0441 0200               2151      sub.w   #512,D1         Move the cursor back by two columns
000041B2  4E4F                    2152      trap    #15             Set the cursor position with trap command 11
000041B4                          2153      
000041B4  223C 00507090           2154      move.l  #BROWN,D1       Move the colour red to D1
000041BA  6100 FCFC               2155      bsr     change_font_colour  Change the font colour
000041BE                          2156      
000041BE  43F9 00004F81           2157      lea     door_mark,A1    load the door symbol
000041C4  103C 000E               2158      move.b  #14,D0          Move #14 to D0 for trap command 14
000041C8  4E4F                    2159      trap    #15             Draw the door mark
000041CA                          2160      
000041CA  223C 00FFFFFF           2161      move.l  #WHITE,D1       Move the colour white to D1
000041D0  6100 FCE6               2162      bsr     change_font_colour  Change the font colour
000041D4                          2163      
000041D4  2203                    2164      move.l  D3,D1           Move the value in D3 to D1 for previous cursor position
000041D6  103C 000B               2165      move.b  #11,D0          Move byte #11 for trap command 11 
000041DA  4E4F                    2166      trap    #15             Set the cursor position
000041DC                          2167      
000041DC  4E75                    2168      rts                     Return from subroutine
000041DE                          2169  
000041DE                          2170  *--------------------Draw Win Point---------------------
000041DE                          2171  check_for_win_point:
000041DE  B5FC 00008156           2172      CMP.L   #WIN_POINT,A2   Check if the win point is in the current tile
000041E4  6700 0004               2173      BEQ     draw_win_point  Branch to draw the win point if so
000041E8  4E75                    2174      rts                     Return from subroutine if not
000041EA                          2175      
000041EA                          2176  draw_win_point:
000041EA  323C 00FF               2177      move.w  #255,D1         Move the word #255 to D1 to set the type of trap 11
000041EE  103C 000B               2178      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
000041F2  4E4F                    2179      trap    #15             Trap to get the cursor position in D1
000041F4                          2180      
000041F4  0441 0200               2181      sub.w   #512,D1         Move the cursor back by two columns
000041F8  4E4F                    2182      trap    #15             Set the cursor position with trap command 11
000041FA                          2183      
000041FA  2601                    2184      move.l  D1,D3           Move the value in D1 to D3 for storage
000041FC                          2185      
000041FC  223C 00FF0000           2186      move.l  #BLUE,D1        Move the colour blue to D1
00004202  6100 FCB4               2187      bsr     change_font_colour  Change the font colour
00004206                          2188      
00004206  43F9 00004F7B           2189      lea     win_point_mark,A1   load the win point symbol
0000420C  103C 000E               2190      move.b  #14,D0              Move #14 to D0 for trap command 14
00004210  4E4F                    2191      trap    #15                 Draw the win point mark
00004212                          2192      
00004212  223C 00FFFFFF           2193      move.l  #WHITE,D1       Move the colour white to D1
00004218  6100 FC9E               2194      bsr     change_font_colour  Change the font colour
0000421C                          2195      
0000421C  2203                    2196      move.l  D3,D1           Move the value in D3 to D1 for previous cursor position
0000421E                          2197      
0000421E  0641 0200               2198      add.w   #512,D1         Move the cursor position two columns forward
00004222  103C 000B               2199      move.b  #11,D0          Move byte #11 for trap command 11 
00004226  4E4F                    2200      trap    #15             Set the cursor position
00004228                          2201      
00004228  4E75                    2202      rts
0000422A                          2203      
0000422A                          2204  *-------------------------------------------------------
0000422A                          2205  *-------------------Setup the world---------------------
0000422A                          2206  *-------------------------------------------------------
0000422A                          2207  setup_world:
0000422A  13FC 000E 0000814A      2208      move.b  #14,$814A   Setup the starting corridor
00004232  13FC 0007 0000813A      2209      move.b  #7,$813A    T junction upwards from starting corridor
0000423A  13FC 0004 00008139      2210      move.b  #4,$8139    Left corridor
00004242  13FC 0001 00008129      2211      move.b  #1,$8129
0000424A  13FC 0001 00008119      2212      move.b  #1,$8119
00004252                          2213      
00004252  13FC 0004 00008108      2214      move.b  #4,$8108    First shop
0000425A  13FC 0000 00008109      2215      move.b  #0,$8109    Entrance
00004262  13FC 0005 0000810A      2216      move.b  #5,$810A
0000426A  13FC 0008 000080F8      2217      move.b  #8,$80F8
00004272  13FC 0000 000080F9      2218      move.b  #0,$80F9
0000427A  13FC 000A 000080FA      2219      move.b  #10,$80FA
00004282  13FC 0003 000080E8      2220      move.b  #3,$80E8
0000428A  13FC 0007 000080E9      2221      move.b  #7,$80E9
00004292  13FC 0006 000080EA      2222      move.b  #6,$80EA
0000429A                          2223      
0000429A  13FC 0005 0000813B      2224      move.b  #5,$813B    Right corridor
000042A2  13FC 0001 0000812B      2225      move.b  #1,$812B
000042AA  13FC 0001 0000811B      2226      move.b  #1,$811B
000042B2  13FC 0008 0000810B      2227      move.b  #8,$810B    Path continues up with a turn off to the right
000042BA                          2228      
000042BA  13FC 0002 0000810C      2229      move.b  #2,$810C    Right path
000042C2  13FC 0002 0000810D      2230      move.b  #2,$810D    Continue right
000042CA  13FC 0005 0000810E      2231      move.b  #5,$810E    Path upwards and to the left
000042D2  13FC 0001 000080FE      2232      move.b  #1,$80FE    Leads upwards into a room
000042DA                          2233      
000042DA  13FC 0004 000080ED      2234      move.b  #4,$80ED    First monster room
000042E2  13FC 0000 000080EE      2235      move.b  #0,$80EE    Entrance
000042EA  13FC 0005 000080EF      2236      move.b  #5,$80EF
000042F2  13FC 0008 000080DD      2237      move.b  #8,$80DD
000042FA  13FC 0000 000080DE      2238      move.b  #0,$80DE
00004302  13FC 000A 000080DF      2239      move.b  #10,$80DF
0000430A  13FC 0003 000080CD      2240      move.b  #3,$80CD
00004312  13FC 0007 000080CE      2241      move.b  #7,$80CE
0000431A  13FC 0006 000080CF      2242      move.b  #6,$80CF
00004322                          2243      
00004322  13FC 0001 000080FB      2244      move.b  #1,$80FB    Path that continues up
0000432A  13FC 0001 000080EB      2245      move.b  #1,$80EB    Path continues upwards
00004332  13FC 0001 000080DB      2246      move.b  #1,$80DB
0000433A                          2247      
0000433A                          2248      *Bottom row of room
0000433A  13FC 0004 000080C8      2249      move.b  #4,$80C8    Large monster room with locked door
00004342  13FC 0009 000080C9      2250      move.b  #9,$80C9
0000434A  13FC 0009 000080CA      2251      move.b  #9,$80CA
00004352  13FC 0000 000080CB      2252      move.b  #0,$80CB    Entrance
0000435A  13FC 0005 000080CC      2253      move.b  #5,$80CC
00004362                          2254      *Middle row of room
00004362  13FC 0000 000080B8      2255      move.b  #0,$80B8    Exit to the left
0000436A  13FC 0000 000080B9      2256      move.b  #0,$80B9
00004372  13FC 0000 000080BA      2257      move.b  #0,$80BA
0000437A  13FC 0000 000080BB      2258      move.b  #0,$80BB
00004382  13FC 000A 000080BC      2259      move.b  #10,$80BC
0000438A                          2260      *Top row of room
0000438A  13FC 0003 000080A8      2261      move.b  #3,$80A8
00004392  13FC 0007 000080A9      2262      move.b  #7,$80A9
0000439A  13FC 0007 000080AA      2263      move.b  #7,$80AA
000043A2  13FC 0007 000080AB      2264      move.b  #7,$80AB    Locked door
000043AA  13FC 0006 000080AC      2265      move.b  #6,$80AC
000043B2                          2266      
000043B2  13FC 0002 000080B7      2267      move.b  #2,$80B7    Exit large room leftwards
000043BA  13FC 0002 000080B6      2268      move.b  #2,$80B6    Continue to the left
000043C2  13FC 0007 000080B5      2269      move.b  #7,$80B5    Continue to the left and a path downwards
000043CA  13FC 0002 000080B4      2270      move.b  #2,$80B4    Continue to the left
000043D2                          2271      
000043D2  13FC 0003 000080A1      2272      move.b  #3,$80A1    Room to the left
000043DA  13FC 0007 000080A2      2273      move.b  #7,$80A2
000043E2  13FC 0006 000080A3      2274      move.b  #6,$80A3
000043EA  13FC 0008 000080B1      2275      move.b  #8,$80B1
000043F2  13FC 0000 000080B2      2276      move.b  #0,$80B2
000043FA  13FC 0000 000080B3      2277      move.b  #0,$80B3    Entrance to the right
00004402  13FC 0004 000080C1      2278      move.b  #4,$80C1
0000440A  13FC 0009 000080C2      2279      move.b  #9,$80C2
00004412  13FC 0005 000080C3      2280      move.b  #5,$80C3
0000441A                          2281      
0000441A  13FC 0001 000080C5      2282      move.b  #1,$80C5    Path leading downwards
00004422  13FC 0001 000080D5      2283      move.b  #1,$80D5
0000442A  13FC 000A 000080E5      2284      move.b  #10,$80E5   Path leading downward and to the left
00004432  13FC 0002 000080E4      2285      move.b  #2,$80E4    Path on the left
0000443A  13FC 0002 000080E3      2286      move.b  #2,$80E3
00004442  13FC 0003 000080E2      2287      move.b  #3,$80E2    Path takes a turn downwards
0000444A  13FC 0001 000080F2      2288      move.b  #1,$80F2    Path continues downwards
00004452                          2289      
00004452  13FC 0003 00008101      2290      move.b  #3,$8101    Regular enemy room
0000445A  13FC 0000 00008102      2291      move.b  #0,$8102    Entrance
00004462  13FC 0006 00008103      2292      move.b  #6,$8103
0000446A  13FC 0008 00008111      2293      move.b  #8,$8111
00004472  13FC 0000 00008112      2294      move.b  #0,$8112
0000447A  13FC 000A 00008113      2295      move.b  #10,$8113
00004482  13FC 0004 00008121      2296      move.b  #4,$8121
0000448A  13FC 0009 00008122      2297      move.b  #9,$8122
00004492  13FC 000A 00008123      2298      move.b  #10,$8123   Exit at the bottom
0000449A                          2299      
0000449A  13FC 0001 000080F5      2300      move.b  #1,$80F5    Path leading downward
000044A2  13FC 0001 00008105      2301      move.b  #1,$8105
000044AA  13FC 0001 00008115      2302      move.b  #1,$8115
000044B2  13FC 0001 00008125      2303      move.b  #1,$8125
000044BA                          2304      
000044BA                          2305      *Top row of room
000044BA  13FC 0008 00008133      2306      move.b  #8,$8133    Large enemy room - Exit at top
000044C2  13FC 0007 00008134      2307      move.b  #7,$8134
000044CA  13FC 0000 00008135      2308      move.b  #0,$8135    Entrance
000044D2  13FC 0006 00008136      2309      move.b  #6,$8136
000044DA                          2310      
000044DA                          2311      *Middle row of room
000044DA  13FC 0008 00008143      2312      move.b  #8,$8143
000044E2  13FC 0000 00008144      2313      move.b  #0,$8144
000044EA  13FC 0000 00008145      2314      move.b  #0,$8145
000044F2  13FC 000A 00008146      2315      move.b  #10,$8146
000044FA                          2316      
000044FA                          2317      *Bottom row of room
000044FA  13FC 0004 00008153      2318      move.b  #4,$8153
00004502  13FC 0009 00008154      2319      move.b  #9,$8154
0000450A  13FC 0009 00008155      2320      move.b  #9,$8155
00004512  13FC 0005 00008156      2321      move.b  #5,$8156
0000451A                          2322      
0000451A                          2323      * Setup the doors
0000451A  31FC 80EB 6FE0          2324      move.w  #$80EB,FIRST_DOOR    Set the location of the first door
00004520                          2325      
00004520  4E75                    2326      rts
00004522                          2327  
00004522                          2328  setup_enemies:
00004522                          2329      * Setup first enemy
00004522  11FC 0003 6000          2330      move.b  #3,$6000    Health - Setup the first enemy
00004528  11FC 0001 6001          2331      move.b  #1,$6001    Damage/level
0000452E  11FC 0001 6002          2332      move.b  #1,$6002    Class type (Knight)
00004534  11FC 0001 6003          2333      move.b  #1,$6003    Alive state (Alive)
0000453A  31FC 80DE 6004          2334      move.w  #$80DE,$6004  Move enemy coordinates
00004540                          2335      
00004540                          2336      * Setup second enemy
00004540  11FC 0003 6010          2337      move.b  #3,$6010    Health - Setup the first enemy
00004546  11FC 0002 6011          2338      move.b  #2,$6011    Damage/level
0000454C  11FC 0001 6012          2339      move.b  #1,$6012    Class type (Knight)
00004552  11FC 0001 6013          2340      move.b  #1,$6013    Alive state (Alive)
00004558  31FC 8155 6014          2341      move.w  #$8155,$6014  Move enemy coordinates
0000455E                          2342      
0000455E  4E75                    2343      rts
00004560                          2344      
00004560                          2345  setup_loot:
00004560                          2346      * Setup first loot pile
00004560  31FC 80DE 7000          2347      move.w  #$80DE,$7000  Move loot coordinates
00004566  11FC 0001 7002          2348      move.b  #1,$7002  Move loot potions
0000456C  11FC 0002 7003          2349      move.b  #2,$7003  Move loot keys
00004572  11FC 000F 7004          2350      move.b  #LIFE_PER_TORCH,$7004  Move loot torches
00004578  11FC 0005 7005          2351      move.b  #5,$7005  Move loot gold
0000457E  11FC 0001 7006          2352      move.b  #1,$7006  Move loot active state
00004584                          2353      
00004584                          2354      * Setup second loot pile
00004584  31FC 8155 7010          2355      move.w  #$8155,$7010  Move loot coordinates
0000458A  11FC 0003 7012          2356      move.b  #3,$7012  Move loot potions
00004590  11FC 0005 7013          2357      move.b  #5,$7013  Move loot keys
00004596  11FC 0001 7014          2358      move.b  #1,$7014  Move loot torches
0000459C  11FC 0002 7015          2359      move.b  #2,$7015  Move loot gold
000045A2  11FC 0001 7016          2360      move.b  #1,$7016  Move loot active state
000045A8                          2361  
000045A8                          2362      
000045A8                          2363  setup_player:
000045A8  11FC 000A 5FF0          2364      move.b  #10,PLAYER      put score/health in memory location $5FF0
000045AE  11FC 0001 5FF1          2365      move.b  #1,PLA_DAMAGE   Assign the default damage for the player
000045B4  11FC 0000 5FF3          2366      move.b  #0,GAME_STATE   Put game state number in memory location $5FF3
000045BA                          2367      *0 = Pick role/intro | 5 = Move around | 6 = Combat | 7 = Shop | 64 = End game
000045BA                          2368  
000045BA  11FC 0000 5FF2          2369      move.b  #0,PLA_CLASS    put class number in memory location $5FF2
000045C0                          2370      * 1 corresponds to knight - 2 corresponds to mage - 3 corresponds to rogue
000045C0                          2371      
000045C0  11FC 0064 5FF8          2372      move.b  #100,PLA_GOLD    Assign the player's base gold value
000045C6  11FC 0001 5FF9          2373      move.b  #1,PLA_POTIONS  Assign the player's base potions value
000045CC  11FC 0000 5FFA          2374      move.b  #0,PLA_KEYS     Assign the player's base keys value
000045D2                          2375      *move.b  #LIFE_PER_TORCH,PLA_TORCH   Assign the player's base torch value
000045D2  11FC 0032 5FFB          2376      move.b  #50,PLA_TORCH   Assign the player's base torch value
000045D8                          2377      
000045D8  4DF9 0000814A           2378      lea     $814A,A6        Set the player coordinate to the first corridor
000045DE  31CE 5FF6               2379      move.w  A6,PLA_P_POS    Set the player's previous position to their current
000045E2                          2380      
000045E2  4E75                    2381      rts
000045E4                          2382      
000045E4                          2383  setup_shops:
000045E4                          2384      * Setup the first shop
000045E4  31FC 80F9 6500          2385      move.w  #$80F9,$6500    Set the position
000045EA  11FC 0002 6502          2386      move.b  #2,$6502        Set the potions
000045F0  11FC 0003 6503          2387      move.b  #3,$6503        Set the keys
000045F6  11FC 0004 6504          2388      move.b  #4,$6504        Set the torches
000045FC  11FC 0005 6505          2389      move.b  #5,$6505        Set the damage
00004602                          2390      
00004602                          2391      * Setup the second shop
00004602  31FC 80B2 6510          2392      move.w  #$80B2,$6510    Set the position
00004608  11FC 0004 6512          2393      move.b  #4,$6512        Set the potions
0000460E  11FC 0003 6513          2394      move.b  #3,$6513        Set the keys
00004614  11FC 0002 6514          2395      move.b  #2,$6514        Set the torches
0000461A  11FC 0001 6515          2396      move.b  #1,$6515        Set the damage
00004620                          2397  
00004620  4E75                    2398      rts
00004622                          2399      
00004622                          2400  *-------------------------------------------------------
00004622                          2401  *-------------------Data Delarations--------------------
00004622                          2402  *-------------------------------------------------------
00004622                          2403  
00004622= 0D 0A 00                2404  crlf:           dc.b    $0D,$0A,0
00004625= 2A 2A 2A 2A 2A 2A ...   2405  welcome_msg:    dc.b    '*****************************************************************',$0D,$0A
00004668= 20 20 20 20 20 20 ...   2406                  dc.b    '      __  ___      ___  __      ___        ______    _____  ___',$0D,$0A
000046A9= 20 20 20 20 20 2F ...   2407                  dc.b    '     /""\|"  \    /"  |/""\    |"  |      /    " \  (\"   \|"  \',$0D,$0A
000046EB= 20 20 20 20 2F 20 ...   2408                  dc.b    '    /    \\   \  //  //    \   ||  |     // ____  \ |.\\   \    |',$0D,$0A
0000472E= 20 20 20 2F 20 20 ...   2409                  dc.b    '   /  /\  \\\  \/. .//  /\  \  |:  |    /  /    ) :)|: \.   \\  |',$0D,$0A
00004771= 20 20 2F 2F 20 20 ...   2410                  dc.b    '  //  __   \\.    ////  __   \  \  |___(: (____/ // |.  \    \. |',$0D,$0A
000047B4= 20 2F 20 20 20 2F ...   2411                  dc.b    ' /   /  \\  \\\   //   /  \\  \( \_|:  \\        /  |    \    \ |',$0D,$0A
000047F7= 28 5F 5F 5F 2F 20 ...   2412                  dc.b    '(___/    \___)\__/(___/    \___)\_______)\"_____/    \___|\____\)',$0D,$0A,$0D,$0A
0000483C= 2A 2A 2A 2A 2A 2A ...   2413                  dc.b    '*****************************************************************',$0D,$0A,0
00004880= 2E 00                   2414  loop_msg:       dc.b    '.',0
00004882= 20 20 20 20 20 20 ...   2415  blank_msg:      dc.b    '                                                                                   ',0
000048D6= 54 68 65 20 64 61 ...   2416  tutorial_msg    dc.b    'The darkness here is dangerious, keep your torch close and dont let it go out.',$0D,$0A
00004926= 45 76 65 72 79 20 ...   2417                  dc.b    'Every movement you make decreases your torch life, so think before you move.',$0D,$0A
00004974= 59 6F 75 20 63 61 ...   2418                  dc.b    'You can buy more torches in the shop, thats probably a good place to start...',$0D,$0A,0
000049C4= 31 3E 20 52 65 73 ...   2419  replay_msg:     dc.b    '1> Restart the game.',$0D,$0A
000049DA= 32 3E 20 51 75 69 ...   2420                  dc.b    '2> Quit the game.',$0D,$0A,0
000049EE= 59 6F 75 20 61 77 ...   2421  wake_up_msg:    dc.b    'You awake in a room, on a bed of red velvet, with no memory',$0D,$0A
00004A2B= 6F 66 20 68 6F 77 ...   2422                  dc.b    'of how you got here. Stones crumble from the ceiling, the place looks like an',$0D,$0A
00004A7A= 6F 6C 64 20 63 61 ...   2423                  dc.b    'old castle. You get a dark feeling from this place, and you know you must',$0D,$0A
00004AC5= 65 73 63 61 70 65 ...   2424                  dc.b    'escape...',$0D,$0A
00004AD0= 59 6F 75 20 63 6C ...   2425                  dc.b    'You climb from the bed and look in a nearby mirror:',$0D,$0A,0
00004B06= 31 3E 20 59 6F 75 ...   2426  pick_role_msg:  dc.b    '1> You wear armour of polished iron, a short sword and heavy shield laying',$0D,$0A
00004B52= 63 6C 6F 73 65 20 ...   2427                  dc.b    'close by. (Knight class)',$0D,$0A,$0D,$0A
00004B6E= 32 3E 20 59 6F 75 ...   2428                  dc.b    '2> You wear a cloak with mystic symbols sewn into the fabrics, an ancient',$0D,$0A
00004BB9= 6C 6F 6F 6B 69 6E ...   2429                  dc.b    'looking staff lays near. (Mage class)',$0D,$0A,$0D,$0A
00004BE2= 33 3E 20 59 6F 75 ...   2430                  dc.b    '3> You wear tight, well-fitting leather armour with reminents of black dye',$0D,$0A
00004C2E= 73 74 61 69 6E 65 ...   2431                  dc.b    'stained to the material. Two knives are fastened to your belt. (Rogue class)',$0D,$0A,0
00004C7D= 45 6E 74 65 72 20 ...   2432  input_nums_msg: dc.b    'Enter num between 1 and ',0
00004C96= 3A 20 00                2433  colon_msg:      dc.b    ': ',0
00004C99                          2434  
00004C99= 49 6E 70 75 74 74 ...   2435  input_error_msg:    dc.b    'Inputted number is outside of range.',$0D,$0A,0
00004CC0= 47 61 6D 65 73 74 ...   2436  fake_gamestate_msg: dc.b    'Gamestate doesnt exist',$0D,$0A,0
00004CD9= 59 6F 75 20 67 72 ...   2437  knight_role_msg:    dc.b    'You grab your sword and shield, pull a torch from the wall, and leave the room.',$0D,$0A,0
00004D2B= 59 6F 75 20 68 61 ...   2438  knight_spec_msg:    dc.b    'You have chosen the KNIGHT class. You specialise in blocking and countering',$0D,$0A,0
00004D79= 59 6F 75 20 70 69 ...   2439  mage_role_msg:  dc.b    'You pick up your staff, grab a torch from the wall, and leave the room.',$0D,$0A,0
00004DC3= 59 6F 75 20 68 61 ...   2440  mage_spec_msg:  dc.b    'You have chosen the MAGE class. You specialise in magic attacks.',$0D,$0A,0
00004E06= 59 6F 75 20 66 61 ...   2441  rogue_role_msg: dc.b    'You fasten your belt, grab a torch from the wall, and leave the room.',$0D,$0A,0
00004E4E= 59 6F 75 20 68 61 ...   2442  rogue_spec_msg: dc.b    'You have chosen the ROGUE class. You specialise in quick melee attacks.',$0D,$0A,0
00004E98= 31 3E 20 4D 6F 76 ...   2443  movement_msg:   dc.b    '1> Move north.',$0D,$0A
00004EA8= 32 3E 20 4D 6F 76 ...   2444                  dc.b    '2> Move south.',$0D,$0A
00004EB8= 33 3E 20 4D 6F 76 ...   2445                  dc.b    '3> Move west.',$0D,$0A
00004EC7= 34 3E 20 4D 6F 76 ...   2446                  dc.b    '4> Move east.',$0D,$0A
00004ED6= 35 3E 20 44 72 69 ...   2447                  dc.b    '5> Drink health potion.',$0D,$0A,0
00004EF0= 4D 6F 76 65 64 20 ...   2448  move_north_msg: dc.b    'Moved north.',$0D,$0A,0
00004EFF= 4D 6F 76 65 64 20 ...   2449  move_east_msg:  dc.b    'Moved east.',$0D,$0A,0
00004F0D= 4D 6F 76 65 64 20 ...   2450  move_south_msg: dc.b    'Moved south.',$0D,$0A,0
00004F1C= 4D 6F 76 65 64 20 ...   2451  move_west_msg:  dc.b    'Moved west.',$0D,$0A,0
00004F2A= 41 20 77 61 6C 6C ...   2452  movement_blocked_msg:  dc.b    'A wall blocks your path.',$0D,$0A,0
00004F45= 45 6E 74 65 72 20 ...   2453  continue_msg:   dc.b    'Enter any key to continue... ',0
00004F63= 20 20 20 00             2454  blank_tile      dc.b    '   ',0
00004F67= 7C 20 7C 00             2455  both_tile       dc.b    '| |',0
00004F6B= 7C 20 20 00             2456  left_tile       dc.b    '|  ',0
00004F6F= 20 20 7C 00             2457  right_tile      dc.b    '  |',0
00004F73= 5C 2F 5C 00             2458  blocked_tile:   dc.b    '\/\',0
00004F77= 2A 00                   2459  player_mark:    dc.b    '*',0
00004F79= 58 00                   2460  enemy_mark:     dc.b    'X',0
00004F7B= 40 00                   2461  win_point_mark: dc.b    '@',0
00004F7D= 24 00                   2462  shop_mark:      dc.b    '$',0
00004F7F= 25 00                   2463  loot_mark:      dc.b    '%',0
00004F81= 23 00                   2464  door_mark:      dc.b    '#',0
00004F83= 41 20 6D 6F 6E 73 ...   2465  encounter_msg:  dc.b    'A monster blocks your path, it looks ready to attack!',$0D,$0A,0
00004FBB= 31 3E 20 42 6C 6F ...   2466  combat_msg:     dc.b    '1> Block and Counter.',$0D,$0A
00004FD2= 32 3E 20 43 61 73 ...   2467                  dc.b    '2> Cast Magic.',$0D,$0A
00004FE2= 33 3E 20 41 74 74 ...   2468                  dc.b    '3> Attack Swiftly.',$0D,$0A
00004FF6= 34 3E 20 54 72 79 ...   2469                  dc.b    '4> Try Run.',$0D,$0A
00005003= 35 3E 20 44 72 69 ...   2470                  dc.b    '5> Drink Health Potion.',$0D,$0A,0
0000501D= 59 6F 75 20 65 73 ...   2471  escape_msg:             dc.b    'You escaped the monster!',$0D,$0A,0
00005038= 59 6F 75 20 74 72 ...   2472  fail_escape_msg:        dc.b    'You try to run, but the monster catches and damages you!',$0D,$0A,0
00005073= 59 6F 75 20 62 6F ...   2473  both_block_msg:         dc.b    'You both block, No damage is done!',$0D,$0A,0
00005098= 59 6F 75 20 62 6F ...   2474  both_cast_magic_msg:    dc.b    'You both cast magic at eachother, the spells clash in mid air! No damage',$0D,$0A
000050E2= 69 73 20 64 6F 6E ...   2475                          dc.b    'is done!',$0D,$0A,0
000050ED= 59 6F 75 20 62 6F ...   2476  both_melee_msg:         dc.b    'You both lunge forward, metal clashes together, but no damage is done!',$0D,$0A,0
00005136= 54 68 65 20 65 6E ...   2477  hit_against_block_msg:  dc.b    'The enemy blocks, you cast a cast a spell and it damages the monster!',$0D,$0A,0
0000517E= 54 68 65 20 65 6E ...   2478  hit_against_magic_msg:  dc.b    'The enemy begins to charge a spell but you lunge forward and hit it first,',$0D,$0A
000051CA= 64 61 6D 61 67 69 ...   2479                          dc.b    'damaging the monster!',$0D,$0A,0
000051E2= 54 68 65 20 65 6E ...   2480  hit_against_melee_msg:  dc.b    'The enemy lunges forward but you block quicky, then counter, damaging the',$0D,$0A
0000522D= 6D 6F 6E 73 74 65 ...   2481                          dc.b    'monster!',$0D,$0A,0
00005238= 59 6F 75 20 6C 75 ...   2482  hit_by_counter_msg:     dc.b    'You lunge at the enemy but they block before you hit, they swing around quickly',$0D,$0A
00005289= 61 6E 64 20 64 61 ...   2483                          dc.b    'and damage you!',$0D,$0A,0
0000529B= 59 6F 75 20 74 72 ...   2484  hit_by_magic_msg:       dc.b    'You try to block the enemies attack, but they cast a spell that breaks through',$0D,$0A
000052EB= 79 6F 75 72 20 64 ...   2485                          dc.b    'your defense and damages you!',$0D,$0A,0
0000530B= 59 6F 75 20 74 72 ...   2486  hit_by_melee_msg:       dc.b    'You try to charge up a spell, but the enemy lunges forward and damages you!',$0D,$0A,0
00005359= 48 65 61 6C 74 68 ...   2487  health_msg:             dc.b    'Health: ',0
00005362= 45 6E 65 6D 79 20 ...   2488  enemy_health_msg:       dc.b    'Enemy Health: ',0
00005371= 54 6F 72 63 68 20 ...   2489  torch_msg:              dc.b    'Torch Life: ',0
0000537E= 44 61 6D 61 67 65 ...   2490  damage_lvl_msg          dc.b    'Damage lvl: ',0
0000538B= 49 6E 76 65 6E 74 ...   2491  inventory_msg:          dc.b    'Inventory:',0
00005396= 2D 20 47 6F 6C 64 ...   2492  gold_msg:               dc.b    '- Gold ',0
0000539E= 2D 20 4B 65 79 20 00    2493  key_msg:                dc.b    '- Key ',0
000053A5= 2D 20 50 6F 74 69 ...   2494  potions_msg:            dc.b    '- Potion ',0
000053AF= 2D 20 54 6F 72 63 ...   2495  torches_msg:            dc.b    '- Torch ',0
000053B8= 2D 20 44 61 6D 61 ...   2496  damage_up_msg:          dc.b    '- Damage Upgrades ',0
000053CB= 54 68 65 20 6D 6F ...   2497  battle_won_msg:         dc.b    'The monster collapses at your feet. It is dead!',$0D,$0A,0
000053FD= 28 00                   2498  bracket_open_msg:       dc.b    '(',0
000053FF= 29 00                   2499  bracket_close_msg:      dc.b    ')',0
00005401= 59 6F 75 20 66 65 ...   2500  death_msg:          dc.b    'You feel your last breath of air leave your lungs...',$0D,$0A
00005437= 59 6F 75 72 20 6B ...   2501                      dc.b    'Your knees hit the ground...',$0D,$0A
00005455= 59 6F 75 20 68 61 ...   2502                      dc.b    'You have died.',$0D,$0A,0
00005466= 59 6F 75 20 66 65 ...   2503  win_msg:            dc.b    'You feel the outside breeze hit your face...',$0D,$0A
00005494= 59 6F 75 20 68 61 ...   2504                      dc.b    'You have escaped the castle!',$0D,$0A,0
000054B3= 59 6F 75 20 64 72 ...   2505  take_potion_msg:    dc.b    'You drink a health potion...',$0D,$0A
000054D1= 33 20 68 65 61 6C ...   2506                      dc.b    '3 health points restored!',$0D,$0A,0
000054ED= 59 6F 75 20 61 72 ...   2507  no_potions_msg:     dc.b    'You are out of potions.',$0D,$0A,0
00005507= 22 4C 6F 6F 6B 69 ...   2508  shop_enter_msg:     dc.b    '"Looking to lighten that coin pouch of yours?!"',$0D,$0A,0
00005539= 31 3E 20 42 75 79 ...   2509  shop_msg:       dc.b    '1> Buy Potion. (5g)',$0D,$0A
0000554E= 32 3E 20 42 75 79 ...   2510                  dc.b    '2> Buy Key. (15g)',$0D,$0A
00005561= 33 3E 20 42 75 79 ...   2511                  dc.b    '3> Buy Torch. (10g)',$0D,$0A
00005576= 34 3E 20 42 75 79 ...   2512                  dc.b    '4> Buy Damage Upgrade. (20g)',$0D,$0A
00005594= 35 3E 20 4C 65 61 ...   2513                  dc.b    '5> Leave Shop.',$0D,$0A,0
000055A5= 22 50 6C 65 61 73 ...   2514  leave_shop_msg: dc.b    '"Pleasure doing business with you."',$0D,$0A,0
000055CB= 22 2E 2E 2E 41 6E ...   2515  buy_item_msg:   dc.b    '"...And its yours!"',$0D,$0A,0
000055E1= 53 68 6F 70 20 53 ...   2516  shop_stock_msg: dc.b    'Shop Stock:',0
000055ED= 59 6F 75 72 20 49 ...   2517  player_msg:     dc.b    'Your Items:',0
000055F9= 22 4E 6F 74 20 65 ...   2518  no_money_msg:   dc.b    '"Not enough gold, traveller."',$0D,$0A,0
00005619= 22 53 6F 72 72 79 ...   2519  no_item_msg:    dc.b    '"Sorry, I dont have any of them left..."',$0D,$0A,0
00005644= 54 68 65 20 64 61 ...   2520  no_torch_msg:   dc.b    'The darkness burns...',$0D,$0A,0
0000565C= 59 6F 75 20 70 69 ...   2521  pickup_loot_msg:    dc.b    'You picked up a loot pile',$0D,$0A,0
00005678= 2B 20 47 6F 6C 64 ...   2522  pickup_gold_msg:    dc.b    '+ Gold ',0
00005680= 2B 20 50 6F 74 69 ...   2523  pickup_potion_msg:  dc.b    '+ Potion ',0
0000568A= 2B 20 4B 65 79 20 00    2524  pickup_key_msg:     dc.b    '+ Key ',0
00005691= 2B 20 54 6F 72 63 ...   2525  pickup_torch_msg:   dc.b    '+ Torch life ',0
0000569F= 43 6C 61 73 73 20 ...   2526  double_damage_msg:  dc.b    'Class Bonus - Double Damage!',$0D,$0A,0
000056BE= 54 68 65 20 64 6F ...   2527  locked_door_msg:    dc.b    'The door seems locked, you have a key that might fit it.',$0D,$0A
000056F8= 44 6F 20 79 6F 75 ...   2528                      dc.b    'Do you want to try unlock it?',$0D,$0A,$0D,$0A
00005719= 31 3E 20 59 65 73 ...   2529                      dc.b    '1> Yes. (-1 key)',$0D,$0A
0000572B= 32 3E 20 4E 6F 2E ...   2530                      dc.b    '2> No.',$0D,$0A,0
00005734= 54 68 65 20 64 6F ...   2531  unlocked_door_msg:  dc.b    'The door swings open, the key lodged stuck in the keyhole.',$0D,$0A,0
00005771= 54 68 65 20 64 6F ...   2532  blocked_door_msg:   dc.b    'The door seems solid, it wont budge.',$0D,$0A,0
00005798= 20 20 20 20 20 20 ...   2533  graveyard_msg:  dc.b    '      ,-=-.       ______     _',$0D,$0A
000057B8= 20 20 20 20 20 2F ...   2534                  dc.b    '     /  +  \     />----->  _|1|_',$0D,$0A
000057DA= 20 20 20 20 20 7C ...   2535                  dc.b    '     | ~~~ |    // -/- /  |_ H _|',$0D,$0A
000057FD= 20 20 20 20 20 7C ...   2536                  dc.b    '     |R.I.P|   //  /  /     |S|',$0D,$0A
0000581E= 5C 76 56 2C 2C 7C ...   2537                  dc.b    '\vV,,|_____|V,//_____/VvV,v,|_|/,,vhjwv/,',$0D,$0A,0
0000584A= 20 20 20 20 20 20 ...   2538  skeleton_msg:   dc.b    '           .-.',$0D,$0A
0000585A= 20 2F 5C 5F 5F 5F ...   2539                  dc.b    ' /\____/\ (o.o)',$0D,$0A
0000586B= 7C 20 20 5F 7C 7C ...   2540                  dc.b    '|  _||_  | |=|',$0D,$0A
0000587B= 20 5C 2F 20 7C 7C ...   2541                  dc.b    ' \/ || \/ __|__',$0D,$0A
0000588C= 20 20 20 20 7C 7C ...   2542                  dc.b    '    ||\_//.=|=.\\',$0D,$0A
0000589F= 20 20 20 20 7C 7C ...   2543                  dc.b    '    ||\_/ .=|=. \\',$0D,$0A
000058B3= 20 20 20 20 7C 7C ...   2544                  dc.b    '    ||    .=|=. //',$0D,$0A
000058C7= 20 20 20 20 7C 7C ...   2545                  dc.b    '    ||    (_=_)//',$0D,$0A
000058DA= 20 20 20 20 7C 7C ...   2546                  dc.b    '    ||   (:| |:)',$0D,$0A
000058EC= 20 20 20 20 7C 7C ...   2547                  dc.b    '    ||    || ||',$0D,$0A
000058FD= 20 20 20 20 7C 7C ...   2548                  dc.b    '    ||    () ()',$0D,$0A
0000590E= 20 20 20 20 2F 5C ...   2549                  dc.b    '    /\    || ||',$0D,$0A
0000591F= 20 20 20 20 7C 7C ...   2550                  dc.b    '    ||    || ||',$0D,$0A
00005930= 20 20 20 20 5C 2F ...   2551                  dc.b    '    \/  ==   ==',$0D,$0A,0
00005942= 20 20 20 20 20 20 ...   2552  merchant_msg:   dc.b    '         ____',$0D,$0A
00005951= 20 20 20 20 20 20 ...   2553                  dc.b    '        |    |',$0D,$0A
00005961= 20 20 20 20 20 20 ...   2554                  dc.b    '      --:<<>>:--',$0D,$0A
00005973= 20 20 20 20 20 20 ...   2555                  dc.b    '        :~_~ :',$0D,$0A
00005983= 20 20 20 20 20 20 ...   2556                  dc.b    '        _:"":\___',$0D,$0A
00005996= 20 20 5F 5F 5F 5F ...   2557                  dc.b    '  ____./ :::     \._',$0D,$0A
000059AC= 3C 3C 3D 29 20 20 ...   2558                  dc.b    '<<=)           \    :',$0D,$0A
000059C3= 20 5C 2F 2D 2D 2D ...   2559                  dc.b    ' \/---/\_      /\._. ',$0D,$0A
000059DA= 20 7C 7C 20 20 20 ...   2560                  dc.b    ' ||       \====:_ ""',$0D,$0A
000059F0= 20 7C 7C 20 20 20 ...   2561                  dc.b    ' ||      ./     \\',$0D,$0A
00005A04= 20 7C 7C 20 20 20 ...   2562                  dc.b    ' ||     :       :',$0D,$0A
00005A17= 20 7C 7C 20 20 20 ...   2563                  dc.b    ' ||    /   :    \',$0D,$0A
00005A2A= 20 7C 7C 20 20 20 ...   2564                  dc.b    ' ||   :   .      \.',$0D,$0A
00005A3F= 20 7C 7C 20 20 20 ...   2565                  dc.b    ' ||   :  : :      :',$0D,$0A
00005A54= 20 7C 7C 20 20 20 ...   2566                  dc.b    ' ||   :__:-:__.;--',$0D,$0A,0
00005A69= 20 20 20 20 20 20 ...   2567  castle_msg:     dc.b    '                T~~',$0D,$0A
00005A7E= 20 20 20 20 20 20 ...   2568                  dc.b    '                |',$0D,$0A
00005A91= 20 20 20 20 20 20 ...   2569                  dc.b    '               /"\',$0D,$0A
00005AA5= 20 20 20 20 20 20 ...   2570                  dc.b    '       T~~     |.| T~~',$0D,$0A
00005ABD= 20 20 20 54 7E 7E ...   2571                  dc.b    '   T~~ |    T~ WWWW|',$0D,$0A
00005AD3= 20 20 20 7C 20 20 ...   2572                  dc.b    '   |  /"\   |  |  |/\T~~',$0D,$0A
00005AED= 20 20 2F 22 5C 20 ...   2573                  dc.b    '  /"\ WWW  /"\ |. |WW|',$0D,$0A
00005B05= 20 57 57 57 57 57 ...   2574                  dc.b    ' WWWWW/\| /   \|./\|/"\',$0D,$0A
00005B1E= 20 7C 20 20 20 2F ...   2575                  dc.b    ' |   /__\/]WWW[\/__\WWWW',$0D,$0A
00005B38= 20 7C 22 20 20 57 ...   2576                  dc.b    ' |"  WWWW.|I_I|.WWWW.   |',$0D,$0A
00005B53= 20 7C 20 20 20 7C ...   2577                  dc.b    ' |   |. |/  -  \|. |.  |',$0D,$0A
00005B6D= 20 7C 2E 20 20 7C ...   2578                  dc.b    ' |.  |  |LI=H=LI|. |   |',$0D,$0A
00005B87= 20 7C 20 20 20 7C ...   2579                  dc.b    ' |   |. | |[_]| |  |.  |',$0D,$0A
00005BA1= 20 7C 20 20 20 7C ...   2580                  dc.b    ' |   |  |_|###|_|  |   |',$0D,$0A
00005BBB= 20 20 2D 2D 2D 20 ...   2581                  dc.b    '  --- -- -/___\- -- --- ',$0D,$0A,0
00005BD6                          2582                  
00005BD6                          2583  
00005BD6                          2584  
00005BD6                          2585  
00005BD6                          2586  
00005BD6                          2587  
00005BD6                          2588  
00005BD6                          2589  
00005BD6                          2590  
00005BD6                          2591  
00005BD6                          2592  
00005BD6                          2593  
00005BD6                          2594  
00005BD6                          2595  
00005BD6                          2596  
00005BD6                          2597  
00005BD6                          2598  
00005BD6                          2599      end start

No errors detected
No warnings generated


SYMBOL TABLE INFORMATION
Symbol-name         Value
-------------------------
ALIVE               3
BATTLE_WON_MSG      53CB
BLANK_MSG           4882
BLANK_TILE          4F63
BLOCKED_DOOR        3A84
BLOCKED_DOOR_MSG    5771
BLOCKED_TILE        4F73
BLOCK_COUNTER       3ADE
BLUE                FF0000
BOTH_BLOCK          3B76
BOTH_BLOCK_MSG      5073
BOTH_CAST_MAGIC     3B88
BOTH_CAST_MAGIC_MSG  5098
BOTH_MELEE          3B9A
BOTH_MELEE_MSG      50ED
BOTH_TILE           4F67
BRACKET_CLOSE_MSG   53FF
BRACKET_OPEN_MSG    53FD
BROWN               507090
BUY_ITEM_MSG        55CB
BUY_KEY             3D26
BUY_POTION          3CF4
BUY_TORCH           3D5A
CASTLE_MSG          5A69
CAST_MAGIC          3AF8
CHANGE_FONT_COLOUR  3EB8
CHECK_BLOCKED       3A16
CHECK_FOR_A_DOOR    3A36
CHECK_FOR_DOOR      41A0
CHECK_FOR_DOORS     4180
CHECK_FOR_ENEMIES   409E
CHECK_FOR_ENEMY     40C0
CHECK_FOR_LOOT      3FFC
CHECK_FOR_LOOT_PILES  3FD8
CHECK_FOR_PLAYER    4056
CHECK_FOR_SHOP      4136
CHECK_FOR_SHOPS     4114
CHECK_FOR_WIN_POINT  41DE
CLASS               2
CLEAR_SCREEN        3858
COLON_MSG           4C96
COMBAT              3A9C
COMBAT_MSG          4FBB
CONTINUE_MSG        4F45
CRLF                4622
CSR_POS_BATTLE      2001
CSR_POS_MOVE        3201
CSR_POS_SHOP_P      3401
CSR_POS_SHOP_S      1801
DAMAGE              1
DAMAGE_ENEMY        3C3C
DAMAGE_LVL_MSG      537E
DAMAGE_PLAYER       3C76
DAMAGE_UP_MSG       53B8
DAMAGE_UP_PRICE     14
DEATH_MSG           5401
DECORATE            383A
DECREMENT_TORCH     3EAA
DOOR_MARK           4F81
DOOR_MAX            1
DOUBLE_DAMAGE_ENEMY  3C4C
DOUBLE_DAMAGE_MSG   569F
DOUBLE_DAMAGE_PLAYER  3C8C
DRAW                34A2
DRAW_BATTLE_INFO    3616
DRAW_BLANK_TILE     3FCA
DRAW_BLOCKED_TILE   3F92
DRAW_BOTH_TILE      3FA0
DRAW_CASTLE         34DE
DRAW_DOOR           41AA
DRAW_ENEMY          40D4
DRAW_GRAVEYARD      34D0
DRAW_HUD            34FA
DRAW_ITEM_NUMBER    35F4
DRAW_LEFT_TILE      3FAE
DRAW_LOOP           3ED8
DRAW_LOOT           4014
DRAW_MERCHANT       34EC
DRAW_PLAYER         405E
DRAW_PLAYER_INFO    351A
DRAW_RIGHT_TILE     3FBC
DRAW_SHOP           4140
DRAW_SHOP_INFO      3690
DRAW_SKELETON       34C2
DRAW_TILE           3F2E
DRAW_WIN_POINT      41EA
ENCOUNTER_MSG       4F83
END                 3006
ENDL                3888
ENEMIES_CHECK       3362
ENEMIES_LOOP        3370
ENEMY_ALIVE_CHECK   346A
ENEMY_CHECK         338E
ENEMY_DIED          3474
ENEMY_HEALTH_MSG    5362
ENEMY_MARK          4F79
ENEMY_MAX           2
ENTER_COMBAT        33C2
ENTER_SHOP          3442
ESCAPE_ATTACK       3B3C
ESCAPE_MSG          501D
EXIT                0
FAIL_ESCAPE         3B5A
FAIL_ESCAPE_MSG     5038
FAKE_GAMESTATE_MSG  4CC0
FIRST_DOOR          6FE0
FIRST_ENEMY         6000
FIRST_LOOT          7000
FIRST_SHOP          6500
FONT                1090000
GAME                3000
GAMELOOP            3194
GAMEPLAY            380C
GAME_STATE          5FF3
GET_CURSOR_POS      3ECA
GOLD                FFFF
GOLD_MSG            5396
GRAVEYARD_MSG       5798
GREEN               FF00
HEALTH_MSG          5359
HIT_AGAINST_BLOCK   3BAC
HIT_AGAINST_BLOCK_MSG  5136
HIT_AGAINST_MAGIC   3BC2
HIT_AGAINST_MAGIC_MSG  517E
HIT_AGAINST_MELEE   3BD8
HIT_AGAINST_MELEE_MSG  51E2
HIT_BY_COUNTER      3BEE
HIT_BY_COUNTER_MSG  5238
HIT_BY_MAGIC        3C08
HIT_BY_MAGIC_MSG    529B
HIT_BY_MELEE        3C22
HIT_BY_MELEE_MSG    530B
INPUT               311E
INPUT_ERROR_MSG     4C99
INPUT_NUMS_MSG      4C7D
INVALID_INPUT       3186
INVENTORY_MSG       538B
IN_A_DOOR           3A40
KEY_MSG             539E
KEY_PRICE           F
KNIGHT_ROLE_MSG     4CD9
KNIGHT_SELECT       3062
KNIGHT_SPEC_MSG     4D2B
LEAVE_SHOP          3DC4
LEAVE_SHOP_MSG      55A5
LEFT_TILE           4F6B
LIFE_PER_TORCH      F
LOCKED_DOOR_MSG     56BE
LOOP_COLUMNS        3F04
LOOP_DOORS          418E
LOOP_ENEMIES        40AC
LOOP_LOOT_PILES     3FE6
LOOP_MSG            4880
LOOP_ROWS           3EEE
LOOP_SHOPS          4122
LOOP_THRU_DOORS     3A24
LOOT_MARK           4F7F
LOOT_PILES_CHECK    3248
LOOT_PILE_CHECK     326A
LOOT_PILE_LOOP      3256
L_ACTIVE            6
MAGE_ROLE_MSG       4D79
MAGE_SELECT         3092
MAGE_SPEC_MSG       4DC3
MANAGE_INPUT        316C
MANAGE_TORCH        332E
MAP_LENGTH          F
MAP_START_POINT     8080
MELEE_ATTACK        3B12
MERCHANT_MSG        5942
MOVEMENT            389E
MOVEMENT_BLOCKED    3A04
MOVEMENT_BLOCKED_MSG  4F2A
MOVEMENT_CHECKS     322C
MOVEMENT_MSG        4E98
MOVE_EAST           39BC
MOVE_EAST_MSG       4EFF
MOVE_NORTH          38E0
MOVE_NORTH_MSG      4EF0
MOVE_SOUTH          392A
MOVE_SOUTH_MSG      4F0D
MOVE_WEST           3974
MOVE_WEST_MSG       4F1C
NO_ITEM_MSG         5619
NO_MONEY            3DE2
NO_MONEY_MSG        55F9
NO_POTIONS          3E9A
NO_POTIONS_MSG      54ED
NO_SHOP_DAMAGE_UP   3E30
NO_SHOP_KEYS        3E08
NO_SHOP_POTIONS     3DF4
NO_SHOP_TORCHES     3E1C
NO_TORCH_MSG        5644
OPEN_DOOR_POS       1000
OUT                 3842
PICKUP_GOLD_MSG     5678
PICKUP_KEY_MSG      568A
PICKUP_LOOT         3280
PICKUP_LOOT_MSG     565C
PICKUP_POTION_MSG   5680
PICKUP_TORCH_MSG    5691
PICK_ROLE           301C
PICK_ROLE_MSG       4B06
PLAYER              5FF0
PLAYER_DEAD         31D4
PLAYER_MARK         4F77
PLAYER_MSG          55ED
PLA_CLASS           5FF2
PLA_DAMAGE          5FF1
PLA_GOLD            5FF8
PLA_KEYS            5FFA
PLA_POTIONS         5FF9
PLA_P_POS           5FF6
PLA_TORCH           5FFB
POSITION            4
POTIONS_MSG         53A5
POTION_PRICE        5
PRESS_CONTINUE      3E44
PURPLE              F000F0
RANDOM_NUMBER       3E5C
RED                 FF
REPLAY              3864
REPLAY_MSG          49C4
RETURN              3E76
RIGHT_TILE          4F6F
ROGUE_ROLE_MSG      4E06
ROGUE_SELECT        30C2
ROGUE_SPEC_MSG      4E4E
ROLE_INPUT          3044
SETUP_ENEMIES       4522
SETUP_LOOT          4560
SETUP_PLAYER        45A8
SETUP_SHOPS         45E4
SETUP_WORLD         422A
SHOP                3CB8
SHOPS_CHECK         33EC
SHOPS_LOOP          33FA
SHOP_CHECK          3418
SHOP_ENTER_MSG      5507
SHOP_MARK           4F7D
SHOP_MAX            2
SHOP_MSG            5539
SHOP_STOCK_MSG      55E1
SKELETON_MSG        584A
START               1000
S_DAMAGE_IN         5
S_KEYS              3
S_POTIONS           2
S_TORCHES           4
TAKE_POTION         3E78
TAKE_POTION_MSG     54B3
TORCHES_MSG         53AF
TORCH_MSG           5371
TORCH_PRICE         A
TRY_RUN             3B2C
TUTORIAL_INTRO      30F2
TUTORIAL_MSG        48D6
UNLOCKED_DOOR_MSG   5734
UNLOCK_DOOR         3A6A
UPDATE              31AA
UPGRADE_DMG         3D90
WAKE_UP_MSG         49EE
WALL_COLLISIONS     38BE
WELCOME             300A
WELCOME_MSG         4625
WHITE               FFFFFF
WIN_MSG             5466
WIN_POINT           8156
WIN_POINT_MARK      4F7B
WON_GAME            31FE

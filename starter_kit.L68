00001000 Starting Address
Assembler used: EASy68K Editor/Assembler v5.16.01
Created On: 22/03/2019 13:05:36

00000000                             1  *-------------------------------------------------------
00000000                             2  * Author         : Michael Rainsford Ryan
00000000                             3  * Student Number : C00239510
00000000                             4  * Date Created   : 21/01/2019
00000000                             5  * Description    : A simplified, offline clone of the
00000000                             6  *                : online game "Avalon".
00000000                             7  * Issues/Bugs    : None currenty.
00000000                             8  *-------------------------------------------------------
00000000                             9  
00001000                            10      org $1000
00001000                            11  
00001000                            12  *-------------------------------------------------------
00001000                            13  *Choose to be a Worker or a God 
00001000                            14  *https://www.avalon-rpg.com/
00001000                            15  *-------------------------------------------------------
00001000                            16  
00001000                            17  *-------------------------------------------------------
00001000                            18  *-------------------Game Information-------------------
00001000                            19  *-------------------------------------------------------
00001000                            20  *A6 is used for player coordinates
00001000                            21  *A5 is used for enemy coordinates when in combat or looping through them
00001000                            22  *A5 is used for shops when in shop screen or when looping through them
00001000                            23  *A4 occasionally used for displaying the inventory
00001000                            24  *D5 is used occasionally for input range
00001000                            25  *$5FF0 holds player information
00001000                            26  *$6000 to $64F0 holds enemies
00001000                            27  *$6500 to $6FF0 holds shops
00001000                            28  *$7000 to $7500 holds loot
00001000                            29  *$8000 to $9000 holds maps
00001000                            30  
00001000                            31  *Enemies:
00001000                            32  *Byte:  Name:
00001000                            33  *0      Health
00001000                            34  *1      Damage/level
00001000                            35  *2      enemy type (Knight, mage, rogue)
00001000                            36  *3      Alive state (1 == alive, 0 == dead)
00001000                            37  *4 & 5  Coordinates
00001000                            38  
00001000                            39  *Player:
00001000                            40  *Byte:  Name:
00001000                            41  *0      Health
00001000                            42  *1      Damage/level
00001000                            43  *2      Class (Knight, mage, rogue)
00001000                            44  *3      Game state
00001000                            45  *4-5+A6 Coordinates
00001000                            46  *6-7    Last coordinates
00001000                            47  *8      Gold
00001000                            48  *9      Potions
00001000                            49  *A      Keys
00001000                            50  *B      Torch life
00001000                            51  
00001000                            52  *Shops:
00001000                            53  *Byte:  Name:
00001000                            54  *0-1    Position
00001000                            55  *2      Potions
00001000                            56  *3      Keys
00001000                            57  *4      Torches
00001000                            58  *5      Damage increase
00001000                            59  
00001000                            60  *Loot:
00001000                            61  *Byte:  Name:
00001000                            62  *0-1    Position
00001000                            63  *2      Potions
00001000                            64  *3      Keys
00001000                            65  *4      Torches
00001000                            66  *5      Active State
00001000                            67      
00001000                            68  *Game state : 0 = Pick role/intro | 5 = Move around | 6 = Combat | 7 = Shop | 64 = End game
00001000                            69  *Class      : 1 corresponds to knight - 2 corresponds to mage - 3 corresponds to rogue
00001000                            70  
00001000                            71  
00001000                            72  *-------------------------------------------------------
00001000                            73  *Validation values to be used, modify as needed
00001000                            74  *Add additional validation values as required
00001000                            75  *-------------------------------------------------------
00001000  =00000000                 76  exit        EQU 0      used to exit assembly program
00001000                            77  
00001000                            78  * Text display
00001000  =000000FF                 79  RED         EQU $000000FF   Red colour value
00001000  =0000FF00                 80  GREEN       EQU $0000FF00   Green colour value
00001000  =00FF0000                 81  BLUE        EQU $00FF0000   Blue colour value
00001000  =00FFFFFF                 82  WHITE       EQU $00FFFFFF   White colour value
00001000  =00F000F0                 83  PURPLE      EQU $00F000F0   Purple colour value
00001000  =0000FFFF                 84  GOLD        EQU $0000FFFF   Purple colour value
00001000  =01090000                 85  FONT        EQU $01090000   Font value
00001000                            86  
00001000                            87  * Player
00001000  =00005FF0                 88  PLAYER      EQU $5FF0       Memory address for player information and health
00001000  =00005FF1                 89  PLA_DAMAGE  EQU $5FF1       Memory address for player damage value
00001000  =00005FF2                 90  PLA_CLASS   EQU $5FF2       The memory address for the player class
00001000  =00005FF3                 91  GAME_STATE  EQU $5FF3       The memory address of the game state
00001000  =00005FF6                 92  PLA_P_POS   EQU $5FF6       Memory location of the player's previous position
00001000  =00005FF8                 93  PLA_GOLD    EQU $5FF8       Memory address for player gold
00001000  =00005FF9                 94  PLA_POTIONS EQU $5FF9       Memory address for player potions
00001000  =00005FFA                 95  PLA_KEYS    EQU $5FFA       Memory address for player keys
00001000  =00005FFB                 96  PLA_TORCH   EQU $5FFB       Memory address for player torch life
00001000                            97  
00001000                            98  * Enemy
00001000  =00006000                 99  FIRST_ENEMY EQU $6000       Memory location of the first enemy
00001000  =00000002                100  ENEMY_MAX   EQU 2           Number of enemies in the game
00001000                           101  
00001000  =00000001                102  DAMAGE      EQU 1           The number of bytes to move from the enemy before reaching the damage
00001000  =00000002                103  CLASS       EQU 2           The number of bytes to move from the enemy before reaching the class
00001000  =00000003                104  ALIVE       EQU 3           The number of bytes to move from the enemy before reaching the alive state
00001000  =00000004                105  POSITION    EQU 4           The number of bytes to move from the enemy before reaching the position
00001000                           106  
00001000                           107  * Shop & Loot
00001000  =00006500                108  FIRST_SHOP  EQU $6500       Memory location of the first shop
00001000  =00000002                109  SHOP_MAX    EQU 2           Number of shops in the game
00001000                           110  
00001000  =00000002                111  S_POTIONS   EQU 2           The number of bytes to move from the shop root before reaching the potions
00001000  =00000003                112  S_KEYS      EQU 3           The number of bytes to move from the shop root before reaching the keys
00001000  =00000004                113  S_TORCHES   EQU 4           The number of bytes to move from the shop root before reaching the torches
00001000  =00000005                114  S_DAMAGE_IN EQU 5           The number of bytes to move from the shop root before reaching the damage increase
00001000                           115  
00001000  =00007000                116  FIRST_LOOT  EQU $7000       Memory location of the first loot pile
00001000  =00000005                117  L_ACTIVE    EQU 5           The number of bytes to move from the loot pile root before reaching the active state
00001000                           118  
00001000                           119  * HUD
00001000  =00003201                120  CSR_POS_MOVE    EQU $3201   The cursor position to draw the HUD to when in movement state
00001000  =00002001                121  CSR_POS_BATTLE  EQU $2001   The cursor position to draw the HUD to when in battle state
00001000  =00001801                122  CSR_POS_SHOP_S  EQU $1801   The cursor position to draw the HUD to when in shop state for shop info
00001000  =00003401                123  CSR_POS_SHOP_P  EQU $3401   The cursor position to draw the HUD to when in shop state for player info
00001000                           124  
00001000                           125  * Game
00001000  =00008156                126  WIN_POINT   EQU $8156       The position the player has to get to to win
00001000                           127  
00001000  =00000005                128  POTION_PRICE    EQU 5       The price in gold for a potion
00001000  =0000000F                129  KEY_PRICE       EQU 15      The price in gold for a key
00001000  =0000000A                130  TORCH_PRICE     EQU 10      The price in gold for a torch
00001000  =00000014                131  DAMAGE_UP_PRICE EQU 20      The price in gold for a damage upgrade
00001000                           132  
00001000  =0000000F                133  LIFE_PER_TORCH  EQU 15      The life value each torch has
00001000                           134  
00001000  =00008080                135  MAP_START_POINT EQU $8080   The starting coordinates the map draws at
00001000  =0000000F                136  MAP_LENGTH      EQU 15      The number of tiles downwords the map will draw
00001000                           137  
00001000                           138  
00001000                           139  *Start of Game
00001000                           140  start:
00001000  6100 33B2                141      bsr     setup_player
00001004  6100 3042                142      bsr     setup_world
00001008  6100 3330                143      bsr     setup_enemies
0000100C  6100 33E2                144      bsr     setup_shops
00001010  6100 3366                145      bsr     setup_loot
00001014                           146  
00001014  6100 1FF4                147      bsr     welcome    branch to the welcome subroutine
00001018  6100 2CB8                148      bsr     press_continue
0000101C  6100 1FE2                149      bsr     game       branch to the game subroutine
00001020                           150  *Game loop
00003000                           151      org     $3000      the rest of the program is to be located from 3000 onwards
00003000                           152  
00003000                           153  *-------------------------------------------------------
00003000                           154  *-------------------Game Subroutine---------------------
00003000                           155  *-------------------------------------------------------
00003000                           156  game:
00003000  6100 016E                157      bsr     gameloop   branch to gameloop subroutine
00003004  4E75                     158      rts                return from game: subroutine
00003006                           159            
00003006                           160  end:
00003006  FFFF FFFF                161      simhalt
0000300A                           162  
0000300A                           163  *-------------------------------------------------------
0000300A                           164  *-------------------Welcome Subroutine------------------
0000300A                           165  *-------------------------------------------------------
0000300A                           166  welcome:
0000300A  43F9 00004431            167      lea     welcome_msg,A1  assign message to address register A1
00003010  103C 000E                168      move.b  #14,D0          move literal 14 to DO
00003014  4E4F                     169      trap    #15             trap and interpret value in D0
00003016  6100 07DE                170      bsr     endl            branch to endl subroutine
0000301A                           171      
0000301A  4E75                     172      rts                     return from welcome: subroutine
0000301C                           173  
0000301C                           174  *-------------------------------------------------------
0000301C                           175  *-------------------Role Picking Subroutine------------------
0000301C                           176  *-------------------------------------------------------
0000301C                           177  pick_role:
0000301C                           178  
0000301C  43F9 000047A6            179      lea     wake_up_msg,A1  assign message to address register A1
00003022  103C 000E                180      move.b  #14,D0          move literal 14 to DO
00003026  4E4F                     181      trap    #15             trap and interpret value in D0
00003028  6100 07CC                182      bsr     endl            branch to endl subroutine
0000302C                           183      
0000302C  43F9 000048BE            184      lea     pick_role_msg,A1 assign message to address register A1
00003032  103C 000E                185      move.b  #14,D0           move literal 14 to DO
00003036  4E4F                     186      trap    #15              trap and interpret value in D0
00003038                           187      
00003038  7A03                     188      move.l  #3,D5           Move the number 3 to D5 to tell the program how many options there are
0000303A                           189      
0000303A  6100 00E2                190      bsr     input           branch to the input subroutine
0000303E                           191      
0000303E  6100 0C92                192      bsr     press_continue          Pause the game until a key is pressed
00003042                           193      
00003042  4E75                     194      rts                     return from pick_role subroutine
00003044                           195      
00003044                           196  role_input:
00003044  11C1 5FF2                197      move.b  D1,PLA_CLASS    Move the role number to player class memory location to hold the class number
00003048                           198      
00003048                           199      *Give the player a message depending on the role chosen
00003048  B23C 0001                200      CMP.B   #1,D1
0000304C  6700 0014                201      BEQ     knight_select   Branch to knight message if role selected
00003050                           202      
00003050  B23C 0002                203      CMP.B   #2,D1
00003054  6700 003C                204      BEQ     mage_select     Branch to mage message if role selected
00003058                           205      
00003058  B23C 0003                206      CMP.B   #3,D1
0000305C  6700 0064                207      BEQ     rogue_select    Branch to rogue message if role selected
00003060                           208      
00003060  4E75                     209      rts
00003062                           210      
00003062                           211  knight_select:
00003062  43F9 00004A91            212      lea     knight_role_msg,A1  assign message to address register A1
00003068  103C 000E                213      move.b  #14,D0              move literal 14 to DO
0000306C  4E4F                     214      trap    #15                 Display the knight message
0000306E                           215      
0000306E  223C 00F000F0            216      move.l  #PURPLE,D1          Load the purple colour
00003074  6100 0CD0                217      bsr     change_font_colour  Change the font colour
00003078                           218      
00003078  43F9 00004AE3            219      lea     knight_spec_msg,A1  assign message to address register A1
0000307E  103C 000E                220      move.b  #14,D0              move literal 14 to DO
00003082  4E4F                     221      trap    #15                 Display the knight message
00003084                           222      
00003084  223C 00FFFFFF            223      move.l  #WHITE,D1           Load the white colour
0000308A  6100 0CBA                224      bsr     change_font_colour  Change the font colour
0000308E                           225      
0000308E  6000 0062                226      bra     tutorial_intro      Branch to tutorial subroutine
00003092                           227  
00003092                           228  mage_select:
00003092  43F9 00004B31            229      lea     mage_role_msg,A1 a  ssign message to address register A1
00003098  103C 000E                230      move.b  #14,D0              move literal 14 to DO
0000309C  4E4F                     231      trap    #15                 Display the mage message
0000309E                           232      
0000309E  223C 00F000F0            233      move.l  #PURPLE,D1          Load the purple colour
000030A4  6100 0CA0                234      bsr     change_font_colour  Change the font colour
000030A8                           235      
000030A8  43F9 00004B7B            236      lea     mage_spec_msg,A1    assign message to address register A1
000030AE  103C 000E                237      move.b  #14,D0              move literal 14 to DO
000030B2  4E4F                     238      trap    #15                 Display the mage message
000030B4                           239      
000030B4  223C 00FFFFFF            240      move.l  #WHITE,D1           Load the white colour
000030BA  6100 0C8A                241      bsr     change_font_colour  Change the font colour
000030BE                           242      
000030BE  6000 0032                243      bra     tutorial_intro      Branch to tutorial subroutine
000030C2                           244  
000030C2                           245  rogue_select:
000030C2  43F9 00004BBE            246      lea     rogue_role_msg,A1   Assign message to address register A1
000030C8  103C 000E                247      move.b  #14,D0              move literal 14 to DO
000030CC  4E4F                     248      trap    #15                 Display the rogue message
000030CE                           249      
000030CE  223C 00F000F0            250      move.l  #PURPLE,D1          Load the purple colour
000030D4  6100 0C70                251      bsr     change_font_colour  Change the font colour
000030D8                           252      
000030D8  43F9 00004C06            253      lea     rogue_spec_msg,A1   Assign message to address register A1
000030DE  103C 000E                254      move.b  #14,D0              move literal 14 to DO
000030E2  4E4F                     255      trap    #15                 Display the rogue message
000030E4                           256      
000030E4  223C 00FFFFFF            257      move.l  #WHITE,D1           Load the white colour
000030EA  6100 0C5A                258      bsr     change_font_colour  Change the font colour
000030EE                           259      
000030EE  6000 0002                260      bra     tutorial_intro      Branch to tutorial subroutine
000030F2                           261      
000030F2                           262  tutorial_intro:
000030F2  6100 0702                263      bsr     endl                Break to a new line
000030F6                           264  
000030F6  223C 000000FF            265      move.l  #RED,D1             Load the purple colour
000030FC  6100 0C48                266      bsr     change_font_colour  Change the font colour
00003100                           267      
00003100  43F9 0000468E            268      lea     tutorial_msg,A1     Load tutorial message to address register A1
00003106  103C 000E                269      move.b  #14,D0              move literal 14 to DO
0000310A  4E4F                     270      trap    #15                 Display the tutorial message
0000310C                           271      
0000310C  223C 00FFFFFF            272      move.l  #WHITE,D1           Load the white colour
00003112  6100 0C32                273      bsr     change_font_colour  Change the font colour
00003116                           274      
00003116  11FC 0005 5FF3           275      move.b  #5,GAME_STATE       Change the game state to the movement state
0000311C                           276      
0000311C  4E75                     277      rts
0000311E                           278      
0000311E                           279  *-------------------------------------------------------
0000311E                           280  *---------Gameplay Input Values Subroutine--------------
0000311E                           281  *-------------------------------------------------------    
0000311E                           282  input:
0000311E  6100 06D6                283      bsr     endl            Branch to end line subroutine
00003122                           284      
00003122  43F9 00004A35            285      lea     input_nums_msg,A1 assign message to address register A1
00003128  103C 000E                286      move.b  #14,D0          move literal 14 to DO
0000312C  4E4F                     287      trap    #15             Display the "enter number" message
0000312E                           288      
0000312E  2205                     289      move.l  D5,D1           Move the number of options to D1 to display it
00003130  103C 0003                290      move.b  #3,D0           move literal 3 to DO
00003134  4E4F                     291      trap    #15             Display the number in D1 to show the input range
00003136                           292      
00003136  43F9 00004A4E            293      lea     colon_msg,A1    assign message to address register A1
0000313C  103C 000E                294      move.b  #14,D0          move literal 14 to DO
00003140  4E4F                     295      trap    #15             Display a colon after the number range
00003142                           296      
00003142  103C 0004                297      move.b  #4,D0           Move the number 4 to D0
00003146  4E4F                     298      trap    #15             Take input
00003148                           299      
00003148                           300  manage_input:
00003148  B27C 0001                301      CMP     #1,D1           Check input against minimum value
0000314C  6D00 0014                302      BLT     invalid_input   Error if less than 1
00003150                           303      
00003150  B245                     304      CMP     D5,D1           Compare input against max value
00003152  6E00 000E                305      BGT     invalid_input   Error if more than max value
00003156                           306      
00003156  0C38 0000 5FF3           307      CMP.B   #0,GAME_STATE   Check which state the game is in
0000315C  6700 FEE6                308      BEQ     role_input      Branch to the manage input for the role picking
00003160                           309      
00003160  4E75                     310      rts                     Return out of subroutine
00003162                           311  
00003162                           312  invalid_input:
00003162  43F9 00004A51            313      lea     input_error_msg,A1 assign message to address register A1
00003168  103C 000E                314      move.b  #14,D0          move literal 14 to DO
0000316C  4E4F                     315      trap    #15             Display the error message
0000316E                           316      
0000316E  60AE                     317      bra     input           Go back to taking input
00003170                           318  
00003170                           319  *-------------------------------------------------------
00003170                           320  *----------------Gameloop (main loop)-------------------
00003170                           321  *------------------------------------------------------- 
00003170                           322  gameloop:
00003170  6100 0654                323      bsr     clear_screen    clears the screen  
00003174  6100 029A                324      bsr     draw            branch to draw screen subroutine
00003178  6100 02EE                325      bsr     draw_hud
0000317C  6100 0008                326      bsr     update          branch to update game subroutine 
00003180  6100 05F8                327      bsr     gameplay        branch to gameplay subroutine
00003184  60EA                     328      bra     gameloop        Continue looping the game loop     
00003186                           329  
00003186                           330  *-------------------------------------------------------
00003186                           331  *----------------Update Quest Progress------------------
00003186                           332  *  Complete Quest
00003186                           333  *------------------------------------------------------- 
00003186                           334  update:
00003186  0C38 0000 5FF0           335      CMP.B   #0,PLAYER           Check if the player health is zero
0000318C  6F00 0022                336      BLE     player_dead         Player is dead if health is zero or below
00003190                           337      
00003190  BDFC 00008156            338      CMP.L   #WIN_POINT,A6       Check if the player is standing on the win point
00003196  6700 0042                339      BEQ     won_game            Branch to the won game subroutine
0000319A                           340  
0000319A  0C38 0005 5FF3           341      CMP.B   #5,GAME_STATE       Check which state the game is in
000031A0  6700 0066                342      BEQ     movement_checks     Check for enemies and shops if in movement state
000031A4  0C38 0006 5FF3           343      CMP.B   #6,GAME_STATE       Check which state the game is in
000031AA  6700 022C                344      BEQ     enemy_alive_check   Check if enemy is dead if in combat
000031AE                           345      
000031AE  4E75                     346      rts
000031B0                           347      
000031B0                           348  *-------------------------------------------------------
000031B0                           349  *---------------------Win or Lose----------------------- 
000031B0                           350  player_dead:
000031B0  6100 0644                351      bsr     endl            Break to new line
000031B4                           352      
000031B4  43F9 000051B7            353      lea     death_msg,A1    Load the death message
000031BA  103C 000E                354      move.b  #14,D0          Move byte #14 to D0 for the trap command
000031BE  4E4F                     355      trap    #15             Display the loaded message
000031C0                           356  
000031C0  6100 0B10                357      bsr     press_continue  Pause to get input
000031C4  6100 0600                358      bsr     clear_screen    Clear the screen
000031C8  6100 0274                359      bsr     draw_graveyard  Draw a graveyard
000031CC  6100 0628                360      bsr     endl            Break to new line
000031D0  11FC 0040 5FF3           361      move.b  #64,GAME_STATE  Set the game state to end game
000031D6  6000 05FA                362      bra     replay          Give the player the option to restart or quit
000031DA                           363      
000031DA                           364  won_game:
000031DA  6100 061A                365      bsr     endl            Break to new line
000031DE                           366      
000031DE  43F9 0000521C            367      lea     win_msg,A1      Load the win message
000031E4  103C 000E                368      move.b  #14,D0          Move byte #14 to D0 for the trap command
000031E8  4E4F                     369      trap    #15             Display the loaded message
000031EA                           370  
000031EA  6100 0AE6                371      bsr     press_continue  Pause to get input
000031EE  6100 05D6                372      bsr     clear_screen    Clear the screen
000031F2  6100 0602                373      bsr     endl            Break to new line
000031F6  6100 0254                374      bsr     draw_castle     Draw a castle
000031FA  6100 05FA                375      bsr     endl            Break to new line
000031FE  11FC 0040 5FF3           376      move.b  #64,GAME_STATE  Set the game state to end game
00003204  6000 05CC                377      bra     replay          Give the player the option to restart or quit
00003208                           378  
00003208                           379  *-------------------------------------------------------
00003208                           380  *--------------------Movement State--------------------- 
00003208                           381  movement_checks:
00003208  6100 0092                382      bsr     manage_torch    Check if the torch life is zero and if damage player if so
0000320C  6100 0016                383      bsr     loot_piles_check Check for loot piles under the player 
00003210  6100 00BE                384      bsr     enemies_check   Check for enemies beside the player
00003214  0C38 0005 5FF3           385      CMP.B   #5,GAME_STATE   Compare the movement gamestate number with the current gamestate
0000321A  6600 0AE8                386      BNE     return          Return from the loop if the game is not in the movement state anymore
0000321E  6100 013A                387      bsr     shops_check     Check for shops beside the player
00003222                           388      
00003222  4E75                     389      rts
00003224                           390  
00003224                           391  *-------------------Loot pile checks--------------------
00003224                           392  loot_piles_check:
00003224  4BF8 7000                393      lea     FIRST_LOOT,A5   Load the memory address of the first loot pile
00003228  1A3C 0000                394      move.b  #0,D5           Move the starting loot number to D5
0000322C  6100 0004                395      bsr     loot_pile_loop  Loop through all loot piles
00003230  4E75                     396      rts                     Return from subroutine
00003232                           397      
00003232                           398  loot_pile_loop:
00003232  BA3C 0002                399      CMP.B   #ENEMY_MAX,D5   Compare the loot number with the maximum enemy number
00003236  6C00 0ACC                400      BGE     return          Return from the loop if the current loot number is greater than or equal to the max
0000323A                           401  
0000323A  6100 000A                402      bsr     loot_pile_check Check for a loot pile
0000323E                           403      
0000323E  5205                     404      add.b   #1,D5           Add to the current loot number
00003240  DAFC 000C                405      add.w   #12,A5          Add to the current loot pointer to move to the next loot pile
00003244  60EC                     406      bra     loot_pile_loop  Keep looping the loot piles
00003246                           407      
00003246                           408  loot_pile_check:
00003246  5A4D                     409      add.w   #L_ACTIVE,A5    Move to the active state
00003248  0C15 0000                410      CMP.B   #0,(A5)         Check if the loot is active
0000324C  5B4D                     411      sub.w   #L_ACTIVE,A5    Move to the active state
0000324E  6700 0AB4                412      BEQ     return          Return if not active
00003252                           413  
00003252  3415                     414      move.w  (A5),D2         Move the loot pile position to D2 for large value comparison
00003254  BDC2                     415      CMP.L   D2,A6         Check if the player is on a loot pile   
00003256  6700 0004                416      BEQ     pickup_loot     Pickup the loot
0000325A                           417      
0000325A  4E75                     418      rts     Return if not touching a loot pile
0000325C                           419      
0000325C                           420  pickup_loot:
0000325C  6100 0598                421      bsr     endl                Line break
00003260                           422      
00003260  223C 0000FFFF            423      move.l  #GOLD,D1            Load gold colour
00003266  6100 0ADE                424      bsr     change_font_colour  Change the font colour
0000326A                           425      
0000326A  43F9 00005412            426      LEA     pickup_loot_msg,A1  Load the encounter message int A1
00003270  103C 000E                427      move.b  #14,D0              Move #14 to D0 to display message
00003274  4E4F                     428      trap    #15                 Display the loaded message
00003276                           429      
00003276  223C 00FFFFFF            430      move.l  #WHITE,D1           Load the white colour
0000327C  6100 0AC8                431      bsr     change_font_colour  Change the font colour
00003280                           432      
00003280  544D                     433      add.w   #S_POTIONS,A5       Move to potions number
00003282  121D                     434      move.b  (A5)+,D1            Move the loot potions number to D1 and increment
00003284  D338 5FF9                435      add.b   D1,PLA_POTIONS      Give the player the number of potions in the loot
00003288                           436      
00003288  121D                     437      move.b  (A5)+,D1            Move the key number to D1 and increment
0000328A  D338 5FFA                438      add.b   D1,PLA_KEYS         Give the player the number of keys in the loot
0000328E                           439      
0000328E  121D                     440      move.b  (A5)+,D1            Move the torch number to D1 and increment
00003290  D338 5FFB                441      add.b   D1,PLA_TORCH        Give the player the number of torches in the loot
00003294                           442      
00003294  1ABC 0000                443      move.b  #0,(A5)             Set the loot to not active
00003298  5B4D                     444      sub.w   #L_ACTIVE,A5        Move to active state
0000329A                           445      
0000329A  4E75                     446      rts
0000329C                           447  
0000329C                           448  *---------------------Manage Torch----------------------
0000329C                           449  manage_torch:
0000329C  0C38 0000 5FFB           450      CMP.B   #0,PLA_TORCH    Compare the torch life with zero
000032A2  6E00 0A60                451      BGT     return          Return if the torch life is greater than zero
000032A6                           452      
000032A6  5338 5FF0                453      sub.b   #1,PLAYER       Remove one health from the player
000032AA                           454      
000032AA  6100 054A                455      bsr     endl            Break to new line
000032AE                           456      
000032AE  223C 000000FF            457      move.l  #RED,D1
000032B4  6100 0A90                458      bsr     change_font_colour  Change the font colour
000032B8                           459      
000032B8  43F9 000053FA            460      lea     no_torch_msg,A1 Load the no torch message into A1
000032BE  103C 000E                461      move.b  #14,D0          Move the number literal 14 into D0 for trap command
000032C2  4E4F                     462      trap    #15             Display the loaded message
000032C4                           463      
000032C4  223C 00FFFFFF            464      move.l  #WHITE,D1
000032CA  6100 0A7A                465      bsr     change_font_colour  Change the font colour
000032CE                           466      
000032CE  4E75                     467      rts                     Return from the subroutine
000032D0                           468  
000032D0                           469  *--------------------Enemy Checking--------------------- 
000032D0                           470  enemies_check:
000032D0  4BF8 6000                471      lea     FIRST_ENEMY,A5  Load the memory address of the first enemy
000032D4  1A3C 0000                472      move.b  #0,D5           Move the starting enemy number to D5
000032D8  6100 0004                473      bsr     enemies_loop    Loop through all enemies
000032DC  4E75                     474      rts                     Return from subroutine
000032DE                           475      
000032DE                           476  enemies_loop:
000032DE  BA3C 0002                477      CMP.B   #ENEMY_MAX,D5   Compare the enemy number with the maximum enemy number
000032E2  6C00 0A20                478      BGE     return          Return from the loop if the current enemy number is greater than or equal to the max
000032E6                           479  
000032E6  6100 0014                480      bsr     enemy_check     Check for an enemy
000032EA                           481      
000032EA  0C38 0005 5FF3           482      CMP.B   #5,GAME_STATE   Compare the movement gamestate number with the current gamestate
000032F0  6600 0A12                483      BNE     return          Return from the loop if the game is not in the movement state anymore
000032F4                           484      
000032F4  5205                     485      add.b   #1,D5           Add to the current enemy number
000032F6  DAFC 000C                486      add.w   #12,A5          Add to the current enemy pointer to move to the next enemy (16 for next enemy - 4 to get back from position)
000032FA  60E2                     487      bra     enemies_loop    Keep looping the enemies
000032FC                           488      
000032FC                           489  
000032FC                           490  enemy_check:
000032FC  564D                     491      add.w   #ALIVE,A5       Move into enemy information to check if its alive
000032FE  0C1D 0000                492      CMP.B   #0,(A5)+        Check if the enemy is alive
00003302  6700 0A00                493      BEQ     return          Return from the check if the enemy is dead
00003306                           494      
00003306  340E                     495      move.w  A6,D2           Move the player position to D2
00003308                           496      
00003308                           497      *Check if the player is beside an enemy
00003308  0442 0010                498      sub.w   #16,D2          Check north
0000330C  B455                     499      CMP.W   (A5),D2           
0000330E  6700 0020                500      BEQ     enter_combat    Enter the player into combat
00003312                           501      
00003312  0642 0020                502      add.w   #32,D2          Check south
00003316  B455                     503      CMP.W   (A5),D2           
00003318  6700 0016                504      BEQ     enter_combat    Enter the player into combat
0000331C                           505      
0000331C  0442 0011                506      sub.w   #17,D2          Check west
00003320  B455                     507      CMP.W   (A5),D2           
00003322  6700 000C                508      BEQ     enter_combat    Enter the player into combat
00003326                           509      
00003326  5442                     510      add.w   #2,D2           Check east
00003328  B455                     511      CMP.W   (A5),D2           
0000332A  6700 0004                512      BEQ     enter_combat    Enter the player into combat
0000332E                           513      
0000332E  4E75                     514      rts     Return if not touching an enemy
00003330                           515      
00003330                           516  enter_combat:
00003330  594D                     517      sub.w   #4,A5               Get the memory address of the enemy opposed to it's position
00003332  11FC 0006 5FF3           518      move.b  #6,GAME_STATE       Move to combat state
00003338                           519      
00003338  6100 04BC                520      bsr     endl                Line break
0000333C                           521      
0000333C  43F9 00004D39            522      LEA     encounter_msg,A1    Load the encounter message int A1
00003342  103C 000E                523      move.b  #14,D0              Move #14 to D0 to display message
00003346  4E4F                     524      trap    #15                 Display the loaded message
00003348                           525      
00003348  6100 0988                526      bsr     press_continue      Branch to the press to continue subroutine
0000334C                           527      
0000334C  6100 0478                528      bsr     clear_screen        Clear the screen
00003350                           529      
00003350  6100 00DE                530      bsr     draw_skeleton       Draw the enemy
00003354  6100 022E                531      bsr     draw_battle_info    Draw the info
00003358                           532      
00003358  4E75                     533      rts
0000335A                           534        
0000335A                           535  *--------------------Shop Checking----------------------
0000335A                           536  shops_check:
0000335A  4BF8 6500                537      lea     FIRST_SHOP,A5   Load the memory address of the first shop
0000335E  1A3C 0000                538      move.b  #0,D5           Move the starting shop number to D5
00003362  6100 0004                539      bsr     shops_loop      Loop through all shops
00003366  4E75                     540      rts                     Return from subroutine
00003368                           541      
00003368                           542  shops_loop:
00003368  BA3C 0002                543      CMP.B   #SHOP_MAX,D5    Compare the shop number with the maximum shop number
0000336C  6C00 0996                544      BGE     return          Return from the loop if the current shop number is greater than or equal to the max
00003370                           545      
00003370  6100 0014                546      bsr     shop_check      Check for a shop
00003374                           547      
00003374  0C38 0005 5FF3           548      CMP.B   #5,GAME_STATE   Compare the movement gamestate number with the current gamestate
0000337A  6600 0988                549      BNE     return          Return from the loop if the game is not in the movement state anymore
0000337E                           550      
0000337E  5205                     551      add.b   #1,D5           Add to the current shop number
00003380  DAFC 0010                552      add.w   #16,A5          Add to the current shop pointer to move to the next shop
00003384  60E2                     553      bra     shops_loop      Keep looping the shops
00003386                           554      
00003386                           555  shop_check:    
00003386  340E                     556      move.w  A6,D2           Move the player position to D2
00003388                           557      
00003388                           558      *Check if the player is beside a shop
00003388  0442 0010                559      sub.w   #16,D2          Check north
0000338C  B455                     560      CMP.W   (A5),D2           
0000338E  6700 0020                561      BEQ     enter_shop      The player enters a shop
00003392                           562      
00003392  0642 0020                563      add.w   #32,D2          Check south
00003396  B455                     564      CMP.W   (A5),D2           
00003398  6700 0016                565      BEQ     enter_shop      The player enters a shop
0000339C                           566      
0000339C  0442 0011                567      sub.w   #17,D2          Check west
000033A0  B455                     568      CMP.W   (A5),D2           
000033A2  6700 000C                569      BEQ     enter_shop      The player enters a shop
000033A6                           570      
000033A6  5442                     571      add.w   #2,D2           Check east
000033A8  B455                     572      CMP.W   (A5),D2           
000033AA  6700 0004                573      BEQ     enter_shop      The player enters a shop
000033AE                           574      
000033AE  4E75                     575      rts     Return if not touching a shop
000033B0                           576      
000033B0                           577  enter_shop:
000033B0  11FC 0007 5FF3           578      move.b  #7,GAME_STATE       Move to shop game state
000033B6                           579      
000033B6  6100 043E                580      bsr     endl                Line break
000033BA                           581      
000033BA  43F9 000052BD            582      LEA     shop_enter_msg,A1   Load the encounter message int A1
000033C0  103C 000E                583      move.b  #14,D0              Move #14 to D0 to display message
000033C4  4E4F                     584      trap    #15                 Display the loaded message
000033C6                           585      
000033C6  6100 090A                586      bsr     press_continue      Branch to the press to continue subroutine
000033CA                           587      
000033CA  6100 03FA                588      bsr     clear_screen        Clear the screen
000033CE                           589      
000033CE  6100 008A                590      bsr     draw_merchant       Draw the merchant
000033D2  6100 022A                591      bsr     draw_shop_info      Draw the info
000033D6                           592      
000033D6  4E75                     593      rts
000033D8                           594  
000033D8                           595  *-------------------------------------------------------
000033D8                           596  *---------------------Combat State---------------------- 
000033D8                           597  enemy_alive_check:
000033D8  0C15 0000                598      CMP.B   #0,(A5)     Compare the enemy health with zero
000033DC  6F00 0004                599      BLE     enemy_died  If the enemy health is zero or below, they died
000033E0                           600      
000033E0  4E75                     601      rts
000033E2                           602      
000033E2                           603  enemy_died:
000033E2  6100 0412                604      bsr     endl            Break to a new line
000033E6                           605  
000033E6  43F9 00005181            606      lea     battle_won_msg,A1   Load the won battle message
000033EC  103C 000E                607      move.b  #14,D0              Move the literal #14 to D0 for trap task #14
000033F0  4E4F                     608      trap    #15                 Display the message
000033F2                           609      
000033F2  11FC 0005 5FF3           610      move.b  #5,GAME_STATE   Set the game state mack to movement state
000033F8  564D                     611      add.w   #ALIVE,A5       Move from the enemy health to its alive status
000033FA  1ABC 0000                612      move.b  #0,(A5)         Set the enemy as dead
000033FE                           613      
000033FE  6100 08D2                614      bsr     press_continue
00003402                           615      
00003402  6100 03C2                616      bsr     clear_screen    Clear the screen
00003406  6100 0008                617      bsr     draw            Draw the map for first frame back in movement
0000340A  6100 005C                618      bsr     draw_hud        Draw the hud for first frame back in movement
0000340E                           619      
0000340E  4E75                     620      rts
00003410                           621      
00003410                           622  *-------------------------------------------------------
00003410                           623  *-----------------Draw Quest Updates--------------------
00003410                           624  * Draw the game progress information, status regarding
00003410                           625  * quest
00003410                           626  *------------------------------------------------------- 
00003410                           627  draw:
00003410  0C38 0005 5FF3           628      CMP.B   #5,GAME_STATE   Check which state the game is in
00003416  6700 0940                629      BEQ     draw_loop       If in the movement state, draw the map
0000341A  0C38 0006 5FF3           630      CMP.B   #6,GAME_STATE   Check which state the game is in
00003420  6700 000E                631      BEQ     draw_skeleton   If in the combat state, draw the enemy
00003424  0C38 0007 5FF3           632      CMP.B   #7,GAME_STATE   Check which state the game is in
0000342A  6700 002E                633      BEQ     draw_merchant   If in the shop state, draw the enemy
0000342E  4E75                     634      rts
00003430                           635      
00003430                           636  draw_skeleton:
00003430  43F9 000054E0            637      lea     skeleton_msg,A1 Load the skeleton message
00003436  103C 000E                638      move.b  #14,D0          Move literal 14 for display message trap command
0000343A  4E4F                     639      trap    #15             Display the loaded message
0000343C                           640      
0000343C  4E75                     641      rts
0000343E                           642      
0000343E                           643  draw_graveyard:
0000343E  43F9 0000542E            644      lea     graveyard_msg,A1 Load the graveyard message
00003444  103C 000E                645      move.b  #14,D0           Move literal 14 for display message trap command
00003448  4E4F                     646      trap    #15              Display the loaded message
0000344A  4E75                     647      rts                      Return from the subroutine
0000344C                           648  
0000344C                           649  draw_castle:
0000344C  43F9 000056FF            650      lea     castle_msg,A1   Load the castle message
00003452  103C 000E                651      move.b  #14,D0          Move literal 14 for display message trap command
00003456  4E4F                     652      trap    #15             Display the loaded message
00003458  4E75                     653      rts                     Return from the subroutine
0000345A                           654      
0000345A                           655  draw_merchant:
0000345A  43F9 000055D8            656      lea     merchant_msg,A1  Load the merchant message
00003460  103C 000E                657      move.b  #14,D0           Move literal 14 for display message trap command
00003464  4E4F                     658      trap    #15              Display the loaded message
00003466                           659      
00003466  4E75                     660      rts
00003468                           661      
00003468                           662  draw_hud:
00003468  0C38 0005 5FF3           663      CMP.B   #5,GAME_STATE       Check which state the game is in
0000346E  6700 0018                664      BEQ     draw_player_info    If in the movement state, draw the player info
00003472  0C38 0006 5FF3           665      CMP.B   #6,GAME_STATE       Check which state the game is in
00003478  6700 010A                666      BEQ     draw_battle_info    If in the combat state, draw the combat info
0000347C  0C38 0007 5FF3           667      CMP.B   #7,GAME_STATE       Check which state the game is in
00003482  6700 017A                668      BEQ     draw_shop_info      If in the shop state, draw the shop info
00003486                           669      
00003486  4E75                     670      rts
00003488                           671  
00003488                           672  draw_player_info:
00003488  323C 00FF                673      move.w  #255,D1         Move the word #255 to D1 to set the type of trap 11
0000348C  103C 000B                674      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
00003490  4E4F                     675      trap    #15             Trap to get the cursor position in D1
00003492                           676      
00003492  3601                     677      move.w  D1,D3           Move the current cursor position to D3 for later
00003494                           678      
00003494                           679      * Display the player health
00003494  323C 3201                680      move.w  #CSR_POS_MOVE,D1           
00003498  4E4F                     681      trap    #15             Set the cursor position with trap command 11
0000349A  4241                     682      clr     D1              Clear D1 of the cursor position
0000349C                           683      
0000349C  43F9 0000510F            684      lea     health_msg,A1   Load the hud message
000034A2  103C 000E                685      move.b  #14,D0          Move literal 14 for display message trap command
000034A6  4E4F                     686      trap    #15             Display the loaded message
000034A8                           687      
000034A8  1238 5FF0                688      move.b  PLAYER,D1       Move the player health value to D1 to display
000034AC  103C 0003                689      move.b  #3,D0           Move literal 3 for display number trap command
000034B0  4E4F                     690      trap    #15             Display the number in D1
000034B2                           691      
000034B2                           692      * Display the torch life
000034B2  103C 000B                693      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
000034B6  323C 3201                694      move.w  #CSR_POS_MOVE,D1         
000034BA  5241                     695      add.w   #1,D1  
000034BC  4E4F                     696      trap    #15             Set the cursor position with trap command 11
000034BE  4241                     697      clr     D1              Clear D1 of the cursor position
000034C0                           698      
000034C0  43F9 00005127            699      lea     torch_msg,A1   Load the hud message
000034C6  103C 000E                700      move.b  #14,D0          Move literal 14 for display message trap command
000034CA  4E4F                     701      trap    #15             Display the loaded message
000034CC                           702      
000034CC  1238 5FFB                703      move.b  PLA_TORCH,D1    Move the player torch life value to D1 to display
000034D0  103C 0003                704      move.b  #3,D0           Move literal 3 for display number trap command
000034D4  4E4F                     705      trap    #15             Display the number in D1
000034D6                           706      
000034D6                           707      * Display the inventory
000034D6  103C 000B                708      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
000034DA  323C 3201                709      move.w  #CSR_POS_MOVE,D1
000034DE  5441                     710      add.w   #2,D1          
000034E0  4E4F                     711      trap    #15             Set the cursor position with trap command 11
000034E2  4241                     712      clr     D1              Clear D1 of the cursor position
000034E4                           713      
000034E4  43F9 00005141            714      lea     inventory_msg,A1   Load the hud message
000034EA  103C 000E                715      move.b  #14,D0          Move literal 14 for display message trap command
000034EE  4E4F                     716      trap    #15             Display the loaded message
000034F0                           717      
000034F0                           718      * Display the player gold
000034F0  103C 000B                719      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
000034F4  323C 3201                720      move.w  #CSR_POS_MOVE,D1         
000034F8  5641                     721      add.w   #3,D1  
000034FA  4E4F                     722      trap    #15             Set the cursor position with trap command 11
000034FC  4241                     723      clr     D1              Clear D1 of the cursor position
000034FE                           724      
000034FE  43F9 0000514C            725      lea     gold_msg,A1   Load the hud message
00003504  103C 000E                726      move.b  #14,D0          Move literal 14 for display message trap command
00003508  4E4F                     727      trap    #15             Display the loaded message
0000350A                           728      
0000350A  49F8 5FF8                729      lea     PLA_GOLD,A4
0000350E  6100 0052                730      bsr     draw_item_number
00003512                           731      
00003512                           732      * Display the player potions
00003512  103C 000B                733      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
00003516  323C 3201                734      move.w  #CSR_POS_MOVE,D1         
0000351A  5841                     735      add.w   #4,D1  
0000351C  4E4F                     736      trap    #15             Set the cursor position with trap command 11
0000351E  4241                     737      clr     D1              Clear D1 of the cursor position
00003520                           738      
00003520  43F9 0000515B            739      lea     potions_msg,A1   Load the hud message
00003526  103C 000E                740      move.b  #14,D0          Move literal 14 for display message trap command
0000352A  4E4F                     741      trap    #15             Display the loaded message
0000352C                           742      
0000352C  49F8 5FF9                743      lea     PLA_POTIONS,A4
00003530  6100 0030                744      bsr     draw_item_number
00003534                           745      
00003534                           746      * Display the player keys
00003534  103C 000B                747      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
00003538  323C 3201                748      move.w  #CSR_POS_MOVE,D1         
0000353C  5A41                     749      add.w   #5,D1  
0000353E  4E4F                     750      trap    #15             Set the cursor position with trap command 11
00003540  4241                     751      clr     D1              Clear D1 of the cursor position
00003542                           752      
00003542  43F9 00005154            753      lea     key_msg,A1   Load the hud message
00003548  103C 000E                754      move.b  #14,D0          Move literal 14 for display message trap command
0000354C  4E4F                     755      trap    #15             Display the loaded message
0000354E                           756      
0000354E  49F8 5FFA                757      lea     PLA_KEYS,A4
00003552  6100 000E                758      bsr     draw_item_number
00003556                           759      
00003556  3203                     760      move.w  D3,D1           Move the current cursor position to D3 for later
00003558                           761      
00003558  103C 000B                762      move.b  #11,D0          Move the byte #11 to D0 for trap command 11          
0000355C  4E4F                     763      trap    #15             Set the cursor position with trap command 11
0000355E                           764      
0000355E  4241                     765      clr     D1              Clear D1 for later use
00003560                           766      
00003560  4E75                     767      rts
00003562                           768      
00003562                           769  draw_item_number:
00003562  103C 000E                770      move.b  #14,D0          Move literal 3 for display number trap command
00003566  43F9 000051B3            771      lea     bracket_open_msg,A1
0000356C  4E4F                     772      trap    #15
0000356E                           773  
0000356E  103C 0003                774      move.b  #3,D0           Move literal 3 for display number trap command
00003572  1214                     775      move.b  (A4),D1         Move the value in the register A4 to D1 to display
00003574  4E4F                     776      trap    #15             Display the number in D1
00003576                           777      
00003576  103C 000E                778      move.b  #14,D0          Move literal 3 for display number trap command
0000357A  43F9 000051B5            779      lea     bracket_close_msg,A1
00003580  4E4F                     780      trap    #15
00003582  4E75                     781      rts
00003584                           782      
00003584                           783  
00003584                           784  draw_battle_info:
00003584  323C 00FF                785      move.w  #255,D1         Move the word #255 to D1 to set the type of trap 11
00003588  103C 000B                786      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
0000358C  4E4F                     787      trap    #15             Trap to get the cursor position in D1
0000358E                           788      
0000358E  3601                     789      move.w  D1,D3           Move the current cursor position to D3 for later
00003590                           790      
00003590                           791      * Move cursor to draw player info
00003590  323C 2001                792      move.w  #CSR_POS_BATTLE,D1           
00003594  4E4F                     793      trap    #15             Set the cursor position with trap command 11
00003596  4241                     794      clr     D1              Clear D1 of the cursor position
00003598                           795      
00003598  43F9 0000510F            796      lea     health_msg,A1   Load the hud message
0000359E  103C 000E                797      move.b  #14,D0          Move literal 14 for display message trap command
000035A2  4E4F                     798      trap    #15             Display the loaded message
000035A4                           799      
000035A4  1238 5FF0                800      move.b  PLAYER,D1       Move the player health value to D1 to display
000035A8  103C 0003                801      move.b  #3,D0           Move literal 3 for display number trap command
000035AC  4E4F                     802      trap    #15             Display the number in D1
000035AE                           803      
000035AE                           804      * Move the cursor to draw enemy info
000035AE  103C 000B                805      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
000035B2  323C 2001                806      move.w  #CSR_POS_BATTLE,D1
000035B6  5241                     807      add.w   #1,D1
000035B8  4E4F                     808      trap    #15             Set the cursor position with trap command 11
000035BA  4241                     809      clr     D1              Clear D1 of the cursor position
000035BC                           810      
000035BC  43F9 00005118            811      lea     enemy_health_msg,A1 Load the hud message
000035C2  103C 000E                812      move.b  #14,D0              Move literal 14 for display message trap command
000035C6  4E4F                     813      trap    #15                 Display the loaded message
000035C8                           814      
000035C8  1215                     815      move.b  (A5),D1         Move the enemy health value to D1 to display
000035CA  103C 0003                816      move.b  #3,D0           Move literal 3 for display number trap command
000035CE  4E4F                     817      trap    #15             Display the number in D1
000035D0                           818      
000035D0                           819      * Move the cursor to draw potion information
000035D0  103C 000B                820      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
000035D4  323C 2001                821      move.w  #CSR_POS_BATTLE,D1
000035D8  5641                     822      add.w   #3,D1
000035DA  4E4F                     823      trap    #15             Set the cursor position with trap command 11
000035DC  4241                     824      clr     D1              Clear D1 of the cursor position
000035DE                           825      
000035DE  43F9 0000515B            826      lea     potions_msg,A1   Load the hud message
000035E4  103C 000E                827      move.b  #14,D0          Move literal 14 for display message trap command
000035E8  4E4F                     828      trap    #15             Display the loaded message
000035EA                           829      
000035EA  49F8 5FF9                830      lea     PLA_POTIONS,A4
000035EE  6100 FF72                831      bsr     draw_item_number
000035F2                           832      
000035F2                           833      * Move the cursor back to its previous position
000035F2  3203                     834      move.w  D3,D1           Move the previous cursor position back to D1
000035F4  103C 000B                835      move.b  #11,D0          Move the byte #11 to D0 for trap command 11          
000035F8  4E4F                     836      trap    #15             Set the cursor position with trap command 11
000035FA                           837      
000035FA  4241                     838      clr     D1              Clear D1 for later use
000035FC                           839      
000035FC  4E75                     840      rts
000035FE                           841      
000035FE                           842  draw_shop_info:
000035FE  323C 00FF                843      move.w  #255,D1         Move the word #255 to D1 to set the type of trap 11
00003602  103C 000B                844      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
00003606  4E4F                     845      trap    #15             Trap to get the cursor position in D1
00003608                           846      
00003608  3601                     847      move.w  D1,D3           Move the current cursor position to D3 for later
0000360A                           848      
0000360A                           849      * Move cursor to draw shop info
0000360A  323C 1801                850      move.w  #CSR_POS_SHOP_S,D1           
0000360E  4E4F                     851      trap    #15             Set the cursor position with trap command 11
00003610  4241                     852      clr     D1              Clear D1 of the cursor position
00003612                           853      
00003612  43F9 00005397            854      lea     shop_stock_msg,A1   Load the hud message
00003618  103C 000E                855      move.b  #14,D0          Move literal 14 for display message trap command
0000361C  4E4F                     856      trap    #15             Display the loaded message
0000361E                           857      
0000361E                           858      
0000361E                           859      * Display the shop's potions
0000361E  103C 000B                860      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
00003622  323C 1801                861      move.w  #CSR_POS_SHOP_S,D1         
00003626  5241                     862      add.w   #1,D1  
00003628  4E4F                     863      trap    #15             Set the cursor position with trap command 11
0000362A  4241                     864      clr     D1              Clear D1 of the cursor position
0000362C                           865      
0000362C  43F9 0000515B            866      lea     potions_msg,A1   Load the hud message
00003632  103C 000E                867      move.b  #14,D0          Move literal 14 for display message trap command
00003636  4E4F                     868      trap    #15             Display the loaded message
00003638                           869      
00003638  544D                     870      add.w   #S_POTIONS,A5
0000363A  49D5                     871      lea     (A5),A4
0000363C  6100 FF24                872      bsr     draw_item_number
00003640                           873      
00003640                           874      * Display the shop's keys
00003640  103C 000B                875      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
00003644  323C 1801                876      move.w  #CSR_POS_SHOP_S,D1         
00003648  5441                     877      add.w   #2,D1  
0000364A  4E4F                     878      trap    #15             Set the cursor position with trap command 11
0000364C  4241                     879      clr     D1              Clear D1 of the cursor position
0000364E                           880      
0000364E  43F9 00005154            881      lea     key_msg,A1      Load the hud message
00003654  103C 000E                882      move.b  #14,D0          Move literal 14 for display message trap command
00003658  4E4F                     883      trap    #15             Display the loaded message
0000365A                           884      
0000365A  524D                     885      add.w   #1,A5
0000365C  49D5                     886      lea     (A5),A4
0000365E  6100 FF02                887      bsr     draw_item_number
00003662                           888      
00003662                           889      * Display the shop's torches
00003662  103C 000B                890      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
00003666  323C 1801                891      move.w  #CSR_POS_SHOP_S,D1         
0000366A  5641                     892      add.w   #3,D1  
0000366C  4E4F                     893      trap    #15             Set the cursor position with trap command 11
0000366E  4241                     894      clr     D1              Clear D1 of the cursor position
00003670                           895      
00003670  43F9 00005165            896      lea     torches_msg,A1  Load the torches message
00003676  103C 000E                897      move.b  #14,D0          Move literal 14 for display message trap command
0000367A  4E4F                     898      trap    #15             Display the loaded message
0000367C                           899      
0000367C  524D                     900      add.w   #1,A5
0000367E  49D5                     901      lea     (A5),A4
00003680  6100 FEE0                902      bsr     draw_item_number
00003684                           903      
00003684                           904      * Display the shop's damage upgrades
00003684  103C 000B                905      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
00003688  323C 1801                906      move.w  #CSR_POS_SHOP_S,D1         
0000368C  5841                     907      add.w   #4,D1  
0000368E  4E4F                     908      trap    #15             Set the cursor position with trap command 11
00003690  4241                     909      clr     D1              Clear D1 of the cursor position
00003692                           910      
00003692  43F9 0000516E            911      lea     damage_up_msg,A1 Load the damage upgrades message
00003698  103C 000E                912      move.b  #14,D0           Move literal 14 for display message trap command
0000369C  4E4F                     913      trap    #15              Display the loaded message
0000369E                           914      
0000369E  524D                     915      add.w   #1,A5               Increment A5 to get to the damage upgrades
000036A0  49D5                     916      lea     (A5),A4             Load the memory address in A5 to A4
000036A2  6100 FEBE                917      bsr     draw_item_number    Draw the number of items
000036A6  5B4D                     918      sub.w   #S_DAMAGE_IN,A5     Bring the pointer back to the root of the shop
000036A8                           919      
000036A8                           920      * Display the inventory
000036A8  103C 000B                921      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
000036AC  323C 3401                922      move.w  #CSR_POS_SHOP_P,D1       
000036B0  4E4F                     923      trap    #15             Set the cursor position with trap command 11
000036B2  4241                     924      clr     D1              Clear D1 of the cursor position
000036B4                           925      
000036B4  43F9 00005141            926      lea     inventory_msg,A1   Load the hud message
000036BA  103C 000E                927      move.b  #14,D0          Move literal 14 for display message trap command
000036BE  4E4F                     928      trap    #15             Display the loaded message
000036C0                           929      
000036C0                           930      * Display the player gold
000036C0  103C 000B                931      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
000036C4  323C 3401                932      move.w  #CSR_POS_SHOP_P,D1         
000036C8  5241                     933      add.w   #1,D1  
000036CA  4E4F                     934      trap    #15             Set the cursor position with trap command 11
000036CC  4241                     935      clr     D1              Clear D1 of the cursor position
000036CE                           936      
000036CE  43F9 0000514C            937      lea     gold_msg,A1   Load the hud message
000036D4  103C 000E                938      move.b  #14,D0          Move literal 14 for display message trap command
000036D8  4E4F                     939      trap    #15             Display the loaded message
000036DA                           940      
000036DA  49F8 5FF8                941      lea     PLA_GOLD,A4
000036DE  6100 FE82                942      bsr     draw_item_number
000036E2                           943      
000036E2                           944      * Display the player potions
000036E2  103C 000B                945      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
000036E6  323C 3401                946      move.w  #CSR_POS_SHOP_P,D1         
000036EA  5441                     947      add.w   #2,D1  
000036EC  4E4F                     948      trap    #15             Set the cursor position with trap command 11
000036EE  4241                     949      clr     D1              Clear D1 of the cursor position
000036F0                           950      
000036F0  43F9 0000515B            951      lea     potions_msg,A1   Load the hud message
000036F6  103C 000E                952      move.b  #14,D0          Move literal 14 for display message trap command
000036FA  4E4F                     953      trap    #15             Display the loaded message
000036FC                           954      
000036FC  49F8 5FF9                955      lea     PLA_POTIONS,A4
00003700  6100 FE60                956      bsr     draw_item_number
00003704                           957      
00003704                           958      * Display the player keys
00003704  103C 000B                959      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
00003708  323C 3401                960      move.w  #CSR_POS_SHOP_P,D1         
0000370C  5641                     961      add.w   #3,D1  
0000370E  4E4F                     962      trap    #15             Set the cursor position with trap command 11
00003710  4241                     963      clr     D1              Clear D1 of the cursor position
00003712                           964      
00003712  43F9 00005154            965      lea     key_msg,A1   Load the hud message
00003718  103C 000E                966      move.b  #14,D0          Move literal 14 for display message trap command
0000371C  4E4F                     967      trap    #15             Display the loaded message
0000371E                           968      
0000371E  49F8 5FFA                969      lea     PLA_KEYS,A4
00003722  6100 FE3E                970      bsr     draw_item_number
00003726                           971      
00003726                           972      * Display the torch life
00003726  103C 000B                973      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
0000372A  323C 3401                974      move.w  #CSR_POS_SHOP_P,D1
0000372E  5A41                     975      add.w   #5,D1       
00003730  4E4F                     976      trap    #15             Set the cursor position with trap command 11
00003732  4241                     977      clr     D1              Clear D1 of the cursor position
00003734                           978      
00003734  43F9 00005127            979      lea     torch_msg,A1   Load the hud message
0000373A  103C 000E                980      move.b  #14,D0          Move literal 14 for display message trap command
0000373E  4E4F                     981      trap    #15             Display the loaded message
00003740                           982      
00003740  1238 5FFB                983      move.b  PLA_TORCH,D1    Move the player torch life value to D1 to display
00003744  103C 0003                984      move.b  #3,D0           Move literal 3 for display number trap command
00003748  4E4F                     985      trap    #15             Display the number in D1
0000374A                           986      
0000374A                           987      * Display the player's damage level
0000374A  103C 000B                988      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
0000374E  323C 3401                989      move.w  #CSR_POS_SHOP_P,D1
00003752  5C41                     990      add.w   #6,D1       
00003754  4E4F                     991      trap    #15             Set the cursor position with trap command 11
00003756  4241                     992      clr     D1              Clear D1 of the cursor position
00003758                           993      
00003758  43F9 00005134            994      lea     damage_lvl_msg,A1   Load the damage level message
0000375E  103C 000E                995      move.b  #14,D0              Move literal 14 for display message trap command
00003762  4E4F                     996      trap    #15                 Display the loaded message
00003764                           997      
00003764  1238 5FF1                998      move.b  PLA_DAMAGE,D1   Move the player's damage level to D1 to display
00003768  103C 0003                999      move.b  #3,D0           Move literal 3 for display number trap command
0000376C  4E4F                    1000      trap    #15             Display the number in D1
0000376E                          1001      
0000376E                          1002      * Move the cursor back to its previous position
0000376E  3203                    1003      move.w  D3,D1           Move the previous cursor position back to D1
00003770  103C 000B               1004      move.b  #11,D0          Move the byte #11 to D0 for trap command 11          
00003774  4E4F                    1005      trap    #15             Set the cursor position with trap command 11
00003776                          1006      
00003776  4241                    1007      clr     D1              Clear D1 for later use
00003778                          1008      
00003778  4E75                    1009      rts
0000377A                          1010  
0000377A                          1011  *-------------------------------------------------------
0000377A                          1012  *---Game Play (Quest Progress)--------------------------
0000377A                          1013  *------------------------------------------------------- 
0000377A                          1014  gameplay:
0000377A  6100 007A               1015      bsr     endl            Break to a new line
0000377E  0C38 0000 5FF3          1016      CMP.B   #0,GAME_STATE   Check which stage the game is in
00003784  6700 F896               1017      BEQ     pick_role       Branch to the pick role subroutine
00003788  0C38 0005 5FF3          1018      CMP.B   #5,GAME_STATE   Check which stage the game is in
0000378E  6700 007C               1019      BEQ     movement        Branch to the movement subroutine
00003792  0C38 0006 5FF3          1020      CMP.B   #6,GAME_STATE   Check which stage the game is in
00003798  6700 01DA               1021      BEQ     combat          branch to the combat subroutine
0000379C  0C38 0007 5FF3          1022      CMP.B   #7,GAME_STATE   Check which stage the game is in
000037A2  6700 037A               1023      BEQ     shop            branch to the shop subroutine
000037A6  4E75                    1024      rts                     Return from 'gameplay' subroutine
000037A8                          1025  
000037A8                          1026  *-------------------------------------------------------
000037A8                          1027  *------------------Screen Decoration--------------------
000037A8                          1028  *-------------------------------------------------------
000037A8                          1029  decorate:
000037A8  163C 003C               1030      move.b  #60, D3
000037AC  6100 0048               1031      bsr     endl
000037B0                          1032  out:
000037B0  43F9 0000468C           1033      lea     loop_msg,A1
000037B6  103C 000E               1034      move.b  #14,D0
000037BA  4E4F                    1035      trap    #15
000037BC  5343                    1036      sub     #1,D3   decrement loop counter
000037BE  66F0                    1037      bne     out     repeat until D0=0
000037C0  6100 0034               1038      bsr     endl
000037C4  4E75                    1039      rts
000037C6                          1040      
000037C6                          1041  clear_screen: 
000037C6  103C 000B               1042      move.b  #11,D0      clear screen
000037CA  323C FF00               1043      move.w  #$ff00,D1
000037CE  4E4F                    1044      trap    #15
000037D0  4E75                    1045      rts
000037D2                          1046  *-------------------------------------------------------
000037D2                          1047  *------------------------Replay-------------------------
000037D2                          1048  *-------------------------------------------------------
000037D2                          1049  replay:
000037D2  43F9 0000477C           1050      lea     replay_msg,A1   Load the Replay message
000037D8  103C 000E               1051      move.b  #14,D0          Move the number literal 14 to D0 for trap command
000037DC  4E4F                    1052      trap    #15             Display the loaded message
000037DE                          1053      
000037DE  1A3C 0002               1054      move.b  #2,D5           Move the number of input options to D5
000037E2  6100 F93A               1055      bsr     input           Take user input
000037E6  1401                    1056      move.b  D1,D2           Move the input to D2 so it's not trampled by the clear screen
000037E8                          1057      
000037E8  61DC                    1058      bsr     clear_screen    Clear the screen
000037EA                          1059      
000037EA  B43C 0001               1060      cmp.b   #1,D2           Compare the user input against the two options
000037EE  6700 D810               1061      beq     start           Restart if the user enters 1
000037F2  6100 F812               1062      bsr     end             Quit if the user enters 2
000037F6                          1063  
000037F6                          1064  endl:
000037F6  48E7 8040               1065      movem.l D0/A1,-(A7)
000037FA  303C 000E               1066      move    #14,D0
000037FE  43F9 0000442E           1067      lea     crlf,A1
00003804  4E4F                    1068      trap    #15
00003806  4CDF 0201               1069      movem.l (A7)+,D0/A1
0000380A  4E75                    1070      rts
0000380C                          1071          
0000380C                          1072  *-------------------------------------------------------
0000380C                          1073  *----------------------Manage Movement------------------
0000380C                          1074  *-------------------------------------------------------
0000380C                          1075  movement:
0000380C  43F9 00004C50           1076      lea     movement_msg,A1 Load the movement message
00003812  103C 000E               1077      move.b  #14,D0          Move literal 14 for display message trap command
00003816  4E4F                    1078      trap    #15             Display the loaded message
00003818                          1079  
00003818  7A05                    1080      move.l  #5,D5           Move the number 4 to D5 to tell the program how many options there are
0000381A                          1081      
0000381A  6100 F902               1082      bsr     input           branch to the input subroutine
0000381E  6100 000C               1083      bsr     wall_collisions Branch to check wall collisions and movement
00003822                          1084      
00003822  B23C 0005               1085      CMP.B   #5,D1           Check the input against taking a potion
00003826  6700 04DE               1086      BEQ     take_potion     Branch to take a potion
0000382A                          1087      
0000382A  4E75                    1088      rts
0000382C                          1089  
0000382C                          1090  *-------------------------------------------------------
0000382C                          1091  *-------------------Check Wall Collisions---------------
0000382C                          1092  *-------------------------------------------------------
0000382C                          1093  wall_collisions:
0000382C                          1094      *Check collisions in the movement direction
0000382C  B23C 0001               1095      CMP.B   #1,D1       Check the movement direction
00003830  6700 001C               1096      BEQ     move_north  Branch to Display the corridor type
00003834                          1097      
00003834  B23C 0002               1098      CMP.B   #2,D1       Check the movement direction
00003838  6700 005A               1099      BEQ     move_south  Branch to Display the corridor type
0000383C                          1100      
0000383C  B23C 0003               1101      CMP.B   #3,D1       Check the movement direction
00003840  6700 0098               1102      BEQ     move_west   Branch to Display the corridor type
00003844                          1103      
00003844  B23C 0004               1104      CMP.B   #4,D1       Check the movement direction
00003848  6700 00D4               1105      BEQ     move_east   Branch to Display the corridor type
0000384C                          1106      
0000384C  4E75                    1107      rts
0000384E                          1108      
0000384E                          1109  move_north:
0000384E                          1110      *Check if the tile is any of the corridor types with a wall at the top
0000384E  0C16 0002               1111      CMP.B   #2,(A6)
00003852  6700 010E               1112      BEQ     movement_blocked
00003856  0C16 0003               1113      CMP.B   #3,(A6)
0000385A  6700 0106               1114      BEQ     movement_blocked
0000385E  0C16 0006               1115      CMP.B   #6,(A6)
00003862  6700 00FE               1116      BEQ     movement_blocked
00003866  0C16 0007               1117      CMP.B   #7,(A6)
0000386A  6700 00F6               1118      BEQ     movement_blocked
0000386E  0C16 000B               1119      CMP.B   #11,(A6)
00003872  6700 00EE               1120      BEQ     movement_blocked
00003876  0C16 000C               1121      CMP.B   #12,(A6)
0000387A  6700 00E6               1122      BEQ     movement_blocked
0000387E  0C16 000D               1123      CMP.B   #13,(A6)
00003882  6700 00DE               1124      BEQ     movement_blocked
00003886                          1125      
00003886  31CE 5FF6               1126      move.w  A6,PLA_P_POS        Move the player's previous location to a memory address for storage
0000388A  9CFC 0010               1127      sub     #16,A6              Move the player north
0000388E                          1128      
0000388E  6100 04A8               1129      bsr     decrement_torch     Remove one from the player's torch life
00003892                          1130      
00003892  4E75                    1131      rts
00003894                          1132      
00003894                          1133  move_south:
00003894                          1134      *Check if the tile is any of the corridor types with a wall at the bottom
00003894  0C16 0002               1135      CMP.B   #2,(A6)
00003898  6700 00C8               1136      BEQ     movement_blocked
0000389C  0C16 0004               1137      CMP.B   #4,(A6)
000038A0  6700 00C0               1138      BEQ     movement_blocked
000038A4  0C16 0005               1139      CMP.B   #5,(A6)
000038A8  6700 00B8               1140      BEQ     movement_blocked
000038AC  0C16 0009               1141      CMP.B   #9,(A6)
000038B0  6700 00B0               1142      BEQ     movement_blocked
000038B4  0C16 000B               1143      CMP.B   #11,(A6)
000038B8  6700 00A8               1144      BEQ     movement_blocked
000038BC  0C16 000D               1145      CMP.B   #13,(A6)
000038C0  6700 00A0               1146      BEQ     movement_blocked
000038C4  0C16 000E               1147      CMP.B   #14,(A6)
000038C8  6700 0098               1148      BEQ     movement_blocked
000038CC                          1149      
000038CC  31CE 5FF6               1150      move.w  A6,PLA_P_POS        Move the player's previous location to a memory address for storage
000038D0  DCFC 0010               1151      add     #16,A6              Move the player south
000038D4                          1152      
000038D4  6100 0462               1153      bsr     decrement_torch     Remove one from the player's torch life
000038D8                          1154      
000038D8  4E75                    1155      rts
000038DA                          1156  
000038DA                          1157  move_west:
000038DA                          1158      *Check if the tile is any of the corridor types with a wall to the left
000038DA  0C16 0001               1159      CMP.B   #1,(A6)
000038DE  6700 0082               1160      BEQ     movement_blocked
000038E2  0C16 0003               1161      CMP.B   #3,(A6)
000038E6  6700 007A               1162      BEQ     movement_blocked
000038EA  0C16 0004               1163      CMP.B   #4,(A6)
000038EE  6700 0072               1164      BEQ     movement_blocked
000038F2  0C16 0008               1165      CMP.B   #8,(A6)
000038F6  6700 006A               1166      BEQ     movement_blocked
000038FA  0C16 000B               1167      CMP.B   #11,(A6)
000038FE  6700 0062               1168      BEQ     movement_blocked
00003902  0C16 000C               1169      CMP.B   #12,(A6)
00003906  6700 005A               1170      BEQ     movement_blocked
0000390A  0C16 000E               1171      CMP.B   #14,(A6)
0000390E  6700 0052               1172      BEQ     movement_blocked
00003912                          1173      
00003912  31CE 5FF6               1174      move.w  A6,PLA_P_POS        Move the player's previous location to a memory address for storage
00003916  534E                    1175      sub     #1,A6               Move the player west
00003918                          1176      
00003918  6100 041E               1177      bsr     decrement_torch     Remove one from the player's torch life
0000391C                          1178      
0000391C  4E75                    1179      rts
0000391E                          1180      
0000391E                          1181  move_east:
0000391E                          1182      *Check if the tile is any of the corridor types with a wall to the right
0000391E  0C16 0001               1183      CMP.B   #1,(A6)
00003922  6700 003E               1184      BEQ     movement_blocked
00003926  0C16 0005               1185      CMP.B   #5,(A6)
0000392A  6700 0036               1186      BEQ     movement_blocked
0000392E  0C16 0006               1187      CMP.B   #6,(A6)
00003932  6700 002E               1188      BEQ     movement_blocked
00003936  0C16 000A               1189      CMP.B   #10,(A6)
0000393A  6700 0026               1190      BEQ     movement_blocked
0000393E  0C16 000C               1191      CMP.B   #12,(A6)
00003942  6700 001E               1192      BEQ     movement_blocked
00003946  0C16 000D               1193      CMP.B   #13,(A6)
0000394A  6700 0016               1194      BEQ     movement_blocked
0000394E  0C16 000E               1195      CMP.B   #14,(A6)
00003952  6700 000E               1196      BEQ     movement_blocked
00003956                          1197      
00003956  31CE 5FF6               1198      move.w  A6,PLA_P_POS        Move the player's previous location to a memory address for storage
0000395A  524E                    1199      add     #1,A6               Move the player east
0000395C                          1200      
0000395C  6100 03DA               1201      bsr     decrement_torch     Remove one from the player's torch life
00003960                          1202      
00003960  4E75                    1203      rts
00003962                          1204  
00003962                          1205  movement_blocked:
00003962  43F9 00004CE2           1206      lea     movement_blocked_msg,A1 Load the message
00003968  103C 000E               1207      move.b  #14,D0                  Move the trap command to display a message
0000396C  4E4F                    1208      trap    #15                     Display the movement blocked message
0000396E  6100 0362               1209      bsr     press_continue          Pause the game until a key is pressed
00003972                          1210      
00003972  4E75                    1211      rts                             Return from the subroutine
00003974                          1212      
00003974                          1213  *-------------------------------------------------------
00003974                          1214  *---------------------Manage Combat---------------------
00003974                          1215  *-------------------------------------------------------
00003974                          1216  combat:
00003974  6100 FE80               1217      bsr endl                Break to a new line
00003978                          1218  
00003978  43F9 00004D71           1219      lea     combat_msg,A1   Load the combat message
0000397E  103C 000E               1220      move.b  #14,D0          Move literal 14 for display message trap command
00003982  4E4F                    1221      trap    #15             Display the loaded message
00003984                          1222  
00003984  7A05                    1223      move.l  #5,D5           Move the number 4 to D5 to tell the program how many options there are
00003986  6100 F796               1224      bsr     input           branch to the input subroutine
0000398A                          1225      
0000398A  B23C 0001               1226      CMP.B   #1,D1           Compare input with number literal 1
0000398E  6700 0024               1227      BEQ     block_counter   Branch to block/counter subroutine
00003992  B23C 0002               1228      CMP.B   #2,D1           Compare input with number literal 2
00003996  6700 0036               1229      BEQ     cast_magic      Branch to cast magic subroutine
0000399A  B23C 0003               1230      CMP.B   #3,D1           Compare input with number literal 3
0000399E  6700 0048               1231      BEQ     melee_attack    Branch to melee subroutine
000039A2  B23C 0004               1232      CMP.B   #4,D1           Compare input with number literal 4
000039A6  6700 005A               1233      BEQ     try_run         Branch to try run subroutine
000039AA  B23C 0005               1234      CMP.B   #5,D1           Compare input with number literal 5
000039AE  6700 0356               1235      BEQ     take_potion     Branch to take potion subroutine
000039B2                          1236      
000039B2  4E75                    1237      rts
000039B4                          1238      
000039B4                          1239  block_counter:
000039B4  6100 0334               1240      bsr     random_number       Get a random number 1-100
000039B8                          1241      
000039B8  B47C 0021               1242      CMP.W   #33,D2              Compare random with #33
000039BC  6F00 008E               1243      BLE     both_block          Enemy tries to block - attack failed
000039C0  B47C 0042               1244      CMP.W   #66,D2              Compare random with #66
000039C4  6F00 0120               1245      BLE     hit_by_magic        Enemy casts magic - player takes damage      
000039C8  6E00 00E8               1246      BGT     hit_against_melee   Enemy tried to lunge - enemy takes damage
000039CC                          1247      
000039CC  4E75                    1248      rts                         Return from subroutine
000039CE                          1249      
000039CE                          1250  cast_magic:
000039CE  6100 031A               1251      bsr     random_number       Get a random number 1-100
000039D2                          1252  
000039D2  B47C 0021               1253      CMP.W   #33,D2              Compare random with #33
000039D6  6F00 00AA               1254      BLE     hit_against_block    Enemy blocks - enemy takes damage
000039DA  B47C 0042               1255      CMP.W   #66,D2              Compare random with #66
000039DE  6F00 007E               1256      BLE     both_cast_magic     Enemy casts magic - attack fails     
000039E2  6E00 011E               1257      BGT     hit_by_melee        Enemy lunges forward - player takes damage
000039E6                          1258      
000039E6  4E75                    1259      rts                         Return from subroutine
000039E8                          1260  
000039E8                          1261  melee_attack:
000039E8  6100 0300               1262      bsr     random_number       Get a random number 1-100
000039EC                          1263  
000039EC  B47C 0021               1264      CMP.W   #33,D2              Compare random with #33
000039F0  6F00 00D8               1265      BLE     hit_by_counter      Enemy blocks and counters - player takes damage
000039F4  B47C 0042               1266      CMP.W   #66,D2              Compare random with #66
000039F8  6F00 00A0               1267      BLE     hit_against_magic   Enemy casts magic - player takes damage     
000039FC  6E00 0072               1268      BGT     both_melee          Enemy lunges forward - attack fails
00003A00                          1269      
00003A00  4E75                    1270      rts                         Return from subroutine
00003A02                          1271  
00003A02                          1272  try_run:
00003A02  6100 02E6               1273      bsr     random_number       Get a random number
00003A06                          1274      
00003A06  B47C 0028               1275      CMP.W   #40,D2              Compare the random number to 40
00003A0A  6D00 0006               1276      BLT     escape_attack       If the random number is less than 40 the player escapes
00003A0E  6C00 0020               1277      BGE     fail_escape         If the random number is more than 40 the player gets damaged
00003A12                          1278      
00003A12                          1279  escape_attack:
00003A12  3638 5FF6               1280      move.w  PLA_P_POS,D3    Move the player's previous position to D3 to avoid treating it as a negative number
00003A16  2C43                    1281      move.l  D3,A6           Move the player to their position before entering the battle
00003A18  11FC 0005 5FF3          1282      move.b  #5,GAME_STATE   Switch game state
00003A1E                          1283      
00003A1E  43F9 00004DD3           1284      lea     escape_msg,A1   Load escape message
00003A24  103C 000E               1285      move.b  #14,D0          Move literal for trap command
00003A28  4E4F                    1286      trap    #15             Trap 15 to display messgae
00003A2A                          1287      
00003A2A  6100 02A6               1288      bsr     press_continue  Pause until the player presses to continue
00003A2E                          1289      
00003A2E  4E75                    1290      rts                     Return from subroutine
00003A30                          1291      
00003A30                          1292  fail_escape:
00003A30  43F9 00004DEE           1293      lea     fail_escape_msg,A1  Load fail escape message
00003A36  103C 000E               1294      move.b  #14,D0              Move literal for trap command
00003A3A  4E4F                    1295      trap    #15                 Trap 15 to display message
00003A3C                          1296      
00003A3C  524D                    1297      add.w   #DAMAGE,A5           Move the enemy pointer to its damage value
00003A3E  1A15                    1298      move.b  (A5),D5             Store the damage value in D5
00003A40  534D                    1299      sub.w   #DAMAGE,A5           Move the enemy pointer back to the enemy health/root
00003A42  9B38 5FF0               1300      sub.b   D5,PLAYER           Remove the enemy's damage from the player's health
00003A46                          1301      
00003A46  6100 028A               1302      bsr     press_continue      Pause until the player presses to continue
00003A4A  4E75                    1303      rts
00003A4C                          1304      
00003A4C                          1305  both_block:
00003A4C  103C 000E               1306      move.b  #14,D0
00003A50  43F9 00004E29           1307      lea     both_block_msg,A1
00003A56  4E4F                    1308      trap    #15
00003A58                          1309      
00003A58  6100 0278               1310      bsr     press_continue
00003A5C  4E75                    1311      rts
00003A5E                          1312      
00003A5E                          1313  both_cast_magic:
00003A5E  103C 000E               1314      move.b  #14,D0
00003A62  43F9 00004E4E           1315      lea     both_cast_magic_msg,A1
00003A68  4E4F                    1316      trap    #15
00003A6A                          1317      
00003A6A  6100 0266               1318      bsr     press_continue
00003A6E  4E75                    1319      rts
00003A70                          1320  
00003A70                          1321  both_melee:
00003A70  103C 000E               1322      move.b  #14,D0
00003A74  43F9 00004EA3           1323      lea     both_melee_msg,A1
00003A7A  4E4F                    1324      trap    #15  
00003A7C                          1325      
00003A7C  6100 0254               1326      bsr     press_continue
00003A80  4E75                    1327      rts
00003A82                          1328  
00003A82                          1329  hit_against_block:
00003A82  103C 000E               1330      move.b  #14,D0
00003A86  43F9 00004EEC           1331      lea     hit_against_block_msg,A1
00003A8C  4E4F                    1332      trap    #15  
00003A8E                          1333      
00003A8E  1A38 5FF1               1334      move.b  PLA_DAMAGE,D5       Store the player damage value in D5
00003A92  9B15                    1335      sub.b   D5,(A5)           Remove the player's damage from the enemy's health
00003A94                          1336      
00003A94  6100 023C               1337      bsr     press_continue
00003A98  4E75                    1338      rts
00003A9A                          1339  
00003A9A                          1340  hit_against_magic:
00003A9A  103C 000E               1341      move.b  #14,D0
00003A9E  43F9 00004F34           1342      lea     hit_against_magic_msg,A1
00003AA4  4E4F                    1343      trap    #15
00003AA6                          1344      
00003AA6  1A38 5FF1               1345      move.b  PLA_DAMAGE,D5       Store the player damage value in D5
00003AAA  9B15                    1346      sub.b   D5,(A5)           Remove the player's damage from the enemy's health
00003AAC                          1347      
00003AAC  6100 0224               1348      bsr     press_continue
00003AB0  4E75                    1349      rts
00003AB2                          1350  
00003AB2                          1351  hit_against_melee:
00003AB2  103C 000E               1352      move.b  #14,D0
00003AB6  43F9 00004F98           1353      lea     hit_against_melee_msg,A1
00003ABC  4E4F                    1354      trap    #15
00003ABE                          1355      
00003ABE  1A38 5FF1               1356      move.b  PLA_DAMAGE,D5       Store the player damage value in D5
00003AC2  9B15                    1357      sub.b   D5,(A5)           Remove the player's damage from the enemy's health
00003AC4                          1358      
00003AC4  6100 020C               1359      bsr     press_continue
00003AC8  4E75                    1360      rts
00003ACA                          1361  
00003ACA                          1362  hit_by_counter:
00003ACA  103C 000E               1363      move.b  #14,D0
00003ACE  43F9 00004FEE           1364      lea     hit_by_counter_msg,A1
00003AD4  4E4F                    1365      trap    #15  
00003AD6                          1366      
00003AD6  524D                    1367      add.w   #DAMAGE,A5           Move the enemy pointer to its damage value
00003AD8  1A15                    1368      move.b  (A5),D5             Store the damage value in D5
00003ADA  534D                    1369      sub.w   #DAMAGE,A5           Move the enemy pointer back to the enemy health/root
00003ADC  9B38 5FF0               1370      sub.b   D5,PLAYER           Remove the enemy's damage from the player's health
00003AE0                          1371      
00003AE0  6100 01F0               1372      bsr     press_continue
00003AE4  4E75                    1373      rts
00003AE6                          1374  
00003AE6                          1375  hit_by_magic:
00003AE6  103C 000E               1376      move.b  #14,D0
00003AEA  43F9 00005051           1377      lea     hit_by_magic_msg,A1
00003AF0  4E4F                    1378      trap    #15  
00003AF2                          1379      
00003AF2  524D                    1380      add.w   #DAMAGE,A5           Move the enemy pointer to its damage value
00003AF4  1A15                    1381      move.b  (A5),D5             Store the damage value in D5
00003AF6  534D                    1382      sub.w   #DAMAGE,A5           Move the enemy pointer back to the enemy health/root
00003AF8  9B38 5FF0               1383      sub.b   D5,PLAYER           Remove the enemy's damage from the player's health
00003AFC                          1384      
00003AFC  6100 01D4               1385      bsr     press_continue
00003B00  4E75                    1386      rts
00003B02                          1387  
00003B02                          1388  hit_by_melee:
00003B02  103C 000E               1389      move.b  #14,D0
00003B06  43F9 000050C1           1390      lea     hit_by_melee_msg,A1
00003B0C  4E4F                    1391      trap    #15
00003B0E                          1392      
00003B0E  524D                    1393      add.w   #DAMAGE,A5           Move the enemy pointer to its damage value
00003B10  1A15                    1394      move.b  (A5),D5             Store the damage value in D5
00003B12  534D                    1395      sub.w   #DAMAGE,A5           Move the enemy pointer back to the enemy health/root
00003B14  9B38 5FF0               1396      sub.b   D5,PLAYER           Remove the enemy's damage from the player's health
00003B18                          1397      
00003B18  6100 01B8               1398      bsr     press_continue
00003B1C  4E75                    1399      rts
00003B1E                          1400  
00003B1E                          1401  *-------------------------------------------------------
00003B1E                          1402  *----------------------Shop State-----------------------
00003B1E                          1403  *-------------------------------------------------------
00003B1E                          1404  shop:
00003B1E  43F9 000052EF           1405      lea     shop_msg,A1     Load the shop message
00003B24  103C 000E               1406      move.b  #14,D0          Move the number literal 14 to D0 for trap command
00003B28  4E4F                    1407      trap    #15             Display the loaded message
00003B2A                          1408  
00003B2A  7A05                    1409      move.l  #5,D5           Move the number 4 to D5 to tell the program how many options there are
00003B2C  6100 F5F0               1410      bsr     input           branch to the input subroutine
00003B30                          1411      
00003B30  B23C 0001               1412      CMP.B   #1,D1           Compare input with number literal 1
00003B34  6700 0024               1413      BEQ     buy_potion      Branch to buy potion subroutine
00003B38  B23C 0002               1414      CMP.B   #2,D1           Compare input with number literal 2
00003B3C  6700 0052               1415      BEQ     buy_key         Branch to buy key subroutine
00003B40  B23C 0003               1416      CMP.B   #3,D1           Compare input with number literal 3
00003B44  6700 0082               1417      BEQ     buy_torch       Branch to buy torch subroutine
00003B48  B23C 0004               1418      CMP.B   #4,D1           Compare input with number literal 4
00003B4C  6700 00B4               1419      BEQ     upgrade_dmg     Branch to buy damage upgrade subroutine
00003B50  B23C 0005               1420      CMP.B   #5,D1           Compare input with number literal 5
00003B54  6700 00E4               1421      BEQ     leave_shop      Branch to leave shop subroutine
00003B58                          1422  
00003B58  4E75                    1423      rts                     Return from subroutine
00003B5A                          1424      
00003B5A                          1425  buy_potion:
00003B5A  0C38 0005 5FF8          1426      CMP.B   #POTION_PRICE,PLA_GOLD  Check if the player has money for a potion
00003B60  6D00 00FA               1427      BLT     no_money                If not enough money branch to no money subroutine
00003B64                          1428      
00003B64  544D                    1429      add.w   #S_POTIONS,A5           Move the shop pointer to the potions
00003B66  0C15 0000               1430      CMP.B   #0,(A5)                 Check that the shop still has potions left
00003B6A  6F00 0106               1431      BLE     no_shop_potions         If no potions left branch to no shop potions subroutine
00003B6E                          1432      
00003B6E  5B38 5FF8               1433      sub.b   #POTION_PRICE,PLA_GOLD  Remove the potion price from the player's gold
00003B72  5315                    1434      sub.b   #1,(A5)                 Remove one potion from the shop
00003B74  5238 5FF9               1435      add.b   #1,PLA_POTIONS          Add one potion to the player's inventory
00003B78                          1436      
00003B78  554D                    1437      sub.w   #S_POTIONS,A5           Move the shop pointer back to root
00003B7A                          1438      
00003B7A  6100 FC7A               1439      bsr     endl                    Break to new line
00003B7E                          1440      
00003B7E  43F9 00005381           1441      lea     buy_item_msg,A1         Load the buy item message into A1
00003B84  103C 000E               1442      move.b  #14,D0                  Move the number literal 14 to D0 for trap command
00003B88  4E4F                    1443      trap    #15                     Display the loaded message
00003B8A                          1444      
00003B8A  6100 0146               1445      bsr     press_continue          Pause for user input
00003B8E                          1446      
00003B8E  4E75                    1447      rts                             Return from subroutine
00003B90                          1448      
00003B90                          1449  buy_key:
00003B90  0C38 000F 5FF8          1450      CMP.B   #KEY_PRICE,PLA_GOLD     Check if the player has money for a key
00003B96  6D00 00C4               1451      BLT     no_money                If not enough money branch to no money subroutine
00003B9A                          1452      
00003B9A  564D                    1453      add.w   #S_KEYS,A5              Move the shop pointer to the keys
00003B9C  0C15 0000               1454      CMP.B   #0,(A5)                 Check that the shop still has keys left
00003BA0  6F00 00E8               1455      BLE     no_shop_keys            If no keys left branch to no shop keys subroutine
00003BA4                          1456      
00003BA4  0438 000F 5FF8          1457      sub.b   #KEY_PRICE,PLA_GOLD     Remove the key price from the player's gold
00003BAA  5315                    1458      sub.b   #1,(A5)                 Remove one key from the shop
00003BAC  5238 5FFA               1459      add.b   #1,PLA_KEYS             Add one key to the player's inventory
00003BB0                          1460      
00003BB0  574D                    1461      sub.w   #S_KEYS,A5              Move the shop pointer back to root
00003BB2                          1462      
00003BB2  6100 FC42               1463      bsr     endl                    Break to new line
00003BB6                          1464      
00003BB6  43F9 00005381           1465      lea     buy_item_msg,A1         Load the buy item message into A1
00003BBC  103C 000E               1466      move.b  #14,D0                  Move the number literal 14 to D0 for trap command
00003BC0  4E4F                    1467      trap    #15                     Display the loaded message
00003BC2                          1468      
00003BC2  6100 010E               1469      bsr     press_continue          Pause for user input
00003BC6                          1470      
00003BC6  4E75                    1471      rts                             Return from subroutine
00003BC8                          1472      
00003BC8                          1473  buy_torch:
00003BC8  0C38 000A 5FF8          1474      CMP.B   #TORCH_PRICE,PLA_GOLD   Check if the player has money for a torch
00003BCE  6D00 008C               1475      BLT     no_money                If not enough money branch to no money subroutine
00003BD2                          1476      
00003BD2  584D                    1477      add.w   #S_TORCHES,A5           Move the shop pointer to the torches
00003BD4  0C15 0000               1478      CMP.B   #0,(A5)                 Check that the shop still has torches left
00003BD8  6F00 00C8               1479      BLE     no_shop_torches         If no torches left branch to no shop torches subroutine
00003BDC                          1480      
00003BDC  0438 000A 5FF8          1481      sub.b   #TORCH_PRICE,PLA_GOLD   Remove the torch price from the player's gold
00003BE2  5315                    1482      sub.b   #1,(A5)                 Remove one torch from the shop
00003BE4  0638 000F 5FFB          1483      add.b   #LIFE_PER_TORCH,PLA_TORCH           Add ten to the player's torches life
00003BEA                          1484      
00003BEA  594D                    1485      sub.w   #S_TORCHES,A5           Move the shop pointer back to root
00003BEC                          1486      
00003BEC  6100 FC08               1487      bsr     endl                    Break to new line
00003BF0                          1488      
00003BF0  43F9 00005381           1489      lea     buy_item_msg,A1         Load the buy item message into A1
00003BF6  103C 000E               1490      move.b  #14,D0                  Move the number literal 14 to D0 for trap command
00003BFA  4E4F                    1491      trap    #15                     Display the loaded message
00003BFC                          1492      
00003BFC  6100 00D4               1493      bsr     press_continue          Pause for user input
00003C00                          1494      
00003C00  4E75                    1495      rts                             Return from subroutine
00003C02                          1496      
00003C02                          1497  upgrade_dmg:
00003C02  0C38 0014 5FF8          1498      CMP.B   #DAMAGE_UP_PRICE,PLA_GOLD   Check if the player has money for a damage upgrade
00003C08  6D00 0052               1499      BLT     no_money                    If not enough money branch to no money subroutine
00003C0C                          1500      
00003C0C  5A4D                    1501      add.w   #S_DAMAGE_IN,A5         Move the shop pointer to the damage upgrades
00003C0E  0C15 0000               1502      CMP.B   #0,(A5)                 Check that the shop still has damage upgrades left
00003C12  6F00 00A6               1503      BLE     no_shop_damage_up       If no damage upgrades left branch to no shop torches subroutine
00003C16                          1504      
00003C16  0438 0014 5FF8          1505      sub.b   #DAMAGE_UP_PRICE,PLA_GOLD   Remove the damage upgrade price from the player's gold
00003C1C  5315                    1506      sub.b   #1,(A5)                     Remove one damage upgrade from the shop
00003C1E  5238 5FF1               1507      add.b   #1,PLA_DAMAGE               Add one to the player's damage value
00003C22                          1508      
00003C22  5B4D                    1509      sub.w   #S_DAMAGE_IN,A5         Move the shop pointer back to root
00003C24                          1510      
00003C24  6100 FBD0               1511      bsr     endl                    Break to new line
00003C28                          1512          
00003C28  43F9 00005381           1513      lea     buy_item_msg,A1         Load the buy item message into A1
00003C2E  103C 000E               1514      move.b  #14,D0                  Move the number literal 14 to D0 for trap command
00003C32  4E4F                    1515      trap    #15                     Display the loaded message
00003C34                          1516      
00003C34  6100 009C               1517      bsr     press_continue          Pause for user input
00003C38                          1518      
00003C38  4E75                    1519      rts                             Return from subroutine
00003C3A                          1520      
00003C3A                          1521  leave_shop:
00003C3A  6100 FBBA               1522      bsr     endl                Break to new line
00003C3E                          1523  
00003C3E  3638 5FF6               1524      move.w  PLA_P_POS,D3        Move the player's previous position to D3 to avoid treating it as a negative number
00003C42  2C43                    1525      move.l  D3,A6               Move the player to their position before entering the shop
00003C44  11FC 0005 5FF3          1526      move.b  #5,GAME_STATE       Switch game state to movement
00003C4A                          1527      
00003C4A  43F9 0000535B           1528      lea     leave_shop_msg,A1   Load escape message
00003C50  103C 000E               1529      move.b  #14,D0              Move literal for trap command
00003C54  4E4F                    1530      trap    #15                 Trap 15 to display messgae
00003C56                          1531      
00003C56  6100 007A               1532      bsr     press_continue      Pause until the player presses to continue
00003C5A  4E75                    1533      rts                         Return from subroutine
00003C5C                          1534      
00003C5C                          1535  no_money:
00003C5C  6100 FB98               1536      bsr     endl            New line
00003C60                          1537      
00003C60  43F9 000053AF           1538      lea     no_money_msg,A1 Load the no money message
00003C66  103C 000E               1539      move.b  #14,D0          Move the number literal 14 to D0 for trap command
00003C6A  4E4F                    1540      trap    #15             Display the loaded message
00003C6C                          1541      
00003C6C  6100 0064               1542      bsr     press_continue  Wait for player input
00003C70  4E75                    1543      rts                     Return from subroutine
00003C72                          1544      
00003C72                          1545  no_shop_potions:
00003C72  6100 FB82               1546      bsr     endl            New line
00003C76                          1547  
00003C76  43F9 000053CF           1548      lea     no_item_msg,A1  Load the no money message
00003C7C  103C 000E               1549      move.b  #14,D0          Move the number literal 14 to D0 for trap command
00003C80  4E4F                    1550      trap    #15             Display the loaded message
00003C82  554D                    1551      sub.w   #S_POTIONS,A5   Move the shop pointer back to root
00003C84                          1552      
00003C84  6100 004C               1553      bsr     press_continue  Wait for player input
00003C88  4E75                    1554      rts                     Return from subroutine
00003C8A                          1555      
00003C8A                          1556  no_shop_keys:
00003C8A  6100 FB6A               1557      bsr     endl            New line
00003C8E                          1558  
00003C8E  43F9 000053CF           1559      lea     no_item_msg,A1  Load the no money message
00003C94  103C 000E               1560      move.b  #14,D0          Move the number literal 14 to D0 for trap command
00003C98  4E4F                    1561      trap    #15             Display the loaded message
00003C9A  574D                    1562      sub.w   #S_KEYS,A5      Move the shop pointer back to root
00003C9C                          1563      
00003C9C  6100 0034               1564      bsr     press_continue  Wait for player input
00003CA0  4E75                    1565      rts                     Return from subroutine
00003CA2                          1566      
00003CA2                          1567  no_shop_torches:
00003CA2  6100 FB52               1568      bsr     endl            New line
00003CA6                          1569  
00003CA6  43F9 000053CF           1570      lea     no_item_msg,A1  Load the no money message
00003CAC  103C 000E               1571      move.b  #14,D0          Move the number literal 14 to D0 for trap command
00003CB0  4E4F                    1572      trap    #15             Display the loaded message
00003CB2  594D                    1573      sub.w   #S_TORCHES,A5   Move the shop pointer back to root
00003CB4                          1574      
00003CB4  6100 001C               1575      bsr     press_continue  Wait for player input
00003CB8  4E75                    1576      rts                     Return from subroutine
00003CBA                          1577  
00003CBA                          1578  no_shop_damage_up:
00003CBA  6100 FB3A               1579      bsr     endl            New line
00003CBE                          1580  
00003CBE  43F9 000053CF           1581      lea     no_item_msg,A1  Load the no money message
00003CC4  103C 000E               1582      move.b  #14,D0          Move the number literal 14 to D0 for trap command
00003CC8  4E4F                    1583      trap    #15             Display the loaded message
00003CCA  5B4D                    1584      sub.w   #S_DAMAGE_IN,A5 Move the shop pointer back to root
00003CCC                          1585      
00003CCC  6100 0004               1586      bsr     press_continue  Wait for player input
00003CD0  4E75                    1587      rts                     Return from subroutine
00003CD2                          1588  
00003CD2                          1589  *-------------------------------------------------------
00003CD2                          1590  *-------------------Misc Subroutines--------------------
00003CD2                          1591  *-------------------------------------------------------
00003CD2                          1592  press_continue:
00003CD2  6100 FB22               1593      bsr     endl
00003CD6                          1594  
00003CD6  43F9 00004CFD           1595      lea     continue_msg,A1 Load message into A1
00003CDC  103C 000E               1596      move.b  #14,D0          Move the trap command to display a message
00003CE0  4E4F                    1597      trap    #15             display the "press any ket to continue" text
00003CE2                          1598      
00003CE2  103C 0004               1599      move.b  #4,D0           Move the trap command to take input
00003CE6  4E4F                    1600      trap    #15             take input to freeze the game
00003CE8  4E75                    1601      rts                     Return from the 'press continue' subroutine
00003CEA                          1602      
00003CEA                          1603  random_number:              *Psuedo random number generator, courtesy of Pdraig
00003CEA  103C 0008               1604      move.b  #8,D0
00003CEE  4E4F                    1605      trap    #15
00003CF0  C2BC 005FFFFF           1606      and.l   #$5FFFFF,d1     prevent overflow in divu
00003CF6  82FC 0064               1607      divu    #100,D1         time count / 100
00003CFA  4841                    1608      swap    D1              swap upper and lower words of D1 to put remainder in low word
00003CFC  5241                    1609      addq.w  #1,D1           d1.w contains number from 1 to 100
00003CFE  3401                    1610      move    D1,D2           d2 = d1
00003D00  4281                    1611      clr.l   D1
00003D02                          1612      
00003D02  4E75                    1613      rts                     Returns from random generation subroutine
00003D04                          1614      
00003D04                          1615  return:   *Subroutine to branch to to break out of a subroutine when a condition is met
00003D04  4E75                    1616      rts
00003D06                          1617      
00003D06                          1618  take_potion:
00003D06  0C38 0000 5FF9          1619      CMP.B   #0,PLA_POTIONS      Check if the player has potions to drink
00003D0C  6F00 001A               1620      BLE     no_potions          If the potions are zero or below branch to no_potions
00003D10                          1621      
00003D10  5638 5FF0               1622      add.b   #3,PLAYER           Add 3 to the player's health
00003D14  5338 5FF9               1623      sub.b   #1,PLA_POTIONS      Remove one potion
00003D18                          1624      
00003D18  43F9 00005269           1625      lea     take_potion_msg,A1  Load the take potion message
00003D1E  103C 000E               1626      move.b  #14,D0              Move the number literal 14 to D0 for trap command
00003D22  4E4F                    1627      trap    #15                 Display the loaded message
00003D24                          1628      
00003D24  61AC                    1629      bsr     press_continue      Wait for player input
00003D26                          1630      
00003D26  4E75                    1631      rts                         Return from subroutine
00003D28                          1632  
00003D28                          1633  no_potions:
00003D28  43F9 000052A3           1634      lea     no_potions_msg,A1   Load the no potions message
00003D2E  103C 000E               1635      move.b  #14,D0              Move the number literal 14 to D0 for trap command
00003D32  4E4F                    1636      trap    #15                 Display the loaded message
00003D34                          1637      
00003D34  619C                    1638      bsr     press_continue      Wait for player input
00003D36                          1639      
00003D36  4E75                    1640      rts                         Return from subroutine
00003D38                          1641      
00003D38                          1642  decrement_torch:
00003D38  0C38 0000 5FFB          1643      CMP.B   #0,PLA_TORCH    Compare the torch life to 0
00003D3E  6FC4                    1644      BLE     return          If it's less than or equalt to zero, return
00003D40  5338 5FFB               1645      sub.b   #1,PLA_TORCH    Decrement by one if it's above zero
00003D44  4E75                    1646      rts                     Return from subroutine
00003D46                          1647      
00003D46                          1648  change_font_colour:        * Changes the font colour to the colour loaded in D1
00003D46  103C 0015               1649      move.b  #21,D0      Move #21 to D0 for trap command 21
00003D4A  243C 01090000           1650      move.l  #FONT,D2    Move the font to D2
00003D50  4E4F                    1651      trap    #15         Set the colour
00003D52  4281                    1652      clr.l   D1          Clear D1 for later use
00003D54  4282                    1653      clr.l   D2          Clear D2 for later use
00003D56  4E75                    1654      rts                 Return from subroutine
00003D58                          1655      
00003D58                          1656  *-------------------------------------------------------
00003D58                          1657  *----------------------Draw loop------------------------
00003D58                          1658  *-------------------------------------------------------
00003D58                          1659  draw_loop:
00003D58  45F9 00008080           1660      lea     MAP_START_POINT,A2     Load starting memory location into A7
00003D5E  1C3C 0000               1661      move.b  #0,D6           Data register used for rows
00003D62  1E3C 0000               1662      move.b  #0,D7           Data register used for columns
00003D66  7200                    1663      move.l  #0,D1           Clear the D1 data register
00003D68                          1664      
00003D68  6100 0004               1665      bsr     loop_rows       Loop for every row
00003D6C  4E75                    1666      rts
00003D6E                          1667      
00003D6E                          1668  loop_rows:
00003D6E  BC7C 000F               1669      CMP     #MAP_LENGTH,D6          Check the rows don't go out of bounds
00003D72  6E90                    1670      BGT     return          If the rows are greater than 22 end the loop
00003D74                          1671      
00003D74  1E3C 0000               1672      move.b  #0,D7           Reset to column 0
00003D78  6100 000A               1673      bsr     loop_columns    Loop for every column
00003D7C                          1674      
00003D7C  5206                    1675      add.b   #1,D6           Add to the rows
00003D7E                          1676      
00003D7E  6100 FA76               1677      bsr     endl            Break to the next line
00003D82  60EA                    1678      bra     loop_rows       Loop through the rows again
00003D84                          1679      
00003D84                          1680  loop_columns:
00003D84  BE3C 000F               1681      CMP.B   #15,D7              Check the rows don't go out of bounds
00003D88  6E00 FF7A               1682      BGT     return              If the rows are greater than 22 end the loop
00003D8C                          1683      
00003D8C  6100 001C               1684      bsr     draw_tile           Draw the current tile
00003D90  6100 00C2               1685      bsr     check_for_loot_piles Draw the loot piles if there is one on the current tile
00003D94  6100 013C               1686      bsr     check_for_player    Draw the player in the current tile if they're there
00003D98  6100 0180               1687      bsr     check_for_enemies   Draw an enemy in the current tile if they is one there
00003D9C  6100 025E               1688      bsr     check_for_win_point Draw the win point in the current tile if it's there
00003DA0  6100 01EE               1689      bsr     check_for_shops     Draw a shop in the current tile if there is one
00003DA4                          1690      
00003DA4  5207                    1691      add.b   #1,D7               Add to the column count
00003DA6  524A                    1692      add     #1,A2               Move to the next memory location
00003DA8  60DA                    1693      bra     loop_columns        Loop the columns again
00003DAA                          1694      
00003DAA                          1695  *-------------------------------------------------------
00003DAA                          1696  *----------------------Draw tile------------------------
00003DAA                          1697  *-------------------------------------------------------
00003DAA                          1698  *Draws the tile at the address in the address register A2
00003DAA                          1699  draw_tile:
00003DAA  0C12 00FF               1700      CMP.B   #255,(A2)           Check if the value is undifined
00003DAE  6700 005E               1701      BEQ     draw_blocked_tile   Draw the blank tile
00003DB2                          1702      
00003DB2  0C12 0001               1703      CMP.B   #1,(A2)
00003DB6  6700 0064               1704      BEQ     draw_both_tile
00003DBA  0C12 0003               1705      CMP.B   #3,(A2)
00003DBE  6700 006A               1706      BEQ     draw_left_tile
00003DC2  0C12 0004               1707      CMP.B   #4,(A2)
00003DC6  6700 0062               1708      BEQ     draw_left_tile
00003DCA  0C12 0005               1709      CMP.B   #5,(A2)
00003DCE  6700 0068               1710      BEQ     draw_right_tile
00003DD2  0C12 0006               1711      CMP.B   #6,(A2)
00003DD6  6700 0060               1712      BEQ     draw_right_tile
00003DDA  0C12 0008               1713      CMP.B   #8,(A2)
00003DDE  6700 004A               1714      BEQ     draw_left_tile
00003DE2  0C12 000A               1715      CMP.B   #10,(A2)
00003DE6  6700 0050               1716      BEQ     draw_right_tile
00003DEA  0C12 000B               1717      CMP.B   #11,(A2)
00003DEE  6700 003A               1718      BEQ     draw_left_tile
00003DF2  0C12 000C               1719      CMP.B   #12,(A2)
00003DF6  6700 0024               1720      BEQ     draw_both_tile
00003DFA  0C12 000D               1721      CMP.B   #13,(A2)
00003DFE  6700 0038               1722      BEQ     draw_right_tile
00003E02  0C12 000E               1723      CMP.B   #14,(A2)
00003E06  6700 0014               1724      BEQ     draw_both_tile
00003E0A                          1725      
00003E0A  6000 003A               1726      BRA     draw_blank_tile     Draw the blank tile
00003E0E                          1727      
00003E0E                          1728  draw_blocked_tile:
00003E0E  43F9 00004D2B           1729      lea     blocked_tile,A1
00003E14  103C 000E               1730      move.b  #14,D0
00003E18  4E4F                    1731      trap    #15
00003E1A  4E75                    1732      rts
00003E1C                          1733      
00003E1C                          1734  draw_both_tile:
00003E1C  43F9 00004D1F           1735      lea     both_tile,A1
00003E22  103C 000E               1736      move.b  #14,D0
00003E26  4E4F                    1737      trap    #15
00003E28  4E75                    1738      rts
00003E2A                          1739      
00003E2A                          1740  draw_left_tile:
00003E2A  43F9 00004D23           1741      lea     left_tile,A1
00003E30  103C 000E               1742      move.b  #14,D0
00003E34  4E4F                    1743      trap    #15
00003E36  4E75                    1744      rts
00003E38                          1745      
00003E38                          1746  draw_right_tile:
00003E38  43F9 00004D27           1747      lea     right_tile,A1
00003E3E  103C 000E               1748      move.b  #14,D0
00003E42  4E4F                    1749      trap    #15
00003E44  4E75                    1750      rts
00003E46                          1751      
00003E46                          1752  draw_blank_tile:
00003E46  43F9 00004D1B           1753      lea     blank_tile,A1
00003E4C  103C 000E               1754      move.b  #14,D0
00003E50  4E4F                    1755      trap    #15
00003E52  4E75                    1756      rts
00003E54                          1757  
00003E54                          1758  check_for_loot_piles:
00003E54  4BF8 7000               1759      lea     FIRST_LOOT,A5   Load the memory address of the first loot pile
00003E58  1A3C 0000               1760      move.b  #0,D5           Move the starting loot number to D5
00003E5C  6100 0004               1761      bsr     loop_loot_piles Loop through all loot piles
00003E60  4E75                    1762      rts                     Return from subroutine
00003E62                          1763      
00003E62                          1764  loop_loot_piles:
00003E62  6100 0014               1765      bsr     check_for_loot  Check for a loot pile
00003E66                          1766      
00003E66  BA3C 0002               1767      CMP.B   #ENEMY_MAX,D5   Compare the enemy number with the maximum loot number
00003E6A  6C00 FE98               1768      BGE     return          Return from the loop if the current loot number is greater than or equal to the max
00003E6E                          1769      
00003E6E  5205                    1770      add.b   #1,D5           Add to the current loot number
00003E70  DAFC 0010               1771      add.w   #16,A5          Add to the current loot pointer to move to the next loot pile
00003E74  5B4D                    1772      sub.w   #L_ACTIVE,A5    Move to the root
00003E76  60EA                    1773      bra     loop_loot_piles Keep looping the loot piles
00003E78                          1774      
00003E78                          1775  check_for_loot:
00003E78  5A4D                    1776      add.w   #L_ACTIVE,A5    Move to the active state
00003E7A  0C15 0000               1777      CMP.B   #0,(A5)         Return if the loot is not active
00003E7E  6700 FE84               1778      BEQ     return
00003E82  5B4D                    1779      sub.w   #L_ACTIVE,A5    Move to the root
00003E84                          1780  
00003E84  3615                    1781      move.w  (A5),D3         Move the enemy coordinates into data register D3 for large-value comparisons
00003E86  B5C3                    1782      CMP.L   D3,A2           Check if the enemy is in the current position
00003E88  6700 0006               1783      BEQ     draw_loot       Draw the enemy if it is
00003E8C  5A4D                    1784      add.w   #L_ACTIVE,A5    Move to the active state
00003E8E  4E75                    1785      rts                     Return if the enemy is not in the current position
00003E90                          1786      
00003E90                          1787  draw_loot:
00003E90  5A4D                    1788      add.w   #L_ACTIVE,A5    Move to the active state
00003E92                          1789  
00003E92  323C 00FF               1790      move.w  #255,D1         Move the word #255 to D1 to set the type of trap 11
00003E96  103C 000B               1791      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
00003E9A  4E4F                    1792      trap    #15             Trap to get the cursor position in D1
00003E9C                          1793      
00003E9C  0441 0200               1794      sub.w   #512,D1         Move the cursor back by two columns
00003EA0  4E4F                    1795      trap    #15             Set the cursor position with trap command 11
00003EA2                          1796      
00003EA2  2601                    1797      move.l  D1,D3           Move the value in D1 to D3 for storage
00003EA4                          1798      
00003EA4  223C 0000FFFF           1799      move.l  #GOLD,D1         Move the colour red to D1
00003EAA  6100 FE9A               1800      bsr     change_font_colour  Change the font colour
00003EAE                          1801      
00003EAE  43F9 00004D37           1802      lea     loot_mark,A1   load the enemy symbol
00003EB4  103C 000E               1803      move.b  #14,D0          Move #14 to D0 for trap command 14
00003EB8  4E4F                    1804      trap    #15             Draw the player mark
00003EBA                          1805      
00003EBA  223C 00FFFFFF           1806      move.l  #WHITE,D1       Move the colour white to D1
00003EC0  6100 FE84               1807      bsr     change_font_colour  Change the font colour
00003EC4                          1808      
00003EC4  2203                    1809      move.l  D3,D1           Move the value in D3 to D1 for previous cursor position
00003EC6                          1810      
00003EC6  0641 0200               1811      add.w   #512,D1         Move the cursor position two columns forward
00003ECA  103C 000B               1812      move.b  #11,D0          Move byte #11 for trap command 11 
00003ECE  4E4F                    1813      trap    #15             Set the cursor position
00003ED0                          1814      
00003ED0  4E75                    1815      rts 
00003ED2                          1816  
00003ED2                          1817  check_for_player:
00003ED2  B5CE                    1818      CMP.L   A6,A2
00003ED4  6700 0004               1819      BEQ     draw_player
00003ED8  4E75                    1820      rts
00003EDA                          1821      
00003EDA                          1822  draw_player:
00003EDA  323C 00FF               1823      move.w  #255,D1         Move the word #255 to D1 to set the type of trap 11
00003EDE  103C 000B               1824      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
00003EE2  4E4F                    1825      trap    #15             Trap to get the cursor position in D1
00003EE4                          1826      
00003EE4  0441 0200               1827      sub.w   #512,D1         Move the cursor back by two columns
00003EE8  4E4F                    1828      trap    #15             Set the cursor position with trap command 11
00003EEA                          1829      
00003EEA  2601                    1830      move.l  D1,D3          Move the value in D1 to D3 for storage
00003EEC                          1831      
00003EEC  223C 0000FF00           1832      move.l  #GREEN,D1       Move the colour green to D1
00003EF2  6100 FE52               1833      bsr     change_font_colour  Change the font colour
00003EF6                          1834      
00003EF6  43F9 00004D2F           1835      lea     player_mark,A1  load the player symbol
00003EFC  103C 000E               1836      move.b  #14,D0          Move #14 to D0 for trap command 14
00003F00  4E4F                    1837      trap    #15             Draw the player mark
00003F02                          1838      
00003F02  223C 00FFFFFF           1839      move.l  #WHITE,D1       Move the colour white to D1
00003F08  6100 FE3C               1840      bsr     change_font_colour  Change the font colour
00003F0C                          1841      
00003F0C  2203                    1842      move.l  D3,D1           Move the value in D3 to D1 for previous cursor position
00003F0E                          1843      
00003F0E  0641 0200               1844      add.w   #512,D1         Move the cursor position two columns forward
00003F12  103C 000B               1845      move.b  #11,D0          Move byte #11 for trap command 11 
00003F16  4E4F                    1846      trap    #15             Set the cursor position
00003F18                          1847      
00003F18  4E75                    1848      rts
00003F1A                          1849      
00003F1A                          1850  check_for_enemies:
00003F1A  4BF8 6000               1851      lea     FIRST_ENEMY,A5  Load the memory address of the first enemy
00003F1E  1A3C 0000               1852      move.b  #0,D5           Move the starting enemy number to D5
00003F22  6100 0004               1853      bsr     loop_enemies    Loop through all enemies
00003F26  4E75                    1854      rts                     Return from subroutine
00003F28                          1855      
00003F28                          1856  loop_enemies:
00003F28  6100 0012               1857      bsr     check_for_enemy Check for an enemy
00003F2C                          1858      
00003F2C  BA3C 0002               1859      CMP.B   #ENEMY_MAX,D5   Compare the enemy number with the maximum enemy number
00003F30  6C00 FDD2               1860      BGE     return          Return from the loop if the current enemy number is greater than or equal to the max
00003F34                          1861      
00003F34  5205                    1862      add.b   #1,D5           Add to the current enemy number
00003F36  DAFC 000C               1863      add.w   #12,A5          Add to the current enemy pointer to move to the next enemy (16 for next enemy - 4 to get back from position)
00003F3A  60EC                    1864      bra     loop_enemies    Keep looping the enemies
00003F3C                          1865      
00003F3C                          1866  check_for_enemy:
00003F3C  564D                    1867      add.w   #ALIVE,A5       Add to the enemy memory address to get the enemy's alive state
00003F3E  0C1D 0000               1868      CMP.B   #0,(A5)+        Check if the enemy is alive
00003F42  6700 FDC0               1869      BEQ     return          Return from the subroutine if not
00003F46                          1870      
00003F46  3615                    1871      move.w  (A5),D3         Move the enemy coordinates into data register D3 for large-value comparisons
00003F48  B5C3                    1872      CMP.L   D3,A2           Check if the enemy is in the current position
00003F4A  6700 0004               1873      BEQ     draw_enemy      Draw the enemy if it is
00003F4E  4E75                    1874      rts                     Return if the enemy is not in the current position
00003F50                          1875      
00003F50                          1876  draw_enemy:
00003F50  323C 00FF               1877      move.w  #255,D1         Move the word #255 to D1 to set the type of trap 11
00003F54  103C 000B               1878      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
00003F58  4E4F                    1879      trap    #15             Trap to get the cursor position in D1
00003F5A                          1880      
00003F5A  0441 0200               1881      sub.w   #512,D1         Move the cursor back by two columns
00003F5E  4E4F                    1882      trap    #15             Set the cursor position with trap command 11
00003F60                          1883      
00003F60  2601                    1884      move.l  D1,D3          Move the value in D1 to D3 for storage
00003F62                          1885      
00003F62  223C 000000FF           1886      move.l  #RED,D1         Move the colour red to D1
00003F68  6100 FDDC               1887      bsr     change_font_colour  Change the font colour
00003F6C                          1888      
00003F6C  43F9 00004D31           1889      lea     enemy_mark,A1   load the enemy symbol
00003F72  103C 000E               1890      move.b  #14,D0          Move #14 to D0 for trap command 14
00003F76  4E4F                    1891      trap    #15             Draw the player mark
00003F78                          1892      
00003F78  223C 00FFFFFF           1893      move.l  #WHITE,D1       Move the colour white to D1
00003F7E  6100 FDC6               1894      bsr     change_font_colour  Change the font colour
00003F82                          1895      
00003F82  2203                    1896      move.l  D3,D1           Move the value in D3 to D1 for previous cursor position
00003F84                          1897      
00003F84  0641 0200               1898      add.w   #512,D1         Move the cursor position two columns forward
00003F88  103C 000B               1899      move.b  #11,D0          Move byte #11 for trap command 11 
00003F8C  4E4F                    1900      trap    #15             Set the cursor position
00003F8E                          1901      
00003F8E  4E75                    1902      rts 
00003F90                          1903      
00003F90                          1904  check_for_shops:
00003F90  4BF8 6500               1905      lea     FIRST_SHOP,A5   Load the memory address of the first shop
00003F94  1A3C 0000               1906      move.b  #0,D5           Move the starting shop number to D5
00003F98  6100 0004               1907      bsr     loop_shops      Loop through all shops
00003F9C  4E75                    1908      rts                     Return from subroutine
00003F9E                          1909      
00003F9E                          1910  loop_shops:
00003F9E  6100 0012               1911      bsr     check_for_shop  Check for a shop
00003FA2                          1912      
00003FA2  BA3C 0002               1913      CMP.B   #SHOP_MAX,D5    Compare the shop number with the maximum shop number
00003FA6  6C00 FD5C               1914      BGE     return          Return from the loop if the current shop number is greater than or equal to the max
00003FAA                          1915      
00003FAA  5205                    1916      add.b   #1,D5           Add to the current shop number
00003FAC  DAFC 0010               1917      add.w   #16,A5          Add to the current shop pointer to move to the next shop
00003FB0  60EC                    1918      bra     loop_shops      Keep looping the shops
00003FB2                          1919      
00003FB2                          1920  check_for_shop:
00003FB2  3615                    1921      move.w  (A5),D3         Move the shop coordinates into data register D3 for large-value comparisons
00003FB4  B5C3                    1922      CMP.L   D3,A2           Check if the shop is in the current position
00003FB6  6700 0004               1923      BEQ     draw_shop       Draw the shop if it is
00003FBA  4E75                    1924      rts                     Return if the shop is not in the current position
00003FBC                          1925      
00003FBC                          1926  draw_shop:
00003FBC  323C 00FF               1927      move.w  #255,D1         Move the word #255 to D1 to set the type of trap 11
00003FC0  103C 000B               1928      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
00003FC4  4E4F                    1929      trap    #15             Trap to get the cursor position in D1
00003FC6                          1930      
00003FC6  0441 0200               1931      sub.w   #512,D1         Move the cursor back by two columns
00003FCA  4E4F                    1932      trap    #15             Set the cursor position with trap command 11
00003FCC                          1933      
00003FCC  2601                    1934      move.l  D1,D3           Move the value in D1 to D3 for storage
00003FCE                          1935      
00003FCE  223C 00F000F0           1936      move.l  #PURPLE,D1      Move the colour red to D1
00003FD4  6100 FD70               1937      bsr     change_font_colour  Change the font colour
00003FD8                          1938      
00003FD8  43F9 00004D35           1939      lea     shop_mark,A1    load the enemy symbol
00003FDE  103C 000E               1940      move.b  #14,D0          Move #14 to D0 for trap command 14
00003FE2  4E4F                    1941      trap    #15             Draw the player mark
00003FE4                          1942      
00003FE4  223C 00FFFFFF           1943      move.l  #WHITE,D1       Move the colour white to D1
00003FEA  6100 FD5A               1944      bsr     change_font_colour  Change the font colour
00003FEE                          1945      
00003FEE  2203                    1946      move.l  D3,D1           Move the value in D3 to D1 for previous cursor position
00003FF0                          1947      
00003FF0  0641 0200               1948      add.w   #512,D1         Move the cursor position two columns forward
00003FF4  103C 000B               1949      move.b  #11,D0          Move byte #11 for trap command 11 
00003FF8  4E4F                    1950      trap    #15             Set the cursor position
00003FFA                          1951      
00003FFA  4E75                    1952      rts
00003FFC                          1953  
00003FFC                          1954  check_for_win_point:
00003FFC  B5FC 00008156           1955      CMP.L   #WIN_POINT,A2   Check if the win point is in the current tile
00004002  6700 0004               1956      BEQ     draw_win_point  Branch to draw the win point if so
00004006  4E75                    1957      rts                     Return from subroutine if not
00004008                          1958      
00004008                          1959  draw_win_point:
00004008  323C 00FF               1960      move.w  #255,D1         Move the word #255 to D1 to set the type of trap 11
0000400C  103C 000B               1961      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
00004010  4E4F                    1962      trap    #15             Trap to get the cursor position in D1
00004012                          1963      
00004012  0441 0200               1964      sub.w   #512,D1         Move the cursor back by two columns
00004016  4E4F                    1965      trap    #15             Set the cursor position with trap command 11
00004018                          1966      
00004018  2601                    1967      move.l  D1,D3           Move the value in D1 to D3 for storage
0000401A                          1968      
0000401A  223C 00FF0000           1969      move.l  #BLUE,D1        Move the colour blue to D1
00004020  6100 FD24               1970      bsr     change_font_colour  Change the font colour
00004024                          1971      
00004024  43F9 00004D33           1972      lea     win_point_mark,A1   load the win point symbol
0000402A  103C 000E               1973      move.b  #14,D0              Move #14 to D0 for trap command 14
0000402E  4E4F                    1974      trap    #15                 Draw the win point mark
00004030                          1975      
00004030  223C 00FFFFFF           1976      move.l  #WHITE,D1       Move the colour white to D1
00004036  6100 FD0E               1977      bsr     change_font_colour  Change the font colour
0000403A                          1978      
0000403A  2203                    1979      move.l  D3,D1           Move the value in D3 to D1 for previous cursor position
0000403C                          1980      
0000403C  0641 0200               1981      add.w   #512,D1         Move the cursor position two columns forward
00004040  103C 000B               1982      move.b  #11,D0          Move byte #11 for trap command 11 
00004044  4E4F                    1983      trap    #15             Set the cursor position
00004046                          1984      
00004046  4E75                    1985      rts
00004048                          1986      
00004048                          1987  *-------------------------------------------------------
00004048                          1988  *-------------------Setup the world---------------------
00004048                          1989  *-------------------------------------------------------
00004048                          1990  setup_world:
00004048  13FC 000E 0000814A      1991      move.b  #14,$814A   Setup the starting corridor
00004050  13FC 0007 0000813A      1992      move.b  #7,$813A    T junction upwards from starting corridor
00004058  13FC 0004 00008139      1993      move.b  #4,$8139    Left corridor
00004060  13FC 0001 00008129      1994      move.b  #1,$8129
00004068  13FC 0001 00008119      1995      move.b  #1,$8119
00004070                          1996      
00004070  13FC 0004 00008108      1997      move.b  #4,$8108    First shop
00004078  13FC 0000 00008109      1998      move.b  #0,$8109    Entrance
00004080  13FC 0005 0000810A      1999      move.b  #5,$810A
00004088  13FC 0008 000080F8      2000      move.b  #8,$80F8
00004090  13FC 0000 000080F9      2001      move.b  #0,$80F9
00004098  13FC 000A 000080FA      2002      move.b  #10,$80FA
000040A0  13FC 0003 000080E8      2003      move.b  #3,$80E8
000040A8  13FC 0007 000080E9      2004      move.b  #7,$80E9
000040B0  13FC 0006 000080EA      2005      move.b  #6,$80EA
000040B8                          2006      
000040B8  13FC 0005 0000813B      2007      move.b  #5,$813B    Right corridor
000040C0  13FC 0001 0000812B      2008      move.b  #1,$812B
000040C8  13FC 0001 0000811B      2009      move.b  #1,$811B
000040D0  13FC 0008 0000810B      2010      move.b  #8,$810B    Path continues up with a turn off to the right
000040D8                          2011      
000040D8  13FC 0002 0000810C      2012      move.b  #2,$810C    Right path
000040E0  13FC 0002 0000810D      2013      move.b  #2,$810D    Continue right
000040E8  13FC 0005 0000810E      2014      move.b  #5,$810E    Path upwards and to the left
000040F0  13FC 0001 000080FE      2015      move.b  #1,$80FE    Leads upwards into a room
000040F8                          2016      
000040F8  13FC 0004 000080ED      2017      move.b  #4,$80ED    First monster room
00004100  13FC 0000 000080EE      2018      move.b  #0,$80EE    Entrance
00004108  13FC 0005 000080EF      2019      move.b  #5,$80EF
00004110  13FC 0008 000080DD      2020      move.b  #8,$80DD
00004118  13FC 0000 000080DE      2021      move.b  #0,$80DE
00004120  13FC 000A 000080DF      2022      move.b  #10,$80DF
00004128  13FC 0003 000080CD      2023      move.b  #3,$80CD
00004130  13FC 0007 000080CE      2024      move.b  #7,$80CE
00004138  13FC 0006 000080CF      2025      move.b  #6,$80CF
00004140                          2026      
00004140  13FC 0001 000080FB      2027      move.b  #1,$80FB    Path that continues up
00004148  13FC 0001 000080EB      2028      move.b  #1,$80EB    Path continues upwards
00004150  13FC 0001 000080DB      2029      move.b  #1,$80DB
00004158                          2030      
00004158                          2031      *Bottom row of room
00004158  13FC 0004 000080C8      2032      move.b  #4,$80C8    Large monster room with locked door
00004160  13FC 0009 000080C9      2033      move.b  #9,$80C9
00004168  13FC 0009 000080CA      2034      move.b  #9,$80CA
00004170  13FC 0000 000080CB      2035      move.b  #0,$80CB    Entrance
00004178  13FC 0005 000080CC      2036      move.b  #5,$80CC
00004180                          2037      *Middle row of room
00004180  13FC 0000 000080B8      2038      move.b  #0,$80B8    Exit to the left
00004188  13FC 0000 000080B9      2039      move.b  #0,$80B9
00004190  13FC 0000 000080BA      2040      move.b  #0,$80BA
00004198  13FC 0000 000080BB      2041      move.b  #0,$80BB
000041A0  13FC 000A 000080BC      2042      move.b  #10,$80BC
000041A8                          2043      *Top row of room
000041A8  13FC 0003 000080A8      2044      move.b  #3,$80A8
000041B0  13FC 0007 000080A9      2045      move.b  #7,$80A9
000041B8  13FC 0007 000080AA      2046      move.b  #7,$80AA
000041C0  13FC 0007 000080AB      2047      move.b  #7,$80AB    Locked door
000041C8  13FC 0006 000080AC      2048      move.b  #6,$80AC
000041D0                          2049      
000041D0  13FC 0002 000080B7      2050      move.b  #2,$80B7    Exit large room leftwards
000041D8  13FC 0002 000080B6      2051      move.b  #2,$80B6    Continue to the left
000041E0  13FC 0007 000080B5      2052      move.b  #7,$80B5    Continue to the left and a path downwards
000041E8  13FC 0002 000080B4      2053      move.b  #2,$80B4    Continue to the left
000041F0                          2054      
000041F0  13FC 0003 000080A1      2055      move.b  #3,$80A1    Room to the left
000041F8  13FC 0007 000080A2      2056      move.b  #7,$80A2
00004200  13FC 0006 000080A3      2057      move.b  #6,$80A3
00004208  13FC 0008 000080B1      2058      move.b  #8,$80B1
00004210  13FC 0000 000080B2      2059      move.b  #0,$80B2
00004218  13FC 0000 000080B3      2060      move.b  #0,$80B3    Entrance to the right
00004220  13FC 0004 000080C1      2061      move.b  #4,$80C1
00004228  13FC 0009 000080C2      2062      move.b  #9,$80C2
00004230  13FC 0005 000080C3      2063      move.b  #5,$80C3
00004238                          2064      
00004238  13FC 0001 000080C5      2065      move.b  #1,$80C5    Path leading downwards
00004240  13FC 0001 000080D5      2066      move.b  #1,$80D5
00004248  13FC 000A 000080E5      2067      move.b  #10,$80E5   Path leading downward and to the left
00004250  13FC 0002 000080E4      2068      move.b  #2,$80E4    Path on the left
00004258  13FC 0002 000080E3      2069      move.b  #2,$80E3
00004260  13FC 0003 000080E2      2070      move.b  #3,$80E2    Path takes a turn downwards
00004268  13FC 0001 000080F2      2071      move.b  #1,$80F2    Path continues downwards
00004270                          2072      
00004270  13FC 0003 00008101      2073      move.b  #3,$8101    Regular enemy room
00004278  13FC 0000 00008102      2074      move.b  #0,$8102    Entrance
00004280  13FC 0006 00008103      2075      move.b  #6,$8103
00004288  13FC 0008 00008111      2076      move.b  #8,$8111
00004290  13FC 0000 00008112      2077      move.b  #0,$8112
00004298  13FC 000A 00008113      2078      move.b  #10,$8113
000042A0  13FC 0004 00008121      2079      move.b  #4,$8121
000042A8  13FC 0009 00008122      2080      move.b  #9,$8122
000042B0  13FC 000A 00008123      2081      move.b  #10,$8123   Exit at the bottom
000042B8                          2082      
000042B8  13FC 0001 000080F5      2083      move.b  #1,$80F5    Path leading downward
000042C0  13FC 0001 00008105      2084      move.b  #1,$8105
000042C8  13FC 0001 00008115      2085      move.b  #1,$8115
000042D0  13FC 0001 00008125      2086      move.b  #1,$8125
000042D8                          2087      
000042D8                          2088      *Top row of room
000042D8  13FC 0008 00008133      2089      move.b  #8,$8133    Large enemy room - Exit at top
000042E0  13FC 0007 00008134      2090      move.b  #7,$8134
000042E8  13FC 0000 00008135      2091      move.b  #0,$8135    Entrance
000042F0  13FC 0006 00008136      2092      move.b  #6,$8136
000042F8                          2093      
000042F8                          2094      *Middle row of room
000042F8  13FC 0008 00008143      2095      move.b  #8,$8143
00004300  13FC 0000 00008144      2096      move.b  #0,$8144
00004308  13FC 0000 00008145      2097      move.b  #0,$8145
00004310  13FC 000A 00008146      2098      move.b  #10,$8146
00004318                          2099      
00004318                          2100      *Bottom row of room
00004318  13FC 0004 00008153      2101      move.b  #4,$8153
00004320  13FC 0009 00008154      2102      move.b  #9,$8154
00004328  13FC 0009 00008155      2103      move.b  #9,$8155
00004330  13FC 0005 00008156      2104      move.b  #5,$8156
00004338                          2105      
00004338  4E75                    2106      rts
0000433A                          2107  
0000433A                          2108  setup_enemies:
0000433A                          2109      * Setup first enemy
0000433A  11FC 0003 6000          2110      move.b  #3,$6000    Health - Setup the first enemy
00004340  11FC 0001 6001          2111      move.b  #1,$6001    Damage/level
00004346  11FC 0001 6002          2112      move.b  #1,$6002    Class type (Knight)
0000434C  11FC 0001 6003          2113      move.b  #1,$6003    Alive state (Alive)
00004352  31FC 80DE 6004          2114      move.w  #$80DE,$6004  Move enemy coordinates
00004358                          2115      
00004358                          2116      * Setup second enemy
00004358  11FC 0003 6010          2117      move.b  #3,$6010    Health - Setup the first enemy
0000435E  11FC 0002 6011          2118      move.b  #2,$6011    Damage/level
00004364  11FC 0001 6012          2119      move.b  #1,$6012    Class type (Knight)
0000436A  11FC 0001 6013          2120      move.b  #1,$6013    Alive state (Alive)
00004370  31FC 8155 6014          2121      move.w  #$8155,$6014  Move enemy coordinates
00004376                          2122      
00004376  4E75                    2123      rts
00004378                          2124      
00004378                          2125  setup_loot:
00004378                          2126      * Setup first loot pile
00004378  31FC 80DE 7000          2127      move.w  #$80DE,$7000  Move loot coordinates
0000437E  11FC 0001 7002          2128      move.b  #1,$7002  Move loot potions
00004384  11FC 0002 7003          2129      move.b  #2,$7003  Move loot keys
0000438A  11FC 000F 7004          2130      move.b  #LIFE_PER_TORCH,$7004  Move loot torches
00004390  11FC 0001 7005          2131      move.b  #1,$7005  Move loot active state
00004396                          2132      
00004396                          2133      * Setup second loot pile
00004396  31FC 8155 7010          2134      move.w  #$8155,$7010  Move loot coordinates
0000439C  11FC 0003 7012          2135      move.b  #3,$7012  Move loot potions
000043A2  11FC 0005 7013          2136      move.b  #5,$7013  Move loot keys
000043A8  11FC 0001 7014          2137      move.b  #1,$7014  Move loot torches
000043AE  11FC 0001 7015          2138      move.b  #1,$7015  Move loot active state
000043B4                          2139      
000043B4                          2140  setup_player:
000043B4  11FC 000A 5FF0          2141      move.b  #10,PLAYER      put score/health in memory location $5FF0
000043BA  11FC 0001 5FF1          2142      move.b  #1,PLA_DAMAGE   Assign the default damage for the player
000043C0  11FC 0000 5FF3          2143      move.b  #0,GAME_STATE   Put game state number in memory location $5FF3
000043C6                          2144      *0 = Pick role/intro | 5 = Move around | 6 = Combat | 7 = Shop | 64 = End game
000043C6                          2145  
000043C6  11FC 0000 5FF2          2146      move.b  #0,PLA_CLASS    put class number in memory location $5FF2
000043CC                          2147      * 1 corresponds to knight - 2 corresponds to mage - 3 corresponds to rogue
000043CC                          2148      
000043CC  11FC 0064 5FF8          2149      move.b  #100,PLA_GOLD    Assign the player's base gold value
000043D2  11FC 0001 5FF9          2150      move.b  #1,PLA_POTIONS  Assign the player's base potions value
000043D8  11FC 0000 5FFA          2151      move.b  #0,PLA_KEYS     Assign the player's base keys value
000043DE                          2152      *move.b  #LIFE_PER_TORCH,PLA_TORCH   Assign the player's base torch value
000043DE  11FC 0032 5FFB          2153      move.b  #50,PLA_TORCH   Assign the player's base torch value
000043E4                          2154      
000043E4  4DF9 0000814A           2155      lea     $814A,A6        Set the player coordinate to the first corridor
000043EA  31CE 5FF6               2156      move.w  A6,PLA_P_POS    Set the player's previous position to their current
000043EE                          2157      
000043EE  4E75                    2158      rts
000043F0                          2159      
000043F0                          2160  setup_shops:
000043F0                          2161      * Setup the first shop
000043F0  31FC 80F9 6500          2162      move.w  #$80F9,$6500    Set the position
000043F6  11FC 0002 6502          2163      move.b  #2,$6502        Set the potions
000043FC  11FC 0003 6503          2164      move.b  #3,$6503        Set the keys
00004402  11FC 0004 6504          2165      move.b  #4,$6504        Set the torches
00004408  11FC 0005 6505          2166      move.b  #5,$6505        Set the damage
0000440E                          2167      
0000440E                          2168      * Setup the second shop
0000440E  31FC 80B2 6510          2169      move.w  #$80B2,$6510    Set the position
00004414  11FC 0004 6512          2170      move.b  #4,$6512        Set the potions
0000441A  11FC 0003 6513          2171      move.b  #3,$6513        Set the keys
00004420  11FC 0002 6514          2172      move.b  #2,$6514        Set the torches
00004426  11FC 0001 6515          2173      move.b  #1,$6515        Set the damage
0000442C                          2174  
0000442C  4E75                    2175      rts
0000442E                          2176      
0000442E                          2177  *-------------------------------------------------------
0000442E                          2178  *-------------------Data Delarations--------------------
0000442E                          2179  *-------------------------------------------------------
0000442E                          2180  
0000442E= 0D 0A 00                2181  crlf:           dc.b    $0D,$0A,0
00004431= 2A 2A 2A 2A 2A 2A ...   2182  welcome_msg:    dc.b    '*****************************************************************',$0D,$0A
00004474= 20 20 20 20 20 20 ...   2183                  dc.b    '      __  ___      ___  __      ___        ______    _____  ___',$0D,$0A
000044B5= 20 20 20 20 20 2F ...   2184                  dc.b    '     /""\|"  \    /"  |/""\    |"  |      /    " \  (\"   \|"  \',$0D,$0A
000044F7= 20 20 20 20 2F 20 ...   2185                  dc.b    '    /    \\   \  //  //    \   ||  |     // ____  \ |.\\   \    |',$0D,$0A
0000453A= 20 20 20 2F 20 20 ...   2186                  dc.b    '   /  /\  \\\  \/. .//  /\  \  |:  |    /  /    ) :)|: \.   \\  |',$0D,$0A
0000457D= 20 20 2F 2F 20 20 ...   2187                  dc.b    '  //  __   \\.    ////  __   \  \  |___(: (____/ // |.  \    \. |',$0D,$0A
000045C0= 20 2F 20 20 20 2F ...   2188                  dc.b    ' /   /  \\  \\\   //   /  \\  \( \_|:  \\        /  |    \    \ |',$0D,$0A
00004603= 28 5F 5F 5F 2F 20 ...   2189                  dc.b    '(___/    \___)\__/(___/    \___)\_______)\"_____/    \___|\____\)',$0D,$0A,$0D,$0A
00004648= 2A 2A 2A 2A 2A 2A ...   2190                  dc.b    '*****************************************************************',$0D,$0A,0
0000468C= 2E 00                   2191  loop_msg:       dc.b    '.',0
0000468E= 54 68 65 20 64 61 ...   2192  tutorial_msg    dc.b    'The darkness here is dangerious, keep your torch close and dont let it go out.',$0D,$0A
000046DE= 45 76 65 72 79 20 ...   2193                  dc.b    'Every movement you make decreases your torch life, so think before you move.',$0D,$0A
0000472C= 59 6F 75 20 63 61 ...   2194                  dc.b    'You can buy more torches in the shop, thats probably a good place to start...',$0D,$0A,0
0000477C= 31 3E 20 52 65 73 ...   2195  replay_msg:     dc.b    '1> Restart the game.',$0D,$0A
00004792= 32 3E 20 51 75 69 ...   2196                  dc.b    '2> Quit the game.',$0D,$0A,0
000047A6= 59 6F 75 20 61 77 ...   2197  wake_up_msg:    dc.b    'You awake in a room, on a bed of red velvet, with no memory',$0D,$0A
000047E3= 6F 66 20 68 6F 77 ...   2198                  dc.b    'of how you got here. Stones crumble from the ceiling, the place looks like an',$0D,$0A
00004832= 6F 6C 64 20 63 61 ...   2199                  dc.b    'old castle. You get a dark feeling from this place, and you know you must',$0D,$0A
0000487D= 65 73 63 61 70 65 ...   2200                  dc.b    'escape...',$0D,$0A
00004888= 59 6F 75 20 63 6C ...   2201                  dc.b    'You climb from the bed and look in a nearby mirror:',$0D,$0A,0
000048BE= 31 3E 20 59 6F 75 ...   2202  pick_role_msg:  dc.b    '1> You wear armour of polished iron, a short sword and heavy shield laying',$0D,$0A
0000490A= 63 6C 6F 73 65 20 ...   2203                  dc.b    'close by. (Knight class)',$0D,$0A,$0D,$0A
00004926= 32 3E 20 59 6F 75 ...   2204                  dc.b    '2> You wear a cloak with mystic symbols sewn into the fabrics, an ancient',$0D,$0A
00004971= 6C 6F 6F 6B 69 6E ...   2205                  dc.b    'looking staff lays near. (Mage class)',$0D,$0A,$0D,$0A
0000499A= 33 3E 20 59 6F 75 ...   2206                  dc.b    '3> You wear tight, well-fitting leather armour with reminents of black dye',$0D,$0A
000049E6= 73 74 61 69 6E 65 ...   2207                  dc.b    'stained to the material. Two knives are fastened to your belt. (Rogue class)',$0D,$0A,0
00004A35= 45 6E 74 65 72 20 ...   2208  input_nums_msg: dc.b    'Enter num between 1 and ',0
00004A4E= 3A 20 00                2209  colon_msg:      dc.b    ': ',0
00004A51                          2210  
00004A51= 49 6E 70 75 74 74 ...   2211  input_error_msg:    dc.b    'Inputted number is outside of range.',$0D,$0A,0
00004A78= 47 61 6D 65 73 74 ...   2212  fake_gamestate_msg: dc.b    'Gamestate doesnt exist',$0D,$0A,0
00004A91= 59 6F 75 20 67 72 ...   2213  knight_role_msg:    dc.b    'You grab your sword and shield, pull a torch from the wall, and leave the room.',$0D,$0A,0
00004AE3= 59 6F 75 20 68 61 ...   2214  knight_spec_msg:    dc.b    'You have chosen the KNIGHT class. You specialise in blocking and countering',$0D,$0A,0
00004B31= 59 6F 75 20 70 69 ...   2215  mage_role_msg:  dc.b    'You pick up your staff, grab a torch from the wall, and leave the room.',$0D,$0A,0
00004B7B= 59 6F 75 20 68 61 ...   2216  mage_spec_msg:  dc.b    'You have chosen the MAGE class. You specialise in magic attacks.',$0D,$0A,0
00004BBE= 59 6F 75 20 66 61 ...   2217  rogue_role_msg: dc.b    'You fasten your belt, grab a torch from the wall, and leave the room.',$0D,$0A,0
00004C06= 59 6F 75 20 68 61 ...   2218  rogue_spec_msg: dc.b    'You have chosen the ROGUE class. You specialise in quick melee attacks.',$0D,$0A,0
00004C50= 31 3E 20 4D 6F 76 ...   2219  movement_msg:   dc.b    '1> Move north.',$0D,$0A
00004C60= 32 3E 20 4D 6F 76 ...   2220                  dc.b    '2> Move south.',$0D,$0A
00004C70= 33 3E 20 4D 6F 76 ...   2221                  dc.b    '3> Move west.',$0D,$0A
00004C7F= 34 3E 20 4D 6F 76 ...   2222                  dc.b    '4> Move east.',$0D,$0A
00004C8E= 35 3E 20 44 72 69 ...   2223                  dc.b    '5> Drink health potion.',$0D,$0A,0
00004CA8= 4D 6F 76 65 64 20 ...   2224  move_north_msg: dc.b    'Moved north.',$0D,$0A,0
00004CB7= 4D 6F 76 65 64 20 ...   2225  move_east_msg:  dc.b    'Moved east.',$0D,$0A,0
00004CC5= 4D 6F 76 65 64 20 ...   2226  move_south_msg: dc.b    'Moved south.',$0D,$0A,0
00004CD4= 4D 6F 76 65 64 20 ...   2227  move_west_msg:  dc.b    'Moved west.',$0D,$0A,0
00004CE2= 41 20 77 61 6C 6C ...   2228  movement_blocked_msg:  dc.b    'A wall blocks your path.',$0D,$0A,0
00004CFD= 45 6E 74 65 72 20 ...   2229  continue_msg:   dc.b    'Enter any key to continue... ',0
00004D1B= 20 20 20 00             2230  blank_tile      dc.b    '   ',0
00004D1F= 7C 20 7C 00             2231  both_tile       dc.b    '| |',0
00004D23= 7C 20 20 00             2232  left_tile       dc.b    '|  ',0
00004D27= 20 20 7C 00             2233  right_tile      dc.b    '  |',0
00004D2B= 5C 2F 5C 00             2234  blocked_tile:   dc.b    '\/\',0
00004D2F= 2A 00                   2235  player_mark:    dc.b    '*',0
00004D31= 58 00                   2236  enemy_mark:     dc.b    'X',0
00004D33= 40 00                   2237  win_point_mark: dc.b    '@',0
00004D35= 24 00                   2238  shop_mark:      dc.b    '$',0
00004D37= 25 00                   2239  loot_mark:      dc.b    '%',0
00004D39= 41 20 6D 6F 6E 73 ...   2240  encounter_msg:  dc.b    'A monster blocks your path, it looks ready to attack!',$0D,$0A,0
00004D71= 31 3E 20 42 6C 6F ...   2241  combat_msg:     dc.b    '1> Block and Counter.',$0D,$0A
00004D88= 32 3E 20 43 61 73 ...   2242                  dc.b    '2> Cast Magic.',$0D,$0A
00004D98= 33 3E 20 41 74 74 ...   2243                  dc.b    '3> Attack Swiftly.',$0D,$0A
00004DAC= 34 3E 20 54 72 79 ...   2244                  dc.b    '4> Try Run.',$0D,$0A
00004DB9= 35 3E 20 44 72 69 ...   2245                  dc.b    '5> Drink Health Potion.',$0D,$0A,0
00004DD3= 59 6F 75 20 65 73 ...   2246  escape_msg:             dc.b    'You escaped the monster!',$0D,$0A,0
00004DEE= 59 6F 75 20 74 72 ...   2247  fail_escape_msg:        dc.b    'You try to run, but the monster catches and damages you!',$0D,$0A,0
00004E29= 59 6F 75 20 62 6F ...   2248  both_block_msg:         dc.b    'You both block, No damage is done!',$0D,$0A,0
00004E4E= 59 6F 75 20 62 6F ...   2249  both_cast_magic_msg:    dc.b    'You both cast magic at eachother, the spells clash in mid air! No damage',$0D,$0A
00004E98= 69 73 20 64 6F 6E ...   2250                          dc.b    'is done!',$0D,$0A,0
00004EA3= 59 6F 75 20 62 6F ...   2251  both_melee_msg:         dc.b    'You both lunge forward, metal clashes together, but no damage is done!',$0D,$0A,0
00004EEC= 54 68 65 20 65 6E ...   2252  hit_against_block_msg:  dc.b    'The enemy blocks, you cast a cast a spell and it damages the monster!',$0D,$0A,0
00004F34= 54 68 65 20 65 6E ...   2253  hit_against_magic_msg:  dc.b    'The enemy begins to charge a spell but you lunge forward and hit it first,',$0D,$0A
00004F80= 64 61 6D 61 67 69 ...   2254                          dc.b    'damaging the monster!',$0D,$0A,0
00004F98= 54 68 65 20 65 6E ...   2255  hit_against_melee_msg:  dc.b    'The enemy lunges forward but you block quicky, then counter, damaging the',$0D,$0A
00004FE3= 6D 6F 6E 73 74 65 ...   2256                          dc.b    'monster!',$0D,$0A,0
00004FEE= 59 6F 75 20 6C 75 ...   2257  hit_by_counter_msg:     dc.b    'You lunge at the enemy but they block before you hit, they swing around quickly',$0D,$0A
0000503F= 61 6E 64 20 64 61 ...   2258                          dc.b    'and damage you!',$0D,$0A,0
00005051= 59 6F 75 20 74 72 ...   2259  hit_by_magic_msg:       dc.b    'You try to block the enemies attack, but they cast a spell that breaks through',$0D,$0A
000050A1= 79 6F 75 72 20 64 ...   2260                          dc.b    'your defense and damages you!',$0D,$0A,0
000050C1= 59 6F 75 20 74 72 ...   2261  hit_by_melee_msg:       dc.b    'You try to charge up a spell, but the enemy lunges forward and damages you!',$0D,$0A,0
0000510F= 48 65 61 6C 74 68 ...   2262  health_msg:             dc.b    'Health: ',0
00005118= 45 6E 65 6D 79 20 ...   2263  enemy_health_msg:       dc.b    'Enemy Health: ',0
00005127= 54 6F 72 63 68 20 ...   2264  torch_msg:              dc.b    'Torch Life: ',0
00005134= 44 61 6D 61 67 65 ...   2265  damage_lvl_msg          dc.b    'Damage lvl: ',0
00005141= 49 6E 76 65 6E 74 ...   2266  inventory_msg:          dc.b    'Inventory:',0
0000514C= 2D 20 47 6F 6C 64 ...   2267  gold_msg:               dc.b    '- Gold ',0
00005154= 2D 20 4B 65 79 20 00    2268  key_msg:                dc.b    '- Key ',0
0000515B= 2D 20 50 6F 74 69 ...   2269  potions_msg:            dc.b    '- Potion ',0
00005165= 2D 20 54 6F 72 63 ...   2270  torches_msg:            dc.b    '- Torch ',0
0000516E= 2D 20 44 61 6D 61 ...   2271  damage_up_msg:          dc.b    '- Damage Upgrades ',0
00005181= 54 68 65 20 6D 6F ...   2272  battle_won_msg:         dc.b    'The monster collapses at your feet. It is dead!',$0D,$0A,0
000051B3= 28 00                   2273  bracket_open_msg:       dc.b    '(',0
000051B5= 29 00                   2274  bracket_close_msg:      dc.b    ')',0
000051B7= 59 6F 75 20 66 65 ...   2275  death_msg:          dc.b    'You feel your last breath of air leave your lungs...',$0D,$0A
000051ED= 59 6F 75 72 20 6B ...   2276                      dc.b    'Your knees hit the ground...',$0D,$0A
0000520B= 59 6F 75 20 68 61 ...   2277                      dc.b    'You have died.',$0D,$0A,0
0000521C= 59 6F 75 20 66 65 ...   2278  win_msg:            dc.b    'You feel the outside breeze hit your face...',$0D,$0A
0000524A= 59 6F 75 20 68 61 ...   2279                      dc.b    'You have escaped the castle!',$0D,$0A,0
00005269= 59 6F 75 20 64 72 ...   2280  take_potion_msg:    dc.b    'You drink a health potion...',$0D,$0A
00005287= 33 20 68 65 61 6C ...   2281                      dc.b    '3 health points restored!',$0D,$0A,0
000052A3= 59 6F 75 20 61 72 ...   2282  no_potions_msg:     dc.b    'You are out of potions.',$0D,$0A,0
000052BD= 22 4C 6F 6F 6B 69 ...   2283  shop_enter_msg:     dc.b    '"Looking to lighten that coin pouch of yours?!"',$0D,$0A,0
000052EF= 31 3E 20 42 75 79 ...   2284  shop_msg:       dc.b    '1> Buy Potion. (5g)',$0D,$0A
00005304= 32 3E 20 42 75 79 ...   2285                  dc.b    '2> Buy Key. (15g)',$0D,$0A
00005317= 33 3E 20 42 75 79 ...   2286                  dc.b    '3> Buy Torch. (10g)',$0D,$0A
0000532C= 34 3E 20 42 75 79 ...   2287                  dc.b    '4> Buy Damage Upgrade. (20g)',$0D,$0A
0000534A= 35 3E 20 4C 65 61 ...   2288                  dc.b    '5> Leave Shop.',$0D,$0A,0
0000535B= 22 50 6C 65 61 73 ...   2289  leave_shop_msg: dc.b    '"Pleasure doing business with you."',$0D,$0A,0
00005381= 22 2E 2E 2E 41 6E ...   2290  buy_item_msg:   dc.b    '"...And its yours!"',$0D,$0A,0
00005397= 53 68 6F 70 20 53 ...   2291  shop_stock_msg: dc.b    'Shop Stock:',0
000053A3= 59 6F 75 72 20 49 ...   2292  player_msg:     dc.b    'Your Items:',0
000053AF= 22 4E 6F 74 20 65 ...   2293  no_money_msg:   dc.b    '"Not enough gold, traveller."',$0D,$0A,0
000053CF= 22 53 6F 72 72 79 ...   2294  no_item_msg:    dc.b    '"Sorry, I dont have any of them left..."',$0D,$0A,0
000053FA= 54 68 65 20 64 61 ...   2295  no_torch_msg:   dc.b    'The darkness burns...',$0D,$0A,0
00005412= 59 6F 75 20 70 69 ...   2296  pickup_loot_msg dc.b    'You picked up a loot pile',$0D,$0A,0
0000542E= 20 20 20 20 20 20 ...   2297  graveyard_msg:  dc.b    '      ,-=-.       ______     _',$0D,$0A
0000544E= 20 20 20 20 20 2F ...   2298                  dc.b    '     /  +  \     />----->  _|1|_',$0D,$0A
00005470= 20 20 20 20 20 7C ...   2299                  dc.b    '     | ~~~ |    // -/- /  |_ H _|',$0D,$0A
00005493= 20 20 20 20 20 7C ...   2300                  dc.b    '     |R.I.P|   //  /  /     |S|',$0D,$0A
000054B4= 5C 76 56 2C 2C 7C ...   2301                  dc.b    '\vV,,|_____|V,//_____/VvV,v,|_|/,,vhjwv/,',$0D,$0A,0
000054E0= 20 20 20 20 20 20 ...   2302  skeleton_msg:   dc.b    '           .-.',$0D,$0A
000054F0= 20 2F 5C 5F 5F 5F ...   2303                  dc.b    ' /\____/\ (o.o)',$0D,$0A
00005501= 7C 20 20 5F 7C 7C ...   2304                  dc.b    '|  _||_  | |=|',$0D,$0A
00005511= 20 5C 2F 20 7C 7C ...   2305                  dc.b    ' \/ || \/ __|__',$0D,$0A
00005522= 20 20 20 20 7C 7C ...   2306                  dc.b    '    ||\_//.=|=.\\',$0D,$0A
00005535= 20 20 20 20 7C 7C ...   2307                  dc.b    '    ||\_/ .=|=. \\',$0D,$0A
00005549= 20 20 20 20 7C 7C ...   2308                  dc.b    '    ||    .=|=. //',$0D,$0A
0000555D= 20 20 20 20 7C 7C ...   2309                  dc.b    '    ||    (_=_)//',$0D,$0A
00005570= 20 20 20 20 7C 7C ...   2310                  dc.b    '    ||   (:| |:)',$0D,$0A
00005582= 20 20 20 20 7C 7C ...   2311                  dc.b    '    ||    || ||',$0D,$0A
00005593= 20 20 20 20 7C 7C ...   2312                  dc.b    '    ||    () ()',$0D,$0A
000055A4= 20 20 20 20 2F 5C ...   2313                  dc.b    '    /\    || ||',$0D,$0A
000055B5= 20 20 20 20 7C 7C ...   2314                  dc.b    '    ||    || ||',$0D,$0A
000055C6= 20 20 20 20 5C 2F ...   2315                  dc.b    '    \/  ==   ==',$0D,$0A,0
000055D8= 20 20 20 20 20 20 ...   2316  merchant_msg:   dc.b    '         ____',$0D,$0A
000055E7= 20 20 20 20 20 20 ...   2317                  dc.b    '        |    |',$0D,$0A
000055F7= 20 20 20 20 20 20 ...   2318                  dc.b    '      --:<<>>:--',$0D,$0A
00005609= 20 20 20 20 20 20 ...   2319                  dc.b    '        :~_~ :',$0D,$0A
00005619= 20 20 20 20 20 20 ...   2320                  dc.b    '        _:"":\___',$0D,$0A
0000562C= 20 20 5F 5F 5F 5F ...   2321                  dc.b    '  ____./ :::     \._',$0D,$0A
00005642= 3C 3C 3D 29 20 20 ...   2322                  dc.b    '<<=)           \    :',$0D,$0A
00005659= 20 5C 2F 2D 2D 2D ...   2323                  dc.b    ' \/---/\_      /\._. ',$0D,$0A
00005670= 20 7C 7C 20 20 20 ...   2324                  dc.b    ' ||       \====:_ ""',$0D,$0A
00005686= 20 7C 7C 20 20 20 ...   2325                  dc.b    ' ||      ./     \\',$0D,$0A
0000569A= 20 7C 7C 20 20 20 ...   2326                  dc.b    ' ||     :       :',$0D,$0A
000056AD= 20 7C 7C 20 20 20 ...   2327                  dc.b    ' ||    /   :    \',$0D,$0A
000056C0= 20 7C 7C 20 20 20 ...   2328                  dc.b    ' ||   :   .      \.',$0D,$0A
000056D5= 20 7C 7C 20 20 20 ...   2329                  dc.b    ' ||   :  : :      :',$0D,$0A
000056EA= 20 7C 7C 20 20 20 ...   2330                  dc.b    ' ||   :__:-:__.;--',$0D,$0A,0
000056FF= 20 20 20 20 20 20 ...   2331  castle_msg:     dc.b    '                T~~',$0D,$0A
00005714= 20 20 20 20 20 20 ...   2332                  dc.b    '                |',$0D,$0A
00005727= 20 20 20 20 20 20 ...   2333                  dc.b    '               /"\',$0D,$0A
0000573B= 20 20 20 20 20 20 ...   2334                  dc.b    '       T~~     |.| T~~',$0D,$0A
00005753= 20 20 20 54 7E 7E ...   2335                  dc.b    '   T~~ |    T~ WWWW|',$0D,$0A
00005769= 20 20 20 7C 20 20 ...   2336                  dc.b    '   |  /"\   |  |  |/\T~~',$0D,$0A
00005783= 20 20 2F 22 5C 20 ...   2337                  dc.b    '  /"\ WWW  /"\ |. |WW|',$0D,$0A
0000579B= 20 57 57 57 57 57 ...   2338                  dc.b    ' WWWWW/\| /   \|./\|/"\',$0D,$0A
000057B4= 20 7C 20 20 20 2F ...   2339                  dc.b    ' |   /__\/]WWW[\/__\WWWW',$0D,$0A
000057CE= 20 7C 22 20 20 57 ...   2340                  dc.b    ' |"  WWWW.|I_I|.WWWW.   |',$0D,$0A
000057E9= 20 7C 20 20 20 7C ...   2341                  dc.b    ' |   |. |/  -  \|. |.  |',$0D,$0A
00005803= 20 7C 2E 20 20 7C ...   2342                  dc.b    ' |.  |  |LI=H=LI|. |   |',$0D,$0A
0000581D= 20 7C 20 20 20 7C ...   2343                  dc.b    ' |   |. | |[_]| |  |.  |',$0D,$0A
00005837= 20 7C 20 20 20 7C ...   2344                  dc.b    ' |   |  |_|###|_|  |   |',$0D,$0A
00005851= 20 20 2D 2D 2D 20 ...   2345                  dc.b    '  --- -- -/___\- -- --- ',$0D,$0A,0
0000586C                          2346                  
0000586C                          2347  
0000586C                          2348  
0000586C                          2349  
0000586C                          2350  
0000586C                          2351  
0000586C                          2352  
0000586C                          2353  
0000586C                          2354  
0000586C                          2355  
0000586C                          2356  
0000586C                          2357  
0000586C                          2358  
0000586C                          2359  
0000586C                          2360  
0000586C                          2361  
0000586C                          2362  
0000586C                          2363      end start

No errors detected
No warnings generated


SYMBOL TABLE INFORMATION
Symbol-name         Value
-------------------------
ALIVE               3
BATTLE_WON_MSG      5181
BLANK_TILE          4D1B
BLOCKED_TILE        4D2B
BLOCK_COUNTER       39B4
BLUE                FF0000
BOTH_BLOCK          3A4C
BOTH_BLOCK_MSG      4E29
BOTH_CAST_MAGIC     3A5E
BOTH_CAST_MAGIC_MSG  4E4E
BOTH_MELEE          3A70
BOTH_MELEE_MSG      4EA3
BOTH_TILE           4D1F
BRACKET_CLOSE_MSG   51B5
BRACKET_OPEN_MSG    51B3
BUY_ITEM_MSG        5381
BUY_KEY             3B90
BUY_POTION          3B5A
BUY_TORCH           3BC8
CASTLE_MSG          56FF
CAST_MAGIC          39CE
CHANGE_FONT_COLOUR  3D46
CHECK_FOR_ENEMIES   3F1A
CHECK_FOR_ENEMY     3F3C
CHECK_FOR_LOOT      3E78
CHECK_FOR_LOOT_PILES  3E54
CHECK_FOR_PLAYER    3ED2
CHECK_FOR_SHOP      3FB2
CHECK_FOR_SHOPS     3F90
CHECK_FOR_WIN_POINT  3FFC
CLASS               2
CLEAR_SCREEN        37C6
COLON_MSG           4A4E
COMBAT              3974
COMBAT_MSG          4D71
CONTINUE_MSG        4CFD
CRLF                442E
CSR_POS_BATTLE      2001
CSR_POS_MOVE        3201
CSR_POS_SHOP_P      3401
CSR_POS_SHOP_S      1801
DAMAGE              1
DAMAGE_LVL_MSG      5134
DAMAGE_UP_MSG       516E
DAMAGE_UP_PRICE     14
DEATH_MSG           51B7
DECORATE            37A8
DECREMENT_TORCH     3D38
DRAW                3410
DRAW_BATTLE_INFO    3584
DRAW_BLANK_TILE     3E46
DRAW_BLOCKED_TILE   3E0E
DRAW_BOTH_TILE      3E1C
DRAW_CASTLE         344C
DRAW_ENEMY          3F50
DRAW_GRAVEYARD      343E
DRAW_HUD            3468
DRAW_ITEM_NUMBER    3562
DRAW_LEFT_TILE      3E2A
DRAW_LOOP           3D58
DRAW_LOOT           3E90
DRAW_MERCHANT       345A
DRAW_PLAYER         3EDA
DRAW_PLAYER_INFO    3488
DRAW_RIGHT_TILE     3E38
DRAW_SHOP           3FBC
DRAW_SHOP_INFO      35FE
DRAW_SKELETON       3430
DRAW_TILE           3DAA
DRAW_WIN_POINT      4008
ENCOUNTER_MSG       4D39
END                 3006
ENDL                37F6
ENEMIES_CHECK       32D0
ENEMIES_LOOP        32DE
ENEMY_ALIVE_CHECK   33D8
ENEMY_CHECK         32FC
ENEMY_DIED          33E2
ENEMY_HEALTH_MSG    5118
ENEMY_MARK          4D31
ENEMY_MAX           2
ENTER_COMBAT        3330
ENTER_SHOP          33B0
ESCAPE_ATTACK       3A12
ESCAPE_MSG          4DD3
EXIT                0
FAIL_ESCAPE         3A30
FAIL_ESCAPE_MSG     4DEE
FAKE_GAMESTATE_MSG  4A78
FIRST_ENEMY         6000
FIRST_LOOT          7000
FIRST_SHOP          6500
FONT                1090000
GAME                3000
GAMELOOP            3170
GAMEPLAY            377A
GAME_STATE          5FF3
GOLD                FFFF
GOLD_MSG            514C
GRAVEYARD_MSG       542E
GREEN               FF00
HEALTH_MSG          510F
HIT_AGAINST_BLOCK   3A82
HIT_AGAINST_BLOCK_MSG  4EEC
HIT_AGAINST_MAGIC   3A9A
HIT_AGAINST_MAGIC_MSG  4F34
HIT_AGAINST_MELEE   3AB2
HIT_AGAINST_MELEE_MSG  4F98
HIT_BY_COUNTER      3ACA
HIT_BY_COUNTER_MSG  4FEE
HIT_BY_MAGIC        3AE6
HIT_BY_MAGIC_MSG    5051
HIT_BY_MELEE        3B02
HIT_BY_MELEE_MSG    50C1
INPUT               311E
INPUT_ERROR_MSG     4A51
INPUT_NUMS_MSG      4A35
INVALID_INPUT       3162
INVENTORY_MSG       5141
KEY_MSG             5154
KEY_PRICE           F
KNIGHT_ROLE_MSG     4A91
KNIGHT_SELECT       3062
KNIGHT_SPEC_MSG     4AE3
LEAVE_SHOP          3C3A
LEAVE_SHOP_MSG      535B
LEFT_TILE           4D23
LIFE_PER_TORCH      F
LOOP_COLUMNS        3D84
LOOP_ENEMIES        3F28
LOOP_LOOT_PILES     3E62
LOOP_MSG            468C
LOOP_ROWS           3D6E
LOOP_SHOPS          3F9E
LOOT_MARK           4D37
LOOT_PILES_CHECK    3224
LOOT_PILE_CHECK     3246
LOOT_PILE_LOOP      3232
L_ACTIVE            5
MAGE_ROLE_MSG       4B31
MAGE_SELECT         3092
MAGE_SPEC_MSG       4B7B
MANAGE_INPUT        3148
MANAGE_TORCH        329C
MAP_LENGTH          F
MAP_START_POINT     8080
MELEE_ATTACK        39E8
MERCHANT_MSG        55D8
MOVEMENT            380C
MOVEMENT_BLOCKED    3962
MOVEMENT_BLOCKED_MSG  4CE2
MOVEMENT_CHECKS     3208
MOVEMENT_MSG        4C50
MOVE_EAST           391E
MOVE_EAST_MSG       4CB7
MOVE_NORTH          384E
MOVE_NORTH_MSG      4CA8
MOVE_SOUTH          3894
MOVE_SOUTH_MSG      4CC5
MOVE_WEST           38DA
MOVE_WEST_MSG       4CD4
NO_ITEM_MSG         53CF
NO_MONEY            3C5C
NO_MONEY_MSG        53AF
NO_POTIONS          3D28
NO_POTIONS_MSG      52A3
NO_SHOP_DAMAGE_UP   3CBA
NO_SHOP_KEYS        3C8A
NO_SHOP_POTIONS     3C72
NO_SHOP_TORCHES     3CA2
NO_TORCH_MSG        53FA
OUT                 37B0
PICKUP_LOOT         325C
PICKUP_LOOT_MSG     5412
PICK_ROLE           301C
PICK_ROLE_MSG       48BE
PLAYER              5FF0
PLAYER_DEAD         31B0
PLAYER_MARK         4D2F
PLAYER_MSG          53A3
PLA_CLASS           5FF2
PLA_DAMAGE          5FF1
PLA_GOLD            5FF8
PLA_KEYS            5FFA
PLA_POTIONS         5FF9
PLA_P_POS           5FF6
PLA_TORCH           5FFB
POSITION            4
POTIONS_MSG         515B
POTION_PRICE        5
PRESS_CONTINUE      3CD2
PURPLE              F000F0
RANDOM_NUMBER       3CEA
RED                 FF
REPLAY              37D2
REPLAY_MSG          477C
RETURN              3D04
RIGHT_TILE          4D27
ROGUE_ROLE_MSG      4BBE
ROGUE_SELECT        30C2
ROGUE_SPEC_MSG      4C06
ROLE_INPUT          3044
SETUP_ENEMIES       433A
SETUP_LOOT          4378
SETUP_PLAYER        43B4
SETUP_SHOPS         43F0
SETUP_WORLD         4048
SHOP                3B1E
SHOPS_CHECK         335A
SHOPS_LOOP          3368
SHOP_CHECK          3386
SHOP_ENTER_MSG      52BD
SHOP_MARK           4D35
SHOP_MAX            2
SHOP_MSG            52EF
SHOP_STOCK_MSG      5397
SKELETON_MSG        54E0
START               1000
S_DAMAGE_IN         5
S_KEYS              3
S_POTIONS           2
S_TORCHES           4
TAKE_POTION         3D06
TAKE_POTION_MSG     5269
TORCHES_MSG         5165
TORCH_MSG           5127
TORCH_PRICE         A
TRY_RUN             3A02
TUTORIAL_INTRO      30F2
TUTORIAL_MSG        468E
UPDATE              3186
UPGRADE_DMG         3C02
WAKE_UP_MSG         47A6
WALL_COLLISIONS     382C
WELCOME             300A
WELCOME_MSG         4431
WHITE               FFFFFF
WIN_MSG             521C
WIN_POINT           8156
WIN_POINT_MARK      4D33
WON_GAME            31DA

00001000 Starting Address
Assembler used: EASy68K Editor/Assembler v5.16.01
Created On: 25/03/2019 00:35:42

00000000                             1  *-------------------------------------------------------
00000000                             2  * Author         : Michael Rainsford Ryan
00000000                             3  * Student Number : C00239510
00000000                             4  * Date Created   : 21/01/2019
00000000                             5  * Description    : A simplified, offline clone of the
00000000                             6  *                : online game "Avalon".
00000000                             7  * Issues/Bugs    : None currenty.
00000000                             8  *-------------------------------------------------------
00000000                             9  
00001000                            10      org $1000
00001000                            11  
00001000                            12  *-------------------------------------------------------
00001000                            13  *Choose to be a Worker or a God 
00001000                            14  *https://www.avalon-rpg.com/
00001000                            15  *-------------------------------------------------------
00001000                            16  
00001000                            17  *-------------------------------------------------------
00001000                            18  *-------------------Game Information-------------------
00001000                            19  *-------------------------------------------------------
00001000                            20  *A6 is used for player coordinates
00001000                            21  *A5 is used for enemy coordinates when in combat or looping through them
00001000                            22  *A5 is used for shops when in shop screen or when looping through them
00001000                            23  *A4 occasionally used for displaying the inventory
00001000                            24  *D5 is used occasionally for input range
00001000                            25  *$5FF0 holds player information
00001000                            26  *$6000 to $64F0 holds enemies
00001000                            27  *$6500 to $6FE0 holds shops
00001000                            28  *$6FE0 to $6FEF Holds locked doors
00001000                            29  *$6FF0 to $6FFF Holds big key locked doors
00001000                            30  *$7000 to $7500 holds loot
00001000                            31  *$8000 to $9000 holds maps
00001000                            32  
00001000                            33  *Enemies:
00001000                            34  *Byte:  Name:
00001000                            35  *0      Health
00001000                            36  *1      Damage/level
00001000                            37  *2      enemy type (Knight, mage, rogue)
00001000                            38  *3      Alive state (1 == alive, 0 == dead)
00001000                            39  *4 & 5  Coordinates
00001000                            40  
00001000                            41  *Player:
00001000                            42  *Byte:  Name:
00001000                            43  *0      Health
00001000                            44  *1      Damage/level
00001000                            45  *2      Class (Knight, mage, rogue)
00001000                            46  *3      Game state
00001000                            47  *4-5+A6 Coordinates
00001000                            48  *6-7    Last coordinates
00001000                            49  *8      Gold
00001000                            50  *9      Potions
00001000                            51  *A      Keys
00001000                            52  *B      Torch life
00001000                            53  
00001000                            54  *Shops:
00001000                            55  *Byte:  Name:
00001000                            56  *0-1    Position
00001000                            57  *2      Potions
00001000                            58  *3      Keys
00001000                            59  *4      Torches
00001000                            60  *5      Damage increase
00001000                            61  
00001000                            62  *Loot:
00001000                            63  *Byte:  Name:
00001000                            64  *0-1    Position
00001000                            65  *2      Potions
00001000                            66  *3      Keys
00001000                            67  *4      Torches
00001000                            68  *5      Gold
00001000                            69  *6      Active State
00001000                            70      
00001000                            71  *Game state : 0 = Pick role/intro | 5 = Move around | 6 = Combat | 7 = Shop | 64 = End game
00001000                            72  *Class      : 1 corresponds to knight - 2 corresponds to mage - 3 corresponds to rogue
00001000                            73  
00001000                            74  
00001000                            75  *-------------------------------------------------------
00001000                            76  *Validation values to be used, modify as needed
00001000                            77  *Add additional validation values as required
00001000                            78  *-------------------------------------------------------
00001000  =00000000                 79  exit        EQU 0      used to exit assembly program
00001000                            80  
00001000                            81  * Text display
00001000  =000000FF                 82  RED         EQU $000000FF   Red colour value
00001000  =0000FF00                 83  GREEN       EQU $0000FF00   Green colour value
00001000  =00FF0000                 84  BLUE        EQU $00FF0000   Blue colour value
00001000  =00FFFFFF                 85  WHITE       EQU $00FFFFFF   White colour value
00001000  =00F000F0                 86  PURPLE      EQU $00F000F0   Purple colour value
00001000  =0000FFFF                 87  GOLD        EQU $0000FFFF   gold colour value
00001000  =00507090                 88  BROWN       EQU $00507090   brown colour value
00001000  =01090000                 89  FONT        EQU $01090000   Font value
00001000                            90  
00001000                            91  * Player
00001000  =00005FF0                 92  PLAYER      EQU $5FF0       Memory address for player information and health
00001000  =00005FF1                 93  PLA_DAMAGE  EQU $5FF1       Memory address for player damage value
00001000  =00005FF2                 94  PLA_CLASS   EQU $5FF2       The memory address for the player class
00001000  =00005FF3                 95  GAME_STATE  EQU $5FF3       The memory address of the game state
00001000  =00005FF6                 96  PLA_P_POS   EQU $5FF6       Memory location of the player's previous position
00001000  =00005FF8                 97  PLA_GOLD    EQU $5FF8       Memory address for player gold
00001000  =00005FF9                 98  PLA_POTIONS EQU $5FF9       Memory address for player potions
00001000  =00005FFA                 99  PLA_KEYS    EQU $5FFA       Memory address for player keys
00001000  =00005FFB                100  PLA_TORCH   EQU $5FFB       Memory address for player torch life
00001000                           101  
00001000                           102  * Enemy
00001000  =00006000                103  FIRST_ENEMY EQU $6000       Memory location of the first enemy
00001000  =0000000E                104  ENEMY_MAX   EQU 14          Number of enemies in the game
00001000                           105  
00001000  =00000001                106  DAMAGE      EQU 1           The number of bytes to move from the enemy before reaching the damage
00001000  =00000002                107  CLASS       EQU 2           The number of bytes to move from the enemy before reaching the class
00001000  =00000003                108  ALIVE       EQU 3           The number of bytes to move from the enemy before reaching the alive state
00001000  =00000004                109  POSITION    EQU 4           The number of bytes to move from the enemy before reaching the position
00001000                           110  
00001000                           111  * Shop & Loot
00001000  =00006500                112  FIRST_SHOP  EQU $6500       Memory location of the first shop
00001000  =00000002                113  SHOP_MAX    EQU 2           Number of shops in the game
00001000                           114  
00001000  =00000002                115  S_POTIONS   EQU 2           The number of bytes to move from the shop root before reaching the potions
00001000  =00000003                116  S_KEYS      EQU 3           The number of bytes to move from the shop root before reaching the keys
00001000  =00000004                117  S_TORCHES   EQU 4           The number of bytes to move from the shop root before reaching the torches
00001000  =00000005                118  S_DAMAGE_IN EQU 5           The number of bytes to move from the shop root before reaching the damage increase
00001000                           119  
00001000  =00007000                120  FIRST_LOOT  EQU $7000       Memory location of the first loot pile
00001000  =00000006                121  L_ACTIVE    EQU 6           The number of bytes to move from the loot pile root before reaching the active state
00001000                           122  
00001000                           123  * HUD
00001000  =00003201                124  CSR_POS_MOVE    EQU $3201   The cursor position to draw the HUD to when in movement state
00001000  =00001901                125  CSR_POS_BATTLE_E    EQU $1901   The cursor position to draw the enemy HUD to when in battle state
00001000  =00003401                126  CSR_POS_BATTLE_P    EQU $3401   The cursor position to draw the player HUD to when in battle state
00001000  =00001801                127  CSR_POS_SHOP_S  EQU $1801   The cursor position to draw the HUD to when in shop state for shop info
00001000  =00003401                128  CSR_POS_SHOP_P  EQU $3401   The cursor position to draw the HUD to when in shop state for player info
00001000                           129  *$2001
00001000                           130  
00001000                           131  * Game
00001000  =00008156                132  WIN_POINT       EQU $8156   The position the player has to get to to win
00001000  =00006FE0                133  FIRST_DOOR      EQU $6FE0   The memory location of the first locked door
00001000  =00000003                134  DOOR_MAX        EQU 3       The number of locked doors in the game
00001000  =00001000                135  OPEN_DOOR_POS   EQU $1000   The position doors are given when opened
00001000                           136  
00001000  =00000005                137  POTION_PRICE    EQU 5       The price in gold for a potion
00001000  =0000000F                138  KEY_PRICE       EQU 15      The price in gold for a key
00001000  =0000000A                139  TORCH_PRICE     EQU 10      The price in gold for a torch
00001000  =00000014                140  DAMAGE_UP_PRICE EQU 20      The price in gold for a damage upgrade
00001000                           141  
00001000  =0000000F                142  LIFE_PER_TORCH  EQU 15      The life value each torch has
00001000                           143  
00001000  =00008080                144  MAP_START_POINT EQU $8080   The starting coordinates the map draws at
00001000  =0000000F                145  MAP_LENGTH      EQU 15      The number of tiles downwords the map will draw
00001000                           146  
00001000                           147  
00001000                           148  *Start of Game
00001000                           149  start:
00001000  6100 39C2                150      bsr     setup_player
00001004  6100 3318                151      bsr     setup_world
00001008  6100 361A                152      bsr     setup_enemies
0000100C  6100 39F2                153      bsr     setup_shops
00001010  6100 37B8                154      bsr     setup_loot
00001014                           155  
00001014  6100 1FF4                156      bsr     welcome    branch to the welcome subroutine
00001018  6100 2F1E                157      bsr     press_continue
0000101C  6100 1FE2                158      bsr     game       branch to the game subroutine
00001020                           159  *Game loop
00003000                           160      org     $3000      the rest of the program is to be located from 3000 onwards
00003000                           161  
00003000                           162  *-------------------------------------------------------
00003000                           163  *-------------------Game Subroutine---------------------
00003000                           164  *-------------------------------------------------------
00003000                           165  game:
00003000  6100 0192                166      bsr     gameloop   branch to gameloop subroutine
00003004  4E75                     167      rts                return from game: subroutine
00003006                           168            
00003006                           169  end:
00003006  FFFF FFFF                170      simhalt
0000300A                           171  
0000300A                           172  *-------------------------------------------------------
0000300A                           173  *-------------------Welcome Subroutine------------------
0000300A                           174  *-------------------------------------------------------
0000300A                           175  welcome:
0000300A  43F9 00004A41            176      lea     welcome_msg,A1  assign message to address register A1
00003010  103C 000E                177      move.b  #14,D0          move literal 14 to DO
00003014  4E4F                     178      trap    #15             trap and interpret value in D0
00003016  6100 0964                179      bsr     endl            branch to endl subroutine
0000301A                           180      
0000301A  4E75                     181      rts                     return from welcome: subroutine
0000301C                           182  
0000301C                           183  *-------------------------------------------------------
0000301C                           184  *-------------------Role Picking Subroutine------------------
0000301C                           185  *-------------------------------------------------------
0000301C                           186  pick_role:
0000301C                           187  
0000301C  43F9 00004E0A            188      lea     wake_up_msg,A1  assign message to address register A1
00003022  103C 000E                189      move.b  #14,D0          move literal 14 to DO
00003026  4E4F                     190      trap    #15             trap and interpret value in D0
00003028  6100 0952                191      bsr     endl            branch to endl subroutine
0000302C                           192      
0000302C  43F9 00004F22            193      lea     pick_role_msg,A1 assign message to address register A1
00003032  103C 000E                194      move.b  #14,D0           move literal 14 to DO
00003036  4E4F                     195      trap    #15              trap and interpret value in D0
00003038                           196      
00003038  7A03                     197      move.l  #3,D5           Move the number 3 to D5 to tell the program how many options there are
0000303A                           198      
0000303A  6100 00E2                199      bsr     input           branch to the input subroutine
0000303E                           200      
0000303E  6100 0EF8                201      bsr     press_continue          Pause the game until a key is pressed
00003042                           202      
00003042  4E75                     203      rts                     return from pick_role subroutine
00003044                           204      
00003044                           205  role_input:
00003044  11C1 5FF2                206      move.b  D1,PLA_CLASS    Move the role number to player class memory location to hold the class number
00003048                           207      
00003048                           208      *Give the player a message depending on the role chosen
00003048  B23C 0001                209      CMP.B   #1,D1
0000304C  6700 0014                210      BEQ     knight_select   Branch to knight message if role selected
00003050                           211      
00003050  B23C 0002                212      CMP.B   #2,D1
00003054  6700 003C                213      BEQ     mage_select     Branch to mage message if role selected
00003058                           214      
00003058  B23C 0003                215      CMP.B   #3,D1
0000305C  6700 0064                216      BEQ     rogue_select    Branch to rogue message if role selected
00003060                           217      
00003060  4E75                     218      rts
00003062                           219      
00003062                           220  knight_select:
00003062  43F9 000050F5            221      lea     knight_role_msg,A1  assign message to address register A1
00003068  103C 000E                222      move.b  #14,D0              move literal 14 to DO
0000306C  4E4F                     223      trap    #15                 Display the knight message
0000306E                           224      
0000306E  223C 00F000F0            225      move.l  #PURPLE,D1          Load the purple colour
00003074  6100 0F36                226      bsr     change_font_colour  Change the font colour
00003078                           227      
00003078  43F9 00005147            228      lea     knight_spec_msg,A1  assign message to address register A1
0000307E  103C 000E                229      move.b  #14,D0              move literal 14 to DO
00003082  4E4F                     230      trap    #15                 Display the knight message
00003084                           231      
00003084  223C 00FFFFFF            232      move.l  #WHITE,D1           Load the white colour
0000308A  6100 0F20                233      bsr     change_font_colour  Change the font colour
0000308E                           234      
0000308E  6000 0062                235      bra     tutorial_intro      Branch to tutorial subroutine
00003092                           236  
00003092                           237  mage_select:
00003092  43F9 00005195            238      lea     mage_role_msg,A1    Assign message to address register A1
00003098  103C 000E                239      move.b  #14,D0              move literal 14 to DO
0000309C  4E4F                     240      trap    #15                 Display the mage message
0000309E                           241      
0000309E  223C 00F000F0            242      move.l  #PURPLE,D1          Load the purple colour
000030A4  6100 0F06                243      bsr     change_font_colour  Change the font colour
000030A8                           244      
000030A8  43F9 000051DF            245      lea     mage_spec_msg,A1    assign message to address register A1
000030AE  103C 000E                246      move.b  #14,D0              move literal 14 to DO
000030B2  4E4F                     247      trap    #15                 Display the mage message
000030B4                           248      
000030B4  223C 00FFFFFF            249      move.l  #WHITE,D1           Load the white colour
000030BA  6100 0EF0                250      bsr     change_font_colour  Change the font colour
000030BE                           251      
000030BE  6000 0032                252      bra     tutorial_intro      Branch to tutorial subroutine
000030C2                           253  
000030C2                           254  rogue_select:
000030C2  43F9 00005222            255      lea     rogue_role_msg,A1   Assign message to address register A1
000030C8  103C 000E                256      move.b  #14,D0              move literal 14 to DO
000030CC  4E4F                     257      trap    #15                 Display the rogue message
000030CE                           258      
000030CE  223C 00F000F0            259      move.l  #PURPLE,D1          Load the purple colour
000030D4  6100 0ED6                260      bsr     change_font_colour  Change the font colour
000030D8                           261      
000030D8  43F9 0000526A            262      lea     rogue_spec_msg,A1   Assign message to address register A1
000030DE  103C 000E                263      move.b  #14,D0              move literal 14 to DO
000030E2  4E4F                     264      trap    #15                 Display the rogue message
000030E4                           265      
000030E4  223C 00FFFFFF            266      move.l  #WHITE,D1           Load the white colour
000030EA  6100 0EC0                267      bsr     change_font_colour  Change the font colour
000030EE                           268      
000030EE  6000 0002                269      bra     tutorial_intro      Branch to tutorial subroutine
000030F2                           270      
000030F2                           271  tutorial_intro:
000030F2  6100 0888                272      bsr     endl                Break to a new line
000030F6                           273  
000030F6  223C 000000FF            274      move.l  #RED,D1             Load the purple colour
000030FC  6100 0EAE                275      bsr     change_font_colour  Change the font colour
00003100                           276      
00003100  43F9 00004CF2            277      lea     tutorial_msg,A1     Load tutorial message to address register A1
00003106  103C 000E                278      move.b  #14,D0              move literal 14 to DO
0000310A  4E4F                     279      trap    #15                 Display the tutorial message
0000310C                           280      
0000310C  223C 00FFFFFF            281      move.l  #WHITE,D1           Load the white colour
00003112  6100 0E98                282      bsr     change_font_colour  Change the font colour
00003116                           283      
00003116  11FC 0005 5FF3           284      move.b  #5,GAME_STATE       Change the game state to the movement state
0000311C                           285      
0000311C  4E75                     286      rts
0000311E                           287      
0000311E                           288  *-------------------------------------------------------
0000311E                           289  *---------Gameplay Input Values Subroutine--------------
0000311E                           290  *-------------------------------------------------------    
0000311E                           291  input:
0000311E  6100 085C                292      bsr     endl            Branch to end line subroutine
00003122  6100 0E9A                293      bsr     get_cursor_pos  Get the position of the cursor in D3
00003126                           294      
00003126  43F9 00005099            295      lea     input_nums_msg,A1 assign message to address register A1
0000312C  103C 000E                296      move.b  #14,D0          move literal 14 to DO
00003130  4E4F                     297      trap    #15             Display the "enter number" message
00003132                           298      
00003132  2205                     299      move.l  D5,D1           Move the number of options to D1 to display it
00003134  103C 0003                300      move.b  #3,D0           move literal 3 to DO
00003138  4E4F                     301      trap    #15             Display the number in D1 to show the input range
0000313A                           302      
0000313A  43F9 000050B2            303      lea     colon_msg,A1    assign message to address register A1
00003140  103C 000E                304      move.b  #14,D0          move literal 14 to DO
00003144  4E4F                     305      trap    #15             Display a colon after the number range
00003146                           306      
00003146  103C 0004                307      move.b  #4,D0           Move the number 4 to D0
0000314A  4E4F                     308      trap    #15             Take input
0000314C                           309      
0000314C  1A01                     310      move.b  D1,D5           Move the input to D5 for later
0000314E                           311      
0000314E  3203                     312      move.w  D3,D1           Move the cursor position of the start of the line
00003150  103C 000B                313      move.b  #11,D0          Move the number literal 11 to D0 for trap command
00003154  4E4F                     314      trap    #15             Move the cursor back to the start of the line
00003156                           315      
00003156  43F9 00004C9E            316      lea     blank_msg,A1    Load the blank message into A1 to wipe the line blank
0000315C  103C 000E                317      move.b  #14,D0          Move number literal to D0 for trap command
00003160  4E4F                     318      trap    #15             Display the loaded message
00003162                           319      
00003162  103C 000B                320      move.b  #11,D0          Move the number literal 11 to D0 for trap command
00003166  4E4F                     321      trap    #15             Move the cursor back to the start of the line
00003168                           322      
00003168  4281                     323      clr.l   D1              Clear D1 of large values
0000316A  1205                     324      move.b  D5,D1           Move the input back to D1
0000316C                           325      
0000316C                           326  manage_input:
0000316C  B27C 0001                327      CMP     #1,D1           Check input against minimum value
00003170  6D00 0014                328      BLT     invalid_input   Error if less than 1
00003174                           329      
00003174  B245                     330      CMP     D5,D1           Compare input against max value
00003176  6E00 000E                331      BGT     invalid_input   Error if more than max value
0000317A                           332      
0000317A  0C38 0000 5FF3           333      CMP.B   #0,GAME_STATE   Check which state the game is in
00003180  6700 FEC2                334      BEQ     role_input      Branch to the manage input for the role picking
00003184                           335      
00003184  4E75                     336      rts                     Return out of subroutine
00003186                           337  
00003186                           338  invalid_input:
00003186  43F9 000050B5            339      lea     input_error_msg,A1 assign message to address register A1
0000318C  103C 000E                340      move.b  #14,D0          move literal 14 to DO
00003190  4E4F                     341      trap    #15             Display the error message
00003192                           342      
00003192  608A                     343      bra     input           Go back to taking input
00003194                           344  
00003194                           345  *-------------------------------------------------------
00003194                           346  *----------------Gameloop (main loop)-------------------
00003194                           347  *------------------------------------------------------- 
00003194                           348  gameloop:
00003194  6100 07B8                349      bsr     clear_screen    clears the screen  
00003198  6100 0300                350      bsr     draw            branch to draw screen subroutine
0000319C  6100 0346                351      bsr     draw_hud
000031A0  6100 0008                352      bsr     update          branch to update game subroutine 
000031A4  6100 075C                353      bsr     gameplay        branch to gameplay subroutine
000031A8  60EA                     354      bra     gameloop        Continue looping the game loop     
000031AA                           355  
000031AA                           356  *-------------------------------------------------------
000031AA                           357  *----------------Update Quest Progress------------------
000031AA                           358  *  Complete Quest
000031AA                           359  *------------------------------------------------------- 
000031AA                           360  update:
000031AA  0C38 0000 5FF0           361      CMP.B   #0,PLAYER           Check if the player health is zero
000031B0  6F00 0022                362      BLE     player_dead         Player is dead if health is zero or below
000031B4                           363      
000031B4  BDFC 00008156            364      CMP.L   #WIN_POINT,A6       Check if the player is standing on the win point
000031BA  6700 0042                365      BEQ     won_game            Branch to the won game subroutine
000031BE                           366  
000031BE  0C38 0005 5FF3           367      CMP.B   #5,GAME_STATE       Check which state the game is in
000031C4  6700 005E                368      BEQ     movement_checks     Check for enemies and shops if in movement state
000031C8  0C38 0006 5FF3           369      CMP.B   #6,GAME_STATE       Check which state the game is in
000031CE  6700 0292                370      BEQ     enemy_alive_check   Check if enemy is dead if in combat
000031D2                           371      
000031D2  4E75                     372      rts
000031D4                           373      
000031D4                           374  *-------------------------------------------------------
000031D4                           375  *---------------------Win or Lose----------------------- 
000031D4                           376  player_dead:
000031D4  6100 07A6                377      bsr     endl            Break to new line
000031D8                           378      
000031D8  43F9 0000588A            379      lea     death_msg,A1    Load the death message
000031DE  103C 000E                380      move.b  #14,D0          Move byte #14 to D0 for the trap command
000031E2  4E4F                     381      trap    #15             Display the loaded message
000031E4                           382  
000031E4  6100 0D52                383      bsr     press_continue  Pause to get input
000031E8  6100 0764                384      bsr     clear_screen    Clear the screen
000031EC  6100 02DA                385      bsr     draw_graveyard  Draw a graveyard
000031F0  6100 078A                386      bsr     endl            Break to new line
000031F4  11FC 0040 5FF3           387      move.b  #64,GAME_STATE  Set the game state to end game
000031FA  6000 075E                388      bra     replay          Give the player the option to restart or quit
000031FE                           389      
000031FE                           390  won_game:
000031FE  6100 077C                391      bsr     endl            Break to new line
00003202                           392      
00003202  43F9 000058EF            393      lea     win_msg,A1      Load the win message
00003208  103C 000E                394      move.b  #14,D0          Move byte #14 to D0 for the trap command
0000320C  4E4F                     395      trap    #15             Display the loaded message
0000320E                           396  
0000320E  6100 0D28                397      bsr     press_continue  Pause to get input
00003212  6100 073A                398      bsr     clear_screen    Clear the screen
00003216  6100 0764                399      bsr     endl            Break to new line
0000321A  11FC 0040 5FF3           400      move.b  #64,GAME_STATE  Set the game state to end game
00003220  6000 0738                401      bra     replay          Give the player the option to restart or quit
00003224                           402  
00003224                           403  *-------------------------------------------------------
00003224                           404  *--------------------Movement State--------------------- 
00003224                           405  movement_checks:
00003224  6100 0100                406      bsr     manage_torch    Check if the torch life is zero and if damage player if so
00003228  6100 0016                407      bsr     loot_piles_check Check for loot piles under the player 
0000322C  6100 012C                408      bsr     enemies_check   Check for enemies beside the player
00003230  0C38 0005 5FF3           409      CMP.B   #5,GAME_STATE   Compare the movement gamestate number with the current gamestate
00003236  6600 0D32                410      BNE     return          Return from the loop if the game is not in the movement state anymore
0000323A  6100 01A8                411      bsr     shops_check     Check for shops beside the player
0000323E                           412      
0000323E  4E75                     413      rts
00003240                           414  
00003240                           415  *-------------------Loot pile checks--------------------
00003240                           416  loot_piles_check:
00003240  4BF8 7000                417      lea     FIRST_LOOT,A5   Load the memory address of the first loot pile
00003244  1A3C 0000                418      move.b  #0,D5           Move the starting loot number to D5
00003248  6100 0004                419      bsr     loot_pile_loop  Loop through all loot piles
0000324C  4E75                     420      rts                     Return from subroutine
0000324E                           421      
0000324E                           422  loot_pile_loop:
0000324E  BA3C 000E                423      CMP.B   #ENEMY_MAX,D5   Compare the loot number with the maximum enemy number
00003252  6C00 0D16                424      BGE     return          Return from the loop if the current loot number is greater than or equal to the max
00003256                           425  
00003256  6100 000A                426      bsr     loot_pile_check Check for a loot pile
0000325A                           427      
0000325A  5205                     428      add.b   #1,D5           Add to the current loot number
0000325C  DAFC 0010                429      add.w   #16,A5          Add to the current loot pointer to move to the next loot pile
00003260  60EC                     430      bra     loot_pile_loop  Keep looping the loot piles
00003262                           431      
00003262                           432  loot_pile_check:
00003262  5C4D                     433      add.w   #L_ACTIVE,A5    Move to the active state
00003264  0C15 0000                434      CMP.B   #0,(A5)         Check if the loot is active
00003268  5D4D                     435      sub.w   #L_ACTIVE,A5    Move to the active state
0000326A  6700 0CFE                436      BEQ     return          Return if not active
0000326E                           437  
0000326E  3415                     438      move.w  (A5),D2         Move the loot pile position to D2 for large value comparison
00003270  BDC2                     439      CMP.L   D2,A6           Check if the player is on a loot pile   
00003272  6700 0004                440      BEQ     pickup_loot     Pickup the loot
00003276                           441      
00003276  4E75                     442      rts     Return if not touching a loot pile
00003278                           443      
00003278                           444  pickup_loot:
00003278  6100 0702                445      bsr     endl                Line break
0000327C                           446  
0000327C  223C 0000FFFF            447      move.l  #GOLD,D1            Load gold colour
00003282  6100 0D28                448      bsr     change_font_colour  Change the font colour
00003286                           449      
00003286  43F9 00005AD9            450      LEA     pickup_loot_msg,A1  Load the encounter message int A1
0000328C  103C 000E                451      move.b  #14,D0              Move #14 to D0 to display message
00003290  4E4F                     452      trap    #15                 Display the loaded message
00003292                           453      
00003292  544D                     454      add.w   #S_POTIONS,A5       Move to potions number
00003294  1215                     455      move.b  (A5),D1            Move the loot potions number to D1 and increment
00003296  D338 5FF9                456      add.b   D1,PLA_POTIONS      Give the player the number of potions in the loot
0000329A                           457      
0000329A  43F9 00005AFD            458      LEA     pickup_potion_msg,A1  Load the pickup potions message into A1
000032A0  103C 000E                459      move.b  #14,D0              Move #14 to D0 to display message
000032A4  4E4F                     460      trap    #15                 Display the loaded message
000032A6                           461      
000032A6  384D                     462      move.w  A5,A4               Move the item number to A4 to draw it
000032A8  6100 0636                463      bsr     draw_item_number    Draw the item number
000032AC  6100 06CE                464      bsr     endl                Break to new line
000032B0  524D                     465      add.w   #1,A5               Move to the next item in the loot pile
000032B2                           466      
000032B2  1215                     467      move.b  (A5),D1             Move the key number to D1 and increment
000032B4  D338 5FFA                468      add.b   D1,PLA_KEYS         Give the player the number of keys in the loot
000032B8                           469      
000032B8  43F9 00005B07            470      LEA     pickup_key_msg,A1   Load the pickup key message into A1
000032BE  103C 000E                471      move.b  #14,D0              Move #14 to D0 to display message
000032C2  4E4F                     472      trap    #15                 Display the loaded message
000032C4                           473      
000032C4  384D                     474      move.w  A5,A4               Move the item number to A4 to draw it
000032C6  6100 0618                475      bsr     draw_item_number    Draw the item number
000032CA  6100 06B0                476      bsr     endl                Break to new line
000032CE  524D                     477      add.w   #1,A5               Move to the next item in the loot pile
000032D0                           478      
000032D0  1215                     479      move.b  (A5),D1             Move the torch number to D1 and increment
000032D2  D338 5FFB                480      add.b   D1,PLA_TORCH        Give the player the number of torches in the loot
000032D6                           481      
000032D6  43F9 00005B0E            482      LEA     pickup_torch_msg,A1 Load the pickup torch message into A1
000032DC  103C 000E                483      move.b  #14,D0              Move #14 to D0 to display message
000032E0  4E4F                     484      trap    #15                 Display the loaded message
000032E2                           485      
000032E2  384D                     486      move.w  A5,A4               Move the item number to A4 to draw it
000032E4  6100 05FA                487      bsr     draw_item_number    Draw the item number
000032E8  6100 0692                488      bsr     endl                Break to new line
000032EC  524D                     489      add.w   #1,A5               Move to the next item in the loot pile
000032EE                           490      
000032EE  1215                     491      move.b  (A5),D1             Move the torch number to D1 and increment
000032F0  D338 5FF8                492      add.b   D1,PLA_GOLD         Give the player the number of gold in the loot
000032F4                           493      
000032F4  43F9 00005AF5            494      LEA     pickup_gold_msg,A1  Load the pickup gold message int A1
000032FA  103C 000E                495      move.b  #14,D0              Move #14 to D0 to display message
000032FE  4E4F                     496      trap    #15                 Display the loaded message
00003300                           497      
00003300  384D                     498      move.w  A5,A4               Move the item number to A4 to draw it
00003302  6100 05DC                499      bsr     draw_item_number    Draw the item number
00003306  6100 0674                500      bsr     endl                Break to new line
0000330A  524D                     501      add.w   #1,A5               Move to the next item in the loot pile
0000330C                           502      
0000330C  1ABC 0000                503      move.b  #0,(A5)             Set the loot to not active
00003310  5D4D                     504      sub.w   #L_ACTIVE,A5        Move to active state
00003312                           505      
00003312  223C 00FFFFFF            506      move.l  #WHITE,D1           Load the white colour
00003318  6100 0C92                507      bsr     change_font_colour  Change the font colour
0000331C                           508      
0000331C  6100 0C1A                509      bsr     press_continue      Wait for user input
00003320  6100 01C2                510      bsr     draw_hud            Re-draw the hud
00003324                           511      
00003324  4E75                     512      rts
00003326                           513  
00003326                           514  *---------------------Manage Torch----------------------
00003326                           515  manage_torch:
00003326  0C38 0000 5FFB           516      CMP.B   #0,PLA_TORCH    Compare the torch life with zero
0000332C  6E00 0C3C                517      BGT     return          Return if the torch life is greater than zero
00003330                           518      
00003330  5338 5FF0                519      sub.b   #1,PLAYER       Remove one health from the player
00003334                           520      
00003334  6100 0646                521      bsr     endl            Break to new line
00003338                           522      
00003338  223C 000000FF            523      move.l  #RED,D1
0000333E  6100 0C6C                524      bsr     change_font_colour  Change the font colour
00003342                           525      
00003342  43F9 00005AC1            526      lea     no_torch_msg,A1 Load the no torch message into A1
00003348  103C 000E                527      move.b  #14,D0          Move the number literal 14 into D0 for trap command
0000334C  4E4F                     528      trap    #15             Display the loaded message
0000334E                           529      
0000334E  223C 00FFFFFF            530      move.l  #WHITE,D1
00003354  6100 0C56                531      bsr     change_font_colour  Change the font colour
00003358                           532      
00003358  4E75                     533      rts                     Return from the subroutine
0000335A                           534  
0000335A                           535  *--------------------Enemy Checking--------------------- 
0000335A                           536  enemies_check:
0000335A  4BF8 6000                537      lea     FIRST_ENEMY,A5  Load the memory address of the first enemy
0000335E  1A3C 0000                538      move.b  #0,D5           Move the starting enemy number to D5
00003362  6100 0004                539      bsr     enemies_loop    Loop through all enemies
00003366  4E75                     540      rts                     Return from subroutine
00003368                           541      
00003368                           542  enemies_loop:
00003368  BA3C 000E                543      CMP.B   #ENEMY_MAX,D5   Compare the enemy number with the maximum enemy number
0000336C  6C00 0BFC                544      BGE     return          Return from the loop if the current enemy number is greater than or equal to the max
00003370                           545  
00003370  6100 0014                546      bsr     enemy_check     Check for an enemy
00003374                           547      
00003374  0C38 0005 5FF3           548      CMP.B   #5,GAME_STATE   Compare the movement gamestate number with the current gamestate
0000337A  6600 0BEE                549      BNE     return          Return from the loop if the game is not in the movement state anymore
0000337E                           550      
0000337E  5205                     551      add.b   #1,D5           Add to the current enemy number
00003380  DAFC 000C                552      add.w   #12,A5          Add to the current enemy pointer to move to the next enemy (16 for next enemy - 4 to get back from position)
00003384  60E2                     553      bra     enemies_loop    Keep looping the enemies
00003386                           554      
00003386                           555  
00003386                           556  enemy_check:
00003386  564D                     557      add.w   #ALIVE,A5       Move into enemy information to check if its alive
00003388  0C1D 0000                558      CMP.B   #0,(A5)+        Check if the enemy is alive
0000338C  6700 0BDC                559      BEQ     return          Return from the check if the enemy is dead
00003390                           560      
00003390  340E                     561      move.w  A6,D2           Move the player position to D2
00003392                           562      
00003392                           563      *Check if the player is beside an enemy
00003392  0442 0010                564      sub.w   #16,D2          Check north
00003396  B455                     565      CMP.W   (A5),D2           
00003398  6700 0020                566      BEQ     enter_combat    Enter the player into combat
0000339C                           567      
0000339C  0642 0020                568      add.w   #32,D2          Check south
000033A0  B455                     569      CMP.W   (A5),D2           
000033A2  6700 0016                570      BEQ     enter_combat    Enter the player into combat
000033A6                           571      
000033A6  0442 0011                572      sub.w   #17,D2          Check west
000033AA  B455                     573      CMP.W   (A5),D2           
000033AC  6700 000C                574      BEQ     enter_combat    Enter the player into combat
000033B0                           575      
000033B0  5442                     576      add.w   #2,D2           Check east
000033B2  B455                     577      CMP.W   (A5),D2           
000033B4  6700 0004                578      BEQ     enter_combat    Enter the player into combat
000033B8                           579      
000033B8  4E75                     580      rts     Return if not touching an enemy
000033BA                           581      
000033BA                           582  enter_combat:
000033BA  594D                     583      sub.w   #4,A5               Get the memory address of the enemy opposed to it's position
000033BC  11FC 0006 5FF3           584      move.b  #6,GAME_STATE       Move to combat state
000033C2                           585      
000033C2  6100 05B8                586      bsr     endl                Line break
000033C6                           587      
000033C6  43F9 000053EF            588      LEA     encounter_msg,A1    Load the encounter message int A1
000033CC  103C 000E                589      move.b  #14,D0              Move #14 to D0 to display message
000033D0  4E4F                     590      trap    #15                 Display the loaded message
000033D2                           591      
000033D2  6100 0B64                592      bsr     press_continue      Branch to the press to continue subroutine
000033D6                           593      
000033D6  6100 0576                594      bsr     clear_screen        Clear the screen
000033DA                           595      
000033DA  6100 00DE                596      bsr     draw_skeleton       Draw the enemy
000033DE  6100 02BA                597      bsr     draw_battle_info    Draw the info
000033E2                           598      
000033E2  4E75                     599      rts
000033E4                           600        
000033E4                           601  *--------------------Shop Checking----------------------
000033E4                           602  shops_check:
000033E4  4BF8 6500                603      lea     FIRST_SHOP,A5   Load the memory address of the first shop
000033E8  1A3C 0000                604      move.b  #0,D5           Move the starting shop number to D5
000033EC  6100 0004                605      bsr     shops_loop      Loop through all shops
000033F0  4E75                     606      rts                     Return from subroutine
000033F2                           607      
000033F2                           608  shops_loop:
000033F2  BA3C 0002                609      CMP.B   #SHOP_MAX,D5    Compare the shop number with the maximum shop number
000033F6  6C00 0B72                610      BGE     return          Return from the loop if the current shop number is greater than or equal to the max
000033FA                           611      
000033FA  6100 0014                612      bsr     shop_check      Check for a shop
000033FE                           613      
000033FE  0C38 0005 5FF3           614      CMP.B   #5,GAME_STATE   Compare the movement gamestate number with the current gamestate
00003404  6600 0B64                615      BNE     return          Return from the loop if the game is not in the movement state anymore
00003408                           616      
00003408  5205                     617      add.b   #1,D5           Add to the current shop number
0000340A  DAFC 0010                618      add.w   #16,A5          Add to the current shop pointer to move to the next shop
0000340E  60E2                     619      bra     shops_loop      Keep looping the shops
00003410                           620      
00003410                           621  shop_check:    
00003410  340E                     622      move.w  A6,D2           Move the player position to D2
00003412                           623      
00003412                           624      *Check if the player is beside a shop
00003412  0442 0010                625      sub.w   #16,D2          Check north
00003416  B455                     626      CMP.W   (A5),D2           
00003418  6700 0020                627      BEQ     enter_shop      The player enters a shop
0000341C                           628      
0000341C  0642 0020                629      add.w   #32,D2          Check south
00003420  B455                     630      CMP.W   (A5),D2           
00003422  6700 0016                631      BEQ     enter_shop      The player enters a shop
00003426                           632      
00003426  0442 0011                633      sub.w   #17,D2          Check west
0000342A  B455                     634      CMP.W   (A5),D2           
0000342C  6700 000C                635      BEQ     enter_shop      The player enters a shop
00003430                           636      
00003430  5442                     637      add.w   #2,D2           Check east
00003432  B455                     638      CMP.W   (A5),D2           
00003434  6700 0004                639      BEQ     enter_shop      The player enters a shop
00003438                           640      
00003438  4E75                     641      rts     Return if not touching a shop
0000343A                           642      
0000343A                           643  enter_shop:
0000343A  11FC 0007 5FF3           644      move.b  #7,GAME_STATE       Move to shop game state
00003440                           645      
00003440  6100 053A                646      bsr     endl                Line break
00003444                           647      
00003444  43F9 00005990            648      LEA     shop_enter_msg,A1   Load the encounter message int A1
0000344A  103C 000E                649      move.b  #14,D0              Move #14 to D0 to display message
0000344E  4E4F                     650      trap    #15                 Display the loaded message
00003450                           651      
00003450  6100 0AE6                652      bsr     press_continue      Branch to the press to continue subroutine
00003454                           653      
00003454  6100 04F8                654      bsr     clear_screen        Clear the screen
00003458                           655      
00003458  6100 007C                656      bsr     draw_merchant       Draw the merchant
0000345C  6100 034E                657      bsr     draw_shop_info      Draw the info
00003460                           658      
00003460  4E75                     659      rts
00003462                           660  
00003462                           661  *-------------------------------------------------------
00003462                           662  *---------------------Combat State---------------------- 
00003462                           663  enemy_alive_check:
00003462  0C15 0000                664      CMP.B   #0,(A5)     Compare the enemy health with zero
00003466  6F00 0004                665      BLE     enemy_died  If the enemy health is zero or below, they died
0000346A                           666      
0000346A  4E75                     667      rts
0000346C                           668      
0000346C                           669  enemy_died:
0000346C  6100 050E                670      bsr     endl            Break to a new line
00003470                           671  
00003470  43F9 00005854            672      lea     battle_won_msg,A1   Load the won battle message
00003476  103C 000E                673      move.b  #14,D0              Move the literal #14 to D0 for trap task #14
0000347A  4E4F                     674      trap    #15                 Display the message
0000347C                           675      
0000347C  11FC 0005 5FF3           676      move.b  #5,GAME_STATE   Set the game state mack to movement state
00003482  564D                     677      add.w   #ALIVE,A5       Move from the enemy health to its alive status
00003484  1ABC 0000                678      move.b  #0,(A5)         Set the enemy as dead
00003488                           679      
00003488  6100 0AAE                680      bsr     press_continue
0000348C                           681      
0000348C  6100 04C0                682      bsr     clear_screen    Clear the screen
00003490  6100 0008                683      bsr     draw            Draw the map for first frame back in movement
00003494  6100 004E                684      bsr     draw_hud        Draw the hud for first frame back in movement
00003498                           685      
00003498  4E75                     686      rts
0000349A                           687      
0000349A                           688  *-------------------------------------------------------
0000349A                           689  *-----------------Draw Quest Updates--------------------
0000349A                           690  * Draw the game progress information, status regarding
0000349A                           691  * quest
0000349A                           692  *------------------------------------------------------- 
0000349A                           693  draw:
0000349A  0C38 0005 5FF3           694      CMP.B   #5,GAME_STATE   Check which state the game is in
000034A0  6700 0B2A                695      BEQ     draw_loop       If in the movement state, draw the map
000034A4  0C38 0006 5FF3           696      CMP.B   #6,GAME_STATE   Check which state the game is in
000034AA  6700 000E                697      BEQ     draw_skeleton   If in the combat state, draw the enemy
000034AE  0C38 0007 5FF3           698      CMP.B   #7,GAME_STATE   Check which state the game is in
000034B4  6700 0020                699      BEQ     draw_merchant   If in the shop state, draw the enemy
000034B8  4E75                     700      rts
000034BA                           701      
000034BA                           702  draw_skeleton:
000034BA  43F9 00005CC7            703      lea     skeleton_msg,A1 Load the skeleton message
000034C0  103C 000E                704      move.b  #14,D0          Move literal 14 for display message trap command
000034C4  4E4F                     705      trap    #15             Display the loaded message
000034C6                           706      
000034C6  4E75                     707      rts
000034C8                           708      
000034C8                           709  draw_graveyard:
000034C8  43F9 00005C15            710      lea     graveyard_msg,A1 Load the graveyard message
000034CE  103C 000E                711      move.b  #14,D0           Move literal 14 for display message trap command
000034D2  4E4F                     712      trap    #15              Display the loaded message
000034D4  4E75                     713      rts                      Return from the subroutine
000034D6                           714      
000034D6                           715  draw_merchant:
000034D6  43F9 00005DBF            716      lea     merchant_msg,A1  Load the merchant message
000034DC  103C 000E                717      move.b  #14,D0           Move literal 14 for display message trap command
000034E0  4E4F                     718      trap    #15              Display the loaded message
000034E2                           719      
000034E2  4E75                     720      rts
000034E4                           721      
000034E4                           722  draw_hud:
000034E4  0C38 0005 5FF3           723      CMP.B   #5,GAME_STATE       Check which state the game is in
000034EA  6700 0018                724      BEQ     draw_player_info    If in the movement state, draw the player info
000034EE  0C38 0006 5FF3           725      CMP.B   #6,GAME_STATE       Check which state the game is in
000034F4  6700 01A4                726      BEQ     draw_battle_info    If in the combat state, draw the combat info
000034F8  0C38 0007 5FF3           727      CMP.B   #7,GAME_STATE       Check which state the game is in
000034FE  6700 02AC                728      BEQ     draw_shop_info      If in the shop state, draw the shop info
00003502                           729      
00003502  4E75                     730      rts
00003504                           731  
00003504                           732  *-------------------Draw Player Info--------------------
00003504                           733  draw_player_info:
00003504  6100 0AB8                734      bsr     get_cursor_pos   Get the cursor position and store it in D3
00003508                           735      
00003508                           736      * Display the player health
00003508  3A3C 3201                737      move.w  #CSR_POS_MOVE,D5 Move a start cursor position to D5
0000350C  323C 3201                738      move.w  #CSR_POS_MOVE,D1 Move a start cursor position to D1 to move the cursor
00003510  4E4F                     739      trap    #15              Move the cursor position
00003512  4281                     740      clr.l   D1               Clear the cursor position from D1
00003514                           741      
00003514  43F9 000057C5            742      lea     health_msg,A1   Load the hud message
0000351A  103C 000E                743      move.b  #14,D0          Move literal 14 for display message trap command
0000351E  4E4F                     744      trap    #15             Display the loaded message
00003520                           745      
00003520  1238 5FF0                746      move.b  PLAYER,D1       Move the player health value to D1 to display
00003524  103C 0003                747      move.b  #3,D0           Move literal 3 for display number trap command
00003528  4E4F                     748      trap    #15             Display the number in D1
0000352A                           749      
0000352A                           750      * Display the torch life
0000352A  6100 03A6                751      bsr     next_cursor_pos  Move to the next cursor position
0000352E                           752      
0000352E  43F9 000057FA            753      lea     torch_msg,A1    Load the hud message
00003534  103C 000E                754      move.b  #14,D0          Move literal 14 for display message trap command
00003538  4E4F                     755      trap    #15             Display the loaded message
0000353A                           756      
0000353A  1238 5FFB                757      move.b  PLA_TORCH,D1    Move the player torch life value to D1 to display
0000353E  103C 0003                758      move.b  #3,D0           Move literal 3 for display number trap command
00003542  4E4F                     759      trap    #15             Display the number in D1
00003544                           760      
00003544                           761      * Display the inventory
00003544  6100 038C                762      bsr     next_cursor_pos  Move to the next cursor position
00003548                           763      
00003548  43F9 00005814            764      lea     inventory_msg,A1   Load the hud message
0000354E  103C 000E                765      move.b  #14,D0          Move literal 14 for display message trap command
00003552  4E4F                     766      trap    #15             Display the loaded message
00003554                           767      
00003554                           768      * Display the player gold
00003554  6100 037C                769      bsr     next_cursor_pos  Move to the next cursor position
00003558                           770      
00003558  43F9 0000581F            771      lea     gold_msg,A1   Load the hud message
0000355E  103C 000E                772      move.b  #14,D0          Move literal 14 for display message trap command
00003562  4E4F                     773      trap    #15             Display the loaded message
00003564                           774      
00003564  49F8 5FF8                775      lea     PLA_GOLD,A4
00003568  6100 0376                776      bsr     draw_item_number
0000356C                           777      
0000356C                           778      * Display the player potions
0000356C  6100 0364                779      bsr     next_cursor_pos  Move to the next cursor position
00003570                           780      
00003570  43F9 0000582E            781      lea     potions_msg,A1   Load the hud message
00003576  103C 000E                782      move.b  #14,D0          Move literal 14 for display message trap command
0000357A  4E4F                     783      trap    #15             Display the loaded message
0000357C                           784      
0000357C  49F8 5FF9                785      lea     PLA_POTIONS,A4
00003580  6100 035E                786      bsr     draw_item_number
00003584                           787      
00003584                           788      * Display the player keys
00003584  6100 034C                789      bsr     next_cursor_pos  Move to the next cursor position
00003588                           790      
00003588  43F9 00005827            791      lea     key_msg,A1   Load the hud message
0000358E  103C 000E                792      move.b  #14,D0          Move literal 14 for display message trap command
00003592  4E4F                     793      trap    #15             Display the loaded message
00003594                           794      
00003594  49F8 5FFA                795      lea     PLA_KEYS,A4
00003598  6100 0346                796      bsr     draw_item_number
0000359C                           797      
0000359C  6100 000E                798      bsr     draw_map_legend Draw the map legend
000035A0                           799      
000035A0  3203                     800      move.w  D3,D1           Move the previos cursor position to D1 to put it back in place
000035A2                           801      
000035A2  103C 000B                802      move.b  #11,D0          Move the byte #11 to D0 for trap command 11          
000035A6  4E4F                     803      trap    #15             Set the cursor position with trap command 11
000035A8                           804      
000035A8  4241                     805      clr     D1              Clear D1 for later use
000035AA                           806      
000035AA  4E75                     807      rts
000035AC                           808      
000035AC                           809  *-------------------Draw Map Legend---------------------
000035AC                           810  draw_map_legend:
000035AC                           811      * Display the legend message
000035AC  3A3C 3201                812      move.w  #CSR_POS_MOVE,D5 Move a start cursor position to D5
000035B0  5E45                     813      add.w   #7,D5            increment the start position by 7
000035B2  6100 031E                814      bsr     next_cursor_pos  Move to the next cursor position
000035B6                           815      
000035B6  103C 000E                816      move.b  #14,D0          Move literal 14 for display message trap command
000035BA  43F9 0000539F            817      lea     map_legend_msg,A1 Load the message into A1
000035C0  4E4F                     818      trap    #15             Display the loaded message
000035C2                           819      
000035C2                           820      * Display the player mark
000035C2  6100 030E                821      bsr     next_cursor_pos  Move to the next cursor position
000035C6  223C 0000FF00            822      move.l  #GREEN,D1       Load the colour green to D1
000035CC  6100 09DE                823      bsr     change_font_colour  Change the font colour
000035D0                           824      
000035D0  103C 000E                825      move.b  #14,D0          Move literal 14 for display message trap command
000035D4  43F9 00005393            826      lea     player_mark,A1  Load the message into A1
000035DA  4E4F                     827      trap    #15             Display the loaded message
000035DC  43F9 000053AB            828      lea     map_player_msg,A1 Load the message into A1
000035E2  4E4F                     829      trap    #15             Display the loaded message
000035E4                           830      
000035E4                           831      * Display the enemy mark
000035E4  6100 02EC                832      bsr     next_cursor_pos  Move to the next cursor position
000035E8  223C 000000FF            833      move.l  #RED,D1         Load the colour red to D1
000035EE  6100 09BC                834      bsr     change_font_colour  Change the font colour
000035F2                           835      
000035F2  103C 000E                836      move.b  #14,D0          Move literal 14 for display message trap command
000035F6  43F9 00005395            837      lea     enemy_mark,A1   Load the message into A1
000035FC  4E4F                     838      trap    #15             Display the loaded message
000035FE  43F9 000053B5            839      lea     map_enemy_msg,A1 Load the message into A1
00003604  4E4F                     840      trap    #15             Display the loaded message
00003606                           841      
00003606                           842      * Display the win point mark
00003606  6100 02CA                843      bsr     next_cursor_pos  Move to the next cursor position
0000360A  223C 00FF0000            844      move.l  #BLUE,D1       Load the colour blue to D1
00003610  6100 099A                845      bsr     change_font_colour  Change the font colour
00003614                           846      
00003614  103C 000E                847      move.b  #14,D0          Move literal 14 for display message trap command
00003618  43F9 00005397            848      lea     win_point_mark,A1   Load the message into A1
0000361E  4E4F                     849      trap    #15             Display the loaded message
00003620  43F9 000053BE            850      lea     map_win_point_msg,A1 Load the message into A1
00003626  4E4F                     851      trap    #15             Display the loaded message
00003628                           852     
00003628                           853      * Display the shop mark
00003628  6100 02A8                854      bsr     next_cursor_pos  Move to the next cursor position
0000362C  223C 00F000F0            855      move.l  #PURPLE,D1      Load the colour purple to D1
00003632  6100 0978                856      bsr     change_font_colour  Change the font colour
00003636                           857      
00003636  103C 000E                858      move.b  #14,D0          Move literal 14 for display message trap command
0000363A  43F9 00005399            859      lea     shop_mark,A1   Load the message into A1
00003640  4E4F                     860      trap    #15             Display the loaded message
00003642  43F9 000053CB            861      lea     map_shop_msg,A1 Load the message into A1
00003648  4E4F                     862      trap    #15             Display the loaded message
0000364A                           863      
0000364A                           864      * Display the loot mark
0000364A  6100 0286                865      bsr     next_cursor_pos  Move to the next cursor position
0000364E  223C 0000FFFF            866      move.l  #GOLD,D1       Load the colour gold to D1
00003654  6100 0956                867      bsr     change_font_colour  Change the font colour
00003658                           868      
00003658  103C 000E                869      move.b  #14,D0          Move literal 14 for display message trap command
0000365C  43F9 0000539B            870      lea     loot_mark,A1    Load the message into A1
00003662  4E4F                     871      trap    #15             Display the loaded message
00003664  43F9 000053D3            872      lea     map_loot_msg,A1 Load the message into A1
0000366A  4E4F                     873      trap    #15             Display the loaded message
0000366C                           874      
0000366C                           875      * Display the door mark
0000366C  6100 0264                876      bsr     next_cursor_pos Move to the next cursor position
00003670  223C 00507090            877      move.l  #BROWN,D1       Load the colour brown to D1
00003676  6100 0934                878      bsr     change_font_colour  Change the font colour
0000367A                           879      
0000367A  103C 000E                880      move.b  #14,D0          Move literal 14 for display message trap command
0000367E  43F9 0000539D            881      lea     door_mark,A1    Load the message into A1
00003684  4E4F                     882      trap    #15             Display the loaded message
00003686  43F9 000053E0            883      lea     map_door_msg,A1 Load the message into A1
0000368C  4E4F                     884      trap    #15             Display the loaded message
0000368E                           885      
0000368E  223C 00FFFFFF            886      move.l  #WHITE,D1       Load the colour brown to D1
00003694  6100 0916                887      bsr     change_font_colour  Change the font colour
00003698                           888      
00003698  4E75                     889      rts                     Return from subroutine
0000369A                           890  
0000369A                           891  *-------------------Draw Battle Info--------------------
0000369A                           892  draw_battle_info:
0000369A  6100 0922                893      bsr     get_cursor_pos   Get the cursor position and store it in D3
0000369E                           894      
0000369E                           895      * Move cursor to draw player info
0000369E  3A3C 3401                896      move.w  #CSR_POS_BATTLE_P,D5
000036A2  323C 3401                897      move.w  #CSR_POS_BATTLE_P,D1           
000036A6  4E4F                     898      trap    #15             Set the cursor position with trap command 11
000036A8  4241                     899      clr     D1              Clear D1 of the cursor position
000036AA                           900      
000036AA  103C 000E                901      move.b  #14,D0          Move literal 14 for display message trap command
000036AE  43F9 000057EC            902      lea     player_msg,A1   Load the hud message
000036B4  4E4F                     903      trap    #15             Display the loaded message
000036B6                           904      
000036B6  1E38 5FF2                905      move.b  PLA_CLASS,D7    Move the player class number to D7 to display it
000036BA  6100 00B2                906      bsr     display_role    Display the player role
000036BE                           907      
000036BE                           908      * Move the cursor to draw player damage level
000036BE  6100 0212                909      bsr     next_cursor_pos Move to the next cursor position
000036C2                           910      
000036C2  43F9 00005807            911      lea     damage_lvl_msg,A1   Load the damage lvl message
000036C8  103C 000E                912      move.b  #14,D0          Move literal 14 for display message trap command
000036CC  4E4F                     913      trap    #15             Display the loaded message
000036CE                           914      
000036CE  1238 5FF1                915      move.b  PLA_DAMAGE,D1   Move the player damge value to D1 to display
000036D2  103C 0003                916      move.b  #3,D0           Move literal 3 for display number trap command
000036D6  4E4F                     917      trap    #15             Display the number in D1
000036D8                           918      
000036D8                           919      * Move the cursor to draw player health
000036D8  6100 01F8                920      bsr     next_cursor_pos Move to the next cursor position
000036DC                           921      
000036DC  43F9 000057C5            922      lea     health_msg,A1   Load the hud message
000036E2  103C 000E                923      move.b  #14,D0          Move literal 14 for display message trap command
000036E6  4E4F                     924      trap    #15             Display the loaded message
000036E8                           925      
000036E8  1238 5FF0                926      move.b  PLAYER,D1       Move the player health value to D1 to display
000036EC  103C 0003                927      move.b  #3,D0           Move literal 3 for display number trap command
000036F0  4E4F                     928      trap    #15             Display the number in D1
000036F2                           929      
000036F2                           930      * Move the cursor to draw potion information
000036F2  6100 01DE                931      bsr     next_cursor_pos Move to the next cursor position
000036F6                           932      
000036F6  43F9 0000582E            933      lea     potions_msg,A1   Load the hud message
000036FC  103C 000E                934      move.b  #14,D0          Move literal 14 for display message trap command
00003700  4E4F                     935      trap    #15             Display the loaded message
00003702                           936      
00003702  49F8 5FF9                937      lea     PLA_POTIONS,A4
00003706  6100 01D8                938      bsr     draw_item_number
0000370A                           939      
0000370A                           940      * Move the cursor to draw enemy info
0000370A  103C 000B                941      move.b  #11,D0
0000370E  3A3C 1901                942      move.w  #CSR_POS_BATTLE_E,D5
00003712  323C 1901                943      move.w  #CSR_POS_BATTLE_E,D1           
00003716  4E4F                     944      trap    #15             Set the cursor position with trap command 11
00003718  4241                     945      clr     D1              Clear D1 of the cursor position
0000371A                           946      
0000371A  43F9 000057E6            947      lea     enemy_msg,A1   Load the hud message
00003720  103C 000E                948      move.b  #14,D0          Move literal 14 for display message trap command
00003724  4E4F                     949      trap    #15             Display the loaded message
00003726                           950      
00003726                           951      * Move the cursor to draw enemy level and class
00003726  6100 01AA                952      bsr     next_cursor_pos Move to the next cursor position
0000372A                           953      
0000372A  43F9 000057F3            954      lea     level_msg,A1    Load the level message
00003730  103C 000E                955      move.b  #14,D0          Move literal 14 for display message trap command
00003734  4E4F                     956      trap    #15             Display the loaded message
00003736                           957      
00003736  524D                     958      add.w   #1,A5           Move the enemy pointer to its damage level
00003738  1215                     959      move.b  (A5),D1         Move the enemy damage value to D1 to display
0000373A  103C 0003                960      move.b  #3,D0           Move literal 3 for display number trap command
0000373E  4E4F                     961      trap    #15             Display the number in D1
00003740                           962      
00003740  524D                     963      add.w   #1,A5           Move the enemy pointer to the enemy's class type
00003742  1E15                     964      move.b  (A5),D7         Move the enemy class type to D7 to display
00003744  6100 0028                965      bsr     display_role    Display the enemy role
00003748  554D                     966      sub.w   #2,A5           Move the enemy pointer back to its root/health
0000374A                           967      
0000374A                           968      * Move the cursor to draw enemy health information
0000374A  6100 0186                969      bsr     next_cursor_pos Move to the next cursor position
0000374E                           970      
0000374E  43F9 000057C5            971      lea     health_msg,A1 Load the hud message
00003754  103C 000E                972      move.b  #14,D0              Move literal 14 for display message trap command
00003758  4E4F                     973      trap    #15                 Display the loaded message
0000375A                           974      
0000375A  1215                     975      move.b  (A5),D1         Move the enemy health value to D1 to display
0000375C  103C 0003                976      move.b  #3,D0           Move literal 3 for display number trap command
00003760  4E4F                     977      trap    #15             Display the number in D1
00003762                           978      
00003762                           979      * Move the cursor back to its previous position
00003762  3203                     980      move.w  D3,D1           Move the previous cursor position back to D1
00003764  103C 000B                981      move.b  #11,D0          Move the byte #11 to D0 for trap command 11          
00003768  4E4F                     982      trap    #15             Set the cursor position with trap command 11
0000376A                           983      
0000376A  4241                     984      clr     D1              Clear D1 for later use
0000376C                           985      
0000376C  4E75                     986      rts
0000376E                           987  
0000376E                           988  display_role
0000376E  BE3C 0001                989      CMP.B   #1,D7           Compare the class with 1 (knight)
00003772  6700 000E                990      BEQ     display_knight  Branch to display the knight message
00003776  BE3C 0002                991      CMP.B   #2,D7           Compare the class with 2 (mage)
0000377A  6700 0014                992      BEQ     display_mage    Branch to display the knight message
0000377E  6600 001E                993      BNE     display_rogue   Branch to display the rogue message
00003782                           994      
00003782                           995  display_knight:
00003782  103C 000E                996      move.b  #14,D0          Move literal 14 for display message trap command
00003786  43F9 000057CE            997      lea     knight_msg,A1   Load the hud message
0000378C  4E4F                     998      trap    #15             Display the loaded message
0000378E  4E75                     999      rts
00003790                          1000      
00003790                          1001  display_mage:
00003790  103C 000E               1002      move.b  #14,D0          Move literal 14 for display message trap command
00003794  43F9 000057D7           1003      lea     mage_msg,A1     Load the hud message
0000379A  4E4F                    1004      trap    #15             Display the loaded message
0000379C  4E75                    1005      rts
0000379E                          1006  
0000379E                          1007  display_rogue:
0000379E  103C 000E               1008      move.b  #14,D0          Move literal 14 for display message trap command
000037A2  43F9 000057DE           1009      lea     rogue_msg,A1    Load the hud message
000037A8  4E4F                    1010      trap    #15             Display the loaded message
000037AA  4E75                    1011      rts
000037AC                          1012  
000037AC                          1013  *-------------------Draw Shop Info----------------------
000037AC                          1014  draw_shop_info:
000037AC  6100 0810               1015      bsr     get_cursor_pos   Get the cursor position and store it in D3
000037B0                          1016      
000037B0                          1017      * Move cursor to draw shop info
000037B0  3A3C 1801               1018      move.w  #CSR_POS_SHOP_S,D5
000037B4  323C 1801               1019      move.w  #CSR_POS_SHOP_S,D1           
000037B8  4E4F                    1020      trap    #15             Set the cursor position with trap command 11
000037BA  4241                    1021      clr     D1              Clear D1 of the cursor position
000037BC                          1022      
000037BC  43F9 00005A6A           1023      lea     shop_stock_msg,A1   Load the hud message
000037C2  103C 000E               1024      move.b  #14,D0          Move literal 14 for display message trap command
000037C6  4E4F                    1025      trap    #15             Display the loaded message
000037C8                          1026      
000037C8                          1027      
000037C8                          1028      * Display the shop's potions
000037C8  6100 0108               1029      bsr     next_cursor_pos Move to the next cursor position
000037CC                          1030      
000037CC  43F9 0000582E           1031      lea     potions_msg,A1   Load the hud message
000037D2  103C 000E               1032      move.b  #14,D0          Move literal 14 for display message trap command
000037D6  4E4F                    1033      trap    #15             Display the loaded message
000037D8                          1034      
000037D8  544D                    1035      add.w   #S_POTIONS,A5
000037DA  49D5                    1036      lea     (A5),A4
000037DC  6100 0102               1037      bsr     draw_item_number
000037E0                          1038      
000037E0                          1039      * Display the shop's keys
000037E0  6100 00F0               1040      bsr     next_cursor_pos Move to the next cursor position
000037E4                          1041      
000037E4  43F9 00005827           1042      lea     key_msg,A1      Load the hud message
000037EA  103C 000E               1043      move.b  #14,D0          Move literal 14 for display message trap command
000037EE  4E4F                    1044      trap    #15             Display the loaded message
000037F0                          1045      
000037F0  524D                    1046      add.w   #1,A5
000037F2  49D5                    1047      lea     (A5),A4
000037F4  6100 00EA               1048      bsr     draw_item_number
000037F8                          1049      
000037F8                          1050      * Display the shop's torches
000037F8  6100 00D8               1051      bsr     next_cursor_pos Move to the next cursor position
000037FC                          1052      
000037FC  43F9 00005838           1053      lea     torches_msg,A1  Load the torches message
00003802  103C 000E               1054      move.b  #14,D0          Move literal 14 for display message trap command
00003806  4E4F                    1055      trap    #15             Display the loaded message
00003808                          1056      
00003808  524D                    1057      add.w   #1,A5
0000380A  49D5                    1058      lea     (A5),A4
0000380C  6100 00D2               1059      bsr     draw_item_number
00003810                          1060      
00003810                          1061      * Display the shop's damage upgrades
00003810  6100 00C0               1062      bsr     next_cursor_pos Move to the next cursor position
00003814                          1063      
00003814  43F9 00005841           1064      lea     damage_up_msg,A1 Load the damage upgrades message
0000381A  103C 000E               1065      move.b  #14,D0           Move literal 14 for display message trap command
0000381E  4E4F                    1066      trap    #15              Display the loaded message
00003820                          1067      
00003820  524D                    1068      add.w   #1,A5               Increment A5 to get to the damage upgrades
00003822  49D5                    1069      lea     (A5),A4             Load the memory address in A5 to A4
00003824  6100 00BA               1070      bsr     draw_item_number    Draw the number of items
00003828  5B4D                    1071      sub.w   #S_DAMAGE_IN,A5     Bring the pointer back to the root of the shop
0000382A                          1072      
0000382A                          1073      * Display the inventory
0000382A  103C 000B               1074      move.b  #11,D0              Move the byte #11 to D0 for trap command 11
0000382E  3A3C 3401               1075      move.w  #CSR_POS_SHOP_P,D5   
00003832  323C 3401               1076      move.w  #CSR_POS_SHOP_P,D1       
00003836  4E4F                    1077      trap    #15                 Set the cursor position with trap command 11
00003838  4241                    1078      clr     D1                  Clear D1 of the cursor position
0000383A                          1079      
0000383A  43F9 00005814           1080      lea     inventory_msg,A1    Load the hud message
00003840  103C 000E               1081      move.b  #14,D0              Move literal 14 for display message trap command
00003844  4E4F                    1082      trap    #15                 Display the loaded message
00003846                          1083      
00003846                          1084      * Display the player gold
00003846  6100 008A               1085      bsr     next_cursor_pos Move to the next cursor position
0000384A                          1086      
0000384A  43F9 0000581F           1087      lea     gold_msg,A1   Load the hud message
00003850  103C 000E               1088      move.b  #14,D0          Move literal 14 for display message trap command
00003854  4E4F                    1089      trap    #15             Display the loaded message
00003856                          1090      
00003856  49F8 5FF8               1091      lea     PLA_GOLD,A4
0000385A  6100 0084               1092      bsr     draw_item_number
0000385E                          1093      
0000385E                          1094      * Display the player potions
0000385E  6100 0072               1095      bsr     next_cursor_pos Move to the next cursor position
00003862                          1096      
00003862  43F9 0000582E           1097      lea     potions_msg,A1   Load the hud message
00003868  103C 000E               1098      move.b  #14,D0          Move literal 14 for display message trap command
0000386C  4E4F                    1099      trap    #15             Display the loaded message
0000386E                          1100      
0000386E  49F8 5FF9               1101      lea     PLA_POTIONS,A4
00003872  6100 006C               1102      bsr     draw_item_number
00003876                          1103      
00003876                          1104      * Display the player keys
00003876  6100 005A               1105      bsr     next_cursor_pos Move to the next cursor position
0000387A                          1106      
0000387A  43F9 00005827           1107      lea     key_msg,A1   Load the hud message
00003880  103C 000E               1108      move.b  #14,D0          Move literal 14 for display message trap command
00003884  4E4F                    1109      trap    #15             Display the loaded message
00003886                          1110      
00003886  49F8 5FFA               1111      lea     PLA_KEYS,A4
0000388A  6100 0054               1112      bsr     draw_item_number
0000388E                          1113      
0000388E                          1114      * Display the torch life
0000388E  6100 0042               1115      bsr     next_cursor_pos Move to the next cursor position
00003892  6100 003E               1116      bsr     next_cursor_pos Move to the next cursor position
00003896                          1117      
00003896  43F9 000057FA           1118      lea     torch_msg,A1   Load the hud message
0000389C  103C 000E               1119      move.b  #14,D0          Move literal 14 for display message trap command
000038A0  4E4F                    1120      trap    #15             Display the loaded message
000038A2                          1121      
000038A2  1238 5FFB               1122      move.b  PLA_TORCH,D1    Move the player torch life value to D1 to display
000038A6  103C 0003               1123      move.b  #3,D0           Move literal 3 for display number trap command
000038AA  4E4F                    1124      trap    #15             Display the number in D1
000038AC                          1125      
000038AC                          1126      * Display the player's damage level
000038AC  6100 0024               1127      bsr     next_cursor_pos Move to the next cursor position
000038B0                          1128      
000038B0  43F9 00005807           1129      lea     damage_lvl_msg,A1   Load the damage level message
000038B6  103C 000E               1130      move.b  #14,D0              Move literal 14 for display message trap command
000038BA  4E4F                    1131      trap    #15                 Display the loaded message
000038BC                          1132      
000038BC  1238 5FF1               1133      move.b  PLA_DAMAGE,D1   Move the player's damage level to D1 to display
000038C0  103C 0003               1134      move.b  #3,D0           Move literal 3 for display number trap command
000038C4  4E4F                    1135      trap    #15             Display the number in D1
000038C6                          1136      
000038C6                          1137      * Move the cursor back to its previous position
000038C6  3203                    1138      move.w  D3,D1           Move the previous cursor position back to D1
000038C8  103C 000B               1139      move.b  #11,D0          Move the byte #11 to D0 for trap command 11          
000038CC  4E4F                    1140      trap    #15             Set the cursor position with trap command 11
000038CE                          1141      
000038CE  4241                    1142      clr     D1              Clear D1 for later use
000038D0                          1143      
000038D0  4E75                    1144      rts
000038D2                          1145  
000038D2                          1146  *-------------------Helper Branches---------------------
000038D2                          1147  next_cursor_pos:          * Moves the cursor one row down
000038D2  103C 000B               1148      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
000038D6  5245                    1149      add.w   #1,D5           Move down rows
000038D8  3205                    1150      move.w  D5,D1           Move the current cursor pos to D1 to set it
000038DA  4E4F                    1151      trap    #15             Set the cursor position with trap command 11
000038DC  4241                    1152      clr     D1              Clear D1 of the cursor position
000038DE  4E75                    1153      rts                     Return from the subroutine
000038E0                          1154  
000038E0                          1155  draw_item_number:
000038E0  103C 000E               1156      move.b  #14,D0          Move literal 3 for display number trap command
000038E4  43F9 00005886           1157      lea     bracket_open_msg,A1
000038EA  4E4F                    1158      trap    #15
000038EC                          1159  
000038EC  103C 0003               1160      move.b  #3,D0           Move literal 3 for display number trap command
000038F0  1214                    1161      move.b  (A4),D1         Move the value in the register A4 to D1 to display
000038F2  4E4F                    1162      trap    #15             Display the number in D1
000038F4                          1163      
000038F4  103C 000E               1164      move.b  #14,D0          Move literal 3 for display number trap command
000038F8  43F9 00005888           1165      lea     bracket_close_msg,A1
000038FE  4E4F                    1166      trap    #15
00003900  4E75                    1167      rts
00003902                          1168  
00003902                          1169  *-------------------------------------------------------
00003902                          1170  *---Game Play (Quest Progress)--------------------------
00003902                          1171  *------------------------------------------------------- 
00003902                          1172  gameplay:
00003902  6100 0078               1173      bsr     endl            Break to a new line
00003906  0C38 0000 5FF3          1174      CMP.B   #0,GAME_STATE   Check which stage the game is in
0000390C  6700 F70E               1175      BEQ     pick_role       Branch to the pick role subroutine
00003910  0C38 0005 5FF3          1176      CMP.B   #5,GAME_STATE   Check which stage the game is in
00003916  6700 007A               1177      BEQ     movement        Branch to the movement subroutine
0000391A  0C38 0006 5FF3          1178      CMP.B   #6,GAME_STATE   Check which stage the game is in
00003920  6700 026E               1179      BEQ     combat          branch to the combat subroutine
00003924  0C38 0007 5FF3          1180      CMP.B   #7,GAME_STATE   Check which stage the game is in
0000392A  6700 0480               1181      BEQ     shop            branch to the shop subroutine
0000392E  4E75                    1182      rts                     Return from 'gameplay' subroutine
00003930                          1183  
00003930                          1184  *-------------------------------------------------------
00003930                          1185  *------------------Screen Decoration--------------------
00003930                          1186  *-------------------------------------------------------
00003930                          1187  decorate:
00003930  163C 003C               1188      move.b  #60, D3
00003934  6100 0046               1189      bsr     endl
00003938                          1190  out:
00003938  43F9 00004C9C           1191      lea     loop_msg,A1
0000393E  103C 000E               1192      move.b  #14,D0
00003942  4E4F                    1193      trap    #15
00003944  5343                    1194      sub     #1,D3   decrement loop counter
00003946  66F0                    1195      bne     out     repeat until D0=0
00003948  6100 0032               1196      bsr     endl
0000394C  4E75                    1197      rts
0000394E                          1198      
0000394E                          1199  clear_screen: 
0000394E  103C 000B               1200      move.b  #11,D0      clear screen
00003952  323C FF00               1201      move.w  #$ff00,D1
00003956  4E4F                    1202      trap    #15
00003958  4E75                    1203      rts
0000395A                          1204  *-------------------------------------------------------
0000395A                          1205  *------------------------Replay-------------------------
0000395A                          1206  *-------------------------------------------------------
0000395A                          1207  replay:
0000395A  43F9 00004DE0           1208      lea     replay_msg,A1   Load the Replay message
00003960  103C 000E               1209      move.b  #14,D0          Move the number literal 14 to D0 for trap command
00003964  4E4F                    1210      trap    #15             Display the loaded message
00003966                          1211      
00003966  7A02                    1212      move.l  #2,D5           Move the number of input options to D5
00003968  6100 F7B4               1213      bsr     input           Take user input
0000396C  1401                    1214      move.b  D1,D2           Move the input to D2 so it's not trampled by the clear screen
0000396E                          1215      
0000396E  61DE                    1216      bsr     clear_screen    Clear the screen
00003970                          1217      
00003970  B43C 0001               1218      cmp.b   #1,D2           Compare the user input against the two options
00003974  6700 D68A               1219      beq     start           Restart if the user enters 1
00003978  6100 F68C               1220      bsr     end             Quit if the user enters 2
0000397C                          1221  
0000397C                          1222  endl:
0000397C  48E7 8040               1223      movem.l D0/A1,-(A7)
00003980  303C 000E               1224      move    #14,D0
00003984  43F9 00004A3E           1225      lea     crlf,A1
0000398A  4E4F                    1226      trap    #15
0000398C  4CDF 0201               1227      movem.l (A7)+,D0/A1
00003990  4E75                    1228      rts
00003992                          1229          
00003992                          1230  *-------------------------------------------------------
00003992                          1231  *----------------------Manage Movement------------------
00003992                          1232  *-------------------------------------------------------
00003992                          1233  movement:
00003992  43F9 000052B4           1234      lea     movement_msg,A1 Load the movement message
00003998  103C 000E               1235      move.b  #14,D0          Move literal 14 for display message trap command
0000399C  4E4F                    1236      trap    #15             Display the loaded message
0000399E                          1237  
0000399E  7A05                    1238      move.l  #5,D5           Move the number 4 to D5 to tell the program how many options there are
000039A0                          1239      
000039A0  6100 F77C               1240      bsr     input           branch to the input subroutine
000039A4  6100 000C               1241      bsr     wall_collisions Branch to check wall collisions and movement
000039A8                          1242      
000039A8  B23C 0005               1243      CMP.B   #5,D1           Check the input against taking a potion
000039AC  6700 05BE               1244      BEQ     take_potion     Branch to take a potion
000039B0                          1245      
000039B0  4E75                    1246      rts
000039B2                          1247  
000039B2                          1248  *-------------------------------------------------------
000039B2                          1249  *-------------------Check Wall Collisions---------------
000039B2                          1250  *-------------------------------------------------------
000039B2                          1251  wall_collisions:
000039B2                          1252      *Check collisions in the movement direction
000039B2  B23C 0001               1253      CMP.B   #1,D1       Check the movement direction
000039B6  6700 001C               1254      BEQ     move_north  Branch to Display the corridor type
000039BA                          1255      
000039BA  B23C 0002               1256      CMP.B   #2,D1       Check the movement direction
000039BE  6700 005E               1257      BEQ     move_south  Branch to Display the corridor type
000039C2                          1258      
000039C2  B23C 0003               1259      CMP.B   #3,D1       Check the movement direction
000039C6  6700 00A0               1260      BEQ     move_west   Branch to Display the corridor type
000039CA                          1261      
000039CA  B23C 0004               1262      CMP.B   #4,D1       Check the movement direction
000039CE  6700 00E0               1263      BEQ     move_east   Branch to Display the corridor type
000039D2                          1264      
000039D2  4E75                    1265      rts
000039D4                          1266      
000039D4                          1267  move_north:
000039D4                          1268      *Check if the tile is any of the corridor types with a wall at the top
000039D4  0C16 0002               1269      CMP.B   #2,(A6)
000039D8  6700 011E               1270      BEQ     movement_blocked
000039DC  0C16 0003               1271      CMP.B   #3,(A6)
000039E0  6700 0116               1272      BEQ     movement_blocked
000039E4  0C16 0006               1273      CMP.B   #6,(A6)
000039E8  6700 010E               1274      BEQ     movement_blocked
000039EC  0C16 0007               1275      CMP.B   #7,(A6)
000039F0  6700 0106               1276      BEQ     movement_blocked
000039F4  0C16 000B               1277      CMP.B   #11,(A6)
000039F8  6700 00FE               1278      BEQ     movement_blocked
000039FC  0C16 000C               1279      CMP.B   #12,(A6)
00003A00  6700 00F6               1280      BEQ     movement_blocked
00003A04  0C16 000D               1281      CMP.B   #13,(A6)
00003A08  6700 00EE               1282      BEQ     movement_blocked
00003A0C                          1283      
00003A0C  31CE 5FF6               1284      move.w  A6,PLA_P_POS        Move the player's previous location to a memory address for storage
00003A10  9CFC 0010               1285      sub     #16,A6              Move the player north
00003A14                          1286      
00003A14  6100 00F4               1287      bsr     check_blocked       Check if the player is in a door
00003A18  6100 0584               1288      bsr     decrement_torch     Remove one from the player's torch life
00003A1C                          1289  
00003A1C  4E75                    1290      rts
00003A1E                          1291      
00003A1E                          1292  move_south:
00003A1E                          1293      *Check if the tile is any of the corridor types with a wall at the bottom
00003A1E  0C16 0002               1294      CMP.B   #2,(A6)
00003A22  6700 00D4               1295      BEQ     movement_blocked
00003A26  0C16 0004               1296      CMP.B   #4,(A6)
00003A2A  6700 00CC               1297      BEQ     movement_blocked
00003A2E  0C16 0005               1298      CMP.B   #5,(A6)
00003A32  6700 00C4               1299      BEQ     movement_blocked
00003A36  0C16 0009               1300      CMP.B   #9,(A6)
00003A3A  6700 00BC               1301      BEQ     movement_blocked
00003A3E  0C16 000B               1302      CMP.B   #11,(A6)
00003A42  6700 00B4               1303      BEQ     movement_blocked
00003A46  0C16 000D               1304      CMP.B   #13,(A6)
00003A4A  6700 00AC               1305      BEQ     movement_blocked
00003A4E  0C16 000E               1306      CMP.B   #14,(A6)
00003A52  6700 00A4               1307      BEQ     movement_blocked
00003A56                          1308      
00003A56  31CE 5FF6               1309      move.w  A6,PLA_P_POS        Move the player's previous location to a memory address for storage
00003A5A  DCFC 0010               1310      add     #16,A6              Move the player south
00003A5E                          1311      
00003A5E  6100 00AA               1312      bsr     check_blocked       Check if the player is in a door
00003A62  6100 053A               1313      bsr     decrement_torch     Remove one from the player's torch life
00003A66                          1314      
00003A66  4E75                    1315      rts
00003A68                          1316  
00003A68                          1317  move_west:
00003A68                          1318      *Check if the tile is any of the corridor types with a wall to the left
00003A68  0C16 0001               1319      CMP.B   #1,(A6)
00003A6C  6700 008A               1320      BEQ     movement_blocked
00003A70  0C16 0003               1321      CMP.B   #3,(A6)
00003A74  6700 0082               1322      BEQ     movement_blocked
00003A78  0C16 0004               1323      CMP.B   #4,(A6)
00003A7C  6700 007A               1324      BEQ     movement_blocked
00003A80  0C16 0008               1325      CMP.B   #8,(A6)
00003A84  6700 0072               1326      BEQ     movement_blocked
00003A88  0C16 000B               1327      CMP.B   #11,(A6)
00003A8C  6700 006A               1328      BEQ     movement_blocked
00003A90  0C16 000C               1329      CMP.B   #12,(A6)
00003A94  6700 0062               1330      BEQ     movement_blocked
00003A98  0C16 000E               1331      CMP.B   #14,(A6)
00003A9C  6700 005A               1332      BEQ     movement_blocked
00003AA0                          1333      
00003AA0  31CE 5FF6               1334      move.w  A6,PLA_P_POS        Move the player's previous location to a memory address for storage
00003AA4  534E                    1335      sub     #1,A6               Move the player west
00003AA6                          1336      
00003AA6  6100 0062               1337      bsr     check_blocked       Check if the player is in a door
00003AAA  6100 04F2               1338      bsr     decrement_torch     Remove one from the player's torch life
00003AAE                          1339      
00003AAE  4E75                    1340      rts
00003AB0                          1341      
00003AB0                          1342  move_east:
00003AB0                          1343      *Check if the tile is any of the corridor types with a wall to the right
00003AB0  0C16 0001               1344      CMP.B   #1,(A6)
00003AB4  6700 0042               1345      BEQ     movement_blocked
00003AB8  0C16 0005               1346      CMP.B   #5,(A6)
00003ABC  6700 003A               1347      BEQ     movement_blocked
00003AC0  0C16 0006               1348      CMP.B   #6,(A6)
00003AC4  6700 0032               1349      BEQ     movement_blocked
00003AC8  0C16 000A               1350      CMP.B   #10,(A6)
00003ACC  6700 002A               1351      BEQ     movement_blocked
00003AD0  0C16 000C               1352      CMP.B   #12,(A6)
00003AD4  6700 0022               1353      BEQ     movement_blocked
00003AD8  0C16 000D               1354      CMP.B   #13,(A6)
00003ADC  6700 001A               1355      BEQ     movement_blocked
00003AE0  0C16 000E               1356      CMP.B   #14,(A6)
00003AE4  6700 0012               1357      BEQ     movement_blocked
00003AE8                          1358      
00003AE8  31CE 5FF6               1359      move.w  A6,PLA_P_POS        Move the player's previous location to a memory address for storage
00003AEC  524E                    1360      add     #1,A6               Move the player east
00003AEE                          1361      
00003AEE  6100 001A               1362      bsr     check_blocked       Check if the player is in a door
00003AF2  6100 04AA               1363      bsr     decrement_torch     Remove one from the player's torch life
00003AF6                          1364      
00003AF6  4E75                    1365      rts
00003AF8                          1366  
00003AF8                          1367  movement_blocked:
00003AF8  43F9 00005346           1368      lea     movement_blocked_msg,A1 Load the message
00003AFE  103C 000E               1369      move.b  #14,D0                  Move the trap command to display a message
00003B02  4E4F                    1370      trap    #15                     Display the movement blocked message
00003B04  6100 0432               1371      bsr     press_continue          Pause the game until a key is pressed
00003B08                          1372      
00003B08  4E75                    1373      rts                             Return from the subroutine
00003B0A                          1374      
00003B0A                          1375  check_blocked:
00003B0A  4BF8 6FE0               1376      lea     FIRST_DOOR,A5   Load the memory address of the first door
00003B0E  1E3C 0000               1377      move.b  #0,D7           Move the starting door number to D5
00003B12  6100 0004               1378      bsr     loop_thru_doors Loop through all doors
00003B16  4E75                    1379      rts                     Return from subroutine
00003B18                          1380      
00003B18                          1381  loop_thru_doors:
00003B18  BE3C 0003               1382      CMP.B   #DOOR_MAX,D7    Compare the door number with the maximum door number
00003B1C  6C00 044C               1383      BGE     return          Return from the loop if the current door number is greater than or equal to the max
00003B20                          1384  
00003B20  6100 0008               1385      bsr     check_for_a_door  Check for a door
00003B24                          1386      
00003B24  5207                    1387      add.b   #1,D7           Add to the current door number
00003B26  544D                    1388      add.w   #2,A5           Add to the current door pointer to move to the next door
00003B28  60EE                    1389      bra     loop_thru_doors Keep looping the doors
00003B2A                          1390  
00003B2A                          1391  check_for_a_door:
00003B2A  3615                    1392      move.w  (A5),D3         Move the door coordinates into data register D3 for large-value comparisons
00003B2C  BDC3                    1393      CMP.L   D3,A6           Check if the door is in the current position
00003B2E  6700 0004               1394      BEQ     in_a_door       Collide with the door if it is
00003B32  4E75                    1395      rts                     Return if the door is not in the current position
00003B34                          1396      
00003B34                          1397  in_a_door:
00003B34  0C38 0000 5FFA          1398      CMP.B   #0,PLA_KEYS     Check if the player has keys left
00003B3A  6F00 003C               1399      BLE     blocked_door    If the player has no keys they're blocked
00003B3E                          1400      
00003B3E  43F9 00005B3B           1401      lea     locked_door_msg,A1  Load the locked door message
00003B44  103C 000E               1402      move.b  #14,D0          Move the number literal for trap command
00003B48  4E4F                    1403      trap    #15             Display the loaded message
00003B4A                          1404      
00003B4A  1A3C 0002               1405      move.b  #2,D5           Move the number of input options
00003B4E  6100 F5CE               1406      bsr     input           Take user input
00003B52                          1407      
00003B52  B23C 0001               1408      CMP.B   #1,D1           Compare the user input with num 1
00003B56  6700 0006               1409      BEQ     unlock_door     Unlock the door if the user chooses to
00003B5A  6600 001C               1410      BNE     blocked_door    Branch to blocked door if the player doesn't unlock the door
00003B5E                          1411      
00003B5E                          1412  unlock_door:
00003B5E  43F9 00005BB1           1413      lea     unlocked_door_msg,A1  Load the unlocked door message
00003B64  103C 000E               1414      move.b  #14,D0          Move the number literal for trap command
00003B68  4E4F                    1415      trap    #15             Display the loaded message
00003B6A                          1416      
00003B6A  3ABC 1000               1417      move.w  #OPEN_DOOR_POS,(A5) Move the door position out of the game for an open door
00003B6E  5338 5FFA               1418      sub.b   #1,PLA_KEYS     Remove a key from the player
00003B72  6100 03C4               1419      bsr     press_continue  Wait for player input
00003B76                          1420      
00003B76  4E75                    1421      rts                     Return from subroutine
00003B78                          1422  
00003B78                          1423  blocked_door:
00003B78  43F9 00005BEE           1424      lea     blocked_door_msg,A1  Load the blocked door message
00003B7E  103C 000E               1425      move.b  #14,D0          Move the number literal for trap command
00003B82  4E4F                    1426      trap    #15             Display the loaded message
00003B84                          1427      
00003B84  3638 5FF6               1428      move.w  PLA_P_POS,D3    Move the previous player position to D3
00003B88  2C43                    1429      move.l  D3,A6           Move the player to their previous position
00003B8A                          1430      
00003B8A  6100 03AC               1431      bsr     press_continue  Wait for player input
00003B8E                          1432      
00003B8E  4E75                    1433      rts                     Return from subroutine
00003B90                          1434      
00003B90                          1435  *-------------------------------------------------------
00003B90                          1436  *---------------------Manage Combat---------------------
00003B90                          1437  *-------------------------------------------------------
00003B90                          1438  combat:
00003B90  6100 FDEA               1439      bsr endl                Break to a new line
00003B94                          1440  
00003B94  43F9 00005427           1441      lea     combat_msg,A1   Load the combat message
00003B9A  103C 000E               1442      move.b  #14,D0          Move literal 14 for display message trap command
00003B9E  4E4F                    1443      trap    #15             Display the loaded message
00003BA0                          1444  
00003BA0  7A05                    1445      move.l  #5,D5           Move the number 4 to D5 to tell the program how many options there are
00003BA2  6100 F57A               1446      bsr     input           branch to the input subroutine
00003BA6  1801                    1447      move.b  D1,D4           Move the input to D4 for later use
00003BA8                          1448      
00003BA8  B23C 0001               1449      CMP.B   #1,D1           Compare input with number literal 1
00003BAC  6700 0024               1450      BEQ     block_counter   Branch to block/counter subroutine
00003BB0  B23C 0002               1451      CMP.B   #2,D1           Compare input with number literal 2
00003BB4  6700 0036               1452      BEQ     cast_magic      Branch to cast magic subroutine
00003BB8  B23C 0003               1453      CMP.B   #3,D1           Compare input with number literal 3
00003BBC  6700 0048               1454      BEQ     melee_attack    Branch to melee subroutine
00003BC0  B23C 0004               1455      CMP.B   #4,D1           Compare input with number literal 4
00003BC4  6700 005A               1456      BEQ     try_run         Branch to try run subroutine
00003BC8  B23C 0005               1457      CMP.B   #5,D1           Compare input with number literal 5
00003BCC  6700 039E               1458      BEQ     take_potion     Branch to take potion subroutine
00003BD0                          1459      
00003BD0  4E75                    1460      rts
00003BD2                          1461      
00003BD2                          1462  block_counter:
00003BD2  6100 037C               1463      bsr     random_number       Get a random number 1-100
00003BD6                          1464      
00003BD6  B47C 0021               1465      CMP.W   #33,D2              Compare random with #33
00003BDA  6F00 008E               1466      BLE     both_block          Enemy tries to block - attack failed
00003BDE  B47C 0042               1467      CMP.W   #66,D2              Compare random with #66
00003BE2  6F00 0118               1468      BLE     hit_by_magic        Enemy casts magic - player takes damage      
00003BE6  6E00 00E4               1469      BGT     hit_against_melee   Enemy tried to lunge - enemy takes damage
00003BEA                          1470      
00003BEA  4E75                    1471      rts                         Return from subroutine
00003BEC                          1472      
00003BEC                          1473  cast_magic:
00003BEC  6100 0362               1474      bsr     random_number       Get a random number 1-100
00003BF0                          1475  
00003BF0  B47C 0021               1476      CMP.W   #33,D2              Compare random with #33
00003BF4  6F00 00AA               1477      BLE     hit_against_block    Enemy blocks - enemy takes damage
00003BF8  B47C 0042               1478      CMP.W   #66,D2              Compare random with #66
00003BFC  6F00 007E               1479      BLE     both_cast_magic     Enemy casts magic - attack fails     
00003C00  6E00 0114               1480      BGT     hit_by_melee        Enemy lunges forward - player takes damage
00003C04                          1481      
00003C04  4E75                    1482      rts                         Return from subroutine
00003C06                          1483  
00003C06                          1484  melee_attack:
00003C06  6100 0348               1485      bsr     random_number       Get a random number 1-100
00003C0A                          1486  
00003C0A  B47C 0021               1487      CMP.W   #33,D2              Compare random with #33
00003C0E  6F00 00D2               1488      BLE     hit_by_counter      Enemy blocks and counters - player takes damage
00003C12  B47C 0042               1489      CMP.W   #66,D2              Compare random with #66
00003C16  6F00 009E               1490      BLE     hit_against_magic   Enemy casts magic - player takes damage     
00003C1A  6E00 0072               1491      BGT     both_melee          Enemy lunges forward - attack fails
00003C1E                          1492      
00003C1E  4E75                    1493      rts                         Return from subroutine
00003C20                          1494  
00003C20                          1495  try_run:
00003C20  6100 032E               1496      bsr     random_number       Get a random number
00003C24                          1497      
00003C24  B47C 0028               1498      CMP.W   #40,D2              Compare the random number to 40
00003C28  6D00 0006               1499      BLT     escape_attack       If the random number is less than 40 the player escapes
00003C2C  6C00 0020               1500      BGE     fail_escape         If the random number is more than 40 the player gets damaged
00003C30                          1501      
00003C30                          1502  escape_attack:
00003C30  3638 5FF6               1503      move.w  PLA_P_POS,D3    Move the player's previous position to D3 to avoid treating it as a negative number
00003C34  2C43                    1504      move.l  D3,A6           Move the player to their position before entering the battle
00003C36  11FC 0005 5FF3          1505      move.b  #5,GAME_STATE   Switch game state
00003C3C                          1506      
00003C3C  43F9 00005489           1507      lea     escape_msg,A1   Load escape message
00003C42  103C 000E               1508      move.b  #14,D0          Move literal for trap command
00003C46  4E4F                    1509      trap    #15             Trap 15 to display messgae
00003C48                          1510      
00003C48  6100 02EE               1511      bsr     press_continue  Pause until the player presses to continue
00003C4C                          1512      
00003C4C  4E75                    1513      rts                     Return from subroutine
00003C4E                          1514      
00003C4E                          1515  fail_escape:
00003C4E  43F9 000054A4           1516      lea     fail_escape_msg,A1  Load fail escape message
00003C54  103C 000E               1517      move.b  #14,D0              Move literal for trap command
00003C58  4E4F                    1518      trap    #15                 Trap 15 to display message
00003C5A                          1519      
00003C5A  524D                    1520      add.w   #DAMAGE,A5           Move the enemy pointer to its damage value
00003C5C  1A15                    1521      move.b  (A5),D5             Store the damage value in D5
00003C5E  534D                    1522      sub.w   #DAMAGE,A5           Move the enemy pointer back to the enemy health/root
00003C60  9B38 5FF0               1523      sub.b   D5,PLAYER           Remove the enemy's damage from the player's health
00003C64                          1524      
00003C64  6100 02D2               1525      bsr     press_continue      Pause until the player presses to continue
00003C68  4E75                    1526      rts
00003C6A                          1527      
00003C6A                          1528  both_block:
00003C6A  103C 000E               1529      move.b  #14,D0
00003C6E  43F9 000054DF           1530      lea     both_block_msg,A1
00003C74  4E4F                    1531      trap    #15
00003C76                          1532      
00003C76  6100 02C0               1533      bsr     press_continue
00003C7A  4E75                    1534      rts
00003C7C                          1535      
00003C7C                          1536  both_cast_magic:
00003C7C  103C 000E               1537      move.b  #14,D0
00003C80  43F9 00005504           1538      lea     both_cast_magic_msg,A1
00003C86  4E4F                    1539      trap    #15
00003C88                          1540      
00003C88  6100 02AE               1541      bsr     press_continue
00003C8C  4E75                    1542      rts
00003C8E                          1543  
00003C8E                          1544  both_melee:
00003C8E  103C 000E               1545      move.b  #14,D0
00003C92  43F9 00005559           1546      lea     both_melee_msg,A1
00003C98  4E4F                    1547      trap    #15  
00003C9A                          1548      
00003C9A  6100 029C               1549      bsr     press_continue
00003C9E  4E75                    1550      rts
00003CA0                          1551  
00003CA0                          1552  hit_against_block:
00003CA0  103C 000E               1553      move.b  #14,D0
00003CA4  43F9 000055A2           1554      lea     hit_against_block_msg,A1
00003CAA  4E4F                    1555      trap    #15  
00003CAC                          1556      
00003CAC  6100 0082               1557      bsr     damage_enemy    Deal damage to the enemy
00003CB0                          1558      
00003CB0  6100 0286               1559      bsr     press_continue
00003CB4  4E75                    1560      rts
00003CB6                          1561  
00003CB6                          1562  hit_against_magic:
00003CB6  103C 000E               1563      move.b  #14,D0
00003CBA  43F9 000055EA           1564      lea     hit_against_magic_msg,A1
00003CC0  4E4F                    1565      trap    #15
00003CC2                          1566      
00003CC2  6100 006C               1567      bsr     damage_enemy    Deal damage to the enemy
00003CC6                          1568      
00003CC6  6100 0270               1569      bsr     press_continue
00003CCA  4E75                    1570      rts
00003CCC                          1571  
00003CCC                          1572  hit_against_melee:
00003CCC  103C 000E               1573      move.b  #14,D0
00003CD0  43F9 0000564E           1574      lea     hit_against_melee_msg,A1
00003CD6  4E4F                    1575      trap    #15
00003CD8                          1576      
00003CD8  6100 0056               1577      bsr     damage_enemy    Deal damage to the enemy
00003CDC                          1578      
00003CDC  6100 025A               1579      bsr     press_continue
00003CE0  4E75                    1580      rts
00003CE2                          1581  
00003CE2                          1582  hit_by_counter:
00003CE2  103C 000E               1583      move.b  #14,D0
00003CE6  43F9 000056A4           1584      lea     hit_by_counter_msg,A1
00003CEC  4E4F                    1585      trap    #15  
00003CEE                          1586      
00003CEE  143C 0001               1587      move.b  #1,D2               Move the enemy attack type to D2
00003CF2  6100 0076               1588      bsr     damage_player       Deal damage to the player
00003CF6                          1589      
00003CF6  6100 0240               1590      bsr     press_continue
00003CFA  4E75                    1591      rts
00003CFC                          1592  
00003CFC                          1593  hit_by_magic:
00003CFC  103C 000E               1594      move.b  #14,D0
00003D00  43F9 00005707           1595      lea     hit_by_magic_msg,A1
00003D06  4E4F                    1596      trap    #15  
00003D08                          1597      
00003D08  143C 0002               1598      move.b  #2,D2               Move the enemy attack type to D2
00003D0C  6100 005C               1599      bsr     damage_player       Deal damage to the player
00003D10                          1600      
00003D10  6100 0226               1601      bsr     press_continue
00003D14  4E75                    1602      rts
00003D16                          1603  
00003D16                          1604  hit_by_melee:
00003D16  103C 000E               1605      move.b  #14,D0
00003D1A  43F9 00005777           1606      lea     hit_by_melee_msg,A1
00003D20  4E4F                    1607      trap    #15
00003D22                          1608      
00003D22  143C 0003               1609      move.b  #3,D2               Move the enemy attack type to D2
00003D26  6100 0042               1610      bsr     damage_player       Deal damage to the player
00003D2A                          1611      
00003D2A  6100 020C               1612      bsr     press_continue
00003D2E  4E75                    1613      rts
00003D30                          1614      
00003D30                          1615  damage_enemy:
00003D30  1A38 5FF1               1616      move.b  PLA_DAMAGE,D5       Store the player damage value in D5
00003D34  B838 5FF2               1617      CMP.B   PLA_CLASS,D4        Check if the player attack type matches the player class
00003D38  6700 0006               1618      BEQ     double_damage_enemy Deal double damage to the enemy if attack type matches the class
00003D3C  9B15                    1619      sub.b   D5,(A5)             Remove the player's damage from the enemy's health
00003D3E  4E75                    1620      rts                         Return from subroutine
00003D40                          1621      
00003D40                          1622  double_damage_enemy:
00003D40  E34D                    1623      LSL     #1,D5               Double the player damage
00003D42  9B15                    1624      sub.b   D5,(A5)             Remove double the player's damage from the enemy's health
00003D44                          1625      
00003D44  6100 FC36               1626      bsr     endl                Break to new line
00003D48  223C 00F000F0           1627      move.l  #PURPLE,D1          Load colour purple
00003D4E  6100 025C               1628      bsr     change_font_colour  Change the font colour
00003D52                          1629      
00003D52  43F9 00005B1C           1630      lea     double_damage_msg,A1    Load the double damage message
00003D58  103C 000E               1631      move.b  #14,D0              Move number literal 14 to D0 for trap command
00003D5C  4E4F                    1632      trap    #15
00003D5E                          1633      
00003D5E  223C 00FFFFFF           1634      move.l  #WHITE,D1           Load colour white
00003D64  6100 0246               1635      bsr     change_font_colour  Change the font colour
00003D68                          1636      
00003D68  4E75                    1637      rts                         Return from subroutine
00003D6A                          1638  
00003D6A                          1639  damage_player:
00003D6A  524D                    1640      add.w   #DAMAGE,A5          Move the enemy pointer to its damage value
00003D6C  1A15                    1641      move.b  (A5),D5             Store the damage value in D5
00003D6E                          1642      
00003D6E  534D                    1643      sub.w   #DAMAGE,A5          Move the enemy pointer back to the enemy health/root
00003D70  544D                    1644      add.w   #CLASS,A5           Move the enemy pointer to its class value
00003D72                          1645      
00003D72  B415                    1646      CMP.B   (A5),D2             Compare the enemy attack type to its class
00003D74  554D                    1647      sub.w   #CLASS,A5           Move the enemy pointer back to the enemy health/root
00003D76  6700 0008               1648      BEQ     double_damage_player    Deal double damage to the player
00003D7A                          1649      
00003D7A  9B38 5FF0               1650      sub.b   D5,PLAYER           Remove the enemy's damage from the player's health
00003D7E                          1651  
00003D7E  4E75                    1652      rts                         Return from subroutine
00003D80                          1653      
00003D80                          1654  double_damage_player:
00003D80  E34D                    1655      LSL     #1,D5               Double the enemy damage
00003D82  9B38 5FF0               1656      sub.b   D5,PLAYER           Remove double the enemy's damage from the player's health
00003D86                          1657      
00003D86  6100 FBF4               1658      bsr     endl                Break to new line
00003D8A  223C 000000FF           1659      move.l  #RED,D1          Load colour purple
00003D90  6100 021A               1660      bsr     change_font_colour  Change the font colour
00003D94                          1661      
00003D94  43F9 00005B1C           1662      lea     double_damage_msg,A1    Load the double damage message
00003D9A  103C 000E               1663      move.b  #14,D0              Move number literal 14 to D0 for trap command
00003D9E  4E4F                    1664      trap    #15
00003DA0                          1665      
00003DA0  223C 00FFFFFF           1666      move.l  #WHITE,D1           Load colour white
00003DA6  6100 0204               1667      bsr     change_font_colour  Change the font colour
00003DAA                          1668      
00003DAA  4E75                    1669      rts                         Return from subroutine
00003DAC                          1670  
00003DAC                          1671  *-------------------------------------------------------
00003DAC                          1672  *----------------------Shop State-----------------------
00003DAC                          1673  *-------------------------------------------------------
00003DAC                          1674  shop:
00003DAC  43F9 000059C2           1675      lea     shop_msg,A1     Load the shop message
00003DB2  103C 000E               1676      move.b  #14,D0          Move the number literal 14 to D0 for trap command
00003DB6  4E4F                    1677      trap    #15             Display the loaded message
00003DB8                          1678  
00003DB8  7A05                    1679      move.l  #5,D5           Move the number 4 to D5 to tell the program how many options there are
00003DBA  6100 F362               1680      bsr     input           branch to the input subroutine
00003DBE                          1681      
00003DBE  B23C 0001               1682      CMP.B   #1,D1           Compare input with number literal 1
00003DC2  6700 0024               1683      BEQ     buy_potion      Branch to buy potion subroutine
00003DC6  B23C 0002               1684      CMP.B   #2,D1           Compare input with number literal 2
00003DCA  6700 004E               1685      BEQ     buy_key         Branch to buy key subroutine
00003DCE  B23C 0003               1686      CMP.B   #3,D1           Compare input with number literal 3
00003DD2  6700 007A               1687      BEQ     buy_torch       Branch to buy torch subroutine
00003DD6  B23C 0004               1688      CMP.B   #4,D1           Compare input with number literal 4
00003DDA  6700 00A8               1689      BEQ     upgrade_dmg     Branch to buy damage upgrade subroutine
00003DDE  B23C 0005               1690      CMP.B   #5,D1           Compare input with number literal 5
00003DE2  6700 00D4               1691      BEQ     leave_shop      Branch to leave shop subroutine
00003DE6                          1692  
00003DE6  4E75                    1693      rts                     Return from subroutine
00003DE8                          1694      
00003DE8                          1695  buy_potion:
00003DE8  0C38 0005 5FF8          1696      CMP.B   #POTION_PRICE,PLA_GOLD  Check if the player has money for a potion
00003DEE  6D00 00E6               1697      BLT     no_money                If not enough money branch to no money subroutine
00003DF2                          1698      
00003DF2  544D                    1699      add.w   #S_POTIONS,A5           Move the shop pointer to the potions
00003DF4  0C15 0000               1700      CMP.B   #0,(A5)                 Check that the shop still has potions left
00003DF8  6F00 00EE               1701      BLE     no_shop_potions         If no potions left branch to no shop potions subroutine
00003DFC                          1702      
00003DFC  5B38 5FF8               1703      sub.b   #POTION_PRICE,PLA_GOLD  Remove the potion price from the player's gold
00003E00  5315                    1704      sub.b   #1,(A5)                 Remove one potion from the shop
00003E02  5238 5FF9               1705      add.b   #1,PLA_POTIONS          Add one potion to the player's inventory
00003E06                          1706      
00003E06  554D                    1707      sub.w   #S_POTIONS,A5           Move the shop pointer back to root
00003E08                          1708      
00003E08  43F9 00005A54           1709      lea     buy_item_msg,A1         Load the buy item message into A1
00003E0E  103C 000E               1710      move.b  #14,D0                  Move the number literal 14 to D0 for trap command
00003E12  4E4F                    1711      trap    #15                     Display the loaded message
00003E14                          1712      
00003E14  6100 0122               1713      bsr     press_continue          Pause for user input
00003E18                          1714      
00003E18  4E75                    1715      rts                             Return from subroutine
00003E1A                          1716      
00003E1A                          1717  buy_key:
00003E1A  0C38 000F 5FF8          1718      CMP.B   #KEY_PRICE,PLA_GOLD     Check if the player has money for a key
00003E20  6D00 00B4               1719      BLT     no_money                If not enough money branch to no money subroutine
00003E24                          1720      
00003E24  564D                    1721      add.w   #S_KEYS,A5              Move the shop pointer to the keys
00003E26  0C15 0000               1722      CMP.B   #0,(A5)                 Check that the shop still has keys left
00003E2A  6F00 00D0               1723      BLE     no_shop_keys            If no keys left branch to no shop keys subroutine
00003E2E                          1724      
00003E2E  0438 000F 5FF8          1725      sub.b   #KEY_PRICE,PLA_GOLD     Remove the key price from the player's gold
00003E34  5315                    1726      sub.b   #1,(A5)                 Remove one key from the shop
00003E36  5238 5FFA               1727      add.b   #1,PLA_KEYS             Add one key to the player's inventory
00003E3A                          1728      
00003E3A  574D                    1729      sub.w   #S_KEYS,A5              Move the shop pointer back to root
00003E3C                          1730  
00003E3C  43F9 00005A54           1731      lea     buy_item_msg,A1         Load the buy item message into A1
00003E42  103C 000E               1732      move.b  #14,D0                  Move the number literal 14 to D0 for trap command
00003E46  4E4F                    1733      trap    #15                     Display the loaded message
00003E48                          1734      
00003E48  6100 00EE               1735      bsr     press_continue          Pause for user input
00003E4C                          1736      
00003E4C  4E75                    1737      rts                             Return from subroutine
00003E4E                          1738      
00003E4E                          1739  buy_torch:
00003E4E  0C38 000A 5FF8          1740      CMP.B   #TORCH_PRICE,PLA_GOLD   Check if the player has money for a torch
00003E54  6D00 0080               1741      BLT     no_money                If not enough money branch to no money subroutine
00003E58                          1742      
00003E58  584D                    1743      add.w   #S_TORCHES,A5           Move the shop pointer to the torches
00003E5A  0C15 0000               1744      CMP.B   #0,(A5)                 Check that the shop still has torches left
00003E5E  6F00 00B0               1745      BLE     no_shop_torches         If no torches left branch to no shop torches subroutine
00003E62                          1746      
00003E62  0438 000A 5FF8          1747      sub.b   #TORCH_PRICE,PLA_GOLD   Remove the torch price from the player's gold
00003E68  5315                    1748      sub.b   #1,(A5)                 Remove one torch from the shop
00003E6A  0638 000F 5FFB          1749      add.b   #LIFE_PER_TORCH,PLA_TORCH           Add ten to the player's torches life
00003E70                          1750      
00003E70  594D                    1751      sub.w   #S_TORCHES,A5           Move the shop pointer back to root
00003E72                          1752  
00003E72  43F9 00005A54           1753      lea     buy_item_msg,A1         Load the buy item message into A1
00003E78  103C 000E               1754      move.b  #14,D0                  Move the number literal 14 to D0 for trap command
00003E7C  4E4F                    1755      trap    #15                     Display the loaded message
00003E7E                          1756      
00003E7E  6100 00B8               1757      bsr     press_continue          Pause for user input
00003E82                          1758      
00003E82  4E75                    1759      rts                             Return from subroutine
00003E84                          1760      
00003E84                          1761  upgrade_dmg:
00003E84  0C38 0014 5FF8          1762      CMP.B   #DAMAGE_UP_PRICE,PLA_GOLD   Check if the player has money for a damage upgrade
00003E8A  6D00 004A               1763      BLT     no_money                    If not enough money branch to no money subroutine
00003E8E                          1764      
00003E8E  5A4D                    1765      add.w   #S_DAMAGE_IN,A5         Move the shop pointer to the damage upgrades
00003E90  0C15 0000               1766      CMP.B   #0,(A5)                 Check that the shop still has damage upgrades left
00003E94  6F00 008E               1767      BLE     no_shop_damage_up       If no damage upgrades left branch to no shop torches subroutine
00003E98                          1768      
00003E98  0438 0014 5FF8          1769      sub.b   #DAMAGE_UP_PRICE,PLA_GOLD   Remove the damage upgrade price from the player's gold
00003E9E  5315                    1770      sub.b   #1,(A5)                     Remove one damage upgrade from the shop
00003EA0  5238 5FF1               1771      add.b   #1,PLA_DAMAGE               Add one to the player's damage value
00003EA4                          1772      
00003EA4  5B4D                    1773      sub.w   #S_DAMAGE_IN,A5         Move the shop pointer back to root
00003EA6                          1774  
00003EA6  43F9 00005A54           1775      lea     buy_item_msg,A1         Load the buy item message into A1
00003EAC  103C 000E               1776      move.b  #14,D0                  Move the number literal 14 to D0 for trap command
00003EB0  4E4F                    1777      trap    #15                     Display the loaded message
00003EB2                          1778      
00003EB2  6100 0084               1779      bsr     press_continue          Pause for user input
00003EB6                          1780      
00003EB6  4E75                    1781      rts                             Return from subroutine
00003EB8                          1782      
00003EB8                          1783  leave_shop:
00003EB8  3638 5FF6               1784      move.w  PLA_P_POS,D3        Move the player's previous position to D3 to avoid treating it as a negative number
00003EBC  2C43                    1785      move.l  D3,A6               Move the player to their position before entering the shop
00003EBE  11FC 0005 5FF3          1786      move.b  #5,GAME_STATE       Switch game state to movement
00003EC4                          1787      
00003EC4  43F9 00005A2E           1788      lea     leave_shop_msg,A1   Load escape message
00003ECA  103C 000E               1789      move.b  #14,D0              Move literal for trap command
00003ECE  4E4F                    1790      trap    #15                 Trap 15 to display messgae
00003ED0                          1791      
00003ED0  6100 0066               1792      bsr     press_continue      Pause until the player presses to continue
00003ED4  4E75                    1793      rts                         Return from subroutine
00003ED6                          1794      
00003ED6                          1795  no_money:
00003ED6  43F9 00005A76           1796      lea     no_money_msg,A1 Load the no money message
00003EDC  103C 000E               1797      move.b  #14,D0          Move the number literal 14 to D0 for trap command
00003EE0  4E4F                    1798      trap    #15             Display the loaded message
00003EE2                          1799      
00003EE2  6100 0054               1800      bsr     press_continue  Wait for player input
00003EE6  4E75                    1801      rts                     Return from subroutine
00003EE8                          1802      
00003EE8                          1803  no_shop_potions:
00003EE8  43F9 00005A96           1804      lea     no_item_msg,A1  Load the no money message
00003EEE  103C 000E               1805      move.b  #14,D0          Move the number literal 14 to D0 for trap command
00003EF2  4E4F                    1806      trap    #15             Display the loaded message
00003EF4  554D                    1807      sub.w   #S_POTIONS,A5   Move the shop pointer back to root
00003EF6                          1808      
00003EF6  6100 0040               1809      bsr     press_continue  Wait for player input
00003EFA  4E75                    1810      rts                     Return from subroutine
00003EFC                          1811      
00003EFC                          1812  no_shop_keys:
00003EFC  43F9 00005A96           1813      lea     no_item_msg,A1  Load the no money message
00003F02  103C 000E               1814      move.b  #14,D0          Move the number literal 14 to D0 for trap command
00003F06  4E4F                    1815      trap    #15             Display the loaded message
00003F08  574D                    1816      sub.w   #S_KEYS,A5      Move the shop pointer back to root
00003F0A                          1817      
00003F0A  6100 002C               1818      bsr     press_continue  Wait for player input
00003F0E  4E75                    1819      rts                     Return from subroutine
00003F10                          1820      
00003F10                          1821  no_shop_torches:
00003F10  43F9 00005A96           1822      lea     no_item_msg,A1  Load the no money message
00003F16  103C 000E               1823      move.b  #14,D0          Move the number literal 14 to D0 for trap command
00003F1A  4E4F                    1824      trap    #15             Display the loaded message
00003F1C  594D                    1825      sub.w   #S_TORCHES,A5   Move the shop pointer back to root
00003F1E                          1826      
00003F1E  6100 0018               1827      bsr     press_continue  Wait for player input
00003F22  4E75                    1828      rts                     Return from subroutine
00003F24                          1829  
00003F24                          1830  no_shop_damage_up:
00003F24  43F9 00005A96           1831      lea     no_item_msg,A1  Load the no money message
00003F2A  103C 000E               1832      move.b  #14,D0          Move the number literal 14 to D0 for trap command
00003F2E  4E4F                    1833      trap    #15             Display the loaded message
00003F30  5B4D                    1834      sub.w   #S_DAMAGE_IN,A5 Move the shop pointer back to root
00003F32                          1835      
00003F32  6100 0004               1836      bsr     press_continue  Wait for player input
00003F36  4E75                    1837      rts                     Return from subroutine
00003F38                          1838  
00003F38                          1839  *-------------------------------------------------------
00003F38                          1840  *-------------------Misc Subroutines--------------------
00003F38                          1841  *-------------------------------------------------------
00003F38                          1842  press_continue:
00003F38  6100 FA42               1843      bsr     endl
00003F3C                          1844  
00003F3C  43F9 00005361           1845      lea     continue_msg,A1 Load message into A1
00003F42  103C 000E               1846      move.b  #14,D0          Move the trap command to display a message
00003F46  4E4F                    1847      trap    #15             display the "press any ket to continue" text
00003F48                          1848      
00003F48  103C 0004               1849      move.b  #4,D0           Move the trap command to take input
00003F4C  4E4F                    1850      trap    #15             take input to freeze the game
00003F4E  4E75                    1851      rts                     Return from the 'press continue' subroutine
00003F50                          1852      
00003F50                          1853  random_number:              *Psuedo random number generator, courtesy of Pdraig
00003F50  103C 0008               1854      move.b  #8,D0
00003F54  4E4F                    1855      trap    #15
00003F56  C2BC 005FFFFF           1856      and.l   #$5FFFFF,d1     prevent overflow in divu
00003F5C  82FC 0064               1857      divu    #100,D1         time count / 100
00003F60  4841                    1858      swap    D1              swap upper and lower words of D1 to put remainder in low word
00003F62  5241                    1859      addq.w  #1,D1           d1.w contains number from 1 to 100
00003F64  3401                    1860      move    D1,D2           d2 = d1
00003F66  4281                    1861      clr.l   D1
00003F68                          1862      
00003F68  4E75                    1863      rts                     Returns from random generation subroutine
00003F6A                          1864      
00003F6A                          1865  return:   *Subroutine to branch to to break out of a subroutine when a condition is met
00003F6A  4E75                    1866      rts
00003F6C                          1867      
00003F6C                          1868  take_potion:
00003F6C  0C38 0000 5FF9          1869      CMP.B   #0,PLA_POTIONS      Check if the player has potions to drink
00003F72  6F00 001A               1870      BLE     no_potions          If the potions are zero or below branch to no_potions
00003F76                          1871      
00003F76  5638 5FF0               1872      add.b   #3,PLAYER           Add 3 to the player's health
00003F7A  5338 5FF9               1873      sub.b   #1,PLA_POTIONS      Remove one potion
00003F7E                          1874      
00003F7E  43F9 0000593C           1875      lea     take_potion_msg,A1  Load the take potion message
00003F84  103C 000E               1876      move.b  #14,D0              Move the number literal 14 to D0 for trap command
00003F88  4E4F                    1877      trap    #15                 Display the loaded message
00003F8A                          1878      
00003F8A  61AC                    1879      bsr     press_continue      Wait for player input
00003F8C                          1880      
00003F8C  4E75                    1881      rts                         Return from subroutine
00003F8E                          1882  
00003F8E                          1883  no_potions:
00003F8E  43F9 00005976           1884      lea     no_potions_msg,A1   Load the no potions message
00003F94  103C 000E               1885      move.b  #14,D0              Move the number literal 14 to D0 for trap command
00003F98  4E4F                    1886      trap    #15                 Display the loaded message
00003F9A                          1887      
00003F9A  619C                    1888      bsr     press_continue      Wait for player input
00003F9C                          1889      
00003F9C  4E75                    1890      rts                         Return from subroutine
00003F9E                          1891      
00003F9E                          1892  decrement_torch:
00003F9E  0C38 0000 5FFB          1893      CMP.B   #0,PLA_TORCH    Compare the torch life to 0
00003FA4  6FC4                    1894      BLE     return          If it's less than or equalt to zero, return
00003FA6  5338 5FFB               1895      sub.b   #1,PLA_TORCH    Decrement by one if it's above zero
00003FAA  4E75                    1896      rts                     Return from subroutine
00003FAC                          1897      
00003FAC                          1898  change_font_colour:        * Changes the font colour to the colour loaded in D1
00003FAC  103C 0015               1899      move.b  #21,D0      Move #21 to D0 for trap command 21
00003FB0  243C 01090000           1900      move.l  #FONT,D2    Move the font to D2
00003FB6  4E4F                    1901      trap    #15         Set the colour
00003FB8  4281                    1902      clr.l   D1          Clear D1 for later use
00003FBA  4282                    1903      clr.l   D2          Clear D2 for later use
00003FBC  4E75                    1904      rts                 Return from subroutine
00003FBE                          1905      
00003FBE                          1906  get_cursor_pos:
00003FBE  323C 00FF               1907      move.w  #255,D1         Move the word #255 to D1 to set the type of trap 11
00003FC2  103C 000B               1908      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
00003FC6  4E4F                    1909      trap    #15             Trap to get the cursor position in D1
00003FC8                          1910      
00003FC8  2601                    1911      move.l  D1,D3           Move the value in D1 to D3 for storage
00003FCA  4E75                    1912      rts
00003FCC                          1913      
00003FCC                          1914  *-------------------------------------------------------
00003FCC                          1915  *----------------------Draw loop------------------------
00003FCC                          1916  *-------------------------------------------------------
00003FCC                          1917  draw_loop:
00003FCC  45F9 00008080           1918      lea     MAP_START_POINT,A2     Load starting memory location into A7
00003FD2  1C3C 0000               1919      move.b  #0,D6           Data register used for rows
00003FD6  1E3C 0000               1920      move.b  #0,D7           Data register used for columns
00003FDA  7200                    1921      move.l  #0,D1           Clear the D1 data register
00003FDC                          1922      
00003FDC  6100 0004               1923      bsr     loop_rows       Loop for every row
00003FE0  4E75                    1924      rts
00003FE2                          1925      
00003FE2                          1926  loop_rows:
00003FE2  BC7C 000F               1927      CMP     #MAP_LENGTH,D6          Check the rows don't go out of bounds
00003FE6  6E82                    1928      BGT     return          If the rows are greater than 22 end the loop
00003FE8                          1929      
00003FE8  1E3C 0000               1930      move.b  #0,D7           Reset to column 0
00003FEC  6100 000A               1931      bsr     loop_columns    Loop for every column
00003FF0                          1932      
00003FF0  5206                    1933      add.b   #1,D6           Add to the rows
00003FF2                          1934      
00003FF2  6100 F988               1935      bsr     endl            Break to the next line
00003FF6  60EA                    1936      bra     loop_rows       Loop through the rows again
00003FF8                          1937      
00003FF8                          1938  loop_columns:
00003FF8  BE3C 000F               1939      CMP.B   #15,D7              Check the rows don't go out of bounds
00003FFC  6E00 FF6C               1940      BGT     return              If the rows are greater than 22 end the loop
00004000                          1941      
00004000  6100 0020               1942      bsr     draw_tile           Draw the current tile
00004004  6100 00C6               1943      bsr     check_for_loot_piles Draw the loot piles if there is one on the current tile
00004008  6100 0140               1944      bsr     check_for_player    Draw the player in the current tile if they're there
0000400C  6100 0184               1945      bsr     check_for_enemies   Draw an enemy in the current tile if they is one there
00004010  6100 02C0               1946      bsr     check_for_win_point Draw the win point in the current tile if it's there
00004014  6100 01F2               1947      bsr     check_for_shops     Draw a shop in the current tile if there is one
00004018  6100 025A               1948      bsr     check_for_doors     Draw a door in the current ile if there is one
0000401C                          1949      
0000401C  5207                    1950      add.b   #1,D7               Add to the column count
0000401E  524A                    1951      add     #1,A2               Move to the next memory location
00004020  60D6                    1952      bra     loop_columns        Loop the columns again
00004022                          1953      
00004022                          1954  *-------------------------------------------------------
00004022                          1955  *----------------------Draw tile------------------------
00004022                          1956  *-------------------------------------------------------
00004022                          1957  *Draws the tile at the address in the address register A2
00004022                          1958  draw_tile:
00004022  0C12 00FF               1959      CMP.B   #255,(A2)           Check if the value is undifined
00004026  6700 005E               1960      BEQ     draw_blocked_tile   Draw the blank tile
0000402A                          1961      
0000402A  0C12 0001               1962      CMP.B   #1,(A2)
0000402E  6700 0064               1963      BEQ     draw_both_tile
00004032  0C12 0003               1964      CMP.B   #3,(A2)
00004036  6700 006A               1965      BEQ     draw_left_tile
0000403A  0C12 0004               1966      CMP.B   #4,(A2)
0000403E  6700 0062               1967      BEQ     draw_left_tile
00004042  0C12 0005               1968      CMP.B   #5,(A2)
00004046  6700 0068               1969      BEQ     draw_right_tile
0000404A  0C12 0006               1970      CMP.B   #6,(A2)
0000404E  6700 0060               1971      BEQ     draw_right_tile
00004052  0C12 0008               1972      CMP.B   #8,(A2)
00004056  6700 004A               1973      BEQ     draw_left_tile
0000405A  0C12 000A               1974      CMP.B   #10,(A2)
0000405E  6700 0050               1975      BEQ     draw_right_tile
00004062  0C12 000B               1976      CMP.B   #11,(A2)
00004066  6700 003A               1977      BEQ     draw_left_tile
0000406A  0C12 000C               1978      CMP.B   #12,(A2)
0000406E  6700 0024               1979      BEQ     draw_both_tile
00004072  0C12 000D               1980      CMP.B   #13,(A2)
00004076  6700 0038               1981      BEQ     draw_right_tile
0000407A  0C12 000E               1982      CMP.B   #14,(A2)
0000407E  6700 0014               1983      BEQ     draw_both_tile
00004082                          1984      
00004082  6000 003A               1985      BRA     draw_blank_tile     Draw the blank tile
00004086                          1986      
00004086                          1987  draw_blocked_tile:
00004086  43F9 0000538F           1988      lea     blocked_tile,A1
0000408C  103C 000E               1989      move.b  #14,D0
00004090  4E4F                    1990      trap    #15
00004092  4E75                    1991      rts
00004094                          1992      
00004094                          1993  draw_both_tile:
00004094  43F9 00005383           1994      lea     both_tile,A1
0000409A  103C 000E               1995      move.b  #14,D0
0000409E  4E4F                    1996      trap    #15
000040A0  4E75                    1997      rts
000040A2                          1998      
000040A2                          1999  draw_left_tile:
000040A2  43F9 00005387           2000      lea     left_tile,A1
000040A8  103C 000E               2001      move.b  #14,D0
000040AC  4E4F                    2002      trap    #15
000040AE  4E75                    2003      rts
000040B0                          2004      
000040B0                          2005  draw_right_tile:
000040B0  43F9 0000538B           2006      lea     right_tile,A1
000040B6  103C 000E               2007      move.b  #14,D0
000040BA  4E4F                    2008      trap    #15
000040BC  4E75                    2009      rts
000040BE                          2010      
000040BE                          2011  draw_blank_tile:
000040BE  43F9 0000537F           2012      lea     blank_tile,A1
000040C4  103C 000E               2013      move.b  #14,D0
000040C8  4E4F                    2014      trap    #15
000040CA  4E75                    2015      rts
000040CC                          2016  
000040CC                          2017  *----------------------Draw Loot------------------------
000040CC                          2018  check_for_loot_piles:
000040CC  4BF8 7000               2019      lea     FIRST_LOOT,A5   Load the memory address of the first loot pile
000040D0  1A3C 0000               2020      move.b  #0,D5           Move the starting loot number to D5
000040D4  6100 0004               2021      bsr     loop_loot_piles Loop through all loot piles
000040D8  4E75                    2022      rts                     Return from subroutine
000040DA                          2023      
000040DA                          2024  loop_loot_piles:
000040DA  6100 0014               2025      bsr     check_for_loot  Check for a loot pile
000040DE                          2026      
000040DE  BA3C 000E               2027      CMP.B   #ENEMY_MAX,D5   Compare the enemy number with the maximum loot number
000040E2  6C00 FE86               2028      BGE     return          Return from the loop if the current loot number is greater than or equal to the max
000040E6                          2029      
000040E6  5205                    2030      add.b   #1,D5           Add to the current loot number
000040E8  DAFC 0010               2031      add.w   #16,A5          Add to the current loot pointer to move to the next loot pile
000040EC  5D4D                    2032      sub.w   #L_ACTIVE,A5    Move to the root
000040EE  60EA                    2033      bra     loop_loot_piles Keep looping the loot piles
000040F0                          2034      
000040F0                          2035  check_for_loot:
000040F0  5C4D                    2036      add.w   #L_ACTIVE,A5    Move to the active state
000040F2  0C15 0000               2037      CMP.B   #0,(A5)         Return if the loot is not active
000040F6  6700 FE72               2038      BEQ     return
000040FA  5D4D                    2039      sub.w   #L_ACTIVE,A5    Move to the root
000040FC                          2040  
000040FC  3615                    2041      move.w  (A5),D3         Move the enemy coordinates into data register D3 for large-value comparisons
000040FE  B5C3                    2042      CMP.L   D3,A2           Check if the enemy is in the current position
00004100  6700 0006               2043      BEQ     draw_loot       Draw the enemy if it is
00004104  5C4D                    2044      add.w   #L_ACTIVE,A5    Move to the active state
00004106  4E75                    2045      rts                     Return if the enemy is not in the current position
00004108                          2046      
00004108                          2047  draw_loot:
00004108  5C4D                    2048      add.w   #L_ACTIVE,A5    Move to the active state
0000410A                          2049  
0000410A  323C 00FF               2050      move.w  #255,D1         Move the word #255 to D1 to set the type of trap 11
0000410E  103C 000B               2051      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
00004112  4E4F                    2052      trap    #15             Trap to get the cursor position in D1
00004114                          2053      
00004114  0441 0200               2054      sub.w   #512,D1         Move the cursor back by two columns
00004118  4E4F                    2055      trap    #15             Set the cursor position with trap command 11
0000411A                          2056      
0000411A  2601                    2057      move.l  D1,D3           Move the value in D1 to D3 for storage
0000411C                          2058      
0000411C  223C 0000FFFF           2059      move.l  #GOLD,D1         Move the colour red to D1
00004122  6100 FE88               2060      bsr     change_font_colour  Change the font colour
00004126                          2061      
00004126  43F9 0000539B           2062      lea     loot_mark,A1   load the enemy symbol
0000412C  103C 000E               2063      move.b  #14,D0          Move #14 to D0 for trap command 14
00004130  4E4F                    2064      trap    #15             Draw the player mark
00004132                          2065      
00004132  223C 00FFFFFF           2066      move.l  #WHITE,D1       Move the colour white to D1
00004138  6100 FE72               2067      bsr     change_font_colour  Change the font colour
0000413C                          2068      
0000413C  2203                    2069      move.l  D3,D1           Move the value in D3 to D1 for previous cursor position
0000413E                          2070      
0000413E  0641 0200               2071      add.w   #512,D1         Move the cursor position two columns forward
00004142  103C 000B               2072      move.b  #11,D0          Move byte #11 for trap command 11 
00004146  4E4F                    2073      trap    #15             Set the cursor position
00004148                          2074      
00004148  4E75                    2075      rts 
0000414A                          2076  
0000414A                          2077  *---------------------Draw Player-----------------------
0000414A                          2078  check_for_player:
0000414A  B5CE                    2079      CMP.L   A6,A2
0000414C  6700 0004               2080      BEQ     draw_player
00004150  4E75                    2081      rts
00004152                          2082      
00004152                          2083  draw_player:
00004152  323C 00FF               2084      move.w  #255,D1         Move the word #255 to D1 to set the type of trap 11
00004156  103C 000B               2085      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
0000415A  4E4F                    2086      trap    #15             Trap to get the cursor position in D1
0000415C                          2087      
0000415C  0441 0200               2088      sub.w   #512,D1         Move the cursor back by two columns
00004160  4E4F                    2089      trap    #15             Set the cursor position with trap command 11
00004162                          2090      
00004162  2601                    2091      move.l  D1,D3          Move the value in D1 to D3 for storage
00004164                          2092      
00004164  223C 0000FF00           2093      move.l  #GREEN,D1       Move the colour green to D1
0000416A  6100 FE40               2094      bsr     change_font_colour  Change the font colour
0000416E                          2095      
0000416E  43F9 00005393           2096      lea     player_mark,A1  load the player symbol
00004174  103C 000E               2097      move.b  #14,D0          Move #14 to D0 for trap command 14
00004178  4E4F                    2098      trap    #15             Draw the player mark
0000417A                          2099      
0000417A  223C 00FFFFFF           2100      move.l  #WHITE,D1       Move the colour white to D1
00004180  6100 FE2A               2101      bsr     change_font_colour  Change the font colour
00004184                          2102      
00004184  2203                    2103      move.l  D3,D1           Move the value in D3 to D1 for previous cursor position
00004186                          2104      
00004186  0641 0200               2105      add.w   #512,D1         Move the cursor position two columns forward
0000418A  103C 000B               2106      move.b  #11,D0          Move byte #11 for trap command 11 
0000418E  4E4F                    2107      trap    #15             Set the cursor position
00004190                          2108      
00004190  4E75                    2109      rts
00004192                          2110      
00004192                          2111  *---------------------Draw Enemies----------------------
00004192                          2112  check_for_enemies:
00004192  4BF8 6000               2113      lea     FIRST_ENEMY,A5  Load the memory address of the first enemy
00004196  1A3C 0000               2114      move.b  #0,D5           Move the starting enemy number to D5
0000419A  6100 0004               2115      bsr     loop_enemies    Loop through all enemies
0000419E  4E75                    2116      rts                     Return from subroutine
000041A0                          2117      
000041A0                          2118  loop_enemies:
000041A0  6100 0012               2119      bsr     check_for_enemy Check for an enemy
000041A4                          2120      
000041A4  BA3C 000E               2121      CMP.B   #ENEMY_MAX,D5   Compare the enemy number with the maximum enemy number
000041A8  6C00 FDC0               2122      BGE     return          Return from the loop if the current enemy number is greater than or equal to the max
000041AC                          2123      
000041AC  5205                    2124      add.b   #1,D5           Add to the current enemy number
000041AE  DAFC 000C               2125      add.w   #12,A5          Add to the current enemy pointer to move to the next enemy (16 for next enemy - 4 to get back from position)
000041B2  60EC                    2126      bra     loop_enemies    Keep looping the enemies
000041B4                          2127      
000041B4                          2128  check_for_enemy:
000041B4  564D                    2129      add.w   #ALIVE,A5       Add to the enemy memory address to get the enemy's alive state
000041B6  0C1D 0000               2130      CMP.B   #0,(A5)+        Check if the enemy is alive
000041BA  6700 FDAE               2131      BEQ     return          Return from the subroutine if not
000041BE                          2132      
000041BE  3615                    2133      move.w  (A5),D3         Move the enemy coordinates into data register D3 for large-value comparisons
000041C0  B5C3                    2134      CMP.L   D3,A2           Check if the enemy is in the current position
000041C2  6700 0004               2135      BEQ     draw_enemy      Draw the enemy if it is
000041C6  4E75                    2136      rts                     Return if the enemy is not in the current position
000041C8                          2137      
000041C8                          2138  draw_enemy:
000041C8  323C 00FF               2139      move.w  #255,D1         Move the word #255 to D1 to set the type of trap 11
000041CC  103C 000B               2140      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
000041D0  4E4F                    2141      trap    #15             Trap to get the cursor position in D1
000041D2                          2142      
000041D2  0441 0200               2143      sub.w   #512,D1         Move the cursor back by two columns
000041D6  4E4F                    2144      trap    #15             Set the cursor position with trap command 11
000041D8                          2145      
000041D8  2601                    2146      move.l  D1,D3          Move the value in D1 to D3 for storage
000041DA                          2147      
000041DA  223C 000000FF           2148      move.l  #RED,D1         Move the colour red to D1
000041E0  6100 FDCA               2149      bsr     change_font_colour  Change the font colour
000041E4                          2150      
000041E4  43F9 00005395           2151      lea     enemy_mark,A1   load the enemy symbol
000041EA  103C 000E               2152      move.b  #14,D0          Move #14 to D0 for trap command 14
000041EE  4E4F                    2153      trap    #15             Draw the player mark
000041F0                          2154      
000041F0  223C 00FFFFFF           2155      move.l  #WHITE,D1       Move the colour white to D1
000041F6  6100 FDB4               2156      bsr     change_font_colour  Change the font colour
000041FA                          2157      
000041FA  2203                    2158      move.l  D3,D1           Move the value in D3 to D1 for previous cursor position
000041FC                          2159      
000041FC  0641 0200               2160      add.w   #512,D1         Move the cursor position two columns forward
00004200  103C 000B               2161      move.b  #11,D0          Move byte #11 for trap command 11 
00004204  4E4F                    2162      trap    #15             Set the cursor position
00004206                          2163      
00004206  4E75                    2164      rts 
00004208                          2165   
00004208                          2166  *----------------------Draw Shops-----------------------
00004208                          2167  check_for_shops:
00004208  4BF8 6500               2168      lea     FIRST_SHOP,A5   Load the memory address of the first shop
0000420C  1A3C 0000               2169      move.b  #0,D5           Move the starting shop number to D5
00004210  6100 0004               2170      bsr     loop_shops      Loop through all shops
00004214  4E75                    2171      rts                     Return from subroutine
00004216                          2172      
00004216                          2173  loop_shops:
00004216  6100 0012               2174      bsr     check_for_shop  Check for a shop
0000421A                          2175      
0000421A  BA3C 0002               2176      CMP.B   #SHOP_MAX,D5    Compare the shop number with the maximum shop number
0000421E  6C00 FD4A               2177      BGE     return          Return from the loop if the current shop number is greater than or equal to the max
00004222                          2178      
00004222  5205                    2179      add.b   #1,D5           Add to the current shop number
00004224  DAFC 0010               2180      add.w   #16,A5          Add to the current shop pointer to move to the next shop
00004228  60EC                    2181      bra     loop_shops      Keep looping the shops
0000422A                          2182      
0000422A                          2183  check_for_shop:
0000422A  3615                    2184      move.w  (A5),D3         Move the shop coordinates into data register D3 for large-value comparisons
0000422C  B5C3                    2185      CMP.L   D3,A2           Check if the shop is in the current position
0000422E  6700 0004               2186      BEQ     draw_shop       Draw the shop if it is
00004232  4E75                    2187      rts                     Return if the shop is not in the current position
00004234                          2188      
00004234                          2189  draw_shop:
00004234  323C 00FF               2190      move.w  #255,D1         Move the word #255 to D1 to set the type of trap 11
00004238  103C 000B               2191      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
0000423C  4E4F                    2192      trap    #15             Trap to get the cursor position in D1
0000423E                          2193      
0000423E  0441 0200               2194      sub.w   #512,D1         Move the cursor back by two columns
00004242  4E4F                    2195      trap    #15             Set the cursor position with trap command 11
00004244                          2196      
00004244  2601                    2197      move.l  D1,D3           Move the value in D1 to D3 for storage
00004246                          2198      
00004246  223C 00F000F0           2199      move.l  #PURPLE,D1      Move the colour red to D1
0000424C  6100 FD5E               2200      bsr     change_font_colour  Change the font colour
00004250                          2201      
00004250  43F9 00005399           2202      lea     shop_mark,A1    load the enemy symbol
00004256  103C 000E               2203      move.b  #14,D0          Move #14 to D0 for trap command 14
0000425A  4E4F                    2204      trap    #15             Draw the player mark
0000425C                          2205      
0000425C  223C 00FFFFFF           2206      move.l  #WHITE,D1       Move the colour white to D1
00004262  6100 FD48               2207      bsr     change_font_colour  Change the font colour
00004266                          2208      
00004266  2203                    2209      move.l  D3,D1           Move the value in D3 to D1 for previous cursor position
00004268                          2210      
00004268  0641 0200               2211      add.w   #512,D1         Move the cursor position two columns forward
0000426C  103C 000B               2212      move.b  #11,D0          Move byte #11 for trap command 11 
00004270  4E4F                    2213      trap    #15             Set the cursor position
00004272                          2214      
00004272  4E75                    2215      rts
00004274                          2216  
00004274                          2217  *----------------------Draw Doors-----------------------
00004274                          2218  check_for_doors:
00004274  4BF8 6FE0               2219      lea     FIRST_DOOR,A5   Load the memory address of the first door
00004278  1A3C 0000               2220      move.b  #0,D5           Move the starting door number to D5
0000427C  6100 0004               2221      bsr     loop_doors      Loop through all doors
00004280  4E75                    2222      rts                     Return from subroutine
00004282                          2223      
00004282                          2224  loop_doors:
00004282  6100 0010               2225      bsr     check_for_door  Check for a door
00004286                          2226      
00004286  BA3C 0003               2227      CMP.B   #DOOR_MAX,D5    Compare the door number with the maximum door number
0000428A  6C00 FCDE               2228      BGE     return          Return from the loop if the current door number is greater than or equal to the max
0000428E                          2229      
0000428E  5205                    2230      add.b   #1,D5           Add to the current door number
00004290  544D                    2231      add.w   #2,A5          Add to the current door pointer to move to the next door
00004292  60EE                    2232      bra     loop_doors      Keep looping the doors
00004294                          2233      
00004294                          2234  check_for_door:
00004294  3615                    2235      move.w  (A5),D3         Move the door coordinates into data register D3 for large-value comparisons
00004296  B5C3                    2236      CMP.L   D3,A2           Check if the door is in the current position
00004298  6700 0004               2237      BEQ     draw_door       Draw the door if it is
0000429C  4E75                    2238      rts                     Return if the door is not in the current position
0000429E                          2239      
0000429E                          2240  draw_door:
0000429E  6100 FD1E               2241      bsr     get_cursor_pos  Get the position of the cursor and save the value to D1 and D3
000042A2                          2242      
000042A2  0441 0200               2243      sub.w   #512,D1         Move the cursor back by two columns
000042A6  4E4F                    2244      trap    #15             Set the cursor position with trap command 11
000042A8                          2245      
000042A8  223C 00507090           2246      move.l  #BROWN,D1       Move the colour red to D1
000042AE  6100 FCFC               2247      bsr     change_font_colour  Change the font colour
000042B2                          2248      
000042B2  43F9 0000539D           2249      lea     door_mark,A1    load the door symbol
000042B8  103C 000E               2250      move.b  #14,D0          Move #14 to D0 for trap command 14
000042BC  4E4F                    2251      trap    #15             Draw the door mark
000042BE                          2252      
000042BE  223C 00FFFFFF           2253      move.l  #WHITE,D1       Move the colour white to D1
000042C4  6100 FCE6               2254      bsr     change_font_colour  Change the font colour
000042C8                          2255      
000042C8  2203                    2256      move.l  D3,D1           Move the value in D3 to D1 for previous cursor position
000042CA  103C 000B               2257      move.b  #11,D0          Move byte #11 for trap command 11 
000042CE  4E4F                    2258      trap    #15             Set the cursor position
000042D0                          2259      
000042D0  4E75                    2260      rts                     Return from subroutine
000042D2                          2261  
000042D2                          2262  *--------------------Draw Win Point---------------------
000042D2                          2263  check_for_win_point:
000042D2  B5FC 00008156           2264      CMP.L   #WIN_POINT,A2   Check if the win point is in the current tile
000042D8  6700 0004               2265      BEQ     draw_win_point  Branch to draw the win point if so
000042DC  4E75                    2266      rts                     Return from subroutine if not
000042DE                          2267      
000042DE                          2268  draw_win_point:
000042DE  323C 00FF               2269      move.w  #255,D1         Move the word #255 to D1 to set the type of trap 11
000042E2  103C 000B               2270      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
000042E6  4E4F                    2271      trap    #15             Trap to get the cursor position in D1
000042E8                          2272      
000042E8  0441 0200               2273      sub.w   #512,D1         Move the cursor back by two columns
000042EC  4E4F                    2274      trap    #15             Set the cursor position with trap command 11
000042EE                          2275      
000042EE  2601                    2276      move.l  D1,D3           Move the value in D1 to D3 for storage
000042F0                          2277      
000042F0  223C 00FF0000           2278      move.l  #BLUE,D1        Move the colour blue to D1
000042F6  6100 FCB4               2279      bsr     change_font_colour  Change the font colour
000042FA                          2280      
000042FA  43F9 00005397           2281      lea     win_point_mark,A1   load the win point symbol
00004300  103C 000E               2282      move.b  #14,D0              Move #14 to D0 for trap command 14
00004304  4E4F                    2283      trap    #15                 Draw the win point mark
00004306                          2284      
00004306  223C 00FFFFFF           2285      move.l  #WHITE,D1       Move the colour white to D1
0000430C  6100 FC9E               2286      bsr     change_font_colour  Change the font colour
00004310                          2287      
00004310  2203                    2288      move.l  D3,D1           Move the value in D3 to D1 for previous cursor position
00004312                          2289      
00004312  0641 0200               2290      add.w   #512,D1         Move the cursor position two columns forward
00004316  103C 000B               2291      move.b  #11,D0          Move byte #11 for trap command 11 
0000431A  4E4F                    2292      trap    #15             Set the cursor position
0000431C                          2293      
0000431C  4E75                    2294      rts
0000431E                          2295      
0000431E                          2296  *-------------------------------------------------------
0000431E                          2297  *-------------------Setup the world---------------------
0000431E                          2298  *-------------------------------------------------------
0000431E                          2299  setup_world:
0000431E  13FC 000E 0000814A      2300      move.b  #14,$814A   Setup the starting corridor
00004326  13FC 0007 0000813A      2301      move.b  #7,$813A    T junction upwards from starting corridor
0000432E  13FC 0004 00008139      2302      move.b  #4,$8139    Left corridor
00004336  13FC 0001 00008129      2303      move.b  #1,$8129
0000433E  13FC 0001 00008119      2304      move.b  #1,$8119
00004346                          2305      
00004346  13FC 0004 00008108      2306      move.b  #4,$8108    First shop
0000434E  13FC 0000 00008109      2307      move.b  #0,$8109    Entrance
00004356  13FC 0005 0000810A      2308      move.b  #5,$810A
0000435E  13FC 0008 000080F8      2309      move.b  #8,$80F8
00004366  13FC 0000 000080F9      2310      move.b  #0,$80F9
0000436E  13FC 000A 000080FA      2311      move.b  #10,$80FA
00004376  13FC 0003 000080E8      2312      move.b  #3,$80E8
0000437E  13FC 0007 000080E9      2313      move.b  #7,$80E9
00004386  13FC 0006 000080EA      2314      move.b  #6,$80EA
0000438E                          2315      
0000438E  13FC 0005 0000813B      2316      move.b  #5,$813B    Right corridor
00004396  13FC 0001 0000812B      2317      move.b  #1,$812B
0000439E  13FC 0001 0000811B      2318      move.b  #1,$811B
000043A6  13FC 0008 0000810B      2319      move.b  #8,$810B    Path continues up with a turn off to the right
000043AE                          2320      
000043AE  13FC 0002 0000810C      2321      move.b  #2,$810C    Right path
000043B6  13FC 0002 0000810D      2322      move.b  #2,$810D    Continue right
000043BE  13FC 0005 0000810E      2323      move.b  #5,$810E    Path upwards and to the left
000043C6  13FC 0001 000080FE      2324      move.b  #1,$80FE    Leads upwards into a room
000043CE                          2325      
000043CE  13FC 0004 000080ED      2326      move.b  #4,$80ED    First monster room
000043D6  13FC 0000 000080EE      2327      move.b  #0,$80EE    Entrance
000043DE  13FC 0005 000080EF      2328      move.b  #5,$80EF
000043E6  13FC 0008 000080DD      2329      move.b  #8,$80DD
000043EE  13FC 0000 000080DE      2330      move.b  #0,$80DE
000043F6  13FC 000A 000080DF      2331      move.b  #10,$80DF
000043FE  13FC 0003 000080CD      2332      move.b  #3,$80CD
00004406  13FC 0007 000080CE      2333      move.b  #7,$80CE
0000440E  13FC 0006 000080CF      2334      move.b  #6,$80CF
00004416                          2335      
00004416  13FC 0001 000080FB      2336      move.b  #1,$80FB    Path that continues up
0000441E  13FC 0001 000080EB      2337      move.b  #1,$80EB    Path continues upwards
00004426  13FC 0001 000080DB      2338      move.b  #1,$80DB
0000442E                          2339      
0000442E                          2340      *Bottom row of room
0000442E  13FC 0004 000080C8      2341      move.b  #4,$80C8    Large monster room
00004436  13FC 0009 000080C9      2342      move.b  #9,$80C9
0000443E  13FC 0009 000080CA      2343      move.b  #9,$80CA
00004446  13FC 0000 000080CB      2344      move.b  #0,$80CB    Entrance
0000444E  13FC 0005 000080CC      2345      move.b  #5,$80CC
00004456                          2346      *Middle row of room
00004456  13FC 0000 000080B8      2347      move.b  #0,$80B8    Exit to the left
0000445E  13FC 0000 000080B9      2348      move.b  #0,$80B9
00004466  13FC 0000 000080BA      2349      move.b  #0,$80BA
0000446E  13FC 0000 000080BB      2350      move.b  #0,$80BB
00004476  13FC 000A 000080BC      2351      move.b  #10,$80BC
0000447E                          2352      *Top row of room
0000447E  13FC 0003 000080A8      2353      move.b  #3,$80A8
00004486  13FC 0007 000080A9      2354      move.b  #7,$80A9
0000448E  13FC 0007 000080AA      2355      move.b  #7,$80AA
00004496  13FC 0007 000080AB      2356      move.b  #7,$80AB
0000449E  13FC 0006 000080AC      2357      move.b  #6,$80AC
000044A6                          2358      
000044A6  13FC 0002 000080B7      2359      move.b  #2,$80B7    Exit large room leftwards
000044AE  13FC 0002 000080B6      2360      move.b  #2,$80B6    Continue to the left
000044B6  13FC 0007 000080B5      2361      move.b  #7,$80B5    Continue to the left and a path downwards
000044BE  13FC 0002 000080B4      2362      move.b  #2,$80B4    Continue to the left
000044C6                          2363      
000044C6  13FC 0003 000080A1      2364      move.b  #3,$80A1    Room to the left
000044CE  13FC 0007 000080A2      2365      move.b  #7,$80A2
000044D6  13FC 0006 000080A3      2366      move.b  #6,$80A3
000044DE  13FC 0008 000080B1      2367      move.b  #8,$80B1
000044E6  13FC 0000 000080B2      2368      move.b  #0,$80B2
000044EE  13FC 0000 000080B3      2369      move.b  #0,$80B3    Entrance to the right
000044F6  13FC 0004 000080C1      2370      move.b  #4,$80C1
000044FE  13FC 0009 000080C2      2371      move.b  #9,$80C2
00004506  13FC 0005 000080C3      2372      move.b  #5,$80C3
0000450E                          2373      
0000450E  13FC 0001 000080C5      2374      move.b  #1,$80C5    Path leading downwards
00004516  13FC 0001 000080D5      2375      move.b  #1,$80D5
0000451E  13FC 000A 000080E5      2376      move.b  #10,$80E5   Path leading downward and to the left
00004526  13FC 0002 000080E4      2377      move.b  #2,$80E4    Path on the left
0000452E  13FC 0002 000080E3      2378      move.b  #2,$80E3
00004536  13FC 0003 000080E2      2379      move.b  #3,$80E2    Path takes a turn downwards
0000453E  13FC 0001 000080F2      2380      move.b  #1,$80F2    Path continues downwards
00004546                          2381      
00004546  13FC 0003 00008101      2382      move.b  #3,$8101    Regular enemy room
0000454E  13FC 0000 00008102      2383      move.b  #0,$8102    Entrance
00004556  13FC 0006 00008103      2384      move.b  #6,$8103
0000455E  13FC 0008 00008111      2385      move.b  #8,$8111
00004566  13FC 0000 00008112      2386      move.b  #0,$8112
0000456E  13FC 000A 00008113      2387      move.b  #10,$8113
00004576  13FC 0004 00008121      2388      move.b  #4,$8121
0000457E  13FC 0009 00008122      2389      move.b  #9,$8122
00004586  13FC 000A 00008123      2390      move.b  #10,$8123   Exit at the bottom
0000458E                          2391      
0000458E  13FC 0001 000080F5      2392      move.b  #1,$80F5    Path leading downward
00004596  13FC 0001 00008105      2393      move.b  #1,$8105
0000459E  13FC 0001 00008115      2394      move.b  #1,$8115
000045A6  13FC 0001 00008125      2395      move.b  #1,$8125
000045AE                          2396      
000045AE                          2397      *Top row of room
000045AE  13FC 0008 00008133      2398      move.b  #8,$8133    Large enemy room - Exit at top
000045B6  13FC 0007 00008134      2399      move.b  #7,$8134
000045BE  13FC 0000 00008135      2400      move.b  #0,$8135    Entrance
000045C6  13FC 0006 00008136      2401      move.b  #6,$8136
000045CE                          2402      
000045CE                          2403      *Middle row of room
000045CE  13FC 0008 00008143      2404      move.b  #8,$8143
000045D6  13FC 0000 00008144      2405      move.b  #0,$8144
000045DE  13FC 0000 00008145      2406      move.b  #0,$8145
000045E6  13FC 000A 00008146      2407      move.b  #10,$8146
000045EE                          2408      
000045EE                          2409      *Bottom row of room
000045EE  13FC 0004 00008153      2410      move.b  #4,$8153
000045F6  13FC 0009 00008154      2411      move.b  #9,$8154
000045FE  13FC 0009 00008155      2412      move.b  #9,$8155
00004606  13FC 0005 00008156      2413      move.b  #5,$8156
0000460E                          2414      
0000460E                          2415      * Setup the doors
0000460E  4BF8 6FE0               2416      lea     FIRST_DOOR,A5   Set the first door location to A5
00004612  3ABC 80EB               2417      move.w  #$80EB,(A5)     Set the location of the first door
00004616  544D                    2418      add.w   #2,A5           Increment the door memory address
00004618  3ABC 80B6               2419      move.w  #$80B6,(A5)     Set the location of the first door
0000461C  544D                    2420      add.w   #2,A5           Increment the door memory address
0000461E  3ABC 8115               2421      move.w  #$8115,(A5)
00004622                          2422      
00004622  4E75                    2423      rts
00004624                          2424  
00004624                          2425  setup_enemies:
00004624                          2426      * Setup first enemy
00004624  11FC 0003 6000          2427      move.b  #3,$6000    Health - Setup the first enemy
0000462A  11FC 0001 6001          2428      move.b  #1,$6001    Damage/level
00004630  11FC 0002 6002          2429      move.b  #2,$6002    Class type (Mage)
00004636  11FC 0001 6003          2430      move.b  #1,$6003    Alive state (Alive)
0000463C  31FC 80EE 6004          2431      move.w  #$80EE,$6004  Move enemy coordinates
00004642                          2432      
00004642                          2433      * Setup second enemy
00004642  11FC 0004 6010          2434      move.b  #4,$6010    Health - Setup the first enemy
00004648  11FC 0002 6011          2435      move.b  #2,$6011    Damage/level
0000464E  11FC 0003 6012          2436      move.b  #3,$6012    Class type (Rogue)
00004654  11FC 0001 6013          2437      move.b  #1,$6013    Alive state (Alive)
0000465A  31FC 80DF 6014          2438      move.w  #$80DF,$6014  Move enemy coordinates
00004660                          2439      
00004660                          2440      * Setup Third enemy
00004660  11FC 0005 6020          2441      move.b  #5,$6020    Health - Setup the first enemy
00004666  11FC 0002 6021          2442      move.b  #2,$6021    Damage/level
0000466C  11FC 0002 6022          2443      move.b  #2,$6022    Class type (Mage)
00004672  11FC 0001 6023          2444      move.b  #1,$6023    Alive state (Alive)
00004678  31FC 80CD 6024          2445      move.w  #$80CD,$6024  Move enemy coordinates
0000467E                          2446      
0000467E                          2447      * Setup forth enemy
0000467E  11FC 0003 6030          2448      move.b  #3,$6030    Health - Setup the first enemy
00004684  11FC 0001 6031          2449      move.b  #1,$6031    Damage/level
0000468A  11FC 0001 6032          2450      move.b  #1,$6032    Class type (knight)
00004690  11FC 0001 6033          2451      move.b  #1,$6033    Alive state (Alive)
00004696  31FC 80CB 6034          2452      move.w  #$80CB,$6034  Move enemy coordinates
0000469C                          2453      
0000469C                          2454      * Setup fifth enemy
0000469C  11FC 0004 6040          2455      move.b  #4,$6040    Health - Setup the first enemy
000046A2  11FC 0001 6041          2456      move.b  #1,$6041    Damage/level
000046A8  11FC 0003 6042          2457      move.b  #3,$6042    Class type (Rogue)
000046AE  11FC 0001 6043          2458      move.b  #1,$6043    Alive state (Alive)
000046B4  31FC 80C9 6044          2459      move.w  #$80C9,$6044  Move enemy coordinates
000046BA                          2460      
000046BA                          2461      * Setup sixth enemy
000046BA  11FC 0004 6050          2462      move.b  #4,$6050    Health
000046C0  11FC 0002 6051          2463      move.b  #2,$6051    Damage/level
000046C6  11FC 0002 6052          2464      move.b  #2,$6052    Class type (Mage)
000046CC  11FC 0001 6053          2465      move.b  #1,$6053    Alive state (Alive)
000046D2  31FC 80AB 6054          2466      move.w  #$80AB,$6054  Move enemy coordinates
000046D8                          2467      
000046D8                          2468      * Setup seventh enemy
000046D8  11FC 0005 6060          2469      move.b  #5,$6060    Health
000046DE  11FC 0002 6061          2470      move.b  #2,$6061    Damage/level
000046E4  11FC 0002 6062          2471      move.b  #2,$6062    Class type (Mage)
000046EA  11FC 0001 6063          2472      move.b  #1,$6063    Alive state (Alive)
000046F0  31FC 80B8 6064          2473      move.w  #$80B8,$6064  Move enemy coordinates
000046F6                          2474      
000046F6                          2475      * Setup eighth enemy
000046F6  11FC 0004 6070          2476      move.b  #4,$6070    Health
000046FC  11FC 0002 6071          2477      move.b  #2,$6071    Damage/level
00004702  11FC 0001 6072          2478      move.b  #1,$6072    Class type (knight)
00004708  11FC 0001 6073          2479      move.b  #1,$6073    Alive state (Alive)
0000470E  31FC 8102 6074          2480      move.w  #$8102,$6074  Move enemy coordinates
00004714                          2481      
00004714                          2482      * Setup ninth enemy
00004714  11FC 0005 6080          2483      move.b  #5,$6080    Health
0000471A  11FC 0002 6081          2484      move.b  #2,$6081    Damage/level
00004720  11FC 0001 6082          2485      move.b  #1,$6082    Class type (knight)
00004726  11FC 0001 6083          2486      move.b  #1,$6083    Alive state (Alive)
0000472C  31FC 8123 6084          2487      move.w  #$8123,$6084  Move enemy coordinates
00004732                          2488      
00004732                          2489      * Setup tenth enemy
00004732  11FC 0005 6090          2490      move.b  #5,$6090    Health
00004738  11FC 0003 6091          2491      move.b  #3,$6091    Damage/level
0000473E  11FC 0003 6092          2492      move.b  #3,$6092    Class type (rogue)
00004744  11FC 0001 6093          2493      move.b  #1,$6093    Alive state (Alive)
0000474A  31FC 8111 6094          2494      move.w  #$8111,$6094  Move enemy coordinates
00004750                          2495      
00004750                          2496      * Setup eleventh enemy
00004750  11FC 0006 60A0          2497      move.b  #6,$60A0    Health
00004756  11FC 0001 60A1          2498      move.b  #1,$60A1    Damage/level
0000475C  11FC 0003 60A2          2499      move.b  #3,$60A2    Class type (Rogue)
00004762  11FC 0001 60A3          2500      move.b  #1,$60A3    Alive state (Alive)
00004768  31FC 8143 60A4          2501      move.w  #$8143,$60A4  Move enemy coordinates
0000476E                          2502      
0000476E                          2503      * Setup twelvth enemy
0000476E  11FC 0004 60B0          2504      move.b  #4,$60B0    Health
00004774  11FC 0002 60B1          2505      move.b  #2,$60B1    Damage/level
0000477A  11FC 0001 60B2          2506      move.b  #1,$60B2    Class type (knight)
00004780  11FC 0001 60B3          2507      move.b  #1,$60B3    Alive state (Alive)
00004786  31FC 8135 60B4          2508      move.w  #$8135,$60B4  Move enemy coordinates
0000478C                          2509      
0000478C                          2510      * Setup thirteenth enemy
0000478C  11FC 0006 60C0          2511      move.b  #6,$60C0    Health
00004792  11FC 0003 60C1          2512      move.b  #3,$60C1    Damage/level
00004798  11FC 0002 60C2          2513      move.b  #2,$60C2    Class type (Mage)
0000479E  11FC 0001 60C3          2514      move.b  #1,$60C3    Alive state (Alive)
000047A4  31FC 8146 60C4          2515      move.w  #$8146,$60C4  Move enemy coordinates
000047AA                          2516      
000047AA                          2517      * Setup fourteenth enemy
000047AA  11FC 0005 60D0          2518      move.b  #5,$60D0    Health
000047B0  11FC 0003 60D1          2519      move.b  #3,$60D1    Damage/level
000047B6  11FC 0003 60D2          2520      move.b  #3,$60D2    Class type (Rogue)
000047BC  11FC 0001 60D3          2521      move.b  #1,$60D3    Alive state (Alive)
000047C2  31FC 8154 60D4          2522      move.w  #$8154,$60D4  Move enemy coordinates
000047C8                          2523      
000047C8  4E75                    2524      rts
000047CA                          2525      
000047CA                          2526  setup_loot:
000047CA                          2527      * Setup first loot pile
000047CA  31FC 80EE 7000          2528      move.w  #$80EE,$7000  Move loot coordinates
000047D0  11FC 0001 7002          2529      move.b  #1,$7002  Move loot potions
000047D6  11FC 0000 7003          2530      move.b  #0,$7003  Move loot keys
000047DC  11FC 0000 7004          2531      move.b  #0,$7004  Move loot torches
000047E2  11FC 0003 7005          2532      move.b  #3,$7005  Move loot gold
000047E8  11FC 0001 7006          2533      move.b  #1,$7006  Move loot active state
000047EE                          2534      
000047EE                          2535      * Setup second loot pile
000047EE  31FC 80DF 7010          2536      move.w  #$80DF,$7010  Move loot coordinates
000047F4  11FC 0000 7012          2537      move.b  #0,$7012  Move loot potions
000047FA  11FC 0001 7013          2538      move.b  #1,$7013  Move loot keys
00004800  11FC 0000 7014          2539      move.b  #0,$7014  Move loot torches
00004806  11FC 0005 7015          2540      move.b  #5,$7015  Move loot gold
0000480C  11FC 0001 7016          2541      move.b  #1,$7016  Move loot active state
00004812                          2542      
00004812                          2543      * Setup third loot pile
00004812  31FC 80CD 7020          2544      move.w  #$80CD,$7020  Move loot coordinates
00004818  11FC 0002 7022          2545      move.b  #2,$7022  Move loot potions
0000481E  11FC 0000 7023          2546      move.b  #0,$7023  Move loot keys
00004824  11FC 000F 7024          2547      move.b  #15,$7024  Move loot torches
0000482A  11FC 0006 7025          2548      move.b  #6,$7025  Move loot gold
00004830  11FC 0001 7026          2549      move.b  #1,$7026  Move loot active state
00004836                          2550      
00004836                          2551      * Setup forth loot pile
00004836  31FC 80CB 7030          2552      move.w  #$80CB,$7030  Move loot coordinates
0000483C  11FC 0000 7032          2553      move.b  #0,$7032  Move loot potions
00004842  11FC 0000 7033          2554      move.b  #0,$7033  Move loot keys
00004848  11FC 0000 7034          2555      move.b  #0,$7034  Move loot torches
0000484E  11FC 0004 7035          2556      move.b  #4,$7035  Move loot gold
00004854  11FC 0001 7036          2557      move.b  #1,$7036  Move loot active state
0000485A                          2558      
0000485A                          2559      * Setup fifth loot pile
0000485A  31FC 80C9 7040          2560      move.w  #$80C9,$7040  Move loot coordinates
00004860  11FC 0001 7042          2561      move.b  #1,$7042  Move loot potions
00004866  11FC 0000 7043          2562      move.b  #0,$7043  Move loot keys
0000486C  11FC 0004 7044          2563      move.b  #4,$7044  Move loot torches
00004872  11FC 0003 7045          2564      move.b  #3,$7045  Move loot gold
00004878  11FC 0001 7046          2565      move.b  #1,$7046  Move loot active state
0000487E                          2566      
0000487E                          2567      * Setup sixth loot pile
0000487E  31FC 80AB 7050          2568      move.w  #$80AB,$7050  Move loot coordinates
00004884  11FC 0001 7052          2569      move.b  #1,$7052  Move loot potions
0000488A  11FC 0001 7053          2570      move.b  #1,$7053  Move loot keys
00004890  11FC 0003 7054          2571      move.b  #3,$7054  Move loot torches
00004896  11FC 0003 7055          2572      move.b  #3,$7055  Move loot gold
0000489C  11FC 0001 7056          2573      move.b  #1,$7056  Move loot active state
000048A2                          2574      
000048A2                          2575      * Setup seventh loot pile
000048A2  31FC 80B8 7060          2576      move.w  #$80B8,$7060  Move loot coordinates
000048A8  11FC 0002 7062          2577      move.b  #2,$7062  Move loot potions
000048AE  11FC 0000 7063          2578      move.b  #0,$7063  Move loot keys
000048B4  11FC 0000 7064          2579      move.b  #0,$7064  Move loot torches
000048BA  11FC 0007 7065          2580      move.b  #7,$7065  Move loot gold
000048C0  11FC 0001 7066          2581      move.b  #1,$7066  Move loot active state
000048C6                          2582      
000048C6                          2583      * Setup eighth loot pile
000048C6  31FC 8102 7070          2584      move.w  #$8102,$7070  Move loot coordinates
000048CC  11FC 0000 7072          2585      move.b  #0,$7072  Move loot potions
000048D2  11FC 0000 7073          2586      move.b  #0,$7073  Move loot keys
000048D8  11FC 0006 7074          2587      move.b  #6,$7074  Move loot torches
000048DE  11FC 0003 7075          2588      move.b  #3,$7075  Move loot gold
000048E4  11FC 0001 7076          2589      move.b  #1,$7076  Move loot active state
000048EA                          2590      
000048EA                          2591      * Setup ninth loot pile
000048EA  31FC 8123 7080          2592      move.w  #$8123,$7080  Move loot coordinates
000048F0  11FC 0001 7082          2593      move.b  #1,$7082  Move loot potions
000048F6  11FC 0000 7083          2594      move.b  #0,$7083  Move loot keys
000048FC  11FC 0002 7084          2595      move.b  #2,$7084  Move loot torches
00004902  11FC 0003 7085          2596      move.b  #3,$7085  Move loot gold
00004908  11FC 0001 7086          2597      move.b  #1,$7086  Move loot active state
0000490E                          2598      
0000490E                          2599      * Setup tenth loot pile
0000490E  31FC 8111 7090          2600      move.w  #$8111,$7090  Move loot coordinates
00004914  11FC 0002 7092          2601      move.b  #2,$7092  Move loot potions
0000491A  11FC 0000 7093          2602      move.b  #0,$7093  Move loot keys
00004920  11FC 0005 7094          2603      move.b  #5,$7094  Move loot torches
00004926  11FC 0007 7095          2604      move.b  #7,$7095  Move loot gold
0000492C  11FC 0001 7096          2605      move.b  #1,$7096  Move loot active state
00004932                          2606      
00004932                          2607      * Setup eleventh loot pile
00004932  31FC 8143 70A0          2608      move.w  #$8143,$70A0  Move loot coordinates
00004938  11FC 0000 70A2          2609      move.b  #0,$70A2  Move loot potions
0000493E  11FC 0000 70A3          2610      move.b  #0,$70A3  Move loot keys
00004944  11FC 0000 70A4          2611      move.b  #0,$70A4  Move loot torches
0000494A  11FC 0002 70A5          2612      move.b  #2,$70A5  Move loot gold
00004950  11FC 0001 70A6          2613      move.b  #1,$70A6  Move loot active state
00004956                          2614      
00004956                          2615      * Setup twelvth loot pile
00004956  31FC 8135 70B0          2616      move.w  #$8135,$70B0  Move loot coordinates
0000495C  11FC 0000 70B2          2617      move.b  #0,$70B2  Move loot potions
00004962  11FC 0000 70B3          2618      move.b  #0,$70B3  Move loot keys
00004968  11FC 0000 70B4          2619      move.b  #0,$70B4  Move loot torches
0000496E  11FC 0004 70B5          2620      move.b  #4,$70B5  Move loot gold
00004974  11FC 0001 70B6          2621      move.b  #1,$70B6  Move loot active state
0000497A                          2622      
0000497A                          2623      * Setup thirteenth loot pile
0000497A  31FC 8146 70C0          2624      move.w  #$8146,$70C0  Move loot coordinates
00004980  11FC 0000 70C2          2625      move.b  #0,$70C2  Move loot potions
00004986  11FC 0000 70C3          2626      move.b  #0,$70C3  Move loot keys
0000498C  11FC 000C 70C4          2627      move.b  #12,$70C4  Move loot torches
00004992  11FC 0013 70C5          2628      move.b  #19,$70C5  Move loot gold
00004998  11FC 0001 70C6          2629      move.b  #1,$70C6  Move loot active state
0000499E                          2630      
0000499E                          2631      * Setup fourteenth loot pile
0000499E  31FC 8154 70D0          2632      move.w  #$8154,$70D0  Move loot coordinates
000049A4  11FC 0000 70D2          2633      move.b  #0,$70D2  Move loot potions
000049AA  11FC 0000 70D3          2634      move.b  #0,$70D3  Move loot keys
000049B0  11FC 000E 70D4          2635      move.b  #14,$70D4  Move loot torches
000049B6  11FC 0010 70D5          2636      move.b  #16,$70D5  Move loot gold
000049BC  11FC 0001 70D6          2637      move.b  #1,$70D6  Move loot active state
000049C2                          2638  
000049C2                          2639      
000049C2  4E75                    2640      rts
000049C4                          2641      
000049C4                          2642  setup_player:
000049C4  11FC 000A 5FF0          2643      move.b  #10,PLAYER      put score/health in memory location $5FF0
000049CA  11FC 0001 5FF1          2644      move.b  #1,PLA_DAMAGE   Assign the default damage for the player
000049D0  11FC 0000 5FF3          2645      move.b  #0,GAME_STATE   Put game state number in memory location $5FF3
000049D6                          2646      *0 = Pick role/intro | 5 = Move around | 6 = Combat | 7 = Shop | 64 = End game
000049D6                          2647  
000049D6  11FC 0000 5FF2          2648      move.b  #0,PLA_CLASS    put class number in memory location $5FF2
000049DC                          2649      * 1 corresponds to knight - 2 corresponds to mage - 3 corresponds to rogue
000049DC                          2650      
000049DC  11FC 000E 5FF8          2651      move.b  #14,PLA_GOLD    Assign the player's base gold value
000049E2  11FC 0001 5FF9          2652      move.b  #1,PLA_POTIONS  Assign the player's base potions value
000049E8  11FC 0000 5FFA          2653      move.b  #0,PLA_KEYS     Assign the player's base keys value
000049EE                          2654      *move.b  #LIFE_PER_TORCH,PLA_TORCH   Assign the player's base torch value
000049EE  11FC 000F 5FFB          2655      move.b  #15,PLA_TORCH   Assign the player's base torch value
000049F4                          2656      
000049F4  4DF9 0000814A           2657      lea     $814A,A6        Set the player coordinate to the first corridor
000049FA  31CE 5FF6               2658      move.w  A6,PLA_P_POS    Set the player's previous position to their current
000049FE                          2659      
000049FE  4E75                    2660      rts
00004A00                          2661      
00004A00                          2662  setup_shops:
00004A00                          2663      * Setup the first shop
00004A00  31FC 80F9 6500          2664      move.w  #$80F9,$6500    Set the position
00004A06  11FC 0003 6502          2665      move.b  #3,$6502        Set the potions
00004A0C  11FC 0001 6503          2666      move.b  #1,$6503        Set the keys
00004A12  11FC 0002 6504          2667      move.b  #2,$6504        Set the torches
00004A18  11FC 0002 6505          2668      move.b  #2,$6505        Set the damage
00004A1E                          2669      
00004A1E                          2670      * Setup the second shop
00004A1E  31FC 80B2 6510          2671      move.w  #$80B2,$6510    Set the position
00004A24  11FC 0005 6512          2672      move.b  #5,$6512        Set the potions
00004A2A  11FC 0001 6513          2673      move.b  #1,$6513        Set the keys
00004A30  11FC 0003 6514          2674      move.b  #3,$6514        Set the torches
00004A36  11FC 0003 6515          2675      move.b  #3,$6515        Set the damage
00004A3C                          2676  
00004A3C  4E75                    2677      rts
00004A3E                          2678      
00004A3E                          2679  *-------------------------------------------------------
00004A3E                          2680  *-------------------Data Delarations--------------------
00004A3E                          2681  *-------------------------------------------------------
00004A3E                          2682  
00004A3E= 0D 0A 00                2683  crlf:           dc.b    $0D,$0A,0
00004A41= 2A 2A 2A 2A 2A 2A ...   2684  welcome_msg:    dc.b    '*****************************************************************',$0D,$0A
00004A84= 20 20 20 20 20 20 ...   2685                  dc.b    '      __  ___      ___  __      ___        ______    _____  ___',$0D,$0A
00004AC5= 20 20 20 20 20 2F ...   2686                  dc.b    '     /""\|"  \    /"  |/""\    |"  |      /    " \  (\"   \|"  \',$0D,$0A
00004B07= 20 20 20 20 2F 20 ...   2687                  dc.b    '    /    \\   \  //  //    \   ||  |     // ____  \ |.\\   \    |',$0D,$0A
00004B4A= 20 20 20 2F 20 20 ...   2688                  dc.b    '   /  /\  \\\  \/. .//  /\  \  |:  |    /  /    ) :)|: \.   \\  |',$0D,$0A
00004B8D= 20 20 2F 2F 20 20 ...   2689                  dc.b    '  //  __   \\.    ////  __   \  \  |___(: (____/ // |.  \    \. |',$0D,$0A
00004BD0= 20 2F 20 20 20 2F ...   2690                  dc.b    ' /   /  \\  \\\   //   /  \\  \( \_|:  \\        /  |    \    \ |',$0D,$0A
00004C13= 28 5F 5F 5F 2F 20 ...   2691                  dc.b    '(___/    \___)\__/(___/    \___)\_______)\"_____/    \___|\____\)',$0D,$0A,$0D,$0A
00004C58= 2A 2A 2A 2A 2A 2A ...   2692                  dc.b    '*****************************************************************',$0D,$0A,0
00004C9C= 2E 00                   2693  loop_msg:       dc.b    '.',0
00004C9E= 20 20 20 20 20 20 ...   2694  blank_msg:      dc.b    '                                                                                   ',0
00004CF2= 54 68 65 20 64 61 ...   2695  tutorial_msg    dc.b    'The darkness here is dangerious, keep your torch close and dont let it go out.',$0D,$0A
00004D42= 45 76 65 72 79 20 ...   2696                  dc.b    'Every movement you make decreases your torch life, so think before you move.',$0D,$0A
00004D90= 59 6F 75 20 63 61 ...   2697                  dc.b    'You can buy more torches in the shop, thats probably a good place to start...',$0D,$0A,0
00004DE0= 31 3E 20 52 65 73 ...   2698  replay_msg:     dc.b    '1> Restart the game.',$0D,$0A
00004DF6= 32 3E 20 51 75 69 ...   2699                  dc.b    '2> Quit the game.',$0D,$0A,0
00004E0A= 59 6F 75 20 61 77 ...   2700  wake_up_msg:    dc.b    'You awake in a room, on a bed of red velvet, with no memory',$0D,$0A
00004E47= 6F 66 20 68 6F 77 ...   2701                  dc.b    'of how you got here. Stones crumble from the ceiling, the place looks like an',$0D,$0A
00004E96= 6F 6C 64 20 63 61 ...   2702                  dc.b    'old castle. You get a dark feeling from this place, and you know you must',$0D,$0A
00004EE1= 65 73 63 61 70 65 ...   2703                  dc.b    'escape...',$0D,$0A
00004EEC= 59 6F 75 20 63 6C ...   2704                  dc.b    'You climb from the bed and look in a nearby mirror:',$0D,$0A,0
00004F22= 31 3E 20 59 6F 75 ...   2705  pick_role_msg:  dc.b    '1> You wear armour of polished iron, a short sword and heavy shield laying',$0D,$0A
00004F6E= 63 6C 6F 73 65 20 ...   2706                  dc.b    'close by. (Knight class)',$0D,$0A,$0D,$0A
00004F8A= 32 3E 20 59 6F 75 ...   2707                  dc.b    '2> You wear a cloak with mystic symbols sewn into the fabrics, an ancient',$0D,$0A
00004FD5= 6C 6F 6F 6B 69 6E ...   2708                  dc.b    'looking staff lays near. (Mage class)',$0D,$0A,$0D,$0A
00004FFE= 33 3E 20 59 6F 75 ...   2709                  dc.b    '3> You wear tight, well-fitting leather armour with reminents of black dye',$0D,$0A
0000504A= 73 74 61 69 6E 65 ...   2710                  dc.b    'stained to the material. Two knives are fastened to your belt. (Rogue class)',$0D,$0A,0
00005099= 45 6E 74 65 72 20 ...   2711  input_nums_msg: dc.b    'Enter num between 1 and ',0
000050B2= 3A 20 00                2712  colon_msg:      dc.b    ': ',0
000050B5= 49 6E 70 75 74 74 ...   2713  input_error_msg:    dc.b    'Inputted number is outside of range.',$0D,$0A,0
000050DC= 47 61 6D 65 73 74 ...   2714  fake_gamestate_msg: dc.b    'Gamestate doesnt exist',$0D,$0A,0
000050F5= 59 6F 75 20 67 72 ...   2715  knight_role_msg:    dc.b    'You grab your sword and shield, pull a torch from the wall, and leave the room.',$0D,$0A,0
00005147= 59 6F 75 20 68 61 ...   2716  knight_spec_msg:    dc.b    'You have chosen the KNIGHT class. You specialise in blocking and countering',$0D,$0A,0
00005195= 59 6F 75 20 70 69 ...   2717  mage_role_msg:  dc.b    'You pick up your staff, grab a torch from the wall, and leave the room.',$0D,$0A,0
000051DF= 59 6F 75 20 68 61 ...   2718  mage_spec_msg:  dc.b    'You have chosen the MAGE class. You specialise in magic attacks.',$0D,$0A,0
00005222= 59 6F 75 20 66 61 ...   2719  rogue_role_msg: dc.b    'You fasten your belt, grab a torch from the wall, and leave the room.',$0D,$0A,0
0000526A= 59 6F 75 20 68 61 ...   2720  rogue_spec_msg: dc.b    'You have chosen the ROGUE class. You specialise in quick melee attacks.',$0D,$0A,0
000052B4= 31 3E 20 4D 6F 76 ...   2721  movement_msg:   dc.b    '1> Move north.',$0D,$0A
000052C4= 32 3E 20 4D 6F 76 ...   2722                  dc.b    '2> Move south.',$0D,$0A
000052D4= 33 3E 20 4D 6F 76 ...   2723                  dc.b    '3> Move west.',$0D,$0A
000052E3= 34 3E 20 4D 6F 76 ...   2724                  dc.b    '4> Move east.',$0D,$0A
000052F2= 35 3E 20 44 72 69 ...   2725                  dc.b    '5> Drink health potion.',$0D,$0A,0
0000530C= 4D 6F 76 65 64 20 ...   2726  move_north_msg: dc.b    'Moved north.',$0D,$0A,0
0000531B= 4D 6F 76 65 64 20 ...   2727  move_east_msg:  dc.b    'Moved east.',$0D,$0A,0
00005329= 4D 6F 76 65 64 20 ...   2728  move_south_msg: dc.b    'Moved south.',$0D,$0A,0
00005338= 4D 6F 76 65 64 20 ...   2729  move_west_msg:  dc.b    'Moved west.',$0D,$0A,0
00005346= 41 20 77 61 6C 6C ...   2730  movement_blocked_msg:  dc.b    'A wall blocks your path.',$0D,$0A,0
00005361= 45 6E 74 65 72 20 ...   2731  continue_msg:   dc.b    'Enter any key to continue... ',0
0000537F= 20 20 20 00             2732  blank_tile      dc.b    '   ',0
00005383= 7C 20 7C 00             2733  both_tile       dc.b    '| |',0
00005387= 7C 20 20 00             2734  left_tile       dc.b    '|  ',0
0000538B= 20 20 7C 00             2735  right_tile      dc.b    '  |',0
0000538F= 5C 2F 5C 00             2736  blocked_tile:   dc.b    '\/\',0
00005393= 2A 00                   2737  player_mark:    dc.b    '*',0
00005395= 58 00                   2738  enemy_mark:     dc.b    'X',0
00005397= 40 00                   2739  win_point_mark: dc.b    '@',0
00005399= 24 00                   2740  shop_mark:      dc.b    '$',0
0000539B= 25 00                   2741  loot_mark:      dc.b    '%',0
0000539D= 23 00                   2742  door_mark:      dc.b    '#',0
0000539F= 4D 61 70 20 4C 65 ...   2743  map_legend_msg:     dc.b    'Map Legend:',0
000053AB= 20 3D 20 50 6C 61 ...   2744  map_player_msg:     dc.b    ' = Player',0
000053B5= 20 3D 20 45 6E 65 ...   2745  map_enemy_msg:      dc.b    ' = Enemy',0
000053BE= 20 3D 20 4F 62 6A ...   2746  map_win_point_msg:  dc.b    ' = Objective',0
000053CB= 20 3D 20 53 68 6F ...   2747  map_shop_msg:       dc.b    ' = Shop',0
000053D3= 20 3D 20 4C 6F 6F ...   2748  map_loot_msg:       dc.b    ' = Loot Pile',0
000053E0= 20 3D 20 4C 6F 63 ...   2749  map_door_msg:       dc.b    ' = Locked Door',0
000053EF= 41 20 6D 6F 6E 73 ...   2750  encounter_msg:      dc.b    'A monster blocks your path, it looks ready to attack!',$0D,$0A,0
00005427= 31 3E 20 42 6C 6F ...   2751  combat_msg:         dc.b    '1> Block and Counter.',$0D,$0A
0000543E= 32 3E 20 43 61 73 ...   2752                      dc.b    '2> Cast Magic.',$0D,$0A
0000544E= 33 3E 20 41 74 74 ...   2753                      dc.b    '3> Attack Swiftly.',$0D,$0A
00005462= 34 3E 20 54 72 79 ...   2754                      dc.b    '4> Try Run.',$0D,$0A
0000546F= 35 3E 20 44 72 69 ...   2755                      dc.b    '5> Drink Health Potion.',$0D,$0A,0
00005489= 59 6F 75 20 65 73 ...   2756  escape_msg:             dc.b    'You escaped the monster!',$0D,$0A,0
000054A4= 59 6F 75 20 74 72 ...   2757  fail_escape_msg:        dc.b    'You try to run, but the monster catches and damages you!',$0D,$0A,0
000054DF= 59 6F 75 20 62 6F ...   2758  both_block_msg:         dc.b    'You both block, No damage is done!',$0D,$0A,0
00005504= 59 6F 75 20 62 6F ...   2759  both_cast_magic_msg:    dc.b    'You both cast magic at eachother, the spells clash in mid air! No damage',$0D,$0A
0000554E= 69 73 20 64 6F 6E ...   2760                          dc.b    'is done!',$0D,$0A,0
00005559= 59 6F 75 20 62 6F ...   2761  both_melee_msg:         dc.b    'You both lunge forward, metal clashes together, but no damage is done!',$0D,$0A,0
000055A2= 54 68 65 20 65 6E ...   2762  hit_against_block_msg:  dc.b    'The enemy blocks, you cast a cast a spell and it damages the monster!',$0D,$0A,0
000055EA= 54 68 65 20 65 6E ...   2763  hit_against_magic_msg:  dc.b    'The enemy begins to charge a spell but you lunge forward and hit it first,',$0D,$0A
00005636= 64 61 6D 61 67 69 ...   2764                          dc.b    'damaging the monster!',$0D,$0A,0
0000564E= 54 68 65 20 65 6E ...   2765  hit_against_melee_msg:  dc.b    'The enemy lunges forward but you block quicky, then counter, damaging the',$0D,$0A
00005699= 6D 6F 6E 73 74 65 ...   2766                          dc.b    'monster!',$0D,$0A,0
000056A4= 59 6F 75 20 6C 75 ...   2767  hit_by_counter_msg:     dc.b    'You lunge at the enemy but they block before you hit, they swing around quickly',$0D,$0A
000056F5= 61 6E 64 20 64 61 ...   2768                          dc.b    'and damage you!',$0D,$0A,0
00005707= 59 6F 75 20 74 72 ...   2769  hit_by_magic_msg:       dc.b    'You try to block the enemies attack, but they cast a spell that breaks through',$0D,$0A
00005757= 79 6F 75 72 20 64 ...   2770                          dc.b    'your defense and damages you!',$0D,$0A,0
00005777= 59 6F 75 20 74 72 ...   2771  hit_by_melee_msg:       dc.b    'You try to charge up a spell, but the enemy lunges forward and damages you!',$0D,$0A,0
000057C5= 48 65 61 6C 74 68 ...   2772  health_msg:             dc.b    'Health: ',0
000057CE= 20 4B 6E 69 67 68 ...   2773  knight_msg:         dc.b    ' Knight ',0
000057D7= 20 4D 61 67 65 20 00    2774  mage_msg:           dc.b    ' Mage ',0
000057DE= 20 52 6F 67 75 65 ...   2775  rogue_msg:          dc.b    ' Rogue ',0
000057E6= 45 6E 65 6D 79 00       2776  enemy_msg:          dc.b    'Enemy',0
000057EC= 50 6C 61 79 65 72 00    2777  player_msg:         dc.b    'Player',0
000057F3= 4C 65 76 65 6C 20 00    2778  level_msg:          dc.b    'Level ',0
000057FA= 54 6F 72 63 68 20 ...   2779  torch_msg:          dc.b    'Torch Life: ',0
00005807= 44 61 6D 61 67 65 ...   2780  damage_lvl_msg      dc.b    'Damage lvl: ',0
00005814= 49 6E 76 65 6E 74 ...   2781  inventory_msg:      dc.b    'Inventory:',0
0000581F= 2D 20 47 6F 6C 64 ...   2782  gold_msg:           dc.b    '- Gold ',0
00005827= 2D 20 4B 65 79 20 00    2783  key_msg:            dc.b    '- Key ',0
0000582E= 2D 20 50 6F 74 69 ...   2784  potions_msg:        dc.b    '- Potion ',0
00005838= 2D 20 54 6F 72 63 ...   2785  torches_msg:        dc.b    '- Torch ',0
00005841= 2D 20 44 61 6D 61 ...   2786  damage_up_msg:      dc.b    '- Damage Upgrades ',0
00005854= 54 68 65 20 6D 6F ...   2787  battle_won_msg:     dc.b    'The monster collapses at your feet. It is dead!',$0D,$0A,0
00005886= 28 00                   2788  bracket_open_msg:   dc.b    '(',0
00005888= 29 00                   2789  bracket_close_msg:  dc.b    ')',0
0000588A= 59 6F 75 20 66 65 ...   2790  death_msg:          dc.b    'You feel your last breath of air leave your lungs...',$0D,$0A
000058C0= 59 6F 75 72 20 6B ...   2791                      dc.b    'Your knees hit the ground...',$0D,$0A
000058DE= 59 6F 75 20 68 61 ...   2792                      dc.b    'You have died.',$0D,$0A,0
000058EF= 59 6F 75 20 66 65 ...   2793  win_msg:            dc.b    'You feel the outside breeze hit your face...',$0D,$0A
0000591D= 59 6F 75 20 68 61 ...   2794                      dc.b    'You have escaped the castle!',$0D,$0A,0
0000593C= 59 6F 75 20 64 72 ...   2795  take_potion_msg:    dc.b    'You drink a health potion...',$0D,$0A
0000595A= 33 20 68 65 61 6C ...   2796                      dc.b    '3 health points restored!',$0D,$0A,0
00005976= 59 6F 75 20 61 72 ...   2797  no_potions_msg:     dc.b    'You are out of potions.',$0D,$0A,0
00005990= 22 4C 6F 6F 6B 69 ...   2798  shop_enter_msg:     dc.b    '"Looking to lighten that coin pouch of yours?!"',$0D,$0A,0
000059C2= 31 3E 20 42 75 79 ...   2799  shop_msg:           dc.b    '1> Buy Potion. (5g)',$0D,$0A
000059D7= 32 3E 20 42 75 79 ...   2800                      dc.b    '2> Buy Key. (15g)',$0D,$0A
000059EA= 33 3E 20 42 75 79 ...   2801                      dc.b    '3> Buy Torch. (10g)',$0D,$0A
000059FF= 34 3E 20 42 75 79 ...   2802                      dc.b    '4> Buy Damage Upgrade. (20g)',$0D,$0A
00005A1D= 35 3E 20 4C 65 61 ...   2803                      dc.b    '5> Leave Shop.',$0D,$0A,0
00005A2E= 22 50 6C 65 61 73 ...   2804  leave_shop_msg:     dc.b    '"Pleasure doing business with you."',$0D,$0A,0
00005A54= 22 2E 2E 2E 41 6E ...   2805  buy_item_msg:       dc.b    '"...And its yours!"',$0D,$0A,0
00005A6A= 53 68 6F 70 20 53 ...   2806  shop_stock_msg:     dc.b    'Shop Stock:',0
00005A76= 22 4E 6F 74 20 65 ...   2807  no_money_msg:       dc.b    '"Not enough gold, traveller."',$0D,$0A,0
00005A96= 22 53 6F 72 72 79 ...   2808  no_item_msg:        dc.b    '"Sorry, I dont have any of them left..."',$0D,$0A,0
00005AC1= 54 68 65 20 64 61 ...   2809  no_torch_msg:       dc.b    'The darkness burns...',$0D,$0A,0
00005AD9= 59 6F 75 20 70 69 ...   2810  pickup_loot_msg:    dc.b    'You picked up a loot pile',$0D,$0A,0
00005AF5= 2B 20 47 6F 6C 64 ...   2811  pickup_gold_msg:    dc.b    '+ Gold ',0
00005AFD= 2B 20 50 6F 74 69 ...   2812  pickup_potion_msg:  dc.b    '+ Potion ',0
00005B07= 2B 20 4B 65 79 20 00    2813  pickup_key_msg:     dc.b    '+ Key ',0
00005B0E= 2B 20 54 6F 72 63 ...   2814  pickup_torch_msg:   dc.b    '+ Torch life ',0
00005B1C= 43 6C 61 73 73 20 ...   2815  double_damage_msg:  dc.b    'Class Bonus - Double Damage!',$0D,$0A,0
00005B3B= 54 68 65 20 64 6F ...   2816  locked_door_msg:    dc.b    'The door seems locked, you have a key that might fit it.',$0D,$0A
00005B75= 44 6F 20 79 6F 75 ...   2817                      dc.b    'Do you want to try unlock it?',$0D,$0A,$0D,$0A
00005B96= 31 3E 20 59 65 73 ...   2818                      dc.b    '1> Yes. (-1 key)',$0D,$0A
00005BA8= 32 3E 20 4E 6F 2E ...   2819                      dc.b    '2> No.',$0D,$0A,0
00005BB1= 54 68 65 20 64 6F ...   2820  unlocked_door_msg:  dc.b    'The door swings open, the key lodged stuck in the keyhole.',$0D,$0A,0
00005BEE= 54 68 65 20 64 6F ...   2821  blocked_door_msg:   dc.b    'The door seems solid, it wont budge.',$0D,$0A,0
00005C15= 20 20 20 20 20 20 ...   2822  graveyard_msg:  dc.b    '      ,-=-.       ______     _',$0D,$0A
00005C35= 20 20 20 20 20 2F ...   2823                  dc.b    '     /  +  \     />----->  _|1|_',$0D,$0A
00005C57= 20 20 20 20 20 7C ...   2824                  dc.b    '     | ~~~ |    // -/- /  |_ H _|',$0D,$0A
00005C7A= 20 20 20 20 20 7C ...   2825                  dc.b    '     |R.I.P|   //  /  /     |S|',$0D,$0A
00005C9B= 5C 76 56 2C 2C 7C ...   2826                  dc.b    '\vV,,|_____|V,//_____/VvV,v,|_|/,,vhjwv/,',$0D,$0A,0
00005CC7= 20 20 20 20 20 20 ...   2827  skeleton_msg:   dc.b    '           .-.',$0D,$0A
00005CD7= 20 2F 5C 5F 5F 5F ...   2828                  dc.b    ' /\____/\ (o.o)',$0D,$0A
00005CE8= 7C 20 20 5F 7C 7C ...   2829                  dc.b    '|  _||_  | |=|',$0D,$0A
00005CF8= 20 5C 2F 20 7C 7C ...   2830                  dc.b    ' \/ || \/ __|__',$0D,$0A
00005D09= 20 20 20 20 7C 7C ...   2831                  dc.b    '    ||\_//.=|=.\\',$0D,$0A
00005D1C= 20 20 20 20 7C 7C ...   2832                  dc.b    '    ||\_/ .=|=. \\',$0D,$0A
00005D30= 20 20 20 20 7C 7C ...   2833                  dc.b    '    ||    .=|=. //',$0D,$0A
00005D44= 20 20 20 20 7C 7C ...   2834                  dc.b    '    ||    (_=_)//',$0D,$0A
00005D57= 20 20 20 20 7C 7C ...   2835                  dc.b    '    ||   (:| |:)',$0D,$0A
00005D69= 20 20 20 20 7C 7C ...   2836                  dc.b    '    ||    || ||',$0D,$0A
00005D7A= 20 20 20 20 7C 7C ...   2837                  dc.b    '    ||    () ()',$0D,$0A
00005D8B= 20 20 20 20 2F 5C ...   2838                  dc.b    '    /\    || ||',$0D,$0A
00005D9C= 20 20 20 20 7C 7C ...   2839                  dc.b    '    ||    || ||',$0D,$0A
00005DAD= 20 20 20 20 5C 2F ...   2840                  dc.b    '    \/  ==   ==',$0D,$0A,0
00005DBF= 20 20 20 20 20 20 ...   2841  merchant_msg:   dc.b    '         ____',$0D,$0A
00005DCE= 20 20 20 20 20 20 ...   2842                  dc.b    '        |    |',$0D,$0A
00005DDE= 20 20 20 20 20 20 ...   2843                  dc.b    '      --:<<>>:--',$0D,$0A
00005DF0= 20 20 20 20 20 20 ...   2844                  dc.b    '        :~_~ :',$0D,$0A
00005E00= 20 20 20 20 20 20 ...   2845                  dc.b    '        _:"":\___',$0D,$0A
00005E13= 20 20 5F 5F 5F 5F ...   2846                  dc.b    '  ____./ :::     \._',$0D,$0A
00005E29= 3C 3C 3D 29 20 20 ...   2847                  dc.b    '<<=)           \    :',$0D,$0A
00005E40= 20 5C 2F 2D 2D 2D ...   2848                  dc.b    ' \/---/\_      /\._. ',$0D,$0A
00005E57= 20 7C 7C 20 20 20 ...   2849                  dc.b    ' ||       \====:_ ""',$0D,$0A
00005E6D= 20 7C 7C 20 20 20 ...   2850                  dc.b    ' ||      ./     \\',$0D,$0A
00005E81= 20 7C 7C 20 20 20 ...   2851                  dc.b    ' ||     :       :',$0D,$0A
00005E94= 20 7C 7C 20 20 20 ...   2852                  dc.b    ' ||    /   :    \',$0D,$0A
00005EA7= 20 7C 7C 20 20 20 ...   2853                  dc.b    ' ||   :   .      \.',$0D,$0A
00005EBC= 20 7C 7C 20 20 20 ...   2854                  dc.b    ' ||   :  : :      :',$0D,$0A
00005ED1= 20 7C 7C 20 20 20 ...   2855                  dc.b    ' ||   :__:-:__.;--',$0D,$0A,0
00005EE6                          2856                  
00005EE6                          2857      end start

No errors detected
No warnings generated


SYMBOL TABLE INFORMATION
Symbol-name         Value
-------------------------
ALIVE               3
BATTLE_WON_MSG      5854
BLANK_MSG           4C9E
BLANK_TILE          537F
BLOCKED_DOOR        3B78
BLOCKED_DOOR_MSG    5BEE
BLOCKED_TILE        538F
BLOCK_COUNTER       3BD2
BLUE                FF0000
BOTH_BLOCK          3C6A
BOTH_BLOCK_MSG      54DF
BOTH_CAST_MAGIC     3C7C
BOTH_CAST_MAGIC_MSG  5504
BOTH_MELEE          3C8E
BOTH_MELEE_MSG      5559
BOTH_TILE           5383
BRACKET_CLOSE_MSG   5888
BRACKET_OPEN_MSG    5886
BROWN               507090
BUY_ITEM_MSG        5A54
BUY_KEY             3E1A
BUY_POTION          3DE8
BUY_TORCH           3E4E
CAST_MAGIC          3BEC
CHANGE_FONT_COLOUR  3FAC
CHECK_BLOCKED       3B0A
CHECK_FOR_A_DOOR    3B2A
CHECK_FOR_DOOR      4294
CHECK_FOR_DOORS     4274
CHECK_FOR_ENEMIES   4192
CHECK_FOR_ENEMY     41B4
CHECK_FOR_LOOT      40F0
CHECK_FOR_LOOT_PILES  40CC
CHECK_FOR_PLAYER    414A
CHECK_FOR_SHOP      422A
CHECK_FOR_SHOPS     4208
CHECK_FOR_WIN_POINT  42D2
CLASS               2
CLEAR_SCREEN        394E
COLON_MSG           50B2
COMBAT              3B90
COMBAT_MSG          5427
CONTINUE_MSG        5361
CRLF                4A3E
CSR_POS_BATTLE_E    1901
CSR_POS_BATTLE_P    3401
CSR_POS_MOVE        3201
CSR_POS_SHOP_P      3401
CSR_POS_SHOP_S      1801
DAMAGE              1
DAMAGE_ENEMY        3D30
DAMAGE_LVL_MSG      5807
DAMAGE_PLAYER       3D6A
DAMAGE_UP_MSG       5841
DAMAGE_UP_PRICE     14
DEATH_MSG           588A
DECORATE            3930
DECREMENT_TORCH     3F9E
DISPLAY_KNIGHT      3782
DISPLAY_MAGE        3790
DISPLAY_ROGUE       379E
DISPLAY_ROLE        376E
DOOR_MARK           539D
DOOR_MAX            3
DOUBLE_DAMAGE_ENEMY  3D40
DOUBLE_DAMAGE_MSG   5B1C
DOUBLE_DAMAGE_PLAYER  3D80
DRAW                349A
DRAW_BATTLE_INFO    369A
DRAW_BLANK_TILE     40BE
DRAW_BLOCKED_TILE   4086
DRAW_BOTH_TILE      4094
DRAW_DOOR           429E
DRAW_ENEMY          41C8
DRAW_GRAVEYARD      34C8
DRAW_HUD            34E4
DRAW_ITEM_NUMBER    38E0
DRAW_LEFT_TILE      40A2
DRAW_LOOP           3FCC
DRAW_LOOT           4108
DRAW_MAP_LEGEND     35AC
DRAW_MERCHANT       34D6
DRAW_PLAYER         4152
DRAW_PLAYER_INFO    3504
DRAW_RIGHT_TILE     40B0
DRAW_SHOP           4234
DRAW_SHOP_INFO      37AC
DRAW_SKELETON       34BA
DRAW_TILE           4022
DRAW_WIN_POINT      42DE
ENCOUNTER_MSG       53EF
END                 3006
ENDL                397C
ENEMIES_CHECK       335A
ENEMIES_LOOP        3368
ENEMY_ALIVE_CHECK   3462
ENEMY_CHECK         3386
ENEMY_DIED          346C
ENEMY_MARK          5395
ENEMY_MAX           E
ENEMY_MSG           57E6
ENTER_COMBAT        33BA
ENTER_SHOP          343A
ESCAPE_ATTACK       3C30
ESCAPE_MSG          5489
EXIT                0
FAIL_ESCAPE         3C4E
FAIL_ESCAPE_MSG     54A4
FAKE_GAMESTATE_MSG  50DC
FIRST_DOOR          6FE0
FIRST_ENEMY         6000
FIRST_LOOT          7000
FIRST_SHOP          6500
FONT                1090000
GAME                3000
GAMELOOP            3194
GAMEPLAY            3902
GAME_STATE          5FF3
GET_CURSOR_POS      3FBE
GOLD                FFFF
GOLD_MSG            581F
GRAVEYARD_MSG       5C15
GREEN               FF00
HEALTH_MSG          57C5
HIT_AGAINST_BLOCK   3CA0
HIT_AGAINST_BLOCK_MSG  55A2
HIT_AGAINST_MAGIC   3CB6
HIT_AGAINST_MAGIC_MSG  55EA
HIT_AGAINST_MELEE   3CCC
HIT_AGAINST_MELEE_MSG  564E
HIT_BY_COUNTER      3CE2
HIT_BY_COUNTER_MSG  56A4
HIT_BY_MAGIC        3CFC
HIT_BY_MAGIC_MSG    5707
HIT_BY_MELEE        3D16
HIT_BY_MELEE_MSG    5777
INPUT               311E
INPUT_ERROR_MSG     50B5
INPUT_NUMS_MSG      5099
INVALID_INPUT       3186
INVENTORY_MSG       5814
IN_A_DOOR           3B34
KEY_MSG             5827
KEY_PRICE           F
KNIGHT_MSG          57CE
KNIGHT_ROLE_MSG     50F5
KNIGHT_SELECT       3062
KNIGHT_SPEC_MSG     5147
LEAVE_SHOP          3EB8
LEAVE_SHOP_MSG      5A2E
LEFT_TILE           5387
LEVEL_MSG           57F3
LIFE_PER_TORCH      F
LOCKED_DOOR_MSG     5B3B
LOOP_COLUMNS        3FF8
LOOP_DOORS          4282
LOOP_ENEMIES        41A0
LOOP_LOOT_PILES     40DA
LOOP_MSG            4C9C
LOOP_ROWS           3FE2
LOOP_SHOPS          4216
LOOP_THRU_DOORS     3B18
LOOT_MARK           539B
LOOT_PILES_CHECK    3240
LOOT_PILE_CHECK     3262
LOOT_PILE_LOOP      324E
L_ACTIVE            6
MAGE_MSG            57D7
MAGE_ROLE_MSG       5195
MAGE_SELECT         3092
MAGE_SPEC_MSG       51DF
MANAGE_INPUT        316C
MANAGE_TORCH        3326
MAP_DOOR_MSG        53E0
MAP_ENEMY_MSG       53B5
MAP_LEGEND_MSG      539F
MAP_LENGTH          F
MAP_LOOT_MSG        53D3
MAP_PLAYER_MSG      53AB
MAP_SHOP_MSG        53CB
MAP_START_POINT     8080
MAP_WIN_POINT_MSG   53BE
MELEE_ATTACK        3C06
MERCHANT_MSG        5DBF
MOVEMENT            3992
MOVEMENT_BLOCKED    3AF8
MOVEMENT_BLOCKED_MSG  5346
MOVEMENT_CHECKS     3224
MOVEMENT_MSG        52B4
MOVE_EAST           3AB0
MOVE_EAST_MSG       531B
MOVE_NORTH          39D4
MOVE_NORTH_MSG      530C
MOVE_SOUTH          3A1E
MOVE_SOUTH_MSG      5329
MOVE_WEST           3A68
MOVE_WEST_MSG       5338
NEXT_CURSOR_POS     38D2
NO_ITEM_MSG         5A96
NO_MONEY            3ED6
NO_MONEY_MSG        5A76
NO_POTIONS          3F8E
NO_POTIONS_MSG      5976
NO_SHOP_DAMAGE_UP   3F24
NO_SHOP_KEYS        3EFC
NO_SHOP_POTIONS     3EE8
NO_SHOP_TORCHES     3F10
NO_TORCH_MSG        5AC1
OPEN_DOOR_POS       1000
OUT                 3938
PICKUP_GOLD_MSG     5AF5
PICKUP_KEY_MSG      5B07
PICKUP_LOOT         3278
PICKUP_LOOT_MSG     5AD9
PICKUP_POTION_MSG   5AFD
PICKUP_TORCH_MSG    5B0E
PICK_ROLE           301C
PICK_ROLE_MSG       4F22
PLAYER              5FF0
PLAYER_DEAD         31D4
PLAYER_MARK         5393
PLAYER_MSG          57EC
PLA_CLASS           5FF2
PLA_DAMAGE          5FF1
PLA_GOLD            5FF8
PLA_KEYS            5FFA
PLA_POTIONS         5FF9
PLA_P_POS           5FF6
PLA_TORCH           5FFB
POSITION            4
POTIONS_MSG         582E
POTION_PRICE        5
PRESS_CONTINUE      3F38
PURPLE              F000F0
RANDOM_NUMBER       3F50
RED                 FF
REPLAY              395A
REPLAY_MSG          4DE0
RETURN              3F6A
RIGHT_TILE          538B
ROGUE_MSG           57DE
ROGUE_ROLE_MSG      5222
ROGUE_SELECT        30C2
ROGUE_SPEC_MSG      526A
ROLE_INPUT          3044
SETUP_ENEMIES       4624
SETUP_LOOT          47CA
SETUP_PLAYER        49C4
SETUP_SHOPS         4A00
SETUP_WORLD         431E
SHOP                3DAC
SHOPS_CHECK         33E4
SHOPS_LOOP          33F2
SHOP_CHECK          3410
SHOP_ENTER_MSG      5990
SHOP_MARK           5399
SHOP_MAX            2
SHOP_MSG            59C2
SHOP_STOCK_MSG      5A6A
SKELETON_MSG        5CC7
START               1000
S_DAMAGE_IN         5
S_KEYS              3
S_POTIONS           2
S_TORCHES           4
TAKE_POTION         3F6C
TAKE_POTION_MSG     593C
TORCHES_MSG         5838
TORCH_MSG           57FA
TORCH_PRICE         A
TRY_RUN             3C20
TUTORIAL_INTRO      30F2
TUTORIAL_MSG        4CF2
UNLOCKED_DOOR_MSG   5BB1
UNLOCK_DOOR         3B5E
UPDATE              31AA
UPGRADE_DMG         3E84
WAKE_UP_MSG         4E0A
WALL_COLLISIONS     39B2
WELCOME             300A
WELCOME_MSG         4A41
WHITE               FFFFFF
WIN_MSG             58EF
WIN_POINT           8156
WIN_POINT_MARK      5397
WON_GAME            31FE

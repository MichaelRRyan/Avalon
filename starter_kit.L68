00001000 Starting Address
Assembler used: EASy68K Editor/Assembler v5.16.01
Created On: 21/03/2019 22:19:29

00000000                             1  *-------------------------------------------------------
00000000                             2  * Author         : Michael Rainsford Ryan
00000000                             3  * Student Number : C00239510
00000000                             4  * Date Created   : 21/01/2019
00000000                             5  * Description    : A simplified, offline clone of the
00000000                             6  *                : online game "Avalon".
00000000                             7  * Issues/Bugs    : None currenty.
00000000                             8  *-------------------------------------------------------
00000000                             9  
00001000                            10      org $1000
00001000                            11  
00001000                            12  *-------------------------------------------------------
00001000                            13  *Choose to be a Worker or a God 
00001000                            14  *https://www.avalon-rpg.com/
00001000                            15  *-------------------------------------------------------
00001000                            16  
00001000                            17  *-------------------------------------------------------
00001000                            18  *-------------------Game Information-------------------
00001000                            19  *-------------------------------------------------------
00001000                            20  *A6 is used for player coordinates
00001000                            21  *A5 is used for enemy coordinates when in combat or looping through them
00001000                            22  *A5 is used for shops when in shop screen or when looping through them
00001000                            23  *A4 occasionally used for displaying the inventory
00001000                            24  *D5 is used occasionally for input range
00001000                            25  *$5000 to $5FE0 holds maps
00001000                            26  *$5FF0 holds player information
00001000                            27  *$6000 to $64F0 holds enemies
00001000                            28  *$6500 to $6FF0 holds shops
00001000                            29  *$7000 to $7500 holds loot
00001000                            30  
00001000                            31  *Enemies:
00001000                            32  *Byte:  Name:
00001000                            33  *0      Health
00001000                            34  *1      Damage/level
00001000                            35  *2      enemy type (Knight, mage, rogue)
00001000                            36  *3      Alive state (1 == alive, 0 == dead)
00001000                            37  *4 & 5  Coordinates
00001000                            38  
00001000                            39  *Player:
00001000                            40  *Byte:  Name:
00001000                            41  *0      Health
00001000                            42  *1      Damage/level
00001000                            43  *2      Class (Knight, mage, rogue)
00001000                            44  *3      Game state
00001000                            45  *4-5+A6 Coordinates
00001000                            46  *6-7    Last coordinates
00001000                            47  *8      Gold
00001000                            48  *9      Potions
00001000                            49  *A      Keys
00001000                            50  *B      Torch life
00001000                            51  
00001000                            52  *Shops:
00001000                            53  *Byte:  Name:
00001000                            54  *0-1    Position
00001000                            55  *2      Potions
00001000                            56  *3      Keys
00001000                            57  *4      Torches
00001000                            58  *5      Damage increase
00001000                            59  
00001000                            60      
00001000                            61  *Game state : 0 = Pick role/intro | 5 = Move around | 6 = Combat | 7 = Shop | 64 = End game
00001000                            62  *Class      : 1 corresponds to knight - 2 corresponds to mage - 3 corresponds to rogue
00001000                            63  
00001000                            64  
00001000                            65  *-------------------------------------------------------
00001000                            66  *Validation values to be used, modify as needed
00001000                            67  *Add additional validation values as required
00001000                            68  *-------------------------------------------------------
00001000  =00000000                 69  exit        EQU 0      used to exit assembly program
00001000                            70  
00001000                            71  * Text display
00001000  =000000FF                 72  RED         EQU $000000FF   Red colour value
00001000  =0000FF00                 73  GREEN       EQU $0000FF00   Green colour value
00001000  =00FF0000                 74  BLUE        EQU $00FF0000   Blue colour value
00001000  =00FFFFFF                 75  WHITE       EQU $00FFFFFF   White colour value
00001000  =00F000F0                 76  PURPLE      EQU $00F000F0   Purple colour value
00001000  =01090000                 77  FONT        EQU $01090000   Font value
00001000                            78  
00001000                            79  * Player
00001000  =00005FF0                 80  PLAYER      EQU $5FF0       Memory address for player information and health
00001000  =00005FF1                 81  PLA_DAMAGE  EQU $5FF1       Memory address for player damage value
00001000  =00005FF2                 82  PLA_CLASS   EQU $5FF2       The memory address for the player class
00001000  =00005FF3                 83  GAME_STATE  EQU $5FF3       The memory address of the game state
00001000  =00005FF6                 84  PLA_P_POS   EQU $5FF6       Memory location of the player's previous position
00001000  =00005FF8                 85  PLA_GOLD    EQU $5FF8       Memory address for player gold
00001000  =00005FF9                 86  PLA_POTIONS EQU $5FF9       Memory address for player potions
00001000  =00005FFA                 87  PLA_KEYS    EQU $5FFA       Memory address for player keys
00001000  =00005FFB                 88  PLA_TORCH   EQU $5FFB       Memory address for player torch life
00001000                            89  
00001000                            90  * Enemy
00001000  =00006000                 91  FIRST_ENEMY EQU $6000       Memory location of the first enemy
00001000  =00000002                 92  ENEMY_MAX   EQU 2           Number of enemies in the game
00001000                            93  
00001000  =00000001                 94  DAMAGE      EQU 1           The number of bytes to move from the enemy before reaching the damage
00001000  =00000002                 95  CLASS       EQU 2           The number of bytes to move from the enemy before reaching the class
00001000  =00000003                 96  ALIVE       EQU 3           The number of bytes to move from the enemy before reaching the alive state
00001000  =00000004                 97  POSITION    EQU 4           The number of bytes to move from the enemy before reaching the position
00001000                            98  
00001000                            99  * Shop
00001000  =00006500                100  FIRST_SHOP  EQU $6500       Memory location of the first shop
00001000  =00000002                101  SHOP_MAX    EQU 2           Number of shops in the game
00001000                           102  
00001000  =00000002                103  S_POTIONS   EQU 2           The number of bytes to move from the shop root before reaching the potions
00001000  =00000003                104  S_KEYS      EQU 3           The number of bytes to move from the shop root before reaching the keys
00001000  =00000004                105  S_TORCHES   EQU 4           The number of bytes to move from the shop root before reaching the torches
00001000  =00000005                106  S_DAMAGE_IN EQU 5           The number of bytes to move from the shop root before reaching the damage increase
00001000                           107  
00001000                           108  * HUD
00001000  =00003201                109  CSR_POS_MOVE    EQU $3201   The cursor position to draw the HUD to when in movement state
00001000  =00002001                110  CSR_POS_BATTLE  EQU $2001   The cursor position to draw the HUD to when in battle state
00001000  =00001801                111  CSR_POS_SHOP_S  EQU $1801   The cursor position to draw the HUD to when in shop state for shop info
00001000  =00003401                112  CSR_POS_SHOP_P  EQU $3401   The cursor position to draw the HUD to when in shop state for player info
00001000                           113  
00001000                           114  * Game
00001000  =00008156                115  WIN_POINT   EQU $8156       The position the player has to get to to win
00001000                           116  
00001000  =00000005                117  POTION_PRICE    EQU 5       The price in gold for a potion
00001000  =0000000F                118  KEY_PRICE       EQU 15      The price in gold for a key
00001000  =0000000A                119  TORCH_PRICE     EQU 10      The price in gold for a torch
00001000  =00000014                120  DAMAGE_UP_PRICE EQU 20      The price in gold for a damage upgrade
00001000                           121  
00001000  =0000000F                122  LIFE_PER_TORCH  EQU 15      The life value each torch has
00001000                           123  
00001000  =00008080                124  MAP_START_POINT EQU $8080   The starting coordinates the map draws at
00001000  =0000000F                125  MAP_LENGTH      EQU 15      The number of tiles downwords the map will draw
00001000                           126  
00001000                           127  
00001000                           128  *Start of Game
00001000                           129  start:
00001000  6100 325E                130      bsr     setup_player
00001004  6100 2F2A                131      bsr     setup_world
00001008  6100 3218                132      bsr     setup_enemies
0000100C  6100 328E                133      bsr     setup_shops
00001010                           134  
00001010  6100 1FF8                135      bsr     welcome    branch to the welcome subroutine
00001014  6100 2C26                136      bsr     press_continue
00001018  6100 1FE6                137      bsr     game       branch to the game subroutine
0000101C                           138  *Game loop
00003000                           139      org     $3000      the rest of the program is to be located from 3000 onwards
00003000                           140  
00003000                           141  *-------------------------------------------------------
00003000                           142  *-------------------Game Subroutine---------------------
00003000                           143  *-------------------------------------------------------
00003000                           144  game:
00003000  6100 016E                145      bsr     gameloop   branch to gameloop subroutine
00003004  4E75                     146      rts                return from game: subroutine
00003006                           147            
00003006                           148  end:
00003006  FFFF FFFF                149      simhalt
0000300A                           150  
0000300A                           151  *-------------------------------------------------------
0000300A                           152  *-------------------Welcome Subroutine------------------
0000300A                           153  *-------------------------------------------------------
0000300A                           154  welcome:
0000300A  43F9 000042DD            155      lea     welcome_msg,A1  assign message to address register A1
00003010  103C 000E                156      move.b  #14,D0          move literal 14 to DO
00003014  4E4F                     157      trap    #15             trap and interpret value in D0
00003016  6100 0748                158      bsr     endl            branch to endl subroutine
0000301A                           159      
0000301A  4E75                     160      rts                     return from welcome: subroutine
0000301C                           161  
0000301C                           162  *-------------------------------------------------------
0000301C                           163  *-------------------Role Picking Subroutine------------------
0000301C                           164  *-------------------------------------------------------
0000301C                           165  pick_role:
0000301C                           166  
0000301C  43F9 00004652            167      lea     wake_up_msg,A1  assign message to address register A1
00003022  103C 000E                168      move.b  #14,D0          move literal 14 to DO
00003026  4E4F                     169      trap    #15             trap and interpret value in D0
00003028  6100 0736                170      bsr     endl            branch to endl subroutine
0000302C                           171      
0000302C  43F9 0000476A            172      lea     pick_role_msg,A1 assign message to address register A1
00003032  103C 000E                173      move.b  #14,D0           move literal 14 to DO
00003036  4E4F                     174      trap    #15              trap and interpret value in D0
00003038                           175      
00003038  7A03                     176      move.l  #3,D5           Move the number 3 to D5 to tell the program how many options there are
0000303A                           177      
0000303A  6100 00E2                178      bsr     input           branch to the input subroutine
0000303E                           179      
0000303E  6100 0BFC                180      bsr     press_continue          Pause the game until a key is pressed
00003042                           181      
00003042  4E75                     182      rts                     return from pick_role subroutine
00003044                           183      
00003044                           184  role_input:
00003044  11C1 5FF2                185      move.b  D1,PLA_CLASS    Move the role number to player class memory location to hold the class number
00003048                           186      
00003048                           187      *Give the player a message depending on the role chosen
00003048  B23C 0001                188      CMP.B   #1,D1
0000304C  6700 0014                189      BEQ     knight_select   Branch to knight message if role selected
00003050                           190      
00003050  B23C 0002                191      CMP.B   #2,D1
00003054  6700 003C                192      BEQ     mage_select     Branch to mage message if role selected
00003058                           193      
00003058  B23C 0003                194      CMP.B   #3,D1
0000305C  6700 0064                195      BEQ     rogue_select    Branch to rogue message if role selected
00003060                           196      
00003060  4E75                     197      rts
00003062                           198      
00003062                           199  knight_select:
00003062  43F9 0000493D            200      lea     knight_role_msg,A1  assign message to address register A1
00003068  103C 000E                201      move.b  #14,D0              move literal 14 to DO
0000306C  4E4F                     202      trap    #15                 Display the knight message
0000306E                           203      
0000306E  223C 00F000F0            204      move.l  #PURPLE,D1          Load the purple colour
00003074  6100 0C3A                205      bsr     change_font_colour  Change the font colour
00003078                           206      
00003078  43F9 0000498F            207      lea     knight_spec_msg,A1  assign message to address register A1
0000307E  103C 000E                208      move.b  #14,D0              move literal 14 to DO
00003082  4E4F                     209      trap    #15                 Display the knight message
00003084                           210      
00003084  223C 00FFFFFF            211      move.l  #WHITE,D1           Load the white colour
0000308A  6100 0C24                212      bsr     change_font_colour  Change the font colour
0000308E                           213      
0000308E  6000 0062                214      bra     tutorial_intro      Branch to tutorial subroutine
00003092                           215  
00003092                           216  mage_select:
00003092  43F9 000049DD            217      lea     mage_role_msg,A1 a  ssign message to address register A1
00003098  103C 000E                218      move.b  #14,D0              move literal 14 to DO
0000309C  4E4F                     219      trap    #15                 Display the mage message
0000309E                           220      
0000309E  223C 00F000F0            221      move.l  #PURPLE,D1          Load the purple colour
000030A4  6100 0C0A                222      bsr     change_font_colour  Change the font colour
000030A8                           223      
000030A8  43F9 00004A27            224      lea     mage_spec_msg,A1    assign message to address register A1
000030AE  103C 000E                225      move.b  #14,D0              move literal 14 to DO
000030B2  4E4F                     226      trap    #15                 Display the mage message
000030B4                           227      
000030B4  223C 00FFFFFF            228      move.l  #WHITE,D1           Load the white colour
000030BA  6100 0BF4                229      bsr     change_font_colour  Change the font colour
000030BE                           230      
000030BE  6000 0032                231      bra     tutorial_intro      Branch to tutorial subroutine
000030C2                           232  
000030C2                           233  rogue_select:
000030C2  43F9 00004A6A            234      lea     rogue_role_msg,A1   Assign message to address register A1
000030C8  103C 000E                235      move.b  #14,D0              move literal 14 to DO
000030CC  4E4F                     236      trap    #15                 Display the rogue message
000030CE                           237      
000030CE  223C 00F000F0            238      move.l  #PURPLE,D1          Load the purple colour
000030D4  6100 0BDA                239      bsr     change_font_colour  Change the font colour
000030D8                           240      
000030D8  43F9 00004AB2            241      lea     rogue_spec_msg,A1   Assign message to address register A1
000030DE  103C 000E                242      move.b  #14,D0              move literal 14 to DO
000030E2  4E4F                     243      trap    #15                 Display the rogue message
000030E4                           244      
000030E4  223C 00FFFFFF            245      move.l  #WHITE,D1           Load the white colour
000030EA  6100 0BC4                246      bsr     change_font_colour  Change the font colour
000030EE                           247      
000030EE  6000 0002                248      bra     tutorial_intro      Branch to tutorial subroutine
000030F2                           249      
000030F2                           250  tutorial_intro:
000030F2  6100 066C                251      bsr     endl                Break to a new line
000030F6                           252  
000030F6  223C 000000FF            253      move.l  #RED,D1             Load the purple colour
000030FC  6100 0BB2                254      bsr     change_font_colour  Change the font colour
00003100                           255      
00003100  43F9 0000453A            256      lea     tutorial_msg,A1     Load tutorial message to address register A1
00003106  103C 000E                257      move.b  #14,D0              move literal 14 to DO
0000310A  4E4F                     258      trap    #15                 Display the tutorial message
0000310C                           259      
0000310C  223C 00FFFFFF            260      move.l  #WHITE,D1           Load the white colour
00003112  6100 0B9C                261      bsr     change_font_colour  Change the font colour
00003116                           262      
00003116  11FC 0005 5FF3           263      move.b  #5,GAME_STATE       Change the game state to the movement state
0000311C                           264      
0000311C  4E75                     265      rts
0000311E                           266      
0000311E                           267  *-------------------------------------------------------
0000311E                           268  *---------Gameplay Input Values Subroutine--------------
0000311E                           269  *-------------------------------------------------------    
0000311E                           270  input:
0000311E  6100 0640                271      bsr     endl            Branch to end line subroutine
00003122                           272      
00003122  43F9 000048E1            273      lea     input_nums_msg,A1 assign message to address register A1
00003128  103C 000E                274      move.b  #14,D0          move literal 14 to DO
0000312C  4E4F                     275      trap    #15             Display the "enter number" message
0000312E                           276      
0000312E  2205                     277      move.l  D5,D1           Move the number of options to D1 to display it
00003130  103C 0003                278      move.b  #3,D0           move literal 3 to DO
00003134  4E4F                     279      trap    #15             Display the number in D1 to show the input range
00003136                           280      
00003136  43F9 000048FA            281      lea     colon_msg,A1    assign message to address register A1
0000313C  103C 000E                282      move.b  #14,D0          move literal 14 to DO
00003140  4E4F                     283      trap    #15             Display a colon after the number range
00003142                           284      
00003142  103C 0004                285      move.b  #4,D0           Move the number 4 to D0
00003146  4E4F                     286      trap    #15             Take input
00003148                           287      
00003148                           288  manage_input:
00003148  B27C 0001                289      CMP     #1,D1           Check input against minimum value
0000314C  6D00 0014                290      BLT     invalid_input   Error if less than 1
00003150                           291      
00003150  B245                     292      CMP     D5,D1           Compare input against max value
00003152  6E00 000E                293      BGT     invalid_input   Error if more than max value
00003156                           294      
00003156  0C38 0000 5FF3           295      CMP.B   #0,GAME_STATE   Check which state the game is in
0000315C  6700 FEE6                296      BEQ     role_input      Branch to the manage input for the role picking
00003160                           297      
00003160  4E75                     298      rts                     Return out of subroutine
00003162                           299  
00003162                           300  invalid_input:
00003162  43F9 000048FD            301      lea     input_error_msg,A1 assign message to address register A1
00003168  103C 000E                302      move.b  #14,D0          move literal 14 to DO
0000316C  4E4F                     303      trap    #15             Display the error message
0000316E                           304      
0000316E  60AE                     305      bra     input           Go back to taking input
00003170                           306  
00003170                           307  *-------------------------------------------------------
00003170                           308  *----------------Gameloop (main loop)-------------------
00003170                           309  *------------------------------------------------------- 
00003170                           310  gameloop:
00003170  6100 05BE                311      bsr     clear_screen    clears the screen  
00003174  6100 0212                312      bsr     draw            branch to draw screen subroutine
00003178  6100 0258                313      bsr     draw_hud
0000317C  6100 0008                314      bsr     update          branch to update game subroutine 
00003180  6100 0562                315      bsr     gameplay        branch to gameplay subroutine
00003184  60EA                     316      bra     gameloop        Continue looping the game loop     
00003186                           317  
00003186                           318  *-------------------------------------------------------
00003186                           319  *----------------Update Quest Progress------------------
00003186                           320  *  Complete Quest
00003186                           321  *------------------------------------------------------- 
00003186                           322  update:
00003186  0C38 0000 5FF0           323      CMP.B   #0,PLAYER           Check if the player health is zero
0000318C  6F00 0022                324      BLE     player_dead         Player is dead if health is zero or below
00003190                           325      
00003190  BDFC 00008156            326      CMP.L   #WIN_POINT,A6       Check if the player is standing on the win point
00003196  6700 0042                327      BEQ     won_game            Branch to the won game subroutine
0000319A                           328  
0000319A  0C38 0005 5FF3           329      CMP.B   #5,GAME_STATE       Check which state the game is in
000031A0  6700 005A                330      BEQ     movement_checks     Check for enemies and shops if in movement state
000031A4  0C38 0006 5FF3           331      CMP.B   #6,GAME_STATE       Check which state the game is in
000031AA  6700 01A4                332      BEQ     enemy_alive_check   Check if enemy is dead if in combat
000031AE                           333      
000031AE  4E75                     334      rts
000031B0                           335      
000031B0                           336  *-------------------------------------------------------
000031B0                           337  *---------------------Win or Lose----------------------- 
000031B0                           338  player_dead:
000031B0  6100 05AE                339      bsr     endl            Break to new line
000031B4                           340      
000031B4  43F9 00005061            341      lea     death_msg,A1    Load the death message
000031BA  103C 000E                342      move.b  #14,D0          Move byte #14 to D0 for the trap command
000031BE  4E4F                     343      trap    #15             Display the loaded message
000031C0                           344  
000031C0  6100 0A7A                345      bsr     press_continue  Pause to get input
000031C4  6100 056A                346      bsr     clear_screen    Clear the screen
000031C8  6100 01EC                347      bsr     draw_graveyard  Draw a graveyard
000031CC  6100 0592                348      bsr     endl            Break to new line
000031D0  11FC 0040 5FF3           349      move.b  #64,GAME_STATE  Set the game state to end game
000031D6  6000 0564                350      bra     replay          Give the player the option to restart or quit
000031DA                           351      
000031DA                           352  won_game:
000031DA  6100 0584                353      bsr     endl            Break to new line
000031DE                           354      
000031DE  43F9 000050C6            355      lea     win_msg,A1      Load the win message
000031E4  103C 000E                356      move.b  #14,D0          Move byte #14 to D0 for the trap command
000031E8  4E4F                     357      trap    #15             Display the loaded message
000031EA                           358  
000031EA  6100 0A50                359      bsr     press_continue  Pause to get input
000031EE  6100 0540                360      bsr     clear_screen    Clear the screen
000031F2  11FC 0040 5FF3           361      move.b  #64,GAME_STATE  Set the game state to end game
000031F8  6000 0542                362      bra     replay          Give the player the option to restart or quit
000031FC                           363  
000031FC                           364  *-------------------------------------------------------
000031FC                           365  *--------------------Movement State--------------------- 
000031FC                           366  movement_checks:
000031FC  6100 0016                367      bsr     manage_torch    Check if the torch life is zero and if damage player if so  
00003200  6100 0046                368      bsr     enemies_check   Check for enemies beside the player
00003204  0C38 0005 5FF3           369      CMP.B   #5,GAME_STATE   Compare the movement gamestate number with the current gamestate
0000320A  6600 0A62                370      BNE     return          Return from the loop if the game is not in the movement state anymore
0000320E  6100 00C2                371      bsr     shops_check     Check for shops beside the player
00003212                           372      
00003212  4E75                     373      rts
00003214                           374  
00003214                           375  *---------------------Manage Torch----------------------
00003214                           376  manage_torch:
00003214  0C38 0000 5FFB           377      CMP.B   #0,PLA_TORCH    Compare the torch life with zero
0000321A  6E00 0A52                378      BGT     return          Return if the torch life is greater than zero
0000321E                           379      
0000321E  5338 5FF0                380      sub.b   #1,PLAYER       Remove one health from the player
00003222                           381      
00003222  6100 053C                382      bsr     endl            Break to new line
00003226                           383      
00003226  223C 000000FF            384      move.l  #RED,D1
0000322C  6100 0A82                385      bsr     change_font_colour  Change the font colour
00003230                           386      
00003230  43F9 000052A4            387      lea     no_torch_msg,A1 Load the no torch message into A1
00003236  103C 000E                388      move.b  #14,D0          Move the number literal 14 into D0 for trap command
0000323A  4E4F                     389      trap    #15             Display the loaded message
0000323C                           390      
0000323C  223C 00FFFFFF            391      move.l  #WHITE,D1
00003242  6100 0A6C                392      bsr     change_font_colour  Change the font colour
00003246                           393      
00003246  4E75                     394      rts                     Return from the subroutine
00003248                           395  
00003248                           396  *--------------------Enemy Checking--------------------- 
00003248                           397  enemies_check:
00003248  4BF8 6000                398      lea     FIRST_ENEMY,A5  Load the memory address of the first enemy
0000324C  1A3C 0000                399      move.b  #0,D5           Move the starting enemy number to D5
00003250  6100 0004                400      bsr     enemies_loop    Loop through all enemies
00003254  4E75                     401      rts                     Return from subroutine
00003256                           402      
00003256                           403  enemies_loop:
00003256  BA3C 0002                404      CMP.B   #ENEMY_MAX,D5   Compare the enemy number with the maximum enemy number
0000325A  6C00 0A12                405      BGE     return          Return from the loop if the current enemy number is greater than or equal to the max
0000325E                           406  
0000325E  6100 0014                407      bsr     enemy_check     Check for an enemy
00003262                           408      
00003262  0C38 0005 5FF3           409      CMP.B   #5,GAME_STATE   Compare the movement gamestate number with the current gamestate
00003268  6600 0A04                410      BNE     return          Return from the loop if the game is not in the movement state anymore
0000326C                           411      
0000326C  5205                     412      add.b   #1,D5           Add to the current enemy number
0000326E  DAFC 000C                413      add.w   #12,A5          Add to the current enemy pointer to move to the next enemy (16 for next enemy - 4 to get back from position)
00003272  60E2                     414      bra     enemies_loop    Keep looping the enemies
00003274                           415      
00003274                           416  
00003274                           417  enemy_check:
00003274  564D                     418      add.w   #ALIVE,A5       Move into enemy information to check if its alive
00003276  0C1D 0000                419      CMP.B   #0,(A5)+        Check if the enemy is alive
0000327A  6700 09F2                420      BEQ     return          Return from the check if the enemy is dead
0000327E                           421      
0000327E  340E                     422      move.w  A6,D2           Move the player position to D2
00003280                           423      
00003280                           424      *Check if the player is beside an enemy
00003280  0442 0010                425      sub.w   #16,D2          Check north
00003284  B455                     426      CMP.W   (A5),D2           
00003286  6700 0020                427      BEQ     enter_combat    Enter the player into combat
0000328A                           428      
0000328A  0642 0020                429      add.w   #32,D2          Check south
0000328E  B455                     430      CMP.W   (A5),D2           
00003290  6700 0016                431      BEQ     enter_combat    Enter the player into combat
00003294                           432      
00003294  0442 0011                433      sub.w   #17,D2          Check west
00003298  B455                     434      CMP.W   (A5),D2           
0000329A  6700 000C                435      BEQ     enter_combat    Enter the player into combat
0000329E                           436      
0000329E  5442                     437      add.w   #2,D2           Check east
000032A0  B455                     438      CMP.W   (A5),D2           
000032A2  6700 0004                439      BEQ     enter_combat    Enter the player into combat
000032A6                           440      
000032A6  4E75                     441      rts     Return if not touching an enemy
000032A8                           442      
000032A8                           443  enter_combat:
000032A8  594D                     444      sub.w   #4,A5               Get the memory address of the enemy opposed to it's position
000032AA  11FC 0006 5FF3           445      move.b  #6,GAME_STATE       Move to combat state
000032B0                           446      
000032B0  6100 04AE                447      bsr     endl                Line break
000032B4                           448      
000032B4  43F9 00004BE3            449      LEA     encounter_msg,A1    Load the encounter message int A1
000032BA  103C 000E                450      move.b  #14,D0              Move #14 to D0 to display message
000032BE  4E4F                     451      trap    #15                 Display the loaded message
000032C0                           452      
000032C0  6100 097A                453      bsr     press_continue      Branch to the press to continue subroutine
000032C4                           454      
000032C4  6100 046A                455      bsr     clear_screen        Clear the screen
000032C8                           456      
000032C8  6100 00DE                457      bsr     draw_skeleton       Draw the enemy
000032CC  6100 0220                458      bsr     draw_battle_info    Draw the info
000032D0                           459      
000032D0  4E75                     460      rts
000032D2                           461        
000032D2                           462  *--------------------Shop Checking----------------------
000032D2                           463  shops_check:
000032D2  4BF8 6500                464      lea     FIRST_SHOP,A5   Load the memory address of the first shop
000032D6  1A3C 0000                465      move.b  #0,D5           Move the starting shop number to D5
000032DA  6100 0004                466      bsr     shops_loop      Loop through all shops
000032DE  4E75                     467      rts                     Return from subroutine
000032E0                           468      
000032E0                           469  shops_loop:
000032E0  BA3C 0002                470      CMP.B   #SHOP_MAX,D5    Compare the shop number with the maximum shop number
000032E4  6C00 0988                471      BGE     return          Return from the loop if the current shop number is greater than or equal to the max
000032E8                           472      
000032E8  6100 0014                473      bsr     shop_check      Check for a shop
000032EC                           474      
000032EC  0C38 0005 5FF3           475      CMP.B   #5,GAME_STATE   Compare the movement gamestate number with the current gamestate
000032F2  6600 097A                476      BNE     return          Return from the loop if the game is not in the movement state anymore
000032F6                           477      
000032F6  5205                     478      add.b   #1,D5           Add to the current shop number
000032F8  DAFC 0010                479      add.w   #16,A5          Add to the current shop pointer to move to the next shop
000032FC  60E2                     480      bra     shops_loop      Keep looping the shops
000032FE                           481      
000032FE                           482  shop_check:    
000032FE  340E                     483      move.w  A6,D2           Move the player position to D2
00003300                           484      
00003300                           485      *Check if the player is beside a shop
00003300  0442 0010                486      sub.w   #16,D2          Check north
00003304  B455                     487      CMP.W   (A5),D2           
00003306  6700 0020                488      BEQ     enter_shop      The player enters a shop
0000330A                           489      
0000330A  0642 0020                490      add.w   #32,D2          Check south
0000330E  B455                     491      CMP.W   (A5),D2           
00003310  6700 0016                492      BEQ     enter_shop      The player enters a shop
00003314                           493      
00003314  0442 0011                494      sub.w   #17,D2          Check west
00003318  B455                     495      CMP.W   (A5),D2           
0000331A  6700 000C                496      BEQ     enter_shop      The player enters a shop
0000331E                           497      
0000331E  5442                     498      add.w   #2,D2           Check east
00003320  B455                     499      CMP.W   (A5),D2           
00003322  6700 0004                500      BEQ     enter_shop      The player enters a shop
00003326                           501      
00003326  4E75                     502      rts     Return if not touching a shop
00003328                           503      
00003328                           504  enter_shop:
00003328  11FC 0007 5FF3           505      move.b  #7,GAME_STATE       Move to shop game state
0000332E                           506      
0000332E  6100 0430                507      bsr     endl                Line break
00003332                           508      
00003332  43F9 00005167            509      LEA     shop_enter_msg,A1   Load the encounter message int A1
00003338  103C 000E                510      move.b  #14,D0              Move #14 to D0 to display message
0000333C  4E4F                     511      trap    #15                 Display the loaded message
0000333E                           512      
0000333E  6100 08FC                513      bsr     press_continue      Branch to the press to continue subroutine
00003342                           514      
00003342  6100 03EC                515      bsr     clear_screen        Clear the screen
00003346                           516      
00003346  6100 007C                517      bsr     draw_merchant       Draw the merchant
0000334A  6100 021C                518      bsr     draw_shop_info      Draw the info
0000334E                           519      
0000334E  4E75                     520      rts
00003350                           521  
00003350                           522  *-------------------------------------------------------
00003350                           523  *---------------------Combat State---------------------- 
00003350                           524  enemy_alive_check:
00003350  0C15 0000                525      CMP.B   #0,(A5)     Compare the enemy health with zero
00003354  6F00 0004                526      BLE     enemy_died  If the enemy health is zero or below, they died
00003358                           527      
00003358  4E75                     528      rts
0000335A                           529      
0000335A                           530  enemy_died:
0000335A  6100 0404                531      bsr     endl            Break to a new line
0000335E                           532  
0000335E  43F9 0000502B            533      lea     battle_won_msg,A1   Load the won battle message
00003364  103C 000E                534      move.b  #14,D0              Move the literal #14 to D0 for trap task #14
00003368  4E4F                     535      trap    #15                 Display the message
0000336A                           536      
0000336A  11FC 0005 5FF3           537      move.b  #5,GAME_STATE   Set the game state mack to movement state
00003370  564D                     538      add.w   #ALIVE,A5       Move from the enemy health to its alive status
00003372  1ABC 0000                539      move.b  #0,(A5)         Set the enemy as dead
00003376                           540      
00003376  6100 08C4                541      bsr     press_continue
0000337A                           542      
0000337A  6100 03B4                543      bsr     clear_screen    Clear the screen
0000337E  6100 0008                544      bsr     draw            Draw the map for first frame back in movement
00003382  6100 004E                545      bsr     draw_hud        Draw the hud for first frame back in movement
00003386                           546      
00003386  4E75                     547      rts
00003388                           548      
00003388                           549  *-------------------------------------------------------
00003388                           550  *-----------------Draw Quest Updates--------------------
00003388                           551  * Draw the game progress information, status regarding
00003388                           552  * quest
00003388                           553  *------------------------------------------------------- 
00003388                           554  draw:
00003388  0C38 0005 5FF3           555      CMP.B   #5,GAME_STATE   Check which state the game is in
0000338E  6700 0932                556      BEQ     draw_loop       If in the movement state, draw the map
00003392  0C38 0006 5FF3           557      CMP.B   #6,GAME_STATE   Check which state the game is in
00003398  6700 000E                558      BEQ     draw_skeleton   If in the combat state, draw the enemy
0000339C  0C38 0007 5FF3           559      CMP.B   #7,GAME_STATE   Check which state the game is in
000033A2  6700 0020                560      BEQ     draw_merchant   If in the shop state, draw the enemy
000033A6  4E75                     561      rts
000033A8                           562      
000033A8                           563  draw_skeleton:
000033A8  43F9 0000536E            564      lea     skeleton_msg,A1 Load the skeleton message
000033AE  103C 000E                565      move.b  #14,D0          Move literal 14 for display message trap command
000033B2  4E4F                     566      trap    #15             Display the loaded message
000033B4                           567      
000033B4  4E75                     568      rts
000033B6                           569      
000033B6                           570  draw_graveyard:
000033B6  43F9 000052BC            571      lea     graveyard_msg,A1 Load the graveyard message
000033BC  103C 000E                572      move.b  #14,D0           Move literal 14 for display message trap command
000033C0  4E4F                     573      trap    #15              Display the loaded message
000033C2                           574      
000033C2  4E75                     575      rts
000033C4                           576      
000033C4                           577  draw_merchant:
000033C4  43F9 00005466            578      lea     merchant_msg,A1  Load the merchant message
000033CA  103C 000E                579      move.b  #14,D0           Move literal 14 for display message trap command
000033CE  4E4F                     580      trap    #15              Display the loaded message
000033D0                           581      
000033D0  4E75                     582      rts
000033D2                           583      
000033D2                           584  draw_hud:
000033D2  0C38 0005 5FF3           585      CMP.B   #5,GAME_STATE       Check which state the game is in
000033D8  6700 0018                586      BEQ     draw_player_info    If in the movement state, draw the player info
000033DC  0C38 0006 5FF3           587      CMP.B   #6,GAME_STATE       Check which state the game is in
000033E2  6700 010A                588      BEQ     draw_battle_info    If in the combat state, draw the combat info
000033E6  0C38 0007 5FF3           589      CMP.B   #7,GAME_STATE       Check which state the game is in
000033EC  6700 017A                590      BEQ     draw_shop_info      If in the shop state, draw the shop info
000033F0                           591      
000033F0  4E75                     592      rts
000033F2                           593  
000033F2                           594  draw_player_info:
000033F2  323C 00FF                595      move.w  #255,D1         Move the word #255 to D1 to set the type of trap 11
000033F6  103C 000B                596      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
000033FA  4E4F                     597      trap    #15             Trap to get the cursor position in D1
000033FC                           598      
000033FC  3601                     599      move.w  D1,D3           Move the current cursor position to D3 for later
000033FE                           600      
000033FE                           601      * Display the player health
000033FE  323C 3201                602      move.w  #CSR_POS_MOVE,D1           
00003402  4E4F                     603      trap    #15             Set the cursor position with trap command 11
00003404  4241                     604      clr     D1              Clear D1 of the cursor position
00003406                           605      
00003406  43F9 00004FB9            606      lea     health_msg,A1   Load the hud message
0000340C  103C 000E                607      move.b  #14,D0          Move literal 14 for display message trap command
00003410  4E4F                     608      trap    #15             Display the loaded message
00003412                           609      
00003412  1238 5FF0                610      move.b  PLAYER,D1       Move the player health value to D1 to display
00003416  103C 0003                611      move.b  #3,D0           Move literal 3 for display number trap command
0000341A  4E4F                     612      trap    #15             Display the number in D1
0000341C                           613      
0000341C                           614      * Display the torch life
0000341C  103C 000B                615      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
00003420  323C 3201                616      move.w  #CSR_POS_MOVE,D1         
00003424  5241                     617      add.w   #1,D1  
00003426  4E4F                     618      trap    #15             Set the cursor position with trap command 11
00003428  4241                     619      clr     D1              Clear D1 of the cursor position
0000342A                           620      
0000342A  43F9 00004FD1            621      lea     torch_msg,A1   Load the hud message
00003430  103C 000E                622      move.b  #14,D0          Move literal 14 for display message trap command
00003434  4E4F                     623      trap    #15             Display the loaded message
00003436                           624      
00003436  1238 5FFB                625      move.b  PLA_TORCH,D1    Move the player torch life value to D1 to display
0000343A  103C 0003                626      move.b  #3,D0           Move literal 3 for display number trap command
0000343E  4E4F                     627      trap    #15             Display the number in D1
00003440                           628      
00003440                           629      * Display the inventory
00003440  103C 000B                630      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
00003444  323C 3201                631      move.w  #CSR_POS_MOVE,D1
00003448  5441                     632      add.w   #2,D1          
0000344A  4E4F                     633      trap    #15             Set the cursor position with trap command 11
0000344C  4241                     634      clr     D1              Clear D1 of the cursor position
0000344E                           635      
0000344E  43F9 00004FEB            636      lea     inventory_msg,A1   Load the hud message
00003454  103C 000E                637      move.b  #14,D0          Move literal 14 for display message trap command
00003458  4E4F                     638      trap    #15             Display the loaded message
0000345A                           639      
0000345A                           640      * Display the player gold
0000345A  103C 000B                641      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
0000345E  323C 3201                642      move.w  #CSR_POS_MOVE,D1         
00003462  5641                     643      add.w   #3,D1  
00003464  4E4F                     644      trap    #15             Set the cursor position with trap command 11
00003466  4241                     645      clr     D1              Clear D1 of the cursor position
00003468                           646      
00003468  43F9 00004FF6            647      lea     gold_msg,A1   Load the hud message
0000346E  103C 000E                648      move.b  #14,D0          Move literal 14 for display message trap command
00003472  4E4F                     649      trap    #15             Display the loaded message
00003474                           650      
00003474  49F8 5FF8                651      lea     PLA_GOLD,A4
00003478  6100 0052                652      bsr     draw_item_number
0000347C                           653      
0000347C                           654      * Display the player potions
0000347C  103C 000B                655      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
00003480  323C 3201                656      move.w  #CSR_POS_MOVE,D1         
00003484  5841                     657      add.w   #4,D1  
00003486  4E4F                     658      trap    #15             Set the cursor position with trap command 11
00003488  4241                     659      clr     D1              Clear D1 of the cursor position
0000348A                           660      
0000348A  43F9 00005005            661      lea     potions_msg,A1   Load the hud message
00003490  103C 000E                662      move.b  #14,D0          Move literal 14 for display message trap command
00003494  4E4F                     663      trap    #15             Display the loaded message
00003496                           664      
00003496  49F8 5FF9                665      lea     PLA_POTIONS,A4
0000349A  6100 0030                666      bsr     draw_item_number
0000349E                           667      
0000349E                           668      * Display the player keys
0000349E  103C 000B                669      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
000034A2  323C 3201                670      move.w  #CSR_POS_MOVE,D1         
000034A6  5A41                     671      add.w   #5,D1  
000034A8  4E4F                     672      trap    #15             Set the cursor position with trap command 11
000034AA  4241                     673      clr     D1              Clear D1 of the cursor position
000034AC                           674      
000034AC  43F9 00004FFE            675      lea     key_msg,A1   Load the hud message
000034B2  103C 000E                676      move.b  #14,D0          Move literal 14 for display message trap command
000034B6  4E4F                     677      trap    #15             Display the loaded message
000034B8                           678      
000034B8  49F8 5FFA                679      lea     PLA_KEYS,A4
000034BC  6100 000E                680      bsr     draw_item_number
000034C0                           681      
000034C0  3203                     682      move.w  D3,D1           Move the current cursor position to D3 for later
000034C2                           683      
000034C2  103C 000B                684      move.b  #11,D0          Move the byte #11 to D0 for trap command 11          
000034C6  4E4F                     685      trap    #15             Set the cursor position with trap command 11
000034C8                           686      
000034C8  4241                     687      clr     D1              Clear D1 for later use
000034CA                           688      
000034CA  4E75                     689      rts
000034CC                           690      
000034CC                           691  draw_item_number:
000034CC  103C 000E                692      move.b  #14,D0          Move literal 3 for display number trap command
000034D0  43F9 0000505D            693      lea     bracket_open_msg,A1
000034D6  4E4F                     694      trap    #15
000034D8                           695  
000034D8  103C 0003                696      move.b  #3,D0           Move literal 3 for display number trap command
000034DC  1214                     697      move.b  (A4),D1         Move the value in the register A4 to D1 to display
000034DE  4E4F                     698      trap    #15             Display the number in D1
000034E0                           699      
000034E0  103C 000E                700      move.b  #14,D0          Move literal 3 for display number trap command
000034E4  43F9 0000505F            701      lea     bracket_close_msg,A1
000034EA  4E4F                     702      trap    #15
000034EC  4E75                     703      rts
000034EE                           704      
000034EE                           705  
000034EE                           706  draw_battle_info:
000034EE  323C 00FF                707      move.w  #255,D1         Move the word #255 to D1 to set the type of trap 11
000034F2  103C 000B                708      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
000034F6  4E4F                     709      trap    #15             Trap to get the cursor position in D1
000034F8                           710      
000034F8  3601                     711      move.w  D1,D3           Move the current cursor position to D3 for later
000034FA                           712      
000034FA                           713      * Move cursor to draw player info
000034FA  323C 2001                714      move.w  #CSR_POS_BATTLE,D1           
000034FE  4E4F                     715      trap    #15             Set the cursor position with trap command 11
00003500  4241                     716      clr     D1              Clear D1 of the cursor position
00003502                           717      
00003502  43F9 00004FB9            718      lea     health_msg,A1   Load the hud message
00003508  103C 000E                719      move.b  #14,D0          Move literal 14 for display message trap command
0000350C  4E4F                     720      trap    #15             Display the loaded message
0000350E                           721      
0000350E  1238 5FF0                722      move.b  PLAYER,D1       Move the player health value to D1 to display
00003512  103C 0003                723      move.b  #3,D0           Move literal 3 for display number trap command
00003516  4E4F                     724      trap    #15             Display the number in D1
00003518                           725      
00003518                           726      * Move the cursor to draw enemy info
00003518  103C 000B                727      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
0000351C  323C 2001                728      move.w  #CSR_POS_BATTLE,D1
00003520  5241                     729      add.w   #1,D1
00003522  4E4F                     730      trap    #15             Set the cursor position with trap command 11
00003524  4241                     731      clr     D1              Clear D1 of the cursor position
00003526                           732      
00003526  43F9 00004FC2            733      lea     enemy_health_msg,A1 Load the hud message
0000352C  103C 000E                734      move.b  #14,D0              Move literal 14 for display message trap command
00003530  4E4F                     735      trap    #15                 Display the loaded message
00003532                           736      
00003532  1215                     737      move.b  (A5),D1         Move the enemy health value to D1 to display
00003534  103C 0003                738      move.b  #3,D0           Move literal 3 for display number trap command
00003538  4E4F                     739      trap    #15             Display the number in D1
0000353A                           740      
0000353A                           741      * Move the cursor to draw potion information
0000353A  103C 000B                742      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
0000353E  323C 2001                743      move.w  #CSR_POS_BATTLE,D1
00003542  5641                     744      add.w   #3,D1
00003544  4E4F                     745      trap    #15             Set the cursor position with trap command 11
00003546  4241                     746      clr     D1              Clear D1 of the cursor position
00003548                           747      
00003548  43F9 00005005            748      lea     potions_msg,A1   Load the hud message
0000354E  103C 000E                749      move.b  #14,D0          Move literal 14 for display message trap command
00003552  4E4F                     750      trap    #15             Display the loaded message
00003554                           751      
00003554  49F8 5FF9                752      lea     PLA_POTIONS,A4
00003558  6100 FF72                753      bsr     draw_item_number
0000355C                           754      
0000355C                           755      * Move the cursor back to its previous position
0000355C  3203                     756      move.w  D3,D1           Move the previous cursor position back to D1
0000355E  103C 000B                757      move.b  #11,D0          Move the byte #11 to D0 for trap command 11          
00003562  4E4F                     758      trap    #15             Set the cursor position with trap command 11
00003564                           759      
00003564  4241                     760      clr     D1              Clear D1 for later use
00003566                           761      
00003566  4E75                     762      rts
00003568                           763      
00003568                           764  draw_shop_info:
00003568  323C 00FF                765      move.w  #255,D1         Move the word #255 to D1 to set the type of trap 11
0000356C  103C 000B                766      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
00003570  4E4F                     767      trap    #15             Trap to get the cursor position in D1
00003572                           768      
00003572  3601                     769      move.w  D1,D3           Move the current cursor position to D3 for later
00003574                           770      
00003574                           771      * Move cursor to draw shop info
00003574  323C 1801                772      move.w  #CSR_POS_SHOP_S,D1           
00003578  4E4F                     773      trap    #15             Set the cursor position with trap command 11
0000357A  4241                     774      clr     D1              Clear D1 of the cursor position
0000357C                           775      
0000357C  43F9 00005241            776      lea     shop_stock_msg,A1   Load the hud message
00003582  103C 000E                777      move.b  #14,D0          Move literal 14 for display message trap command
00003586  4E4F                     778      trap    #15             Display the loaded message
00003588                           779      
00003588                           780      
00003588                           781      * Display the shop's potions
00003588  103C 000B                782      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
0000358C  323C 1801                783      move.w  #CSR_POS_SHOP_S,D1         
00003590  5241                     784      add.w   #1,D1  
00003592  4E4F                     785      trap    #15             Set the cursor position with trap command 11
00003594  4241                     786      clr     D1              Clear D1 of the cursor position
00003596                           787      
00003596  43F9 00005005            788      lea     potions_msg,A1   Load the hud message
0000359C  103C 000E                789      move.b  #14,D0          Move literal 14 for display message trap command
000035A0  4E4F                     790      trap    #15             Display the loaded message
000035A2                           791      
000035A2  544D                     792      add.w   #S_POTIONS,A5
000035A4  49D5                     793      lea     (A5),A4
000035A6  6100 FF24                794      bsr     draw_item_number
000035AA                           795      
000035AA                           796      * Display the shop's keys
000035AA  103C 000B                797      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
000035AE  323C 1801                798      move.w  #CSR_POS_SHOP_S,D1         
000035B2  5441                     799      add.w   #2,D1  
000035B4  4E4F                     800      trap    #15             Set the cursor position with trap command 11
000035B6  4241                     801      clr     D1              Clear D1 of the cursor position
000035B8                           802      
000035B8  43F9 00004FFE            803      lea     key_msg,A1      Load the hud message
000035BE  103C 000E                804      move.b  #14,D0          Move literal 14 for display message trap command
000035C2  4E4F                     805      trap    #15             Display the loaded message
000035C4                           806      
000035C4  524D                     807      add.w   #1,A5
000035C6  49D5                     808      lea     (A5),A4
000035C8  6100 FF02                809      bsr     draw_item_number
000035CC                           810      
000035CC                           811      * Display the shop's torches
000035CC  103C 000B                812      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
000035D0  323C 1801                813      move.w  #CSR_POS_SHOP_S,D1         
000035D4  5641                     814      add.w   #3,D1  
000035D6  4E4F                     815      trap    #15             Set the cursor position with trap command 11
000035D8  4241                     816      clr     D1              Clear D1 of the cursor position
000035DA                           817      
000035DA  43F9 0000500F            818      lea     torches_msg,A1  Load the torches message
000035E0  103C 000E                819      move.b  #14,D0          Move literal 14 for display message trap command
000035E4  4E4F                     820      trap    #15             Display the loaded message
000035E6                           821      
000035E6  524D                     822      add.w   #1,A5
000035E8  49D5                     823      lea     (A5),A4
000035EA  6100 FEE0                824      bsr     draw_item_number
000035EE                           825      
000035EE                           826      * Display the shop's damage upgrades
000035EE  103C 000B                827      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
000035F2  323C 1801                828      move.w  #CSR_POS_SHOP_S,D1         
000035F6  5841                     829      add.w   #4,D1  
000035F8  4E4F                     830      trap    #15             Set the cursor position with trap command 11
000035FA  4241                     831      clr     D1              Clear D1 of the cursor position
000035FC                           832      
000035FC  43F9 00005018            833      lea     damage_up_msg,A1 Load the damage upgrades message
00003602  103C 000E                834      move.b  #14,D0           Move literal 14 for display message trap command
00003606  4E4F                     835      trap    #15              Display the loaded message
00003608                           836      
00003608  524D                     837      add.w   #1,A5               Increment A5 to get to the damage upgrades
0000360A  49D5                     838      lea     (A5),A4             Load the memory address in A5 to A4
0000360C  6100 FEBE                839      bsr     draw_item_number    Draw the number of items
00003610  5B4D                     840      sub.w   #S_DAMAGE_IN,A5     Bring the pointer back to the root of the shop
00003612                           841      
00003612                           842      * Display the inventory
00003612  103C 000B                843      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
00003616  323C 3401                844      move.w  #CSR_POS_SHOP_P,D1       
0000361A  4E4F                     845      trap    #15             Set the cursor position with trap command 11
0000361C  4241                     846      clr     D1              Clear D1 of the cursor position
0000361E                           847      
0000361E  43F9 00004FEB            848      lea     inventory_msg,A1   Load the hud message
00003624  103C 000E                849      move.b  #14,D0          Move literal 14 for display message trap command
00003628  4E4F                     850      trap    #15             Display the loaded message
0000362A                           851      
0000362A                           852      * Display the player gold
0000362A  103C 000B                853      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
0000362E  323C 3401                854      move.w  #CSR_POS_SHOP_P,D1         
00003632  5241                     855      add.w   #1,D1  
00003634  4E4F                     856      trap    #15             Set the cursor position with trap command 11
00003636  4241                     857      clr     D1              Clear D1 of the cursor position
00003638                           858      
00003638  43F9 00004FF6            859      lea     gold_msg,A1   Load the hud message
0000363E  103C 000E                860      move.b  #14,D0          Move literal 14 for display message trap command
00003642  4E4F                     861      trap    #15             Display the loaded message
00003644                           862      
00003644  49F8 5FF8                863      lea     PLA_GOLD,A4
00003648  6100 FE82                864      bsr     draw_item_number
0000364C                           865      
0000364C                           866      * Display the player potions
0000364C  103C 000B                867      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
00003650  323C 3401                868      move.w  #CSR_POS_SHOP_P,D1         
00003654  5441                     869      add.w   #2,D1  
00003656  4E4F                     870      trap    #15             Set the cursor position with trap command 11
00003658  4241                     871      clr     D1              Clear D1 of the cursor position
0000365A                           872      
0000365A  43F9 00005005            873      lea     potions_msg,A1   Load the hud message
00003660  103C 000E                874      move.b  #14,D0          Move literal 14 for display message trap command
00003664  4E4F                     875      trap    #15             Display the loaded message
00003666                           876      
00003666  49F8 5FF9                877      lea     PLA_POTIONS,A4
0000366A  6100 FE60                878      bsr     draw_item_number
0000366E                           879      
0000366E                           880      * Display the player keys
0000366E  103C 000B                881      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
00003672  323C 3401                882      move.w  #CSR_POS_SHOP_P,D1         
00003676  5641                     883      add.w   #3,D1  
00003678  4E4F                     884      trap    #15             Set the cursor position with trap command 11
0000367A  4241                     885      clr     D1              Clear D1 of the cursor position
0000367C                           886      
0000367C  43F9 00004FFE            887      lea     key_msg,A1   Load the hud message
00003682  103C 000E                888      move.b  #14,D0          Move literal 14 for display message trap command
00003686  4E4F                     889      trap    #15             Display the loaded message
00003688                           890      
00003688  49F8 5FFA                891      lea     PLA_KEYS,A4
0000368C  6100 FE3E                892      bsr     draw_item_number
00003690                           893      
00003690                           894      * Display the torch life
00003690  103C 000B                895      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
00003694  323C 3401                896      move.w  #CSR_POS_SHOP_P,D1
00003698  5A41                     897      add.w   #5,D1       
0000369A  4E4F                     898      trap    #15             Set the cursor position with trap command 11
0000369C  4241                     899      clr     D1              Clear D1 of the cursor position
0000369E                           900      
0000369E  43F9 00004FD1            901      lea     torch_msg,A1   Load the hud message
000036A4  103C 000E                902      move.b  #14,D0          Move literal 14 for display message trap command
000036A8  4E4F                     903      trap    #15             Display the loaded message
000036AA                           904      
000036AA  1238 5FFB                905      move.b  PLA_TORCH,D1    Move the player torch life value to D1 to display
000036AE  103C 0003                906      move.b  #3,D0           Move literal 3 for display number trap command
000036B2  4E4F                     907      trap    #15             Display the number in D1
000036B4                           908      
000036B4                           909      * Display the player's damage level
000036B4  103C 000B                910      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
000036B8  323C 3401                911      move.w  #CSR_POS_SHOP_P,D1
000036BC  5C41                     912      add.w   #6,D1       
000036BE  4E4F                     913      trap    #15             Set the cursor position with trap command 11
000036C0  4241                     914      clr     D1              Clear D1 of the cursor position
000036C2                           915      
000036C2  43F9 00004FDE            916      lea     damage_lvl_msg,A1   Load the damage level message
000036C8  103C 000E                917      move.b  #14,D0              Move literal 14 for display message trap command
000036CC  4E4F                     918      trap    #15                 Display the loaded message
000036CE                           919      
000036CE  1238 5FF1                920      move.b  PLA_DAMAGE,D1   Move the player's damage level to D1 to display
000036D2  103C 0003                921      move.b  #3,D0           Move literal 3 for display number trap command
000036D6  4E4F                     922      trap    #15             Display the number in D1
000036D8                           923      
000036D8                           924      * Move the cursor back to its previous position
000036D8  3203                     925      move.w  D3,D1           Move the previous cursor position back to D1
000036DA  103C 000B                926      move.b  #11,D0          Move the byte #11 to D0 for trap command 11          
000036DE  4E4F                     927      trap    #15             Set the cursor position with trap command 11
000036E0                           928      
000036E0  4241                     929      clr     D1              Clear D1 for later use
000036E2                           930      
000036E2  4E75                     931      rts
000036E4                           932  
000036E4                           933  *-------------------------------------------------------
000036E4                           934  *---Game Play (Quest Progress)--------------------------
000036E4                           935  *------------------------------------------------------- 
000036E4                           936  gameplay:
000036E4  6100 007A                937      bsr     endl            Break to a new line
000036E8  0C38 0000 5FF3           938      CMP.B   #0,GAME_STATE   Check which stage the game is in
000036EE  6700 F92C                939      BEQ     pick_role       Branch to the pick role subroutine
000036F2  0C38 0005 5FF3           940      CMP.B   #5,GAME_STATE   Check which stage the game is in
000036F8  6700 007C                941      BEQ     movement        Branch to the movement subroutine
000036FC  0C38 0006 5FF3           942      CMP.B   #6,GAME_STATE   Check which stage the game is in
00003702  6700 01DA                943      BEQ     combat          branch to the combat subroutine
00003706  0C38 0007 5FF3           944      CMP.B   #7,GAME_STATE   Check which stage the game is in
0000370C  6700 037A                945      BEQ     shop            branch to the shop subroutine
00003710  4E75                     946      rts                     Return from 'gameplay' subroutine
00003712                           947  
00003712                           948  *-------------------------------------------------------
00003712                           949  *------------------Screen Decoration--------------------
00003712                           950  *-------------------------------------------------------
00003712                           951  decorate:
00003712  163C 003C                952      move.b  #60, D3
00003716  6100 0048                953      bsr     endl
0000371A                           954  out:
0000371A  43F9 00004538            955      lea     loop_msg,A1
00003720  103C 000E                956      move.b  #14,D0
00003724  4E4F                     957      trap    #15
00003726  5343                     958      sub     #1,D3   decrement loop counter
00003728  66F0                     959      bne     out     repeat until D0=0
0000372A  6100 0034                960      bsr     endl
0000372E  4E75                     961      rts
00003730                           962      
00003730                           963  clear_screen: 
00003730  103C 000B                964      move.b  #11,D0      clear screen
00003734  323C FF00                965      move.w  #$ff00,D1
00003738  4E4F                     966      trap    #15
0000373A  4E75                     967      rts
0000373C                           968  *-------------------------------------------------------
0000373C                           969  *------------------------Replay-------------------------
0000373C                           970  *-------------------------------------------------------
0000373C                           971  replay:
0000373C  43F9 00004628            972      lea     replay_msg,A1   Load the Replay message
00003742  103C 000E                973      move.b  #14,D0          Move the number literal 14 to D0 for trap command
00003746  4E4F                     974      trap    #15             Display the loaded message
00003748                           975      
00003748  1A3C 0002                976      move.b  #2,D5           Move the number of input options to D5
0000374C  6100 F9D0                977      bsr     input           Take user input
00003750  1401                     978      move.b  D1,D2           Move the input to D2 so it's not trampled by the clear screen
00003752                           979      
00003752  61DC                     980      bsr     clear_screen    Clear the screen
00003754                           981      
00003754  B43C 0001                982      cmp.b   #1,D2           Compare the user input against the two options
00003758  6700 D8A6                983      beq     start           Restart if the user enters 1
0000375C  6100 F8A8                984      bsr     end             Quit if the user enters 2
00003760                           985  
00003760                           986  endl:
00003760  48E7 8040                987      movem.l D0/A1,-(A7)
00003764  303C 000E                988      move    #14,D0
00003768  43F9 000042DA            989      lea     crlf,A1
0000376E  4E4F                     990      trap    #15
00003770  4CDF 0201                991      movem.l (A7)+,D0/A1
00003774  4E75                     992      rts
00003776                           993          
00003776                           994  *-------------------------------------------------------
00003776                           995  *----------------------Manage Movement------------------
00003776                           996  *-------------------------------------------------------
00003776                           997  movement:
00003776  43F9 00004AFC            998      lea     movement_msg,A1 Load the movement message
0000377C  103C 000E                999      move.b  #14,D0          Move literal 14 for display message trap command
00003780  4E4F                    1000      trap    #15             Display the loaded message
00003782                          1001  
00003782  7A05                    1002      move.l  #5,D5           Move the number 4 to D5 to tell the program how many options there are
00003784                          1003      
00003784  6100 F998               1004      bsr     input           branch to the input subroutine
00003788  6100 000C               1005      bsr     wall_collisions Branch to check wall collisions and movement
0000378C                          1006      
0000378C  B23C 0005               1007      CMP.B   #5,D1           Check the input against taking a potion
00003790  6700 04DE               1008      BEQ     take_potion     Branch to take a potion
00003794                          1009      
00003794  4E75                    1010      rts
00003796                          1011  
00003796                          1012  *-------------------------------------------------------
00003796                          1013  *-------------------Check Wall Collisions---------------
00003796                          1014  *-------------------------------------------------------
00003796                          1015  wall_collisions:
00003796                          1016      *Check collisions in the movement direction
00003796  B23C 0001               1017      CMP.B   #1,D1       Check the movement direction
0000379A  6700 001C               1018      BEQ     move_north  Branch to Display the corridor type
0000379E                          1019      
0000379E  B23C 0002               1020      CMP.B   #2,D1       Check the movement direction
000037A2  6700 005A               1021      BEQ     move_south  Branch to Display the corridor type
000037A6                          1022      
000037A6  B23C 0003               1023      CMP.B   #3,D1       Check the movement direction
000037AA  6700 0098               1024      BEQ     move_west   Branch to Display the corridor type
000037AE                          1025      
000037AE  B23C 0004               1026      CMP.B   #4,D1       Check the movement direction
000037B2  6700 00D4               1027      BEQ     move_east   Branch to Display the corridor type
000037B6                          1028      
000037B6  4E75                    1029      rts
000037B8                          1030      
000037B8                          1031  move_north:
000037B8                          1032      *Check if the tile is any of the corridor types with a wall at the top
000037B8  0C16 0002               1033      CMP.B   #2,(A6)
000037BC  6700 010E               1034      BEQ     movement_blocked
000037C0  0C16 0003               1035      CMP.B   #3,(A6)
000037C4  6700 0106               1036      BEQ     movement_blocked
000037C8  0C16 0006               1037      CMP.B   #6,(A6)
000037CC  6700 00FE               1038      BEQ     movement_blocked
000037D0  0C16 0007               1039      CMP.B   #7,(A6)
000037D4  6700 00F6               1040      BEQ     movement_blocked
000037D8  0C16 000B               1041      CMP.B   #11,(A6)
000037DC  6700 00EE               1042      BEQ     movement_blocked
000037E0  0C16 000C               1043      CMP.B   #12,(A6)
000037E4  6700 00E6               1044      BEQ     movement_blocked
000037E8  0C16 000D               1045      CMP.B   #13,(A6)
000037EC  6700 00DE               1046      BEQ     movement_blocked
000037F0                          1047      
000037F0  31CE 5FF6               1048      move.w  A6,PLA_P_POS        Move the player's previous location to a memory address for storage
000037F4  9CFC 0010               1049      sub     #16,A6              Move the player north
000037F8                          1050      
000037F8  6100 04A8               1051      bsr     decrement_torch     Remove one from the player's torch life
000037FC                          1052      
000037FC  4E75                    1053      rts
000037FE                          1054      
000037FE                          1055  move_south:
000037FE                          1056      *Check if the tile is any of the corridor types with a wall at the bottom
000037FE  0C16 0002               1057      CMP.B   #2,(A6)
00003802  6700 00C8               1058      BEQ     movement_blocked
00003806  0C16 0004               1059      CMP.B   #4,(A6)
0000380A  6700 00C0               1060      BEQ     movement_blocked
0000380E  0C16 0005               1061      CMP.B   #5,(A6)
00003812  6700 00B8               1062      BEQ     movement_blocked
00003816  0C16 0009               1063      CMP.B   #9,(A6)
0000381A  6700 00B0               1064      BEQ     movement_blocked
0000381E  0C16 000B               1065      CMP.B   #11,(A6)
00003822  6700 00A8               1066      BEQ     movement_blocked
00003826  0C16 000D               1067      CMP.B   #13,(A6)
0000382A  6700 00A0               1068      BEQ     movement_blocked
0000382E  0C16 000E               1069      CMP.B   #14,(A6)
00003832  6700 0098               1070      BEQ     movement_blocked
00003836                          1071      
00003836  31CE 5FF6               1072      move.w  A6,PLA_P_POS        Move the player's previous location to a memory address for storage
0000383A  DCFC 0010               1073      add     #16,A6              Move the player south
0000383E                          1074      
0000383E  6100 0462               1075      bsr     decrement_torch     Remove one from the player's torch life
00003842                          1076      
00003842  4E75                    1077      rts
00003844                          1078  
00003844                          1079  move_west:
00003844                          1080      *Check if the tile is any of the corridor types with a wall to the left
00003844  0C16 0001               1081      CMP.B   #1,(A6)
00003848  6700 0082               1082      BEQ     movement_blocked
0000384C  0C16 0003               1083      CMP.B   #3,(A6)
00003850  6700 007A               1084      BEQ     movement_blocked
00003854  0C16 0004               1085      CMP.B   #4,(A6)
00003858  6700 0072               1086      BEQ     movement_blocked
0000385C  0C16 0008               1087      CMP.B   #8,(A6)
00003860  6700 006A               1088      BEQ     movement_blocked
00003864  0C16 000B               1089      CMP.B   #11,(A6)
00003868  6700 0062               1090      BEQ     movement_blocked
0000386C  0C16 000C               1091      CMP.B   #12,(A6)
00003870  6700 005A               1092      BEQ     movement_blocked
00003874  0C16 000E               1093      CMP.B   #14,(A6)
00003878  6700 0052               1094      BEQ     movement_blocked
0000387C                          1095      
0000387C  31CE 5FF6               1096      move.w  A6,PLA_P_POS        Move the player's previous location to a memory address for storage
00003880  534E                    1097      sub     #1,A6               Move the player west
00003882                          1098      
00003882  6100 041E               1099      bsr     decrement_torch     Remove one from the player's torch life
00003886                          1100      
00003886  4E75                    1101      rts
00003888                          1102      
00003888                          1103  move_east:
00003888                          1104      *Check if the tile is any of the corridor types with a wall to the right
00003888  0C16 0001               1105      CMP.B   #1,(A6)
0000388C  6700 003E               1106      BEQ     movement_blocked
00003890  0C16 0005               1107      CMP.B   #5,(A6)
00003894  6700 0036               1108      BEQ     movement_blocked
00003898  0C16 0006               1109      CMP.B   #6,(A6)
0000389C  6700 002E               1110      BEQ     movement_blocked
000038A0  0C16 000A               1111      CMP.B   #10,(A6)
000038A4  6700 0026               1112      BEQ     movement_blocked
000038A8  0C16 000C               1113      CMP.B   #12,(A6)
000038AC  6700 001E               1114      BEQ     movement_blocked
000038B0  0C16 000D               1115      CMP.B   #13,(A6)
000038B4  6700 0016               1116      BEQ     movement_blocked
000038B8  0C16 000E               1117      CMP.B   #14,(A6)
000038BC  6700 000E               1118      BEQ     movement_blocked
000038C0                          1119      
000038C0  31CE 5FF6               1120      move.w  A6,PLA_P_POS        Move the player's previous location to a memory address for storage
000038C4  524E                    1121      add     #1,A6               Move the player east
000038C6                          1122      
000038C6  6100 03DA               1123      bsr     decrement_torch     Remove one from the player's torch life
000038CA                          1124      
000038CA  4E75                    1125      rts
000038CC                          1126  
000038CC                          1127  movement_blocked:
000038CC  43F9 00004B8E           1128      lea     movement_blocked_msg,A1 Load the message
000038D2  103C 000E               1129      move.b  #14,D0                  Move the trap command to display a message
000038D6  4E4F                    1130      trap    #15                     Display the movement blocked message
000038D8  6100 0362               1131      bsr     press_continue          Pause the game until a key is pressed
000038DC                          1132      
000038DC  4E75                    1133      rts                             Return from the subroutine
000038DE                          1134      
000038DE                          1135  *-------------------------------------------------------
000038DE                          1136  *---------------------Manage Combat---------------------
000038DE                          1137  *-------------------------------------------------------
000038DE                          1138  combat:
000038DE  6100 FE80               1139      bsr endl                Break to a new line
000038E2                          1140  
000038E2  43F9 00004C1B           1141      lea     combat_msg,A1   Load the combat message
000038E8  103C 000E               1142      move.b  #14,D0          Move literal 14 for display message trap command
000038EC  4E4F                    1143      trap    #15             Display the loaded message
000038EE                          1144  
000038EE  7A05                    1145      move.l  #5,D5           Move the number 4 to D5 to tell the program how many options there are
000038F0  6100 F82C               1146      bsr     input           branch to the input subroutine
000038F4                          1147      
000038F4  B23C 0001               1148      CMP.B   #1,D1           Compare input with number literal 1
000038F8  6700 0024               1149      BEQ     block_counter   Branch to block/counter subroutine
000038FC  B23C 0002               1150      CMP.B   #2,D1           Compare input with number literal 2
00003900  6700 0036               1151      BEQ     cast_magic      Branch to cast magic subroutine
00003904  B23C 0003               1152      CMP.B   #3,D1           Compare input with number literal 3
00003908  6700 0048               1153      BEQ     melee_attack    Branch to melee subroutine
0000390C  B23C 0004               1154      CMP.B   #4,D1           Compare input with number literal 4
00003910  6700 005A               1155      BEQ     try_run         Branch to try run subroutine
00003914  B23C 0005               1156      CMP.B   #5,D1           Compare input with number literal 5
00003918  6700 0356               1157      BEQ     take_potion     Branch to take potion subroutine
0000391C                          1158      
0000391C  4E75                    1159      rts
0000391E                          1160      
0000391E                          1161  block_counter:
0000391E  6100 0334               1162      bsr     random_number       Get a random number 1-100
00003922                          1163      
00003922  B47C 0021               1164      CMP.W   #33,D2              Compare random with #33
00003926  6F00 008E               1165      BLE     both_block          Enemy tries to block - attack failed
0000392A  B47C 0042               1166      CMP.W   #66,D2              Compare random with #66
0000392E  6F00 0120               1167      BLE     hit_by_magic        Enemy casts magic - player takes damage      
00003932  6E00 00E8               1168      BGT     hit_against_melee   Enemy tried to lunge - enemy takes damage
00003936                          1169      
00003936  4E75                    1170      rts                         Return from subroutine
00003938                          1171      
00003938                          1172  cast_magic:
00003938  6100 031A               1173      bsr     random_number       Get a random number 1-100
0000393C                          1174  
0000393C  B47C 0021               1175      CMP.W   #33,D2              Compare random with #33
00003940  6F00 00AA               1176      BLE     hit_against_block    Enemy blocks - enemy takes damage
00003944  B47C 0042               1177      CMP.W   #66,D2              Compare random with #66
00003948  6F00 007E               1178      BLE     both_cast_magic     Enemy casts magic - attack fails     
0000394C  6E00 011E               1179      BGT     hit_by_melee        Enemy lunges forward - player takes damage
00003950                          1180      
00003950  4E75                    1181      rts                         Return from subroutine
00003952                          1182  
00003952                          1183  melee_attack:
00003952  6100 0300               1184      bsr     random_number       Get a random number 1-100
00003956                          1185  
00003956  B47C 0021               1186      CMP.W   #33,D2              Compare random with #33
0000395A  6F00 00D8               1187      BLE     hit_by_counter      Enemy blocks and counters - player takes damage
0000395E  B47C 0042               1188      CMP.W   #66,D2              Compare random with #66
00003962  6F00 00A0               1189      BLE     hit_against_magic   Enemy casts magic - player takes damage     
00003966  6E00 0072               1190      BGT     both_melee          Enemy lunges forward - attack fails
0000396A                          1191      
0000396A  4E75                    1192      rts                         Return from subroutine
0000396C                          1193  
0000396C                          1194  try_run:
0000396C  6100 02E6               1195      bsr     random_number       Get a random number
00003970                          1196      
00003970  B47C 0028               1197      CMP.W   #40,D2              Compare the random number to 40
00003974  6D00 0006               1198      BLT     escape_attack       If the random number is less than 40 the player escapes
00003978  6C00 0020               1199      BGE     fail_escape         If the random number is more than 40 the player gets damaged
0000397C                          1200      
0000397C                          1201  escape_attack:
0000397C  3638 5FF6               1202      move.w  PLA_P_POS,D3    Move the player's previous position to D3 to avoid treating it as a negative number
00003980  2C43                    1203      move.l  D3,A6           Move the player to their position before entering the battle
00003982  11FC 0005 5FF3          1204      move.b  #5,GAME_STATE   Switch game state
00003988                          1205      
00003988  43F9 00004C7D           1206      lea     escape_msg,A1   Load escape message
0000398E  103C 000E               1207      move.b  #14,D0          Move literal for trap command
00003992  4E4F                    1208      trap    #15             Trap 15 to display messgae
00003994                          1209      
00003994  6100 02A6               1210      bsr     press_continue  Pause until the player presses to continue
00003998                          1211      
00003998  4E75                    1212      rts                     Return from subroutine
0000399A                          1213      
0000399A                          1214  fail_escape:
0000399A  43F9 00004C98           1215      lea     fail_escape_msg,A1  Load fail escape message
000039A0  103C 000E               1216      move.b  #14,D0              Move literal for trap command
000039A4  4E4F                    1217      trap    #15                 Trap 15 to display message
000039A6                          1218      
000039A6  524D                    1219      add.w   #DAMAGE,A5           Move the enemy pointer to its damage value
000039A8  1A15                    1220      move.b  (A5),D5             Store the damage value in D5
000039AA  534D                    1221      sub.w   #DAMAGE,A5           Move the enemy pointer back to the enemy health/root
000039AC  9B38 5FF0               1222      sub.b   D5,PLAYER           Remove the enemy's damage from the player's health
000039B0                          1223      
000039B0  6100 028A               1224      bsr     press_continue      Pause until the player presses to continue
000039B4  4E75                    1225      rts
000039B6                          1226      
000039B6                          1227  both_block:
000039B6  103C 000E               1228      move.b  #14,D0
000039BA  43F9 00004CD3           1229      lea     both_block_msg,A1
000039C0  4E4F                    1230      trap    #15
000039C2                          1231      
000039C2  6100 0278               1232      bsr     press_continue
000039C6  4E75                    1233      rts
000039C8                          1234      
000039C8                          1235  both_cast_magic:
000039C8  103C 000E               1236      move.b  #14,D0
000039CC  43F9 00004CF8           1237      lea     both_cast_magic_msg,A1
000039D2  4E4F                    1238      trap    #15
000039D4                          1239      
000039D4  6100 0266               1240      bsr     press_continue
000039D8  4E75                    1241      rts
000039DA                          1242  
000039DA                          1243  both_melee:
000039DA  103C 000E               1244      move.b  #14,D0
000039DE  43F9 00004D4D           1245      lea     both_melee_msg,A1
000039E4  4E4F                    1246      trap    #15  
000039E6                          1247      
000039E6  6100 0254               1248      bsr     press_continue
000039EA  4E75                    1249      rts
000039EC                          1250  
000039EC                          1251  hit_against_block:
000039EC  103C 000E               1252      move.b  #14,D0
000039F0  43F9 00004D96           1253      lea     hit_against_block_msg,A1
000039F6  4E4F                    1254      trap    #15  
000039F8                          1255      
000039F8  1A38 5FF1               1256      move.b  PLA_DAMAGE,D5       Store the player damage value in D5
000039FC  9B15                    1257      sub.b   D5,(A5)           Remove the player's damage from the enemy's health
000039FE                          1258      
000039FE  6100 023C               1259      bsr     press_continue
00003A02  4E75                    1260      rts
00003A04                          1261  
00003A04                          1262  hit_against_magic:
00003A04  103C 000E               1263      move.b  #14,D0
00003A08  43F9 00004DDE           1264      lea     hit_against_magic_msg,A1
00003A0E  4E4F                    1265      trap    #15
00003A10                          1266      
00003A10  1A38 5FF1               1267      move.b  PLA_DAMAGE,D5       Store the player damage value in D5
00003A14  9B15                    1268      sub.b   D5,(A5)           Remove the player's damage from the enemy's health
00003A16                          1269      
00003A16  6100 0224               1270      bsr     press_continue
00003A1A  4E75                    1271      rts
00003A1C                          1272  
00003A1C                          1273  hit_against_melee:
00003A1C  103C 000E               1274      move.b  #14,D0
00003A20  43F9 00004E42           1275      lea     hit_against_melee_msg,A1
00003A26  4E4F                    1276      trap    #15
00003A28                          1277      
00003A28  1A38 5FF1               1278      move.b  PLA_DAMAGE,D5       Store the player damage value in D5
00003A2C  9B15                    1279      sub.b   D5,(A5)           Remove the player's damage from the enemy's health
00003A2E                          1280      
00003A2E  6100 020C               1281      bsr     press_continue
00003A32  4E75                    1282      rts
00003A34                          1283  
00003A34                          1284  hit_by_counter:
00003A34  103C 000E               1285      move.b  #14,D0
00003A38  43F9 00004E98           1286      lea     hit_by_counter_msg,A1
00003A3E  4E4F                    1287      trap    #15  
00003A40                          1288      
00003A40  524D                    1289      add.w   #DAMAGE,A5           Move the enemy pointer to its damage value
00003A42  1A15                    1290      move.b  (A5),D5             Store the damage value in D5
00003A44  534D                    1291      sub.w   #DAMAGE,A5           Move the enemy pointer back to the enemy health/root
00003A46  9B38 5FF0               1292      sub.b   D5,PLAYER           Remove the enemy's damage from the player's health
00003A4A                          1293      
00003A4A  6100 01F0               1294      bsr     press_continue
00003A4E  4E75                    1295      rts
00003A50                          1296  
00003A50                          1297  hit_by_magic:
00003A50  103C 000E               1298      move.b  #14,D0
00003A54  43F9 00004EFB           1299      lea     hit_by_magic_msg,A1
00003A5A  4E4F                    1300      trap    #15  
00003A5C                          1301      
00003A5C  524D                    1302      add.w   #DAMAGE,A5           Move the enemy pointer to its damage value
00003A5E  1A15                    1303      move.b  (A5),D5             Store the damage value in D5
00003A60  534D                    1304      sub.w   #DAMAGE,A5           Move the enemy pointer back to the enemy health/root
00003A62  9B38 5FF0               1305      sub.b   D5,PLAYER           Remove the enemy's damage from the player's health
00003A66                          1306      
00003A66  6100 01D4               1307      bsr     press_continue
00003A6A  4E75                    1308      rts
00003A6C                          1309  
00003A6C                          1310  hit_by_melee:
00003A6C  103C 000E               1311      move.b  #14,D0
00003A70  43F9 00004F6B           1312      lea     hit_by_melee_msg,A1
00003A76  4E4F                    1313      trap    #15
00003A78                          1314      
00003A78  524D                    1315      add.w   #DAMAGE,A5           Move the enemy pointer to its damage value
00003A7A  1A15                    1316      move.b  (A5),D5             Store the damage value in D5
00003A7C  534D                    1317      sub.w   #DAMAGE,A5           Move the enemy pointer back to the enemy health/root
00003A7E  9B38 5FF0               1318      sub.b   D5,PLAYER           Remove the enemy's damage from the player's health
00003A82                          1319      
00003A82  6100 01B8               1320      bsr     press_continue
00003A86  4E75                    1321      rts
00003A88                          1322  
00003A88                          1323  *-------------------------------------------------------
00003A88                          1324  *----------------------Shop State-----------------------
00003A88                          1325  *-------------------------------------------------------
00003A88                          1326  shop:
00003A88  43F9 00005199           1327      lea     shop_msg,A1     Load the shop message
00003A8E  103C 000E               1328      move.b  #14,D0          Move the number literal 14 to D0 for trap command
00003A92  4E4F                    1329      trap    #15             Display the loaded message
00003A94                          1330  
00003A94  7A05                    1331      move.l  #5,D5           Move the number 4 to D5 to tell the program how many options there are
00003A96  6100 F686               1332      bsr     input           branch to the input subroutine
00003A9A                          1333      
00003A9A  B23C 0001               1334      CMP.B   #1,D1           Compare input with number literal 1
00003A9E  6700 0024               1335      BEQ     buy_potion      Branch to buy potion subroutine
00003AA2  B23C 0002               1336      CMP.B   #2,D1           Compare input with number literal 2
00003AA6  6700 0052               1337      BEQ     buy_key         Branch to buy key subroutine
00003AAA  B23C 0003               1338      CMP.B   #3,D1           Compare input with number literal 3
00003AAE  6700 0082               1339      BEQ     buy_torch       Branch to buy torch subroutine
00003AB2  B23C 0004               1340      CMP.B   #4,D1           Compare input with number literal 4
00003AB6  6700 00B4               1341      BEQ     upgrade_dmg     Branch to buy damage upgrade subroutine
00003ABA  B23C 0005               1342      CMP.B   #5,D1           Compare input with number literal 5
00003ABE  6700 00E4               1343      BEQ     leave_shop      Branch to leave shop subroutine
00003AC2                          1344  
00003AC2  4E75                    1345      rts                     Return from subroutine
00003AC4                          1346      
00003AC4                          1347  buy_potion:
00003AC4  0C38 0005 5FF8          1348      CMP.B   #POTION_PRICE,PLA_GOLD  Check if the player has money for a potion
00003ACA  6D00 00FA               1349      BLT     no_money                If not enough money branch to no money subroutine
00003ACE                          1350      
00003ACE  544D                    1351      add.w   #S_POTIONS,A5           Move the shop pointer to the potions
00003AD0  0C15 0000               1352      CMP.B   #0,(A5)                 Check that the shop still has potions left
00003AD4  6F00 0106               1353      BLE     no_shop_potions         If no potions left branch to no shop potions subroutine
00003AD8                          1354      
00003AD8  5B38 5FF8               1355      sub.b   #POTION_PRICE,PLA_GOLD  Remove the potion price from the player's gold
00003ADC  5315                    1356      sub.b   #1,(A5)                 Remove one potion from the shop
00003ADE  5238 5FF9               1357      add.b   #1,PLA_POTIONS          Add one potion to the player's inventory
00003AE2                          1358      
00003AE2  554D                    1359      sub.w   #S_POTIONS,A5           Move the shop pointer back to root
00003AE4                          1360      
00003AE4  6100 FC7A               1361      bsr     endl                    Break to new line
00003AE8                          1362      
00003AE8  43F9 0000522B           1363      lea     buy_item_msg,A1         Load the buy item message into A1
00003AEE  103C 000E               1364      move.b  #14,D0                  Move the number literal 14 to D0 for trap command
00003AF2  4E4F                    1365      trap    #15                     Display the loaded message
00003AF4                          1366      
00003AF4  6100 0146               1367      bsr     press_continue          Pause for user input
00003AF8                          1368      
00003AF8  4E75                    1369      rts                             Return from subroutine
00003AFA                          1370      
00003AFA                          1371  buy_key:
00003AFA  0C38 000F 5FF8          1372      CMP.B   #KEY_PRICE,PLA_GOLD     Check if the player has money for a key
00003B00  6D00 00C4               1373      BLT     no_money                If not enough money branch to no money subroutine
00003B04                          1374      
00003B04  564D                    1375      add.w   #S_KEYS,A5              Move the shop pointer to the keys
00003B06  0C15 0000               1376      CMP.B   #0,(A5)                 Check that the shop still has keys left
00003B0A  6F00 00E8               1377      BLE     no_shop_keys            If no keys left branch to no shop keys subroutine
00003B0E                          1378      
00003B0E  0438 000F 5FF8          1379      sub.b   #KEY_PRICE,PLA_GOLD     Remove the key price from the player's gold
00003B14  5315                    1380      sub.b   #1,(A5)                 Remove one key from the shop
00003B16  5238 5FFA               1381      add.b   #1,PLA_KEYS             Add one key to the player's inventory
00003B1A                          1382      
00003B1A  574D                    1383      sub.w   #S_KEYS,A5              Move the shop pointer back to root
00003B1C                          1384      
00003B1C  6100 FC42               1385      bsr     endl                    Break to new line
00003B20                          1386      
00003B20  43F9 0000522B           1387      lea     buy_item_msg,A1         Load the buy item message into A1
00003B26  103C 000E               1388      move.b  #14,D0                  Move the number literal 14 to D0 for trap command
00003B2A  4E4F                    1389      trap    #15                     Display the loaded message
00003B2C                          1390      
00003B2C  6100 010E               1391      bsr     press_continue          Pause for user input
00003B30                          1392      
00003B30  4E75                    1393      rts                             Return from subroutine
00003B32                          1394      
00003B32                          1395  buy_torch:
00003B32  0C38 000A 5FF8          1396      CMP.B   #TORCH_PRICE,PLA_GOLD   Check if the player has money for a torch
00003B38  6D00 008C               1397      BLT     no_money                If not enough money branch to no money subroutine
00003B3C                          1398      
00003B3C  584D                    1399      add.w   #S_TORCHES,A5           Move the shop pointer to the torches
00003B3E  0C15 0000               1400      CMP.B   #0,(A5)                 Check that the shop still has torches left
00003B42  6F00 00C8               1401      BLE     no_shop_torches         If no torches left branch to no shop torches subroutine
00003B46                          1402      
00003B46  0438 000A 5FF8          1403      sub.b   #TORCH_PRICE,PLA_GOLD   Remove the torch price from the player's gold
00003B4C  5315                    1404      sub.b   #1,(A5)                 Remove one torch from the shop
00003B4E  0638 000F 5FFB          1405      add.b   #LIFE_PER_TORCH,PLA_TORCH           Add ten to the player's torches life
00003B54                          1406      
00003B54  594D                    1407      sub.w   #S_TORCHES,A5           Move the shop pointer back to root
00003B56                          1408      
00003B56  6100 FC08               1409      bsr     endl                    Break to new line
00003B5A                          1410      
00003B5A  43F9 0000522B           1411      lea     buy_item_msg,A1         Load the buy item message into A1
00003B60  103C 000E               1412      move.b  #14,D0                  Move the number literal 14 to D0 for trap command
00003B64  4E4F                    1413      trap    #15                     Display the loaded message
00003B66                          1414      
00003B66  6100 00D4               1415      bsr     press_continue          Pause for user input
00003B6A                          1416      
00003B6A  4E75                    1417      rts                             Return from subroutine
00003B6C                          1418      
00003B6C                          1419  upgrade_dmg:
00003B6C  0C38 0014 5FF8          1420      CMP.B   #DAMAGE_UP_PRICE,PLA_GOLD   Check if the player has money for a damage upgrade
00003B72  6D00 0052               1421      BLT     no_money                    If not enough money branch to no money subroutine
00003B76                          1422      
00003B76  5A4D                    1423      add.w   #S_DAMAGE_IN,A5         Move the shop pointer to the damage upgrades
00003B78  0C15 0000               1424      CMP.B   #0,(A5)                 Check that the shop still has damage upgrades left
00003B7C  6F00 00A6               1425      BLE     no_shop_damage_up       If no damage upgrades left branch to no shop torches subroutine
00003B80                          1426      
00003B80  0438 0014 5FF8          1427      sub.b   #DAMAGE_UP_PRICE,PLA_GOLD   Remove the damage upgrade price from the player's gold
00003B86  5315                    1428      sub.b   #1,(A5)                     Remove one damage upgrade from the shop
00003B88  5238 5FF1               1429      add.b   #1,PLA_DAMAGE               Add one to the player's damage value
00003B8C                          1430      
00003B8C  5B4D                    1431      sub.w   #S_DAMAGE_IN,A5         Move the shop pointer back to root
00003B8E                          1432      
00003B8E  6100 FBD0               1433      bsr     endl                    Break to new line
00003B92                          1434          
00003B92  43F9 0000522B           1435      lea     buy_item_msg,A1         Load the buy item message into A1
00003B98  103C 000E               1436      move.b  #14,D0                  Move the number literal 14 to D0 for trap command
00003B9C  4E4F                    1437      trap    #15                     Display the loaded message
00003B9E                          1438      
00003B9E  6100 009C               1439      bsr     press_continue          Pause for user input
00003BA2                          1440      
00003BA2  4E75                    1441      rts                             Return from subroutine
00003BA4                          1442      
00003BA4                          1443  leave_shop:
00003BA4  6100 FBBA               1444      bsr     endl                Break to new line
00003BA8                          1445  
00003BA8  3638 5FF6               1446      move.w  PLA_P_POS,D3        Move the player's previous position to D3 to avoid treating it as a negative number
00003BAC  2C43                    1447      move.l  D3,A6               Move the player to their position before entering the shop
00003BAE  11FC 0005 5FF3          1448      move.b  #5,GAME_STATE       Switch game state to movement
00003BB4                          1449      
00003BB4  43F9 00005205           1450      lea     leave_shop_msg,A1   Load escape message
00003BBA  103C 000E               1451      move.b  #14,D0              Move literal for trap command
00003BBE  4E4F                    1452      trap    #15                 Trap 15 to display messgae
00003BC0                          1453      
00003BC0  6100 007A               1454      bsr     press_continue      Pause until the player presses to continue
00003BC4  4E75                    1455      rts                         Return from subroutine
00003BC6                          1456      
00003BC6                          1457  no_money:
00003BC6  6100 FB98               1458      bsr     endl            New line
00003BCA                          1459      
00003BCA  43F9 00005259           1460      lea     no_money_msg,A1 Load the no money message
00003BD0  103C 000E               1461      move.b  #14,D0          Move the number literal 14 to D0 for trap command
00003BD4  4E4F                    1462      trap    #15             Display the loaded message
00003BD6                          1463      
00003BD6  6100 0064               1464      bsr     press_continue  Wait for player input
00003BDA  4E75                    1465      rts                     Return from subroutine
00003BDC                          1466      
00003BDC                          1467  no_shop_potions:
00003BDC  6100 FB82               1468      bsr     endl            New line
00003BE0                          1469  
00003BE0  43F9 00005279           1470      lea     no_item_msg,A1  Load the no money message
00003BE6  103C 000E               1471      move.b  #14,D0          Move the number literal 14 to D0 for trap command
00003BEA  4E4F                    1472      trap    #15             Display the loaded message
00003BEC  554D                    1473      sub.w   #S_POTIONS,A5   Move the shop pointer back to root
00003BEE                          1474      
00003BEE  6100 004C               1475      bsr     press_continue  Wait for player input
00003BF2  4E75                    1476      rts                     Return from subroutine
00003BF4                          1477      
00003BF4                          1478  no_shop_keys:
00003BF4  6100 FB6A               1479      bsr     endl            New line
00003BF8                          1480  
00003BF8  43F9 00005279           1481      lea     no_item_msg,A1  Load the no money message
00003BFE  103C 000E               1482      move.b  #14,D0          Move the number literal 14 to D0 for trap command
00003C02  4E4F                    1483      trap    #15             Display the loaded message
00003C04  574D                    1484      sub.w   #S_KEYS,A5      Move the shop pointer back to root
00003C06                          1485      
00003C06  6100 0034               1486      bsr     press_continue  Wait for player input
00003C0A  4E75                    1487      rts                     Return from subroutine
00003C0C                          1488      
00003C0C                          1489  no_shop_torches:
00003C0C  6100 FB52               1490      bsr     endl            New line
00003C10                          1491  
00003C10  43F9 00005279           1492      lea     no_item_msg,A1  Load the no money message
00003C16  103C 000E               1493      move.b  #14,D0          Move the number literal 14 to D0 for trap command
00003C1A  4E4F                    1494      trap    #15             Display the loaded message
00003C1C  594D                    1495      sub.w   #S_TORCHES,A5   Move the shop pointer back to root
00003C1E                          1496      
00003C1E  6100 001C               1497      bsr     press_continue  Wait for player input
00003C22  4E75                    1498      rts                     Return from subroutine
00003C24                          1499  
00003C24                          1500  no_shop_damage_up:
00003C24  6100 FB3A               1501      bsr     endl            New line
00003C28                          1502  
00003C28  43F9 00005279           1503      lea     no_item_msg,A1  Load the no money message
00003C2E  103C 000E               1504      move.b  #14,D0          Move the number literal 14 to D0 for trap command
00003C32  4E4F                    1505      trap    #15             Display the loaded message
00003C34  5B4D                    1506      sub.w   #S_DAMAGE_IN,A5 Move the shop pointer back to root
00003C36                          1507      
00003C36  6100 0004               1508      bsr     press_continue  Wait for player input
00003C3A  4E75                    1509      rts                     Return from subroutine
00003C3C                          1510  
00003C3C                          1511  *-------------------------------------------------------
00003C3C                          1512  *-------------------Misc Subroutines--------------------
00003C3C                          1513  *-------------------------------------------------------
00003C3C                          1514  press_continue:
00003C3C  6100 FB22               1515      bsr     endl
00003C40                          1516  
00003C40  43F9 00004BA9           1517      lea     continue_msg,A1 Load message into A1
00003C46  103C 000E               1518      move.b  #14,D0          Move the trap command to display a message
00003C4A  4E4F                    1519      trap    #15             display the "press any ket to continue" text
00003C4C                          1520      
00003C4C  103C 0004               1521      move.b  #4,D0           Move the trap command to take input
00003C50  4E4F                    1522      trap    #15             take input to freeze the game
00003C52  4E75                    1523      rts                     Return from the 'press continue' subroutine
00003C54                          1524      
00003C54                          1525  random_number:              *Psuedo random number generator, courtesy of Pdraig
00003C54  103C 0008               1526      move.b  #8,D0
00003C58  4E4F                    1527      trap    #15
00003C5A  C2BC 005FFFFF           1528      and.l   #$5FFFFF,d1     prevent overflow in divu
00003C60  82FC 0064               1529      divu    #100,D1         time count / 100
00003C64  4841                    1530      swap    D1              swap upper and lower words of D1 to put remainder in low word
00003C66  5241                    1531      addq.w  #1,D1           d1.w contains number from 1 to 100
00003C68  3401                    1532      move    D1,D2           d2 = d1
00003C6A  4281                    1533      clr.l   D1
00003C6C                          1534      
00003C6C  4E75                    1535      rts                     Returns from random generation subroutine
00003C6E                          1536      
00003C6E                          1537  return:   *Subroutine to branch to to break out of a subroutine when a condition is met
00003C6E  4E75                    1538      rts
00003C70                          1539      
00003C70                          1540  take_potion:
00003C70  0C38 0000 5FF9          1541      CMP.B   #0,PLA_POTIONS      Check if the player has potions to drink
00003C76  6F00 001A               1542      BLE     no_potions          If the potions are zero or below branch to no_potions
00003C7A                          1543      
00003C7A  5638 5FF0               1544      add.b   #3,PLAYER           Add 3 to the player's health
00003C7E  5338 5FF9               1545      sub.b   #1,PLA_POTIONS      Remove one potion
00003C82                          1546      
00003C82  43F9 00005113           1547      lea     take_potion_msg,A1  Load the take potion message
00003C88  103C 000E               1548      move.b  #14,D0              Move the number literal 14 to D0 for trap command
00003C8C  4E4F                    1549      trap    #15                 Display the loaded message
00003C8E                          1550      
00003C8E  61AC                    1551      bsr     press_continue      Wait for player input
00003C90                          1552      
00003C90  4E75                    1553      rts                         Return from subroutine
00003C92                          1554  
00003C92                          1555  no_potions:
00003C92  43F9 0000514D           1556      lea     no_potions_msg,A1   Load the no potions message
00003C98  103C 000E               1557      move.b  #14,D0              Move the number literal 14 to D0 for trap command
00003C9C  4E4F                    1558      trap    #15                 Display the loaded message
00003C9E                          1559      
00003C9E  619C                    1560      bsr     press_continue      Wait for player input
00003CA0                          1561      
00003CA0  4E75                    1562      rts                         Return from subroutine
00003CA2                          1563      
00003CA2                          1564  decrement_torch:
00003CA2  0C38 0000 5FFB          1565      CMP.B   #0,PLA_TORCH    Compare the torch life to 0
00003CA8  6FC4                    1566      BLE     return          If it's less than or equalt to zero, return
00003CAA  5338 5FFB               1567      sub.b   #1,PLA_TORCH    Decrement by one if it's above zero
00003CAE  4E75                    1568      rts                     Return from subroutine
00003CB0                          1569      
00003CB0                          1570  change_font_colour:        * Changes the font colour to the colour loaded in D1
00003CB0  103C 0015               1571      move.b  #21,D0      Move #21 to D0 for trap command 21
00003CB4  243C 01090000           1572      move.l  #FONT,D2    Move the font to D2
00003CBA  4E4F                    1573      trap    #15         Set the colour
00003CBC  4281                    1574      clr.l   D1          Clear D1 for later use
00003CBE  4282                    1575      clr.l   D2          Clear D2 for later use
00003CC0  4E75                    1576      rts                 Return from subroutine
00003CC2                          1577      
00003CC2                          1578  *-------------------------------------------------------
00003CC2                          1579  *----------------------Draw loop------------------------
00003CC2                          1580  *-------------------------------------------------------
00003CC2                          1581  draw_loop:
00003CC2  45F9 00008080           1582      lea     MAP_START_POINT,A2     Load starting memory location into A7
00003CC8  1C3C 0000               1583      move.b  #0,D6           Data register used for rows
00003CCC  1E3C 0000               1584      move.b  #0,D7           Data register used for columns
00003CD0  7200                    1585      move.l  #0,D1           Clear the D1 data register
00003CD2                          1586      
00003CD2  6100 0004               1587      bsr     loop_rows       Loop for every row
00003CD6  4E75                    1588      rts
00003CD8                          1589      
00003CD8                          1590  loop_rows:
00003CD8  BC7C 000F               1591      CMP     #MAP_LENGTH,D6          Check the rows don't go out of bounds
00003CDC  6E90                    1592      BGT     return          If the rows are greater than 22 end the loop
00003CDE                          1593      
00003CDE  1E3C 0000               1594      move.b  #0,D7           Reset to column 0
00003CE2  6100 000A               1595      bsr     loop_columns    Loop for every column
00003CE6                          1596      
00003CE6  5206                    1597      add.b   #1,D6           Add to the rows
00003CE8                          1598      
00003CE8  6100 FA76               1599      bsr     endl            Break to the next line
00003CEC  60EA                    1600      bra     loop_rows       Loop through the rows again
00003CEE                          1601      
00003CEE                          1602  loop_columns:
00003CEE  BE3C 000F               1603      CMP.B   #15,D7              Check the rows don't go out of bounds
00003CF2  6E00 FF7A               1604      BGT     return              If the rows are greater than 22 end the loop
00003CF6                          1605      
00003CF6  6100 0018               1606      bsr     draw_tile           Draw the current tile
00003CFA  6100 00BE               1607      bsr     check_for_player    Draw the player in the current tile if they're there
00003CFE  6100 0102               1608      bsr     check_for_enemies   Draw an enemy in the current tile if they is one there
00003D02  6100 01E0               1609      bsr     check_for_win_point Draw the win point in the current tile if it's there
00003D06  6100 0170               1610      bsr     check_for_shops     Draw a shop in the current tile if there is one
00003D0A                          1611      
00003D0A  5207                    1612      add.b   #1,D7               Add to the column count
00003D0C  524A                    1613      add     #1,A2               Move to the next memory location
00003D0E  60DE                    1614      bra     loop_columns        Loop the columns again
00003D10                          1615      
00003D10                          1616  *-------------------------------------------------------
00003D10                          1617  *----------------------Draw tile------------------------
00003D10                          1618  *-------------------------------------------------------
00003D10                          1619  *Draws the tile at the address in the address register A2
00003D10                          1620  draw_tile:
00003D10  0C12 00FF               1621      CMP.B   #255,(A2)           Check if the value is undifined
00003D14  6700 005E               1622      BEQ     draw_blocked_tile   Draw the blank tile
00003D18                          1623      
00003D18  0C12 0001               1624      CMP.B   #1,(A2)
00003D1C  6700 0064               1625      BEQ     draw_both_tile
00003D20  0C12 0003               1626      CMP.B   #3,(A2)
00003D24  6700 006A               1627      BEQ     draw_left_tile
00003D28  0C12 0004               1628      CMP.B   #4,(A2)
00003D2C  6700 0062               1629      BEQ     draw_left_tile
00003D30  0C12 0005               1630      CMP.B   #5,(A2)
00003D34  6700 0068               1631      BEQ     draw_right_tile
00003D38  0C12 0006               1632      CMP.B   #6,(A2)
00003D3C  6700 0060               1633      BEQ     draw_right_tile
00003D40  0C12 0008               1634      CMP.B   #8,(A2)
00003D44  6700 004A               1635      BEQ     draw_left_tile
00003D48  0C12 000A               1636      CMP.B   #10,(A2)
00003D4C  6700 0050               1637      BEQ     draw_right_tile
00003D50  0C12 000B               1638      CMP.B   #11,(A2)
00003D54  6700 003A               1639      BEQ     draw_left_tile
00003D58  0C12 000C               1640      CMP.B   #12,(A2)
00003D5C  6700 0024               1641      BEQ     draw_both_tile
00003D60  0C12 000D               1642      CMP.B   #13,(A2)
00003D64  6700 0038               1643      BEQ     draw_right_tile
00003D68  0C12 000E               1644      CMP.B   #14,(A2)
00003D6C  6700 0014               1645      BEQ     draw_both_tile
00003D70                          1646      
00003D70  6000 003A               1647      BRA     draw_blank_tile     Draw the blank tile
00003D74                          1648      
00003D74                          1649  draw_blocked_tile:
00003D74  43F9 00004BD7           1650      lea     blocked_tile,A1
00003D7A  103C 000E               1651      move.b  #14,D0
00003D7E  4E4F                    1652      trap    #15
00003D80  4E75                    1653      rts
00003D82                          1654      
00003D82                          1655  draw_both_tile:
00003D82  43F9 00004BCB           1656      lea     both_tile,A1
00003D88  103C 000E               1657      move.b  #14,D0
00003D8C  4E4F                    1658      trap    #15
00003D8E  4E75                    1659      rts
00003D90                          1660      
00003D90                          1661  draw_left_tile:
00003D90  43F9 00004BCF           1662      lea     left_tile,A1
00003D96  103C 000E               1663      move.b  #14,D0
00003D9A  4E4F                    1664      trap    #15
00003D9C  4E75                    1665      rts
00003D9E                          1666      
00003D9E                          1667  draw_right_tile:
00003D9E  43F9 00004BD3           1668      lea     right_tile,A1
00003DA4  103C 000E               1669      move.b  #14,D0
00003DA8  4E4F                    1670      trap    #15
00003DAA  4E75                    1671      rts
00003DAC                          1672      
00003DAC                          1673  draw_blank_tile:
00003DAC  43F9 00004BC7           1674      lea     blank_tile,A1
00003DB2  103C 000E               1675      move.b  #14,D0
00003DB6  4E4F                    1676      trap    #15
00003DB8  4E75                    1677      rts
00003DBA                          1678      
00003DBA                          1679  check_for_player:
00003DBA  B5CE                    1680      CMP.L   A6,A2
00003DBC  6700 0004               1681      BEQ     draw_player
00003DC0  4E75                    1682      rts
00003DC2                          1683      
00003DC2                          1684  draw_player:
00003DC2  323C 00FF               1685      move.w  #255,D1         Move the word #255 to D1 to set the type of trap 11
00003DC6  103C 000B               1686      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
00003DCA  4E4F                    1687      trap    #15             Trap to get the cursor position in D1
00003DCC                          1688      
00003DCC  0441 0200               1689      sub.w   #512,D1         Move the cursor back by two columns
00003DD0  4E4F                    1690      trap    #15             Set the cursor position with trap command 11
00003DD2                          1691      
00003DD2  2601                    1692      move.l  D1,D3          Move the value in D1 to D3 for storage
00003DD4                          1693      
00003DD4  223C 0000FF00           1694      move.l  #GREEN,D1       Move the colour green to D1
00003DDA  6100 FED4               1695      bsr     change_font_colour  Change the font colour
00003DDE                          1696      
00003DDE  43F9 00004BDB           1697      lea     player_mark,A1  load the player symbol
00003DE4  103C 000E               1698      move.b  #14,D0          Move #14 to D0 for trap command 14
00003DE8  4E4F                    1699      trap    #15             Draw the player mark
00003DEA                          1700      
00003DEA  223C 00FFFFFF           1701      move.l  #WHITE,D1       Move the colour white to D1
00003DF0  6100 FEBE               1702      bsr     change_font_colour  Change the font colour
00003DF4                          1703      
00003DF4  2203                    1704      move.l  D3,D1           Move the value in D3 to D1 for previous cursor position
00003DF6                          1705      
00003DF6  0641 0200               1706      add.w   #512,D1         Move the cursor position two columns forward
00003DFA  103C 000B               1707      move.b  #11,D0          Move byte #11 for trap command 11 
00003DFE  4E4F                    1708      trap    #15             Set the cursor position
00003E00                          1709      
00003E00  4E75                    1710      rts
00003E02                          1711      
00003E02                          1712  check_for_enemies:
00003E02  4BF8 6000               1713      lea     FIRST_ENEMY,A5  Load the memory address of the first enemy
00003E06  1A3C 0000               1714      move.b  #0,D5           Move the starting enemy number to D5
00003E0A  6100 0004               1715      bsr     loop_enemies    Loop through all enemies
00003E0E  4E75                    1716      rts                     Return from subroutine
00003E10                          1717      
00003E10                          1718  loop_enemies:
00003E10  6100 0012               1719      bsr     check_for_enemy Check for an enemy
00003E14                          1720      
00003E14  BA3C 0002               1721      CMP.B   #ENEMY_MAX,D5   Compare the enemy number with the maximum enemy number
00003E18  6C00 FE54               1722      BGE     return          Return from the loop if the current enemy number is greater than or equal to the max
00003E1C                          1723      
00003E1C  5205                    1724      add.b   #1,D5           Add to the current enemy number
00003E1E  DAFC 000C               1725      add.w   #12,A5          Add to the current enemy pointer to move to the next enemy (16 for next enemy - 4 to get back from position)
00003E22  60EC                    1726      bra     loop_enemies    Keep looping the enemies
00003E24                          1727      
00003E24                          1728  check_for_enemy:
00003E24  564D                    1729      add.w   #ALIVE,A5       Add to the enemy memory address to get the enemy's alive state
00003E26  0C1D 0000               1730      CMP.B   #0,(A5)+        Check if the enemy is alive
00003E2A  6700 FE42               1731      BEQ     return          Return from the subroutine if not
00003E2E                          1732      
00003E2E  3615                    1733      move.w  (A5),D3         Move the enemy coordinates into data register D3 for large-value comparisons
00003E30  B5C3                    1734      CMP.L   D3,A2           Check if the enemy is in the current position
00003E32  6700 0004               1735      BEQ     draw_enemy      Draw the enemy if it is
00003E36  4E75                    1736      rts                     Return if the enemy is not in the current position
00003E38                          1737      
00003E38                          1738  draw_enemy:
00003E38  323C 00FF               1739      move.w  #255,D1         Move the word #255 to D1 to set the type of trap 11
00003E3C  103C 000B               1740      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
00003E40  4E4F                    1741      trap    #15             Trap to get the cursor position in D1
00003E42                          1742      
00003E42  0441 0200               1743      sub.w   #512,D1         Move the cursor back by two columns
00003E46  4E4F                    1744      trap    #15             Set the cursor position with trap command 11
00003E48                          1745      
00003E48  2601                    1746      move.l  D1,D3          Move the value in D1 to D3 for storage
00003E4A                          1747      
00003E4A  223C 000000FF           1748      move.l  #RED,D1         Move the colour red to D1
00003E50  6100 FE5E               1749      bsr     change_font_colour  Change the font colour
00003E54                          1750      
00003E54  43F9 00004BDD           1751      lea     enemy_mark,A1   load the enemy symbol
00003E5A  103C 000E               1752      move.b  #14,D0          Move #14 to D0 for trap command 14
00003E5E  4E4F                    1753      trap    #15             Draw the player mark
00003E60                          1754      
00003E60  223C 00FFFFFF           1755      move.l  #WHITE,D1       Move the colour white to D1
00003E66  6100 FE48               1756      bsr     change_font_colour  Change the font colour
00003E6A                          1757      
00003E6A  2203                    1758      move.l  D3,D1           Move the value in D3 to D1 for previous cursor position
00003E6C                          1759      
00003E6C  0641 0200               1760      add.w   #512,D1         Move the cursor position two columns forward
00003E70  103C 000B               1761      move.b  #11,D0          Move byte #11 for trap command 11 
00003E74  4E4F                    1762      trap    #15             Set the cursor position
00003E76                          1763      
00003E76  4E75                    1764      rts 
00003E78                          1765      
00003E78                          1766  check_for_shops:
00003E78  4BF8 6500               1767      lea     FIRST_SHOP,A5   Load the memory address of the first shop
00003E7C  1A3C 0000               1768      move.b  #0,D5           Move the starting shop number to D5
00003E80  6100 0004               1769      bsr     loop_shops      Loop through all shops
00003E84  4E75                    1770      rts                     Return from subroutine
00003E86                          1771      
00003E86                          1772  loop_shops:
00003E86  6100 0012               1773      bsr     check_for_shop  Check for a shop
00003E8A                          1774      
00003E8A  BA3C 0002               1775      CMP.B   #SHOP_MAX,D5    Compare the shop number with the maximum shop number
00003E8E  6C00 FDDE               1776      BGE     return          Return from the loop if the current shop number is greater than or equal to the max
00003E92                          1777      
00003E92  5205                    1778      add.b   #1,D5           Add to the current shop number
00003E94  DAFC 0010               1779      add.w   #16,A5          Add to the current shop pointer to move to the next shop
00003E98  60EC                    1780      bra     loop_shops      Keep looping the shops
00003E9A                          1781      
00003E9A                          1782  check_for_shop:
00003E9A  3615                    1783      move.w  (A5),D3         Move the shop coordinates into data register D3 for large-value comparisons
00003E9C  B5C3                    1784      CMP.L   D3,A2           Check if the shop is in the current position
00003E9E  6700 0004               1785      BEQ     draw_shop       Draw the shop if it is
00003EA2  4E75                    1786      rts                     Return if the shop is not in the current position
00003EA4                          1787      
00003EA4                          1788  draw_shop:
00003EA4  323C 00FF               1789      move.w  #255,D1         Move the word #255 to D1 to set the type of trap 11
00003EA8  103C 000B               1790      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
00003EAC  4E4F                    1791      trap    #15             Trap to get the cursor position in D1
00003EAE                          1792      
00003EAE  0441 0200               1793      sub.w   #512,D1         Move the cursor back by two columns
00003EB2  4E4F                    1794      trap    #15             Set the cursor position with trap command 11
00003EB4                          1795      
00003EB4  2601                    1796      move.l  D1,D3           Move the value in D1 to D3 for storage
00003EB6                          1797      
00003EB6  223C 00F000F0           1798      move.l  #PURPLE,D1      Move the colour red to D1
00003EBC  6100 FDF2               1799      bsr     change_font_colour  Change the font colour
00003EC0                          1800      
00003EC0  43F9 00004BE1           1801      lea     shop_mark,A1    load the enemy symbol
00003EC6  103C 000E               1802      move.b  #14,D0          Move #14 to D0 for trap command 14
00003ECA  4E4F                    1803      trap    #15             Draw the player mark
00003ECC                          1804      
00003ECC  223C 00FFFFFF           1805      move.l  #WHITE,D1       Move the colour white to D1
00003ED2  6100 FDDC               1806      bsr     change_font_colour  Change the font colour
00003ED6                          1807      
00003ED6  2203                    1808      move.l  D3,D1           Move the value in D3 to D1 for previous cursor position
00003ED8                          1809      
00003ED8  0641 0200               1810      add.w   #512,D1         Move the cursor position two columns forward
00003EDC  103C 000B               1811      move.b  #11,D0          Move byte #11 for trap command 11 
00003EE0  4E4F                    1812      trap    #15             Set the cursor position
00003EE2                          1813      
00003EE2  4E75                    1814      rts
00003EE4                          1815  
00003EE4                          1816  check_for_win_point:
00003EE4  B5FC 00008156           1817      CMP.L   #WIN_POINT,A2   Check if the win point is in the current tile
00003EEA  6700 0004               1818      BEQ     draw_win_point  Branch to draw the win point if so
00003EEE  4E75                    1819      rts                     Return from subroutine if not
00003EF0                          1820      
00003EF0                          1821  draw_win_point:
00003EF0  323C 00FF               1822      move.w  #255,D1         Move the word #255 to D1 to set the type of trap 11
00003EF4  103C 000B               1823      move.b  #11,D0          Move the byte #11 to D0 for trap command 11
00003EF8  4E4F                    1824      trap    #15             Trap to get the cursor position in D1
00003EFA                          1825      
00003EFA  0441 0200               1826      sub.w   #512,D1         Move the cursor back by two columns
00003EFE  4E4F                    1827      trap    #15             Set the cursor position with trap command 11
00003F00                          1828      
00003F00  2601                    1829      move.l  D1,D3           Move the value in D1 to D3 for storage
00003F02                          1830      
00003F02  223C 00FF0000           1831      move.l  #BLUE,D1        Move the colour blue to D1
00003F08  6100 FDA6               1832      bsr     change_font_colour  Change the font colour
00003F0C                          1833      
00003F0C  43F9 00004BDF           1834      lea     win_point_mark,A1   load the win point symbol
00003F12  103C 000E               1835      move.b  #14,D0              Move #14 to D0 for trap command 14
00003F16  4E4F                    1836      trap    #15                 Draw the win point mark
00003F18                          1837      
00003F18  223C 00FFFFFF           1838      move.l  #WHITE,D1       Move the colour white to D1
00003F1E  6100 FD90               1839      bsr     change_font_colour  Change the font colour
00003F22                          1840      
00003F22  2203                    1841      move.l  D3,D1           Move the value in D3 to D1 for previous cursor position
00003F24                          1842      
00003F24  0641 0200               1843      add.w   #512,D1         Move the cursor position two columns forward
00003F28  103C 000B               1844      move.b  #11,D0          Move byte #11 for trap command 11 
00003F2C  4E4F                    1845      trap    #15             Set the cursor position
00003F2E                          1846      
00003F2E  4E75                    1847      rts
00003F30                          1848      
00003F30                          1849  *-------------------------------------------------------
00003F30                          1850  *-------------------Setup the world---------------------
00003F30                          1851  *-------------------------------------------------------
00003F30                          1852  setup_world:
00003F30  13FC 000E 0000814A      1853      move.b  #14,$814A   Setup the starting corridor
00003F38  13FC 0007 0000813A      1854      move.b  #7,$813A    T junction upwards from starting corridor
00003F40  13FC 0004 00008139      1855      move.b  #4,$8139    Left corridor
00003F48  13FC 0001 00008129      1856      move.b  #1,$8129
00003F50  13FC 0001 00008119      1857      move.b  #1,$8119
00003F58                          1858      
00003F58  13FC 0004 00008108      1859      move.b  #4,$8108    First shop
00003F60  13FC 0000 00008109      1860      move.b  #0,$8109    Entrance
00003F68  13FC 0005 0000810A      1861      move.b  #5,$810A
00003F70  13FC 0008 000080F8      1862      move.b  #8,$80F8
00003F78  13FC 0000 000080F9      1863      move.b  #0,$80F9
00003F80  13FC 000A 000080FA      1864      move.b  #10,$80FA
00003F88  13FC 0003 000080E8      1865      move.b  #3,$80E8
00003F90  13FC 0007 000080E9      1866      move.b  #7,$80E9
00003F98  13FC 0006 000080EA      1867      move.b  #6,$80EA
00003FA0                          1868      
00003FA0  13FC 0005 0000813B      1869      move.b  #5,$813B    Right corridor
00003FA8  13FC 0001 0000812B      1870      move.b  #1,$812B
00003FB0  13FC 0001 0000811B      1871      move.b  #1,$811B
00003FB8  13FC 0008 0000810B      1872      move.b  #8,$810B    Path continues up with a turn off to the right
00003FC0                          1873      
00003FC0  13FC 0002 0000810C      1874      move.b  #2,$810C    Right path
00003FC8  13FC 0002 0000810D      1875      move.b  #2,$810D    Continue right
00003FD0  13FC 0005 0000810E      1876      move.b  #5,$810E    Path upwards and to the left
00003FD8  13FC 0001 000080FE      1877      move.b  #1,$80FE    Leads upwards into a room
00003FE0                          1878      
00003FE0  13FC 0004 000080ED      1879      move.b  #4,$80ED    First monster room
00003FE8  13FC 0000 000080EE      1880      move.b  #0,$80EE    Entrance
00003FF0  13FC 0005 000080EF      1881      move.b  #5,$80EF
00003FF8  13FC 0008 000080DD      1882      move.b  #8,$80DD
00004000  13FC 0000 000080DE      1883      move.b  #0,$80DE
00004008  13FC 000A 000080DF      1884      move.b  #10,$80DF
00004010  13FC 0003 000080CD      1885      move.b  #3,$80CD
00004018  13FC 0007 000080CE      1886      move.b  #7,$80CE
00004020  13FC 0006 000080CF      1887      move.b  #6,$80CF
00004028                          1888      
00004028  13FC 0001 000080FB      1889      move.b  #1,$80FB    Path that continues up
00004030  13FC 0001 000080EB      1890      move.b  #1,$80EB    Path continues upwards
00004038  13FC 0001 000080DB      1891      move.b  #1,$80DB
00004040                          1892      
00004040                          1893      *Bottom row of room
00004040  13FC 0004 000080C8      1894      move.b  #4,$80C8    Large monster room with locked door
00004048  13FC 0009 000080C9      1895      move.b  #9,$80C9
00004050  13FC 0009 000080CA      1896      move.b  #9,$80CA
00004058  13FC 0000 000080CB      1897      move.b  #0,$80CB    Entrance
00004060  13FC 0005 000080CC      1898      move.b  #5,$80CC
00004068                          1899      *Middle row of room
00004068  13FC 0000 000080B8      1900      move.b  #0,$80B8    Exit to the left
00004070  13FC 0000 000080B9      1901      move.b  #0,$80B9
00004078  13FC 0000 000080BA      1902      move.b  #0,$80BA
00004080  13FC 0000 000080BB      1903      move.b  #0,$80BB
00004088  13FC 000A 000080BC      1904      move.b  #10,$80BC
00004090                          1905      *Top row of room
00004090  13FC 0003 000080A8      1906      move.b  #3,$80A8
00004098  13FC 0007 000080A9      1907      move.b  #7,$80A9
000040A0  13FC 0007 000080AA      1908      move.b  #7,$80AA
000040A8  13FC 0007 000080AB      1909      move.b  #7,$80AB    Locked door
000040B0  13FC 0006 000080AC      1910      move.b  #6,$80AC
000040B8                          1911      
000040B8  13FC 0002 000080B7      1912      move.b  #2,$80B7    Exit large room leftwards
000040C0  13FC 0002 000080B6      1913      move.b  #2,$80B6    Continue to the left
000040C8  13FC 0007 000080B5      1914      move.b  #7,$80B5    Continue to the left and a path downwards
000040D0  13FC 0002 000080B4      1915      move.b  #2,$80B4    Continue to the left
000040D8                          1916      
000040D8  13FC 0003 000080A1      1917      move.b  #3,$80A1    Room to the left
000040E0  13FC 0007 000080A2      1918      move.b  #7,$80A2
000040E8  13FC 0006 000080A3      1919      move.b  #6,$80A3
000040F0  13FC 0008 000080B1      1920      move.b  #8,$80B1
000040F8  13FC 0000 000080B2      1921      move.b  #0,$80B2
00004100  13FC 0000 000080B3      1922      move.b  #0,$80B3    Entrance to the right
00004108  13FC 0004 000080C1      1923      move.b  #4,$80C1
00004110  13FC 0009 000080C2      1924      move.b  #9,$80C2
00004118  13FC 0005 000080C3      1925      move.b  #5,$80C3
00004120                          1926      
00004120  13FC 0001 000080C5      1927      move.b  #1,$80C5    Path leading downwards
00004128  13FC 0001 000080D5      1928      move.b  #1,$80D5
00004130  13FC 000A 000080E5      1929      move.b  #10,$80E5   Path leading downward and to the left
00004138  13FC 0002 000080E4      1930      move.b  #2,$80E4    Path on the left
00004140  13FC 0002 000080E3      1931      move.b  #2,$80E3
00004148  13FC 0003 000080E2      1932      move.b  #3,$80E2    Path takes a turn downwards
00004150  13FC 0001 000080F2      1933      move.b  #1,$80F2    Path continues downwards
00004158                          1934      
00004158  13FC 0003 00008101      1935      move.b  #3,$8101    Regular enemy room
00004160  13FC 0000 00008102      1936      move.b  #0,$8102    Entrance
00004168  13FC 0006 00008103      1937      move.b  #6,$8103
00004170  13FC 0008 00008111      1938      move.b  #8,$8111
00004178  13FC 0000 00008112      1939      move.b  #0,$8112
00004180  13FC 000A 00008113      1940      move.b  #10,$8113
00004188  13FC 0004 00008121      1941      move.b  #4,$8121
00004190  13FC 0009 00008122      1942      move.b  #9,$8122
00004198  13FC 000A 00008123      1943      move.b  #10,$8123   Exit at the bottom
000041A0                          1944      
000041A0  13FC 0001 000080F5      1945      move.b  #1,$80F5    Path leading downward
000041A8  13FC 0001 00008105      1946      move.b  #1,$8105
000041B0  13FC 0001 00008115      1947      move.b  #1,$8115
000041B8  13FC 0001 00008125      1948      move.b  #1,$8125
000041C0                          1949      
000041C0                          1950      *Top row of room
000041C0  13FC 0008 00008133      1951      move.b  #8,$8133    Large enemy room - Exit at top
000041C8  13FC 0007 00008134      1952      move.b  #7,$8134
000041D0  13FC 0000 00008135      1953      move.b  #0,$8135    Entrance
000041D8  13FC 0006 00008136      1954      move.b  #6,$8136
000041E0                          1955      
000041E0                          1956      *Middle row of room
000041E0  13FC 0008 00008143      1957      move.b  #8,$8143
000041E8  13FC 0000 00008144      1958      move.b  #0,$8144
000041F0  13FC 0000 00008145      1959      move.b  #0,$8145
000041F8  13FC 000A 00008146      1960      move.b  #10,$8146
00004200                          1961      
00004200                          1962      *Bottom row of room
00004200  13FC 0004 00008153      1963      move.b  #4,$8153
00004208  13FC 0009 00008154      1964      move.b  #9,$8154
00004210  13FC 0009 00008155      1965      move.b  #9,$8155
00004218  13FC 0005 00008156      1966      move.b  #5,$8156
00004220                          1967      
00004220  4E75                    1968      rts
00004222                          1969  
00004222                          1970  setup_enemies:
00004222                          1971      * Setup first enemy
00004222  11FC 0003 6000          1972      move.b  #3,$6000    Health - Setup the first enemy
00004228  11FC 0001 6001          1973      move.b  #1,$6001    Damage/level
0000422E  11FC 0001 6002          1974      move.b  #1,$6002    Class type (Knight)
00004234  11FC 0001 6003          1975      move.b  #1,$6003    Alive state (Alive)
0000423A  31FC 80DE 6004          1976      move.w  #$80DE,$6004  Move enemy coordinates
00004240                          1977      
00004240                          1978      * Setup second enemy
00004240  11FC 0003 6010          1979      move.b  #3,$6010    Health - Setup the first enemy
00004246  11FC 0002 6011          1980      move.b  #2,$6011    Damage/level
0000424C  11FC 0001 6012          1981      move.b  #1,$6012    Class type (Knight)
00004252  11FC 0001 6013          1982      move.b  #1,$6013    Alive state (Alive)
00004258  31FC 8155 6014          1983      move.w  #$8155,$6014  Move enemy coordinates
0000425E                          1984      
0000425E  4E75                    1985      rts
00004260                          1986      
00004260                          1987  setup_player:
00004260  11FC 000A 5FF0          1988      move.b  #10,PLAYER      put score/health in memory location $5FF0
00004266  11FC 0001 5FF1          1989      move.b  #1,PLA_DAMAGE   Assign the default damage for the player
0000426C  11FC 0000 5FF3          1990      move.b  #0,GAME_STATE   Put game state number in memory location $5FF3
00004272                          1991      *0 = Pick role/intro | 5 = Move around | 6 = Combat | 7 = Shop | 64 = End game
00004272                          1992  
00004272  11FC 0000 5FF2          1993      move.b  #0,PLA_CLASS    put class number in memory location $5FF2
00004278                          1994      * 1 corresponds to knight - 2 corresponds to mage - 3 corresponds to rogue
00004278                          1995      
00004278  11FC 0064 5FF8          1996      move.b  #100,PLA_GOLD    Assign the player's base gold value
0000427E  11FC 0001 5FF9          1997      move.b  #1,PLA_POTIONS  Assign the player's base potions value
00004284  11FC 0000 5FFA          1998      move.b  #0,PLA_KEYS     Assign the player's base keys value
0000428A  11FC 000F 5FFB          1999      move.b  #LIFE_PER_TORCH,PLA_TORCH   Assign the player's base torch value
00004290                          2000      
00004290  4DF9 0000814A           2001      lea     $814A,A6        Set the player coordinate to the first corridor
00004296  31CE 5FF6               2002      move.w  A6,PLA_P_POS    Set the player's previous position to their current
0000429A                          2003      
0000429A  4E75                    2004      rts
0000429C                          2005      
0000429C                          2006  setup_shops:
0000429C                          2007      * Setup the first shop
0000429C  31FC 80F9 6500          2008      move.w  #$80F9,$6500    Set the position
000042A2  11FC 0002 6502          2009      move.b  #2,$6502        Set the potions
000042A8  11FC 0003 6503          2010      move.b  #3,$6503        Set the keys
000042AE  11FC 0004 6504          2011      move.b  #4,$6504        Set the torches
000042B4  11FC 0005 6505          2012      move.b  #5,$6505        Set the damage
000042BA                          2013      
000042BA                          2014      * Setup the second shop
000042BA  31FC 80B2 6510          2015      move.w  #$80B2,$6510    Set the position
000042C0  11FC 0004 6512          2016      move.b  #4,$6512        Set the potions
000042C6  11FC 0003 6513          2017      move.b  #3,$6513        Set the keys
000042CC  11FC 0002 6514          2018      move.b  #2,$6514        Set the torches
000042D2  11FC 0001 6515          2019      move.b  #1,$6515        Set the damage
000042D8                          2020  
000042D8  4E75                    2021      rts
000042DA                          2022      
000042DA                          2023  *-------------------------------------------------------
000042DA                          2024  *-------------------Data Delarations--------------------
000042DA                          2025  *-------------------------------------------------------
000042DA                          2026  
000042DA= 0D 0A 00                2027  crlf:           dc.b    $0D,$0A,0
000042DD= 2A 2A 2A 2A 2A 2A ...   2028  welcome_msg:    dc.b    '*****************************************************************',$0D,$0A
00004320= 20 20 20 20 20 20 ...   2029                  dc.b    '      __  ___      ___  __      ___        ______    _____  ___',$0D,$0A
00004361= 20 20 20 20 20 2F ...   2030                  dc.b    '     /""\|"  \    /"  |/""\    |"  |      /    " \  (\"   \|"  \',$0D,$0A
000043A3= 20 20 20 20 2F 20 ...   2031                  dc.b    '    /    \\   \  //  //    \   ||  |     // ____  \ |.\\   \    |',$0D,$0A
000043E6= 20 20 20 2F 20 20 ...   2032                  dc.b    '   /  /\  \\\  \/. .//  /\  \  |:  |    /  /    ) :)|: \.   \\  |',$0D,$0A
00004429= 20 20 2F 2F 20 20 ...   2033                  dc.b    '  //  __   \\.    ////  __   \  \  |___(: (____/ // |.  \    \. |',$0D,$0A
0000446C= 20 2F 20 20 20 2F ...   2034                  dc.b    ' /   /  \\  \\\   //   /  \\  \( \_|:  \\        /  |    \    \ |',$0D,$0A
000044AF= 28 5F 5F 5F 2F 20 ...   2035                  dc.b    '(___/    \___)\__/(___/    \___)\_______)\"_____/    \___|\____\)',$0D,$0A,$0D,$0A
000044F4= 2A 2A 2A 2A 2A 2A ...   2036                  dc.b    '*****************************************************************',$0D,$0A,0
00004538= 2E 00                   2037  loop_msg:       dc.b    '.',0
0000453A= 54 68 65 20 64 61 ...   2038  tutorial_msg    dc.b    'The darkness here is dangerious, keep your torch close and dont let it go out.',$0D,$0A
0000458A= 45 76 65 72 79 20 ...   2039                  dc.b    'Every movement you make decreases your torch life, so think before you move.',$0D,$0A
000045D8= 59 6F 75 20 63 61 ...   2040                  dc.b    'You can buy more torches in the shop, thats probably a good place to start...',$0D,$0A,0
00004628= 31 3E 20 52 65 73 ...   2041  replay_msg:     dc.b    '1> Restart the game.',$0D,$0A
0000463E= 32 3E 20 51 75 69 ...   2042                  dc.b    '2> Quit the game.',$0D,$0A,0
00004652= 59 6F 75 20 61 77 ...   2043  wake_up_msg:    dc.b    'You awake in a room, on a bed of red velvet, with no memory',$0D,$0A
0000468F= 6F 66 20 68 6F 77 ...   2044                  dc.b    'of how you got here. Stones crumble from the ceiling, the place looks like an',$0D,$0A
000046DE= 6F 6C 64 20 63 61 ...   2045                  dc.b    'old castle. You get a dark feeling from this place, and you know you must',$0D,$0A
00004729= 65 73 63 61 70 65 ...   2046                  dc.b    'escape...',$0D,$0A
00004734= 59 6F 75 20 63 6C ...   2047                  dc.b    'You climb from the bed and look in a nearby mirror:',$0D,$0A,0
0000476A= 31 3E 20 59 6F 75 ...   2048  pick_role_msg:  dc.b    '1> You wear armour of polished iron, a short sword and heavy shield laying',$0D,$0A
000047B6= 63 6C 6F 73 65 20 ...   2049                  dc.b    'close by. (Knight class)',$0D,$0A,$0D,$0A
000047D2= 32 3E 20 59 6F 75 ...   2050                  dc.b    '2> You wear a cloak with mystic symbols sewn into the fabrics, an ancient',$0D,$0A
0000481D= 6C 6F 6F 6B 69 6E ...   2051                  dc.b    'looking staff lays near. (Mage class)',$0D,$0A,$0D,$0A
00004846= 33 3E 20 59 6F 75 ...   2052                  dc.b    '3> You wear tight, well-fitting leather armour with reminents of black dye',$0D,$0A
00004892= 73 74 61 69 6E 65 ...   2053                  dc.b    'stained to the material. Two knives are fastened to your belt. (Rogue class)',$0D,$0A,0
000048E1= 45 6E 74 65 72 20 ...   2054  input_nums_msg: dc.b    'Enter num between 1 and ',0
000048FA= 3A 20 00                2055  colon_msg:      dc.b    ': ',0
000048FD                          2056  
000048FD= 49 6E 70 75 74 74 ...   2057  input_error_msg:    dc.b    'Inputted number is outside of range.',$0D,$0A,0
00004924= 47 61 6D 65 73 74 ...   2058  fake_gamestate_msg: dc.b    'Gamestate doesnt exist',$0D,$0A,0
0000493D= 59 6F 75 20 67 72 ...   2059  knight_role_msg:    dc.b    'You grab your sword and shield, pull a torch from the wall, and leave the room.',$0D,$0A,0
0000498F= 59 6F 75 20 68 61 ...   2060  knight_spec_msg:    dc.b    'You have chosen the KNIGHT class. You specialise in blocking and countering',$0D,$0A,0
000049DD= 59 6F 75 20 70 69 ...   2061  mage_role_msg:  dc.b    'You pick up your staff, grab a torch from the wall, and leave the room.',$0D,$0A,0
00004A27= 59 6F 75 20 68 61 ...   2062  mage_spec_msg:  dc.b    'You have chosen the MAGE class. You specialise in magic attacks.',$0D,$0A,0
00004A6A= 59 6F 75 20 66 61 ...   2063  rogue_role_msg: dc.b    'You fasten your belt, grab a torch from the wall, and leave the room.',$0D,$0A,0
00004AB2= 59 6F 75 20 68 61 ...   2064  rogue_spec_msg: dc.b    'You have chosen the ROGUE class. You specialise in quick melee attacks.',$0D,$0A,0
00004AFC= 31 3E 20 4D 6F 76 ...   2065  movement_msg:   dc.b    '1> Move north.',$0D,$0A
00004B0C= 32 3E 20 4D 6F 76 ...   2066                  dc.b    '2> Move south.',$0D,$0A
00004B1C= 33 3E 20 4D 6F 76 ...   2067                  dc.b    '3> Move west.',$0D,$0A
00004B2B= 34 3E 20 4D 6F 76 ...   2068                  dc.b    '4> Move east.',$0D,$0A
00004B3A= 35 3E 20 44 72 69 ...   2069                  dc.b    '5> Drink health potion.',$0D,$0A,0
00004B54= 4D 6F 76 65 64 20 ...   2070  move_north_msg: dc.b    'Moved north.',$0D,$0A,0
00004B63= 4D 6F 76 65 64 20 ...   2071  move_east_msg:  dc.b    'Moved east.',$0D,$0A,0
00004B71= 4D 6F 76 65 64 20 ...   2072  move_south_msg: dc.b    'Moved south.',$0D,$0A,0
00004B80= 4D 6F 76 65 64 20 ...   2073  move_west_msg:  dc.b    'Moved west.',$0D,$0A,0
00004B8E= 41 20 77 61 6C 6C ...   2074  movement_blocked_msg:  dc.b    'A wall blocks your path.',$0D,$0A,0
00004BA9= 45 6E 74 65 72 20 ...   2075  continue_msg:   dc.b    'Enter any key to continue... ',0
00004BC7= 20 20 20 00             2076  blank_tile      dc.b    '   ',0
00004BCB= 7C 20 7C 00             2077  both_tile       dc.b    '| |',0
00004BCF= 7C 20 20 00             2078  left_tile       dc.b    '|  ',0
00004BD3= 20 20 7C 00             2079  right_tile      dc.b    '  |',0
00004BD7= 5C 2F 5C 00             2080  blocked_tile:   dc.b    '\/\',0
00004BDB= 2A 00                   2081  player_mark:    dc.b    '*',0
00004BDD= 58 00                   2082  enemy_mark:     dc.b    'X',0
00004BDF= 40 00                   2083  win_point_mark: dc.b    '@',0
00004BE1= 24 00                   2084  shop_mark:      dc.b    '$',0
00004BE3= 41 20 6D 6F 6E 73 ...   2085  encounter_msg:  dc.b    'A monster blocks your path, it looks ready to attack!',$0D,$0A,0
00004C1B= 31 3E 20 42 6C 6F ...   2086  combat_msg:     dc.b    '1> Block and Counter.',$0D,$0A
00004C32= 32 3E 20 43 61 73 ...   2087                  dc.b    '2> Cast Magic.',$0D,$0A
00004C42= 33 3E 20 41 74 74 ...   2088                  dc.b    '3> Attack Swiftly.',$0D,$0A
00004C56= 34 3E 20 54 72 79 ...   2089                  dc.b    '4> Try Run.',$0D,$0A
00004C63= 35 3E 20 44 72 69 ...   2090                  dc.b    '5> Drink Health Potion.',$0D,$0A,0
00004C7D= 59 6F 75 20 65 73 ...   2091  escape_msg:             dc.b    'You escaped the monster!',$0D,$0A,0
00004C98= 59 6F 75 20 74 72 ...   2092  fail_escape_msg:        dc.b    'You try to run, but the monster catches and damages you!',$0D,$0A,0
00004CD3= 59 6F 75 20 62 6F ...   2093  both_block_msg:         dc.b    'You both block, No damage is done!',$0D,$0A,0
00004CF8= 59 6F 75 20 62 6F ...   2094  both_cast_magic_msg:    dc.b    'You both cast magic at eachother, the spells clash in mid air! No damage',$0D,$0A
00004D42= 69 73 20 64 6F 6E ...   2095                          dc.b    'is done!',$0D,$0A,0
00004D4D= 59 6F 75 20 62 6F ...   2096  both_melee_msg:         dc.b    'You both lunge forward, metal clashes together, but no damage is done!',$0D,$0A,0
00004D96= 54 68 65 20 65 6E ...   2097  hit_against_block_msg:  dc.b    'The enemy blocks, you cast a cast a spell and it damages the monster!',$0D,$0A,0
00004DDE= 54 68 65 20 65 6E ...   2098  hit_against_magic_msg:  dc.b    'The enemy begins to charge a spell but you lunge forward and hit it first,',$0D,$0A
00004E2A= 64 61 6D 61 67 69 ...   2099                          dc.b    'damaging the monster!',$0D,$0A,0
00004E42= 54 68 65 20 65 6E ...   2100  hit_against_melee_msg:  dc.b    'The enemy lunges forward but you block quicky, then counter, damaging the',$0D,$0A
00004E8D= 6D 6F 6E 73 74 65 ...   2101                          dc.b    'monster!',$0D,$0A,0
00004E98= 59 6F 75 20 6C 75 ...   2102  hit_by_counter_msg:     dc.b    'You lunge at the enemy but they block before you hit, they swing around quickly',$0D,$0A
00004EE9= 61 6E 64 20 64 61 ...   2103                          dc.b    'and damage you!',$0D,$0A,0
00004EFB= 59 6F 75 20 74 72 ...   2104  hit_by_magic_msg:       dc.b    'You try to block the enemies attack, but they cast a spell that breaks through',$0D,$0A
00004F4B= 79 6F 75 72 20 64 ...   2105                          dc.b    'your defense and damages you!',$0D,$0A,0
00004F6B= 59 6F 75 20 74 72 ...   2106  hit_by_melee_msg:       dc.b    'You try to charge up a spell, but the enemy lunges forward and damages you!',$0D,$0A,0
00004FB9= 48 65 61 6C 74 68 ...   2107  health_msg:             dc.b    'Health: ',0
00004FC2= 45 6E 65 6D 79 20 ...   2108  enemy_health_msg:       dc.b    'Enemy Health: ',0
00004FD1= 54 6F 72 63 68 20 ...   2109  torch_msg:              dc.b    'Torch Life: ',0
00004FDE= 44 61 6D 61 67 65 ...   2110  damage_lvl_msg          dc.b    'Damage lvl: ',0
00004FEB= 49 6E 76 65 6E 74 ...   2111  inventory_msg:          dc.b    'Inventory:',0
00004FF6= 2D 20 47 6F 6C 64 ...   2112  gold_msg:               dc.b    '- Gold ',0
00004FFE= 2D 20 4B 65 79 20 00    2113  key_msg:                dc.b    '- Key ',0
00005005= 2D 20 50 6F 74 69 ...   2114  potions_msg:            dc.b    '- Potion ',0
0000500F= 2D 20 54 6F 72 63 ...   2115  torches_msg:            dc.b    '- Torch ',0
00005018= 2D 20 44 61 6D 61 ...   2116  damage_up_msg:          dc.b    '- Damage Upgrades ',0
0000502B= 54 68 65 20 6D 6F ...   2117  battle_won_msg:         dc.b    'The monster collapses at your feet. It is dead!',$0D,$0A,0
0000505D= 28 00                   2118  bracket_open_msg:       dc.b    '(',0
0000505F= 29 00                   2119  bracket_close_msg:      dc.b    ')',0
00005061= 59 6F 75 20 66 65 ...   2120  death_msg:          dc.b    'You feel your last breath of air leave your lungs...',$0D,$0A
00005097= 59 6F 75 72 20 6B ...   2121                      dc.b    'Your knees hit the ground...',$0D,$0A
000050B5= 59 6F 75 20 68 61 ...   2122                      dc.b    'You have died.',$0D,$0A,0
000050C6= 59 6F 75 20 66 65 ...   2123  win_msg:            dc.b    'You feel the outside breeze hit your face...',$0D,$0A
000050F4= 59 6F 75 20 68 61 ...   2124                      dc.b    'You have escaped the castle!',$0D,$0A,0
00005113= 59 6F 75 20 64 72 ...   2125  take_potion_msg:    dc.b    'You drink a health potion...',$0D,$0A
00005131= 33 20 68 65 61 6C ...   2126                      dc.b    '3 health points restored!',$0D,$0A,0
0000514D= 59 6F 75 20 61 72 ...   2127  no_potions_msg:     dc.b    'You are out of potions.',$0D,$0A,0
00005167= 22 4C 6F 6F 6B 69 ...   2128  shop_enter_msg:     dc.b    '"Looking to lighten that coin pouch of yours?!"',$0D,$0A,0
00005199= 31 3E 20 42 75 79 ...   2129  shop_msg:       dc.b    '1> Buy Potion. (5g)',$0D,$0A
000051AE= 32 3E 20 42 75 79 ...   2130                  dc.b    '2> Buy Key. (15g)',$0D,$0A
000051C1= 33 3E 20 42 75 79 ...   2131                  dc.b    '3> Buy Torch. (10g)',$0D,$0A
000051D6= 34 3E 20 42 75 79 ...   2132                  dc.b    '4> Buy Damage Upgrade. (20g)',$0D,$0A
000051F4= 35 3E 20 4C 65 61 ...   2133                  dc.b    '5> Leave Shop.',$0D,$0A,0
00005205= 22 50 6C 65 61 73 ...   2134  leave_shop_msg: dc.b    '"Pleasure doing business with you."',$0D,$0A,0
0000522B= 22 2E 2E 2E 41 6E ...   2135  buy_item_msg:   dc.b    '"...And its yours!"',$0D,$0A,0
00005241= 53 68 6F 70 20 53 ...   2136  shop_stock_msg: dc.b    'Shop Stock:',0
0000524D= 59 6F 75 72 20 49 ...   2137  player_msg:     dc.b    'Your Items:',0
00005259= 22 4E 6F 74 20 65 ...   2138  no_money_msg:   dc.b    '"Not enough gold, traveller."',$0D,$0A,0
00005279= 22 53 6F 72 72 79 ...   2139  no_item_msg:    dc.b    '"Sorry, I dont have any of them left..."',$0D,$0A,0
000052A4= 54 68 65 20 64 61 ...   2140  no_torch_msg:   dc.b    'The darkness burns...',$0D,$0A,0
000052BC= 20 20 20 20 20 20 ...   2141  graveyard_msg:  dc.b    '      ,-=-.       ______     _',$0D,$0A
000052DC= 20 20 20 20 20 2F ...   2142                  dc.b    '     /  +  \     />----->  _|1|_',$0D,$0A
000052FE= 20 20 20 20 20 7C ...   2143                  dc.b    '     | ~~~ |    // -/- /  |_ H _|',$0D,$0A
00005321= 20 20 20 20 20 7C ...   2144                  dc.b    '     |R.I.P|   //  /  /     |S|',$0D,$0A
00005342= 5C 76 56 2C 2C 7C ...   2145                  dc.b    '\vV,,|_____|V,//_____/VvV,v,|_|/,,vhjwv/,',$0D,$0A,0
0000536E= 20 20 20 20 20 20 ...   2146  skeleton_msg:   dc.b    '           .-.',$0D,$0A
0000537E= 20 2F 5C 5F 5F 5F ...   2147                  dc.b    ' /\____/\ (o.o)',$0D,$0A
0000538F= 7C 20 20 5F 7C 7C ...   2148                  dc.b    '|  _||_  | |=|',$0D,$0A
0000539F= 20 5C 2F 20 7C 7C ...   2149                  dc.b    ' \/ || \/ __|__',$0D,$0A
000053B0= 20 20 20 20 7C 7C ...   2150                  dc.b    '    ||\_//.=|=.\\',$0D,$0A
000053C3= 20 20 20 20 7C 7C ...   2151                  dc.b    '    ||\_/ .=|=. \\',$0D,$0A
000053D7= 20 20 20 20 7C 7C ...   2152                  dc.b    '    ||    .=|=. //',$0D,$0A
000053EB= 20 20 20 20 7C 7C ...   2153                  dc.b    '    ||    (_=_)//',$0D,$0A
000053FE= 20 20 20 20 7C 7C ...   2154                  dc.b    '    ||   (:| |:)',$0D,$0A
00005410= 20 20 20 20 7C 7C ...   2155                  dc.b    '    ||    || ||',$0D,$0A
00005421= 20 20 20 20 7C 7C ...   2156                  dc.b    '    ||    () ()',$0D,$0A
00005432= 20 20 20 20 2F 5C ...   2157                  dc.b    '    /\    || ||',$0D,$0A
00005443= 20 20 20 20 7C 7C ...   2158                  dc.b    '    ||    || ||',$0D,$0A
00005454= 20 20 20 20 5C 2F ...   2159                  dc.b    '    \/  ==   ==',$0D,$0A,0
00005466= 20 20 20 20 20 20 ...   2160  merchant_msg:   dc.b    '         ____',$0D,$0A
00005475= 20 20 20 20 20 20 ...   2161                  dc.b    '        |    |',$0D,$0A
00005485= 20 20 20 20 20 20 ...   2162                  dc.b    '      --:<<>>:--',$0D,$0A
00005497= 20 20 20 20 20 20 ...   2163                  dc.b    '        :~_~ :',$0D,$0A
000054A7= 20 20 20 20 20 20 ...   2164                  dc.b    '        _:"":\___',$0D,$0A
000054BA= 20 20 5F 5F 5F 5F ...   2165                  dc.b    '  ____./ :::     \._',$0D,$0A
000054D0= 3C 3C 3D 29 20 20 ...   2166                  dc.b    '<<=)           \    :',$0D,$0A
000054E7= 20 5C 2F 2D 2D 2D ...   2167                  dc.b    ' \/---/\_      /\._. ',$0D,$0A
000054FE= 20 7C 7C 20 20 20 ...   2168                  dc.b    ' ||       \====:_ ""',$0D,$0A
00005514= 20 7C 7C 20 20 20 ...   2169                  dc.b    ' ||      ./     \\',$0D,$0A
00005528= 20 7C 7C 20 20 20 ...   2170                  dc.b    ' ||     :       :',$0D,$0A
0000553B= 20 7C 7C 20 20 20 ...   2171                  dc.b    ' ||    /   :    \',$0D,$0A
0000554E= 20 7C 7C 20 20 20 ...   2172                  dc.b    ' ||   :   .      \.',$0D,$0A
00005563= 20 7C 7C 20 20 20 ...   2173                  dc.b    ' ||   :  : :      :',$0D,$0A
00005578= 20 7C 7C 20 20 20 ...   2174                  dc.b    ' ||   :__:-:__.;--',$0D,$0A,0
0000558D                          2175  
0000558D                          2176      end start

No errors detected
No warnings generated


SYMBOL TABLE INFORMATION
Symbol-name         Value
-------------------------
ALIVE               3
BATTLE_WON_MSG      502B
BLANK_TILE          4BC7
BLOCKED_TILE        4BD7
BLOCK_COUNTER       391E
BLUE                FF0000
BOTH_BLOCK          39B6
BOTH_BLOCK_MSG      4CD3
BOTH_CAST_MAGIC     39C8
BOTH_CAST_MAGIC_MSG  4CF8
BOTH_MELEE          39DA
BOTH_MELEE_MSG      4D4D
BOTH_TILE           4BCB
BRACKET_CLOSE_MSG   505F
BRACKET_OPEN_MSG    505D
BUY_ITEM_MSG        522B
BUY_KEY             3AFA
BUY_POTION          3AC4
BUY_TORCH           3B32
CAST_MAGIC          3938
CHANGE_FONT_COLOUR  3CB0
CHECK_FOR_ENEMIES   3E02
CHECK_FOR_ENEMY     3E24
CHECK_FOR_PLAYER    3DBA
CHECK_FOR_SHOP      3E9A
CHECK_FOR_SHOPS     3E78
CHECK_FOR_WIN_POINT  3EE4
CLASS               2
CLEAR_SCREEN        3730
COLON_MSG           48FA
COMBAT              38DE
COMBAT_MSG          4C1B
CONTINUE_MSG        4BA9
CRLF                42DA
CSR_POS_BATTLE      2001
CSR_POS_MOVE        3201
CSR_POS_SHOP_P      3401
CSR_POS_SHOP_S      1801
DAMAGE              1
DAMAGE_LVL_MSG      4FDE
DAMAGE_UP_MSG       5018
DAMAGE_UP_PRICE     14
DEATH_MSG           5061
DECORATE            3712
DECREMENT_TORCH     3CA2
DRAW                3388
DRAW_BATTLE_INFO    34EE
DRAW_BLANK_TILE     3DAC
DRAW_BLOCKED_TILE   3D74
DRAW_BOTH_TILE      3D82
DRAW_ENEMY          3E38
DRAW_GRAVEYARD      33B6
DRAW_HUD            33D2
DRAW_ITEM_NUMBER    34CC
DRAW_LEFT_TILE      3D90
DRAW_LOOP           3CC2
DRAW_MERCHANT       33C4
DRAW_PLAYER         3DC2
DRAW_PLAYER_INFO    33F2
DRAW_RIGHT_TILE     3D9E
DRAW_SHOP           3EA4
DRAW_SHOP_INFO      3568
DRAW_SKELETON       33A8
DRAW_TILE           3D10
DRAW_WIN_POINT      3EF0
ENCOUNTER_MSG       4BE3
END                 3006
ENDL                3760
ENEMIES_CHECK       3248
ENEMIES_LOOP        3256
ENEMY_ALIVE_CHECK   3350
ENEMY_CHECK         3274
ENEMY_DIED          335A
ENEMY_HEALTH_MSG    4FC2
ENEMY_MARK          4BDD
ENEMY_MAX           2
ENTER_COMBAT        32A8
ENTER_SHOP          3328
ESCAPE_ATTACK       397C
ESCAPE_MSG          4C7D
EXIT                0
FAIL_ESCAPE         399A
FAIL_ESCAPE_MSG     4C98
FAKE_GAMESTATE_MSG  4924
FIRST_ENEMY         6000
FIRST_SHOP          6500
FONT                1090000
GAME                3000
GAMELOOP            3170
GAMEPLAY            36E4
GAME_STATE          5FF3
GOLD_MSG            4FF6
GRAVEYARD_MSG       52BC
GREEN               FF00
HEALTH_MSG          4FB9
HIT_AGAINST_BLOCK   39EC
HIT_AGAINST_BLOCK_MSG  4D96
HIT_AGAINST_MAGIC   3A04
HIT_AGAINST_MAGIC_MSG  4DDE
HIT_AGAINST_MELEE   3A1C
HIT_AGAINST_MELEE_MSG  4E42
HIT_BY_COUNTER      3A34
HIT_BY_COUNTER_MSG  4E98
HIT_BY_MAGIC        3A50
HIT_BY_MAGIC_MSG    4EFB
HIT_BY_MELEE        3A6C
HIT_BY_MELEE_MSG    4F6B
INPUT               311E
INPUT_ERROR_MSG     48FD
INPUT_NUMS_MSG      48E1
INVALID_INPUT       3162
INVENTORY_MSG       4FEB
KEY_MSG             4FFE
KEY_PRICE           F
KNIGHT_ROLE_MSG     493D
KNIGHT_SELECT       3062
KNIGHT_SPEC_MSG     498F
LEAVE_SHOP          3BA4
LEAVE_SHOP_MSG      5205
LEFT_TILE           4BCF
LIFE_PER_TORCH      F
LOOP_COLUMNS        3CEE
LOOP_ENEMIES        3E10
LOOP_MSG            4538
LOOP_ROWS           3CD8
LOOP_SHOPS          3E86
MAGE_ROLE_MSG       49DD
MAGE_SELECT         3092
MAGE_SPEC_MSG       4A27
MANAGE_INPUT        3148
MANAGE_TORCH        3214
MAP_LENGTH          F
MAP_START_POINT     8080
MELEE_ATTACK        3952
MERCHANT_MSG        5466
MOVEMENT            3776
MOVEMENT_BLOCKED    38CC
MOVEMENT_BLOCKED_MSG  4B8E
MOVEMENT_CHECKS     31FC
MOVEMENT_MSG        4AFC
MOVE_EAST           3888
MOVE_EAST_MSG       4B63
MOVE_NORTH          37B8
MOVE_NORTH_MSG      4B54
MOVE_SOUTH          37FE
MOVE_SOUTH_MSG      4B71
MOVE_WEST           3844
MOVE_WEST_MSG       4B80
NO_ITEM_MSG         5279
NO_MONEY            3BC6
NO_MONEY_MSG        5259
NO_POTIONS          3C92
NO_POTIONS_MSG      514D
NO_SHOP_DAMAGE_UP   3C24
NO_SHOP_KEYS        3BF4
NO_SHOP_POTIONS     3BDC
NO_SHOP_TORCHES     3C0C
NO_TORCH_MSG        52A4
OUT                 371A
PICK_ROLE           301C
PICK_ROLE_MSG       476A
PLAYER              5FF0
PLAYER_DEAD         31B0
PLAYER_MARK         4BDB
PLAYER_MSG          524D
PLA_CLASS           5FF2
PLA_DAMAGE          5FF1
PLA_GOLD            5FF8
PLA_KEYS            5FFA
PLA_POTIONS         5FF9
PLA_P_POS           5FF6
PLA_TORCH           5FFB
POSITION            4
POTIONS_MSG         5005
POTION_PRICE        5
PRESS_CONTINUE      3C3C
PURPLE              F000F0
RANDOM_NUMBER       3C54
RED                 FF
REPLAY              373C
REPLAY_MSG          4628
RETURN              3C6E
RIGHT_TILE          4BD3
ROGUE_ROLE_MSG      4A6A
ROGUE_SELECT        30C2
ROGUE_SPEC_MSG      4AB2
ROLE_INPUT          3044
SETUP_ENEMIES       4222
SETUP_PLAYER        4260
SETUP_SHOPS         429C
SETUP_WORLD         3F30
SHOP                3A88
SHOPS_CHECK         32D2
SHOPS_LOOP          32E0
SHOP_CHECK          32FE
SHOP_ENTER_MSG      5167
SHOP_MARK           4BE1
SHOP_MAX            2
SHOP_MSG            5199
SHOP_STOCK_MSG      5241
SKELETON_MSG        536E
START               1000
S_DAMAGE_IN         5
S_KEYS              3
S_POTIONS           2
S_TORCHES           4
TAKE_POTION         3C70
TAKE_POTION_MSG     5113
TORCHES_MSG         500F
TORCH_MSG           4FD1
TORCH_PRICE         A
TRY_RUN             396C
TUTORIAL_INTRO      30F2
TUTORIAL_MSG        453A
UPDATE              3186
UPGRADE_DMG         3B6C
WAKE_UP_MSG         4652
WALL_COLLISIONS     3796
WELCOME             300A
WELCOME_MSG         42DD
WHITE               FFFFFF
WIN_MSG             50C6
WIN_POINT           8156
WIN_POINT_MARK      4BDF
WON_GAME            31DA
